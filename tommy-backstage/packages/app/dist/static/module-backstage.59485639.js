(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{86456:($n,Vt,e)=>{"use strict";e.d(Vt,{r:()=>De});var o=e(53907),p=e(30705),m=e(30204),Y=e(56563),V=e(2784),D=e(77277),W=e(49558),tt=e(73557),Xe=e(39857),r=e(43642),Ve=e(80079),be=e(90941),X=e(32915),k=e(40562),s=e(21853),ne=e(60744),re=e(66569),ie=e(30254),ve=e(13384),Ce=e(15933),u=e(58838),F=e(86737),R=e(4989),M=e(44407),g=e(18628),Ne=e(84219),Oe=e(98685),Qe=e(39781),se=e(39412),Le=e(78258),_e=e(73689),Ke=e(12536),St=e(19219),L=e(41547),pt=e(47591),fe=e(93606),zt=e(3493),Et=e(81887),Dt=e(68542),Wt=e(87561);const Je=w=>(...H)=>{const te=H.length===0?[1]:H,ut=(K,ee)=>typeof K=="string"?K:ee*K;return te.map(K=>{const ee=ut(K,w);return typeof ee=="number"?`${ee}px`:ee}).join(" ")};function _t(w,H){if(!H||typeof H=="string")return;const te=typeof H=="function"?H(w):H;if(te)return{"@global":te}}function Nt(w,H){if(!(!H||typeof H=="string")){if(typeof H=="object"){const te={...w},ut=w.spacing(1);return typeof ut=="number"&&(te.spacing=Je(ut)),Object.fromEntries(Object.entries(H).map(([K,ee])=>typeof ee=="function"?[K,ee({theme:te})]:[K,ee]))}return H}}const Xt=/^&.Mui-([\w-]+)$/;function Ht(w){let H=w;if(!w||typeof w!="object")return H;for(const te of Object.keys(w)){const ut=w[te];if(!(!ut||typeof ut!="object"))for(const K of Object.keys(ut)){const ee=K,He=ee.match(Xt);if(He){const[,lt]=He,{[ee]:Bt,...It}=ut;Bt&&(H={...H,[te]:It,[lt]:Bt})}}}return H}function Ft(w,H={}){const te={},ut={};for(const K of Object.keys(H)){const ee=H[K];ee&&("styleOverrides"in ee&&(K==="MuiCssBaseline"?te[K]=_t(w,ee.styleOverrides):te[K]=Ht(Nt(w,ee.styleOverrides))),"defaultProps"in ee&&(ut[K]=ee.defaultProps))}return{overrides:te,props:ut}}const yt={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},Tt={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function wt(w){var H;const{colors:te,shape:ut,options:K}=w,He=`linear-gradient(90deg, ${(te.length===1?[te[0],te[0]]:te).join(", ")})`,lt=`${ut},  ${He}`,Bt=(H=K==null?void 0:K.fontColor)!=null?H:"#FFFFFF";return{colors:te,shape:ut,backgroundImage:lt,fontColor:Bt}}const Jt={home:wt({colors:Tt.teal,shape:yt.wave}),documentation:wt({colors:Tt.pinkSea,shape:yt.wave2}),tool:wt({colors:Tt.purpleSky,shape:yt.round}),service:wt({colors:Tt.marineBlue,shape:yt.wave}),website:wt({colors:Tt.veryBlue,shape:yt.wave}),library:wt({colors:Tt.rubyRed,shape:yt.wave}),other:wt({colors:Tt.darkGrey,shape:yt.wave}),app:wt({colors:Tt.toastyOrange,shape:yt.wave}),apis:wt({colors:Tt.teal,shape:yt.wave2}),card:wt({colors:Tt.greens,shape:yt.wave})},Ae=16,j='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',E="home";function N(w){const{palette:H,htmlFontSize:te=Ae,fontFamily:ut=j,defaultPageTheme:K=E,pageTheme:ee=Jt,typography:He}=w;if(!ee[K])throw new Error(`${K} is not defined in pageTheme.`);const lt={htmlFontSize:te,fontFamily:ut,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};return{palette:H,typography:He!=null?He:lt,page:ee[K],getPageTheme:({themeId:Bt})=>{var It;return(It=ee[Bt])!=null?It:ee[K]}}}const Q={MuiCssBaseline:{styleOverrides:w=>({html:{height:"100%",fontFamily:w.typography.fontFamily},body:{height:"100%",fontFamily:w.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:w})=>({"&:nth-of-type(odd)":{backgroundColor:w.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:w})=>({"&:nth-of-type(odd)":{backgroundColor:w.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:w})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:w.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:w})=>({padding:w.spacing(1.5,2,1.5,2.5)}),head:({theme:w})=>({wordBreak:"break-word",overflow:"hidden",color:w.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:w})=>({color:w.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,pt._j)(w.palette.link,.3),background:(0,pt.$n)(w.palette.link,.95)},[w.breakpoints.up("md")]:{minWidth:120,fontSize:w.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:w})=>({color:w.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:w})=>({marginRight:w.spacing(1),marginBottom:w.spacing(1)}),label:({theme:w})=>({lineHeight:w.spacing(2.5),fontWeight:w.typography.fontWeightMedium,fontSize:w.spacing(1.75)}),labelSmall:({theme:w})=>({fontSize:w.spacing(1.5)}),deleteIcon:({theme:w})=>({width:w.spacing(3),height:w.spacing(3),margin:w.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:w})=>({width:w.spacing(2),height:w.spacing(2),margin:w.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}}};var q=(w,H,te)=>{if(!H.has(w))throw TypeError("Cannot "+te)},Ge=(w,H,te)=>(q(w,H,"read from private field"),te?te.call(w):H.get(w)),Z=(w,H,te)=>{if(H.has(w))throw TypeError("Cannot add the same private member more than once");H instanceof WeakSet?H.add(w):H.set(w,te)},x=(w,H,te,ut)=>(q(w,H,"write to private field"),ut?ut.call(w,te):H.set(w,te),te),he;class Fe{constructor(H,te){Z(this,he,new Map),x(this,he,new Map),H&&Ge(this,he).set("v4",H),te&&Ge(this,he).set("v5",te)}getTheme(H){return Ge(this,he).get(H)}}he=new WeakMap;function mt(w){const H=N(w),te={...Q,...w.components},ut=(0,fe.Z)({...H,components:te}),K=Ft(ut,te),ee={...(0,_e.Z)(H),...K};return new Fe(ee,ut)}function Qt(w){const H=adaptV4Theme(w),te=createTheme$2(w);return new Fe(te,H)}const Ie={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}},Be={light:mt({palette:Ie.light}),dark:mt({palette:Ie.dark})};Dt.Z.configure(w=>`v5-${w}`);const ct=(0,Ke.Z)({productionPrefix:"jss4-"});function Ot(w){const{children:H,theme:te,noCssBaseline:ut=!1}=w,K=te.getTheme("v4"),ee=te.getTheme("v5");let He;ut||(He=V.createElement(Wt.ZP,null));let lt=V.createElement(V.Fragment,null,He,H);return K&&(lt=V.createElement(St.ZP,{generateClassName:ct},V.createElement(L.Z,{theme:K},lt))),ee&&(lt=V.createElement(zt.Z,{injectFirst:!0},V.createElement(Et.Z,{theme:ee},lt))),lt}function bt(w){var H,te,ut,K;return{props:{MuiGrid:(te=(H=Q)==null?void 0:H.MuiGrid)==null?void 0:te.defaultProps,MuiSwitch:(K=(ut=Q)==null?void 0:ut.MuiSwitch)==null?void 0:K.defaultProps},...N(w)}}function $t(w){return Ft(w,Q).overrides}function Ct(w){const H=bt(w),te=(0,_e.Z)(H),ut=$t(te);return{...te,overrides:ut}}const $e=Ct({palette:Ie.light}),qe=Ct({palette:Ie.dark});var Ee=e(98192),G=e(15222);const ue=[(0,p.ni)({api:m.q,deps:{configApi:m.p},factory:({configApi:w})=>o.pM.compile(`${w.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,p.ni)({api:m.l,deps:{},factory:()=>new o.CX}),(0,p.ni)({api:m.a,deps:{},factory:()=>new o.gN}),(0,p.ni)({api:m.s,deps:{alertApi:m.l},factory:({alertApi:w})=>{const H=new o.KN(w,new o.gr);return o.Jv.forward(H,{hidden:!1}),H}}),(0,p.ni)({api:m.y,deps:{errorApi:m.s},factory:({errorApi:w})=>o.CJ.create({errorApi:w})}),(0,p.ni)({api:m.t,deps:{configApi:m.p,identityApi:m.v,discoveryApi:m.q},factory:({configApi:w,identityApi:H,discoveryApi:te})=>(0,o.jJ)({middleware:[o.II.resolvePluginProtocol({discoveryApi:te}),o.II.injectIdentityAuth({identityApi:H,config:w})]})}),(0,p.ni)({api:m.x,deps:{},factory:()=>new o.YM}),(0,p.ni)({api:m.g,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.eE.create({configApi:te,discoveryApi:w,oauthRequestApi:H,environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.m,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o._i.create({configApi:te,discoveryApi:w,oauthRequestApi:H,environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.d,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.Td.create({configApi:te,discoveryApi:w,oauthRequestApi:H,defaultScopes:["read:user"],environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.o,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.sn.create({configApi:te,discoveryApi:w,oauthRequestApi:H,environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.e,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.aq.create({configApi:te,discoveryApi:w,oauthRequestApi:H,environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.h,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.$_.create({configApi:te,discoveryApi:w,oauthRequestApi:H,environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.i,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.xP.create({configApi:te,discoveryApi:w,oauthRequestApi:H,defaultScopes:["team"],environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:m.j,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.C4.create({configApi:te,discoveryApi:w,oauthRequestApi:H,defaultScopes:["REPO_READ"]})}),(0,p.ni)({api:m.k,deps:{discoveryApi:m.q,oauthRequestApi:m.x,configApi:m.p},factory:({discoveryApi:w,oauthRequestApi:H,configApi:te})=>o.uC.create({configApi:te,discoveryApi:w,oauthRequestApi:H,environment:te.getOptionalString("auth.environment")})}),(0,p.ni)({api:Y.RV,deps:{discovery:m.q,identity:m.v,config:m.p},factory:({config:w,discovery:H,identity:te})=>Y.iM.create({config:w,discovery:H,identity:te})})];function Ue({children:w}){return(0,tt.GV)()?V.createElement(V.Fragment,null,w):V.createElement(tt.VA,null,w)}const nt=()=>V.createElement(W.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),it=({step:w,error:H})=>{let te="";return w==="load-config"?te=`The configuration failed to load, someone should have a look at this error: ${H.message}`:w==="load-chunk"&&(te=`Lazy loaded chunk failed to load, try to reload the page: ${H.message}`),V.createElement(Ue,null,V.createElement(W.mf,{status:"501",statusMessage:te}))},Rt=({error:w,resetError:H,plugin:te})=>V.createElement(W.yu,{title:`Error in ${te==null?void 0:te.getId()}`,defaultExpanded:!0,error:w},V.createElement(D.Z,{variant:"outlined",onClick:H},"Retry")),qt={Progress:W.Ex,Router:Xe.VK,NotFoundErrorPage:nt,BootErrorPage:it,ErrorBoundaryFallback:Rt},nn={brokenImage:Ve.Z,catalog:g.Z,scaffolder:X.Z,techdocs:k.Z,search:s.Z,chat:ne.Z,dashboard:re.Z,docs:ie.Z,email:ve.Z,github:u.Z,group:Ne.Z,help:F.Z,"kind:api":Ce.Z,"kind:component":M.Z,"kind:domain":r.Z,"kind:group":Ne.Z,"kind:location":R.Z,"kind:system":be.Z,"kind:user":Oe.Z,"kind:resource":se.Z,"kind:template":Le.Z,user:Oe.Z,warning:Qe.Z},we=[{id:"light",title:"Light Theme",variant:"light",icon:V.createElement(G.Z,null),Provider:({children:w})=>V.createElement(Ot,{theme:Be.light,children:w})},{id:"dark",title:"Dark Theme",variant:"dark",icon:V.createElement(Ee.Z,null),Provider:({children:w})=>V.createElement(Ot,{theme:Be.dark,children:w})}];function De(w){var H,te,ut,K;return(0,o.bg)({...w,apis:(H=w==null?void 0:w.apis)!=null?H:[],bindRoutes:w==null?void 0:w.bindRoutes,components:{...qt,...w==null?void 0:w.components},configLoader:w==null?void 0:w.configLoader,defaultApis:ue,icons:{...nn,...w==null?void 0:w.icons},plugins:(te=w==null?void 0:w.plugins)!=null?te:[],featureFlags:(ut=w==null?void 0:w.featureFlags)!=null?ut:[],themes:(K=w==null?void 0:w.themes)!=null?K:we})}},88285:($n,Vt,e)=>{"use strict";e.d(Vt,{MS:()=>r,mk:()=>Ve,n3:()=>V});var o=e(34520),p=e(32272),m=e(96279),Y=e.n(m);const V=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function D(be){return!be.cursor}var W=Object.defineProperty,tt=(be,X,k)=>X in be?W(be,X,{enumerable:!0,configurable:!0,writable:!0,value:k}):be[X]=k,Xe=(be,X,k)=>(tt(be,typeof X!="symbol"?X+"":X,k),k);class r{constructor(X){Xe(this,"discoveryApi"),Xe(this,"fetchApi"),this.discoveryApi=X.discoveryApi,this.fetchApi=X.fetchApi||{fetch:Y()}}async getEntityAncestors(X,k){const{kind:s,namespace:ne,name:re}=(0,o.of)(X.entityRef);return await this.requestRequired("GET",`/entities/by-name/${encodeURIComponent(s)}/${encodeURIComponent(ne)}/${encodeURIComponent(re)}/ancestry`,k)}async getLocationById(X,k){return await this.requestOptional("GET",`/locations/${encodeURIComponent(X)}`,k)}async getEntities(X,k){const{filter:s=[],fields:ne=[],order:re,offset:ie,limit:ve,after:Ce}=X!=null?X:{},u=this.getParams(s);if(ne.length&&u.push(`fields=${ne.map(encodeURIComponent).join(",")}`),re)for(const g of[re].flat())g&&u.push(`order=${encodeURIComponent(g.order)}:${encodeURIComponent(g.field)}`);ie!==void 0&&u.push(`offset=${ie}`),ve!==void 0&&u.push(`limit=${ve}`),Ce!==void 0&&u.push(`after=${encodeURIComponent(Ce)}`);const F=u.length?`?${u.join("&")}`:"",R=await this.requestRequired("GET",`/entities${F}`,k),M=(g,Ne)=>{var Oe,Qe;if(((Oe=g.metadata)==null?void 0:Oe.name)===void 0||g.kind===void 0||((Qe=Ne.metadata)==null?void 0:Qe.name)===void 0||Ne.kind===void 0)return 0;const se=(0,o.eE)(g),Le=(0,o.eE)(Ne);return se<Le?-1:se>Le?1:0};return{items:R.sort(M)}}async getEntitiesByRefs(X,k){var s;const ne={entityRefs:X.entityRefs};(s=X.fields)!=null&&s.length&&(ne.fields=X.fields);const ie=`${await this.discoveryApi.getBaseUrl("catalog")}/entities/by-refs`,ve=await this.fetchApi.fetch(ie,{headers:{"Content-Type":"application/json",...(k==null?void 0:k.token)&&{Authorization:`Bearer ${k==null?void 0:k.token}`}},method:"POST",body:JSON.stringify(ne)});if(!ve.ok)throw await p.VL.fromResponse(ve);const{items:Ce}=await ve.json();return{items:Ce.map(u=>u!=null?u:void 0)}}async queryEntities(X={},k){var s,ne;const re=[];if(D(X)){const{fields:ve=[],filter:Ce,limit:u,orderFields:F,fullTextFilter:R}=X;re.push(...this.getParams(Ce)),u!==void 0&&re.push(`limit=${u}`),F!==void 0&&(Array.isArray(F)?F:[F]).forEach(({field:g,order:Ne})=>re.push(`orderField=${g},${Ne}`)),ve.length&&re.push(`fields=${ve.map(encodeURIComponent).join(",")}`);const M=(s=R==null?void 0:R.term)==null?void 0:s.trim();M&&re.push(`fullTextFilterTerm=${M}`),(ne=R==null?void 0:R.fields)!=null&&ne.length&&re.push(`fullTextFilterFields=${R.fields.join(",")}`)}else{const{fields:ve=[],limit:Ce,cursor:u}=X;re.push(`cursor=${u}`),Ce!==void 0&&re.push(`limit=${Ce}`),ve.length&&re.push(`fields=${ve.map(encodeURIComponent).join(",")}`)}const ie=re.length?`?${re.join("&")}`:"";return this.requestRequired("GET",`/entities/by-query${ie}`,k)}async getEntityByRef(X,k){const{kind:s,namespace:ne,name:re}=(0,o.of)(X);return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(s)}/${encodeURIComponent(ne)}/${encodeURIComponent(re)}`,k)}async getEntityByName(X,k){const{kind:s,namespace:ne="default",name:re}=X;return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(s)}/${encodeURIComponent(ne)}/${encodeURIComponent(re)}`,k)}async refreshEntity(X,k){const s=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/refresh`,{headers:{"Content-Type":"application/json",...(k==null?void 0:k.token)&&{Authorization:`Bearer ${k==null?void 0:k.token}`}},method:"POST",body:JSON.stringify({entityRef:X})});if(s.status!==200)throw new Error(await s.text())}async getEntityFacets(X,k){const{filter:s=[],facets:ne}=X,re=this.getParams(s);for(const ve of ne)re.push(`facet=${encodeURIComponent(ve)}`);const ie=re.length?`?${re.join("&")}`:"";return await this.requestOptional("GET",`/entity-facets${ie}`,k)}async addLocation(X,k){const{type:s="url",target:ne,dryRun:re}=X,ie=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/locations${re?"?dryRun=true":""}`,{headers:{"Content-Type":"application/json",...(k==null?void 0:k.token)&&{Authorization:`Bearer ${k==null?void 0:k.token}`}},method:"POST",body:JSON.stringify({type:s,target:ne})});if(ie.status!==201)throw new Error(await ie.text());const{location:ve,entities:Ce,exists:u}=await ie.json();if(!ve)throw new Error(`Location wasn't added: ${ne}`);return{location:ve,entities:Ce,exists:u}}async getLocationByRef(X,k){return(await this.requestRequired("GET","/locations",k)).map(ne=>ne.data).find(ne=>X===(0,o.NZ)(ne))}async removeLocationById(X,k){await this.requestIgnored("DELETE",`/locations/${encodeURIComponent(X)}`,k)}async removeEntityByUid(X,k){await this.requestIgnored("DELETE",`/entities/by-uid/${encodeURIComponent(X)}`,k)}async validateEntity(X,k,s){const ne=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/validate-entity`,{headers:{"Content-Type":"application/json",...(s==null?void 0:s.token)&&{Authorization:`Bearer ${s==null?void 0:s.token}`}},method:"POST",body:JSON.stringify({entity:X,location:k})});if(ne.ok)return{valid:!0};if(ne.status!==400)throw await p.VL.fromResponse(ne);const{errors:re=[]}=await ne.json();return{valid:!1,errors:re}}async requestIgnored(X,k,s){const ne=`${await this.discoveryApi.getBaseUrl("catalog")}${k}`,re=s!=null&&s.token?{Authorization:`Bearer ${s.token}`}:{},ie=await this.fetchApi.fetch(ne,{method:X,headers:re});if(!ie.ok)throw await p.VL.fromResponse(ie)}async requestRequired(X,k,s){const ne=`${await this.discoveryApi.getBaseUrl("catalog")}${k}`,re=s!=null&&s.token?{Authorization:`Bearer ${s.token}`}:{},ie=await this.fetchApi.fetch(ne,{method:X,headers:re});if(!ie.ok)throw await p.VL.fromResponse(ie);return ie.json()}async requestOptional(X,k,s){const ne=`${await this.discoveryApi.getBaseUrl("catalog")}${k}`,re=s!=null&&s.token?{Authorization:`Bearer ${s.token}`}:{},ie=await this.fetchApi.fetch(ne,{method:X,headers:re});if(!ie.ok){if(ie.status===404)return;throw await p.VL.fromResponse(ie)}return await ie.json()}getParams(X=[]){const k=[];for(const s of[X].flat()){const ne=[];for(const[re,ie]of Object.entries(s))for(const ve of[ie].flat())ve===V?ne.push(encodeURIComponent(re)):typeof ve=="string"&&ne.push(`${encodeURIComponent(re)}=${encodeURIComponent(ve)}`);ne.length&&k.push(`filter=${ne.join(",")}`)}return k}}const Ve="backstage.io/catalog-processing"},34520:($n,Vt,e)=>{"use strict";e.d(Vt,{$1:()=>ye,CV:()=>da,Dg:()=>le,In:()=>Ue,KS:()=>pn,M6:()=>nr,M_:()=>ke,NZ:()=>hr,Ou:()=>ua,P1:()=>ta,S4:()=>me,Tf:()=>s,X9:()=>Pe,Zj:()=>We,_b:()=>en,aS:()=>En,cz:()=>hn,eE:()=>Ne,hr:()=>gn,iB:()=>M,l2:()=>k,nP:()=>ht,of:()=>g,q1:()=>yr,w$:()=>rn,wI:()=>qe,wP:()=>Ut,y$:()=>G,zG:()=>X});var o=e(76635),p=e.n(o),m=e(27991),Y=e.n(m);function V(ot){return ot.kind.toLocaleUpperCase("en-US")==="API"}function D(ot){return ot.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function W(ot){return ot.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function tt(ot){return ot.kind.toLocaleUpperCase("en-US")==="GROUP"}function Xe(ot){return ot.kind.toLocaleUpperCase("en-US")==="LOCATION"}function r(ot){return ot.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function Ve(ot){return ot.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function be(ot){return ot.kind.toLocaleUpperCase("en-US")==="USER"}const X="default",k="backstage.io/view-url",s="backstage.io/edit-url",ne="kubernetes.io/api-server",re="kubernetes.io/api-server-certificate-authority",ie="kubernetes.io/auth-provider";var ve=Object.defineProperty,Ce=(ot,pe,vt)=>pe in ot?ve(ot,pe,{enumerable:!0,configurable:!0,writable:!0,value:vt}):ot[pe]=vt,u=(ot,pe,vt)=>(Ce(ot,typeof pe!="symbol"?pe+"":pe,vt),vt);class F{constructor(pe=X){u(this,"namespace"),this.namespace=pe}async enforce(pe){return pe.metadata.namespace?pe:lodash.merge({metadata:{namespace:this.namespace}},pe)}}function R(ot){let pe=ot.indexOf(":");const vt=ot.indexOf("/");vt!==-1&&vt<pe&&(pe=-1);const An=pe===-1?void 0:ot.slice(0,pe),kn=vt===-1?void 0:ot.slice(pe+1,vt),Qn=ot.slice(Math.max(pe+1,vt+1));if(An===""||kn===""||Qn==="")throw new TypeError(`Entity reference "${ot}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:An,namespace:kn,name:Qn}}function M(ot){return{kind:ot.kind,namespace:ot.metadata.namespace||X,name:ot.metadata.name}}function g(ot,pe){var vt,An,kn,Qn;if(!ot)throw new Error("Entity reference must not be empty");const lr=pe==null?void 0:pe.defaultKind,Zr=(pe==null?void 0:pe.defaultNamespace)||X;let Br,cr,y;if(typeof ot=="string"){const l=R(ot);Br=(vt=l.kind)!=null?vt:lr,cr=(An=l.namespace)!=null?An:Zr,y=l.name}else Br=(kn=ot.kind)!=null?kn:lr,cr=(Qn=ot.namespace)!=null?Qn:Zr,y=ot.name;if(Br)if(cr){if(!y){const l=JSON.stringify(ot);throw new Error(`Entity reference ${l} had missing or empty name`)}}else{const l=JSON.stringify(ot);throw new Error(`Entity reference ${l} had missing or empty namespace`)}else{const l=JSON.stringify(ot);throw new Error(`Entity reference ${l} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:Br,namespace:cr,name:y}}function Ne(ot){var pe,vt;let An,kn,Qn;return"metadata"in ot?(An=ot.kind,kn=(pe=ot.metadata.namespace)!=null?pe:X,Qn=ot.metadata.name):(An=ot.kind,kn=(vt=ot.namespace)!=null?vt:X,Qn=ot.name),`${An.toLocaleLowerCase("en-US")}:${kn.toLocaleLowerCase("en-US")}/${Qn.toLocaleLowerCase("en-US")}`}var Oe=Object.defineProperty,Qe=(ot,pe,vt)=>pe in ot?Oe(ot,pe,{enumerable:!0,configurable:!0,writable:!0,value:vt}):ot[pe]=vt,se=(ot,pe,vt)=>(Qe(ot,typeof pe!="symbol"?pe+"":pe,vt),vt);class Le{constructor(pe){se(this,"parentRef");const{kind:vt,namespace:An,name:kn}=g(pe,{defaultKind:"Group",defaultNamespace:X});if(vt.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=Ne({kind:vt,namespace:An,name:kn})}async enforce(pe){if(pe.kind!=="Group")return pe;const vt=pe;return vt.spec.parent||Ne(vt)!==this.parentRef&&(vt.spec.parent=this.parentRef),vt}}class _e{static isValidPrefixAndOrSuffix(pe,vt,An,kn){if(typeof pe!="string")return!1;const Qn=pe.split(vt);return Qn.length===1?kn(Qn[0]):Qn.length===2?An(Qn[0])&&kn(Qn[1]):!1}static isJsonSafe(pe){try{return p().isEqual(pe,JSON.parse(JSON.stringify(pe)))}catch{return!1}}static isValidDnsSubdomain(pe){return typeof pe=="string"&&pe.length>=1&&pe.length<=253&&pe.split(".").every(_e.isValidDnsLabel)}static isValidDnsLabel(pe){return typeof pe=="string"&&pe.length>=1&&pe.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(pe)}static isValidTag(pe){return typeof pe=="string"&&pe.length>=1&&pe.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(pe)}static isValidUrl(pe){if(typeof pe!="string")return!1;try{return new URL(pe),!0}catch{return!1}}static isValidString(pe){var vt;return typeof pe=="string"&&((vt=pe==null?void 0:pe.trim())==null?void 0:vt.length)>=1}static isNonEmptyString(pe){var vt;return typeof pe=="string"&&((vt=pe==null?void 0:pe.trim())==null?void 0:vt.length)>=1}}var Ke="http://json-schema.org/draft-07/schema",St="EntityEnvelope",L="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",pt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],fe="object",zt=["apiVersion","kind","metadata"],Et=!0,Dt={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},Wt={$schema:Ke,$id:St,description:L,examples:pt,type:fe,required:zt,additionalProperties:Et,properties:Dt},Je="http://json-schema.org/draft-07/schema",_t="Entity",Nt="The parts of the format that's common to all versions/kinds of entity.",Xt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],Ht="object",Ft=["apiVersion","kind","metadata"],yt=!1,Tt={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},wt={$schema:Je,$id:_t,description:Nt,examples:Xt,type:Ht,required:Ft,additionalProperties:yt,properties:Tt},Jt="http://json-schema.org/draft-07/schema",Ae="EntityMeta",j="Metadata fields common to all versions/kinds of entity.",E=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],N="object",Q=["name"],q=!0,Ge={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},Z={$schema:Jt,$id:Ae,description:j,examples:E,type:N,required:Q,additionalProperties:q,properties:Ge},x="http://json-schema.org/draft-07/schema",he="common",Fe="object",mt="Common definitions to import from other schemas",Qt={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","targetRef"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference",deprecated:!0},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},Ie={$schema:x,$id:he,type:Fe,description:mt,definitions:Qt};const Be=new Map,ct=[Wt,wt,Z,Ie];function Ot(ot){if(!(ot!=null&&ot.length))throw new TypeError("Unknown error");const pe=ot[0];throw new TypeError(`${pe.instancePath||"<root>"} ${pe.message}${pe.params?` - ${Object.entries(pe.params).map(([vt,An])=>`${vt}: ${An}`).join(", ")}`:""}`)}function bt(ot,pe={}){var vt;const An=(vt=pe==null?void 0:pe.disableCache)!=null?vt:!1,kn=An?"":JSON.stringify(ot);if(!An){const Br=Be.get(kn);if(Br)return Br}const Qn=$t(ot),lr=new(Y())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});Qn.length&&lr.addSchema(Qn,void 0,void 0,!0);const Zr=lr.compile(ot);return An||Be.set(kn,Zr),Zr}function $t(ot){if(typeof ot!="object")return[];const pe=new Set;ot.$id&&pe.add(ot.$id);const vt=new Array,An=[ot];for(;An.length;){const kn=An.pop();for(const Qn of Ct(kn))if(!pe.has(Qn)){pe.add(Qn);const lr=ct.find(Zr=>Zr.$id===Qn);lr&&(vt.push(lr),An.push(lr))}}return vt}function*Ct(ot){const pe=[ot];for(;pe.length;){const vt=pe.pop();if(typeof vt=="object"&&vt)for(const[An,kn]of Object.entries(vt))An==="$ref"&&typeof kn=="string"?yield kn.split("#")[0]:pe.push(kn)}}function $e(ot){const pe=bt(ot||Wt);return vt=>{if(pe(vt)===!0)return vt;throw Ot(pe.errors)}}function qe(ot){const pe=bt(ot);return vt=>{var An;if(pe(vt)===!0)return vt;const Qn=(An=pe.errors)==null?void 0:An.filter(lr=>["/kind","/apiVersion"].includes(lr.instancePath));if(Qn!=null&&Qn.length&&Qn.every(lr=>lr.keyword==="enum"))return!1;throw Ot(pe.errors)}}function Ee(ot){const pe=bt(ot||wt);return vt=>{if(pe(vt)===!0)return vt;throw Ot(pe.errors)}}class G{static isValidApiVersion(pe){return _e.isValidPrefixAndOrSuffix(pe,"/",_e.isValidDnsSubdomain,vt=>vt.length>=1&&vt.length<=63&&/^[a-z0-9A-Z]+$/.test(vt))}static isValidKind(pe){return typeof pe=="string"&&pe.length>=1&&pe.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(pe)}static isValidObjectName(pe){return typeof pe=="string"&&pe.length>=1&&pe.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(pe)}static isValidNamespace(pe){return _e.isValidDnsLabel(pe)}static isValidLabelKey(pe){return _e.isValidPrefixAndOrSuffix(pe,"/",_e.isValidDnsSubdomain,G.isValidObjectName)}static isValidLabelValue(pe){return pe===""||G.isValidObjectName(pe)}static isValidAnnotationKey(pe){return _e.isValidPrefixAndOrSuffix(pe,"/",_e.isValidDnsSubdomain,G.isValidObjectName)}static isValidAnnotationValue(pe){return typeof pe=="string"}}const ue={isValidApiVersion:G.isValidApiVersion,isValidKind:G.isValidKind,isValidEntityName:G.isValidObjectName,isValidNamespace:G.isValidNamespace,isValidLabelKey:G.isValidLabelKey,isValidLabelValue:G.isValidLabelValue,isValidAnnotationKey:G.isValidAnnotationKey,isValidAnnotationValue:G.isValidAnnotationValue,isValidTag:ot=>typeof ot=="string"&&ot.length>=1&&ot.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(ot)};function Ue(ot={}){return{...ue,...ot}}var nt=Object.defineProperty,it=(ot,pe,vt)=>pe in ot?nt(ot,pe,{enumerable:!0,configurable:!0,writable:!0,value:vt}):ot[pe]=vt,Rt=(ot,pe,vt)=>(it(ot,typeof pe!="symbol"?pe+"":pe,vt),vt);class qt{constructor(pe=Ue()){Rt(this,"validators"),this.validators=pe}async enforce(pe){var vt,An,kn,Qn,lr,Zr,Br;function cr(B,Re,st){if(Re==null)throw new Error(`${B} must have a value`);let At;try{At=st(Re)}catch(Mt){throw new Error(`${B} could not be validated, ${Mt}`)}if(!At){let Mt;switch(st.name){case"isValidLabelValue":case"isValidObjectName":Mt="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":Mt="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":Mt="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":Mt="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":Mt="a string";break;case"isValidKind":Mt="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":Mt="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":Mt="a non empty string";break;default:Mt=void 0;break}const Sn=Mt?` expected ${Mt} but found "${Re}".`:"";throw new Error(`"${B}" is not valid;${Sn} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function y(B,Re,st){return Re===void 0||cr(B,Re,st)}cr("apiVersion",pe.apiVersion,this.validators.isValidApiVersion),cr("kind",pe.kind,this.validators.isValidKind),cr("metadata.name",pe.metadata.name,this.validators.isValidEntityName),y("metadata.namespace",pe.metadata.namespace,this.validators.isValidNamespace);for(const[B,Re]of Object.entries((vt=pe.metadata.labels)!=null?vt:[]))cr(`labels.${B}`,B,this.validators.isValidLabelKey),cr(`labels.${B}`,Re,this.validators.isValidLabelValue);for(const[B,Re]of Object.entries((An=pe.metadata.annotations)!=null?An:[]))cr(`annotations.${B}`,B,this.validators.isValidAnnotationKey),cr(`annotations.${B}`,Re,this.validators.isValidAnnotationValue);const l=(kn=pe.metadata.tags)!=null?kn:[];for(let B=0;B<l.length;++B)cr(`tags.${B}`,l[B],this.validators.isValidTag);const b=(Qn=pe.metadata.links)!=null?Qn:[];for(let B=0;B<b.length;++B)cr(`links.${B}.url`,(lr=b[B])==null?void 0:lr.url,_e.isValidUrl),y(`links.${B}.title`,(Zr=b[B])==null?void 0:Zr.title,_e.isNonEmptyString),y(`links.${B}.icon`,(Br=b[B])==null?void 0:Br.icon,G.isValidObjectName);return pe}}var nn=Object.defineProperty,we=(ot,pe,vt)=>pe in ot?nn(ot,pe,{enumerable:!0,configurable:!0,writable:!0,value:vt}):ot[pe]=vt,De=(ot,pe,vt)=>(we(ot,typeof pe!="symbol"?pe+"":pe,vt),vt);const w=null;class H{constructor(pe=w){De(this,"knownFields"),this.knownFields=pe}async enforce(pe){for(const vt of Object.keys(pe))if(!this.knownFields.includes(vt))throw new Error(`Unknown field ${vt}`);return pe}}var te=Object.defineProperty,ut=(ot,pe,vt)=>pe in ot?te(ot,pe,{enumerable:!0,configurable:!0,writable:!0,value:vt}):ot[pe]=vt,K=(ot,pe,vt)=>(ut(ot,typeof pe!="symbol"?pe+"":pe,vt),vt);class ee{constructor(){K(this,"validate")}async enforce(pe){if(!this.validate){const kn=new Ajv({allowUnionTypes:!0});this.validate=kn.addSchema([Ie,Z],void 0,void 0,!0).compile(wt)}if(this.validate(pe)===!0)return pe;const[An]=this.validate.errors||[];throw An?new Error(`Malformed envelope, ${An.instancePath||"<root>"} ${An.message}`):new Error("Malformed envelope, Unknown error")}}class He{constructor(pe){this.policies=pe}async enforce(pe){let vt=pe;for(const An of this.policies){const kn=await An.enforce(vt);if(!kn)throw new Error(`Policy ${An.constructor.name} did not return a result`);vt=kn}return vt}}class lt{constructor(pe){this.policies=pe}async enforce(pe){for(const vt of this.policies){const An=await vt.enforce(pe);if(An)return An}throw new Error("The entity did not match any known policy")}}const Bt={allOf(ot){return new He(ot)},oneOf(ot){return new lt(ot)}};var It="http://json-schema.org/draft-07/schema",an="ApiV1alpha1",on="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",fn=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],tn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],cn={$schema:It,$id:an,description:on,examples:fn,allOf:tn};function ln(ot){let pe;return{async check(vt){return pe||(pe=qe(ot)),pe(vt)===vt}}}const wn=ln(cn);var dn="http://json-schema.org/draft-07/schema",bn="ComponentV1alpha1",ce='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',ae=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],Ze=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],Pt={$schema:dn,$id:bn,description:ce,examples:ae,allOf:Ze};const Gt=ln(Pt);var jt="http://json-schema.org/draft-07/schema",_n="DomainV1alpha1",Wn="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",Gn=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],dr=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],gr={$schema:jt,$id:_n,description:Wn,examples:Gn,allOf:dr};const Jn=ln(gr);var pr="http://json-schema.org/draft-07/schema",Pr="GroupV1alpha1",Lr="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",vr=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],wr=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],Or={$schema:pr,$id:Pr,description:Lr,examples:vr,allOf:wr};const Tr=ln(Or);var oe="http://json-schema.org/draft-07/schema",Ye="LocationV1alpha1",rt="A location is a marker that references other places to look for catalog data.",C=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],_=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],O={$schema:oe,$id:Ye,description:rt,examples:C,allOf:_};const T=ln(O),me="ownedBy",ye="ownerOf",le="consumesApi",Pe="apiConsumedBy",ke="providesApi",We="apiProvidedBy",ht="dependsOn",rn="dependencyOf",en="parentOf",Ut="childOf",gn="memberOf",pn="hasMember",hn="partOf",En="hasPart";var Cn="http://json-schema.org/draft-07/schema",Yn="ResourceV1alpha1",Hn="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",In=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],Ln=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],Zn={$schema:Cn,$id:Yn,description:Hn,examples:In,allOf:Ln};const sn=ln(Zn);var Rn="http://json-schema.org/draft-07/schema",tr="SystemV1alpha1",ir="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",Cr=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],Mr=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Rr={$schema:Rn,$id:tr,description:ir,examples:Cr,allOf:Mr};const Vr=ln(Rr);var kr="http://json-schema.org/draft-07/schema",Ur="UserV1alpha1",Nr="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",Hr=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],qr=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],ea={$schema:kr,$id:Ur,description:Nr,examples:Hr,allOf:qr};const pa=ln(ea),ta="backstage.io/managed-by-location",yr="backstage.io/managed-by-origin-location",nr="backstage.io/source-location",rr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function ua(ot){if(typeof ot!="string")throw new TypeError(`Unable to parse location ref '${ot}', unexpected argument ${typeof ot}`);const pe=ot.indexOf(":");if(pe<0)throw new TypeError(`Unable to parse location ref '${ot}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const vt=ot.substring(0,pe).trim(),An=ot.substring(pe+1).trim();if(!vt||!An)throw new TypeError(`Unable to parse location ref '${ot}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(vt==="http"||vt==="https")throw new TypeError(`Invalid location ref '${ot}', please prefix it with 'url:', e.g. 'url:${ot}'`);if(rr.test(An))throw new TypeError(`Invalid location ref '${ot}', target is a javascript: URL`);return{type:vt,target:An}}function hr(ot){const{type:pe,target:vt}=ot;if(pe){if(!vt)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(rr.test(vt))throw new TypeError(`Invalid location ref '${pe}:${vt}', target is a javascript: URL`);return`${pe}:${vt}`}function da(ot){var pe,vt,An,kn,Qn;const lr=(Qn=(vt=(pe=ot.metadata)==null?void 0:pe.annotations)==null?void 0:vt[nr])!=null?Qn:(kn=(An=ot.metadata)==null?void 0:An.annotations)==null?void 0:kn[ta];if(!lr)throw new Error(`Entity '${Ne(ot)}' is missing location`);return ua(lr)}},53907:($n,Vt,e)=>{"use strict";e.d(Vt,{CX:()=>wr,WY:()=>vt,uC:()=>pr,xP:()=>Gn,C4:()=>gr,KN:()=>ye,gr:()=>We,II:()=>Zn,wQ:()=>Do,Td:()=>ut,aq:()=>ee,eE:()=>Bt,_i:()=>Ze,gN:()=>Tr,YM:()=>Ur,sn:()=>fn,$_:()=>_n,Jv:()=>ht,pM:()=>T,CJ:()=>ta,jJ:()=>hn,bg:()=>Va});var o=e(2784),p=e(13980),m=e.n(p),Y=e(18473),V=e(82394),D=e.n(V),W=e(30204),tt=e(30705),Xe=e(30195),r=e(9850),Ve=e.n(r),be=e(12782),X=e.n(be);const k=null;function s(d,n){let i,h=!1;const A={};try{i=n!=null&&n.key?d.getConfig(n.key):d;for(const Se of k){const et=i.getOptionalNumber(Se);et!==void 0&&(A[Se]=et,h=!0)}}catch(Se){throw new InputError(`Failed to read duration from config, ${Se}`)}try{if(!h){const et=k.map(at=>`'${at}'`).join(", ");throw new Error(`Needs one or more of ${et}`)}const Se=i.keys().filter(et=>!k.includes(et));if(Se.length){const et=Se.length===1?"property":"properties",at=Se.map(Kt=>`'${Kt}'`).join(", "),xt=k.map(Kt=>`'${Kt}'`).join(", ");throw new Error(`Unknown ${et} ${at}; expected one or more of ${xt}`)}}catch(Se){let et="Failed to read duration from config";throw n!=null&&n.key&&(et+=` at '${n.key}'`),new InputError(`${et}, ${Se}`)}return A}var ne=Object.defineProperty,re=(d,n,i)=>n in d?ne(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,ie=(d,n,i)=>(re(d,typeof n!="symbol"?n+"":n,i),i);const ve=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function Ce(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function u(d){if(d===null)return"null";if(Array.isArray(d))return"array";const n=typeof d;return n==="number"&&isNaN(d)?"nan":n==="string"&&d===""?"empty-string":n}const F={type(d,n,i,h){return`Invalid type in config for key '${d}' in '${n}', got ${i}, wanted ${h}`},missing(d){return`Missing required config value at '${d}'`},convert(d,n,i){return`Unable to convert config value for key '${d}' in '${n}' to a ${i}`}};class R{constructor(n,i="mock-config",h,A=""){this.data=n,this.context=i,this.fallback=h,this.prefix=A,ie(this,"filteredKeys"),ie(this,"notifiedFilteredKeys",new Set)}static fromConfigs(n){return n.length===0?new R(void 0):n.reduce((i,{data:h,context:A,filteredKeys:Se,deprecatedKeys:et})=>{const at=new R(h,A,i);if(at.filteredKeys=Se,et)for(const{key:xt,description:Kt}of et)console.warn(`The configuration key '${xt}' of ${A} is deprecated and may be removed soon. ${Kt||""}`);return at},void 0)}has(n){var i,h;return this.readValue(n)!==void 0?!0:(h=(i=this.fallback)==null?void 0:i.has(n))!=null?h:!1}keys(){var n,i;const h=this.data?Object.keys(this.data):[],A=(i=(n=this.fallback)==null?void 0:n.keys())!=null?i:[];return[...new Set([...h,...A])]}get(n){const i=this.getOptional(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n!=null?n:"")));return i}getOptional(n){var i,h;const A=Ve()(this.readValue(n)),Se=(i=this.fallback)==null?void 0:i.getOptional(n);return A===void 0?Se:Se===void 0?A:X()({},{value:Se},{value:A},(et,at)=>!Ce(at)||!Ce(et)?at:void 0).value}getConfig(n){const i=this.getOptionalConfig(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n)));return i}getOptionalConfig(n){var i;const h=this.readValue(n),A=(i=this.fallback)==null?void 0:i.getOptionalConfig(n);if(Ce(h))return this.copy(h,n,A);if(h!==void 0)throw new TypeError(F.type(this.fullKey(n),this.context,u(h),"object"));return A}getConfigArray(n){const i=this.getOptionalConfigArray(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n)));return i}getOptionalConfigArray(n){var i;const h=this.readConfigValue(n,A=>{if(!Array.isArray(A))return{expected:"object-array"};for(const[Se,et]of A.entries())if(!Ce(et))return{expected:"object-array",value:et,key:`${n}[${Se}]`};return!0});if(h)return h.map((A,Se)=>this.copy(A,`${n}[${Se}]`))}getNumber(n){const i=this.getOptionalNumber(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n)));return i}getOptionalNumber(n){const i=this.readConfigValue(n,A=>typeof A=="number"||typeof A=="string"||{expected:"number"});if(typeof i=="number"||i===void 0)return i;const h=Number(i);if(!Number.isFinite(h))throw new Error(F.convert(this.fullKey(n),this.context,"number"));return h}getBoolean(n){const i=this.getOptionalBoolean(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n)));return i}getOptionalBoolean(n){const i=this.readConfigValue(n,A=>typeof A=="boolean"||typeof A=="number"||typeof A=="string"||{expected:"boolean"});if(typeof i=="boolean"||i===void 0)return i;const h=String(i).trim();if(/^(?:y|yes|true|1|on)$/i.test(h))return!0;if(/^(?:n|no|false|0|off)$/i.test(h))return!1;throw new Error(F.convert(this.fullKey(n),this.context,"boolean"))}getString(n){const i=this.getOptionalString(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n)));return i}getOptionalString(n){return this.readConfigValue(n,i=>typeof i=="string"&&i!==""||{expected:"string"})}getStringArray(n){const i=this.getOptionalStringArray(n);if(i===void 0)throw new Error(F.missing(this.fullKey(n)));return i}getOptionalStringArray(n){return this.readConfigValue(n,i=>{if(!Array.isArray(i))return{expected:"string-array"};for(const[h,A]of i.entries())if(typeof A!="string"||A==="")return{expected:"string-array",value:A,key:`${n}[${h}]`};return!0})}fullKey(n){return`${this.prefix}${this.prefix?".":""}${n}`}copy(n,i,h){const A=new R(n,this.context,h,this.fullKey(i));return A.filteredKeys=this.filteredKeys,A}readConfigValue(n,i){var h,A;const Se=this.readValue(n);if(Se===void 0)return(A=this.fallback)==null?void 0:A.readConfigValue(n,i);const et=i(Se);if(et!==!0){const{key:at=n,value:xt=Se,expected:Kt}=et;throw new TypeError(F.type(this.fullKey(at),this.context,u(xt),Kt))}return Se}readValue(n){const i=n?n.split("."):[];for(const A of i)if(!ve.test(A))throw new TypeError(`Invalid config key '${n}'`);if(this.data===void 0)return;let h=this.data;for(const[A,Se]of i.entries())if(Ce(h))h=h[Se];else if(h!==void 0){const et=this.fullKey(i.slice(0,A).join("."));throw new TypeError(F.type(et,this.context,u(h),"object"))}return h}}var M=e(73557),g=e(16060),Ne=e(64279),Oe=e(83487),Qe=e(34519),se=e.n(Qe),Le=e(72164),_e=e(24991),Ke=Object.defineProperty,St=(d,n,i)=>n in d?Ke(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,L=(d,n,i)=>(St(d,typeof n!="symbol"?n+"":n,i),i);class pt{constructor(...n){L(this,"holders"),this.holders=n}get(n){for(const i of this.holders){const h=i.get(n);if(h)return h}}}const fe=(0,Y.CT)("api-context"),zt=d=>{var n;const{apis:i,children:h}=d,A=(n=(0,o.useContext)(fe))==null?void 0:n.atVersion(1),Se=A?new pt(i,A):i;return o.createElement(fe.Provider,{value:(0,Y.EI)({1:Se}),children:h})};zt.propTypes={apis:m().shape({get:m().func.isRequired}).isRequired,children:m().node};var Et=Object.defineProperty,Dt=(d,n,i)=>n in d?Et(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Wt=(d,n,i)=>(Dt(d,typeof n!="symbol"?n+"":n,i),i);class Je{constructor(n){this.factories=n,Wt(this,"apis",new Map)}static validateFactories(n,i){for(const h of i){const A=[h],Se=new Set;for(;A.length;){const et=A.shift(),at=n.get(et);if(at)for(const xt of Object.values(at.deps)){if(xt.id===h.id)throw new Error(`Circular dependency of api factory for ${h}`);Se.has(xt)||(Se.add(xt),A.push(xt))}}}}get(n){return this.load(n)}load(n,i=[]){const h=this.apis.get(n.id);if(h)return h;const A=this.factories.get(n);if(!A)return;if(i.includes(A.api))throw new Error(`Circular dependency of api factory for ${A.api}`);const Se=this.loadDeps(n,A.deps,[...i,A.api]),et=A.factory(Se);return this.apis.set(n.id,et),et}loadDeps(n,i,h){const A={};for(const Se in i)if(i.hasOwnProperty(Se)){const et=i[Se],at=this.load(et,h);if(!at)throw new Error(`No API factory available for dependency ${et} of dependent ${n}`);A[Se]=at}return A}}var _t=Object.defineProperty,Nt=(d,n,i)=>n in d?_t(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Xt=(d,n,i)=>(Nt(d,typeof n!="symbol"?n+"":n,i),i),Ht=(d=>(d[d.default=10]="default",d[d.app=50]="app",d[d.static=100]="static",d))(Ht||{});class Ft{constructor(){Xt(this,"factories",new Map)}register(n,i){const h=Ht[n],A=this.factories.get(i.api.id);return A&&A.priority>=h?!1:(this.factories.set(i.api.id,{priority:h,factory:i}),!0)}get(n){const i=this.factories.get(n.id);if(i)return i.factory}getAllApis(){const n=new Set;for(const{factory:i}of this.factories.values())n.add(i.api);return n}}function yt(d){return new Promise((n,i)=>{const h=d.width||500,A=d.height||700,Se=window.screen.width/2-h/2,et=window.screen.height/2-A/2,at=window.open(d.url,d.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${h},height=${A},top=${et},left=${Se}`);let xt="";if(!at||typeof at.closed=="undefined"||at.closed){const On=new Error("Failed to open auth popup.");On.name="PopupRejectedError",i(On);return}const Kt=On=>{if(On.source!==at||On.origin!==d.origin)return;const{data:ar}=On;if(ar.type==="config_info"){xt=ar.targetOrigin;return}if(ar.type!=="authorization_response")return;const Fn=ar;if("error"in Fn){const sr=new Error(Fn.error.message);sr.name=Fn.error.name,i(sr)}else n(Fn.response);Bn()},zn=setInterval(()=>{if(at.closed){const On=`Login failed, ${xt&&xt!==window.location.origin?`Incorrect app origin, expected ${xt}`:"popup was closed"}`,ar=new Error(On);ar.name="PopupClosedError",i(ar),Bn()}},100);function Bn(){window.removeEventListener("message",Kt),clearInterval(zn)}window.addEventListener("message",Kt)})}var Tt=Object.defineProperty,wt=(d,n,i)=>n in d?Tt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Jt=(d,n,i)=>(wt(d,typeof n!="symbol"?n+"":n,i),i);let Ae=!1;function j(d){return[...d].join(" ")}class E{constructor(n){Jt(this,"discoveryApi"),Jt(this,"environment"),Jt(this,"provider"),Jt(this,"joinScopesFunc"),Jt(this,"authRequester"),Jt(this,"sessionTransform"),Jt(this,"enableExperimentalRedirectFlow"),Jt(this,"popupOptions");var i;const{configApi:h,discoveryApi:A,environment:Se,provider:et,joinScopes:at=j,oauthRequestApi:xt,sessionTransform:Kt=Bn=>Bn,popupOptions:zn}=n;!Ae&&!h&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),Ae=!0),this.enableExperimentalRedirectFlow=h&&(i=h.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?i:!1,this.authRequester=xt.createAuthRequester({provider:et,onAuthRequest:async Bn=>this.enableExperimentalRedirectFlow?this.executeRedirect(Bn):this.showPopup(Bn)}),this.discoveryApi=A,this.environment=Se,this.provider=et,this.joinScopesFunc=at,this.sessionTransform=Kt,this.popupOptions=zn}async createSession(n){return n.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(n.scopes):this.showPopup(n.scopes):this.authRequester(n.scopes)}async refreshSession(n){const i=await fetch(await this.buildUrl("/refresh",{optional:!0,...n&&{scope:this.joinScopesFunc(n)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(A=>{throw new Error(`Auth refresh request failed, ${A}`)});if(!i.ok){const A=new Error(`Auth refresh request failed, ${i.statusText}`);throw A.status=i.status,A}const h=await i.json();if(h.error){const A=new Error(h.error.message);throw h.error.name&&(A.name=h.error.name),A}return await this.sessionTransform(h)}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!n.ok){const i=new Error(`Logout request failed, ${n.statusText}`);throw i.status=n.status,i}}async showPopup(n){var i,h,A,Se,et,at,xt,Kt;const zn=this.joinScopesFunc(n),Bn=await this.buildUrl("/start",{scope:zn,origin:window.location.origin,flow:"popup"}),On=(h=(i=this.popupOptions)==null?void 0:i.size)!=null&&h.fullscreen?window.screen.width:((Se=(A=this.popupOptions)==null?void 0:A.size)==null?void 0:Se.width)||450,ar=(at=(et=this.popupOptions)==null?void 0:et.size)!=null&&at.fullscreen?window.screen.height:((Kt=(xt=this.popupOptions)==null?void 0:xt.size)==null?void 0:Kt.height)||730,Fn=await yt({url:Bn,name:`${this.provider.title} Login`,origin:new URL(Bn).origin,width:On,height:ar});return await this.sessionTransform(Fn)}async executeRedirect(n){const i=this.joinScopesFunc(n);return window.location.href=await this.buildUrl("/start",{scope:i,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(n,i){const h=await this.discoveryApi.getBaseUrl("auth"),A=this.buildQueryString({...i,env:this.environment});return`${h}/${this.provider.id}${n}${A}`}buildQueryString(n){if(!n)return"";const i=Object.entries(n).map(([h,A])=>{if(typeof A=="string")return`${encodeURIComponent(h)}=${encodeURIComponent(A)}`;if(A)return encodeURIComponent(h)}).filter(Boolean).join("&");return i?`?${i}`:""}}var N=Object.defineProperty,Q=(d,n,i)=>n in d?N(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,q=(d,n,i)=>(Q(d,typeof n!="symbol"?n+"":n,i),i);class Ge{constructor(n){q(this,"discoveryApi"),q(this,"environment"),q(this,"provider");const{discoveryApi:i,environment:h,provider:A}=n;this.discoveryApi=i,this.environment=h,this.provider=A}async createSession(){const n=await this.buildUrl("/start"),i=await yt({url:n,name:`${this.provider.title} Login`,origin:new URL(n).origin,width:450,height:730});return{...i,id:i.profile.email}}async refreshSession(){}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!n.ok){const i=new Error(`Logout request failed, ${n.statusText}`);throw i.status=n.status,i}}async buildUrl(n){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${n}?env=${this.environment}`}}function Z(d,n){for(const i of n)if(!d.has(i))return!1;return!0}class x{constructor(n){this.options=n}sessionExistsAndHasScope(n,i){if(!n)return!1;if(!i||this.options.sessionScopes===void 0)return!0;const h=this.options.sessionScopes(n);return Z(h,i)}getExtendedScope(n,i){const h=new Set(this.options.defaultScopes);if(n&&this.options.sessionScopes!==void 0){const A=this.options.sessionScopes(n);for(const Se of A)h.add(Se)}if(i)for(const A of i)h.add(A);return h}}var he=Object.defineProperty,Fe=(d,n,i)=>n in d?he(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,mt=(d,n,i)=>(Fe(d,typeof n!="symbol"?n+"":n,i),i);class Qt{constructor(){mt(this,"isClosed",!1),mt(this,"terminatingError"),mt(this,"observable",new(D())(n=>this.isClosed?(this.terminatingError?n.error(this.terminatingError):n.complete(),()=>{}):(this.subscribers.add(n),()=>{this.subscribers.delete(n)}))),mt(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(i=>i.next(n))}error(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(i=>i.error(n))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,i,h){const A=typeof n=="function"?{next:n,error:i,complete:h}:n;return this.observable.subscribe(A)}}class Ie{constructor(n){mt(this,"isClosed"),mt(this,"currentValue"),mt(this,"terminatingError"),mt(this,"observable"),mt(this,"subscribers",new Set),this.isClosed=!1,this.currentValue=n,this.terminatingError=void 0,this.observable=new(D())(i=>this.isClosed?(this.terminatingError?i.error(this.terminatingError):i.complete(),()=>{}):(i.next(this.currentValue),this.subscribers.add(i),()=>{this.subscribers.delete(i)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=n,this.subscribers.forEach(i=>i.next(n))}error(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(i=>i.error(n))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,i,h){const A=typeof n=="function"?{next:n,error:i,complete:h}:n;return this.observable.subscribe(A)}}var Be=Object.defineProperty,ct=(d,n,i)=>n in d?Be(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Ot=(d,n,i)=>(ct(d,typeof n!="symbol"?n+"":n,i),i);class bt{constructor(){Ot(this,"subject",new Ie(W.S.SignedOut)),Ot(this,"signedIn",!1)}setIsSignedIn(n){this.signedIn!==n&&(this.signedIn=n,this.subject.next(this.signedIn?W.S.SignedIn:W.S.SignedOut))}sessionState$(){return this.subject}}var $t=Object.defineProperty,Ct=(d,n,i)=>n in d?$t(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,$e=(d,n,i)=>(Ct(d,typeof n!="symbol"?n+"":n,i),i);class qe{constructor(n){$e(this,"connector"),$e(this,"helper"),$e(this,"sessionScopesFunc"),$e(this,"sessionShouldRefreshFunc"),$e(this,"stateTracker",new bt),$e(this,"refreshPromise"),$e(this,"currentSession");const{connector:i,defaultScopes:h=new Set,sessionScopes:A,sessionShouldRefresh:Se}=n;this.connector=i,this.sessionScopesFunc=A,this.sessionShouldRefreshFunc=Se,this.helper=new x({sessionScopes:A,defaultScopes:h})}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const h=await this.collapsedSessionRefresh(n.scopes),A=this.sessionScopesFunc(this.currentSession),Se=this.sessionScopesFunc(h);return Z(Se,A)&&(this.currentSession=h),h}catch(h){if(n.optional)return;throw h}}if(!this.currentSession&&!n.instantPopup)try{const i=await this.collapsedSessionRefresh(n.scopes);return this.currentSession=i,this.getSession(n)}catch{}if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(n){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,n));try{const i=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),i}finally{delete this.refreshPromise}}}var Ee=Object.defineProperty,G=(d,n,i)=>n in d?Ee(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,ue=(d,n,i)=>(G(d,typeof n!="symbol"?n+"":n,i),i);class Ue{constructor(n){ue(this,"connector"),ue(this,"helper"),ue(this,"stateTracker",new bt),ue(this,"currentSession");const{connector:i,defaultScopes:h=new Set,sessionScopes:A}=n;this.connector=i,this.helper=new x({sessionScopes:A,defaultScopes:h})}setSession(n){this.currentSession=n,this.stateTracker.setIsSignedIn(Boolean(n))}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes))return this.currentSession;if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}var nt=Object.defineProperty,it=(d,n,i)=>n in d?nt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Rt=(d,n,i)=>(it(d,typeof n!="symbol"?n+"":n,i),i);class qt{constructor(n){Rt(this,"manager"),Rt(this,"storageKey"),Rt(this,"schema"),Rt(this,"sessionShouldRefreshFunc"),Rt(this,"helper");const{manager:i,storageKey:h,schema:A,sessionScopes:Se,sessionShouldRefresh:et=()=>!1}=n;this.manager=i,this.storageKey=h,this.schema=A,this.sessionShouldRefreshFunc=et,this.helper=new x({sessionScopes:Se,defaultScopes:new Set})}setSession(n){this.manager.setSession(n),this.saveSession(n)}async getSession(n){const{scopes:i}=n,h=this.loadSession();if(this.helper.sessionExistsAndHasScope(h,i)&&!this.sessionShouldRefreshFunc(h))return this.manager.setSession(h),h;const A=await this.manager.getSession(n);return this.saveSession(A),A}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const n=localStorage.getItem(this.storageKey);if(n){const i=JSON.parse(n,(h,A)=>(A==null?void 0:A.__type)==="Set"?new Set(A.__value):A);try{return this.schema.parse(i)}catch(h){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${h}`),h}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(n){if(n===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(n)}catch(i){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${i}`);return}localStorage.setItem(this.storageKey,JSON.stringify(n,(i,h)=>h instanceof Set?{__type:"Set",__value:Array.from(h)}:h))}}var nn=Object.defineProperty,we=(d,n,i)=>n in d?nn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,De=(d,n,i)=>(we(d,typeof n!="symbol"?n+"":n,i),i);const w={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class H{constructor(n){De(this,"sessionManager"),De(this,"scopeTransform"),this.sessionManager=n.sessionManager,this.scopeTransform=n.scopeTransform}static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Se=w,oauthRequestApi:et,defaultScopes:at=[],scopeTransform:xt=On=>On,popupOptions:Kt}=n,zn=new E({configApi:i,discoveryApi:h,environment:A,provider:Se,oauthRequestApi:et,sessionTransform({backstageIdentity:On,...ar}){var Fn;const sr={...ar,providerInfo:{idToken:ar.providerInfo.idToken,accessToken:ar.providerInfo.accessToken,scopes:H.normalizeScopes(xt,ar.providerInfo.scope),expiresAt:ar.providerInfo.expiresInSeconds?new Date(Date.now()+ar.providerInfo.expiresInSeconds*1e3):void 0}};if(On){const Xr=(Fn=On.expiresInSeconds)!=null?Fn:ar.providerInfo.expiresInSeconds;sr.backstageIdentity={token:On.token,identity:On.identity,expiresAt:Xr?new Date(Date.now()+Xr*1e3):void 0}}return sr},popupOptions:Kt}),Bn=new qe({connector:zn,defaultScopes:new Set(at),sessionScopes:On=>On.providerInfo.scopes,sessionShouldRefresh:On=>{var ar,Fn;let sr=1/0;return(ar=On.providerInfo)!=null&&ar.expiresAt&&(sr=Math.min(sr,(On.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(Fn=On.backstageIdentity)!=null&&Fn.expiresAt&&(sr=Math.min(sr,(On.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),sr<60*5}});return new H({sessionManager:Bn,scopeTransform:xt})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(n,i){var h;const A=H.normalizeScopes(this.scopeTransform,n),Se=await this.sessionManager.getSession({...i,scopes:A});return(h=Se==null?void 0:Se.providerInfo.accessToken)!=null?h:""}async getIdToken(n={}){var i;const h=await this.sessionManager.getSession({...n,scopes:new Set(["openid"])});return(i=h==null?void 0:h.providerInfo.idToken)!=null?i:""}async getBackstageIdentity(n={}){const i=await this.sessionManager.getSession(n);return i==null?void 0:i.backstageIdentity}async getProfile(n={}){const i=await this.sessionManager.getSession(n);return i==null?void 0:i.profile}static normalizeScopes(n,i){if(!i)return new Set;const h=Array.isArray(i)?i:i.split(/[\s|,]/).filter(Boolean);return new Set(n(h))}}const te={id:"github",title:"GitHub",icon:()=>null};class ut{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Se=te,oauthRequestApi:et,defaultScopes:at=["read:user"]}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Se,environment:A,defaultScopes:at})}}const K={id:"gitlab",title:"GitLab",icon:()=>null};class ee{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Se=K,oauthRequestApi:et,defaultScopes:at=["read_user"]}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Se,environment:A,defaultScopes:at})}}const He={id:"google",title:"Google",icon:()=>null},lt="https://www.googleapis.com/auth/";class Bt{static create(n){const{configApi:i,discoveryApi:h,oauthRequestApi:A,environment:Se="development",provider:et=He,defaultScopes:at=["openid",`${lt}userinfo.email`,`${lt}userinfo.profile`]}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:A,provider:et,environment:Se,defaultScopes:at,scopeTransform(xt){return xt.map(Kt=>Kt==="openid"?Kt:Kt==="profile"||Kt==="email"?`${lt}userinfo.${Kt}`:Kt.startsWith(lt)?Kt:`${lt}${Kt}`)}})}}const It={id:"okta",title:"Okta",icon:()=>null},an=new Set(["openid","profile","email","phone","address","groups","offline_access"]),on="okta.";class fn{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Se=It,oauthRequestApi:et,defaultScopes:at=["openid","email","profile","offline_access"]}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Se,environment:A,defaultScopes:at,scopeTransform(xt){return xt.map(Kt=>an.has(Kt)||Kt.startsWith(on)?Kt:`${on}${Kt}`)}})}}const tn=Xe.z.object({profile:Xe.z.object({email:Xe.z.string().optional(),displayName:Xe.z.string().optional(),picture:Xe.z.string().optional()}),backstageIdentity:Xe.z.object({token:Xe.z.string(),identity:Xe.z.object({type:Xe.z.literal("user"),userEntityRef:Xe.z.string(),ownershipEntityRefs:Xe.z.array(Xe.z.string())})})}),cn={id:"saml",title:"SAML",icon:()=>null};class ln{constructor(n){this.sessionManager=n}static create(n){const{discoveryApi:i,environment:h="development",provider:A=cn}=n,Se=new Ge({discoveryApi:i,environment:h,provider:A}),et=new Ue({connector:Se}),at=new qt({manager:et,storageKey:`${A.id}Session`,schema:tn});return new ln(at)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(n={}){const i=await this.sessionManager.getSession(n);return i==null?void 0:i.backstageIdentity}async getProfile(n={}){const i=await this.sessionManager.getSession(n);return i==null?void 0:i.profile}}var wn=Object.defineProperty,dn=(d,n,i)=>n in d?wn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,bn=(d,n,i)=>(dn(d,typeof n!="symbol"?n+"":n,i),i);const ce={id:"microsoft",title:"Microsoft",icon:()=>null},ae=class Za{constructor(n){bn(this,"oauth2"),bn(this,"configApi"),bn(this,"environment"),bn(this,"provider"),bn(this,"oauthRequestApi"),bn(this,"discoveryApi"),bn(this,"scopeTransform");const{configApi:i,environment:h="development",provider:A=ce,oauthRequestApi:Se,discoveryApi:et,defaultScopes:at=["openid","offline_access","profile","email","User.Read"],scopeTransform:xt=Kt=>Kt.concat("offline_access")}=n;this.configApi=i,this.environment=h,this.provider=A,this.oauthRequestApi=Se,this.discoveryApi=et,this.scopeTransform=xt,this.oauth2={[Za.MicrosoftGraphID]:H.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:at})}}static create(n){return new Za(n)}microsoftGraph(){return this.oauth2[Za.MicrosoftGraphID]}static resourceForScopes(n){var i;const h=[...new Set(n.split(" ").map(Za.resourceForScope).filter(Se=>Se!=="openid"))];if(h.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${h.join(", ")}. Access tokens can only have a single audience.`));const A=(i=h[0])!=null?i:Za.MicrosoftGraphID;return Promise.resolve(A)}static resourceForScope(n){var i;const h=(i=n.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:i.groups;if(h){const{resourceURI:A}=h;return A.replace(/^api:\/\//,"")}switch(n){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return Za.MicrosoftGraphID}}async getAccessToken(n,i){const h=n===void 0?Za.MicrosoftGraphID:await Za.resourceForScopes(Array.isArray(n)?n.join(" "):n);return h in this.oauth2||(this.oauth2[h]=H.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[h].getAccessToken(n,i)}getIdToken(n){return this.microsoftGraph().getIdToken(n)}getProfile(n){return this.microsoftGraph().getProfile(n)}getBackstageIdentity(n){return this.microsoftGraph().getBackstageIdentity(n)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};bn(ae,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let Ze=ae;const Pt={id:"onelogin",title:"onelogin",icon:()=>null},Gt=new Set(["openid","profile","email","phone","address","groups","offline_access"]),jt="onelogin.";class _n{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Se=Pt,oauthRequestApi:et}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Se,environment:A,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(at){return at.map(xt=>Gt.has(xt)||xt.startsWith(jt)?xt:`${jt}${xt}`)}})}}const Wn={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Gn{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Se=Wn,oauthRequestApi:et,defaultScopes:at=["team"]}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Se,environment:A,defaultScopes:at})}}const dr={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class gr{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Se=dr,oauthRequestApi:et,defaultScopes:at=["PROJECT_ADMIN"]}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Se,environment:A,defaultScopes:at})}}const Jn={id:"atlassian",title:"Atlassian",icon:()=>null};class pr{static create(n){const{configApi:i,discoveryApi:h,environment:A="development",provider:Se=Jn,oauthRequestApi:et}=n;return H.create({configApi:i,discoveryApi:h,oauthRequestApi:et,provider:Se,environment:A})}}var Pr=Object.defineProperty,Lr=(d,n,i)=>n in d?Pr(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,vr=(d,n,i)=>(Lr(d,typeof n!="symbol"?n+"":n,i),i);class wr{constructor(){vr(this,"subject",new Qt)}post(n){this.subject.next(n)}alert$(){return this.subject}}class Or{constructor(n){this.actualApis=n}static fromApis(n){return new Or(n)}captureEvent(n){this.actualApis.forEach(i=>{try{i.captureEvent(n)}catch{}})}}class Tr{captureEvent(n){}}var oe=Object.defineProperty,Ye=(d,n,i)=>n in d?oe(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,rt=(d,n,i)=>(Ye(d,typeof n!="symbol"?n+"":n,i),i);const C="theme";class _{constructor(n){this.themes=n,rt(this,"activeThemeId"),rt(this,"subject",new Ie(void 0))}static createWithStorage(n){var i;const h=new _(n);if(!window.localStorage)return h;const A=(i=window.localStorage.getItem(C))!=null?i:void 0;return h.setActiveThemeId(A),h.activeThemeId$().subscribe(Se=>{Se?window.localStorage.setItem(C,Se):window.localStorage.removeItem(C)}),window.addEventListener("storage",Se=>{var et;if(Se.key===C){const at=(et=localStorage.getItem(C))!=null?et:void 0;h.setActiveThemeId(at)}}),h}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(n){this.activeThemeId=n,this.subject.next(n)}}const O="Invalid discovery URL pattern,";class T{constructor(n){this.parts=n}static compile(n){const i=n.split(/\{\{\s*pluginId\s*\}\}/),h=i.join("pluginId");let A;try{A=new URL(h)}catch{throw new Error(`${O} URL '${h}' is invalid`)}if(A.hash)throw new Error(`${O} URL must not have a hash`);if(A.search)throw new Error(`${O} URL must not have a query`);if(h.endsWith("/"))throw new Error(`${O} URL must not end with a slash`);return new T(i)}async getBaseUrl(n){return this.parts.join(encodeURIComponent(n))}}class me{constructor(n,i){this.endpoints=n,this.defaultEndpoint=i}static fromConfig(n,i){var h,A;const Se=(h=i==null?void 0:i.pathPattern)!=null?h:"/api/{{ pluginId }}",et=n.getString("backend.baseUrl"),at=(A=n.getOptionalConfigArray("discovery.endpoints"))==null?void 0:A.flatMap(xt=>{const Kt=typeof xt.get("target")=="object"?xt.getString("target.external"):xt.getString("target"),zn=T.compile(Kt);return xt.getStringArray("plugins").map(Bn=>[Bn,zn])});return new me(new Map(at),T.compile(`${et}${Se}`))}async getBaseUrl(n){const i=this.endpoints.get(n);return i?i.getBaseUrl(n):this.defaultEndpoint.getBaseUrl(n)}}class ye{constructor(n,i){this.alertApi=n,this.errorApi=i}post(n,i){return i!=null&&i.hidden||this.alertApi.post({message:n.message,severity:"error"}),this.errorApi.post(n,i)}error$(){return this.errorApi.error$()}}var le=Object.defineProperty,Pe=(d,n,i)=>n in d?le(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,ke=(d,n,i)=>(Pe(d,typeof n!="symbol"?n+"":n,i),i);class We{constructor(){ke(this,"subject",new Qt)}post(n,i){this.subject.next({error:n,context:i})}error$(){return this.subject}}class ht{static forward(n,i){window.addEventListener("unhandledrejection",h=>{n.post(h.reason,i)})}}var rn=Object.defineProperty,en=(d,n,i)=>n in d?rn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Ut=(d,n,i)=>(en(d,typeof n!="symbol"?n+"":n,i),i);function gn(d){if(d.length<3)throw new Error(`The '${d}' feature flag must have a minimum length of three characters.`);if(d.length>150)throw new Error(`The '${d}' feature flag must not exceed 150 characters.`);if(!d.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${d}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class pn{constructor(){Ut(this,"registeredFeatureFlags",[]),Ut(this,"flags")}registerFlag(n){gn(n.name),this.registeredFeatureFlags.push(n)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(n){return this.flags||(this.flags=this.load()),this.flags.get(n)===W.F.Active}save(n){this.flags||(this.flags=this.load()),n.merge||this.flags.clear();for(const[h,A]of Object.entries(n.states))this.flags.set(h,A);const i=Array.from(this.flags.entries()).filter(([,h])=>h===W.F.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(i)))}load(){try{const n=window.localStorage.getItem("featureFlags");if(!n)return new Map;const i=JSON.parse(n);if(typeof i!="object"||i===null||Array.isArray(i))return new Map;const h=Object.entries(i).filter(([A,Se])=>(gn(A),Se===W.F.Active));return new Map(h)}catch{return new Map}}}function hn(d){var n;let i=d.baseImplementation||e.g.fetch;const h=[(n=d.middleware)!=null?n:[]].flat().reverse();for(const A of h)i=A.apply(i);return{fetch:i}}class En{constructor(n,i,h,A){this.identityApi=n,this.allowUrl=i,this.headerName=h,this.headerValue=A}static create(n){var i,h;const A=Cn(n),Se=((i=n.header)==null?void 0:i.name)||"authorization",et=((h=n.header)==null?void 0:h.value)||(at=>`Bearer ${at}`);return new En(n.identityApi,A,Se,et)}apply(n){return async(i,h)=>{const A=new Request(i,h),{token:Se}=await this.identityApi.getCredentials();return A.headers.get(this.headerName)||typeof Se!="string"||!Se||!this.allowUrl(A.url)?n(i,h):(A.headers.set(this.headerName,this.headerValue(Se)),n(A))}}}function Cn(d){return d.allowUrl?d.allowUrl:d.urlPrefixAllowlist?Yn(d.urlPrefixAllowlist):d.config?Yn([d.config.getString("backend.baseUrl")]):()=>!1}function Yn(d){const n=d.map(i=>i.replace(/\/$/,""));return i=>n.some(h=>i===h||i.startsWith(`${h}/`))}function Hn(d,n){return!n||n==="/"?d:`${d.replace(/\/$/,"")}/${n.replace(/^\//,"")}`}class In{constructor(n){this.discoveryApi=n}apply(n){return async(i,h)=>{const A=new Request(i,h),Se="plugin://";if(!A.url.startsWith(Se))return n(i,h);const{hostname:et,pathname:at,search:xt,hash:Kt,username:zn,password:Bn}=new URL(`http://${A.url.substring(Se.length)}`);let On=await this.discoveryApi.getBaseUrl(et);if(zn||Bn){const Fn=new URL(On),sr=`${zn}${Bn?`:${Bn}`:""}@`;On=`${Fn.protocol}//${sr}${Fn.host}${Fn.pathname}`}const ar=`${Hn(On,at)}${xt}${Kt}`;return n(ar,typeof i=="string"||Ln(i)?h:i)}}}function Ln(d){return typeof d=="object"&&(d==null?void 0:d.constructor)===URL}class Zn{static resolvePluginProtocol(n){return new In(n.discoveryApi)}static injectIdentityAuth(n){return En.create(n)}constructor(){}}var sn=Object.defineProperty,Rn=(d,n,i)=>n in d?sn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,tr=(d,n,i)=>(Rn(d,typeof n!="symbol"?n+"":n,i),i);function ir(d,n){for(const i of n)if(!d.has(i))return!1;return!0}function Cr(d,...n){const i=new Set(d);for(const h of n)for(const A of h)i.add(A);return i}class Mr{constructor(){tr(this,"requests",[]),tr(this,"subject",new Ie(this.getCurrentPending()))}request(n){return new Promise((i,h)=>{this.requests.push({scopes:n,resolve:i,reject:h}),this.subject.next(this.getCurrentPending())})}resolve(n,i){this.requests=this.requests.filter(h=>ir(n,h.scopes)?(h.resolve(i),!1):!0),this.subject.next(this.getCurrentPending())}reject(n){this.requests.forEach(i=>i.reject(n)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const n=this.requests.length===0?void 0:this.requests.slice(1).reduce((i,h)=>Cr(i,h.scopes),this.requests[0].scopes);return{scopes:n,resolve:i=>{n&&this.resolve(n,i)},reject:i=>{n&&this.reject(i)}}}}var Rr=Object.defineProperty,Vr=(d,n,i)=>n in d?Rr(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,kr=(d,n,i)=>(Vr(d,typeof n!="symbol"?n+"":n,i),i);class Ur{constructor(){kr(this,"subject",new Ie([])),kr(this,"currentRequests",[]),kr(this,"handlerCount",0)}createAuthRequester(n){const i=new Mr,h=this.handlerCount;return this.handlerCount++,i.pending().subscribe({next:A=>{const Se=this.currentRequests.slice(),et=this.makeAuthRequest(A,n);et?Se[h]=et:delete Se[h],this.currentRequests=Se,this.subject.next(Se.filter(Boolean))}}),A=>i.request(A)}makeAuthRequest(n,i){const{scopes:h}=n;if(h)return{provider:i.provider,trigger:async()=>{const A=await i.onAuthRequest(h);n.resolve(A)},reject:()=>{const A=new Error("Login failed, rejected by user");A.name="RejectedError",n.reject(A)}}}authRequest$(){return this.subject}}var Nr=Object.defineProperty,Hr=(d,n,i)=>n in d?Nr(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,qr=(d,n,i)=>(Hr(d,typeof n!="symbol"?n+"":n,i),i);const ea=new Map,pa=class fo{constructor(n,i){this.namespace=n,this.errorApi=i,qr(this,"subscribers",new Set),qr(this,"observable",new(D())(h=>(this.subscribers.add(h),()=>{this.subscribers.delete(h)})))}static create(n){var i;return new fo((i=n.namespace)!=null?i:"",n.errorApi)}static addStorageEventListener(){window.addEventListener("storage",n=>{var i;for(const[h,A]of ea.entries())(i=n.key)!=null&&i.startsWith(h)&&A.handleStorageChange(n.key)})}get(n){return this.snapshot(n).value}snapshot(n){let i,h="absent";try{const A=localStorage.getItem(this.getKeyName(n));A&&(i=JSON.parse(A,(Se,et)=>(typeof et=="object"&&et!==null&&Object.freeze(et),et)),h="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${n}`))}return{key:n,value:i,presence:h}}forBucket(n){const i=`${this.namespace}/${n}`;return ea.has(i)||ea.set(i,new fo(i,this.errorApi)),ea.get(i)}async set(n,i){localStorage.setItem(this.getKeyName(n),JSON.stringify(i)),this.notifyChanges(n)}async remove(n){localStorage.removeItem(this.getKeyName(n)),this.notifyChanges(n)}observe$(n){return fo.hasSubscribed||(fo.addStorageEventListener(),fo.hasSubscribed=!0),this.observable.filter(({key:i})=>i===n)}handleStorageChange(n){if(!(n!=null&&n.startsWith(this.namespace)))return;const i=n==null?void 0:n.slice(`${this.namespace}/`.length);i.includes("/")||this.notifyChanges(decodeURIComponent(i))}getKeyName(n){return`${this.namespace}/${encodeURIComponent(n)}`}notifyChanges(n){const i=this.snapshot(n);for(const h of this.subscribers)h.next(i)}};qr(pa,"hasSubscribed",!1);let ta=pa;const yr=(0,o.createContext)(void 0);function nr(){const[d]=(0,M.is)(o.createElement(M.AW,{index:!0,element:o.createElement("div",null)}));return!d.index}const rr=(d,n)=>{try{const i=(0,g.fp)(n,{pathname:d}),h=i==null?void 0:i.filter(xt=>{var Kt;return((Kt=xt==null?void 0:xt.route.routeRefs)==null?void 0:Kt.size)>0}).pop(),A=h==null?void 0:h.route;if(!A||A.path===""&&d!=="/")return;let Se;A.routeRefs.size===1&&(Se=A.routeRefs.values().next().value);let et;A.plugins.size===1&&(et=A.plugins.values().next().value);const at=Object.entries((h==null?void 0:h.params)||{}).reduce((xt,[Kt,zn])=>(zn!==void 0&&Kt!=="*"&&(xt[Kt]=zn),xt),{});return{extension:"App",pluginId:(et==null?void 0:et.getId())||"root",...Se?{routeRef:Se.id}:{},_routeNodeType:A.element,params:at}}catch{return}},ua=({pathname:d,search:n,hash:i,attributes:h})=>{const A=(0,tt.z$)();return(0,o.useEffect)(()=>{A.captureEvent("navigate",`${d}${n}${i}`,{attributes:h})},[A,d,n,i,h]),null},hr=({routeObjects:d})=>{const{pathname:n,search:i,hash:h}=(0,M.TH)(),{params:A,...Se}=rr(n,d)||{params:{}};return o.createElement(tt.fC,{attributes:Se},o.createElement(ua,{pathname:n,search:i,hash:h,attributes:A}))};function da(d){return nr()?ot(d):""}function ot(d){var n;let{pathname:i}=new URL((n=d.getOptionalString("app.baseUrl"))!=null?n:"/","http://sample.dev");return i=i.replace(/\/*$/,""),i}function pe({component:d,appIdentityProxy:n,children:i}){const[h,A]=(0,o.useState)(),Se=(0,W.u)(W.p),et=ot(Se);return h?(n.setTarget(h,{signOutTargetUrl:et||"/"}),o.createElement(o.Fragment,null,i)):o.createElement(d,{onSignInSuccess:A})}function vt(d){const{Router:n,SignInPage:i}=(0,tt.qD)().getComponents(),h=(0,W.u)(W.p),A=ot(h),Se=`${A}/*`,et=(0,o.useContext)(yr);if(!et)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:at,appIdentityProxy:xt}=et;return i?nr()?o.createElement(n,null,o.createElement(hr,{routeObjects:at}),o.createElement(pe,{component:i,appIdentityProxy:xt},o.createElement(M.Z5,null,o.createElement(M.AW,{path:Se,element:o.createElement(o.Fragment,null,d.children)})))):o.createElement(n,{basename:A},o.createElement(hr,{routeObjects:at}),o.createElement(pe,{component:i,appIdentityProxy:xt},d.children)):(xt.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:A||"/"}),nr()?o.createElement(n,null,o.createElement(hr,{routeObjects:at}),o.createElement(M.Z5,null,o.createElement(M.AW,{path:Se,element:o.createElement(o.Fragment,null,d.children)}))):o.createElement(n,{basename:A},o.createElement(hr,{routeObjects:at}),d.children))}(0,tt.R5)(vt,"core.type","AppRouter");function An(d){const n={};for(const h in d.collectors)d.collectors.hasOwnProperty(h)&&(n[h]=d.collectors[h]());const i=[{node:o.Children.toArray(d.root),parent:void 0,contexts:{}}];for(;i.length!==0;){const{node:h,parent:A,contexts:Se}=i.shift();o.Children.forEach(h,et=>{if(!(0,o.isValidElement)(et))return;const at={};for(const xt in n)if(n.hasOwnProperty(xt)){const Kt=n[xt];at[xt]=Kt.visit(Kt.accumulator,et,A,Se[xt])}for(const xt of d.discoverers){const Kt=xt(et);Kt&&i.push({node:Kt,parent:et,contexts:at})}})}return Object.fromEntries(Object.entries(n).map(([h,A])=>[h,A.accumulator]))}function kn(d,n){return()=>({accumulator:d(),visit:n})}function Qn(d){var n;return(n=d.props)==null?void 0:n.children}function lr(d){var n,i,h;if((n=d.props)!=null&&n.path&&((i=d.props)!=null&&i.element))return(h=d.props)==null?void 0:h.element}const Zr=kn(()=>new Set,(d,n)=>{const i=(0,tt.IY)(n,"core.plugin");i&&d.add(i)}),Br=d=>{const{children:n}=d,i=(0,W.u)(W.f),h="with"in d?i.isActive(d.with):!i.isActive(d.without);return o.createElement(o.Fragment,null,h?n:null)};(0,tt.R5)(Br,"core.featureFlagged",!0);const cr={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function y(d){var n,i;const h=d;return h!=null&&h.type?(i=(n=h.type.displayName)!=null?n:h.type.name)!=null?i:String(h.type):String(h)}const l=d=>{const n=new Set;return d&&n.add(d),n};function b(d,n=new Array){return o.Children.forEach(d,i=>{if(!(0,o.isValidElement)(i))return;const h=(0,tt.IY)(i,"core.mountPoint");if(h){const A=(0,tt.IY)(i,"core.plugin");n.push({routeRef:h,plugin:A})}b(i.props.children,n)}),n}const B=kn(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,n,i,h)=>{var A,Se,et,at,xt,Kt,zn;if(h!=null&&h.isElementAncestor)return h;if((i==null?void 0:i.props.element)===n)return{...h,isElementAncestor:!0};const Bn=(A=n.props)==null?void 0:A.path,On=(0,tt.IY)(n,"core.mountPoint");if(On&&Bn)throw new Error(`Path property may not be set directly on a routable extension "${y(n)}"`);const ar=(et=(Se=h==null?void 0:h.obj)==null?void 0:Se.children)!=null?et:d.objects;if(Bn!==void 0){if(typeof Bn!="string")throw new Error(`Element path must be a string at "${y(n)}"`);const Fn=Bn.startsWith("/")?Bn.slice(1):Bn,sr=n.props.element;if((0,tt.IY)(n,"core.gatherMountPoints")){if(sr)throw new Error(`Mount point gatherers may not have an element prop "${y(n)}"`);const Xr={path:Fn,element:"gathered",routeRefs:new Set,caseSensitive:Boolean((at=n.props)==null?void 0:at.caseSensitive),children:[cr],plugins:new Set};return ar.push(Xr),{obj:Xr,gatherPath:Fn,routeRef:h==null?void 0:h.routeRef,gatherRouteRef:h==null?void 0:h.routeRef}}if(sr){const[Xr,...ur]=b(sr);if(ur.length>0)throw new Error(`Route element with path "${Bn}" may not contain multiple routable extensions`);if(!Xr)return h;const{routeRef:la,plugin:Ha}=Xr,xo={path:Fn,element:"mounted",routeRefs:new Set([la]),caseSensitive:Boolean((xt=n.props)==null?void 0:xt.caseSensitive),children:[cr],plugins:l(Ha)};return ar.push(xo),d.paths.set(la,Fn),d.parents.set(la,h==null?void 0:h.routeRef),{obj:xo,routeRef:la!=null?la:h==null?void 0:h.routeRef,gatherPath:Fn,gatherRouteRef:h==null?void 0:h.gatherRouteRef}}}if(On){if((h==null?void 0:h.gatherPath)===void 0)throw new Error(`Routable extension "${y(n)}" with mount point "${On}" must be assigned a path`);(Kt=h==null?void 0:h.obj)==null||Kt.routeRefs.add(On);const Fn=(0,tt.IY)(n,"core.plugin");return Fn&&((zn=h==null?void 0:h.obj)==null||zn.plugins.add(Fn)),d.paths.set(On,h.gatherPath),d.parents.set(On,h==null?void 0:h.gatherRouteRef),{...h,routeRef:On}}return h}),Re=kn(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,n,i,h)=>{var A,Se,et,at,xt;if((i==null?void 0:i.props.element)===n)return h;let Kt=h==null?void 0:h.obj,zn=h==null?void 0:h.routeRef,Bn=h==null?void 0:h.sticky;const On=(A=n.props)==null?void 0:A.path,ar=(Se=Kt==null?void 0:Kt.children)!=null?Se:d.objects,Fn=Boolean((et=n.props)==null?void 0:et.caseSensitive);let sr=h==null?void 0:h.path;if((0,tt.IY)(n,"core.gatherMountPoints")){if(!On)throw new Error("Mount point gatherer must have a path");sr=On}const Xr=(at=n.props)==null?void 0:at.element;let ur=(0,tt.IY)(n,"core.mountPoint");if(!ur&&(0,o.isValidElement)(Xr)&&(ur=(0,tt.IY)(Xr,"core.mountPoint")),ur){let Ha=On;if(sr&&(Ha?sr=void 0:Ha=sr),!Ha)throw new Error("Mounted routable extension must have a path");d.paths.set(ur,Ha),zn&&Bn?(d.parents.set(ur,zn),On&&(zn=ur,Bn=!1)):(d.parents.set(ur,zn),zn=ur),On?(Kt={caseSensitive:Fn,path:On,element:"mounted",routeRefs:new Set([ur]),children:[cr],plugins:l((0,tt.IY)(n.props.element,"core.plugin"))},ar.push(Kt)):Kt==null||Kt.routeRefs.add(ur)}if((0,tt.IY)(n,"core.gatherMountPoints")&&(Bn=!0),(0,tt.IY)(n,"core.gatherMountPoints")){if(!On)throw new Error("Mount point gatherer must have a path");ur||(Kt={caseSensitive:Fn,path:On,element:"gathered",routeRefs:new Set,children:[cr],plugins:((xt=h==null?void 0:h.obj)==null?void 0:xt.plugins)||new Set},ar.push(Kt))}return{obj:Kt,path:sr,routeRef:zn,sticky:Bn}}),st=kn(()=>new Set,(d,n)=>{if(n.type===Br){const i=n.props;d.add("with"in i?i.with:i.without)}}),At=(0,Y.uW)("route-ref-type",()=>Symbol("route-ref-type"));function Mt(d){return d[At]==="absolute"}function Sn(d){return d[At]==="sub"}function Mn(d){return d[At]==="external"}function xn(...d){const n=d.join("/").replace(/\/\/+/g,"/");return n!=="/"&&n.endsWith("/")?n.slice(0,-1):n}function br(d,n,i){let h,A="";if(Mt(d))h=d;else if(Sn(d))h=d.parent,A=d.path;else if(Mn(d)){const at=i.get(d);if(!at)return[void 0,""];if(Mt(at))h=at;else if(Sn(at))h=at.parent,A=at.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${at}`)}else throw d[At]?new Error(`Unknown or invalid route ref type, ${d[At]}`):new Error(`Unknown object passed to useRouteRef, got ${d}`);if(!h)return[void 0,""];const Se=n.get(h);if(Se===void 0)return[void 0,""];const et=xn(Se,A);return[h,et]}function Fr(d,n,i,h,A){var Se;const et=(Se=(0,g.fp)(A,n))!=null?Se:[],at=Array();let xt=-1;for(let Bn=d;Bn&&(xt=et.findIndex(On=>On.route.routeRefs.has(Bn)),xt===-1);Bn=h.get(Bn))at.unshift(Bn);at.length===0&&(xt-=1);const Kt=xt===-1?"":et[xt].pathname,zn=at.slice(0,-1).map(Bn=>{const On=i.get(Bn);if(On===void 0)throw new Error(`No path for ${Bn}`);if(On.includes(":"))throw new Error(`Cannot route to ${d} with parent ${Bn} as it has parameters`);return On});return`${xn(Kt,...zn)}/`}class Yr{constructor(n,i,h,A,Se){this.routePaths=n,this.routeParents=i,this.routeObjects=h,this.routeBindings=A,this.appBasePath=Se}resolve(n,i){const[h,A]=br(n,this.routePaths,this.routeBindings);if(!h)return;let Se;typeof i=="string"?Se=this.trimPath(i):i.pathname?Se={...i,pathname:this.trimPath(i.pathname)}:Se=i;const et=this.appBasePath+Fr(h,Se,this.routePaths,this.routeParents,this.routeObjects);return(...[xt])=>{const Kt=xt&&se()(xt,zn=>typeof zn=="string"?zn.replaceAll(/[&?#;\/]/g,Bn=>encodeURIComponent(Bn)):zn);return xn(et,(0,g.Gn)(A,Kt))}}trimPath(n){return n&&(n.startsWith(this.appBasePath)?n.slice(this.appBasePath.length):n)}}const oa=(0,Y.CT)("routing-context"),oo=({routePaths:d,routeParents:n,routeObjects:i,routeBindings:h,basePath:A="",children:Se})=>{const et=new Yr(d,n,i,h,A),at=(0,Y.EI)({1:et});return o.createElement(oa.Provider,{value:at},Se)};function io(d,n){const i=new Set(n.values());i.delete(void 0);for(const h of n.keys()){if(i.has(h))continue;let A=h,Se="";for(;A;){const at=d.get(A);if(at===void 0)throw new Error(`No path for ${A}`);Se=xn(at,Se),A=n.get(A)}const et=Se.match(/:(\w+)/g);if(et){for(let at=0;at<et.length;at++)for(let xt=at+1;xt<et.length;xt++)if(et[xt]===et[at])throw new Error(`Parameter ${et[xt]} is duplicated in path ${Se}`)}}}function Eo(d,n){for(const i of n)if(i.externalRoutes){for(const[h,A]of Object.entries(i.externalRoutes))if(!A.optional&&!d.has(A))throw new Error(`External route '${h}' of the '${i.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const Ja=(0,Y.CT)("app-context"),na=({appContext:d,children:n})=>{const i=(0,Y.EI)({1:d});return o.createElement(Ja.Provider,{value:i,children:n})};var ka=Object.defineProperty,Na=(d,n,i)=>n in d?ka(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Xa=(d,n,i)=>(Na(d,typeof n!="symbol"?n+"":n,i),i);function Fa(d){return new Error(`Tried to access IdentityApi ${d} before app was loaded`)}function Oa(d){console.warn(`WARNING: Call to ${d} is deprecated and will break in the future`)}class Pa{constructor(){Xa(this,"target"),Xa(this,"waitForTarget"),Xa(this,"resolveTarget",()=>{}),Xa(this,"signOutTargetUrl","/"),this.waitForTarget=new Promise(n=>{this.resolveTarget=n})}setTarget(n,i){this.target=n,this.signOutTargetUrl=i.signOutTargetUrl,this.resolveTarget(n)}getUserId(){if(!this.target)throw Fa("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return Oa("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw Fa("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return Oa("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(n=>n.getProfileInfo())}async getBackstageIdentity(){const n=await this.waitForTarget.then(i=>i.getBackstageIdentity());return n.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${n.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),n}async getCredentials(){return this.waitForTarget.then(n=>n.getCredentials())}async getIdToken(){return this.waitForTarget.then(n=>{if(!n.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return Oa("getIdToken"),n.getIdToken()})}async signOut(){await this.waitForTarget.then(n=>n.signOut()),window.location.href=this.signOutTargetUrl}}function vo(d,n,i){if(d!==void 0){const A=i.find(Se=>Se.id===d);if(A)return A}if(n){const A=i.find(Se=>Se.variant==="dark");if(A)return A}const h=i.find(A=>A.variant==="light");return h||i[0]}const Wa=()=>{const d=(0,o.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[n,i]=(0,o.useState)(d.matches);return(0,o.useEffect)(()=>{const h=A=>{i(A.matches)};return d.addListener(h),()=>{d.removeListener(h)}},[d]),n};function Ta({children:d}){const n=(0,W.u)(W.n),i=(0,Le.Z)(n.activeThemeId$(),n.getActiveThemeId()),h=Boolean(window.matchMedia)?Wa():!1,A=vo(i,h,n.getInstalledThemes());if(!A)throw new Error("App has no themes");return o.createElement(A.Provider,{children:d})}const so=async()=>Qa();function Qa(d=/*__APP_INJECTED_CONFIG_MARKER__*/"[{\"context\":\"app\",\"deprecatedKeys\":[],\"data\":{\"app\":{\"title\":\"Scaffolded Backstage App\",\"baseUrl\":\"http://localhost:3000\"},\"organization\":{\"name\":\"My Company\"},\"backend\":{\"baseUrl\":\"http://localhost:7007\"},\"integrations\":{\"github\":[{\"host\":\"github.com\"}]},\"techdocs\":{\"builder\":\"local\"},\"catalog\":{\"import\":{\"entityFilename\":\"catalog-info.yaml\",\"pullRequestBranchName\":\"backstage-integration\"}}}}]"/*__INJECTED_END__*/){const n=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!n)throw new Error("No static configuration provided");if(!Array.isArray(n))throw new Error("Static configuration has invalid format");const i=n.slice();if(d!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const A=JSON.parse(d);Array.isArray(A)?i.push(...A):i.push({data:A,context:"env"})}catch(A){throw new Error(`Failed to load runtime configuration, ${A}`)}const h=window.__APP_CONFIG__;return h&&i.push({context:"window",data:h}),i}var yo=Object.defineProperty,bo=(d,n,i)=>n in d?yo(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Co=(d,n,i)=>(bo(d,typeof n!="symbol"?n+"":n,i),i);class Po{constructor(){Co(this,"apis",[])}add(n,i){return this.apis.push([n.id,i]),i}build(){return new ma(new Map(this.apis))}}class ma{constructor(n){this.apis=n}static builder(){return new Po}static from(n){return new ma(new Map(n.map(([i,h])=>[i.id,h])))}static with(n,i){return new ma(new Map([[n.id,i]]))}with(n,i){return new ma(new Map([...this.apis,[n.id,i]]))}get(n){return this.apis.get(n.id)}}function Ia(d){const n=new Map;return d&&d({bind:(h,A)=>{for(const[Se,et]of Object.entries(A)){const at=h[Se];if(!at)throw new Error(`Key ${Se} is not an existing external route`);if(!et&&!at.optional)throw new Error(`External route ${Se} is required but was undefined`);et&&n.set(at,et)}}}),n}var Sa=(d,n,i)=>{if(!n.has(d))throw TypeError("Cannot "+i)},Wr=(d,n,i)=>(Sa(d,n,"read from private field"),i?i.call(d):n.get(d)),qa=(d,n,i)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,i)},Ka=(d,n,i,h)=>(Sa(d,n,"write to private field"),h?h.call(d,i):n.set(d,i),i),_a,ha,Da;const ga="language",ia="en",So=class ri{constructor(n,i){qa(this,_a,void 0),qa(this,ha,void 0),qa(this,Da,void 0),Ka(this,_a,n),Ka(this,ha,i),Ka(this,Da,new Ie({language:Wr(this,ha)}))}static create(n){var i,h;const A=(i=n==null?void 0:n.availableLanguages)!=null?i:[ia];if(A.length!==new Set(A).size)throw new Error(`Supported languages may not contain duplicates, got '${A.join("', '")}'`);if(!A.includes(ia))throw new Error(`Supported languages must include '${ia}'`);const Se=(h=n==null?void 0:n.defaultLanguage)!=null?h:ia;if(!A.includes(Se))throw new Error(`Initial language must be one of the supported languages, got '${Se}'`);return new ri(A,Se)}static createWithStorage(n){const i=ri.create(n);if(!window.localStorage)return i;const h=window.localStorage.getItem(ga),{languages:A}=i.getAvailableLanguages();return h&&A.includes(h)&&i.setLanguage(h),i.language$().subscribe(({language:Se})=>{Se!==window.localStorage.getItem(ga)&&window.localStorage.setItem(ga,Se)}),window.addEventListener("storage",Se=>{var et;if(Se.key===ga){const at=(et=localStorage.getItem(ga))!=null?et:void 0;at&&i.setLanguage(at)}}),i}getAvailableLanguages(){return{languages:Wr(this,_a).slice()}}setLanguage(n){const i=n!=null?n:ia;if(i!==Wr(this,ha)){if(i&&!Wr(this,_a).includes(i))throw new Error(`Failed to change language to '${i}', available languages are '${Wr(this,_a).join("', '")}'`);Ka(this,ha,i),Wr(this,Da).next({language:i})}}getLanguage(){return{language:Wr(this,ha)}}language$(){return Wr(this,Da)}};_a=new WeakMap,ha=new WeakMap,Da=new WeakMap;let _o=So;function Ro(d){const n=d;if(n.$$type!=="@backstage/TranslationResource")throw new Error(`Invalid translation resource, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation resource, bad version '${n.version}'`);return n}function Ao(d){const n=d;if(n.$$type!=="@backstage/TranslationRef")throw new Error(`Invalid translation ref, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation ref, bad version '${n.version}'`);return n}var eo=(d,n,i)=>{if(!n.has(d))throw TypeError("Cannot "+i)},or=(d,n,i)=>(eo(d,n,"read from private field"),i?i.call(d):n.get(d)),Kr=(d,n,i)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,i)},za=(d,n,i,h)=>(eo(d,n,"write to private field"),h?h.call(d,i):n.set(d,i),i),ra=(d,n,i)=>(eo(d,n,"access private method"),i),Ra,Aa,wa,xa,Ga,ja,v,S,I,U,de,Te,je,ze,dt,Zt;function Lt(d){return Object.fromEntries(Object.entries(d).filter(n=>n[1]!==null))}class mn{constructor(n){this.onLoad=n,Kr(this,xa),Kr(this,Ra,new Set),Kr(this,Aa,new Map),Kr(this,wa,new Map)}addTranslationResource(n){const i=Ro(n);for(const h of i.resources){const A=ra(this,xa,Ga).call(this,h.language,i.id);or(this,wa).has(A)||or(this,wa).set(A,h.loader)}}needsLoading(n,i){const h=ra(this,xa,Ga).call(this,n,i);return or(this,wa).get(h)?!or(this,Ra).has(h):!1}async load(n,i){const h=ra(this,xa,Ga).call(this,n,i),A=or(this,wa).get(h);if(!A||or(this,Ra).has(h))return;const Se=or(this,Aa).get(h);if(Se){await Se;return}const et=A().then(at=>{this.onLoad({language:n,namespace:i,messages:at.messages}),or(this,Ra).add(h)},at=>{throw or(this,Ra).add(h),at});or(this,Aa).set(h,et),await et}}Ra=new WeakMap,Aa=new WeakMap,wa=new WeakMap,xa=new WeakSet,Ga=function(d,n){return`${d}/${n}`};const Tn=class Hi{constructor(n,i,h){Kr(this,de),Kr(this,je),Kr(this,dt),Kr(this,ja,void 0),Kr(this,v,void 0),Kr(this,S,void 0),Kr(this,I,new Set),Kr(this,U,new Set),za(this,ja,n),za(this,v,i),za(this,S,h)}static create(n){const{languages:i}=n.languageApi.getAvailableLanguages(),h=(0,_e.Fs)({fallbackLng:ia,supportedLngs:i,interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(h.init(),!h.isInitialized)throw new Error("i18next was unexpectedly not initialized");const{language:A}=n.languageApi.getLanguage();A!==ia&&h.changeLanguage(A);const Se=new mn(xt=>{h.addResourceBundle(xt.language,xt.namespace,Lt(xt.messages),!1,!0)}),et=(n==null?void 0:n.resources)||[];for(let xt=et.length-1;xt>=0;xt--){const Kt=et[xt];Kt.$$type==="@backstage/TranslationResource"?Se.addTranslationResource(Kt):Kt.$$type==="@backstage/TranslationMessages"&&h.addResourceBundle(ia,Kt.id,Lt(Kt.messages),!0,!1)}const at=new Hi(h,Se,n.languageApi.getLanguage().language);return n.languageApi.language$().subscribe(({language:xt})=>{var Kt;ra(Kt=at,de,Te).call(Kt,xt)}),at}getTranslation(n){const i=Ao(n);return ra(this,dt,Zt).call(this,i),ra(this,je,ze).call(this,i)}translation$(n){const i=Ao(n);return ra(this,dt,Zt).call(this,i),new(D())(h=>{let A={};const Se=()=>{A={};const at=A;or(this,v).load(or(this,S),i.id).then(()=>{if(at===A){const xt=ra(this,je,ze).call(this,i);xt.ready&&h.next(xt)}},xt=>{at===A&&h.error(Array.isArray(xt)?xt[0]:xt)})},et=()=>{const at=ra(this,je,ze).call(this,i);at.ready?h.next(at):Se()};return or(this,v).needsLoading(or(this,S),i.id)&&Se(),or(this,U).add(et),()=>{or(this,U).delete(et)}})}};ja=new WeakMap,v=new WeakMap,S=new WeakMap,I=new WeakMap,U=new WeakMap,de=new WeakSet,Te=function(d){or(this,S)!==d&&(za(this,S,d),or(this,ja).changeLanguage(d),or(this,U).forEach(n=>n()))},je=new WeakSet,ze=function(d){return or(this,v).needsLoading(or(this,S),d.id)?{ready:!1}:{ready:!0,t:or(this,ja).getFixedT(null,d.id)}},dt=new WeakSet,Zt=function(d){if(or(this,I).has(d.id))return;or(this,I).add(d.id);const n=d.getDefaultMessages();or(this,ja).addResourceBundle(ia,d.id,n,!0,!1);const i=d.getDefaultResource();i&&or(this,v).addTranslationResource(i)};let vn=Tn;function yn(d){const n=new URL(d);return n.protocol=document.location.protocol,n.hostname=document.location.hostname,n.port=document.location.port,n.toString().replace(/\/$/,"")}function jn(d){const n=R.fromConfigs(d),i=n.getOptionalString("app.baseUrl"),h=n.getOptionalString("backend.baseUrl");let A=d,Se,et;if(i&&h){const at=new URL(i).origin,xt=new URL(h).origin;if(at===xt){const Kt=yn(h);h!==Kt&&(Se=Kt)}}if(i){const at=yn(i);i!==at&&(et=at)}return(et||Se)&&(A=A.concat({data:{app:et&&{baseUrl:et},backend:Se&&{baseUrl:Se}},context:"relative-resolver"})),A}var Pn=Object.defineProperty,Xn=(d,n,i)=>n in d?Pn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i,Nn=(d,n,i)=>(Xn(d,typeof n!="symbol"?n+"":n,i),i),Un=(d,n,i)=>{if(!n.has(d))throw TypeError("Cannot "+i)},Kn=(d,n,i)=>(Un(d,n,"read from private field"),i?i.call(d):n.get(d)),er=(d,n,i)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,i)},fr=(d,n,i,h)=>(Un(d,n,"write to private field"),h?h.call(d,i):n.set(d,i),i),sa;function La(d,n,i){var h;const A=Boolean(d),Se=(0,Ne.default)(d||(()=>Promise.resolve([])));let et;if(A&&Se.loading){const{Progress:Kt}=n;et=o.createElement(Kt,null)}else if(Se.error){const{BootErrorPage:Kt}=n;et=o.createElement(Kt,{step:"load-config",error:Se.error})}const{ThemeProvider:at=Ta}=n;return et?{node:o.createElement(zt,{apis:ma.with(W.n,i)},o.createElement(at,null,et))}:{api:R.fromConfigs((h=Se.value)!=null&&h.length?jn(Se.value):[])}}class Jr{constructor(n){this.app=n}getPlugins(){return this.app.getPlugins()}getSystemIcon(n){return this.app.getSystemIcon(n)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class zr{constructor(n){Nn(this,"apiHolder"),Nn(this,"configApi"),Nn(this,"apis"),Nn(this,"icons"),Nn(this,"plugins"),Nn(this,"featureFlags"),Nn(this,"components"),Nn(this,"themes"),Nn(this,"configLoader"),Nn(this,"defaultApis"),Nn(this,"bindRoutes"),Nn(this,"appLanguageApi"),Nn(this,"translationResources"),Nn(this,"appIdentityProxy",new Pa),Nn(this,"apiFactoryRegistry"),er(this,sa,!1);var i,h,A,Se,et,at,xt,Kt,zn;this.apis=(i=n.apis)!=null?i:[],this.icons=n.icons,this.plugins=new Set((h=n.plugins)!=null?h:[]),this.featureFlags=(A=n.featureFlags)!=null?A:[],this.components=n.components,this.themes=n.themes,this.configLoader=(Se=n.configLoader)!=null?Se:so,this.defaultApis=(et=n.defaultApis)!=null?et:[],this.bindRoutes=n.bindRoutes,this.apiFactoryRegistry=new Ft,this.appLanguageApi=_o.createWithStorage({defaultLanguage:(at=n.__experimentalTranslations)==null?void 0:at.defaultLanguage,availableLanguages:(xt=n.__experimentalTranslations)==null?void 0:xt.availableLanguages}),this.translationResources=(zn=(Kt=n.__experimentalTranslations)==null?void 0:Kt.resources)!=null?zn:[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(n){return this.icons[n]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(n){const i=this.getProvider();return()=>o.createElement(i,null,n)}getProvider(){if(Kn(this,sa))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");fr(this,sa,!0);const n=new Jr(this);let i=!1;return({children:A})=>{const Se=(0,o.useRef)(!0),et=(0,o.useMemo)(()=>_.createWithStorage(this.themes),[]),{routing:at,featureFlags:xt,routeBindings:Kt}=(0,o.useMemo)(()=>{const Fn=An({root:A,discoverers:[Qn,lr],collectors:{routing:nr()?Re:B,collectedPlugins:Zr,featureFlags:st}});return Fn.collectedPlugins.forEach(sr=>this.plugins.add(sr)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...Fn,routeBindings:Ia(this.bindRoutes)}},[A]);i||(i=!0,io(at.paths,at.parents),Eo(Kt,this.plugins));const zn=La(this.configLoader,this.components,et),Bn="api"in zn;if(Bn){const{api:Fn}=zn;this.configApi=Fn}if("node"in zn)return zn.node;if(Bn&&Se.current){Se.current=!1;const Fn=this.getApiHolder().get(W.f);if(Fn){for(const ur of this.featureFlags)Fn.registerFlag({...ur,pluginId:""});for(const ur of this.plugins.values())if("getFeatureFlags"in ur)for(const la of ur.getFeatureFlags())Fn.registerFlag({name:la.name,pluginId:ur.getId()});else for(const la of ur.output())la.type==="feature-flag"&&Fn.registerFlag({name:la.name,pluginId:ur.getId()});const sr=Fn.getRegisteredFlags(),Xr=new Set(sr.map(ur=>ur.name));for(const ur of xt)Xr.has(ur)||Fn.registerFlag({name:ur,pluginId:""})}}const{ThemeProvider:On=Ta,Progress:ar}=this.components;return o.createElement(zt,{apis:this.getApiHolder()},o.createElement(na,{appContext:n},o.createElement(On,null,o.createElement(oo,{routePaths:at.paths,routeParents:at.parents,routeObjects:at.objects,routeBindings:Kt,basePath:da(zn.api)},o.createElement(yr.Provider,{value:{routeObjects:at.objects,appIdentityProxy:this.appIdentityProxy}},o.createElement(o.Suspense,{fallback:o.createElement(ar,null)},A))))))}}getRouter(){return vt}getApiHolder(){if(this.apiHolder){for(const n of this.plugins)for(const i of n.getApis())this.apiFactoryRegistry.get(i.api)||this.apiFactoryRegistry.register("default",i);return Je.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:W.n,deps:{},factory:()=>_.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:W.p,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:W.v,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:Oe.IB,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:Oe.op,deps:{languageApi:Oe.IB},factory:({languageApi:n})=>vn.create({languageApi:n,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:W.f,deps:{},factory:()=>new pn});for(const n of this.defaultApis)this.apiFactoryRegistry.register("default",n);for(const n of this.plugins)for(const i of n.getApis())if(!this.apiFactoryRegistry.register("default",i))throw new Error(`Plugin ${n.getId()} tried to register duplicate or forbidden API factory for ${i.api}`);for(const n of this.apis)if(!this.apiFactoryRegistry.register("app",n))throw new Error(`Duplicate or forbidden API factory for ${n.api} in app`);return Je.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new Je(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(n){const i=new Set;for(const h of n){const A=h.getId();if(i.has(A))throw new Error(`Duplicate plugin found '${A}'`);i.add(A)}}}sa=new WeakMap;function Va(d){return new zr(d)}let to=!1;const Do=d=>{const n=(0,tt.qD)(),{NotFoundErrorPage:i}=n.getComponents(),h=(0,o.useMemo)(()=>nr(),[]),Se=[...(0,tt.vJ)(d.children,et=>et.getElements().flatMap(at=>{var xt;let Kt=at.props.path;if(Kt==="")return[];Kt=(xt=Kt==null?void 0:Kt.replace(/\/\*$/,""))!=null?xt:"/";let zn=h?at:at.props.element;return!h&&!zn&&(zn=at,to||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),to=!0)),[{path:Kt,element:zn,children:at.props.children?[{path:Kt==="/"?"/":"*",element:at.props.children}]:void 0}]}).sort((at,xt)=>xt.path.localeCompare(at.path)).map(at=>({...at,path:at.path==="/"?"/":`${at.path}/*`}))),{path:"*",element:o.createElement(i,null)}];return(0,M.V$)(Se)};(0,tt.R5)(Do,"core.type","FlatRoutes")},49558:($n,Vt,e)=>{"use strict";e.d(Vt,{in:()=>En,qE:()=>Rr,Oo:()=>Pi,hB:()=>cc,db:()=>hs,Oi:()=>da,VY:()=>Mo,yW:()=>Ci,bj:()=>hr,XF:()=>ot,mn:()=>Mt,NX:()=>pe,SX:()=>Mn,zG:()=>gs,ub:()=>Yr,mf:()=>Ks,yu:()=>Wr,fy:()=>fs,h4:()=>ko,M6:()=>za,i9:()=>Ll,aR:()=>pi,rJ:()=>Nn,Oh:()=>Zl,hu:()=>Ki,Fw:()=>S,rU:()=>yr,Qj:()=>rr,nU:()=>U,SA:()=>Wa,J3:()=>ze,Or:()=>Zt,T3:()=>No,g9:()=>Nl,Ex:()=>Lt,Gk:()=>Ka,tn:()=>hi,Ph:()=>i,YE:()=>ol,v7:()=>Fi,Hz:()=>Vo,R6:()=>Ni,tR:()=>rl,oz:()=>Cl,BV:()=>yl,k2:()=>Zi,BT:()=>ll,dh:()=>xo,vK:()=>ur,Kq:()=>sr,wA:()=>la,VC:()=>Ha,Pd:()=>Xr,xT:()=>us,uw:()=>Os,qt:()=>Ps,oZ:()=>sc,iA:()=>bi,tB:()=>Es,GB:()=>ma,sidebarConfig:()=>Ma,r0:()=>Ho,mZ:()=>wo,Pf:()=>$o});var o=e(30204),p=e(30705),m=e(61837),Y=e(37265),V=e(90436),D=e(87685),W=e(99688),tt=e(19928),Xe=e.n(tt),r=e(2784),Ve=e(27429),be=e(77277),X=e(8629),k=e(49429),s=e(38724),ne=e(79249),re=e(43434),ie=e(79692),ve=e(60364),Ce=e(41128),u=e(15459),F=e(12420),R=e(76600),M=e(41547),g=e(86689),Ne=e(72779),Oe=e.n(Ne),Qe=e(76635),se=e(73557),Le=e(39857),_e=e(16060),Ke=e(95544),St=e(56553),L=e(26639),pt=e(39595),fe=e(80030),zt=e(19353),Et=e(95074),Dt=e(41156),Wt=e(88188),Je=e(13725),_t=e(11105),Nt=e(97963),Xt=e(46506),Ht=e.n(Xt),Ft=e(54073),yt=e.n(Ft),Tt=e(10368),wt=e(76985),Jt=e(39829),Ae=e(19574),j=e.n(Ae),E=e(72164),N=e(93657),Q=e(60905);const q=e.p+"static/missingAnnotation.67f79e98..svg",Ge=e.p+"static/noInformation.4b426325..svg",Z=e.p+"static/createComponent.975d1e1e..svg",x=e.p+"static/noBuild.1715fa71..svg";var he=e(11776),Fe=e(38402),mt=e(49378),Qt=e(27616),Ie=e(8284),Be=e(70660),ct=e(91750),Ot=e(38016),bt=e(32407),$t=e(28156),Ct=e(85256),$e=e(28316),qe=e(35292),Ee=e(48049),G=e(51209),ue=e(3806),Ue=e(32272),nt=e(15277),it=e.n(nt),Rt=e(29862),qt=e(67358),nn=e(94339),we=e(14503),De=e(24579),w=e(32552),H=e(27597),te=e(35585),ut=e(21324),K=e(7089),ee=e(42494),He=e(74603),lt=e(56939),Bt=e(12231),It=e(73698),an=e(72379),on=e(74600),fn=e.n(on),tn=e(37390),cn=e(97485),ln=e(15584),wn=e(89571),dn=e(86136),bn=e(50758),ce=e(79784),ae=e(19126),Ze=e.n(ae),Pt=e(80079),Gt=e(18671),jt=e(6487),_n=e(99152),Wn=e(67222),Gn=e(21070),dr=e(90324),gr=e(98281),Jn=e(33375),pr=e(44233),Pr=e(27604),Lr=e(36444),vr=e(37971),wr=e(59709),Or=e(17373),Tr=e(3702),oe=e(93111),Ye=e(4614),rt=e(44311);const C=e.p+"static/mic-drop.fe3ef4d0..svg";var _=e(16173),O=e(50023),T=e(4190),me=e(44882),ye=e(18473),le=e(57998),Pe=e(83543),ke=e(59797),We=e(26739),ht=e(86619),rn=e(98989),en=e(30195),Ut=e(63955),gn=e(74828),pn=e(45455),hn=e.n(pn);function En(t){const[a,c]=(0,r.useState)([]),f=(0,o.u)(o.l),{anchorOrigin:P={vertical:"top",horizontal:"center"},transientTimeoutMs:$}=t,J=$!=null?$:5e3;(0,r.useEffect)(()=>{const xe=f.alert$().subscribe(gt=>c(ft=>ft.concat(gt)));return()=>{xe.unsubscribe()}},[f]);const[ge]=a;if((0,r.useEffect)(()=>{if(ge&&ge.display==="transient"){const xe=setTimeout(()=>{c(gt=>{const ft=gt.filter(Yt=>Yt!==ge);return ft.length===gt.length?gt:ft})},J);return()=>clearTimeout(xe)}},[ge,J]),a.length===0)return null;const Me=()=>{c(xe=>xe.filter(gt=>gt!==ge))};return r.createElement(Y.Z,{open:!0,anchorOrigin:P},r.createElement(W.Z,{action:r.createElement(m.Z,{color:"inherit",size:"small",onClick:Me,"data-testid":"error-button-close"},r.createElement(D.Z,null)),severity:ge.severity},r.createElement(V.Z,{component:"span"},String(ge.message),a.length>1&&r.createElement("em",null,` (${a.length-1} older ${Xe()("message",a.length-1)})`))))}const Cn="@backstage/autologout:lastSeenOnline",Yn=({enableEffect:t,autologoutIsEnabled:a,idleTimeoutSeconds:c,lastSeenOnlineStore:f,identityApi:P})=>{useEffect(()=>{if(a&&t){const $=f.get();if($){const ge=Math.ceil(new Date().getTime()/1e3),Me=Math.ceil($.getTime()/1e3);ge-Me>c&&P.signOut()}f.save(new Date)}else f.delete()},[a,t,P,c,f])},Hn=t=>{const{idleTimer:a,setOpen:c,open:f,promptTimeoutMillis:P,remainingTime:$,setRemainingTime:J}=t;useEffect(()=>{const gt=setInterval(()=>{J(Math.ceil(a.getRemainingTime()))},500);return()=>{clearInterval(gt)}},[a,J]);const ge=()=>{c(!1),a.activate()},xe=Math.max($-P/1e3,0)>1?"seconds":"second";return React.createElement(Dialog,{open:f,"data-testid":"inactivity-prompt-dialog"},React.createElement(DialogTitle,null,"Logging out due to inactivity"),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,"You are about to be disconnected in"," ",React.createElement("b",null,Math.ceil($/1e3)," ",xe),". Are you still there?")),React.createElement(DialogActions,null,React.createElement(Button$1,{onClick:ge,color:"secondary",variant:"contained",size:"small"},"Yes! Don't log me out")))};class In{constructor(a){this.key=a}save(a){localStorage.setItem(this.key,a.toJSON())}delete(){localStorage.removeItem(this.key)}get(){const a=localStorage.getItem(this.key);return a!==null?new Date(Date.parse(a)):null}}const Ln=({idleTimeoutMinutes:t,events:a,useWorkerTimers:c,logoutIfDisconnected:f,promptBeforeIdleSeconds:P,promptOpen:$,setPromptOpen:J,remainingTimeCountdown:ge,setRemainingTimeCountdown:Me,identityApi:xe,lastSeenOnlineStore:gt})=>{const ft=P*1e3,Yt=ft>0,kt=async()=>{J(!0),Me(ft)},un=()=>{J(!1),Me(0),xe.signOut()},Dn=()=>{J(!1),Me(0)},Vn=($r,Qr)=>{gt.save(new Date)},mr=useIdleTimer({timeout:t*60*1e3,events:a,crossTab:!0,name:"autologout-timer",timers:c?workerTimers:void 0,onIdle:un,onActive:Yt?Dn:void 0,onAction:f?Vn:void 0,onPrompt:Yt?kt:void 0,promptBeforeIdle:Yt?ft:void 0,syncTimers:1e3});return React.createElement(React.Fragment,null,Yt&&React.createElement(Hn,{idleTimer:mr,open:$,setOpen:J,remainingTime:ge,setRemainingTime:Me,promptTimeoutMillis:ft}))},Zn={enabled:!0,idleTimeoutMinutes:.5,promptBeforeIdleSeconds:10,useWorkerTimers:!0,logoutIfDisconnected:!0},sn=null,Rn=(t,a)=>{var c,f,P,$,J,ge,Me,xe,gt,ft;return{enabled:(f=(c=t.getOptionalBoolean("auth.autologout.enabled"))!=null?c:a.enabled)!=null?f:Zn.enabled,idleTimeoutMinutes:($=(P=t.getOptionalNumber("auth.autologout.idleTimeoutMinutes"))!=null?P:a.idleTimeoutMinutes)!=null?$:Zn.idleTimeoutMinutes,promptBeforeIdleSeconds:(ge=(J=t.getOptionalNumber("auth.autologout.promptBeforeIdleSeconds"))!=null?J:a.promptBeforeIdleSeconds)!=null?ge:Zn.promptBeforeIdleSeconds,useWorkerTimers:(xe=(Me=t.getOptionalBoolean("auth.autologout.useWorkerTimers"))!=null?Me:a.useWorkerTimers)!=null?xe:Zn.useWorkerTimers,logoutIfDisconnected:(ft=(gt=t.getOptionalBoolean("auth.autologout.logoutIfDisconnected"))!=null?gt:a.logoutIfDisconnected)!=null?ft:Zn.logoutIfDisconnected}},tr=t=>{const a=useApi(identityApiRef),c=useApi(configApiRef),[f,P]=useState(!1);useEffect(()=>{async function Dn(Vn){(await Vn.getCredentials()).token?P(!0):P(!1)}Dn(a)},[a]);const{enabled:$,idleTimeoutMinutes:J,promptBeforeIdleSeconds:ge,logoutIfDisconnected:Me,useWorkerTimers:xe}=useMemo(()=>Rn(c,t),[c,t]);useEffect(()=>{if(J<.5)throw new Error("\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).");if(ge<0)throw new Error("\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.");if(J*60<=ge)throw new Error("\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes")},[J,ge]);const gt=useMemo(()=>new In(Cn),[]),[ft,Yt]=useState(!1),[kt,un]=useState(0);return Yn({enableEffect:Me,autologoutIsEnabled:$&&f,idleTimeoutSeconds:J*60,lastSeenOnlineStore:gt,identityApi:a}),!$||!f?null:React.createElement(Ln,{idleTimeoutMinutes:J,promptBeforeIdleSeconds:ge,useWorkerTimers:xe,events:sn,logoutIfDisconnected:Me,promptOpen:ft,setPromptOpen:Yt,remainingTimeCountdown:kt,setRemainingTimeCountdown:un,identityApi:a,lastSeenOnlineStore:gt})};function ir(t){let a=0;for(let f=0;f<t.length;f++)a=t.charCodeAt(f)+((a<<5)-a);let c="#";for(let f=0;f<3;f++){const P=a>>f*8&255;c+=`00${P.toString(16)}`.slice(-2)}return c}function Cr(t){var a;const c=t.trim().split(" "),f=(a=c[0])!=null?a:"",P=c.length>1?c[c.length-1]:"";return f&&P?`${f.charAt(0)}${P.charAt(0)}`:f.charAt(0)}const Mr=(0,ie.Z)(t=>({avatar:{width:"4rem",height:"4rem",color:t.palette.common.white},avatarText:{fontWeight:t.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function Rr(t){const{displayName:a,picture:c,customStyles:f}=t,P=Mr();let $={...f};const J={fontFamily:$.fontFamily,fontSize:$.fontSize,fontWeight:$.fontWeight};return c||($={backgroundColor:ir(a||""),...f}),r.createElement(re.Z,{alt:a,src:c,className:P.avatar,style:$},a&&r.createElement(V.Z,{variant:"h6",component:"span",className:P.avatarText,style:J},Cr(a)))}function Vr(){const[t]=(0,se.is)(r.createElement(se.AW,{index:!0,element:r.createElement("div",null)}));return!t.index}const kr=(0,ie.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),Ur=t=>/^([a-z+.-]+):/.test(t),Nr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Hr=window.open;if(Hr&&!Hr.__backstage){const t=function(...c){const f=String(c[0]);if(Nr.test(f))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return Hr.apply(this,c)};t.__backstage=!0,window.open=t}const qr=()=>{try{return(0,o.u)(o.p).getOptionalString("app.baseUrl")}catch{return}},ea=()=>{var t;const a="http://sample.dev",c=(t=qr())!=null?t:"/",{pathname:f}=new URL(c,a);return(0,Qe.trimEnd)(f,"/")},pa=t=>{let a=String(t);const c=ea(),f=Ur(a),P=a.startsWith(c);return!f&&!P&&(a=c.concat(a)),a},ta=t=>{var a;return t instanceof Array?t.map(ta).join(" ").trim():typeof t=="object"&&t?ta((a=t==null?void 0:t.props)==null?void 0:a.children):["string","number"].includes(typeof t)?String(t):""},yr=r.forwardRef(({onClick:t,noTrack:a,...c},f)=>{const P=kr(),$=(0,p.z$)(),J=Vr()?pa(c.to):c.to,ge=ta(c.children)||J,Me=Ur(J),xe=Me&&!!/^https?:/.exec(J);if(Nr.test(J))throw new Error("Link component rejected javascript: URL as a security precaution");const gt=ft=>{t==null||t(ft),a||$.captureEvent("click",ge,{attributes:{to:J}})};return Me?r.createElement(g.Z,{...xe?{target:"_blank",rel:"noopener"}:{},...c,...c["aria-label"]?{"aria-label":`${c["aria-label"]}, Opens in a new window`}:{},ref:f,href:J,onClick:gt,className:Oe()(P.externalLink,c.className)},c.children,r.createElement(V.Z,{component:"span",className:P.visuallyHidden},", Opens in a new window")):r.createElement(g.Z,{...c,ref:f,component:Le.rU,to:J,onClick:gt})}),nr=r.forwardRef((t,a)=>r.createElement(yr,{ref:a,...t,color:"initial"})),rr=r.forwardRef((t,a)=>r.createElement(be.Z,{ref:a,component:nr,...t})),ua=null;function hr(t){const{text:a,tooltipDelay:c=1e3,tooltipText:f="Text copied to clipboard","aria-label":P="Copy text"}=t,$=(0,o.u)(o.s),[J,ge]=(0,r.useState)(!1),[{error:Me},xe]=(0,Et.Z)();(0,r.useEffect)(()=>{Me&&$.post(Me)},[Me,$]);const gt=ft=>{ft.stopPropagation(),ge(!0),xe(a)};return r.createElement(r.Fragment,null,r.createElement(fe.ZP,{id:"copy-test-tooltip",title:f,placement:"top",leaveDelay:c,onClose:()=>ge(!1),open:J},r.createElement(m.Z,{onClick:gt,"aria-label":P},r.createElement(zt.Z,null))))}function da(t){const{text:a,language:c,showLineNumbers:f=!1,highlightedNumbers:P,customStyle:$,showCopyCodeButton:J=!1}=t,ge=(0,ve.Z)(),Me=ge.palette.type==="dark"?L.Z:pt.Z,xe=ge.palette.type==="dark"?"#256bf3":"#e6ffed";return r.createElement(Ke.Z,{position:"relative"},r.createElement(St.Z,{customStyle:$,language:c,style:Me,showLineNumbers:f,wrapLines:!0,lineNumberStyle:{color:ge.palette.textVerySubtle},lineProps:gt=>P!=null&&P.includes(gt)?{style:{backgroundColor:xe}}:{}},a),J&&r.createElement(Ke.Z,{position:"absolute",top:0,right:0},r.createElement(hr,{text:a})))}function ot(t){const{title:a,to:c}=t,f=(0,Dt.Z)(P=>P.breakpoints.down("xs"));return c?f?r.createElement(m.Z,{component:Le.rU,color:"primary",title:a,size:"small",to:c},r.createElement(Wt.Z,null)):r.createElement(be.Z,{component:Le.rU,variant:"contained",color:"primary",to:c},a):null}var pe;(t=>{(a=>{a.TOP_BOTTOM="TB",a.BOTTOM_TOP="BT",a.LEFT_RIGHT="LR",a.RIGHT_LEFT="RL"})(t.Direction||(t.Direction={})),(a=>{a.UP_LEFT="UL",a.UP_RIGHT="UR",a.DOWN_LEFT="DL",a.DOWN_RIGHT="DR"})(t.Alignment||(t.Alignment={})),(a=>{a.NETWORK_SIMPLEX="network-simplex",a.TIGHT_TREE="tight-tree",a.LONGEST_PATH="longest-path"})(t.Ranker||(t.Ranker={})),(a=>{a.LEFT="l",a.RIGHT="r",a.CENTER="c"})(t.LabelPosition||(t.LabelPosition={}))})(pe||(pe={}));const vt=(0,ie.Z)(t=>({node:{fill:t.palette.primary.light,stroke:t.palette.primary.light},text:{fill:t.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function An({node:{id:t}}){const a=vt(),[c,f]=r.useState(0),[P,$]=r.useState(0),J=r.useRef(null);r.useLayoutEffect(()=>{if(J.current){let{height:gt,width:ft}=J.current.getBBox();gt=Math.round(gt),ft=Math.round(ft),(gt!==P||ft!==c)&&(f(ft),$(gt))}},[c,P]);const ge=10,Me=c+ge*2,xe=P+ge*2;return r.createElement("g",null,r.createElement("rect",{className:a.node,width:Me,height:xe,rx:10}),r.createElement("text",{ref:J,className:a.text,y:xe/2,x:Me/2,textAnchor:"middle",alignmentBaseline:"middle"},t))}const kn="arrow-marker",Qn="node",lr="edge",Zr="label",Br=(0,Tt.Z)(t=>({node:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),cr=t=>r.createElement(An,{...t});function y({render:t=cr,setNode:a,node:c}){const{width:f,height:P,x:$=0,y:J=0}=c,ge=c,Me=Br(),xe=r.useRef(null);return r.useLayoutEffect(()=>{if(xe.current){let{height:gt,width:ft}=xe.current.getBBox();gt=Math.round(gt),ft=Math.round(ft),(gt!==P||ft!==f)&&a(c.id,{...c,height:gt,width:ft})}},[c,f,P,a]),r.createElement("g",{ref:xe,"data-testid":Qn,className:Me.node,transform:`translate(${$-f/2},${J-P/2})`},t({node:ge}))}const l=(0,Tt.Z)(t=>({text:{fill:t.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function b({edge:{label:t}}){const a=l();return r.createElement("text",{className:a.text,textAnchor:"middle"},t)}const B=(0,Tt.Z)(t=>({path:{strokeWidth:1,stroke:t.palette.textSubtle,fill:"none",transition:`${t.transitions.duration.shortest}ms`},label:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),Re=t=>r.createElement(b,{...t});function st({render:t=Re,setEdge:a,id:c,edge:f,curve:P}){const{x:$=0,y:J=0,width:ge,height:Me,points:xe}=f,gt=f,ft=B(),Yt=r.useRef(null);r.useLayoutEffect(()=>{if(Yt.current){let{height:Dn,width:Vn}=Yt.current.getBBox();Dn=Math.round(Dn),Vn=Math.round(Vn),(Dn!==Me||Vn!==ge)&&a(c,{...f,height:Dn,width:Vn})}},[f,Me,ge,a,c]);let kt="";const un=r.useMemo(()=>wt.Z().x(Dn=>Dn.x).y(Dn=>Dn.y).curve(Jt[P]),[P]);if(xe){const Dn=xe.filter(Vn=>j()(Vn.x)&&j()(Vn.y));kt=un(Dn)||""}return r.createElement(r.Fragment,null,kt&&r.createElement("path",{"data-testid":lr,className:ft.path,d:kt}),gt.label?r.createElement("g",{ref:Yt,"data-testid":Zr,className:ft.label,transform:`translate(${$},${J})`},t({edge:gt})):null)}const At="workspace";function Mt(t){var a,c;const{edges:f,nodes:P,renderNode:$,direction:J=pe.Direction.TOP_BOTTOM,align:ge,nodeMargin:Me=50,edgeMargin:xe=10,rankMargin:gt=50,paddingX:ft=0,paddingY:Yt=0,acyclicer:kt,ranker:un=pe.Ranker.NETWORK_SIMPLEX,labelPosition:Dn=pe.LabelPosition.RIGHT,labelOffset:Vn=10,edgeRanks:mr=1,edgeWeight:$r=1,renderLabel:Qr,defs:qn,zoom:Sr="enabled",curve:Ir="curveMonotoneX",fit:Dr="grow",...Ba}=t,uo=(0,Nt.Z)(),[Ea,mo]=r.useState(100),[po,Oo]=r.useState(100),Er=r.useRef(new(Ht()).graphlib.Graph),[no,ti]=r.useState(((a=Er.current.graph())==null?void 0:a.width)||0),[Ya,To]=r.useState(((c=Er.current.graph())==null?void 0:c.height)||0),[ni,Gr]=r.useState([]),[$a,ro]=r.useState([]),va=Math.max(no,Ea),_r=Math.max(Ya,po),aa=Math.min(Ya,po),ho=Dr==="grow"?_r:aa,ao=r.useMemo(()=>yt()(xr=>{if(!xr)return;const jr=_t.Z(xr),Ar=_t.Z(xr.getElementById(At));function ya(){jr.call(Je.sP().scaleExtent([1,1/0]).on("zoom",Ua=>{Ua.transform.x=Math.min(0,Math.max(Ua.transform.x,va-va*Ua.transform.k)),Ua.transform.y=Math.min(0,Math.max(Ua.transform.y,_r-_r*Ua.transform.k)),Ar.attr("transform",Ua.transform)}))}Sr==="enabled"?ya():Sr==="enable-on-click"&&jr.on("click",()=>ya());const{width:ba,height:Wo}=xr.getBoundingClientRect();Ea!==ba&&mo(ba),po!==Wo&&Oo(Wo)},100),[po,Ea,va,_r,Sr]),go=r.useCallback(()=>{const xr=Er.current.nodes(),jr=Er.current.edges();xr.forEach(Ar=>{P.some(ba=>ba.id===Ar)||Er.current.removeNode(Ar)}),jr.forEach(Ar=>{f.some(ba=>ba.from===Ar.v&&ba.to===Ar.w)||Er.current.removeEdge(Ar.v,Ar.w)}),P.forEach(Ar=>{const ya=Er.current.nodes().find(ba=>Ar.id===ba);if(ya&&Er.current.node(ya)){const{width:ba,height:Wo,x:Ua,y:mc}=Er.current.node(ya);Er.current.setNode(ya,{...Ar,width:ba,height:Wo,x:Ua,y:mc})}else Er.current.setNode(Ar.id,{...Ar,width:0,height:0})}),f.forEach(Ar=>{Er.current.setEdge(Ar.from,Ar.to,{...Ar,label:Ar.label,width:0,height:0,labelpos:Dn,labeloffset:Vn,weight:$r,minlen:mr})})},[f,P,Dn,Vn,$r,mr]),Io=r.useMemo(()=>yt()(()=>{Ht().layout(Er.current);const{height:xr,width:jr}=Er.current.graph(),Ar=Math.max(0,xr||0),ya=Math.max(0,jr||0);ti(ya),To(Ar),Gr(Er.current.nodes()),ro(Er.current.edges())},250,{leading:!0}),[]);r.useEffect(()=>(Er.current.setGraph({rankdir:J,align:ge,nodesep:Me,edgesep:xe,ranksep:gt,marginx:ft,marginy:Yt,acyclicer:kt,ranker:un}),go(),Io(),Io.cancel),[kt,ge,J,xe,ft,Yt,Me,gt,un,go,Io]);function uc(xr,jr){return Er.current.setNode(xr,jr),Io(),Er.current}function dc(xr,jr){return Er.current.setEdge(xr,jr),Io(),Er.current}return r.createElement("svg",{ref:ao,...Ba,width:"100%",height:ho,viewBox:`0 0 ${va} ${_r}`},r.createElement("defs",null,r.createElement("marker",{id:kn,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},r.createElement("path",{fill:uo.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),qn),r.createElement("g",{id:At},r.createElement("svg",{width:no,height:Ya,y:_r/2-Ya/2,x:va/2-no/2,viewBox:`0 0 ${no} ${Ya}`},$a.map(xr=>{const jr=Er.current.edge(xr);return jr?r.createElement(st,{key:`${xr.v}-${xr.w}`,id:xr,setEdge:dc,render:Qr,edge:jr,curve:Ir}):null}),ni.map(xr=>{const jr=Er.current.node(xr);return jr?r.createElement(y,{key:xr,setNode:uc,render:$,node:jr}):null}))))}const Sn=(0,ie.Z)(t=>{var a,c;return{root:{padding:t.spacing(0),marginBottom:t.spacing(0),marginTop:t.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:t.spacing(6),marginTop:-t.spacing(3),zIndex:"unset"},icon:{fontSize:t.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:t.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:t.palette.banner.link}},button:{color:(a=t.palette.banner.closeButtonColor)!=null?a:"inherit"},info:{backgroundColor:t.palette.banner.info},error:{backgroundColor:t.palette.banner.error},warning:{backgroundColor:(c=t.palette.banner.warning)!=null?c:t.palette.banner.error}}},{name:"BackstageDismissableBanner"}),Mn=t=>{var a;const{variant:c,message:f,id:P,fixed:$=!1}=t,J=Sn(),Me=(0,o.u)(o.y).forBucket("notifications"),xe=(a=Me.snapshot("dismissedBanners").value)!=null?a:[],[gt,ft]=(0,r.useState)(new Set(xe)),Yt=(0,E.Z)(Me.observe$("dismissedBanners"));(0,r.useEffect)(()=>{var un;if(Yt!=null&&Yt.value){const Dn=(un=Yt==null?void 0:Yt.value)!=null?un:[];ft(new Set(Dn))}},[Yt==null?void 0:Yt.value]);const kt=()=>{Me.set("dismissedBanners",[...gt,P])};return r.createElement(Y.Z,{anchorOrigin:$?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!gt.has(P),classes:{root:Oe()(J.root,!$&&J.topPosition)}},r.createElement(N.Z,{classes:{root:Oe()(J.content,J[c]),message:J.message},message:f,action:[r.createElement(m.Z,{key:"dismiss",title:"Permanently dismiss this message",className:J.button,onClick:kt},r.createElement(D.Z,{className:J.icon}))]}))},xn=(0,ie.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),br=({missing:t})=>{const a=xn();switch(t){case"field":return r.createElement("img",{src:q,className:a.generalImg,alt:"annotation is missing"});case"info":return r.createElement("img",{src:Ge,alt:"no Information",className:a.generalImg});case"content":return r.createElement("img",{src:Z,alt:"create Component",className:a.generalImg});case"data":return r.createElement("img",{src:x,alt:"no Build",className:a.generalImg});default:return null}},Fr=(0,ie.Z)(t=>({root:{backgroundColor:t.palette.background.default,padding:t.spacing(2,0,0,0)},action:{marginTop:t.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function Yr(t){const{title:a,description:c,missing:f,action:P}=t,$=Fr();return r.createElement(Q.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:$.root,spacing:2},r.createElement(Q.Z,{item:!0,xs:12,md:6},r.createElement(Q.Z,{container:!0,direction:"column"},r.createElement(Q.Z,{item:!0,xs:!0},r.createElement(V.Z,{variant:"h5"},a)),r.createElement(Q.Z,{item:!0,xs:!0},r.createElement(V.Z,{variant:"body1"},c)),r.createElement(Q.Z,{item:!0,xs:!0,className:$.action},P))),r.createElement(Q.Z,{item:!0,xs:12,md:6,className:$.imageContainer},typeof f=="string"?r.createElement(br,{missing:f}):f.customImage))}const oa=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,oo=/^.*ANNOTATION.*$/m,io=oa.match(oo)[0],Eo=oa.split(`
`).findIndex(t=>oo.test(t)),Ja=(0,ie.Z)(t=>({code:{borderRadius:6,margin:t.spacing(2,0),background:t.palette.type==="dark"?"#444":t.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function na(t){return Array.from(Array(t+1).keys(),a=>a+Eo)}function ka(t){const a=t.map(c=>io.replace("ANNOTATION",c)).join(`
`);return oa.replace(io,a)}function Na(t){const a=t.length<=1;return React.createElement(React.Fragment,null,"The ",a?"annotation":"annotations"," ",t.map(c=>React.createElement("code",null,c)).reduce((c,f)=>React.createElement(React.Fragment,null,c,", ",f))," ",a?"is":"are"," missing. You need to add the"," ",a?"annotation":"annotations"," to your component if you want to enable this tool.")}function Xa(t){const{annotation:a,readMoreUrl:c}=t,f=Array.isArray(a)?a:[a],P=c||"https://backstage.io/docs/features/software-catalog/well-known-annotations",$=Ja();return React.createElement(Yr,{missing:"field",title:"Missing Annotation",description:Na(f),action:React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),React.createElement(Box,{className:$.code},React.createElement(da,{text:ka(f),language:"yaml",showLineNumbers:!0,highlightedNumbers:na(f.length),customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:yr,to:P},"Read more"))})}const Fa=(0,ie.Z)(t=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${t.palette.border}`},"& th, & td":{border:`1px solid ${t.palette.border}`,padding:t.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:t.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:t.palette.background.paper},"& tr":{backgroundColor:t.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:t.palette.background.default},"& a":{color:t.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Oa=(t,a)=>a?typeof a=="string"?t+a:r.Children.toArray(a.props.children).reduce(Oa,t):t,Pa=({level:t,children:a})=>{const P=r.Children.toArray(a).reduce(Oa,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return r.createElement(`h${t}`,{id:P},a)},vo={code:({inline:t,className:a,children:c,...f})=>{const P=String(c).replace(/\n+$/,""),$=/language-(\w+)/.exec(a||"");return!t&&$?r.createElement(da,{language:$[1],text:P}):r.createElement("code",{className:a,...f},c)},h1:Pa,h2:Pa,h3:Pa,h4:Pa,h5:Pa,h6:Pa};function Wa(t){const{content:a,dialect:c="gfm",linkTarget:f,transformLinkUri:P,transformImageUri:$,className:J}=t,ge=Fa();return r.createElement(bt.D,{remarkPlugins:c==="gfm"?[$t.Z]:[],className:`${ge.markdown} ${J}`,children:a,components:vo,linkTarget:f,transformLinkUri:P,transformImageUri:$})}const Ta=(t,a)=>(a.palette.type==="light"?Ce._j:Ce.$n)(a.palette[t].light,.6),so=(t,a)=>(a.palette.type==="light"?Ce.$n:Ce._j)(a.palette[t].light,.9),Qa=(0,ie.Z)(t=>({root:{marginRight:t.spacing(1),fill:({severity:a})=>Ta(a,t)}})),yo=({severity:t})=>{const a=Qa({severity:t});return r.createElement(ct.Z,{classes:a})},bo=({severity:t})=>{const a=Qa({severity:t});return r.createElement(Ot.Z,{classes:a})},Co=(0,ie.Z)(t=>({panel:{backgroundColor:({severity:a})=>so(a,t),color:({severity:a})=>Ta(a,t),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:a})=>Ta(a,t),fontWeight:t.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:a})=>Ta(a,t),backgroundColor:({severity:a})=>so(a,t)},details:{width:"100%",display:"block",color:t.palette.textContrast,backgroundColor:t.palette.background.default,border:`1px solid ${t.palette.border}`,padding:t.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),Po=t=>t.charAt(0).toLocaleUpperCase("en-US")+t.slice(1);function ma(t){const{severity:a="warning",title:c,titleFormat:f,message:P,children:$,defaultExpanded:J}=t,ge=Co({severity:a}),Me=Po(a)+(c?`: ${c}`:"");return r.createElement(Qt.Z,{defaultExpanded:J!=null?J:!1,className:ge.panel,role:"alert"},r.createElement(Ie.Z,{expandIcon:r.createElement(bo,{severity:a}),className:ge.summary},r.createElement(yo,{severity:a}),r.createElement(V.Z,{className:ge.summaryText,variant:"subtitle1"},f==="markdown"?r.createElement(Wa,{content:Me,className:ge.markdownContent}):Me)),(P||$)&&r.createElement(Be.Z,null,r.createElement(Q.Z,{container:!0},P&&r.createElement(Q.Z,{item:!0,xs:12},r.createElement(V.Z,{className:ge.message,variant:"body1"},P)),$&&r.createElement(Q.Z,{item:!0,xs:12,className:ge.details},$))))}const Ia=(0,ie.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageErrorPanel"}),Sa=({error:t,message:a,stack:c,children:f})=>{const P=Ia();return r.createElement(he.Z,{dense:!0},r.createElement(Fe.Z,{alignItems:"flex-start"},r.createElement(mt.Z,{classes:{secondary:P.text},primary:"Error",secondary:t}),r.createElement(hr,{text:t})),r.createElement(Fe.Z,{alignItems:"flex-start"},r.createElement(mt.Z,{classes:{secondary:P.text},primary:"Message",secondary:a}),r.createElement(hr,{text:a})),c&&r.createElement(Fe.Z,{alignItems:"flex-start"},r.createElement(mt.Z,{classes:{secondary:P.text},primary:"Stack Trace",secondary:c}),r.createElement(hr,{text:c})),f)};function Wr(t){const{title:a,error:c,defaultExpanded:f,titleFormat:P,children:$}=t;return r.createElement(ma,{severity:"error",title:a!=null?a:c.message,defaultExpanded:f,titleFormat:P},r.createElement(Sa,{error:c.name,message:c.message,stack:c.stack,children:$}))}const qa=(0,ie.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function Ka(t){var a;const{title:c,error:f,defaultExpanded:P}=t,$=qa();if(f.name!=="ResponseError")return r.createElement(Wr,{title:c!=null?c:f.message,defaultExpanded:P,error:f});const{body:J,cause:ge}=f,{request:Me,response:xe}=J,gt=`${xe.statusCode}: ${ge.name}`,ft=Me&&`${Me.method} ${Me.url}`,Yt=ge.message.replace(/\\n/g,`
`),kt=(a=ge.stack)==null?void 0:a.replace(/\\n/g,`
`),un=JSON.stringify(J,void 0,2);return r.createElement(Wr,{title:c!=null?c:f.message,defaultExpanded:P,error:{name:gt,message:Yt,stack:kt}},ft&&r.createElement(Fe.Z,{alignItems:"flex-start"},r.createElement(mt.Z,{classes:{secondary:$.text},primary:"Request",secondary:Me?`${ft}`:void 0}),r.createElement(hr,{text:ft})),r.createElement(r.Fragment,null,r.createElement(Ct.Z,{component:"li",className:$.divider}),r.createElement(Fe.Z,{alignItems:"flex-start"},r.createElement(mt.Z,{classes:{secondary:$.text},primary:"Full Error as JSON"})),r.createElement(da,{language:"json",text:un,showCopyCodeButton:!0})))}function _a(t){const a=document.createElement("div");return a.setAttribute("id",t),a}function ha(t){document.body.insertBefore(t,document.body.lastElementChild.nextElementSibling)}function Da(t){const a=useRef(null);useEffect(function(){const P=document.querySelector(`#${t}`),$=P||_a(t);return P||ha($),$.appendChild(a.current),function(){a.current.remove(),$.childNodes.length===-1&&$.remove()}},[t]);function c(){return a.current||(a.current=document.createElement("div")),a.current}return c()}const ga="core.calloutSeen";function ia(){const[t,a]=useState(()=>{const f=localStorage.getItem(ga);return f?JSON.parse(f):{}}),c=useCallback((f,P)=>{const $=localStorage.getItem(ga),ge={...$?JSON.parse($):{},[f]:P};a(ge),localStorage.setItem(ga,JSON.stringify(ge))},[]);return{states:t,setState:c}}function So(t){const{states:a,setState:c}=ia(),f=useCallback(()=>{c(t,!0)},[c,t]);return{seen:a[t]===!0,markSeen:f}}function _o(t){const{seen:a,markSeen:c}=So(t);return{show:a===!1,hide:c}}const Ro=(0,ie.Z)(t=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${t.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:t.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function Ao(t){const{featureId:a,title:c,description:f,children:P}=t,{show:$,hide:J}=_o(a),ge=Da("core.callout"),Me=useRef(null),[xe,gt]=useState(),ft=Ro(),Yt=useCallback(()=>{if(Me.current){const kt=Me.current.getBoundingClientRect(),un=Math.max(kt.width,kt.height),Dn=800,Vn=kt.x-(un-kt.width)/2-Dn,mr=kt.y-(un-kt.height)/2-Dn,$r=un+2*Dn,Qr=450,qn=kt.x+kt.width/2-Qr,Sr=kt.y-(un-kt.height)/2+un+20;gt({dotLeft:Vn,dotTop:mr,dotSize:$r,borderWidth:Dn,textTop:Sr,textLeft:qn,textWidth:Qr})}},[]);return useEffect(()=>(window.addEventListener("resize",Yt),window.addEventListener("scroll",Yt),()=>{window.removeEventListener("resize",Yt),window.removeEventListener("scroll",Yt)}),[Yt]),useLayoutEffect(Yt,[Me.current,Yt]),$?React.createElement(React.Fragment,null,React.createElement(Box,{className:ft.featureWrapper,ref:Me},P),createPortal(React.createElement(Box,{className:ft.backdrop},React.createElement(ClickAwayListener,{onClickAway:J},React.createElement(React.Fragment,null,React.createElement(Box,{className:ft.dot,"data-testid":"dot",style:{left:xe==null?void 0:xe.dotLeft,top:xe==null?void 0:xe.dotTop,width:xe==null?void 0:xe.dotSize,height:xe==null?void 0:xe.dotSize,borderWidth:xe==null?void 0:xe.borderWidth},onClick:J,onKeyDown:J,role:"button",tabIndex:0},React.createElement(Box,{className:ft.pulseCircle})),React.createElement(Box,{className:ft.text,"data-testid":"text",style:{left:xe==null?void 0:xe.textLeft,top:xe==null?void 0:xe.textTop,width:xe==null?void 0:xe.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},c),React.createElement(Typography,null,f))))),ge)):React.createElement(React.Fragment,null,P)}const eo=(0,ie.Z)(t=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:t.palette.text.secondary,cursor:"default"},primary:{color:t.palette.primary.main},secondary:{color:t.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function or({color:t="primary",disabled:a=!1,href:c="#",icon:f=r.createElement(qe.Z,null),label:P,onClick:$,title:J}){const ge=eo();return a?r.createElement(Ke.Z,{title:J,className:Oe()(ge.link,ge.disabled)},f,r.createElement(V.Z,{variant:"caption",component:"span",className:ge.label},P)):r.createElement(yr,{title:J,className:Oe()(ge.link,ge[t]),to:c,onClick:$},f,r.createElement(V.Z,{variant:"caption",component:"span",className:ge.label},P))}const Kr=(0,ie.Z)(t=>({links:{margin:t.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:t.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function za(t){const{links:a}=t,c=Kr();return r.createElement("nav",{className:c.links},a.map((f,P)=>r.createElement(or,{key:P+1,...f})))}const ra=t=>{const a=t==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${a}) 0%,
    hsla(0, 0%, ${a}, 0.987) 8.1%,
    hsla(0, 0%, ${a}, 0.951) 15.5%,
    hsla(0, 0%, ${a}, 0.896) 22.5%,
    hsla(0, 0%, ${a}, 0.825) 29%,
    hsla(0, 0%, ${a}, 0.741) 35.3%,
    hsla(0, 0%, ${a}, 0.648) 41.2%,
    hsla(0, 0%, ${a}, 0.55) 47.1%,
    hsla(0, 0%, ${a}, 0.45) 52.9%,
    hsla(0, 0%, ${a}, 0.352) 58.8%,
    hsla(0, 0%, ${a}, 0.259) 64.7%,
    hsla(0, 0%, ${a}, 0.175) 71%,
    hsla(0, 0%, ${a}, 0.104) 77.5%,
    hsla(0, 0%, ${a}, 0.049) 84.5%,
    hsla(0, 0%, ${a}, 0.013) 91.9%,
    hsla(0, 0%, ${a}, 0) 100%
  `},Ra=100,Aa=10,wa=(0,ie.Z)(t=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:Ra,height:`calc(100% + ${Aa}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-Aa,background:`linear-gradient(90deg, ${ra(t.palette.type)})`},fadeRight:{right:-Aa,background:`linear-gradient(270deg, ${ra(t.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-t.spacing(2)},buttonRight:{right:-t.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function xa(t){const[[a,c],f]=React.useState([0,0]);return React.useLayoutEffect(()=>{const P=t.current;if(!P){f([0,0]);return}const $=()=>{const J=P.scrollLeft,ge=P.scrollWidth-P.offsetWidth-P.scrollLeft;f([J,ge])};return $(),P.addEventListener("scroll",$),window.addEventListener("resize",$),()=>{P.removeEventListener("scroll",$),window.removeEventListener("resize",$)}},[t]),[a,c]}function Ga(t,a,c){const[f,P]=React.useState(0);return React.useLayoutEffect(()=>{if(f===0)return;const $=window.performance.now(),J=requestAnimationFrame(ge=>{if(!t.current)return;const Me=ge-$,xe=Math.abs(f)*Me/a,ft=Math.max(c,xe)*Math.sign(f);t.current.scrollBy({left:ft});const Yt=f-ft;Math.sign(f)!==Math.sign(Yt)?P(0):P(Yt)});return()=>cancelAnimationFrame(J)},[t,f,a,c]),P}function ja(t){const{scrollStep:a=100,scrollSpeed:c=50,minScrollDistance:f=5,children:P,...$}=t,J=wa(t),ge=React.useRef(),[Me,xe]=xa(ge),gt=Ga(ge,c,f),ft=Yt=>{ge.current&&gt(Yt?a:-a)};return React.createElement(Box,{...$,className:J.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:J.container,ref:ge},P),React.createElement(Box,{className:classNames(J.fade,J.fadeLeft,{[J.fadeHidden]:Me===0})}),React.createElement(Box,{className:classNames(J.fade,J.fadeRight,{[J.fadeHidden]:xe===0})}),Me>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>ft(!1),className:classNames(J.button,J.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),xe>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>ft(!0),className:classNames(J.button,J.buttonRight,{})},React.createElement(ChevronRight,null)))}const v=(0,ie.Z)(t=>({alpha:{color:t.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function S(t){const a=v(t),{shorthand:c,alpha:f}=t;return c?r.createElement(V.Z,{component:"span",className:a[f?"alpha":"beta"],style:{fontSize:"120%"}},f?r.createElement(r.Fragment,null,"\u03B1"):r.createElement(r.Fragment,null,"\u03B2")):r.createElement(V.Z,{component:"span",className:a[f?"alpha":"beta"]},f?"Alpha":"Beta")}const I=(0,r.lazy)(()=>e.e(9505).then(e.bind(e,79505)).then(t=>({default:t.RealLogViewer})));function U(t){const{Progress:a}=(0,p.qD)().getComponents();return r.createElement(r.Suspense,{fallback:r.createElement(a,null)},r.createElement(I,{...t}))}const de=(0,ie.Z)(t=>({root:{paddingLeft:t.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Te=({request:t,busy:a,setBusy:c})=>{const f=de(),[P,$]=(0,r.useState)(),J=async()=>{c(!0);try{await t.trigger()}catch(Me){$((0,Ue.VZ)(Me)?Me.message:"An unspecified error occurred")}finally{c(!1)}},ge=t.provider.icon;return r.createElement(Fe.Z,{disabled:a,classes:{root:f.root}},r.createElement(ue.Z,null,r.createElement(ge,{fontSize:"large"})),r.createElement(mt.Z,{primary:t.provider.title,secondary:P&&r.createElement(V.Z,{color:"error"},P)}),r.createElement(be.Z,{color:"primary",variant:"contained",onClick:J},"Log in"))},je=(0,ie.Z)(t=>({dialog:{paddingTop:t.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:t.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:t.spacing(2,0)}}),{name:"OAuthRequestDialog"});function ze(t){var a;const c=je(),[f,P]=(0,r.useState)(!1),$=(0,o.u)(o.x),ge=(a=(0,o.u)(o.p).getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?a:!1,Me=(0,E.Z)((0,r.useMemo)(()=>$.authRequest$(),[$]),[]),xe=()=>{Me.forEach(gt=>gt.reject())};return r.createElement(X.Z,{open:Boolean(Me.length),fullWidth:!0,maxWidth:"xs",classes:{paper:c.dialog},"aria-labelledby":"oauth-req-dialog-title"},r.createElement("main",null,r.createElement(ne.Z,{classes:{root:c.title},id:"oauth-req-dialog-title"},r.createElement(V.Z,{className:c.titleHeading,variant:"h1",variantMapping:{h1:"span"}},"Login Required"),ge?r.createElement(V.Z,null,"This will trigger a http redirect to OAuth Login."):null),r.createElement(s.Z,{dividers:!0,classes:{root:c.contentList}},r.createElement(he.Z,null,Me.map(gt=>r.createElement(Te,{key:gt.provider.title,request:gt,busy:f,setBusy:P}))))),r.createElement(k.Z,{classes:{root:c.actionButtons}},r.createElement(be.Z,{onClick:xe},"Reject All")))}const dt=(0,ie.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function Zt(t){var a;const[c,f]=(0,r.useState)(!1),P=(0,Rt.t)(),$=dt(),J=ge=>{P()&&f(ge)};return r.createElement(fe.ZP,{title:(a=t.title)!=null?a:t.text||"",placement:t.placement,disableHoverListener:!c},r.createElement(it(),{text:t.text,line:t.line,onToggled:J,containerClassName:$.container}))}function Lt(t){const a=(0,ve.Z)(),[c,f]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const P=setTimeout(()=>f(!0),a.transitions.duration.short);return()=>clearTimeout(P)},[a.transitions.duration.short]),c?r.createElement(qt.Z,{...t,"data-testid":"progress"}):r.createElement(Ke.Z,{display:"none"})}const mn=(0,ie.Z)(t=>({root:{maxWidth:"fit-content",padding:t.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:t.palette.textSubtle},arrow:{color:t.palette.textSubtle}}),{name:"BackstageBottomLink"});function Tn(t){const{link:a,title:c,onClick:f}=t,P=mn();return r.createElement(Ke.Z,null,r.createElement(Ct.Z,null),r.createElement(yr,{to:a,onClick:f,underline:"none"},r.createElement(Ke.Z,{display:"flex",alignItems:"center",className:P.root},r.createElement(Ke.Z,{className:P.boxTitle,fontWeight:"fontWeightBold",m:1},r.createElement(V.Z,null,r.createElement("strong",null,c))),r.createElement(H.Z,{className:P.arrow}))))}const vn=t=>{const{slackChannel:a}=t;if(a){if(typeof a=="string")return r.createElement(V.Z,null,"Please contact ",a," for help.");if(!a.href)return r.createElement(V.Z,null,"Please contact ",a.name," for help.")}else return null;return r.createElement(rr,{to:a.href,variant:"contained"},a.name)},yn=class extends r.Component{constructor(a){super(a),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(a,c){console.error(`ErrorBoundary, error: ${a}, info: ${c}`),this.setState({error:a,errorInfo:c})}render(){const{slackChannel:a,children:c}=this.props,{error:f}=this.state;return f?r.createElement(Wr,{title:"Something Went Wrong",error:f},r.createElement(vn,{slackChannel:a})):c}},jn=(0,ie.Z)(t=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:t.spacing(2,2,2,2.5)},headerTitle:{fontWeight:t.typography.fontWeightBold},headerSubheader:{paddingTop:t.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),Pn=(0,u.Z)(t=>({root:{display:"inline-block",padding:t.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(we.Z),Xn={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function Nn(t){const{title:a,subheader:c,divider:f=!0,deepLink:P,slackChannel:$,errorBoundaryProps:J,variant:ge,children:Me,headerStyle:xe,headerProps:gt,icon:ft,action:Yt,actionsClassName:kt,actions:un,cardClassName:Dn,actionsTopRight:Vn,className:mr,noPadding:$r,titleTypographyProps:Qr}=t,qn=jn();let Sr={},Ir={};ge&&ge.split(/[\s]+/g).forEach(Ea=>{Sr={...Sr,...Xn.card[Ea]},Ir={...Ir,...Xn.cardContent[Ea]}});const Dr=()=>!c&&!ft?null:r.createElement("div",{className:qn.headerSubheader,"data-testid":"info-card-subheader"},c&&r.createElement("div",{className:qn.subheader},c),ft),Ba=J||($?{slackChannel:$}:{});return r.createElement(nn.Z,{style:Sr,className:mr},r.createElement(yn,{...Ba},a&&r.createElement(w.Z,{classes:{root:qn.header,title:qn.headerTitle,subheader:qn.headerSubheader,avatar:qn.headerAvatar,action:qn.headerAction,content:qn.headerContent},title:a,subheader:Dr(),action:Yt,style:{...xe},titleTypographyProps:Qr,...gt}),Vn&&r.createElement(Pn,null,Vn),f&&r.createElement(Ct.Z,null),r.createElement(De.Z,{className:Oe()(Dn,{[qn.noPadding]:$r}),style:Ir},Me),un&&r.createElement(we.Z,{className:kt},un),P&&r.createElement(Tn,{...P})))}const Un=(0,ie.Z)(t=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:t.typography.pxToRem(45),fontWeight:t.typography.fontWeightBold,color:t.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),Kn={fractional:!0,inverse:!1,unit:"%",max:100},er=({palette:t,value:a,inverse:c,max:f})=>{if(isNaN(a))return"#ddd";const P=f||Kn.max,$=c?P-a:a;return $<P/3?t.status.error:$<P*(2/3)?t.status.warning:t.status.ok};function fr(t){const[a,c]=useState(null),{getColor:f=er}=t,P=Un(t),{palette:$}=useTheme(),{value:J,fractional:ge,inverse:Me,unit:xe,max:gt,description:ft}={...Kn,...t},Yt=ge?Math.round(J*gt):J,kt=gt!==100?Math.round(J):Yt,[un,Dn]=useState(!1);return useEffect(()=>{const Vn=a,mr=()=>Dn(!0),$r=()=>Dn(!1);return Vn&&ft?(Vn.addEventListener("mouseenter",mr),Vn.addEventListener("mouseleave",$r),()=>{Vn.removeEventListener("mouseenter",mr),Vn.removeEventListener("mouseleave",$r)}):()=>{Dn(!1)}},[ft,a]),React.createElement(Box,{ref:c,className:P.root},React.createElement(Circle,{strokeLinecap:"butt",percent:Yt,strokeWidth:12,trailWidth:12,strokeColor:f({palette:$,value:kt,inverse:Me,max:gt}),className:P.circle}),ft&&un?React.createElement(Box,{className:P.description},ft):React.createElement(Box,{className:P.overlay},isNaN(J)?"N/A":`${kt}${xe}`))}const sa=(0,ie.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function La(t){const a=sa(t),{title:c,subheader:f,progress:P,inverse:$,deepLink:J,description:ge,icon:Me,variant:xe,getColor:gt}=t,ft={inverse:$,description:ge,getColor:gt,value:P};return React.createElement(Box,{className:a.root},React.createElement(Nn,{title:c,subheader:f,deepLink:J,variant:xe,icon:Me},React.createElement(fr,{...ft})))}function Jr(t){const{value:a,getColor:c=er,width:f="thick"}=t,{palette:P}=useTheme();if(isNaN(a))return null;let $=Math.round(a*100*100)/100;$>100&&($=100);const J=f==="thick"?4:1,ge=c({palette:P,value:$,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${$}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:$,strokeWidth:J,trailWidth:J,strokeColor:ge})))}const zr=(0,ie.Z)(t=>(0,F.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),Va=()=>{const t=zr();return r.createElement(an.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},to=(0,ie.Z)(t=>(0,F.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),Do=()=>{const t=to();return r.createElement(an.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},d=(0,u.Z)(t=>(0,F.Z)({root:{"label + &":{marginTop:t.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:t.palette.primary.main}},input:{borderRadius:t.shape.borderRadius,position:"relative",backgroundColor:t.palette.background.paper,border:"1px solid #ced4da",fontSize:t.typography.body1.fontSize,padding:t.spacing(1.25,3.25,1.25,1.5),transition:t.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:t.palette.background.paper,borderRadius:t.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(He.Z),n=(0,ie.Z)(t=>(0,F.Z)({formControl:{margin:t.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function i(t){const{multiple:a,items:c,label:f,placeholder:P,selected:$,onChange:J,triggerReset:ge,native:Me=!1,disabled:xe=!1,margin:gt}=t,ft=n(),[Yt,kt]=(0,r.useState)($||(a?[]:"")),[un,Dn]=(0,r.useState)(!1);(0,r.useEffect)(()=>{kt(a?[]:"")},[ge,a]),(0,r.useEffect)(()=>{kt($||(a?[]:""))},[$,a]);const Vn=qn=>{kt(qn.target.value),J(qn.target.value)},mr=qn=>{if(xe){qn.preventDefault();return}Dn(Sr=>a&&!(qn.target instanceof HTMLElement)?!0:!Sr)},$r=()=>{Dn(!1)},Qr=qn=>()=>{const Sr=Yt.filter(Ir=>Ir!==qn);kt(Sr),J(Sr)};return r.createElement(Ke.Z,{className:ft.root},r.createElement(ee.Z,{className:ft.formControl},r.createElement(lt.Z,{className:ft.formLabel},f),r.createElement(It.Z,{"aria-label":f,value:Yt,native:Me,disabled:xe,"data-testid":"select",displayEmpty:!0,multiple:a,margin:gt,onChange:Vn,open:un,onOpen:mr,onClose:$r,input:r.createElement(d,null),label:f,renderValue:qn=>{var Sr;return a&&Yt.length!==0?r.createElement(Ke.Z,{className:ft.chips},qn.map(Ir=>{const Dr=c.find(Ba=>Ba.value===Ir);return Dr?r.createElement(K.Z,{key:Dr==null?void 0:Dr.value,label:Dr==null?void 0:Dr.label,clickable:!0,onDelete:Qr(Ir),className:ft.chip}):!1})):r.createElement(V.Z,null,Yt.length===0?P||"":(Sr=c.find(Ir=>Ir.value===qn))==null?void 0:Sr.label)},IconComponent:()=>un?r.createElement(Do,null):r.createElement(Va,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},P&&!a&&r.createElement(Bt.Z,{value:[]},P),Me?c&&c.map(qn=>r.createElement("option",{value:qn.value,key:qn.value},qn.label)):c&&c.map(qn=>r.createElement(Bt.Z,{key:qn.value,value:qn.value},a&&r.createElement(ut.Z,{color:"primary",checked:Yt.includes(qn.value)||!1,className:ft.checkbox}),qn.label)))))}const h=()=>{},A=r.createContext({stepperLength:0,stepIndex:0,setStepIndex:h,stepHistory:[],setStepHistory:h,onStepChange:h});function Se(t){const{children:a,elevated:c,onStepChange:f,activeStep:P=0}=t,[$,J]=useState(P),[ge,Me]=useState([0]);useEffect(()=>{J(P)},[P]);const xe=[];let gt;return Children.forEach(a,ft=>{isValidElement(ft)&&(ft.props.end?gt=ft:xe.push(ft))}),React.createElement(React.Fragment,null,React.createElement(A.Provider,{value:{stepIndex:$,setStepIndex:J,stepHistory:ge,setStepHistory:Me,onStepChange:f,stepperLength:Children.count(a)}},React.createElement(MuiStepper,{activeStep:$,orientation:"vertical",elevation:c?2:0},xe)),$>=Children.count(a)-1&&gt)}const et=(0,ie.Z)(t=>({root:{marginTop:t.spacing(3),"& button":{marginRight:t.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),at=({text:t,handleClick:a})=>React.createElement(Button$1,{onClick:a},t||"Reset"),xt=({text:t,handleClick:a,disabled:c,last:f,stepIndex:P})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:c,"data-testid":`nextButton-${P}`,onClick:a},t||(f?"Finish":"Next")),Kt=({text:t,handleClick:a,disabled:c,stepIndex:f})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:c,"data-testid":`skipButton-${f}`,onClick:a},t||"Skip"),zn=({text:t,handleClick:a,disabled:c,stepIndex:f})=>React.createElement(Button$1,{onClick:a,"data-testid":`backButton-${f}`,disabled:c},t||"Back"),Bn=({actions:t={},children:a})=>{const c=et(),{stepperLength:f,stepIndex:P,setStepIndex:$,stepHistory:J,setStepHistory:ge,onStepChange:Me}=useContext(A),xe=(kt,un)=>{un&&un(),Me&&Me(P,kt),$(kt)},gt=()=>{const kt=t.nextStep?t.nextStep(P,f-1):P+1;xe(kt,t.onNext),ge([...J,kt])},ft=()=>{J.pop(),xe(J[J.length-1],t.onBack),ge([...J])},Yt=()=>{xe(0,t.onRestart),ge([0])};return React.createElement(Box,{className:c.root},[void 0,!0].includes(t.showBack)&&P!==0&&React.createElement(zn,{text:t.backText,handleClick:ft,disabled:P===0,stepIndex:P}),t.showSkip&&React.createElement(Kt,{text:t.skipText,handleClick:gt,disabled:!!f&&P>=f||!!t.canSkip&&!t.canSkip(),stepIndex:P}),[void 0,!0].includes(t.showNext)&&React.createElement(xt,{text:t.nextText,handleClick:gt,disabled:!!f&&P>=f||!!t.canNext&&!t.canNext(),stepIndex:P}),t.showRestart&&P!==0&&React.createElement(at,{text:t.restartText,handleClick:Yt,stepIndex:P}),a)},On=(0,ie.Z)(t=>({end:{padding:t.spacing(3)}}),{name:"SimpleStepperStep"});function ar(t){const{title:a,children:c,end:f,actions:P,...$}=t,J=On();return f?React.createElement(Box,{className:J.end},React.createElement(Typography,{variant:"h6"},a),c,React.createElement(Bn,{actions:{...P||{},showNext:!1}})):React.createElement(MuiStep,{...$},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},a)),React.createElement(StepContent,null,c,React.createElement(Bn,{actions:P})))}const Fn=(0,ie.Z)(t=>({status:{fontWeight:t.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:t.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:t.palette.status.ok}},warning:{"&::before":{backgroundColor:t.palette.status.warning}},error:{"&::before":{backgroundColor:t.palette.status.error}},pending:{"&::before":{backgroundColor:t.palette.status.pending}},running:{"&::before":{backgroundColor:t.palette.status.running}},aborted:{"&::before":{backgroundColor:t.palette.status.aborted}}}),{name:"BackstageStatus"});function sr(t){const a=Fn(t);return r.createElement(V.Z,{component:"span",className:Oe()(a.status,a.ok),"aria-label":"Status ok","aria-hidden":"true",...t})}function Xr(t){const a=Fn(t);return r.createElement(V.Z,{component:"span",className:Oe()(a.status,a.warning),"aria-label":"Status warning","aria-hidden":"true",...t})}function ur(t){const a=Fn(t);return r.createElement(V.Z,{component:"span",className:Oe()(a.status,a.error),"aria-label":"Status error","aria-hidden":"true",...t})}function la(t){const a=Fn(t);return r.createElement(V.Z,{component:"span",className:Oe()(a.status,a.pending),"aria-label":"Status pending","aria-hidden":"true",...t})}function Ha(t){const a=Fn(t);return r.createElement(V.Z,{component:"span",className:Oe()(a.status,a.running),"aria-label":"Status running","aria-hidden":"true",...t})}function xo(t){const a=Fn(t);return r.createElement(V.Z,{component:"span",className:Oe()(a.status,a.aborted),"aria-label":"Status aborted","aria-hidden":"true",...t})}const Ji=t=>(0,F.Z)({root:{fontWeight:t.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:t.spacing(4),border:"0",verticalAlign:"top"}}),Xi={root:{border:"0",verticalAlign:"top"}},Qi=t=>(0,F.Z)({root:{margin:t.spacing(0,0,-1,0)}}),qi=t=>(0,F.Z)({root:{padding:t.spacing(0,0,1,0)},random:{}}),es=(0,u.Z)(Ji,{name:"BackstageMetadataTableTitleCell"})(ln.Z),ts=(0,u.Z)(Xi,{name:"BackstageMetadataTableCell"})(ln.Z),ns=({dense:t,children:a})=>r.createElement(tn.Z,{size:t?"small":"medium"},r.createElement(cn.Z,null,a)),rs=({title:t,children:a,...c})=>r.createElement(wn.Z,null,t&&r.createElement(es,null,t),r.createElement(ts,{colSpan:t?1:2,...c},a)),oi=(0,u.Z)(Qi,{name:"BackstageMetadataTableList"})(({classes:t,children:a})=>r.createElement(he.Z,{disablePadding:!0,className:t.root},a)),ii=(0,u.Z)(qi,{name:"BackstageMetadataTableListItem"})(({classes:t,children:a})=>r.createElement(Fe.Z,{className:t.root},a)),si=(0,F.Z)({root:{margin:"0 0",listStyleType:"none"}}),as=t=>(0,F.Z)({root:{...si.root,paddingLeft:t.spacing(1)}}),li=(0,u.Z)(si,{name:"BackstageStructuredMetadataTableList"})(({classes:t,children:a})=>r.createElement(oi,{classes:t},a)),ci=(0,u.Z)(as,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:t,children:a})=>r.createElement(oi,{classes:t},a));function os(t,a,c){const f=t.map((P,$)=>r.createElement(ii,{key:$},Ko(P,a,c)));return c?r.createElement(ci,null,f):r.createElement(li,null,f)}function is(t,a,c){const f=Object.keys(t).map(P=>{const $=Ko(t[P],a,!0);return r.createElement(ii,{key:P},r.createElement(V.Z,{variant:"body2",component:"span"},`${a.titleFormat(P)}: `),$)});return c?r.createElement(ci,null,f):r.createElement(li,null,f)}function Ko(t,a,c){return r.isValidElement(t)?r.createElement(r.Fragment,null,t):t!==null&&typeof t=="object"&&!Array.isArray(t)?is(t,a,c):Array.isArray(t)?os(t,a,c):typeof t=="boolean"?r.createElement(r.Fragment,null,t?"\u2705":"\u274C"):r.createElement(V.Z,{variant:"body2",component:"span"},t)}const ss=({value:t,options:a})=>r.createElement(r.Fragment,null,Ko(t,a,!1)),ls=({title:t,value:a,options:c})=>r.createElement(rs,{title:c.titleFormat(t)},r.createElement(ss,{value:a,options:c}));function cs(t,a){return Object.keys(t).map(c=>r.createElement(ls,{key:c,title:c,value:t[c],options:a}))}function us(t){const{metadata:a,dense:c=!0,options:f={}}=t,P=cs(a,{titleFormat:fn(),...f});return r.createElement(ns,{dense:c},P)}function ds(t){return qs.stringify(t,{strictNullHandling:!0})}function ui(t){return qs.parse(t,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function di(t,a){return ui(t)[a]}function ms(t,a,c){const f={...ui(t),[a]:c};return ds(f)}function pc(t,a=250){const[c,f]=useSearchParams(),P=c.toString(),[$,J]=useState(di(P,t));return useEffect(()=>{const ge=di(P,t);J(Me=>isEqual(ge,Me)?Me:ge)},[P,J,t]),useDebouncedEffect(()=>{const ge=ms(P,t,$);P!==ge&&f(ge,{replace:!0})},[f,$,P,t],a),[$,J]}const ps={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function mi(){const a=(0,o.b)().get(o.p),c=a==null?void 0:a.getOptionalConfig("app.support");return c?{url:c.getString("url"),items:c.getConfigArray("items").flatMap(f=>{var P;return{title:f.getString("title"),icon:f.getOptionalString("icon"),links:((P=f.getOptionalConfigArray("links"))!=null?P:[]).flatMap($=>({url:$.getString("url"),title:$.getString("title")}))}})}:ps}function fa(t,a){const f=(0,p.qD)().getSystemIcon(t);return f?r.createElement(f,{...a}):r.createElement(Pt.Z,{...a})}function hc(t){return fa("brokenImage",t)}function hs(t){return fa("catalog",t)}function gc(t){return fa("chat",t)}function fc(t){return fa("dashboard",t)}function gs(t){return fa("docs",t)}function Ec(t){return fa("email",t)}function fs(t){return fa("github",t)}function vc(t){return fa("group",t)}function Lo(t){return fa("help",t)}function Es(t){return fa("user",t)}function yc(t){return fa("warning",t)}const vs=(0,ie.Z)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),ys=({icon:t})=>{var a;const c=(0,p.qD)(),f=t&&(a=c.getSystemIcon(t))!=null?a:Lo;return r.createElement(f,null)},bs=({link:t})=>{var a;return r.createElement(yr,{to:t.url},(a=t.title)!=null?a:t.url)},Cs=({item:t})=>{var a;return r.createElement(Bt.Z,null,r.createElement(dn.Z,null,r.createElement(ys,{icon:t.icon})),r.createElement(mt.Z,{primary:t.title,secondary:(a=t.links)==null?void 0:a.reduce((c,f,P)=>[...c,P>0&&r.createElement("br",{key:P}),r.createElement(bs,{link:f,key:f.url})],[])}))};function Ps(t){const{title:a,items:c,children:f}=t,{items:P}=mi(),[$,J]=(0,r.useState)(!1),[ge,Me]=(0,r.useState)(null),xe=vs(),gt=(0,Dt.Z)(kt=>kt.breakpoints.down("sm")),ft=kt=>{Me(kt.currentTarget),J(!0)},Yt=()=>{J(!1)};return r.createElement(r.Fragment,null,r.createElement(Ke.Z,{display:"flex",ml:1},gt?r.createElement(m.Z,{color:"primary",size:"small",onClick:ft,"data-testid":"support-button","aria-label":"Support"},r.createElement(Lo,null)):r.createElement(be.Z,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:ft,startIcon:r.createElement(Lo,null)},"Support")),r.createElement(ce.ZP,{"data-testid":"support-button-popover",open:$,anchorEl:ge,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:Yt},r.createElement(bn.Z,{className:xe.popoverList,autoFocusItem:Boolean(ge)},a&&r.createElement(Bt.Z,{alignItems:"flex-start",className:xe.menuItem},r.createElement(V.Z,{variant:"subtitle1"},a)),r.Children.map(f,(kt,un)=>r.createElement(Bt.Z,{alignItems:"flex-start",key:`child-${un}`,className:xe.menuItem},kt)),(c!=null?c:P).map((kt,un)=>r.createElement(Cs,{item:kt,key:`item-${un}`}))),r.createElement(k.Z,null,r.createElement(be.Z,{color:"primary",onClick:Yt,"aria-label":"Close"},"Close"))))}const Ss=(0,ie.Z)(t=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:t.spacing(3),paddingBottom:t.spacing(3),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function Mo(t){const{className:a,stretch:c,noPadding:f,children:P,...$}=t,J=Ss();return r.createElement("article",{...$,className:Oe()(J.root,a,{[J.stretch]:c,[J.noPadding]:f})},P)}const _s=(0,ie.Z)(t=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:t.palette.background.paper,paddingLeft:t.spacing(3),minWidth:0},defaultTab:{...t.typography.caption,padding:t.spacing(3,3),textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,color:t.palette.text.secondary},selected:{color:t.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:t.palette.background.default,color:t.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function pi(t){const{tabs:a,onChange:c,selectedIndex:f}=t,[P,$]=(0,r.useState)(f!=null?f:0),J=_s(),ge=(0,r.useCallback)((Me,xe)=>{f===void 0&&$(xe),c&&c(xe)},[f,c]);return(0,r.useEffect)(()=>{f!==void 0&&$(f)},[f]),r.createElement(Ke.Z,{className:J.tabsWrapper},r.createElement(_n.Z,{selectionFollowsFocus:!0,indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:ge,value:P},a.map((Me,xe)=>r.createElement(jt.Z,{...Me.tabProps,"data-testid":`header-tab-${xe}`,label:Me.label,key:Me.id,value:xe,className:J.defaultTab,classes:{selected:J.selected,root:J.tabRoot}}))))}function Rs(t){var a,c,f,P,$;const J=(0,se.UO)(),Me=t.map(({path:kt,children:un})=>({caseSensitive:!1,path:`${kt}/*`,element:un})).sort((kt,un)=>un.path.replace(/\/\*$/,"").localeCompare(kt.path.replace(/\/\*$/,""))),xe=(c=(0,se.V$)(Me))!=null?c:(a=t[0])==null?void 0:a.children;let gt=(f=J["*"])!=null?f:"";gt.startsWith("/")||(gt=`/${gt}`);const[ft]=(P=(0,_e.fp)(Me,gt))!=null?P:[],Yt=ft?t.findIndex(kt=>`${kt.path}/*`===ft.route.path):0;return{index:Yt===-1?0:Yt,element:xe,route:($=t[Yt])!=null?$:t[0]}}function hi(t){const{routes:a}=t,c=(0,se.s0)(),{index:f,route:P,element:$}=Rs(a),J=(0,r.useMemo)(()=>a.map(Me=>({id:Me.path,label:Me.title,tabProps:Me.tabProps})),[a]),ge=Me=>{let{path:xe}=a[Me];xe=xe.replace(/\/\*$/,""),xe=xe.replace(/^\//,""),c(xe)};return r.createElement(r.Fragment,null,r.createElement(pi,{tabs:J,selectedIndex:f,onChange:ge}),r.createElement(Mo,null,r.createElement(Gt.q,{title:P==null?void 0:P.title}),$))}const zo=()=>null;(0,p.R5)(zo,"core.gatherMountPoints",!0);function gi(t){const a=r.createElement(zo,{path:"",title:""},r.createElement("div",null)).type;return r.Children.toArray(t).flatMap(c=>{if(!(0,r.isValidElement)(c))return[];if(c.type===r.Fragment)return gi(c.props.children);if(c.type!==a)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:f,title:P,children:$,tabProps:J}=c.props;return[{path:f,title:P,children:$,tabProps:J}]})}function As(t){const a=gi(t.children);return r.createElement(hi,{routes:a})}As.Route=zo;const ws=(0,ie.Z)(t=>({value:{marginBottom:t.spacing(.75)},subvalue:{color:t.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Os(t){const{value:a,subvalue:c}=t,f=ws();return r.createElement(r.Fragment,null,r.createElement(Ke.Z,{className:f.value},a),r.createElement(Ke.Z,{className:f.subvalue},c))}const Ts=(0,ie.Z)(t=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:t.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:t.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${t.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:t.spacing(2)}}}),{name:"BackstageTableFilters"}),Is=t=>{var a;const c=Ts(),{onChangeFilters:f}=t,[P,$]=(0,r.useState)({...t.selectedFilters}),[J,ge]=(0,r.useState)(!1),Me=()=>{$({}),ge(xe=>!xe)};return(0,r.useEffect)(()=>{f(P)},[P,f]),r.createElement(Ke.Z,{className:c.root},r.createElement(Ke.Z,{className:c.header},r.createElement(Ke.Z,{className:c.value},"Filters"),r.createElement(be.Z,{color:"primary",onClick:Me},"Clear all")),r.createElement(Ke.Z,{className:c.filters},((a=t.filters)==null?void 0:a.length)&&t.filters.map(xe=>r.createElement(i,{triggerReset:J,key:xe.element.label,...xe.element,selected:P[xe.element.label],onChange:gt=>$({...P,[xe.element.label]:gt})}))))},fi={Add:(0,r.forwardRef)((t,a)=>r.createElement(Gn.Z,{...t,ref:a})),Check:(0,r.forwardRef)((t,a)=>r.createElement(gr.Z,{...t,ref:a})),Clear:(0,r.forwardRef)((t,a)=>r.createElement(Jn.Z,{...t,ref:a})),Delete:(0,r.forwardRef)((t,a)=>r.createElement(pr.Z,{...t,ref:a})),DetailPanel:(0,r.forwardRef)((t,a)=>r.createElement(G.Z,{...t,ref:a})),Edit:(0,r.forwardRef)((t,a)=>r.createElement(Pr.Z,{...t,ref:a})),Export:(0,r.forwardRef)((t,a)=>r.createElement(Tr.Z,{...t,ref:a})),Filter:(0,r.forwardRef)((t,a)=>r.createElement(Lr.Z,{...t,ref:a})),FirstPage:(0,r.forwardRef)((t,a)=>r.createElement(vr.Z,{...t,ref:a})),LastPage:(0,r.forwardRef)((t,a)=>r.createElement(wr.Z,{...t,ref:a})),NextPage:(0,r.forwardRef)((t,a)=>r.createElement(G.Z,{...t,ref:a})),PreviousPage:(0,r.forwardRef)((t,a)=>r.createElement(Ee.Z,{...t,ref:a})),ResetSearch:(0,r.forwardRef)((t,a)=>r.createElement(Jn.Z,{...t,ref:a})),Search:(0,r.forwardRef)((t,a)=>r.createElement(Lr.Z,{...t,ref:a})),SortArrow:(0,r.forwardRef)((t,a)=>r.createElement(dr.Z,{...t,ref:a})),ThirdStateCheck:(0,r.forwardRef)((t,a)=>r.createElement(Or.Z,{...t,ref:a})),ViewColumn:(0,r.forwardRef)((t,a)=>r.createElement(oe.Z,{...t,ref:a}))};function Ei(t,a){const c=a.split(".");let f=t[c[0]];for(let P=1;P<c.length;++P){if(f===void 0)return f;const $=c[P];f=f[$]}return f}const Ds=(0,u.Z)(t=>({header:{padding:t.spacing(1,2,1,2.5),borderTop:`1px solid ${t.palette.grey.A100}`,borderBottom:`1px solid ${t.palette.grey.A100}`,fontWeight:t.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(Wn.W$),vi=(0,u.Z)(t=>({root:{padding:t.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:t.typography.fontWeightBold}},searchField:{paddingRight:t.spacing(2)}}),{name:"BackstageTableToolbar"})(Wn.UW),xs=(0,ie.Z)(t=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:t.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Ls=(0,ie.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Ms(t,a){return t.map(c=>{var f;const P=(f=c.headerStyle)!=null?f:{};let $=c.cellStyle||{};if(c.highlight)if(P.color=a.palette.textContrast,typeof $=="object")$.fontWeight=a.typography.fontWeightBold;else{const J=$;$=(ge,Me,xe)=>({...J(ge,Me,xe),fontWeight:a.typography.fontWeightBold})}return{...c,headerStyle:P,cellStyle:$}})}function Bs(t,a){return(0,Qe.transform)(t,(c,f,P)=>{(0,Qe.isEqual)(f,a[P])||(c[P]=f)})}const yi={search:"",filtersOpen:!1,filters:{}};function $s(t){const{toolbarRef:a,setSearch:c,hasFilters:f,selectedFiltersLength:P,toggleFilters:$}=t,J=xs(),ge=(0,r.useCallback)(Me=>{t.onSearchChanged(Me),c(Me)},[t,c]);return f?r.createElement(Ke.Z,{className:J.root},r.createElement(Ke.Z,{className:J.root},r.createElement(m.Z,{onClick:$,"aria-label":"filter list"},r.createElement(Lr.Z,null)),r.createElement(V.Z,{className:J.title},"Filters (",P,")")),r.createElement(vi,{...t,ref:a,onSearchChanged:ge})):r.createElement(vi,{...t,ref:a,onSearchChanged:ge})}function bi(t){const{data:a,columns:c,options:f,title:P,subtitle:$,filters:J,initialState:ge,emptyContent:Me,onStateChange:xe,components:gt,isLoading:ft,...Yt}=t,kt=Ls(),un=(0,ve.Z)(),Dn={...yi,...ge},[Vn,mr]=(0,r.useState)(Dn.filtersOpen),$r=(0,r.useCallback)(()=>mr(Gr=>!Gr),[mr]),[Qr,qn]=(0,r.useState)(0),[Sr,Ir]=(0,r.useState)(a),[Dr,Ba]=(0,r.useState)(Dn.filters),uo=Ms(c,un),[Ea,mo]=(0,r.useState)(Dn.search);(0,r.useEffect)(()=>{if(xe){const Gr=Bs({search:Ea,filtersOpen:Vn,filters:Dr},yi);xe(Gr)}},[Ea,Vn,Dr,xe]);const po={headerStyle:{textTransform:"uppercase"}},Oo=(0,r.useCallback)(Gr=>{var $a;return($a=c.find(ro=>ro.title===Gr))==null?void 0:$a.field},[c]);(0,r.useEffect)(()=>{if(typeof a=="function")return;if(!Dr){Ir(a);return}const Gr=Object.values(Dr);if(a&&Gr.flat().length){const $a=a.filter(ro=>!!Object.entries(Dr).filter(([,va])=>!!va.length).every(([va,_r])=>{const aa=Ei(ro,Oo(va));return Array.isArray(aa)&&Array.isArray(_r)?aa.some(ho=>_r.includes(ho)):Array.isArray(aa)?aa.includes(_r):Array.isArray(_r)?_r.includes(aa):aa===_r}));Ir($a)}else Ir(a);qn(Gr.flat().length)},[a,Dr,Oo]);const Er=(Gr,$a)=>{const ro=_r=>{const aa=new Set,ho=ao=>{ao!=null&&aa.add(ao)};return $a&&$a.forEach(ao=>{const go=Ei(ao,Oo(_r));Array.isArray(go)?go.forEach(ho):ho(go)}),aa},va=_r=>({placeholder:"All results",label:_r.column,multiple:_r.type==="multiple-select",items:[...ro(_r.column)].sort().map(aa=>({label:aa,value:aa}))});return Gr.map(_r=>({type:_r.type,element:va(_r)}))},no=!!(J!=null&&J.length),ti=(0,r.useCallback)(Gr=>r.createElement($s,{setSearch:mo,hasFilters:no,selectedFiltersLength:Qr,toggleFilters:$r,...Gr}),[$r,no,Qr,mo]),Ya=typeof a!="function"&&a.length===0,To=c.length,ni=(0,r.useCallback)(Gr=>ft?r.createElement("tbody",{"data-testid":"loading-indicator"},r.createElement("tr",null,r.createElement("td",{colSpan:To},r.createElement(Ke.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"}},r.createElement(Ye.Z,{size:"5rem"}))))):Me&&Ya?r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{colSpan:To},Me))):r.createElement(Wn.os,{...Gr}),[Ya,Me,To,ft]);return r.createElement(Ke.Z,{className:kt.root},Vn&&a&&typeof a!="function"&&(J==null?void 0:J.length)&&r.createElement(Is,{filters:Er(J,a),selectedFilters:Dr,onChangeFilters:Ba}),r.createElement(Wn.ZP,{components:{Header:Ds,Toolbar:ti,Body:ni,...gt},options:{...po,...f},columns:uo,icons:fi,title:r.createElement(r.Fragment,null,r.createElement(V.Z,{variant:"h5",component:"h2"},P),$&&r.createElement(V.Z,{color:"textSecondary",variant:"body1"},$)),data:typeof a=="function"?a:Sr,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"}},...Yt}))}bi.icons=Object.freeze(fi);function Us(t,a){const c=t[t.length-1];if(c)return c>=.9?a.palette.status.ok:c>=.5?a.palette.status.warning:a.palette.status.error}function bc(t){var a;const c=useTheme();return t.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...t},t.title&&React.createElement("title",null,t.title),React.createElement(SparklinesLine,{color:(a=t.color)!=null?a:Us(t.data,c)})):null}const Zs=t=>(0,ie.Z)(a=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:a.spacing(2),textAlign:t.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:a.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),ks=({title:t="Unknown page",className:a})=>r.createElement(V.Z,{variant:"h4",component:"h2",className:a,"data-testid":"header-title"},t);function Ci(t){const{description:a,title:c,titleComponent:f=void 0,children:P,textAlign:$="left"}=t,J=Zs({textAlign:$})(),ge=f||r.createElement(ks,{title:c,className:J.title});return r.createElement(r.Fragment,null,r.createElement(Gt.q,{title:c}),r.createElement(Ke.Z,{className:J.container},r.createElement(Ke.Z,{className:J.leftItemsBox},ge,a&&r.createElement(V.Z,{className:J.description,variant:"body2"},a)),r.createElement(Ke.Z,{className:J.rightItemsBox},P)))}const Ns=(0,ie.Z)(t=>({micDrop:{maxWidth:"60%",bottom:t.spacing(2),right:t.spacing(2),[t.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:t.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),Fs=()=>{const t=Ns();return r.createElement("img",{src:C,className:t.micDrop,alt:"Girl dropping mic from her hands"})},Ws=(0,ie.Z)(t=>({container:{padding:t.spacing(8),[t.breakpoints.down("xs")]:{padding:t.spacing(2)}},title:{paddingBottom:t.spacing(5),[t.breakpoints.down("xs")]:{paddingBottom:t.spacing(4),fontSize:t.typography.h3.fontSize}},subtitle:{color:t.palette.textSubtle}}),{name:"BackstageErrorPage"});function Ks(t){const{status:a,statusMessage:c,additionalInfo:f,supportUrl:P}=t,$=Ws(),J=(0,se.s0)(),ge=mi();return r.createElement(Q.Z,{container:!0,spacing:0,className:$.container},r.createElement(Q.Z,{item:!0,xs:12,sm:8,md:4},r.createElement(V.Z,{"data-testid":"error",variant:"body1",className:$.subtitle},"ERROR ",a,": ",c),r.createElement(V.Z,{variant:"body1",className:$.subtitle},f),r.createElement(V.Z,{variant:"h2",className:$.title},"Looks like someone dropped the mic!"),r.createElement(V.Z,{variant:"h6"},r.createElement(yr,{to:"#","data-testid":"go-back-link",onClick:()=>J(-1)},"Go back"),"... or please"," ",r.createElement(yr,{to:P||ge.url},"contact support")," if you think this is a bug.")),r.createElement(Fs,null))}const zs=(0,u.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(V.Z),Go=(0,u.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(Ke.Z);function Pi(t){const{children:a,...c}=t,[f,P]=r.useState(null),$=r.Children.toArray(a),[J,ge,...Me]=$,xe=Me.length?Me.pop():$[$.length-1],gt=$.length>3,ft=un=>{P(un.currentTarget)},Yt=()=>{P(null)},kt=Boolean(f);return r.createElement(r.Fragment,null,r.createElement(_.Z,{"aria-label":"breadcrumb",...c},$.length>1&&r.createElement(Go,{clone:!0},J),$.length>2&&r.createElement(Go,{clone:!0},ge),gt&&r.createElement(zs,{onClick:ft},"..."),r.createElement(Ke.Z,{style:{fontStyle:"italic"}},xe)),r.createElement(ce.ZP,{open:kt,anchorEl:f,onClose:Yt,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},r.createElement(he.Z,null,Me.map((un,Dn)=>r.createElement(Fe.Z,{key:Dn,button:!0},r.createElement(Go,{clone:!0},un))))))}const Bo=72,Si=24,_i=18,Ma={drawerWidthClosed:Bo,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:Bo,iconSize:Bo-Si*2,iconPadding:Si,selectedIndicatorWidth:3,userBadgePadding:_i,userBadgeDiameter:Bo-_i*2,mobileSidebarHeight:56},Gs=t=>({...Ma,...t,iconContainerWidth:Ma.drawerWidthClosed,iconSize:Ma.drawerWidthClosed-Ma.iconPadding*2,userBadgeDiameter:Ma.drawerWidthClosed-Ma.userBadgePadding*2}),Ri={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:Ma.defaultOpenDelayMs+200},js=t=>({...Ri,...t}),Vs="@backstage/core/sidebar-intro-dismissed",ca=(0,r.createContext)({sidebarConfig:Ma,submenuConfig:Ri}),jo=(0,r.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),Ai={isOpen:!1,setOpen:()=>{}},wi=(0,r.createContext)(Ai),Oi=(0,ye.CT)("sidebar-open-state-context");function Ti(t){const{children:a,value:c}=t;return r.createElement(wi.Provider,{value:c},r.createElement(Oi.Provider,{value:(0,ye.EI)({1:c})},a))}const wo=()=>{const t=(0,r.useContext)(Oi),a=(0,r.useContext)(wi);if(t===void 0)return a||Ai;const c=t.atVersion(1);if(c===void 0)throw new Error("No context found for version 1.");return c},Ii=(0,r.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),Di={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},xi=(0,r.createContext)(Di),Li=(0,ye.CT)("sidebar-pin-state-context");function Hs(t){const{children:a,value:c}=t;return r.createElement(xi.Provider,{value:c},r.createElement(Li.Provider,{value:(0,ye.EI)({1:c})},a))}const $o=()=>{const t=(0,r.useContext)(Li),a=(0,r.useContext)(xi);if(t===void 0)return a||Di;const c=t.atVersion(1);if(c===void 0)throw new Error("No context found for version 1.");return c},Ys=(0,ie.Z)(t=>({root:{flexGrow:0,margin:t.spacing(0,2),color:t.palette.navigation.color},selected:a=>({color:`${t.palette.navigation.selectedColor}!important`,borderTop:`solid ${a.sidebarConfig.selectedIndicatorWidth}px ${t.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),Js=t=>{const{to:a,label:c,icon:f,value:P}=t,{sidebarConfig:$}=(0,r.useContext)(ca),J=Ys({sidebarConfig:$}),ge=(0,se.TH)(),{selectedMenuItemIndex:Me,setSelectedMenuItemIndex:xe}=(0,r.useContext)(Ii),gt=(Yt,kt)=>{xe(kt===Me?-1:kt)},ft=P===Me&&Me>=0||P!==Me&&!(Me>=0)&&a===ge.pathname;return r.createElement(le.Z,{"aria-label":c,label:c,icon:f,component:yr,to:a||ge.pathname,onChange:gt,value:P,selected:ft,classes:J})},Vo=t=>{const{children:a,to:c,label:f,icon:P,value:$}=t,{isMobile:J}=$o();return J?r.createElement(Js,{to:c,label:f,icon:P,value:$}):r.createElement(r.Fragment,null,a)},Mi=(0,ie.Z)(t=>({root:{position:"fixed",backgroundColor:t.palette.navigation.background,color:t.palette.navigation.color,bottom:0,left:0,right:0,zIndex:t.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:a=>({background:t.palette.navigation.background,width:"100%",bottom:`${a.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${a.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:t.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:t.spacing(2,3)},overlayHeaderClose:{color:t.palette.navigation.color},marginMobileSidebar:a=>({marginBottom:`${a.sidebarConfig.mobileSidebarHeight}px`})})),Xs=t=>(0,Qe.orderBy)(t,({props:{priority:a}})=>Number.isInteger(a)?a:-1,"desc"),Qs=r.createElement(Vo).type,el=({children:t,label:a="Menu",open:c,onClose:f})=>{const{sidebarConfig:P}=(0,r.useContext)(ca),$=Mi({sidebarConfig:P});return r.createElement(T.ZP,{anchor:"bottom",open:c,onClose:f,ModalProps:{BackdropProps:{classes:{root:$.marginMobileSidebar}}},classes:{root:$.marginMobileSidebar,paperAnchorBottom:$.overlay}},r.createElement(Ke.Z,{className:$.overlayHeader},r.createElement(V.Z,{variant:"h3"},a),r.createElement(m.Z,{onClick:f,classes:{root:$.overlayHeaderClose}},r.createElement(D.Z,null))),r.createElement(Ke.Z,{component:"nav"},t))},tl=t=>{const{sidebarConfig:a}=(0,r.useContext)(ca),{children:c}=t,f=Mi({sidebarConfig:a}),P=(0,se.TH)(),[$,J]=(0,r.useState)(-1);(0,r.useEffect)(()=>{J(-1)},[P.pathname]);let ge=(0,p.vJ)(c,xe=>xe.getElements().filter(gt=>gt.type===Qs));if(c)ge.length?ge=Xs(ge):ge.push(r.createElement(Vo,{key:"default_menu",icon:r.createElement(me.Z,null)},c));else return null;const Me=$>=0&&!ge[$].props.to;return r.createElement(Ti,{value:{isOpen:!0,setOpen:()=>{}}},r.createElement(Ii.Provider,{value:{selectedMenuItemIndex:$,setSelectedMenuItemIndex:J}},r.createElement(el,{label:ge[$]&&ge[$].props.label,open:Me,onClose:()=>J(-1)},ge[$]&&ge[$].props.children),r.createElement(O.Z,{className:f.root,"data-testid":"mobile-sidebar-root",component:"nav"},ge)))},Bi={getSidebarPinState(){let t;try{t=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!t},setSidebarPinState(t){return window.localStorage.setItem("sidebarPinState",JSON.stringify(t))}},nl=(0,ie.Z)(t=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[t.breakpoints.up("sm")]:{paddingLeft:a=>a.isPinned?a.sidebarConfig.drawerWidthOpen:a.sidebarConfig.drawerWidthClosed},[t.breakpoints.down("xs")]:{paddingBottom:a=>a.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),$i=(0,r.createContext)({content:{contentRef:void 0}});function rl(t){const[a,c]=(0,r.useState)(()=>Bi.getSidebarPinState()),{sidebarConfig:f}=(0,r.useContext)(ca),P=(0,r.useRef)(null),$=(0,r.useMemo)(()=>({content:{contentRef:P}}),[P]);(0,r.useEffect)(()=>{Bi.setSidebarPinState(a)},[a]);const J=(0,Dt.Z)(xe=>xe.breakpoints.down("xs"),{noSsr:!0}),ge=()=>c(!a),Me=nl({isPinned:a,sidebarConfig:f});return r.createElement(Hs,{value:{isPinned:a,toggleSidebarPinState:ge,isMobile:J}},r.createElement($i.Provider,{value:$},r.createElement(Ke.Z,{className:Me.root},t.children)))}function Ho(){const{content:t}=(0,r.useContext)($i);return{focusContent:(0,r.useCallback)(()=>{var c,f;(f=(c=t==null?void 0:t.contentRef)==null?void 0:c.current)==null||f.focus()},[t]),contentRef:t==null?void 0:t.contentRef}}const Ui=(0,ie.Z)(t=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:t.zIndex.appBar,background:t.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:a=>({width:a.sidebarConfig.drawerWidthClosed}),drawerOpen:a=>({width:a.sidebarConfig.drawerWidthOpen,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),al=t=>{const{sidebarConfig:a}=(0,r.useContext)(ca),{openDelayMs:c=a.defaultOpenDelayMs,closeDelayMs:f=a.defaultCloseDelayMs,disableExpandOnHover:P,children:$}=t,J=Ui({sidebarConfig:a}),ge=(0,Dt.Z)(mr=>mr.breakpoints.down("md"),{noSsr:!0}),[Me,xe]=(0,r.useState)(0),gt=(0,r.useRef)(),{isPinned:ft,toggleSidebarPinState:Yt}=$o(),kt=()=>{ft||P||(gt.current&&(clearTimeout(gt.current),gt.current=void 0),Me!==2&&!ge&&(gt.current=window.setTimeout(()=>{gt.current=void 0,xe(2)},c),xe(1)))},un=()=>{ft||P||(gt.current&&(clearTimeout(gt.current),gt.current=void 0),Me===1?xe(0):Me===2&&(gt.current=window.setTimeout(()=>{gt.current=void 0,xe(0)},f)))},Dn=Me===2&&!ge||ft,Vn=mr=>{mr?(xe(2),Yt()):(xe(0),Yt())};return r.createElement("nav",{style:{},"aria-label":"sidebar nav"},r.createElement(il,null),r.createElement(Ti,{value:{isOpen:Dn,setOpen:Vn}},r.createElement(Ke.Z,{className:J.root,"data-testid":"sidebar-root",onMouseEnter:P?()=>{}:kt,onFocus:P?()=>{}:kt,onMouseLeave:P?()=>{}:un,onBlur:P?()=>{}:un},r.createElement(Ke.Z,{className:Oe()(J.drawer,J.drawerWidth,{[J.drawerOpen]:Dn})},$))))},ol=t=>{var a,c;const f=Gs((a=t.sidebarOptions)!=null?a:{}),P=js((c=t.submenuOptions)!=null?c:{}),{children:$,disableExpandOnHover:J,openDelayMs:ge,closeDelayMs:Me}=t,{isMobile:xe}=$o();return xe?r.createElement(tl,null,$):r.createElement(ca.Provider,{value:{sidebarConfig:f,submenuConfig:P}},r.createElement(al,{openDelayMs:ge,closeDelayMs:Me,disableExpandOnHover:J},$))};function il(){const{sidebarConfig:t}=(0,r.useContext)(ca),{focusContent:a,contentRef:c}=Ho(),f=Ui({sidebarConfig:t});return c!=null&&c.current?r.createElement(be.Z,{onClick:a,variant:"contained",className:Oe()(f.visuallyHidden)},"Skip to content"):null}function Uo(t,a,c=!1){const f=new URLSearchParams(a.search).toString(),P=Ze().parse(f),$=new URLSearchParams(t.search).toString(),J=Ze().parse($),ge=c?Qe.isEqual:Qe.isMatch;return(0,Qe.isEqual)(a.pathname,t.pathname)&&ge(J,P)}const sl=(0,ie.Z)(t=>{var a,c;return{item:{height:48,width:"100%","&:hover":{background:((a=t.palette.navigation.navItem)==null?void 0:a.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:t.palette.navigation.color,padding:t.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:t.palette.common.white},label:{margin:t.spacing(1.75),marginLeft:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((c=t.palette.navigation.navItem)==null?void 0:c.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor}},textContent:{color:t.palette.navigation.color,paddingLeft:t.spacing(4),paddingRight:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),ll=t=>{const{title:a,subtitle:c,to:f,icon:P,dropdownItems:$,exact:J}=t,ge=sl(),{setIsHoveredOn:Me}=(0,r.useContext)(jo),xe=()=>{Me(!1)},gt=(0,se.WU)(f!=null?f:""),ft=(0,se.TH)();let Yt=Uo(ft,gt,J);const[kt,un]=(0,r.useState)(!1),Dn=()=>{un(!kt)};return $!==void 0?($.some(Vn=>{const mr=(0,_e.i3)(Vn.to);return Yt=Uo(ft,mr,J),Yt}),r.createElement(Ke.Z,{className:ge.itemContainer},r.createElement(fe.ZP,{title:a,enterDelay:500,enterNextDelay:500},r.createElement(be.Z,{role:"button",onClick:Dn,onTouchStart:Vn=>Vn.stopPropagation(),className:Oe()(ge.item,Yt?ge.selected:void 0)},P&&r.createElement(P,{fontSize:"small"}),r.createElement(V.Z,{variant:"subtitle1",component:"span",className:ge.label},a,r.createElement("br",null),c&&r.createElement(V.Z,{variant:"caption",component:"span",className:ge.subtitle},c)),kt?r.createElement(ke.Z,{className:ge.dropdownArrow}):r.createElement(Pe.Z,{className:ge.dropdownArrow}))),$&&kt&&r.createElement(Ke.Z,{className:ge.dropdown},$.map((Vn,mr)=>r.createElement(fe.ZP,{key:mr,title:Vn.title,enterDelay:500,enterNextDelay:500},r.createElement(yr,{to:Vn.to,underline:"none",className:ge.dropdownItem,onClick:xe,onTouchStart:$r=>$r.stopPropagation()},r.createElement(V.Z,{component:"span",className:ge.textContent},Vn.title))))))):r.createElement(Ke.Z,{className:ge.itemContainer},r.createElement(fe.ZP,{title:a,enterDelay:500,enterNextDelay:500},r.createElement(yr,{to:f,underline:"none",className:Oe()(ge.item,Yt?ge.selected:void 0),onClick:xe,onTouchStart:Vn=>Vn.stopPropagation()},P&&r.createElement(P,{fontSize:"small"}),r.createElement(V.Z,{variant:"subtitle1",component:"span",className:ge.label},a,r.createElement("br",null),c&&r.createElement(V.Z,{variant:"caption",component:"span",className:ge.subtitle},c)))))},cl=(0,ie.Z)(t=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:t.spacing(7)+1},drawer:a=>{var c,f;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[t.breakpoints.up("sm")]:{marginLeft:a.left,transition:t.transitions.create("margin-left",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(f=(c=t.palette.navigation.submenu)==null?void 0:c.background)!=null?f:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:a.submenuConfig.drawerWidthClosed,transitionDelay:`${a.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:a=>({width:a.submenuConfig.drawerWidthOpen,[t.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:t.spacing(3),left:0,top:0}}),title:{fontSize:t.typography.h5.fontSize,fontWeight:t.typography.fontWeightMedium,color:t.palette.common.white,padding:t.spacing(2.5),[t.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),Zi=t=>{const{isOpen:a}=wo(),{sidebarConfig:c,submenuConfig:f}=(0,r.useContext)(ca),P=a?c.drawerWidthOpen:c.drawerWidthClosed,$=cl({left:P,submenuConfig:f}),{isHoveredOn:J}=(0,r.useContext)(jo),[ge,Me]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{Me(J)},[J]),r.createElement(Ke.Z,{className:Oe()($.drawer,{[$.drawerOpen]:ge})},r.createElement(V.Z,{variant:"h5",component:"span",className:$.title},t.title),t.children)},ul=(0,ie.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),dl=()=>{const t=ul();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},ml=(0,ie.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),pl=()=>{const t=ml();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},hl=t=>(0,ie.Z)(a=>{var c,f,P,$;return{root:{color:a.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:t.drawerWidthClosed,justifyContent:"center"},open:{[a.breakpoints.up("sm")]:{width:t.drawerWidthOpen}},highlightable:{"&:hover":{background:(f=(c=a.palette.navigation.navItem)==null?void 0:c.hoverBackground)!=null?f:"#404040"}},highlighted:{background:($=(P=a.palette.navigation.navItem)==null?void 0:P.hoverBackground)!=null?$:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:t.iconContainerWidth,marginRight:-a.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:a.typography.fontWeightBold,fontSize:a.typography.fontSize},searchFieldHTMLInput:{padding:a.spacing(2,0,2)},searchContainer:{width:t.drawerWidthOpen-t.iconContainerWidth},secondaryAction:{width:a.spacing(6),textAlign:"center",marginRight:a.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:a.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${t.selectedIndicatorWidth}px ${a.palette.navigation.indicator}`,color:a.palette.navigation.selectedColor},"&$closed":{width:t.drawerWidthClosed},"& $closedItemIcon":{paddingRight:t.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-t.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function Zo(t){return(0,r.useMemo)(()=>hl(t),[t])()}const gl=(t,a)=>(0,p.vJ)(t.props.children,c=>{let f=!1;return c.getElements().forEach(({props:{to:P,dropdownItems:$}})=>{if(!f){if($!=null&&$.length){$.forEach(({to:J})=>f=f||Uo(a,(0,_e.i3)(J)));return}P&&(f=Uo(a,(0,_e.i3)(P)))}}),f},[a.pathname]);function Yo(t){return t.to===void 0}const fl=r.createElement(Zi).type,El=r.forwardRef(function({to:a,end:c,style:f,className:P,activeStyle:$,caseSensitive:J,activeClassName:ge="active","aria-current":Me="page",...xe},gt){let{pathname:ft}=(0,se.TH)(),{pathname:Yt}=(0,se.WU)(a);J||(ft=ft.toLocaleLowerCase("en-US"),Yt=Yt.toLocaleLowerCase("en-US"));let kt=ft===Yt;!kt&&!c&&(kt=ft.startsWith(`${Yt}/`));const un=kt?Me:void 0;return r.createElement(Le.rU,{...xe,to:a,ref:gt,"aria-current":un,style:{...f,...kt?$:void 0},className:Oe()([typeof P!="function"?P:void 0,kt?ge:void 0])})}),ki=(0,r.forwardRef)((t,a)=>{const{icon:c,text:f,hasNotifications:P=!1,hasSubmenu:$=!1,disableHighlight:J=!1,onClick:ge,noTrack:Me,children:xe,className:gt,...ft}=t,{sidebarConfig:Yt}=(0,r.useContext)(ca),kt=Zo(Yt),{isOpen:un}=wo(),Dn=!un&&$?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},Vn=r.createElement(Ke.Z,{style:Dn},r.createElement(c,{fontSize:"small"}),!un&&$?r.createElement(rn.Z,{fontSize:"small"}):r.createElement(r.Fragment,null)),mr=r.createElement(We.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!P,className:Oe()({[kt.closedItemIcon]:!un})},Vn),$r=r.createElement(r.Fragment,null,r.createElement(Ke.Z,{"data-testid":"login-button",className:kt.iconContainer},mr),f&&r.createElement(V.Z,{variant:"subtitle2",component:"span",className:kt.label},f),r.createElement("div",{className:kt.secondaryAction},xe)),Qr=un?$r:mr,qn={onClick:ge,className:Oe()(gt,kt.root,un?kt.open:kt.closed,Yo(t)&&kt.buttonItem,{[kt.highlightable]:!J})},Sr=(0,p.z$)(),{pathname:Ir}=(0,se.WU)(!Yo(t)&&t.to?t.to:""),Dr=(0,r.useCallback)(Ba=>{if(!Me){const uo="click",Ea=f!=null?f:"Sidebar Item",mo=Ir?{attributes:{to:Ir}}:void 0;Sr.captureEvent(uo,Ea,mo)}ge==null||ge(Ba)},[Sr,f,Ir,Me,ge]);return Yo(t)?r.createElement(be.Z,{role:"button","aria-label":f,...qn,ref:a,onClick:Dr},Qr):r.createElement(El,{...qn,activeClassName:kt.selected,to:t.to?t.to:"",ref:a,"aria-label":f||t.to,...ft,onClick:Dr},Qr)}),vl=({children:t,...a})=>{const{sidebarConfig:c}=(0,r.useContext)(ca),f=Zo(c),[P,$]=(0,r.useState)(!1),J=(0,se.TH)(),ge=gl(t,J),Me=(0,Dt.Z)(Yt=>Yt.breakpoints.down("sm")),xe=()=>{$(!0)},gt=()=>{$(!1)},ft=()=>Me?P?r.createElement(ke.Z,{fontSize:"small",className:f.submenuArrow}):r.createElement(Pe.Z,{fontSize:"small",className:f.submenuArrow}):!P&&r.createElement(rn.Z,{fontSize:"small",className:f.submenuArrow});return r.createElement(jo.Provider,{value:{isHoveredOn:P,setIsHoveredOn:$}},r.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:gt,onTouchStart:P?gt:xe,onMouseEnter:xe,className:Oe()(P&&f.highlighted)},r.createElement(ki,{hasSubmenu:!0,className:ge?f.selected:"",...a},ft()),P&&t))},Ni=(0,r.forwardRef)((t,a)=>{const[c]=(0,p.vJ)(t.children,f=>f.getElements().filter(P=>P.type===fl));return c?r.createElement(vl,{...t},c):r.createElement(ki,{...t,ref:a})});function Cc(t){const{sidebarConfig:a}=useContext(ca),[c,f]=useState(""),P=Zo(a),$=t.icon?t.icon:SearchIcon,J=()=>{t.onSearch(c),f("")},ge=ft=>{ft.key==="Enter"&&(ft.preventDefault(),J())},Me=ft=>{f(ft.target.value)},xe=ft=>{ft.preventDefault(),ft.stopPropagation()},gt=ft=>{J(),ft.preventDefault()};return React.createElement(Box,{className:P.searchRoot},React.createElement(Ni,{icon:$,to:t.to,onClick:gt,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:c,onClick:xe,onChange:Me,onKeyDown:ge,className:P.searchContainer,InputProps:{disableUnderline:!0,className:P.searchField},inputProps:{className:P.searchFieldHTMLInput}})))}const yl=(0,R.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),Pc=(0,R.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),Fi=(0,R.Z)("hr")(({theme:t})=>({height:1,width:"100%",background:"#383838",border:"none",margin:t.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),bl=t=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:t.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:t.palette.text.secondary,borderRadius:"5px"}}),Cl=(0,R.Z)("div")(({theme:t})=>{const a=bl(t);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":a,"&:hover":a}}),Sc=()=>{const{sidebarConfig:t}=useContext(ca),a=Zo(t),{isOpen:c,setOpen:f}=wo();if(useMediaQuery(J=>J.breakpoints.down("md"),{noSsr:!0}))return null;const $=()=>{f(!c)};return React.createElement(Button$1,{role:"button",onClick:$,className:a.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:a.arrows},c?React.createElement(dl,null):React.createElement(pl,null)))},Pl=(0,ie.Z)(t=>({introCard:a=>({color:"#b5b5b5",fontSize:12,width:a.sidebarConfig.drawerWidthOpen,marginTop:t.spacing(2.25),marginBottom:t.spacing(1.5),paddingLeft:a.sidebarConfig.iconPadding,paddingRight:a.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:t.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:t.spacing(.5),"&:hover":{color:t.palette.linkHover,transition:t.transitions.create("color",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:t.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function Sl(t){const{sidebarConfig:a}=useContext(ca),c=Pl({sidebarConfig:a}),{text:f,onClose:P}=t,$=()=>P();return React.createElement(Box,{className:c.introCard},React.createElement(Typography,{variant:"subtitle2"},f),React.createElement(Box,{className:c.introDismiss},React.createElement(IconButton,{onClick:$,className:c.introDismissLink},React.createElement(CloseIcon,{className:c.introDismissIcon}),React.createElement(Typography,{component:"span",className:c.introDismissText},"Dismiss"))))}const Wi=t=>{const{text:a,onDismiss:c}=t,[f,P]=useState(!1),$=()=>{P(!0)};return React.createElement(Collapse,{in:!f,onExited:c},React.createElement(Sl,{text:a,onClose:$}))},_l=null,Rl="And your recently viewed plugins will pop up here!";function _c(t){const{isOpen:a}=wo(),c={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:f,set:P}=useLocalStorageValue(Vs),{starredItemsDismissed:$,recentlyViewedItemsDismissed:J}=f!=null?f:{},ge=()=>{P(xe=>({...c,...xe,starredItemsDismissed:!0}))},Me=()=>{P(xe=>({...c,...xe,recentlyViewedItemsDismissed:!0}))};return a?React.createElement(React.Fragment,null,!$&&React.createElement(React.Fragment,null,React.createElement(Wi,{text:_l,onDismiss:ge}),React.createElement(Fi,null)),!J&&React.createElement(Wi,{text:Rl,onDismiss:Me})):null}const Al=(0,ie.Z)(t=>({header:{gridArea:"pageHeader",padding:t.spacing(3),width:"100%",boxShadow:t.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:t.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[t.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:t.page.fontColor,wordBreak:"break-word",fontSize:t.typography.h3.fontSize,marginBottom:0},subtitle:{color:t.page.fontColor,opacity:.8,display:"inline-block",marginTop:t.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:t.spacing(1),color:t.page.fontColor},breadcrumb:{color:t.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-t.spacing(.3),marginBottom:t.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-t.spacing(.3),marginBottom:t.spacing(.3)}}),{name:"BackstageHeader"}),wl=({type:t,typeLink:a,classes:c,pageTitle:f})=>t?a?r.createElement(Pi,{className:c.breadcrumb},r.createElement(yr,{to:a},t),r.createElement(V.Z,null,f)):r.createElement(V.Z,{className:c.type},t):null,Ol=({pageTitle:t,classes:a,tooltip:c})=>{const{contentRef:f}=Ho(),P=r.createElement(V.Z,{ref:f,tabIndex:-1,className:a.title,variant:"h1"},t);return c?r.createElement(fe.ZP,{title:c,placement:"top-start"},P):P},Tl=({classes:t,subtitle:a})=>a?typeof a!="string"?r.createElement(r.Fragment,null,a):r.createElement(V.Z,{className:t.subtitle,variant:"subtitle2",component:"span"},a):null;function ko(t){const{children:a,pageTitleOverride:c,style:f,subtitle:P,title:$,tooltip:J,type:ge,typeLink:Me}=t,xe=Al(),ft=(0,o.u)(o.p).getOptionalString("app.title")||"Backstage",Yt=c||$,kt=$||c,un=`${Yt} | %s | ${ft}`,Dn=`${Yt} | ${ft}`;return r.createElement(r.Fragment,null,r.createElement(Gt.q,{titleTemplate:un,defaultTitle:Dn}),r.createElement("header",{style:f,className:xe.header},r.createElement(Ke.Z,{className:xe.leftItemsBox},r.createElement(wl,{classes:xe,type:ge,typeLink:Me,pageTitle:kt}),r.createElement(Ol,{classes:xe,pageTitle:kt,tooltip:J}),r.createElement(Tl,{classes:xe,subtitle:P})),r.createElement(Q.Z,{container:!0,className:xe.rightItemsBox,spacing:4},a)))}const Il=({label:t,secondaryLabel:a,icon:c,disabled:f=!1,onClick:P})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:f,button:!0,onClick:$=>{P&&P($)}},c&&React.createElement(ListItemIcon,null,c),React.createElement(ListItemText,{primary:t,secondary:a})));function Rc(t){const{palette:{common:{white:a}}}=useTheme(),{actionItems:c}=t,[f,P]=React.useState(!1),$=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>P(!0),"data-testid":"header-action-menu",ref:$,style:{color:a,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:f,anchorEl:$.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>P(!1)},React.createElement(List,null,c.map((J,ge)=>React.createElement(Il,{key:`header-action-menu-${ge}`,...J})))))}const Dl=(0,ie.Z)(t=>({root:{textAlign:"left"},label:{color:t.page.fontColor,fontWeight:t.typography.fontWeightBold,letterSpacing:0,fontSize:t.typography.fontSize,marginBottom:t.spacing(1)/2,lineHeight:1},value:{color:(0,Ce.Fq)(t.page.fontColor,.8),fontSize:t.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),xl=({value:t,className:a,typographyRootComponent:c})=>r.createElement(V.Z,{component:c!=null?c:typeof t=="string"?"p":"span",className:a},t);function Ll(t){const{label:a,value:c,url:f,contentTypograpyRootComponent:P}=t,$=Dl(),J=r.createElement(xl,{className:$.value,value:c||"<Unknown>",typographyRootComponent:P});return r.createElement(Q.Z,{item:!0},r.createElement(V.Z,{component:"span",className:$.root},r.createElement(V.Z,{className:$.label},a),f?r.createElement(yr,{to:f},J):J))}const Ml=t=>(0,F.Z)({root:{color:t.palette.common.white,padding:t.spacing(2,2,3),backgroundImage:t.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),Bl=(0,ie.Z)(Ml,{name:"BackstageItemCardHeader"});function Ki(t){const{title:a,subtitle:c,children:f}=t,P=Bl(t);return r.createElement(Ke.Z,{className:P.root},c&&r.createElement(V.Z,{variant:"subtitle2",component:"h3"},c),a&&r.createElement(V.Z,{variant:"h6",component:"h4"},a),f)}function Ac(t){const{description:a,tags:c,title:f,type:P,subtitle:$,label:J,onClick:ge,href:Me}=t;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(Ki,{title:f,subtitle:$||P})),React.createElement(CardContent,null,c!=null&&c.length?React.createElement(Box,null,c.map((xe,gt)=>React.createElement(Chip,{size:"small",label:xe,key:gt}))):null,a),React.createElement(CardActions,null,!Me&&React.createElement(rr,{to:"#",onClick:ge,color:"primary"},J),Me&&React.createElement(rr,{to:Me,color:"primary"},J)))}const $l=t=>(0,F.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:t.spacing(2)}}),Ul=(0,ie.Z)($l,{name:"BackstageItemCardGrid"});function Zl(t){const{children:a,...c}=t,f=Ul(c);return r.createElement(Ke.Z,{className:f.root,...c},a)}const kl=(0,ie.Z)(t=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[t.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function No(t){const{themeId:a,children:c}=t,f=kl();return r.createElement(M.Z,{theme:P=>({...P,page:P.getPageTheme({themeId:a})})},r.createElement("main",{className:f.root},c))}function Nl(t){const{themeId:a,children:c,...f}=t;return r.createElement(No,{themeId:a},r.createElement(ko,{...f}),c)}const Fl=en.z.object({providerInfo:en.z.object({}).catchall(en.z.unknown()).optional(),profile:en.z.object({email:en.z.string().optional(),displayName:en.z.string().optional(),picture:en.z.string().optional()}),backstageIdentity:en.z.object({token:en.z.string(),identity:en.z.object({type:en.z.literal("user"),userEntityRef:en.z.string(),ownershipEntityRefs:en.z.array(en.z.string())})})});var Wl=Object.defineProperty,Kl=(t,a,c)=>a in t?Wl(t,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[a]=c,Jo=(t,a,c)=>(Kl(t,typeof a!="symbol"?a+"":a,c),c);const zi={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function zl(t){const a=new Date(Date.now()+zi.defaultTokenExpiryMillis);if(!t)return a;const[c,f,P]=t.split("."),$=JSON.parse(window.atob(f));return typeof $.exp!="number"?a:new Date($.exp*1e3-zi.tokenExpiryMarginMillis)}class Gl{constructor(a){Jo(this,"options"),Jo(this,"abortController"),Jo(this,"state"),this.options=a,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:a}=this.getSessionSync(),c=a.identity.userEntityRef,f=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(c);if(!f)throw new TypeError(`Invalid user entity reference "${c}"`);return f[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const a=this.state.type==="active"?this.state.session:void 0,c=this.fetchSession().then(f=>(this.state={type:"active",session:f,expiresAt:zl(f.backstageIdentity.token)},f),f=>{throw this.state={type:"failed",error:f},f});return this.state={type:"fetching",promise:c,previous:a},c}async fetchSession(){const a=await this.options.discoveryApi.getBaseUrl("auth"),c=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,f=new Headers(c);f.set("X-Requested-With","XMLHttpRequest");const P=await fetch(`${a}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:f,credentials:"include"});if(!P.ok)throw await ResponseError.fromResponse(P);return Fl.parse(await P.json())}}const wc=t=>{const a=useApi(discoveryApiRef),[{status:c,error:f},{execute:P}]=useAsync(async()=>{const $=new Gl({provider:t.provider,discoveryApi:a,headers:t.headers});await $.start(),t.onSignInSuccess($)});return useMountEffect(P),c==="loading"?React.createElement(Lt,null):f?React.createElement(Wr,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:f}):null};class Xo{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const a="user:default/guest";return{type:"user",userEntityRef:a,ownershipEntityRefs:[a]}}async getCredentials(){return{}}async signOut(){}}function jl(t){const[a,c,f]=t.split(".");return JSON.parse(window.atob(c))}class Qo{constructor(a){this.result=a}getUserId(){return this.result.userId}static fromResult(a){return new Qo(a)}async getIdToken(){var a,c;return(c=(a=this.result).getIdToken)==null?void 0:c.call(a)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const a=await this.getIdToken();if(!a){const P=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:P,ownershipEntityRefs:[P]}}const{sub:c,ent:f}=jl(a);return{type:"user",userEntityRef:c,ownershipEntityRefs:f!=null?f:[]}}async getCredentials(){var a,c;return{token:await((c=(a=this.result).getIdToken)==null?void 0:c.call(a))}}async signOut(){var a,c;return(c=(a=this.result).signOut)==null?void 0:c.call(a)}}var Vl=Object.defineProperty,Hl=(t,a,c)=>a in t?Vl(t,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[a]=c,Yl=(t,a,c)=>(Hl(t,typeof a!="symbol"?a+"":a,c),c);class lo{constructor(a,c,f){this.identity=a,this.authApi=c,this.profile=f,Yl(this,"profilePromise")}static createGuest(){return new Xo}static fromLegacy(a){return Qo.fromResult(a)}static create(a){return new lo(a.identity,a.authApi,a.profile)}getUserId(){const a=this.identity.userEntityRef,c=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(a);if(!c)throw new TypeError(`Invalid user entity reference "${a}"`);return c[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(a){throw this.profilePromise=void 0,a}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const qo=(0,ie.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),Fo=({children:t})=>{const a=qo();return r.createElement(Q.Z,{component:"li",item:!0,classes:a},t)},Jl={Component:({config:t,onSignInStarted:a,onSignInSuccess:c,onSignInFailure:f})=>{const{apiRef:P,title:$,message:J}=t,ge=(0,o.u)(P),Me=(0,o.u)(o.s),xe=async()=>{try{a();const gt=await ge.getBackstageIdentity({instantPopup:!0});if(!gt)throw f(),new Error(`The ${$} provider is not configured to support sign-in`);const ft=await ge.getProfile();c(lo.create({identity:gt.identity,profile:ft,authApi:ge}))}catch(gt){f(),Me.post(new Ue.SP("Login failed",gt))}};return r.createElement(Fo,null,r.createElement(Nn,{variant:"fullHeight",title:$,actions:r.createElement(be.Z,{color:"primary",variant:"outlined",onClick:xe},"Sign In")},r.createElement(V.Z,{variant:"body1"},J)))},loader:async(t,a)=>{const c=t.get(a),f=await c.getBackstageIdentity({optional:!0});if(!f)return;const P=await c.getProfile();return lo.create({identity:f.identity,profile:P,authApi:c})}},Xl={Component:({onSignInStarted:t,onSignInSuccess:a})=>r.createElement(Fo,null,r.createElement(Nn,{title:"Guest",variant:"fullHeight",actions:r.createElement(be.Z,{color:"primary",variant:"outlined",onClick:()=>{t(),a(new Xo)}},"Enter")},r.createElement(V.Z,{variant:"body1"},"Enter as a Guest User.",r.createElement("br",null),"You will not have a verified identity,",r.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new Xo},Ql=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,ql=(0,ie.Z)(t=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:t.spacing(2)}}),{name:"BackstageCustomProvider"}),Gi=t=>{const{ref:a,...c}=t;return{inputRef:a,...c}},ec={Component:({onSignInStarted:t,onSignInSuccess:a})=>{const c=ql(),{register:f,handleSubmit:P,formState:$}=(0,Ut.cI)({mode:"onChange"}),{errors:J}=$,ge=({userId:Me,idToken:xe})=>{t(),a(lo.fromLegacy({userId:Me,getIdToken:xe!==void 0?async()=>xe:void 0,profile:{email:`${Me}@example.com`}}))};return r.createElement(Fo,null,r.createElement(Nn,{title:"Custom User",variant:"fullHeight"},r.createElement(V.Z,{variant:"body1"},"Enter your own User ID and credentials.",r.createElement("br",null),"This selection will not be stored."),r.createElement("form",{className:c.form,onSubmit:P(ge)},r.createElement(ee.Z,null,r.createElement(ht.Z,{...Gi(f("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(J.userId)}),J.userId&&r.createElement(gn.Z,{error:!0},J.userId.message)),r.createElement(ee.Z,null,r.createElement(ht.Z,{...Gi(f("idToken",{required:!1,validate:Me=>!Me||Ql.test(Me)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(J.idToken)}),J.idToken&&r.createElement(gn.Z,{error:!0},J.idToken.message)),r.createElement(be.Z,{type:"submit",color:"primary",variant:"outlined",className:c.button,disabled:!($!=null&&$.isDirty)||!hn()(J)},"Continue"))))},loader:async()=>{}};class ei{constructor(a){this.config=a}static from(a){return new ei(a)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const co="@backstage/core:SignInPage:provider",ji={guest:Xl,custom:ec,common:Jl};function Vi(t,a){if(t in a)throw new Error(`"${t}" ID is duplicated. IDs of identity providers have to be unique.`)}function tc(t){return t.reduce((c,f)=>{if(typeof f=="string")return Vi(f,c),c[f]={components:ji[f],id:f},c;const{id:P}=f;return Vi(P,c),c[P]={components:ji.common,id:P,config:f},c},{})}const nc=(t,a)=>{const c=useApi(errorApiRef),f=useApiHolder(),[P,$]=useState(!0),J=useCallback(Me=>{a(ei.from({identityApi:Me,signOut:async()=>{var xe;localStorage.removeItem(co),await((xe=Me.signOut)==null?void 0:xe.call(Me))}}))},[a]);useLayoutEffect(()=>{var Me;if(!P)return;const xe=localStorage.getItem(co);if(xe===null){$(!1);return}const gt=t[xe];if(!gt){$(!1);return}let ft=!1;return gt.components.loader(f,(Me=gt.config)==null?void 0:Me.apiRef).then(Yt=>{if(ft){localStorage.removeItem(co);return}Yt?J(Yt):$(!1)}).catch(Yt=>{localStorage.removeItem(co),!ft&&(c.post(Yt),$(!1))}),()=>{ft=!0}},[P,c,a,f,t,J]);const ge=useMemo(()=>Object.keys(t).map(Me=>{const xe=t[Me],{Component:gt}=xe.components,ft=un=>{J(un)},Yt=()=>{var un;localStorage.setItem(co,((un=xe==null?void 0:xe.config)==null?void 0:un.id)||xe.id)},kt=()=>{localStorage.removeItem(co)};return React.createElement(gt,{key:xe.id,config:xe.config,onSignInStarted:Yt,onSignInSuccess:ft,onSignInFailure:kt})}),[t,J]);return[P,ge]},rc=({onSignInSuccess:t,providers:a=[],title:c,align:f="left"})=>{const P=useApi(configApiRef),$=qo(),J=tc(a),[ge,Me]=nc(J,t);return ge?React.createElement(Lt,null):React.createElement(No,{themeId:"home"},React.createElement(ko,{title:P.getString("app.title")}),React.createElement(Mo,null,c&&React.createElement(Ci,{title:c,textAlign:f}),React.createElement(Grid,{container:!0,justifyContent:f==="center"?f:"flex-start",spacing:2,component:"ul",classes:$},Me)))},ac=({provider:t,auto:a,onSignInSuccess:c})=>{const f=qo(),P=useApi(t.apiRef),$=useApi(configApiRef),[J,ge]=useState(),[Me,xe]=useState(!1),gt=async({checkExisting:ft,showPopup:Yt})=>{try{let kt;if(ft&&(kt=await P.getBackstageIdentity({optional:!0})),!kt&&(Yt||a)&&(xe(!0),kt=await P.getBackstageIdentity({instantPopup:!0}),!kt))throw new Error(`The ${t.title} provider is not configured to support sign-in`);if(!kt){xe(!0);return}const un=await P.getProfile();c(lo.create({identity:kt.identity,authApi:P,profile:un}))}catch(kt){ge(kt),xe(!0)}};return useMountEffect(()=>gt({checkExisting:!0})),Me?React.createElement(No,{themeId:"home"},React.createElement(ko,{title:$.getString("app.title")}),React.createElement(Mo,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:f},React.createElement(Fo,null,React.createElement(Nn,{variant:"fullHeight",title:t.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{gt({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},t.message),J&&J.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},J.message)))))):React.createElement(Lt,null)};function Mc(t){return"provider"in t?React.createElement(ac,{...t}):React.createElement(rc,{...t})}const oc=(0,ie.Z)(t=>({root:{padding:t.spacing(0,2,0,2.5),minHeight:t.spacing(3)},indicator:{backgroundColor:t.palette.info.main,height:t.spacing(.3)}}),{name:"BackstageTabbedCard"}),ic=(0,u.Z)(t=>({root:{padding:t.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:t.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(w.Z);function sc(t){const{slackChannel:a,errorBoundaryProps:c,children:f,title:P,deepLink:$,value:J,onChange:ge}=t,Me=oc(),[xe,gt]=(0,r.useState)(0),ft=ge||((un,Dn)=>gt(Dn));let Yt;J?r.Children.map(f,un=>{r.isValidElement(un)&&(un==null?void 0:un.props.value)===J&&(Yt=un==null?void 0:un.props.children)}):r.Children.map(f,(un,Dn)=>{r.isValidElement(un)&&Dn===xe&&(Yt=un==null?void 0:un.props.children)});const kt=c||(a?{slackChannel:a}:{});return r.createElement(nn.Z,null,r.createElement(yn,{...kt},P&&r.createElement(ic,{title:P}),r.createElement(_n.Z,{selectionFollowsFocus:!0,classes:Me,value:J||xe,onChange:ft},f),r.createElement(Ct.Z,null),r.createElement(De.Z,null,Yt),$&&r.createElement(Tn,{...$})))}const lc=(0,ie.Z)(t=>({root:{minWidth:t.spacing(6),minHeight:t.spacing(3),margin:t.spacing(0,2,0,0),padding:t.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:t.palette.text.primary}},selected:{fontWeight:t.typography.fontWeightBold}}),{name:"BackstageCardTab"});function cc(t){const{children:a,...c}=t,f=lc();return r.createElement(jt.Z,{disableRipple:!0,classes:f,...c})}},83487:($n,Vt,e)=>{"use strict";e.d(Vt,{FB:()=>ne,IB:()=>ie,iH:()=>Ce,op:()=>re});var o=e(2784),p=e(30204);function m(Z){return{$$type:"@backstage/TranslationMessages",id:Z.ref.id,full:Boolean(Z.full),messages:Z.messages}}function Y(Z){return{$$type:"@backstage/TranslationResource",version:"v1",id:Z.ref.id,resources:Object.entries(Z.translations).map(([x,he])=>({language:x,loader:()=>he().then(Fe=>{const mt=Fe.default;return{messages:(mt==null?void 0:mt.$$type)==="@backstage/TranslationMessages"?mt.messages:mt}})}))}}var V=Object.defineProperty,D=(Z,x,he)=>x in Z?V(Z,x,{enumerable:!0,configurable:!0,writable:!0,value:he}):Z[x]=he,W=(Z,x,he)=>(D(Z,typeof x!="symbol"?x+"":x,he),he),tt=(Z,x,he)=>{if(!x.has(Z))throw TypeError("Cannot "+he)},Xe=(Z,x,he)=>(tt(Z,x,"read from private field"),he?he.call(Z):x.get(Z)),r=(Z,x,he)=>{if(x.has(Z))throw TypeError("Cannot add the same private member more than once");x instanceof WeakSet?x.add(Z):x.set(Z,he)},Ve=(Z,x,he,Fe)=>(tt(Z,x,"write to private field"),Fe?Fe.call(Z,he):x.set(Z,he),he),be,X,k;class s{constructor(x){r(this,be,void 0),r(this,X,void 0),r(this,k,void 0),W(this,"$$type","@backstage/TranslationRef"),W(this,"version","v1"),Ve(this,be,x.id),Ve(this,X,x.messages)}get id(){return Xe(this,be)}get T(){throw new Error("Not implemented")}getDefaultMessages(){return Xe(this,X)}setDefaultResource(x){Ve(this,k,x)}getDefaultResource(){return Xe(this,k)}toString(){return`TranslationRef{id=${this.id}}`}}be=new WeakMap,X=new WeakMap,k=new WeakMap;function ne(Z){const x=new s(Z);return Z.translations&&x.setDefaultResource(Y({ref:x,translations:Z.translations})),x}const re=(0,p.c)({id:"core.translation"}),ie=(0,p.c)({id:"core.applanguage"}),ve=new WeakSet,Ce=Z=>{const x=(0,p.u)(p.s),he=(0,p.u)(re),[Fe,mt]=(0,o.useState)(()=>he.getTranslation(Z)),Qt=(0,o.useMemo)(()=>he.translation$(Z),[he,Z]),Ie=(0,o.useCallback)(ct=>{if(!ve.has(Z)){const Ot=`Failed to load translation resource '${Z.id}'; caused by ${ct}`;console.error(Ot),x.post(new Error(Ot)),ve.add(Z)}},[x,Z]);(0,o.useEffect)(()=>{const ct=Qt.subscribe({next(Ot){Ot.ready&&mt(Ot)},error(Ot){Ie(Ot)}});return()=>{ct.unsubscribe()}},[Qt,Ie]);const Be=(0,o.useRef)(!0);if((0,o.useEffect)(()=>{Be.current?Be.current=!1:mt(he.getTranslation(Z))},[he,Z]),!Fe.ready)throw new Promise(ct=>{const Ot=Qt.subscribe({next(bt){bt.ready&&(Ot.unsubscribe(),ct())},error(bt){Ot.unsubscribe(),Ie(bt),ct()}})});return{t:Fe.t}},u="eHgtF5hmbrXyiEvo";function F(Z=Error){const{stack:x}=new Z(u);if(!x)return"<unknown>";const he=x.includes(u)?x.indexOf(`
`)+1:0,Fe=x.indexOf(`
`,x.indexOf(`
`,he)+1)+1,mt=x.indexOf(`
`,Fe),Qt=x.substring(Fe,mt).trim();return Qt?Qt.includes("(")?Qt.substring(Qt.indexOf("(")+1,Qt.indexOf(")")):Qt.includes("@")?Qt.substring(Qt.indexOf("@")+1):Qt:"unknown"}var R=Object.defineProperty,M=(Z,x,he)=>x in Z?R(Z,x,{enumerable:!0,configurable:!0,writable:!0,value:he}):Z[x]=he,g=(Z,x,he)=>(M(Z,typeof x!="symbol"?x+"":x,he),he),Ne=(Z,x,he)=>{if(!x.has(Z))throw TypeError("Cannot "+he)},Oe=(Z,x,he)=>(Ne(Z,x,"read from private field"),he?he.call(Z):x.get(Z)),Qe=(Z,x,he)=>{if(x.has(Z))throw TypeError("Cannot add the same private member more than once");x instanceof WeakSet?x.add(Z):x.set(Z,he)},se=(Z,x,he,Fe)=>(Ne(Z,x,"write to private field"),Fe?Fe.call(Z,he):x.set(Z,he),he),Le,_e,Ke,St,L;function pt(Z){const x=Z;if(x.$$type!=="@backstage/RouteRef")throw new Error(`Invalid RouteRef, bad type '${x.$$type}'`);return x}class fe{constructor(x=[],he){this.params=x,Qe(this,St),g(this,"$$type","@backstage/RouteRef"),g(this,"version","v1"),Qe(this,Le,void 0),Qe(this,_e,void 0),Qe(this,Ke,void 0),se(this,_e,x),se(this,Ke,he)}getParams(){return Oe(this,_e)}getDescription(){return Oe(this,Le)?Oe(this,Le):`created at '${Oe(this,Ke)}'`}setId(x){if(!x)throw new Error(`${Oe(this,St,L)} id must be a non-empty string`);if(Oe(this,Le))throw new Error(`${Oe(this,St,L)} was referenced twice as both '${Oe(this,Le)}' and '${x}'`);se(this,Le,x)}toString(){return`${Oe(this,St,L)}{${this.getDescription()}}`}}Le=new WeakMap,_e=new WeakMap,Ke=new WeakMap,St=new WeakSet,L=function(){return this.$$type.slice(11)};function zt(Z){return new fe(Z==null?void 0:Z.params,F())}var Et=Object.defineProperty,Dt=(Z,x,he)=>x in Z?Et(Z,x,{enumerable:!0,configurable:!0,writable:!0,value:he}):Z[x]=he,Wt=(Z,x,he)=>(Dt(Z,typeof x!="symbol"?x+"":x,he),he),Je=(Z,x,he)=>{if(!x.has(Z))throw TypeError("Cannot "+he)},_t=(Z,x,he)=>(Je(Z,x,"read from private field"),he?he.call(Z):x.get(Z)),Nt=(Z,x,he)=>{if(x.has(Z))throw TypeError("Cannot add the same private member more than once");x instanceof WeakSet?x.add(Z):x.set(Z,he)},Xt=(Z,x,he,Fe)=>(Je(Z,x,"write to private field"),Fe?Fe.call(Z,he):x.set(Z,he),he),Ht,Ft;const yt=/^\w+$/;function Tt(Z){const x=Z;if(x.$$type!=="@backstage/SubRouteRef")throw new Error(`Invalid SubRouteRef, bad type '${x.$$type}'`);return x}class wt{constructor(x,he,Fe){this.path=x,Wt(this,"$$type","@backstage/SubRouteRef"),Wt(this,"version","v1"),Nt(this,Ht,void 0),Nt(this,Ft,void 0),Xt(this,Ht,he),Xt(this,Ft,Fe)}getParams(){return _t(this,Ht)}getParent(){return _t(this,Ft)}getDescription(){const x=pt(_t(this,Ft));return`at ${this.path} with parent ${x.getDescription()}`}toString(){return`SubRouteRef{${this.getDescription()}}`}}Ht=new WeakMap,Ft=new WeakMap;function Jt(Z){const{path:x,parent:he}=Z,mt=pt(he).getParams(),Qt=x.split("/").filter(ct=>ct.startsWith(":")).map(ct=>ct.substring(1)),Ie=[...mt,...Qt];if(mt.some(ct=>Qt.includes(ct)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!x.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${x}'`);if(x.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${x}'`);for(const ct of Qt)if(!yt.test(ct))throw new Error(`SubRouteRef path has invalid param, got '${ct}'`);return new wt(x,Ie,he)}var Ae=Object.defineProperty,j=(Z,x,he)=>x in Z?Ae(Z,x,{enumerable:!0,configurable:!0,writable:!0,value:he}):Z[x]=he,E=(Z,x,he)=>(j(Z,typeof x!="symbol"?x+"":x,he),he);function N(Z){const x=Z;if(x.$$type!=="@backstage/ExternalRouteRef")throw new Error(`Invalid ExternalRouteRef, bad type '${x.$$type}'`);return x}class Q extends null{constructor(x,he=[],Fe){super(he,Fe),this.optional=x,this.params=he,E(this,"$$type","@backstage/ExternalRouteRef")}}function q(Z){return new Q(Boolean(Z==null?void 0:Z.optional),Z==null?void 0:Z.params,F())}function Ge(Z){if("$$type"in Z)return Z;const x=Z[routeRefType];if(x==="absolute"){const he=Z,Fe=pt(zt({params:he.params}));return Object.assign(he,{$$type:"@backstage/RouteRef",version:"v1",T:Fe.T,getParams(){return Fe.getParams()},getDescription(){return Fe.getDescription()},setId(mt){Fe.setId(mt)},toString(){return Fe.toString()}})}if(x==="sub"){const he=Z,Fe=Tt(Jt({path:he.path,parent:Ge(he.parent)}));return Object.assign(he,{$$type:"@backstage/SubRouteRef",version:"v1",T:Fe.T,getParams(){return Fe.getParams()},getParent(){return Fe.getParent()},getDescription(){return Fe.getDescription()},toString(){return Fe.toString()}})}if(x==="external"){const he=Z,Fe=N(q({params:he.params,optional:he.optional}));return Object.assign(he,{$$type:"@backstage/ExternalRouteRef",version:"v1",T:Fe.T,optional:Fe.optional,getParams(){return Fe.getParams()},getDescription(){return Fe.getDescription()},setId(mt){Fe.setId(mt)},toString(){return Fe.toString()}})}throw new Error(`Failed to convert legacy route ref, unknown type '${x}'`)}},30204:($n,Vt,e)=>{"use strict";e.d(Vt,{F:()=>M,S:()=>tt,a:()=>ve,b:()=>m,c:()=>W,d:()=>r,e:()=>be,f:()=>g,g:()=>Xe,h:()=>k,i:()=>s,j:()=>ne,k:()=>re,l:()=>ie,m:()=>X,n:()=>Ce,o:()=>Ve,p:()=>u,q:()=>F,r:()=>Le,s:()=>R,t:()=>Ne,u:()=>Y,v:()=>Oe,x:()=>Qe,y:()=>se});var o=e(2784),p=e(18473);function m(){const _e=(0,p.Vt)("api-context");if(!_e)throw new Error("API context is not available");const Ke=_e.atVersion(1);if(!Ke)throw new Error("ApiContext v1 not available");return Ke}function Y(_e){const St=m().get(_e);if(!St)throw new Error(`No implementation available for ${_e}`);return St}function V(_e){return function(St){const L=fe=>{const zt=m(),Et={};for(const Dt in _e)if(_e.hasOwnProperty(Dt)){const Wt=_e[Dt],Je=zt.get(Wt);if(!Je)throw new Error(`No implementation available for ${Wt}`);Et[Dt]=Je}return React.createElement(St,{...fe,...Et})},pt=St.displayName||St.name||"Component";return L.displayName=`withApis(${pt})`,L}}class D{constructor(Ke){if(this.config=Ke,!Ke.id.split(".").flatMap(L=>L.split("-")).every(L=>L.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${Ke.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function W(_e){return new D(_e)}var tt=(_e=>(_e.SignedIn="SignedIn",_e.SignedOut="SignedOut",_e))(tt||{});const Xe=W({id:"core.auth.google"}),r=W({id:"core.auth.github"}),Ve=W({id:"core.auth.okta"}),be=W({id:"core.auth.gitlab"}),X=W({id:"core.auth.microsoft"}),k=W({id:"core.auth.onelogin"}),s=W({id:"core.auth.bitbucket"}),ne=W({id:"core.auth.bitbucket-server"}),re=W({id:"core.auth.atlassian"}),ie=W({id:"core.alert"}),ve=W({id:"core.analytics"}),Ce=W({id:"core.apptheme"}),u=W({id:"core.config"}),F=W({id:"core.discovery"}),R=W({id:"core.error"});var M=(_e=>(_e[_e.None=0]="None",_e[_e.Active=1]="Active",_e))(M||{});const g=W({id:"core.featureflags"}),Ne=W({id:"core.fetch"}),Oe=W({id:"core.identity"}),Qe=W({id:"core.oauthrequest"}),se=W({id:"core.storage"}),Le=(0,p.uW)("route-ref-type",()=>Symbol("route-ref-type"))},30705:($n,Vt,e)=>{"use strict";e.d(Vt,{CO:()=>Ht,IY:()=>ie,NT:()=>M,Oi:()=>Dt,P4:()=>Xt,R5:()=>re,Rz:()=>_e,YO:()=>Ft,fC:()=>W,ni:()=>tt,qD:()=>k,rx:()=>Ae,tg:()=>Et,vJ:()=>wt,x8:()=>zt,z$:()=>X});var o=e(18473),p=e(2784),m=e(30204),Y=e(73557);const V=(0,o.CT)("analytics-context"),D=()=>{const j=(0,p.useContext)(V);if(j===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const E=j.atVersion(1);if(E===void 0)throw new Error("No context found for version 1.");return E},W=j=>{const{attributes:E,children:N}=j,q={...D(),...E},Ge=(0,o.EI)({1:q});return p.createElement(V.Provider,{value:Ge},N)};function tt(j,E){return"id"in j?{api:j,deps:{},factory:()=>E}:j}const Xe=(0,o.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),r="_ROUTABLE-EXTENSION-RENDERED";class Ve{constructor(E,N={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=E,this.context=N,Xe.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{Xe.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...Xe.mostRecentGatheredNavigation,...Xe.mostRecentRoutableExtensionRender}),Xe.mostRecentGatheredNavigation=void 0,Xe.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),Xe.beforeUnloadRegistered=!0)}setContext(E){this.context=E}captureEvent(E,N,{value:Q,attributes:q}={}){const{_routeNodeType:Ge,...Z}=this.context;if(E===r){Xe.mostRecentGatheredNavigation&&(Xe.mostRecentRoutableExtensionRender={context:{...Z,extension:"App"}});return}if(Xe.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...Xe.mostRecentGatheredNavigation,...Xe.mostRecentRoutableExtensionRender})}catch(x){console.warn("Error during analytics event capture. %o",x)}Xe.mostRecentGatheredNavigation=void 0,Xe.mostRecentRoutableExtensionRender=void 0}if(E==="navigate"&&Ge==="gathered"&&Z.pluginId==="root"){Xe.mostRecentGatheredNavigation={action:E,subject:N,value:Q,attributes:q,context:Z};return}try{this.analyticsApi.captureEvent({action:E,subject:N,value:Q,attributes:q,context:Z})}catch(x){console.warn("Error during analytics event capture. %o",x)}}}function be(){try{return(0,m.u)(m.a)}catch{return{captureEvent:()=>{}}}}function X(){const j=(0,p.useRef)(null),E=D(),N=be();function Q(){return j.current===null&&(j.current=new Ve(N)),j.current}const q=Q();return q.setContext(E),q}const k=()=>{const j=(0,o.Vt)("app-context");if(!j)throw new Error("App context is not available");const E=j.atVersion(1);if(!E)throw new Error("AppContext v1 not available");return E},s=(0,o.uW)("component-data-store",()=>new WeakMap),ne="__backstage_data";function re(j,E,N){var Q;const q=j;let Ge=(Q=q[ne])!=null?Q:s.get(j);if(Ge||(Ge={map:new Map},Object.defineProperty(q,ne,{enumerable:!1,configurable:!0,writable:!1,value:Ge}),s.set(j,Ge)),Ge.map.has(E)){const Z=j.displayName||j.name;throw new Error(`Attempted to attach duplicate data "${E}" to component "${Z}"`)}Ge.map.set(E,N)}function ie(j,E){var N;if(!j)return;const Q=j.type;if(!Q)return;const q=(N=Q[ne])!=null?N:s.get(Q);if(q)return q.map.get(E)}var ve=Object.defineProperty,Ce=(j,E,N)=>E in j?ve(j,E,{enumerable:!0,configurable:!0,writable:!0,value:N}):j[E]=N,u=(j,E,N)=>(Ce(j,typeof E!="symbol"?E+"":E,N),N),F;class R{constructor(E,N){this.id=E,this.params=N,u(this,F,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}F=m.r;function M(j){var E;return new R(j.id,(E=j.params)!=null?E:[])}var g=Object.defineProperty,Ne=(j,E,N)=>E in j?g(j,E,{enumerable:!0,configurable:!0,writable:!0,value:N}):j[E]=N,Oe=(j,E,N)=>(Ne(j,typeof E!="symbol"?E+"":E,N),N),Qe;const se=/^\w+$/;class Le{constructor(E,N,Q,q){this.id=E,this.path=N,this.parent=Q,this.params=q,Oe(this,Qe,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}Qe=m.r;function _e(j){const{id:E,path:N,parent:Q}=j,q=N.split("/").filter(x=>x.startsWith(":")).map(x=>x.substring(1)),Ge=[...Q.params,...q];if(Q.params.some(x=>q.includes(x)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!N.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${N}'`);if(N.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${N}'`);for(const x of q)if(!se.test(x))throw new Error(`SubRouteRef path has invalid param, got '${x}'`);return new Le(E,N,Q,Ge)}var Ke=Object.defineProperty,St=(j,E,N)=>E in j?Ke(j,E,{enumerable:!0,configurable:!0,writable:!0,value:N}):j[E]=N,L=(j,E,N)=>(St(j,typeof E!="symbol"?E+"":E,N),N),pt;class fe{constructor(E,N,Q){this.id=E,this.params=N,this.optional=Q,L(this,pt,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}pt=m.r;function zt(j){var E;return new fe(j.id,(E=j.params)!=null?E:[],Boolean(j.optional))}function Et(j){const{pathname:E}=(0,Y.TH)(),N=(0,o.Vt)("routing-context");if(!N)throw new Error("Routing context is not available");const Q=N.atVersion(1),q=(0,p.useMemo)(()=>Q&&Q.resolve(j,{pathname:E}),[Q,j,E]);if(!N)throw new Error("useRouteRef used outside of routing context");if(!Q)throw new Error("RoutingContext v1 not available");const Ge="optional"in j&&j.optional;if(!q&&!Ge)throw new Error(`No path for ${j}`);return q}function Dt(j){return(0,Y.UO)()}var Wt=Object.defineProperty,Je=(j,E,N)=>E in j?Wt(j,E,{enumerable:!0,configurable:!0,writable:!0,value:N}):j[E]=N,_t=(j,E,N)=>(Je(j,typeof E!="symbol"?E+"":E,N),N);class Nt extends p.Component{constructor(){super(...arguments),_t(this,"state",{error:void 0}),_t(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(E){return{error:E}}render(){const{error:E}=this.state,{app:N,plugin:Q}=this.props,{ErrorBoundaryFallback:q}=N.getComponents();return E?p.createElement(q,{error:E,resetError:this.handleErrorReset,plugin:Q}):this.props.children}}function Xt(j){const{component:E,mountPoint:N,name:Q}=j;return Ft({component:{lazy:()=>E().then(q=>{const Ge=x=>{const he=X();try{Et(N)}catch(Fe){if(typeof Fe=="object"&&Fe!==null){const{message:mt}=Fe;if(typeof mt=="string"&&mt.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${N} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw Fe}return(0,p.useEffect)(()=>{he.captureEvent(r,"")},[he]),p.createElement(q,{...x})},Z=Q||q.displayName||q.name||"LazyComponent";return Ge.displayName=`RoutableExtension(${Z})`,Ge},q=>Z=>{const x=k(),{BootErrorPage:he}=x.getComponents();return p.createElement(he,{step:"load-chunk",error:q})})},data:{"core.mountPoint":N},name:Q})}function Ht(j){const{component:E,name:N}=j;return Ft({component:E,name:N})}function Ft(j){const{data:E={},name:N}=j;N||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let Q;if("lazy"in j.component){const Ge=j.component.lazy;Q=(0,p.lazy)(()=>Ge().then(Z=>({default:Z})))}else Q=j.component.sync;const q=N||Q.displayName||Q.name||"Component";return{expose(Ge){const Z=x=>{const he=k(),{Progress:Fe}=he.getComponents(),mt=E==null?void 0:E["core.mountPoint"];return p.createElement(p.Suspense,{fallback:p.createElement(Fe,null)},p.createElement(Nt,{app:he,plugin:Ge},p.createElement(W,{attributes:{pluginId:Ge.getId(),...N&&{extension:N},...mt&&{routeRef:mt.id}}},p.createElement(Q,{...x}))))};re(Z,"core.plugin",Ge),re(Z,"core.extensionName",N);for(const[x,he]of Object.entries(E))re(Z,x,he);return Z.displayName=`Extension(${q})`,Z}}}function yt(j,E,N,Q){return p.Children.toArray(j).flatMap(q=>{if(!(0,p.isValidElement)(q))return[];if(q.type===p.Fragment)return yt(q.props.children,E,N,Q);if(ie(q,"core.featureFlagged")){const Ge=q.props;return("with"in Ge?E.isActive(Ge.with):!E.isActive(Ge.without))?yt(q.props.children,E,N,Q):[]}if(N===void 0||N(q))return[q];if(Q)throw new Error(Q);return yt(q.props.children,E,N,Q)})}class Tt{constructor(E,N){this.node=E,this.featureFlagsApi=N}selectByComponentData(E){const N=yt(this.node,this.featureFlagsApi,Q=>ie(Q,E.key)!==void 0,E.withStrictError);return new Tt(N,this.featureFlagsApi)}findComponentData(E){return yt(this.node,this.featureFlagsApi,Q=>ie(Q,E.key)!==void 0).map(Q=>ie(Q,E.key)).filter(Q=>Q!==void 0)}getElements(){return yt(this.node,this.featureFlagsApi)}}function wt(j,E,N=[]){const Q=(0,m.u)(m.f),q=new Tt(j,Q);return(0,p.useMemo)(()=>E(q),[j,...N])}class Jt{constructor(E){this.config=E}getId(){return this.config.id}getApis(){var E;return(E=this.config.apis)!=null?E:[]}getFeatureFlags(){var E,N;return(N=(E=this.config.featureFlags)==null?void 0:E.slice())!=null?N:[]}get routes(){var E;return(E=this.config.routes)!=null?E:{}}get externalRoutes(){var E;return(E=this.config.externalRoutes)!=null?E:{}}provide(E){return E.expose(this)}toString(){return`plugin{${this.config.id}}`}}function Ae(j){return new Jt(j)}},32272:($n,Vt,e)=>{"use strict";e.d(Vt,{BD:()=>Y,SP:()=>R,VL:()=>Qe,VZ:()=>m,dR:()=>ie});var o=e(24852),p=e.n(o);function m(se){if(typeof se!="object"||se===null||Array.isArray(se))return!1;const Le=se;return!(typeof Le.name!="string"||Le.name===""||typeof Le.message!="string")}function Y(se){if(typeof se!="object"||se===null||Array.isArray(se))throw new Error(`Encountered invalid error, not an object, got '${se}'`);const Le=se;if(typeof Le.name!="string"||Le.name==="")throw new Error(`Encountered error object without a name, got '${se}'`);if(typeof Le.message!="string")throw new Error(`Encountered error object without a message, got '${se}'`)}function V(se,Le){const Ke={name:"Unknown",message:"<no reason given>",...serializeError$1(se)};return Le!=null&&Le.includeStack||delete Ke.stack,Ke}function D(se){const Le=(0,o.deserializeError)(se);return se.stack||(Le.stack=void 0),Le}function W(se){if(m(se)){const Le=String(se);return Le!=="[object Object]"?Le:`${se.name}: ${se.message}`}return`unknown error '${se}'`}var tt=Object.defineProperty,Xe=(se,Le,_e)=>Le in se?tt(se,Le,{enumerable:!0,configurable:!0,writable:!0,value:_e}):se[Le]=_e,r=(se,Le,_e)=>(Xe(se,typeof Le!="symbol"?Le+"":Le,_e),_e);class Ve extends Error{constructor(Le,_e){var Ke;let St=Le;if(_e!==void 0){const L=W(_e);St?St+=`; caused by ${L}`:St=`caused by ${L}`}super(St),r(this,"cause"),(Ke=Error.captureStackTrace)==null||Ke.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=m(_e)?_e:void 0}}var be=Object.defineProperty,X=(se,Le,_e)=>Le in se?be(se,Le,{enumerable:!0,configurable:!0,writable:!0,value:_e}):se[Le]=_e,k=(se,Le,_e)=>(X(se,typeof Le!="symbol"?Le+"":Le,_e),_e);class s extends null{constructor(){super(...arguments),k(this,"name","InputError")}}class ne extends null{constructor(){super(...arguments),k(this,"name","AuthenticationError")}}class re extends null{constructor(){super(...arguments),k(this,"name","NotAllowedError")}}class ie extends Ve{constructor(){super(...arguments),k(this,"name","NotFoundError")}}class ve extends null{constructor(){super(...arguments),k(this,"name","ConflictError")}}class Ce extends null{constructor(){super(...arguments),k(this,"name","NotModifiedError")}}class u extends null{constructor(){super(...arguments),k(this,"name","NotImplementedError")}}class F extends null{}class R extends Ve{constructor(Le,_e){super(Le,_e),this.name=m(_e)?_e.name:"Error"}}async function M(se){var Le;try{const _e=await se.text();if(_e){if((Le=se.headers.get("content-type"))!=null&&Le.startsWith("application/json"))try{const Ke=JSON.parse(_e);if(Ke.error&&Ke.response)return Ke}catch{}return{error:{name:"Error",message:`Request failed with status ${se.status} ${se.statusText}, ${_e}`},response:{statusCode:se.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${se.status} ${se.statusText}`},response:{statusCode:se.status}}}var g=Object.defineProperty,Ne=(se,Le,_e)=>Le in se?g(se,Le,{enumerable:!0,configurable:!0,writable:!0,value:_e}):se[Le]=_e,Oe=(se,Le,_e)=>(Ne(se,typeof Le!="symbol"?Le+"":Le,_e),_e);class Qe extends Error{constructor(Le){super(Le.message),Oe(this,"response"),Oe(this,"body"),Oe(this,"cause"),this.name="ResponseError",this.response=Le.response,this.body=Le.data,this.cause=Le.cause}static async fromResponse(Le){const _e=await M(Le),Ke=_e.response.statusCode||Le.status,St=_e.error.name||Le.statusText,L=`Request failed with ${Ke} ${St}`,pt=D(_e.error);return new Qe({message:L,response:Le,data:_e,cause:pt})}}},49462:($n,Vt,e)=>{"use strict";e.d(Vt,{Om:()=>D,ae:()=>ve,nW:()=>u,q3:()=>Ce,zN:()=>ie});var o=e(30204),p=e(30705),m=e(1854),Y=e(73250),V=e(2784);const D=(0,o.c)({id:"core.scmauth"});var W=(F,R,M)=>{if(!R.has(F))throw TypeError("Cannot "+M)},tt=(F,R,M)=>(W(F,R,"read from private field"),M?M.call(F):R.get(F)),Xe=(F,R,M)=>{if(R.has(F))throw TypeError("Cannot add the same private member more than once");R instanceof WeakSet?R.add(F):R.set(F,M)},r=(F,R,M,g)=>(W(F,R,"write to private field"),g?g.call(F,M):R.set(F,M),M),Ve,be,X,k,s;class ne{constructor(R){Xe(this,Ve,void 0),r(this,Ve,R)}async getCredentials(R){const M=new URL(R.url),g=tt(this,Ve).find(Ne=>Ne.isUrlSupported(M));if(!g)throw new Error(`No auth provider available for '${R.url}', see https://backstage.io/link?scm-auth`);return g.getCredentials(R)}}Ve=new WeakMap;const re=class Ca{constructor(R,M,g,Ne){Xe(this,be,void 0),Xe(this,X,void 0),Xe(this,k,void 0),Xe(this,s,void 0),r(this,be,M),r(this,X,g),r(this,k,Ne),r(this,s,R)}static createDefaultApiFactory(){return(0,p.ni)({api:D,deps:{github:o.d,gitlab:o.e,azure:o.m,bitbucket:o.i},factory:({github:R,gitlab:M,azure:g,bitbucket:Ne})=>Ca.merge(Ca.forGithub(R),Ca.forGitlab(M),Ca.forAzure(g),Ca.forBitbucket(Ne))})}static forAuthApi(R,M){return new Ca("generic",R,M.host,M.scopeMapping)}static forGithub(R,M){var g;const Ne=(g=M==null?void 0:M.host)!=null?g:"github.com";return new Ca("github",R,Ne,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(R,M){var g;const Ne=(g=M==null?void 0:M.host)!=null?g:"gitlab.com";return new Ca("gitlab",R,Ne,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(R,M){var g;const Ne=(g=M==null?void 0:M.host)!=null?g:"dev.azure.com";return new Ca("azure",R,Ne,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(R,M){var g;const Ne=(g=M==null?void 0:M.host)!=null?g:"bitbucket.org";return new Ca("bitbucket",R,Ne,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...R){return new ne(R)}isUrlSupported(R){return R.host===tt(this,X)}getAdditionalScopesForProvider(R){var M,g;return!(R!=null&&R.customScopes)||tt(this,s)==="generic"?[]:(g=(M=R.customScopes)==null?void 0:M[tt(this,s)])!=null?g:[]}async getCredentials(R){const{url:M,additionalScope:g,...Ne}=R,Oe=tt(this,k).default.slice();g!=null&&g.repoWrite&&Oe.push(...tt(this,k).repoWrite);const Qe=this.getAdditionalScopesForProvider(g);Qe.length&&Oe.push(...Qe);const se=[...new Set(Oe)],Le=await tt(this,be).getAccessToken(se,Ne);return{token:Le,headers:{Authorization:`Bearer ${Le}`}}}};be=new WeakMap,X=new WeakMap,k=new WeakMap,s=new WeakMap;let ie=re;class ve{static fromConfig(R){return m.Lx.fromConfig(R)}}const Ce=(0,o.c)({id:"integration.scmintegrations"}),u=F=>{var R;const{type:M}=F,g=(0,p.qD)(),Ne=Y.Z,Oe=M&&(R=g.getSystemIcon(M))!=null?R:Ne;return V.createElement(Oe,null)}},1854:($n,Vt,e)=>{"use strict";e.d(Vt,{BT:()=>In,Lx:()=>cr,MY:()=>O,ah:()=>hr});var o=e(82717),p=e.n(o),m=e(76635),Y=e.n(m),V=e(96279),D=e.n(V),W=e(72872),tt=e(89393),Xe=e(26228),r=e(48834).Buffer;function Ve(y){const l=new URL("http://example.com");return l.host=y,l.host===y}function be(y){try{return new URL(y),!0}catch{return!1}}function X(y,l){return{list(){return y},byUrl(b){try{const B=typeof b=="string"?new URL(b):b;return y.find(Re=>l(Re)===B.host)}catch{return}},byHost(b){return y.find(B=>l(B)===b)}}}function k(y){const{url:l,base:b,lineNumber:B}=y;try{return new URL(l),l}catch{}let Re;if(l.startsWith("/")){const{filepath:st}=p()(b);Re=new URL(b);const At=(0,m.trimEnd)(Re.pathname.substring(0,Re.pathname.length-st.length),"/");Re.pathname=`${At}${l}`}else Re=new URL(l,b);return Re.search=new URL(b).search,B&&(Re.hash=`L${B}`),Re.toString()}const s="amazonaws.com";function ne(y){var l;const b=y.getOptionalString("endpoint"),B=(l=y.getOptionalBoolean("s3ForcePathStyle"))!=null?l:!1;let Re,st;if(b){try{const xn=new URL(b);Re=xn.host,st=xn.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${b}' is not a valid URL`)}if(st!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${b}'`)}else Re=s;const At=y.getOptionalString("accessKeyId"),Mt=y.getOptionalString("secretAccessKey"),Sn=y.getOptionalString("roleArn"),Mn=y.getOptionalString("externalId");return{host:Re,endpoint:b,s3ForcePathStyle:B,accessKeyId:At,secretAccessKey:Mt,roleArn:Sn,externalId:Mn}}function re(y){const l=y.map(ne);return l.some(b=>b.host===s)||l.push({host:s}),l}var ie=Object.defineProperty,ve=(y,l,b)=>l in y?ie(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,Ce=(y,l,b)=>(ve(y,typeof l!="symbol"?l+"":l,b),b);const u=class{constructor(l){this.integrationConfig=l}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){return k(l)}resolveEditUrl(l){return l}};Ce(u,"factory",({config:y})=>{var l;const b=re((l=y.getOptionalConfigArray("integrations.awsS3"))!=null?l:[]);return X(b.map(B=>new u(B)),B=>B.config.host)});let F=u;var R=(y,l,b)=>{if(!l.has(y))throw TypeError("Cannot "+b)},M=(y,l,b)=>(R(y,l,"read from private field"),b?b.call(y):l.get(y)),g=(y,l,b)=>{if(l.has(y))throw TypeError("Cannot add the same private member more than once");l instanceof WeakSet?l.add(y):l.set(y,b)},Ne=(y,l,b,B)=>(R(y,l,"write to private field"),B?B.call(y,b):l.set(y,b),b),Oe,Qe,se,Le,_e,Ke,St;const L="GB",pt=class Yi{constructor(l,b,B,Re,st,At){g(this,Oe,void 0),g(this,Qe,void 0),g(this,se,void 0),g(this,Le,void 0),g(this,_e,void 0),g(this,Ke,void 0),g(this,St,(...Mt)=>{const Sn=new URL(M(this,Oe));return Sn.pathname=Mt.map(Mn=>encodeURIComponent(Mn)).join("/"),Sn}),Ne(this,Oe,l),Ne(this,Qe,b),Ne(this,se,B),Ne(this,Le,Re),Ne(this,_e,st),Ne(this,Ke,At)}static fromRepoUrl(l){var b;const B=new URL(l);let Re,st,At;const Mt=B.pathname.split("/").map(br=>decodeURIComponent(br));if(Mt[2]==="_git"?(Re=Mt[1],st=At=Mt[3]):Mt[3]==="_git"?(Re=Mt[1],st=Mt[2],At=Mt[4]):Mt[4]==="_git"&&(Re=`${Mt[1]}/${Mt[2]}`,st=Mt[3],At=Mt[5]),!Re||!st||!At)throw new Error("Azure URL must point to a git repository");const Sn=(b=B.searchParams.get("path"))!=null?b:void 0;let Mn;const xn=B.searchParams.get("version");if(xn){if(xn.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");Mn=xn.slice(2)}return new Yi(B.origin,Re,st,At,Sn,Mn)}toRepoUrl(){let l;return M(this,se)===M(this,Le)?l=M(this,St).call(this,M(this,Qe),"_git",M(this,Le)):l=M(this,St).call(this,M(this,Qe),M(this,se),"_git",M(this,Le)),M(this,_e)&&l.searchParams.set("path",M(this,_e)),M(this,Ke)&&l.searchParams.set("version",L+M(this,Ke)),l.toString()}toFileUrl(){if(!M(this,_e))throw new Error("Azure URL must point to a specific path to be able to download a file");const l=M(this,St).call(this,M(this,Qe),M(this,se),"_apis","git","repositories",M(this,Le),"items");return l.searchParams.set("api-version","6.0"),l.searchParams.set("path",M(this,_e)),M(this,Ke)&&l.searchParams.set("version",M(this,Ke)),l.toString()}toArchiveUrl(){const l=M(this,St).call(this,M(this,Qe),M(this,se),"_apis","git","repositories",M(this,Le),"items");return l.searchParams.set("recursionLevel","full"),l.searchParams.set("download","true"),l.searchParams.set("api-version","6.0"),M(this,_e)&&l.searchParams.set("scopePath",M(this,_e)),M(this,Ke)&&l.searchParams.set("version",M(this,Ke)),l.toString()}toCommitsUrl(){const l=M(this,St).call(this,M(this,Qe),M(this,se),"_apis","git","repositories",M(this,Le),"commits");return l.searchParams.set("api-version","6.0"),M(this,Ke)&&l.searchParams.set("searchCriteria.itemVersion.version",M(this,Ke)),l.toString()}getOwner(){return M(this,Qe)}getProject(){return M(this,se)}getRepo(){return M(this,Le)}getPath(){return M(this,_e)}getRef(){return M(this,Ke)}};Oe=new WeakMap,Qe=new WeakMap,se=new WeakMap,Le=new WeakMap,_e=new WeakMap,Ke=new WeakMap,St=new WeakMap;let fe=pt;const zt="dev.azure.com",Et=["clientId","clientSecret","tenantId","personalAccessToken"],Dt=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["PersonalAccessToken",["personalAccessToken"]]]);function Wt(y){for(const l of Dt.entries()){const[b,B]=l,Re=Et.filter(st=>!B.includes(st));if(B.every(st=>y[st]!==void 0)&&Re.every(st=>y[st]===void 0))return{kind:b,organizations:y.organizations,...B.reduce((st,At)=>(st[At]=y[At],st),{})}}throw new Error("is not a valid credential")}function Je(y){var l,b,B,Re;const st=(l=y.getOptionalString("host"))!=null?l:zt;let At=(b=y.getOptionalConfigArray("credentials"))==null?void 0:b.map(Mn=>({organizations:Mn.getOptionalStringArray("organizations"),personalAccessToken:Mn.getOptionalString("personalAccessToken"),tenantId:Mn.getOptionalString("tenantId"),clientId:Mn.getOptionalString("clientId"),clientSecret:Mn.getOptionalString("clientSecret")}));const Mt=y.getOptionalString("token");if(y.getOptional("credential")!==void 0&&y.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(y.getOptional("token")!==void 0&&y.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(Mt!==void 0){const Mn=[{personalAccessToken:Mt}];At=(B=At==null?void 0:At.concat(Mn))!=null?B:Mn}if(y.getOptional("credential")!==void 0){const Mn=[{organizations:y.getOptionalStringArray("credential.organizations"),token:y.getOptionalString("credential.token"),tenantId:y.getOptionalString("credential.tenantId"),clientId:y.getOptionalString("credential.clientId"),clientSecret:y.getOptionalString("credential.clientSecret")}];At=(Re=At==null?void 0:At.concat(Mn))!=null?Re:Mn}if(!Ve(st))throw new Error(`Invalid Azure integration config, '${st}' is not a valid host`);let Sn;if(At!==void 0){const Mn=At==null?void 0:At.reduce((xn,br,Fr)=>{let Yr;try{Wt(br)}catch(oa){Yr=oa.message}return Yr!==void 0&&xn.push(`credential at position ${Fr+1} ${Yr}`),xn},Array.of()).concat(Object.entries(At.filter(xn=>xn.organizations!==void 0&&xn.organizations.length>0).reduce((xn,br,Fr)=>{var Yr;return(Yr=br.organizations)==null||Yr.forEach(oa=>{xn[oa]||(xn[oa]=[]),xn[oa].push(Fr+1)}),xn},{})).filter(([xn,br])=>br.length>1).reduce((xn,[br,Fr])=>(xn.push(`organization ${br} is specified multiple times in credentials at positions ${Fr.slice(0,Fr.length-1).join(", ")} and ${Fr[Fr.length-1]}`),xn),Array.of()));if((Mn==null?void 0:Mn.length)>0)throw new Error(`Invalid Azure integration config for ${st}: ${Mn.join("; ")}`);if(Sn=At.map(xn=>Wt(xn)),Sn.some(xn=>xn.kind!=="PersonalAccessToken")&&st!==zt)throw new Error(`Invalid Azure integration config for ${st}, only personal access tokens can be used with hosts other than ${zt}`);if(Sn.filter(xn=>xn.organizations===void 0||xn.organizations.length===0).length>1)throw new Error(`Invalid Azure integration config for ${st}, you cannot specify multiple credentials without organizations`)}return{host:st,credentials:Sn}}function _t(y){const l=y.map(Je);return l.some(b=>b.host===zt)||l.push({host:zt}),l}var Nt=Object.defineProperty,Xt=(y,l,b)=>l in y?Nt(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,Ht=(y,l,b)=>(Xt(y,typeof l!="symbol"?l+"":l,b),b);const Ft=class{constructor(l){this.integrationConfig=l}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){var b;const{url:B,base:Re}=l;if(be(B))return B;try{const st=fe.fromRepoUrl(Re),At=new URL(Re),Mt=new URL(`https://a.com${(b=st.getPath())!=null?b:""}`),Sn=new URL(B,Mt).pathname;return At.searchParams.set("path",Sn),l.lineNumber&&(At.searchParams.set("line",String(l.lineNumber)),At.searchParams.set("lineEnd",String(l.lineNumber+1)),At.searchParams.set("lineStartColumn","1"),At.searchParams.set("lineEndColumn","1")),At.toString()}catch{return new URL(B,Re).toString()}}resolveEditUrl(l){return l}};Ht(Ft,"factory",({config:y})=>{var l;const b=_t((l=y.getOptionalConfigArray("integrations.azure"))!=null?l:[]);return X(b.map(B=>new Ft(B)),B=>B.config.host)});let yt=Ft;function Tt(y){return fe.fromRepoUrl(y).toFileUrl()}function wt(y){return fe.fromRepoUrl(y).toArchiveUrl()}function Jt(y){return fe.fromRepoUrl(y).toCommitsUrl()}var Ae=Object.defineProperty,j=(y,l,b)=>l in y?Ae(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,E=(y,l,b)=>(j(y,typeof l!="symbol"?l+"":l,b),b);const N=null;class Q{constructor(l){this.credential=l,E(this,"azureDevOpsScope","499b84ac-1321-427f-aa17-267ca6975798/.default"),E(this,"cached")}static fromAzureDevOpsCredential(l){switch(l.kind){case"PersonalAccessToken":return Q.fromPersonalAccessTokenCredential(l);case"ClientSecret":return Q.fromTokenCredential(new ClientSecretCredential(l.tenantId,l.clientId,l.clientSecret));case"ManagedIdentity":return Q.fromTokenCredential(new ManagedIdentityCredential(l.clientId));default:throw new Error(`Credential kind '${l.kind}' not supported`)}}static fromTokenCredential(l){return new Q(l)}static fromPersonalAccessTokenCredential(l){return new Q(l.personalAccessToken)}async getCredentials(){if(this.cached===void 0||this.cached.expiresAt!==void 0&&Date.now()>this.cached.expiresAt)if(typeof this.credential=="string")this.cached={headers:{Authorization:`Basic ${btoa(`:${this.credential}`)}`},type:"pat",token:this.credential};else{const l=await this.credential.getToken(this.azureDevOpsScope);if(!l)throw new Error("Failed to retrieve access token");this.cached={expiresAt:l.expiresOnTimestamp-N,headers:{Authorization:`Bearer ${l.token}`},type:"bearer",token:l.token}}return this.cached}}class q{constructor(l){this.providers=l}static fromIntegrations(l){const b=l.azure.list().reduce((B,Re)=>{var st;return(st=Re.config.credentials)==null||st.forEach(At=>{var Mt;if(At.organizations===void 0||At.organizations.length===0)B.get(Re.config.host)===void 0&&B.set(Re.config.host,Q.fromAzureDevOpsCredential(At));else{const Sn=Q.fromAzureDevOpsCredential(At);(Mt=At.organizations)==null||Mt.forEach(Mn=>{B.set(`${Re.config.host}/${Mn}`,Sn)})}}),Re.config.host==="dev.azure.com"&&B.get(Re.config.host)===void 0&&B.set(Re.config.host,Q.fromTokenCredential(new DefaultAzureCredential)),B},new Map);return new q(b)}forAzureDevOpsServerOrganization(l){const b=l.pathname.split("/").filter(B=>B!=="");if(l.host!=="dev.azure.com"&&b.length>0){if(b[0]!=="tfs")return this.providers.get(`${l.host}/${b[0]}`);if(b[0]==="tfs"&&b.length>1)return this.providers.get(`${l.host}/${b[1]}`)}}forAzureDevOpsOrganization(l){const b=l.pathname.split("/").filter(B=>B!=="");if(l.host==="dev.azure.com"&&b.length>0)return this.providers.get(`${l.host}/${b[0]}`)}forHost(l){return this.providers.get(l.host)}async getCredentials(l){var b,B;const Re=new URL(l.url),st=(B=(b=this.forAzureDevOpsOrganization(Re))!=null?b:this.forAzureDevOpsServerOrganization(Re))!=null?B:this.forHost(Re);if(st!==void 0)return st.getCredentials(l)}}async function Ge(y,l){var b;const B=l?{...l}:{},Re=(b=y.credentials)==null?void 0:b.filter(st=>st.organizations===void 0||st.organizations.length===0)[0];if(Re){const At=await Q.fromAzureDevOpsCredential(Re).getCredentials();return{headers:{...At==null?void 0:At.headers,...B}}}return{headers:B}}const Z="bitbucket.org",x="https://api.bitbucket.org/2.0";function he(y){var l;const b=(l=y.getOptionalString("host"))!=null?l:Z;let B=y.getOptionalString("apiBaseUrl");const Re=y.getOptionalString("token"),st=y.getOptionalString("username"),At=y.getOptionalString("appPassword");if(!Ve(b))throw new Error(`Invalid Bitbucket integration config, '${b}' is not a valid host`);return B?B=(0,m.trimEnd)(B,"/"):b===Z?B=x:B=`https://${b}/rest/api/1.0`,{host:b,apiBaseUrl:B,token:Re,username:st,appPassword:At}}function Fe(y){const l=y.map(he);return l.some(b=>b.host===Z)||l.push({host:Z,apiBaseUrl:x}),l}var mt=Object.defineProperty,Qt=(y,l,b)=>l in y?mt(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,Ie=(y,l,b)=>(Qt(y,typeof l!="symbol"?l+"":l,b),b);const Be=class{constructor(l){this.integrationConfig=l}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const b=k(l);if(!l.lineNumber)return b;const B=new URL(b);return this.integrationConfig.host==="bitbucket.org"?B.hash=`lines-${l.lineNumber}`:B.hash=`${l.lineNumber}`,B.toString()}resolveEditUrl(l){const b=p()(l),B=new URL(l);return B.searchParams.set("mode","edit"),B.searchParams.set("spa","0"),B.searchParams.set("at",b.ref),B.toString()}};Ie(Be,"factory",({config:y})=>{var l,b,B;const Re=Fe((B=y.getOptionalConfigArray("integrations.bitbucket"))!=null?B:[...(l=y.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?l:[],...(b=y.getOptionalConfigArray("integrations.bitbucketServer"))!=null?b:[]]);return X(Re.map(st=>new Be(st)),st=>st.config.host)});let ct=Be;async function Ot(y,l){const{name:b,owner:B,resource:Re}=parseGitUrl(y),st=Re==="bitbucket.org";let At=st?`${l.apiBaseUrl}/repositories/${B}/${b}`:`${l.apiBaseUrl}/projects/${B}/repos/${b}/default-branch`,Mt=await fetch(At,Ct(l));if(Mt.status===404&&!st&&(At=`${l.apiBaseUrl}/projects/${B}/repos/${b}/branches/default`,Mt=await fetch(At,Ct(l))),!Mt.ok){const Mn=`Failed to retrieve default branch from ${At}, ${Mt.status} ${Mt.statusText}`;throw new Error(Mn)}let Sn;if(st)Sn=(await Mt.json()).mainbranch.name;else{const{displayId:Mn}=await Mt.json();Sn=Mn}if(!Sn)throw new Error(`Failed to read default branch from ${At}. Response ${Mt.status} ${Mt.json()}`);return Sn}async function bt(y,l){const{name:b,owner:B,ref:Re,protocol:st,resource:At,filepath:Mt}=parseGitUrl(y),Sn=At==="bitbucket.org";let Mn=Re;Mn||(Mn=await Ot(y,l));const xn=Mt?`&path=${encodeURIComponent(decodeURIComponent(Mt))}`:"";return Sn?`${st}://${At}/${B}/${b}/get/${Mn}.tar.gz`:`${l.apiBaseUrl}/projects/${B}/repos/${b}/archive?format=tgz&at=${Mn}&prefix=${B}-${b}${xn}`}function $t(y,l){try{const{owner:b,name:B,ref:Re,filepathtype:st,filepath:At}=parseGitUrl(y);if(!b||!B||st!=="browse"&&st!=="raw"&&st!=="src")throw new Error("Invalid Bitbucket URL or file path");const Mt=At.replace(/^\//,"");if(l.host==="bitbucket.org"){if(!Re)throw new Error("Invalid Bitbucket URL or file path");return`${l.apiBaseUrl}/repositories/${b}/${B}/src/${Re}/${Mt}`}return`${l.apiBaseUrl}/projects/${b}/repos/${B}/raw/${Mt}?at=${Re}`}catch(b){throw new Error(`Incorrect URL: ${y}, ${b}`)}}function Ct(y){const l={};if(y.token)l.Authorization=`Bearer ${y.token}`;else if(y.username&&y.appPassword){const b=r.from(`${y.username}:${y.appPassword}`,"utf8");l.Authorization=`Basic ${b.toString("base64")}`}return{headers:l}}const $e="bitbucket.org",qe="https://api.bitbucket.org/2.0";function Ee(y){const l=$e,b=qe,B=y.getString("username"),Re=y.getString("appPassword");return{host:l,apiBaseUrl:b,username:B,appPassword:Re}}function G(y){const l=y.map(Ee);return l.length===0&&l.push({host:$e,apiBaseUrl:qe}),l}var ue=Object.defineProperty,Ue=(y,l,b)=>l in y?ue(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,nt=(y,l,b)=>(Ue(y,typeof l!="symbol"?l+"":l,b),b);const it=class{constructor(l){this.integrationConfig=l}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const b=k(l);if(l.lineNumber){const B=new URL(b);return B.hash=`lines-${l.lineNumber}`,B.toString()}return b}resolveEditUrl(l){const b=p()(l),B=new URL(l);return B.searchParams.set("mode","edit"),B.searchParams.set("at",b.ref),B.toString()}};nt(it,"factory",({config:y})=>{var l;const b=G((l=y.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?l:[]);return X(b.map(B=>new it(B)),B=>B.config.host)});let Rt=it;async function qt(y,l){const{name:b,owner:B}=parseGitUrl(y),Re=`${l.apiBaseUrl}/repositories/${B}/${b}`,st=await fetch(Re,De(l));if(!st.ok){const Sn=`Failed to retrieve default branch from ${Re}, ${st.status} ${st.statusText}`;throw new Error(Sn)}const Mt=(await st.json()).mainbranch.name;if(!Mt)throw new Error(`Failed to read default branch from ${Re}. Response ${st.status} ${st.json()}`);return Mt}async function nn(y,l){const{name:b,owner:B,ref:Re,protocol:st,resource:At}=parseGitUrl(y);let Mt=Re;return Mt||(Mt=await qt(y,l)),`${st}://${At}/${B}/${b}/get/${Mt}.tar.gz`}function we(y,l){try{const{owner:b,name:B,ref:Re,filepathtype:st,filepath:At}=parseGitUrl(y);if(!b||!B||st!=="src"&&st!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const Mt=At.replace(/^\//,"");if(!Re)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${l.apiBaseUrl}/repositories/${b}/${B}/src/${Re}/${Mt}`}catch(b){throw new Error(`Incorrect URL: ${y}, ${b}`)}}function De(y){const l={};if(y.username&&y.appPassword){const b=r.from(`${y.username}:${y.appPassword}`,"utf8");l.Authorization=`Basic ${b.toString("base64")}`}return{headers:l}}function w(y){const l=y.getString("host");let b=y.getOptionalString("apiBaseUrl");const B=y.getOptionalString("token"),Re=y.getOptionalString("username"),st=y.getOptionalString("password");if(!Ve(l))throw new Error(`Invalid Bitbucket Server integration config, '${l}' is not a valid host`);return b?b=(0,m.trimEnd)(b,"/"):b=`https://${l}/rest/api/1.0`,{host:l,apiBaseUrl:b,token:B,username:Re,password:st}}function H(y){return y.map(w)}var te=Object.defineProperty,ut=(y,l,b)=>l in y?te(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,K=(y,l,b)=>(ut(y,typeof l!="symbol"?l+"":l,b),b);const ee=class{constructor(l){this.integrationConfig=l}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const b=k(l);if(l.lineNumber){const B=new URL(b);return B.hash=l.lineNumber.toString(),B.toString()}return b}resolveEditUrl(l){return l.includes("?")?l.substring(0,l.indexOf("?")):l}};K(ee,"factory",({config:y})=>{var l;const b=H((l=y.getOptionalConfigArray("integrations.bitbucketServer"))!=null?l:[]);return X(b.map(B=>new ee(B)),B=>B.config.host)});let He=ee;async function lt(y,l){const{name:b,owner:B}=parseGitUrl(y);let Re=`${l.apiBaseUrl}/projects/${B}/repos/${b}/default-branch`,st=await fetch(Re,an(l));if(st.status===404&&(Re=`${l.apiBaseUrl}/projects/${B}/repos/${b}/branches/default`,st=await fetch(Re,an(l))),!st.ok){const Sn=`Failed to retrieve default branch from ${Re}, ${st.status} ${st.statusText}`;throw new Error(Sn)}const{displayId:At}=await st.json(),Mt=At;if(!Mt)throw new Error(`Failed to read default branch from ${Re}. Response ${st.status} ${st.json()}`);return Mt}async function Bt(y,l){const{name:b,owner:B,ref:Re,filepath:st}=parseGitUrl(y);let At=Re;At||(At=await lt(y,l));const Mt=st?`&path=${encodeURIComponent(decodeURIComponent(st))}`:"";return`${l.apiBaseUrl}/projects/${B}/repos/${b}/archive?format=tgz&at=${At}&prefix=${B}-${b}${Mt}`}function It(y,l){try{const{owner:b,name:B,ref:Re,filepathtype:st,filepath:At}=parseGitUrl(y);if(!b||!B||st!=="browse"&&st!=="raw"&&st!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const Mt=At.replace(/^\//,"");return`${l.apiBaseUrl}/projects/${b}/repos/${B}/raw/${Mt}?at=${Re}`}catch(b){throw new Error(`Incorrect URL: ${y}, ${b}`)}}function an(y){const l={};if(y.token)l.Authorization=`Bearer ${y.token}`;else if(y.username&&y.password){const b=r.from(`${y.username}:${y.password}`,"utf8");l.Authorization=`Basic ${b.toString("base64")}`}return{headers:l}}function on(y){const l=y.getString("host");let b=y.getOptionalString("baseUrl"),B=y.getOptionalString("cloneUrl"),Re=y.getOptionalString("gitilesBaseUrl");const st=y.getOptionalString("username"),At=y.getOptionalString("password");if(Ve(l)){if(b&&!be(b))throw new Error(`Invalid Gerrit integration config, '${b}' is not a valid baseUrl`);if(B&&!be(B))throw new Error(`Invalid Gerrit integration config, '${B}' is not a valid cloneUrl`);if(Re&&!be(Re))throw new Error(`Invalid Gerrit integration config, '${Re}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${l}' is not a valid host`);return b?b=(0,m.trimEnd)(b,"/"):b=`https://${l}`,Re?Re=(0,m.trimEnd)(Re,"/"):Re=`https://${l}`,B?B=(0,m.trimEnd)(B,"/"):B=b,{host:l,baseUrl:b,cloneUrl:B,gitilesBaseUrl:Re,username:st,password:At}}function fn(y){return y.map(on)}const tn=")]}'";function cn(y,l){const b=new URL(y.gitilesBaseUrl),B=new URL(l),st=B.pathname.substring(B.pathname.startsWith("/a/")?2:0).replace(b.pathname,"").split("/").filter(br=>!!br),At=st.indexOf("+");if(At<=0)throw new Error(`Unable to parse project from url: ${l}`);const Mt=(0,m.trimStart)(st.slice(0,At).join("/"),"/"),Sn=st.indexOf("heads");if(Sn<=0)throw new Error(`Unable to parse branch from url: ${l}`);const Mn=st[Sn+1],xn=st.slice(Sn+2).join("/");return{branch:Mn,filePath:xn===""?"/":xn,project:Mt}}function ln(y,l,b,B){return`${y.gitilesBaseUrl}/${l}/+/refs/heads/${b}/${(0,m.trimStart)(B,"/")}`}function wn(y,l,b,B){const Re=B==="/"||B===""?".tar.gz":`/${B}.tar.gz`;return`${bn(y)}/${l}/+archive/refs/heads/${b}${Re}`}function dn(y){return y.password?"/a/":"/"}function bn(y){if(!y.baseUrl||!y.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(y.gitilesBaseUrl.startsWith(y.baseUrl))return y.gitilesBaseUrl.replace(y.baseUrl.concat("/"),y.baseUrl.concat(dn(y)));if(y.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return y.gitilesBaseUrl}function ce(y,l){const{branch:b,project:B}=cn(y,l);return`${y.baseUrl}${dn(y)}projects/${encodeURIComponent(B)}/branches/${b}`}function ae(y,l){const{project:b}=cn(y,l);return`${y.cloneUrl}${dn(y)}${b}`}function Ze(y,l){const{branch:b,filePath:B,project:Re}=cn(y,l);return`${y.baseUrl}${dn(y)}projects/${encodeURIComponent(Re)}/branches/${b}/files/${encodeURIComponent(B)}/content`}function Pt(y){return`${y.baseUrl}${dn(y)}projects/`}function Gt(y){const l={};if(!y.password)return l;const b=r.from(`${y.username}:${y.password}`,"utf8");return l.Authorization=`Basic ${b.toString("base64")}`,{headers:l}}async function jt(y){const l=await y.text();if(l.startsWith(tn))try{return JSON.parse(l.slice(tn.length))}catch(b){throw new Error(`Invalid response from Gerrit: ${l.slice(0,10)} - ${b}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${l.slice(0,10)}`)}var _n=Object.defineProperty,Wn=(y,l,b)=>l in y?_n(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,Gn=(y,l,b)=>(Wn(y,typeof l!="symbol"?l+"":l,b),b);const dr=class{constructor(l){this.integrationConfig=l}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const{url:b,base:B,lineNumber:Re}=l;let st;if(b.startsWith("/")){const{branch:At,project:Mt}=cn(this.config,B);return ln(this.config,Mt,At,b)}return b?st=new URL(b,B):st=new URL(B),Re&&(st.hash=Re.toString()),st.toString()}resolveEditUrl(l){return l}};Gn(dr,"factory",({config:y})=>{var l;const b=fn((l=y.getOptionalConfigArray("integrations.gerrit"))!=null?l:[]);return X(b.map(B=>new dr(B)),B=>B.config.host)});let gr=dr;function Jn(y){const l=y.getString("host");let b=y.getOptionalString("baseUrl");const B=y.getOptionalString("username"),Re=y.getOptionalString("password");if(!Ve(l))throw new Error(`Invalid Gitea integration config, '${l}' is not a valid host`);return b?b=(0,m.trimEnd)(b,"/"):b=`https://${l}`,{host:l,baseUrl:b,username:B,password:Re}}function pr(y,l){var b;try{const B=(b=y.baseUrl)!=null?b:`https://${y.host}`,[Re,st,At,Mt,Sn,Mn,...xn]=l.replace(B,"").split("/"),br=xn.join("/").replace(/^\//,"");return`${B}/${st}/${At}/_edit/${Mn}/${br}`}catch(B){throw new Error(`Incorrect URL: ${l}, ${B}`)}}function Pr(y,l){var b;try{const B=(b=y.baseUrl)!=null?b:`https://${y.host}`,[Re,st,At,Mt,Sn,Mn,...xn]=l.replace(B,"").split("/"),br=xn.join("/").replace(/^\//,"");return`${B}/api/v1/repos/${st}/${At}/contents/${br}?ref=${Mn}`}catch(B){throw new Error(`Incorrect URL: ${l}, ${B}`)}}function Lr(y){const l={},{username:b,password:B}=y;return B?(b?l.Authorization=`basic ${r.from(`${b}:${B}`).toString("base64")}`:l.Authorization=`token ${B}`,{headers:l}):l}var vr=Object.defineProperty,wr=(y,l,b)=>l in y?vr(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,Or=(y,l,b)=>(wr(y,typeof l!="symbol"?l+"":l,b),b);const Tr=class{constructor(l){this.config=l}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(l){return k(l)}resolveEditUrl(l){return pr(this.config,l)}};Or(Tr,"factory",({config:y})=>{var l;const B=((l=y.getOptionalConfigArray("integrations.gitea"))!=null?l:[]).map(Re=>Jn(Re));return X(B.map(Re=>new Tr(Re)),Re=>Re.config.host)});let oe=Tr;const Ye="github.com",rt="https://api.github.com",C="https://raw.githubusercontent.com";function _(y){var l,b;const B=(l=y.getOptionalString("host"))!=null?l:Ye;let Re=y.getOptionalString("apiBaseUrl"),st=y.getOptionalString("rawBaseUrl");const At=y.getOptionalString("token"),Mt=(b=y.getOptionalConfigArray("apps"))==null?void 0:b.map(Sn=>({appId:Sn.getNumber("appId"),clientId:Sn.getString("clientId"),clientSecret:Sn.getString("clientSecret"),webhookSecret:Sn.getString("webhookSecret"),privateKey:Sn.getString("privateKey"),allowedInstallationOwners:Sn.getOptionalStringArray("allowedInstallationOwners")}));if(!Ve(B))throw new Error(`Invalid GitHub integration config, '${B}' is not a valid host`);return Re?Re=(0,m.trimEnd)(Re,"/"):B===Ye&&(Re=rt),st?st=(0,m.trimEnd)(st,"/"):B===Ye&&(st=C),{host:B,apiBaseUrl:Re,rawBaseUrl:st,token:At,apps:Mt}}function O(y){const l=y.map(_);return l.some(b=>b.host===Ye)||l.push({host:Ye,apiBaseUrl:rt,rawBaseUrl:C}),l}function T(y,l,b){try{const{owner:B,name:Re,ref:st,filepathtype:At,filepath:Mt}=parseGitUrl(y);if(!B||!Re||!st||At!=="blob"&&At!=="raw"&&At!=="tree")throw new Error("Invalid GitHub URL or file path");const Sn=Mt.replace(/^\//,"");return ye(l,b)==="api"?`${l.apiBaseUrl}/repos/${B}/${Re}/contents/${Sn}?ref=${st}`:`${l.rawBaseUrl}/${B}/${Re}/${st}/${Sn}`}catch(B){throw new Error(`Incorrect URL: ${y}, ${B}`)}}function me(y,l){const b={};return ye(y,l)==="api"&&(b.Accept="application/vnd.github.v3.raw"),l.token&&(b.Authorization=`token ${l.token}`),{headers:b}}function ye(y,l){return y.apiBaseUrl&&(l.token||!y.rawBaseUrl)?"api":"raw"}var le=Object.defineProperty,Pe=(y,l,b)=>l in y?le(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,ke=(y,l,b)=>(Pe(y,typeof l!="symbol"?l+"":l,b),b);class We{constructor(){ke(this,"tokenCache",new Map),ke(this,"isExpired",l=>Xe.ou.local()>l)}async getOrCreateToken(l,b,B){let Re=this.tokenCache.get(l);if((!Re||this.isExpired(Re.expiresAt))&&(Re=await B(),Re.expiresAt=Re.expiresAt.minus({minutes:10}),this.tokenCache.set(l,Re)),!this.appliesToRepo(Re,b))throw new Error(`The Backstage GitHub application used in the ${l} organization does not have access to a repository with the name ${b}`);return{accessToken:Re.token}}appliesToRepo(l,b){return b===void 0?!0:l.repositories!==void 0?l.repositories.includes(b):!0}}const ht={Accept:"application/vnd.github.machine-man-preview+json"};class rn{constructor(l,b){ke(this,"appClient"),ke(this,"baseUrl"),ke(this,"baseAuthConfig"),ke(this,"cache",new We),ke(this,"allowedInstallationOwners"),this.allowedInstallationOwners=l.allowedInstallationOwners,this.baseUrl=b,this.baseAuthConfig={appId:l.appId,privateKey:l.privateKey.replace(/\\n/gm,`
`)},this.appClient=new tt.v({baseUrl:b,headers:ht,authStrategy:W.i,auth:this.baseAuthConfig})}async getInstallationCredentials(l,b){var B;return this.allowedInstallationOwners&&!((B=this.allowedInstallationOwners)!=null&&B.includes(l))?{accessToken:void 0}:this.cache.getOrCreateToken(l,b,async()=>{var Re;const{installationId:st,suspended:At}=await this.getInstallationData(l);if(At)throw new Error(`The GitHub application for ${l} is suspended`);const Mt=await this.appClient.apps.createInstallationAccessToken({installation_id:st,headers:ht});let Sn;if(Mt.data.repository_selection==="selected"){const Mn=new tt.v({baseUrl:this.baseUrl,auth:Mt.data.token}),xn=await Mn.paginate(Mn.apps.listReposAccessibleToInstallation);Sn=((Re=xn.repositories)!=null?Re:xn).map(Fr=>Fr.name)}return{token:Mt.data.token,expiresAt:Xe.ou.fromISO(Mt.data.expires_at),repositories:Sn}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(l){const B=(await this.getInstallations()).find(st=>{var At;return st.account&&"login"in st.account&&((At=st.account.login)==null?void 0:At.toLocaleLowerCase("en-US"))===l.toLocaleLowerCase("en-US")});if(B)return{installationId:B.id,suspended:Boolean(B.suspended_by)};const Re=new Error(`No app installation found for ${l} in ${this.baseAuthConfig.appId}`);throw Re.name="NotFoundError",Re}}class en{constructor(l){ke(this,"apps");var b,B;this.apps=(B=(b=l.apps)==null?void 0:b.map(Re=>new rn(Re,l.apiBaseUrl)))!=null?B:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(b=>b.getInstallations()))).flat():[]}async getAppToken(l,b){if(this.apps.length===0)return;const B=await Promise.all(this.apps.map(Mt=>Mt.getInstallationCredentials(l,b).then(Sn=>({credentials:Sn,error:void 0}),Sn=>({credentials:void 0,error:Sn})))),Re=B.find(Mt=>{var Sn;return(Sn=Mt.credentials)==null?void 0:Sn.accessToken});if(Re)return Re.credentials.accessToken;const At=B.map(Mt=>Mt.error).find(Mt=>(Mt==null?void 0:Mt.name)!=="NotFoundError");if(At)throw At}}const Ut=class{constructor(l,b){this.githubAppCredentialsMux=l,this.token=b}async getCredentials(l){const b=p()(l.url),B=b.owner||b.name,Re=b.owner?b.name:void 0;let st="app",At=await this.githubAppCredentialsMux.getAppToken(B,Re);return At||(st="token",At=this.token),{headers:At?{Authorization:`Bearer ${At}`}:void 0,token:At,type:st}}};ke(Ut,"create",y=>new Ut(new en(y),y.token));let gn=null;class pn{constructor(l){this.providers=l}static fromIntegrations(l){const b=new Map;return l.github.list().forEach(B=>{const Re=gn.create(B.config);b.set(B.config.host,Re)}),new pn(b)}async getCredentials(l){const b=new URL(l.url),B=this.providers.get(b.host);if(!B)throw new Error(`There is no GitHub integration that matches ${l.url}. Please add a configuration for an integration.`);return B.getCredentials(l)}}var hn=Object.defineProperty,En=(y,l,b)=>l in y?hn(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,Cn=(y,l,b)=>(En(y,typeof l!="symbol"?l+"":l,b),b);const Yn=class{constructor(l){this.integrationConfig=l}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){return In(k(l),"tree")}resolveEditUrl(l){return In(l,"edit")}};Cn(Yn,"factory",({config:y})=>{var l;const b=O((l=y.getOptionalConfigArray("integrations.github"))!=null?l:[]);return X(b.map(B=>new Yn(B)),B=>B.config.host)});let Hn=Yn;function In(y,l){return y.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(b,B,Re,st)=>`//${B}/${Re}/${st}/${l}/`)}var Ln=Object.defineProperty,Zn=(y,l,b)=>l in y?Ln(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,sn=(y,l,b)=>(Zn(y,typeof l!="symbol"?l+"":l,b),b);const Rn=null;class tr extends Hn{constructor(l){super(l)}get config(){return super.config}}sn(tr,"factory",Hn.factory);const ir=null,Cr=null,Mr=null,Rr="gitlab.com",Vr="https://gitlab.com/api/v4";function kr(y){const l=y.getString("host");let b=y.getOptionalString("apiBaseUrl");const B=y.getOptionalString("token");let Re=y.getOptionalString("baseUrl");if(b?b=(0,m.trimEnd)(b,"/"):l===Rr&&(b=Vr),Re?Re=(0,m.trimEnd)(Re,"/"):Re=`https://${l}`,Ve(l)){if(!b||!be(b))throw new Error(`Invalid GitLab integration config, '${b}' is not a valid apiBaseUrl`);if(!be(Re))throw new Error(`Invalid GitLab integration config, '${Re}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${l}' is not a valid host`);return{host:l,token:B,apiBaseUrl:b,baseUrl:Re}}function Ur(y){const l=y.map(kr);return l.some(b=>b.host===Rr)||l.push({host:Rr,apiBaseUrl:Vr,baseUrl:`https://${Rr}`}),l}function Nr(y){let l="";return y.host!==Rr&&(l=new URL(y.baseUrl).pathname),trimEnd(l,"/")}async function Hr(y,l){const b=await pa(y,l);return ea(y,b,l).toString()}function qr(y){const{token:l=""}=y;return{headers:{"PRIVATE-TOKEN":l}}}function ea(y,l,b){try{const B=new URL(y),Re=B.pathname.split("/blob/").slice(1).join("/blob/"),[st,...At]=Re.split("/"),Mt=Nr(b);return B.pathname=[...Mt?[Mt]:[],"api/v4/projects",l,"repository/files",encodeURIComponent(decodeURIComponent(At.join("/"))),"raw"].join("/"),B.search=`?ref=${st}`,B}catch(B){throw new Error(`Incorrect url: ${y}, ${B}`)}}async function pa(y,l){const b=new URL(y);if(!b.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let B=b.pathname.split("/-/blob/")[0].split("/blob/")[0];const Re=Nr(l);Re&&(B=B.replace(Re,""));const st=new URL(`${b.origin}${Re}/api/v4/projects/${encodeURIComponent(B.replace(/^\//,""))}`),At=await fetch(st.toString(),qr(l)),Mt=await At.json();if(!At.ok)throw new Error(`GitLab Error '${Mt.error}', ${Mt.error_description}`);return Number(Mt.id)}catch(B){throw new Error(`Could not get GitLab project ID for: ${y}, ${B}`)}}var ta=Object.defineProperty,yr=(y,l,b)=>l in y?ta(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,nr=(y,l,b)=>(yr(y,typeof l!="symbol"?l+"":l,b),b);const rr=class{constructor(l){this.integrationConfig=l}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){return k(l)}resolveEditUrl(l){return hr(l,"edit")}};nr(rr,"factory",({config:y})=>{var l;const b=Ur((l=y.getOptionalConfigArray("integrations.gitlab"))!=null?l:[]);return X(b.map(B=>new rr(B)),B=>B.config.host)});let ua=rr;function hr(y,l){return y.replace(/\/\-\/(blob|tree|edit)\//,`/-/${l}/`)}var da=Object.defineProperty,ot=(y,l,b)=>l in y?da(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,pe=(y,l,b)=>(ot(y,typeof l!="symbol"?l+"":l,b),b);const vt=class{constructor(l){this.token=l}async getCredentials(l){return this.token?{headers:{Authorization:`Bearer ${this.token}`},token:this.token}:{}}};pe(vt,"create",y=>new vt(y.token));let An=null;class kn{constructor(l){this.providers=l}static fromIntegrations(l){const b=new Map;return l.gitlab.list().forEach(B=>{const Re=An.create(B.config);b.set(B.config.host,Re)}),new kn(b)}async getCredentials(l){const b=new URL(l.url),B=this.providers.get(b.host);if(!B)throw new Error(`There is no GitLab integration that matches ${l.url}. Please add a configuration for an integration.`);return B.getCredentials(l)}}function Qn(y){if(!y)return{};if(!y.has("clientEmail")&&!y.has("privateKey"))return{};const l=y.getString("privateKey").split("\\n").join(`
`);return{clientEmail:y.getString("clientEmail"),privateKey:l}}var lr=Object.defineProperty,Zr=(y,l,b)=>l in y?lr(y,l,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[l]=b,Br=(y,l,b)=>(Zr(y,typeof l!="symbol"?l+"":l,b),b);class cr{constructor(l){Br(this,"byType"),this.byType=l}static fromConfig(l){return new cr({awsS3:F.factory({config:l}),azure:yt.factory({config:l}),bitbucket:ct.factory({config:l}),bitbucketCloud:Rt.factory({config:l}),bitbucketServer:He.factory({config:l}),gerrit:gr.factory({config:l}),github:Hn.factory({config:l}),gitlab:ua.factory({config:l}),gitea:oe.factory({config:l})})}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(l=>l.list())}byUrl(l){let b=Object.values(this.byType).map(B=>B.byUrl(l)).filter(Boolean);if(b.length>1){const B=b.filter(Re=>!(Re instanceof ct));B.length!==0&&(b=B)}return b[0]}byHost(l){return Object.values(this.byType).map(b=>b.byHost(l)).find(Boolean)}resolveUrl(l){const b=this.byUrl(l.base);return b?b.resolveUrl(l):k(l)}resolveEditUrl(l){const b=this.byUrl(l);return b?b.resolveEditUrl(l):l}}},71900:($n,Vt,e)=>{"use strict";e.d(Vt,{Cy:()=>_e,DC:()=>Z,OO:()=>Fe,RE:()=>Qe,XQ:()=>he,Yq:()=>Wt,ap:()=>Qt,bM:()=>Jt,cm:()=>j,d1:()=>q,fP:()=>Oe,fe:()=>E,gC:()=>mt,hK:()=>Ge,hs:()=>N,nE:()=>Je,x1:()=>x,zJ:()=>Q});var o=e(2784),p=e(73557),m=e(49558),Y=e(30705),V=e(30204),D=e(49477),W=e(64304),tt=e(78373),Xe=e(99688),r=e(13737),Ve=e(60364),be=e(90436),X=e(79692),k=e(95544),s=e(8629),ne=e(79249),re=e(38724),ie=e(99152),ve=e(6487),Ce=e(49429),u=e(77277),F=e(34520),R=e(15933);const M=(0,Y.NT)({id:"api-docs"}),g=(0,Y.x8)({id:"register-component",optional:!0}),Ne=[D.C.columns.createTitleColumn({hidden:!0}),D.C.columns.createNameColumn({defaultKind:"API"}),D.C.columns.createSystemColumn(),D.C.columns.createOwnerColumn(),D.C.columns.createSpecTypeColumn(),D.C.columns.createSpecLifecycleColumn(),D.C.columns.createMetadataDescriptionColumn(),D.C.columns.createTagsColumn()],Oe=Ie=>{var Be;const{initiallySelectedFilter:ct="all",columns:Ot,actions:bt}=Ie,Ct=`${(Be=(0,V.u)(V.p).getOptionalString("organization.name"))!=null?Be:"Backstage"} API Explorer`,$e=(0,Y.tg)(g);return o.createElement(m.g9,{themeId:"apis",title:"APIs",subtitle:Ct,pageTitleOverride:"APIs"},o.createElement(m.VY,null,o.createElement(m.yW,{title:""},o.createElement(m.XF,{title:"Register Existing API",to:$e==null?void 0:$e()}),o.createElement(m.qt,null,"All your APIs")),o.createElement(W.UO,null,o.createElement(W._i,null,o.createElement(W._i.Filters,null,o.createElement(W.tW,{initialFilter:"api",hidden:!0}),o.createElement(W.sL,null),o.createElement(W.EW,{initialFilter:ct}),o.createElement(W.dq,null),o.createElement(W.df,null),o.createElement(W.xE,null)),o.createElement(W._i.Content,null,o.createElement(D.C,{columns:Ot||Ne,actions:bt}))))))},Qe=Ie=>(0,p.pC)()||o.createElement(Oe,{...Ie}),se=(0,V.c)({id:"plugin.api-docs.config"}),Le=Ie=>o.createElement(m.Oi,{text:Ie.definition,language:Ie.language,showCopyCodeButton:!0}),_e=()=>{var Ie;const{entity:Be}=(0,tt.u)(),ct=(0,V.u)(se),{getApiDefinitionWidget:Ot}=ct;if(!Be)return o.createElement(Xe.Z,{severity:"error"},"Could not fetch the API");const bt=Ot(Be),$t=(Ie=Be.metadata.title)!=null?Ie:Be.metadata.name;return bt?o.createElement(m.oZ,{title:$t},o.createElement(m.hB,{label:bt.title,key:"widget"},bt.component(Be.spec.definition)),o.createElement(m.hB,{label:"Raw",key:"raw"},o.createElement(Le,{definition:Be.spec.definition,language:bt.rawLanguage||Be.spec.type}))):o.createElement(m.oZ,{title:$t,children:[o.createElement(m.hB,{label:Be.spec.type,key:"raw"},o.createElement(Le,{definition:Be.spec.definition,language:Be.spec.type}))]})},Ke=o.lazy(()=>Promise.all([e.e(1978),e.e(8847),e.e(4971)]).then(e.bind(e,64971)).then(Ie=>({default:Ie.AsyncApiDefinition}))),St=Ie=>o.createElement(o.Suspense,{fallback:o.createElement(m.Ex,null)},o.createElement(Ke,{...Ie})),L=o.lazy(()=>e.e(7851).then(e.bind(e,77851)).then(Ie=>({default:Ie.GraphQlDefinition}))),pt=Ie=>o.createElement(o.Suspense,{fallback:o.createElement(m.Ex,null)},o.createElement(L,{...Ie})),fe=o.lazy(()=>Promise.all([e.e(1978),e.e(2641)]).then(e.bind(e,42641)).then(Ie=>({default:Ie.OpenApiDefinition}))),zt=Ie=>o.createElement(o.Suspense,{fallback:o.createElement(m.Ex,null)},o.createElement(fe,{...Ie})),Et=Ie=>{const Be=(0,Ve.Z)();return o.createElement(m.Oi,{customStyle:{backgroundColor:Be.palette.background.default},text:Ie.definition,language:"protobuf",showCopyCodeButton:!0})},Dt=Ie=>{const{definition:Be}=Ie,ct=(0,Ve.Z)();return o.createElement(m.Oi,{customStyle:{backgroundColor:ct.palette.background.default},text:Be,language:"typescript",showCopyCodeButton:!0})};function Wt(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:Ie=>o.createElement(zt,{definition:Ie})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:Ie=>o.createElement(St,{definition:Ie})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:Ie=>o.createElement(pt,{definition:Ie})},{type:"grpc",title:"gRPC",component:Ie=>o.createElement(Et,{definition:Ie})},{type:"trpc",title:"tRPC",component:Ie=>o.createElement(Dt,{definition:Ie})}]}const Je=Ie=>{const{apiEntity:Be}=Ie,Ot=(0,V.u)(se).getApiDefinitionWidget(Be),bt=Ot?Ot.title:Be.spec.type;return o.createElement(be.Z,{component:"span"},bt)},_t=(0,X.Z)(Ie=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",height:"100%"},tabs:{borderRight:`1px solid ${Ie.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"},title:{color:Ie.palette.text.primary,wordBreak:"break-word",fontSize:Ie.typography.h3.fontSize,marginBottom:0},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:Ie.spacing(1),color:Ie.palette.text.primary}}));function Nt(Ie){const{children:Be,value:ct,index:Ot,...bt}=Ie,$t=_t();return o.createElement("div",{role:"tabpanel",hidden:ct!==Ot,id:`vertical-tabpanel-${Ot}`,"aria-labelledby":`vertical-tab-${Ot}`,className:$t.tabContents,...bt},ct===Ot&&o.createElement(k.Z,{pl:3,pr:3},Be))}function Xt(Ie){return{id:`vertical-tab-${Ie}`,"aria-controls":`vertical-tabpanel-${Ie}`}}function Ht(Ie){var Be,ct,Ot;const{open:bt,entity:$t,onClose:Ct}=Ie,[$e,qe]=o.useState(0),Ee=_t();(0,o.useEffect)(()=>{qe(0)},[bt]);const ue=(0,V.u)(se).getApiDefinitionWidget($t);let Ue=0,nt=0;return o.createElement(s.Z,{fullWidth:!0,maxWidth:"xl",open:bt,onClose:Ct,"aria-labelledby":"api-definition-dialog-title",PaperProps:{className:Ee.fullHeightDialog}},o.createElement(ne.Z,{id:"api-definition-dialog-title",disableTypography:!0},o.createElement(be.Z,{className:Ee.type},"API - ",(Be=ue==null?void 0:ue.title)!=null?Be:"Raw"),o.createElement(be.Z,{className:Ee.title,variant:"h1"},(ct=$t.metadata.title)!=null?ct:$t.metadata.name)),o.createElement(re.Z,{dividers:!0,className:Ee.root},o.createElement(ie.Z,{orientation:"vertical",variant:"scrollable",value:$e,onChange:(it,Rt)=>qe(Rt),"aria-label":"API definition options",className:Ee.tabs},ue?o.createElement(ve.Z,{label:ue.title,...Xt(Ue++)}):null,o.createElement(ve.Z,{label:"Raw",...Xt(Ue++)})),ue?o.createElement(Nt,{value:$e,index:nt++},ue.component($t.spec.definition)):null,o.createElement(Nt,{value:$e,index:nt++},o.createElement(Le,{definition:$t.spec.definition,language:(Ot=ue==null?void 0:ue.rawLanguage)!=null?Ot:$t.spec.type}))),o.createElement(Ce.Z,null,o.createElement(u.Z,{onClick:Ct,color:"primary"},"Close")))}function Ft(){return{title:"Type",field:"spec.type",render:Ie=>o.createElement(Je,{apiEntity:Ie})}}const yt=({apiEntity:Ie})=>{const[Be,ct]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,o.createElement(r.Z,{"aria-label":"Toggle API Definition Dialog",onClick:()=>ct(!Be)},o.createElement(R.Z,null)),o.createElement(Ht,{entity:Ie,open:Be,onClose:()=>ct(!1)}))};function Tt(){return{title:"API Definition",render:Ie=>o.createElement(yt,{apiEntity:Ie})}}const wt=[W.u3.columns.createEntityRefColumn({defaultKind:"API"}),W.u3.columns.createSystemColumn(),W.u3.columns.createOwnerColumn(),Ft(),W.u3.columns.createSpecLifecycleColumn(),W.u3.columns.createMetadataDescriptionColumn(),Tt()],Jt=Ie=>{const{variant:Be="gridItem",columns:ct=wt}=Ie,{entity:Ot}=(0,tt.u)(),{entities:bt,loading:$t,error:Ct}=(0,W.eK)(Ot,{type:F.Dg});return $t?o.createElement(m.rJ,{variant:Be,title:"Consumed APIs"},o.createElement(m.Ex,null)):Ct||!bt?o.createElement(m.rJ,{variant:Be,title:"Consumed APIs"},o.createElement(m.GB,{severity:"error",title:"Could not load APIs",message:o.createElement(m.Oi,{text:`${Ct}`,language:"text"})})):o.createElement(W.u3,{title:"Consumed APIs",variant:Be,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(be.Z,{variant:"body1"},"This ",Ot.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),o.createElement(be.Z,{variant:"body2"},o.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:ct,entities:bt})},Ae=[W.u3.columns.createEntityRefColumn({defaultKind:"API"}),W.u3.columns.createOwnerColumn(),Ft(),W.u3.columns.createSpecLifecycleColumn(),W.u3.columns.createMetadataDescriptionColumn()],j=Ie=>{const{variant:Be="gridItem",columns:ct=Ae}=Ie,{entity:Ot}=(0,tt.u)(),{entities:bt,loading:$t,error:Ct}=(0,W.eK)(Ot,{type:F.aS,kind:"API"});return $t?o.createElement(m.rJ,{variant:Be,title:"APIs"},o.createElement(m.Ex,null)):Ct||!bt?o.createElement(m.rJ,{variant:Be,title:"APIs"},o.createElement(m.GB,{severity:"error",title:"Could not load APIs",message:o.createElement(m.Oi,{text:`${Ct}`,language:"text"})})):o.createElement(W.u3,{title:"APIs",variant:Be,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(be.Z,{variant:"body1"},"This ",Ot.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),o.createElement(be.Z,{variant:"body2"},o.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:ct,entities:bt})},E=Ie=>{const{variant:Be="gridItem",columns:ct=wt}=Ie,{entity:Ot}=(0,tt.u)(),{entities:bt,loading:$t,error:Ct}=(0,W.eK)(Ot,{type:F.M_});return $t?o.createElement(m.rJ,{variant:Be,title:"Provided APIs"},o.createElement(m.Ex,null)):Ct||!bt?o.createElement(m.rJ,{variant:Be,title:"Provided APIs"},o.createElement(m.GB,{severity:"error",title:"Could not load APIs",message:o.createElement(m.Oi,{text:`${Ct}`,language:"text"})})):o.createElement(W.u3,{title:"Provided APIs",variant:Be,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(be.Z,{variant:"body1"},"This ",Ot.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),o.createElement(be.Z,{variant:"body2"},o.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:ct,entities:bt})},N=Ie=>{const{variant:Be="gridItem"}=Ie,{entity:ct}=(0,tt.u)(),{entities:Ot,loading:bt,error:$t}=(0,W.eK)(ct,{type:F.X9});return bt?o.createElement(m.rJ,{variant:Be,title:"Consumers"},o.createElement(m.Ex,null)):$t||!Ot?o.createElement(m.rJ,{variant:Be,title:"Consumers"},o.createElement(m.GB,{severity:"error",title:"Could not load components",message:o.createElement(m.Oi,{text:`${$t}`,language:"text"})})):o.createElement(W.u3,{title:"Consumers",variant:Be,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(be.Z,{variant:"body1"},"No component consumes this API."),o.createElement(be.Z,{variant:"body2"},o.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:W.u3.componentEntityColumns,entities:Ot})},Q=Ie=>{const{variant:Be="gridItem"}=Ie,{entity:ct}=(0,tt.u)(),{entities:Ot,loading:bt,error:$t}=(0,W.eK)(ct,{type:F.Zj});return bt?o.createElement(m.rJ,{variant:Be,title:"Providers"},o.createElement(m.Ex,null)):$t||!Ot?o.createElement(m.rJ,{variant:Be,title:"Providers"},o.createElement(m.GB,{severity:"error",title:"Could not load components",message:o.createElement(m.Oi,{text:`${$t}`,language:"text"})})):o.createElement(W.u3,{title:"Providers",variant:Be,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(be.Z,{variant:"body1"},"No component provides this API."),o.createElement(be.Z,{variant:"body2"},o.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:W.u3.componentEntityColumns,entities:Ot})},q=(0,Y.rx)({id:"api-docs",routes:{root:M},apis:[(0,Y.ni)({api:se,deps:{},factory:()=>{const Ie=Wt();return{getApiDefinitionWidget:Be=>Ie.find(ct=>ct.type===Be.spec.type)}}})],externalRoutes:{registerApi:g}}),Ge=q.provide((0,Y.P4)({name:"ApiExplorerPage",component:()=>e.e(9591).then(e.bind(e,49591)).then(Ie=>Ie.ApiExplorerIndexPage),mountPoint:M})),Z=q.provide((0,Y.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(9640).then(e.bind(e,49640)).then(Ie=>Ie.ApiDefinitionCard)}})),x=q.provide((0,Y.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(2190).then(e.bind(e,32190)).then(Ie=>Ie.ConsumedApisCard)}})),he=q.provide((0,Y.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(8229).then(e.bind(e,98229)).then(Ie=>Ie.ConsumingComponentsCard)}})),Fe=q.provide((0,Y.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(2190).then(e.bind(e,32190)).then(Ie=>Ie.ProvidedApisCard)}})),mt=q.provide((0,Y.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(8229).then(e.bind(e,98229)).then(Ie=>Ie.ProvidingComponentsCard)}})),Qt=q.provide((0,Y.CO)({name:"EntityHasApisCard",component:{lazy:()=>e.e(2190).then(e.bind(e,32190)).then(Ie=>Ie.HasApisCard)}}))},75650:($n,Vt,e)=>{"use strict";e.d(Vt,{j8:()=>V,x7:()=>Y});var o=e(5083);const p="catalog-entity",m=(0,o.J$)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:p}),Y=(0,o.J$)({name:"catalog.entity.create",attributes:{action:"create"}}),V=(0,o.J$)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:p}),D=(0,o.J$)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:p}),W=(0,o.J$)({name:"catalog.location.read",attributes:{action:"read"}}),tt=(0,o.J$)({name:"catalog.location.create",attributes:{action:"create"}}),Xe=(0,o.J$)({name:"catalog.location.delete",attributes:{action:"delete"}}),r=[m,Y,V,D,W,tt,Xe]},98487:($n,Vt,e)=>{"use strict";e.d(Vt,{Az:()=>L,Ho:()=>_e,Nm:()=>M,_U:()=>Le,t0:()=>pt,vw:()=>R});var o=e(34520),p=e(49558),m=e(30705),Y=e(30204),V=e(79692),D=e(60364),W=e(4614),tt=e(72779),Xe=e.n(tt),r=e(2784),Ve=e(10368),be=e(64304),X=e(39412),k=e(48760),s=e(14162),ne=e.n(s),re=e(69294);const ie=(0,Ve.Z)(fe=>({text:{fill:fe.palette.textContrast},secondary:{fill:fe.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function ve({edge:{relations:fe}}){const zt=ie();return r.createElement("text",{className:zt.text,textAnchor:"middle"},fe.map((Et,Dt)=>r.createElement("tspan",{key:Et,className:Xe()(Dt>0&&zt.secondary)},Dt>0&&r.createElement("tspan",null," / "),Et)))}function Ce({kind:fe,...zt}){var Et;const Wt=(Et=(0,m.qD)().getSystemIcon(`kind:${fe.toLocaleLowerCase("en-US")}`))!=null?Et:X.Z;return r.createElement(Wt,{...zt})}const u=(0,V.Z)(fe=>({node:{fill:fe.palette.grey[300],stroke:fe.palette.grey[300],"&.primary":{fill:fe.palette.primary.light,stroke:fe.palette.primary.light},"&.secondary":{fill:fe.palette.secondary.light,stroke:fe.palette.secondary.light}},text:{fill:fe.palette.getContrastText(fe.palette.grey[300]),"&.primary":{fill:fe.palette.primary.contrastText},"&.secondary":{fill:fe.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function F({node:{id:fe,entity:zt,color:Et="default",focused:Dt,onClick:Wt}}){const Je=u(),[_t,Nt]=(0,r.useState)(0),[Xt,Ht]=(0,r.useState)(0),Ft=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{if(Ft.current){let{height:Ge,width:Z}=Ft.current.getBBox();Ge=Math.round(Ge),Z=Math.round(Z),(Ge!==Xt||Z!==_t)&&(Nt(Z),Ht(Ge))}},[_t,Xt]);const{kind:yt,metadata:{name:Tt,namespace:wt=o.zG,title:Jt}}=zt,Ae=10,j=Xt,E=yt?j+Ae:0,N=E+_t+Ae*2,Q=Xt+Ae*2,q=Jt!=null?Jt:yt&&Tt&&wt?(0,be.$3)({kind:yt,name:Tt,namespace:wt}):fe;return r.createElement("g",{onClick:Wt,className:Xe()(Wt&&Je.clickable)},r.createElement("rect",{className:Xe()(Je.node,Et==="primary"&&"primary",Et==="secondary"&&"secondary"),width:N,height:Q,rx:10}),yt&&r.createElement(Ce,{kind:yt,y:Ae,x:Ae,width:j,height:j,className:Xe()(Je.text,Dt&&"focused",Et==="primary"&&"primary",Et==="secondary"&&"secondary")}),r.createElement("text",{ref:Ft,className:Xe()(Je.text,Dt&&"focused",Et==="primary"&&"primary",Et==="secondary"&&"secondary"),y:Q/2,x:E+(_t+Ae*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},q))}const R=[[o.$1,o.S4],[o.Dg,o.X9],[o.Zj,o.M_],[o.aS,o.cz],[o._b,o.wP],[o.KS,o.hr],[o.nP,o.w$]];var M=(fe=>(fe.TOP_BOTTOM="TB",fe.BOTTOM_TOP="BT",fe.LEFT_RIGHT="LR",fe.RIGHT_LEFT="RL",fe))(M||{});const g=ne()(10);function Ne(){const fe=(0,Y.u)(be.Ah),zt=(0,r.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[Et,Dt]=(0,r.useState)({}),Wt=(0,r.useCallback)(()=>{const{cachedEntities:Ft,requestedEntities:yt}=zt.current,Tt={};yt.forEach(wt=>{const Jt=Ft.get(wt);Jt&&(Tt[wt]=Jt)}),Dt(Tt)},[zt,Dt]),[Je,_t]=(0,re.default)(async()=>{const{requestedEntities:Ft,outstandingEntities:yt,cachedEntities:Tt}=zt.current;await Promise.all(Array.from(Ft).map(wt=>g(async()=>{if(Tt.has(wt))return;if(yt.has(wt)){await yt.get(wt);return}const Jt=fe.getEntityByRef(wt);yt.set(wt,Jt);try{const Ae=await Jt;Ae&&(Tt.set(wt,Ae),Wt())}finally{yt.delete(wt)}})))},[zt,Wt]),{loading:Nt,error:Xt}=Je,Ht=(0,r.useCallback)(Ft=>{const yt=new Set(Ft),{requestedEntities:Tt}=zt.current;(yt.size!==Tt.size||Array.from(yt).some(wt=>!Tt.has(wt)))&&(zt.current.requestedEntities=yt,_t(),Wt())},[zt,_t,Wt]);return{entities:Et,loading:Nt,error:Xt,requestEntities:Ht}}function Oe({rootEntityRefs:fe,filter:{maxDepth:zt=Number.POSITIVE_INFINITY,relations:Et,kinds:Dt}={}}){const{entities:Wt,loading:Je,error:_t,requestEntities:Nt}=Ne();return(0,r.useEffect)(()=>{const Xt=new Set([...fe]),Ht=new Set;let Ft=[...fe],yt=0;for(;Ft.length>0&&(!isFinite(zt)||yt<zt);){const Tt=Ft;for(Ft=[];Tt.length>0;){const wt=Tt.shift(),Jt=Wt[wt];if(Ht.add(wt),Jt&&Jt.relations)for(const Ae of Jt.relations)(!Et||Et.includes(Ae.type))&&(!Dt||Dt.some(j=>Ae.targetRef.startsWith(`${j.toLocaleLowerCase("en-US")}:`)))&&(Ht.has(Ae.targetRef)||(Ft.push(Ae.targetRef),Xt.add(Ae.targetRef)))}++yt}Nt([...Xt])},[Wt,fe,zt,Et,Dt,Nt]),{entities:Wt,loading:Je,error:_t}}function Qe({rootEntityRefs:fe,maxDepth:zt=Number.POSITIVE_INFINITY,unidirectional:Et=!0,mergeRelations:Dt=!0,kinds:Wt,relations:Je,onNodeClick:_t,relationPairs:Nt=R}){const[Xt,Ht]=(0,r.useState)({}),{entities:Ft,loading:yt,error:Tt}=Oe({rootEntityRefs:fe,filter:{maxDepth:zt,kinds:Wt,relations:Je}});return(0,k.Z)(()=>{var wt;if(!Ft||Object.keys(Ft).length===0){Ht({});return}const Jt=Object.entries(Ft).map(([N,Q])=>{const q=fe.includes(N),Ge={id:N,entity:Q,focused:q,color:q?"secondary":"primary",kind:Q.kind,name:Q.metadata.name,namespace:Q.metadata.namespace||o.zG,title:Q.metadata.title,spec:Q.spec};return _t&&(Ge.onClick=Z=>_t(Ge,Z)),Ge}),Ae=[],j=new Set,E=[...fe];for(;E.length>0;){const N=E.pop(),Q=Ft[N];j.add(N),Q&&((wt=Q==null?void 0:Q.relations)==null||wt.forEach(q=>{var Ge;if(Ft[q.targetRef]&&!(Je&&!Je.includes(q.type))&&!(Wt&&!Wt.some(Z=>q.targetRef.startsWith(`${Z.toLocaleLowerCase("en-US")}:`)))){if(!Et||!j.has(q.targetRef))if(Dt){const Z=(Ge=Nt.find(([he,Fe])=>he===q.type||Fe===q.type))!=null?Ge:[q.type],[x]=Z;Ae.push({from:x===q.type?N:q.targetRef,to:x===q.type?q.targetRef:N,relations:Z,label:"visible"})}else Ae.push({from:N,to:q.targetRef,relations:[q.type],label:"visible"});j.has(q.targetRef)||(E.push(q.targetRef),j.add(q.targetRef))}}))}Ht({nodes:Jt,edges:Ae})},100,[Ft,fe,Wt,Je,Et,Dt,_t,Nt]),{loading:yt,error:Tt,...Xt}}const se=(0,V.Z)(fe=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${fe.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),Le=fe=>{const{rootEntityNames:zt,maxDepth:Et=2,unidirectional:Dt=!0,mergeRelations:Wt=!0,kinds:Je,relations:_t,direction:Nt=M.LEFT_RIGHT,onNodeClick:Xt,relationPairs:Ht=R,className:Ft,zoom:yt="enabled",renderNode:Tt,renderLabel:wt,curve:Jt}=fe,Ae=(0,D.Z)(),j=se(),E=(0,r.useMemo)(()=>(Array.isArray(zt)?zt:[zt]).map(x=>(0,o.eE)(x)),[zt]),N=(0,Y.u)(Y.s),{loading:Q,error:q,nodes:Ge,edges:Z}=Qe({rootEntityRefs:E,maxDepth:Et,unidirectional:Dt,mergeRelations:Wt,kinds:Je,relations:_t,onNodeClick:Xt,relationPairs:Ht});return(0,r.useEffect)(()=>{q&&N.post(q)},[N,q]),r.createElement("div",{className:Xe()(j.container,Ft)},Q&&r.createElement(W.Z,{className:j.progress}),Ge&&Z&&r.createElement(p.mn,{nodes:Ge,edges:Z,renderNode:Tt||F,renderLabel:wt||ve,direction:Nt,className:j.graph,paddingX:Ae.spacing(4),paddingY:Ae.spacing(4),labelPosition:p.NX.LabelPosition.RIGHT,labelOffset:Ae.spacing(1),zoom:yt,curve:Jt}))},_e=(0,m.NT)({id:"catalog-graph"}),Ke=(0,m.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),St=(0,m.rx)({id:"catalog-graph",routes:{catalogGraph:_e},externalRoutes:{catalogEntity:Ke}}),L=St.provide((0,m.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(9842).then(e.bind(e,59842)).then(fe=>fe.CatalogGraphCard)}})),pt=St.provide((0,m.P4)({name:"CatalogGraphPage",component:()=>e.e(1440).then(e.bind(e,71440)).then(fe=>fe.CatalogGraphPage),mountPoint:_e}))},84241:($n,Vt,e)=>{"use strict";e.d(Vt,{C:()=>u,a:()=>Xe,c:()=>Ce,d:()=>Ve,g:()=>be});var o=e(30204),p=e(30705),m=e(49462),Y=e(64304),V=e(89393),D=e(49431),W=e(82717),tt=e.n(W);const Xe=(0,o.c)({id:"plugin.catalog-import.service"}),r=(F,R)=>{const M=F.github.byUrl(R);if(!M)return;const{name:g,owner:Ne}=tt()(R);return{repo:g,owner:Ne,githubIntegrationConfig:M.config}};function Ve(F){const{ref:R,...M}=F;return{inputRef:R,...M}}function be(F){var R;return(R=F.getOptionalString("catalog.import.entityFilename"))!=null?R:"catalog-info.yaml"}function X(F){var R;return(R=F.getOptionalString("catalog.import.pullRequestBranchName"))!=null?R:"backstage-integration"}var k=Object.defineProperty,s=(F,R,M)=>R in F?k(F,R,{enumerable:!0,configurable:!0,writable:!0,value:M}):F[R]=M,ne=(F,R,M)=>(s(F,typeof R!="symbol"?R+"":R,M),M);class re{constructor(R){ne(this,"discoveryApi"),ne(this,"identityApi"),ne(this,"scmAuthApi"),ne(this,"scmIntegrationsApi"),ne(this,"catalogApi"),ne(this,"configApi"),this.discoveryApi=R.discoveryApi,this.scmAuthApi=R.scmAuthApi,this.identityApi=R.identityApi,this.scmIntegrationsApi=R.scmIntegrationsApi,this.catalogApi=R.catalogApi,this.configApi=R.configApi}async analyzeUrl(R){var M;if(new URL(R).pathname.match(/\.ya?ml$/)||(M=new URL(R).searchParams.get("path"))!=null&&M.match(/.ya?ml$/)){const Oe=await this.catalogApi.addLocation({type:"url",target:R,dryRun:!0});return{type:"locations",locations:[{exists:Oe.exists,target:Oe.location.target,entities:Oe.entities.map(Qe=>{var se;return{kind:Qe.kind,namespace:(se=Qe.metadata.namespace)!=null?se:"default",name:Qe.metadata.name}})}]}}if(!r(this.scmIntegrationsApi,R)){const Oe=this.scmIntegrationsApi.byUrl(R),Qe=be(this.configApi);throw Oe?new Error(`The ${Oe.title} integration only supports full URLs to ${Qe} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${Qe} file instead.`)}const Ne=await this.analyzeLocation({repo:R});if(Ne.existingEntityFiles.length>0){const Oe=Ne.existingEntityFiles.reduce((Qe,se)=>{var Le;return Qe[se.location.target]={target:se.location.target,exists:se.isRegistered,entities:[...se.location.target in Qe?Qe[se.location.target].entities:[],{name:se.entity.metadata.name,namespace:(Le=se.entity.metadata.namespace)!=null?Le:"default",kind:se.entity.kind}]},Qe},{});return{type:"locations",locations:Object.values(Oe)}}return{type:"repository",integrationType:"github",url:R,generatedEntities:Ne.generateEntities.map(Oe=>Oe.entity)}}async preparePullRequest(){var R;const M=(R=this.configApi.getOptionalString("app.title"))!=null?R:"Backstage",g=this.configApi.getString("app.baseUrl");return{title:`Add ${be(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${M} software catalog](${g}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(R){const{repositoryUrl:M,fileContent:g,title:Ne,body:Oe}=R,Qe=r(this.scmIntegrationsApi,M);if(Qe)return await this.submitGitHubPrToRepo({...Qe,repositoryUrl:M,fileContent:g,title:Ne,body:Oe});throw new Error("unimplemented!")}async analyzeLocation(R){const{token:M}=await this.identityApi.getCredentials(),g=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...M&&{Authorization:`Bearer ${M}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:R.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(Oe=>{throw new Error(`Failed to generate entity definitions, ${Oe.message}`)});if(!g.ok)throw new Error(`Failed to generate entity definitions. Received http response ${g.status}: ${g.statusText}`);return await g.json()}async submitGitHubPrToRepo(R){const{owner:M,repo:g,title:Ne,body:Oe,fileContent:Qe,repositoryUrl:se,githubIntegrationConfig:Le}=R,{token:_e}=await this.scmAuthApi.getCredentials({url:se,additionalScope:{repoWrite:!0}}),Ke=new V.v({auth:_e,baseUrl:Le.apiBaseUrl}),St=X(this.configApi),L=be(this.configApi),pt=await Ke.repos.get({owner:M,repo:g}).catch(Et=>{throw new Error(ie("Couldn't fetch repo data",Et))}),fe=await Ke.git.getRef({owner:M,repo:g,ref:`heads/${pt.data.default_branch}`}).catch(Et=>{throw new Error(ie("Couldn't fetch default branch data",Et))});return await Ke.git.createRef({owner:M,repo:g,ref:`refs/heads/${St}`,sha:fe.data.object.sha}).catch(Et=>{throw new Error(ie(`Couldn't create a new branch with name '${St}'`,Et))}),await Ke.repos.createOrUpdateFileContents({owner:M,repo:g,path:L,message:Ne,content:D.DS.encode(Qe),branch:St}).catch(Et=>{throw new Error(ie(`Couldn't create a commit with ${L} file added`,Et))}),{link:(await Ke.pulls.create({owner:M,repo:g,title:Ne,head:St,body:Oe,base:pt.data.default_branch}).catch(Et=>{throw new Error(ie(`Couldn't create a pull request for ${St} branch`,Et))})).data.html_url,location:`https://${Le.host}/${M}/${g}/blob/${pt.data.default_branch}/${L}`}}}function ie(F,R){return`${F}, received http response status code ${R.status}: ${R.message}`}const ve=(0,p.NT)({id:"catalog-import"}),Ce=(0,p.rx)({id:"catalog-import",apis:[(0,p.ni)({api:Xe,deps:{discoveryApi:o.q,scmAuthApi:m.Om,identityApi:o.v,scmIntegrationsApi:m.q3,catalogApi:Y.Ah,configApi:o.p},factory:({discoveryApi:F,scmAuthApi:R,identityApi:M,scmIntegrationsApi:g,catalogApi:Ne,configApi:Oe})=>new re({discoveryApi:F,scmAuthApi:R,scmIntegrationsApi:g,identityApi:M,catalogApi:Ne,configApi:Oe})})],routes:{importPage:ve}}),u=Ce.provide((0,p.P4)({name:"CatalogImportPage",component:()=>e.e(3591).then(e.bind(e,23591)).then(F=>F.ImportPage),mountPoint:ve}))},78373:($n,Vt,e)=>{"use strict";e.d(Vt,{A:()=>W,a:()=>r,g:()=>V,u:()=>Xe});var o=e(34520),p=e(30705),m=e(18473),Y=e(2784);function V(Ve,be,X){var k;let s=((k=Ve==null?void 0:Ve.relations)==null?void 0:k.filter(ne=>ne.type===be).map(ne=>(0,o.of)(ne.targetRef)))||[];return X!=null&&X.kind&&(s=s.filter(ne=>ne.kind.toLocaleLowerCase("en-US")===X.kind.toLocaleLowerCase("en-US"))),s}const D=(0,m.CT)("entity-context"),W=Ve=>{const{children:be,entity:X,loading:k,error:s,refresh:ne}=Ve,re={entity:X,loading:k,error:s,refresh:ne};return Y.createElement(D.Provider,{value:(0,m.EI)({1:re})},Y.createElement(p.fC,{attributes:{...X?{entityRef:(0,o.eE)(X)}:void 0}},be))},tt=Ve=>React.createElement(W,{entity:Ve.entity,loading:!Boolean(Ve.entity),error:void 0,refresh:void 0,children:Ve.children});function Xe(){const Ve=(0,m.Vt)("entity-context");if(!Ve)throw new Error("Entity context is not available");const be=Ve.atVersion(1);if(!be)throw new Error("EntityContext v1 not available");if(!be.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:be.entity}}function r(){const Ve=(0,m.Vt)("entity-context");if(!Ve)throw new Error("Entity context is not available");const be=Ve.atVersion(1);if(!be)throw new Error("EntityContext v1 not available");const{entity:X,loading:k,error:s,refresh:ne}=be;return{entity:X,loading:k,error:s,refresh:ne}}},64304:($n,Vt,e)=>{"use strict";e.d(Vt,{_i:()=>_n,co:()=>nr,tW:()=>hn,df:()=>Rn,UO:()=>me,ph:()=>Ra,dq:()=>ta,nl:()=>za,dx:()=>hr,rI:()=>ot,nN:()=>cr,u3:()=>Re,xE:()=>At,sL:()=>Mt,LH:()=>Mn,U_:()=>Wr,sk:()=>Ga,pp:()=>ha,EW:()=>Ao,Ah:()=>It,n8:()=>tn,XI:()=>an,wi:()=>rr,CV:()=>gr,$3:()=>tr,p3:()=>bn,wp:()=>ye,ZW:()=>en,Uh:()=>le,eK:()=>Pe,CR:()=>We});var o=e(30204),p=e(30705),m=e(34520),Y=e(43642),V=e(77224),D=e(15933),W=e(86737),tt=e(78898),Xe=e(4989),r=e(44407),Ve=e(84219),be=e(98685),X=e(72579),k=e.n(X),s=e(2784),ne=e(82394),re=e(41156),ie=e(60364),ve=e(77277),Ce=e(4190),u=e(95544),F=e(90436),R=e(60905),M=e(21324),g=e(5806),Ne=e(79692),Oe=e(86619),Qe=e(80030),se=e(15223),Le=e(42494),_e=e(29611),Ke=e(50581),St=e(61837),L=e(15459),pt=e(55999),fe=e(49378),zt=e(54506),Et=e(94339),Dt=e(24579),Wt=e(38402),Je=e(86136),_t=e(11776),Nt=e(9520),Xt=e(8629),Ht=e(79249),Ft=e(38724),yt=e(99152),Tt=e(6487),wt=e(49429),Jt=e(85256),Ae=e(12231),j=e(36444),E=e(49558),N=e(78373),Q=e(76635),q=e(19126),Ge=e.n(q),Z=e(73557),x=e(69294),he=e(48760),Fe=e(90736),mt=e(64279),Qt=e(18149),Ie=e.n(Qt),Be=e(829),ct=e.n(Be),Ot=e(72164),bt=e(38016),$t=e(88013),Ct=e(99688),$e=e(19996),qe=e(25505),Ee=e(72779),G=e.n(Ee);function ue(v){(0,s.useEffect)(()=>{v()},[])}function Ue(v){const S=(0,s.useRef)(v);return S.current=v,(0,s.useMemo)(()=>Object.freeze({get current(){return S.current}}),[])}function nt(v){const S=Ue(v);(0,s.useEffect)(()=>()=>{S.current()},[])}function it(v,S,I,U=0){const de=(0,s.useRef)(),Te=(0,s.useRef)(),je=(0,s.useRef)(),ze=()=>{de.current&&(clearTimeout(de.current),de.current=void 0),Te.current&&(clearTimeout(Te.current),Te.current=void 0)};return nt(ze),(0,s.useMemo)(()=>{const dt=()=>{if(!je.current)return;const Lt=je.current;je.current=void 0,v.apply(Lt.this,Lt.args),ze()},Zt=function(...Lt){de.current&&clearTimeout(de.current),je.current={args:Lt,this:this},de.current=setTimeout(dt,I),U>0&&!Te.current&&(Te.current=setTimeout(dt,U))};return Object.defineProperties(Zt,{length:{value:v.length},name:{value:`${v.name||"anonymous"}__debounced__${I}`}}),Zt},[I,U,...S])}function Rt(v,S,I,U=0){(0,s.useEffect)(it(v,S,I,U),S)}var qt=e(62367),nn=e(18473),we=e(33375),De=e(21853),w=e(11640),H=e(28347),te=e(39412),ut=e(27685),K=e(3440),ee=e.n(K),He=e(10921),lt=e(32272),Bt=e(47603);const It=(0,o.c)({id:"plugin.catalog.service"}),an=(0,o.c)({id:"plugin.catalog.entity-presentation"}),on=W.Z,fn={api:D.Z,component:r.Z,system:V.Z,domain:Y.Z,location:Xe.Z,user:be.Z,group:Ve.Z,template:tt.Z};function tn(v,S){const{kind:I,namespace:U,name:de,title:Te,description:je,displayName:ze,type:dt}=cn(v),Zt=I&&fn[I.toLocaleLowerCase("en-US")]||on,Lt=(0,m.eE)({kind:I||"unknown",namespace:U||m.zG,name:de||"unknown"}),mn=ln({kind:I,namespace:U,name:de,context:S}),Tn=[ze,Te,mn].find(yn=>yn&&typeof yn=="string"),vn=[Tn!==Lt?Lt:void 0,dt,je].filter(yn=>yn&&typeof yn=="string").join(" | ");return{entityRef:Lt,primaryTitle:Tn,secondaryTitle:vn||void 0,Icon:Zt}}function cn(v){if(typeof v=="string"){let S=v.indexOf(":");const I=v.indexOf("/");I!==-1&&I<S&&(S=-1);const U=S===-1?void 0:v.slice(0,S),de=I===-1?void 0:v.slice(S+1,I),Te=v.slice(Math.max(S+1,I+1));return{kind:U,namespace:de,name:Te}}if(typeof v=="object"&&v!==null){const S=[k()(v,"kind")].find(dt=>dt&&typeof dt=="string"),I=[k()(v,"metadata.namespace"),k()(v,"namespace")].find(dt=>dt&&typeof dt=="string"),U=[k()(v,"metadata.name"),k()(v,"name")].find(dt=>dt&&typeof dt=="string"),de=[k()(v,"metadata.title")].find(dt=>dt&&typeof dt=="string"),Te=[k()(v,"metadata.description")].find(dt=>dt&&typeof dt=="string"),je=[k()(v,"spec.profile.displayName")].find(dt=>dt&&typeof dt=="string"),ze=[k()(v,"spec.type")].find(dt=>dt&&typeof dt=="string");return{kind:S,namespace:I,name:U,title:de,description:Te,displayName:je,type:ze}}return{}}function ln(v){var S,I,U,de,Te;const je=((S=v.kind)==null?void 0:S.toLocaleLowerCase("en-US"))||"unknown",ze=v.namespace||m.zG,dt=v.name||"unknown",Zt=(U=(I=v.context)==null?void 0:I.defaultKind)==null?void 0:U.toLocaleLowerCase("en-US"),Lt=(Te=(de=v.context)==null?void 0:de.defaultNamespace)==null?void 0:Te.toLocaleLowerCase("en-US");let mn=dt;return(Lt&&ze.toLocaleLowerCase("en-US")!==Lt||ze!==m.zG)&&(mn=`${ze}/${mn}`),Zt&&je.toLocaleLowerCase("en-US")!==Zt&&(mn=`${je}:${mn}`),mn}function wn(v,S,I){const[U,de]=(0,s.useState)(v);return(0,s.useEffect)(()=>{de(v);const Te=S==null?void 0:S.subscribe({next:je=>{de(je)},complete:()=>{Te==null||Te.unsubscribe()}});return()=>{Te==null||Te.unsubscribe()}},I),U}function dn(v,S){const U=(0,o.b)().get(an),de=[U,JSON.stringify(v),JSON.stringify(S||null)],Te=(0,s.useMemo)(()=>U?U.forEntity(typeof v=="string"||"metadata"in v?v:(0,m.eE)(v),S):{snapshot:tn(v,S)},de);return wn(Te.snapshot,Te.update$,[Te])}const bn=(0,o.c)({id:"catalog-react.starred-entities"});var ce=Object.defineProperty,ae=(v,S,I)=>S in v?ce(v,S,{enumerable:!0,configurable:!0,writable:!0,value:I}):v[S]=I,Ze=(v,S,I)=>(ae(v,typeof S!="symbol"?S+"":S,I),I);class Pt{constructor(){Ze(this,"starredEntities",new Set),Ze(this,"subscribers",new Set),Ze(this,"observable",new ObservableImpl(S=>(S.next(new Set(this.starredEntities)),this.subscribers.add(S),()=>{this.subscribers.delete(S)})))}async toggleStarred(S){this.starredEntities.delete(S)||this.starredEntities.add(S);for(const I of this.subscribers)I.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const Gt=v=>{var S,I;const U=(0,re.Z)(ze=>{var dt,Zt;return ze.breakpoints.down((Zt=(dt=v.options)==null?void 0:dt.drawerBreakpoint)!=null?Zt:"md")}),de=(0,ie.Z)(),[Te,je]=(0,s.useState)(!1);return U?s.createElement(s.Fragment,null,s.createElement(ve.Z,{style:{marginTop:de.spacing(1),marginLeft:de.spacing(1)},onClick:()=>je(!0),startIcon:s.createElement(j.Z,null)},"Filters"),s.createElement(Ce.ZP,{open:Te,onClose:()=>je(!1),anchor:(I=(S=v.options)==null?void 0:S.drawerAnchor)!=null?I:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},s.createElement(u.Z,{m:2},s.createElement(F.Z,{variant:"h6",component:"h2",style:{marginBottom:de.spacing(1)}},"Filters"),v.children))):s.createElement(R.Z,{item:!0,lg:2},v.children)},jt=v=>s.createElement(R.Z,{item:!0,xs:12,lg:10},v.children),_n=v=>s.createElement(R.Z,{container:!0,style:{position:"relative"}},v.children);_n.Filters=Gt,_n.Content=jt;function Wn(v){return v.reduce((S,I)=>({...S,...I.getCatalogFilters?I.getCatalogFilters():{}}),{})}function Gn(v){const S={};return v.forEach(I=>{var U;I instanceof wr||I instanceof Tr||I instanceof oe||I instanceof Ye||I instanceof rt||I instanceof _||I instanceof Or||I instanceof C||Object.assign(S,((U=I.getCatalogFilters)==null?void 0:U.call(I))||{})}),S}function dr(v){return S=>v.every(I=>!I.filterEntity||I.filterEntity(S))}function gr(v,S){var I;const U=(I=v.metadata.annotations)==null?void 0:I[m.M6];if(U)try{const de=(0,m.Ou)(U),Te=S.byUrl(de.target);return{locationTargetUrl:de.target,integrationType:Te==null?void 0:Te.type}}catch{return}}var Jn=Object.defineProperty,pr=(v,S,I)=>S in v?Jn(v,S,{enumerable:!0,configurable:!0,writable:!0,value:I}):v[S]=I,Pr=(v,S,I)=>(pr(v,typeof S!="symbol"?S+"":S,I),I);class Lr{constructor(S){this.value=S}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class vr{constructor(S){this.value=S}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class wr{constructor(S){this.values=S}filterEntity(S){return this.values.every(I=>{var U;return((U=S.metadata.tags)!=null?U:[]).includes(I)})}getCatalogFilters(){return{"metadata.tags":this.values}}toQueryValue(){return this.values}}class Or{constructor(S){this.value=S}filterEntity(S){const I=this.toUpperArray(this.value.split(/\s/)),U=this.toUpperArray([S.metadata.tags]),de=this.toUpperArray([S.metadata.name,S.metadata.title]);for(const Te of I)if(U.every(je=>je!==Te)&&de.every(je=>!je.includes(Te)))return!1;return!0}toUpperArray(S){return S.flat().filter(I=>Boolean(I)).map(I=>I.toLocaleUpperCase("en-US"))}}class Tr{constructor(S){Pr(this,"values"),this.values=S.reduce((I,U)=>{try{return I.push((0,m.eE)((0,m.of)(U,{defaultKind:"Group"}))),I}catch{return I}},[])}getCatalogFilters(){return{"relations.ownedBy":this.values}}filterEntity(S){return this.values.some(I=>(0,N.g)(S,m.S4).some(U=>(0,m.eE)(U)===I))}toQueryValue(){return this.values}}class oe{constructor(S){this.values=S}getCatalogFilters(){return{"spec.lifecycle":this.values}}filterEntity(S){return this.values.some(I=>{var U;return((U=S.spec)==null?void 0:U.lifecycle)===I})}toQueryValue(){return this.values}}class Ye{constructor(S){this.values=S}getCatalogFilters(){return{"metadata.namespace":this.values}}filterEntity(S){return this.values.some(I=>S.metadata.namespace===I)}toQueryValue(){return this.values}}class rt{constructor(S,I){this.value=S,this.refs=I}static owned(S){return new rt("owned",S)}static all(){return new rt("all")}static starred(S){return new rt("starred",S)}getCatalogFilters(){var S,I,U;return this.value==="owned"?{"relations.ownedBy":(S=this.refs)!=null?S:[]}:this.value==="starred"?{"metadata.name":(U=(I=this.refs)==null?void 0:I.map(de=>(0,m.of)(de).name))!=null?U:[]}:{}}filterEntity(S){var I,U,de,Te;if(this.value==="starred")return(U=(I=this.refs)==null?void 0:I.includes((0,m.eE)(S)))!=null?U:!0;if(this.value==="owned"){const je=(0,N.g)(S,m.S4);return(Te=(de=this.refs)==null?void 0:de.some(ze=>je.some(dt=>(0,m.eE)(dt)===ze)))!=null?Te:!1}return!0}toQueryValue(){return this.value}}class C{constructor(S,I,U){this.value=S,this.isOwnedEntity=I,this.isStarredEntity=U}filterEntity(S){switch(this.value){case"owned":return this.isOwnedEntity(S);case"starred":return this.isStarredEntity(S);default:return!0}}toQueryValue(){return this.value}}class _{constructor(S){this.value=S}getCatalogFilters(){return this.value?{"metadata.annotations.backstage.io/orphan":String(this.value)}:{}}filterEntity(S){var I;const U=(I=S.metadata.annotations)==null?void 0:I["backstage.io/orphan"];return U!==void 0&&this.value.toString()===U}}class O{constructor(S){this.value=S}filterEntity(S){var I,U;const de=((U=(I=S==null?void 0:S.status)==null?void 0:I.items)==null?void 0:U.length)>0;return de!==void 0&&this.value===de}}const T=(0,s.createContext)(void 0),me=v=>{const S=(0,Fe.default)(),I=(0,o.u)(It),[U,de]=(0,s.useState)({}),Te=(0,Z.TH)(),je=(0,s.useMemo)(()=>{var yn;return(yn=Ge().parse(Te.search,{ignoreQueryPrefix:!0}).filters)!=null?yn:{}},[Te]),[ze,dt]=(0,s.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[]})),[{loading:Zt,error:Lt},mn]=(0,x.default)(async()=>{var yn;const jn=(0,Q.compact)(Object.values(U)),Pn=dr(jn),Xn=Gn(jn),Nn=Gn((0,Q.compact)(Object.values(ze.appliedFilters))),Un=Object.keys(U).reduce((Kn,er)=>{const fr=U[er];return fr!=null&&fr.toQueryValue&&(Kn[er]=fr.toQueryValue()),Kn},{});if((0,Q.isEqual)(Nn,Xn))dt({appliedFilters:U,backendEntities:ze.backendEntities,entities:ze.backendEntities.filter(Pn)});else{const Kn=await I.getEntities({filter:Xn});dt({appliedFilters:U,backendEntities:Kn.items,entities:Kn.items.filter(Pn)})}if(S()){const Kn=Ge().parse(Te.search,{ignoreQueryPrefix:!0}),er=Ge().stringify({...Kn,filters:Un},{addQueryPrefix:!0,arrayFormat:"repeat"}),fr=`${window.location.pathname}${er}`;(yn=window.history)==null||yn.replaceState(null,document.title,fr)}},[I,je,U,ze],{loading:!0});(0,he.Z)(mn,10,[U]);const Tn=(0,s.useCallback)(yn=>{de(jn=>{const Pn=typeof yn=="function"?yn(jn):yn;return{...jn,...Pn}})},[]),vn=(0,s.useMemo)(()=>({filters:ze.appliedFilters,entities:ze.entities,backendEntities:ze.backendEntities,updateFilters:Tn,queryParameters:je,loading:Zt,error:Lt}),[ze,Tn,je,Zt,Lt]);return s.createElement(T.Provider,{value:vn},v.children)};function ye(){const v=(0,s.useContext)(T);if(!v)throw new Error("useEntityList must be used within EntityListProvider");return v}function le(){var v;const S=(0,o.u)(It),{filters:{kind:I,type:U},queryParameters:{type:de},updateFilters:Te}=ye(),je=(0,s.useMemo)(()=>[de].flat().filter(Boolean),[de]),[ze,dt]=(0,s.useState)(je.length?je:(v=U==null?void 0:U.getTypes())!=null?v:[]);(0,s.useEffect)(()=>{je.length&&dt(je)},[je]);const[Zt,Lt]=(0,s.useState)([]),mn=(0,s.useMemo)(()=>I==null?void 0:I.value,[I]),{error:Tn,loading:vn,value:yn}=(0,mt.default)(async()=>mn?await S.getEntityFacets({filter:{kind:mn},facets:["spec.type"]}).then(Xn=>Xn.facets["spec.type"]||[]):[],[mn,S]),jn=(0,s.useRef)(yn);return(0,s.useEffect)(()=>{const Pn=jn.current;if(jn.current=yn,vn||!mn||Pn===yn||!yn)return;const Xn=[...new Set(ct()(yn,Un=>-Un.count).map(Un=>Un.value.toLocaleLowerCase("en-US")))];Lt(Xn);const Nn=ze.filter(Un=>Xn.includes(Un));Ie()(ze,Nn)||dt(Nn)},[vn,mn,ze,dt,yn]),(0,s.useEffect)(()=>{Te({type:ze.length?new vr(ze):void 0})},[ze,Te]),{loading:vn,error:Tn,availableTypes:Zt,selectedTypes:ze,setSelectedTypes:dt}}function Pe(v,S){var I,U;const de=(I=S==null?void 0:S.type)==null?void 0:I.toLocaleLowerCase("en-US"),Te=(U=S==null?void 0:S.kind)==null?void 0:U.toLocaleLowerCase("en-US"),je=(0,o.u)(It),{loading:ze,value:dt,error:Zt}=(0,mt.default)(async()=>{var Lt;const mn=(Lt=v.relations)==null?void 0:Lt.filter(vn=>(!de||vn.type.toLocaleLowerCase("en-US")===de)&&(!Te||(0,m.of)(vn.targetRef).kind===Te));if(!(mn!=null&&mn.length))return[];const{items:Tn}=await je.getEntitiesByRefs({entityRefs:mn.map(vn=>vn.targetRef)});return Tn.filter(vn=>Boolean(vn))},[v,de,Te]);return{entities:dt,loading:ze,error:Zt}}function ke(v){return typeof v=="string"?v:(0,m.eE)(v)}function We(){const v=(0,o.u)(bn),S=(0,Ot.Z)((0,s.useMemo)(()=>v.starredEntitie$(),[v]),new Set),I=(0,s.useCallback)(de=>S.has(ke(de)),[S]),U=(0,s.useCallback)(de=>v.toggleStarred(ke(de)).then(),[v]);return{starredEntities:S,toggleStarredEntity:U,isStarredEntity:I}}function ht(v){return typeof v=="string"?v:(0,m.eE)(v)}function rn(v){const S=(0,o.u)(bn),[I,U]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{const Te=S.starredEntitie$().subscribe({next(je){U(je.has(ht(v)))}});return()=>{Te.unsubscribe()}},[v,S]),{toggleStarredEntity:(0,s.useCallback)(()=>S.toggleStarred(ht(v)).then(),[v,S]),isStarredEntity:I}}function en(){const v=(0,o.u)(o.v),{loading:S,value:I}=(0,mt.default)(async()=>{const{ownershipEntityRefs:de}=await v.getBackstageIdentity();return de},[]),U=(0,s.useMemo)(()=>{const de=new Set(I!=null?I:[]);return Te=>{const je=(0,N.g)(Te,m.S4).map(m.eE);for(const ze of je)if(de.has(ze))return!0;return!1}},[I]);return{loading:S,isOwnedEntity:U}}function Ut(){const v=(0,o.u)(It),{error:S,loading:I,value:U}=(0,mt.default)(async()=>await v.getEntityFacets({facets:["kind"]}).then(Te=>{var je;return((je=Te.facets.kind)==null?void 0:je.map(ze=>ze.value).sort())||[]}),[v]);return{loading:I,error:S,allKinds:U!=null?U:[]}}function gn(v,S,I){let U=v;return S&&(U=U.filter(Te=>S.some(je=>je.toLocaleLowerCase("en-US")===Te.toLocaleLowerCase("en-US")))),I&&!v.some(Te=>Te.toLocaleLowerCase("en-US")===I.toLocaleLowerCase("en-US"))&&(U=U.concat([I])),U.sort().reduce((Te,je)=>(Te[je.toLocaleLowerCase("en-US")]=je,Te),{})}function pn(v){var S,I;const{filters:U,queryParameters:{kind:de},updateFilters:Te}=ye(),je=(0,s.useMemo)(()=>[de].flat()[0],[de]),[ze,dt]=(0,s.useState)((I=je!=null?je:(S=U.kind)==null?void 0:S.value)!=null?I:v.initialFilter);(0,s.useEffect)(()=>{je&&dt(je)},[je]),(0,s.useEffect)(()=>{var Tn,vn;(Tn=U.kind)!=null&&Tn.value&&dt((vn=U.kind)==null?void 0:vn.value)},[U.kind]),(0,s.useEffect)(()=>{Te({kind:ze?new Lr(ze):void 0})},[ze,Te]);const{allKinds:Zt,loading:Lt,error:mn}=Ut();return{loading:Lt,error:mn,allKinds:Zt!=null?Zt:[],selectedKind:ze,setSelectedKind:dt}}const hn=v=>{const{allowedKinds:S,hidden:I,initialFilter:U="component"}=v,de=(0,o.u)(o.l),{error:Te,allKinds:je,selectedKind:ze,setSelectedKind:dt}=pn({initialFilter:U});if((0,s.useEffect)(()=>{Te&&de.post({message:"Failed to load entity kinds",severity:"error"})},[Te,de]),Te)return null;const Zt=gn(je,S,ze),Lt=Object.keys(Zt).map(mn=>({value:mn,label:Zt[mn]}));return I?null:s.createElement(u.Z,{pb:1,pt:1},s.createElement(E.Ph,{label:"Kind",items:Lt,selected:ze.toLocaleLowerCase("en-US"),onChange:mn=>dt(String(mn))}))},En=s.createElement(qe.Z,{fontSize:"small"}),Cn=s.createElement($e.Z,{fontSize:"small"});function Yn({selected:v}){return s.createElement(M.Z,{icon:En,checkedIcon:Cn,checked:v})}const Hn=(0,s.memo)(v=>{const{selected:S,value:I,availableOptions:U,showCounts:de}=v,Te=de?`${I} (${U==null?void 0:U[I]})`:I;return s.createElement(g.Z,{control:s.createElement(Yn,{selected:S}),label:Te,onClick:je=>je.preventDefault()})}),In=(0,Ne.Z)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function Ln(v){const S=In();return s.createElement(Oe.Z,{variant:"outlined",...v,className:G()(S.input,v.className)})}function Zn(v){var S,I;const{label:U,name:de,path:Te,showCounts:je,Filter:ze,InputProps:dt,initialSelectedOptions:Zt=[]}=v,{updateFilters:Lt,filters:mn,queryParameters:{[de]:Tn}}=ye(),vn=(0,o.u)(It),{value:yn}=(0,mt.default)(async()=>{var er;const fr=Te,{facets:sa}=await vn.getEntityFacets({facets:[fr],filter:(er=mn.kind)==null?void 0:er.getCatalogFilters()});return Object.fromEntries(sa[fr].map(({value:La,count:Jr})=>[La,Jr]))},[mn.kind]),jn=(0,s.useMemo)(()=>[Tn].flat().filter(Boolean),[Tn]),[Pn,Xn]=(0,s.useState)(jn.length?jn:(I=(S=mn[de])==null?void 0:S.values)!=null?I:Zt);(0,s.useEffect)(()=>{jn.length&&Xn(jn)},[jn]);const Nn=Object.keys(yn!=null?yn:{}),Un=Pn.length&&Nn.length;(0,s.useEffect)(()=>{Lt({[de]:Un?new ze(Pn):void 0})},[de,Un,Pn,ze,Lt]);const Kn=mn[de];return Kn&&typeof Kn=="object"&&!("values"in Kn)||!Nn.length||Nn.length<=1?null:s.createElement(u.Z,{pb:1,pt:1},s.createElement(F.Z,{variant:"button",component:"label"},U,s.createElement($t.ZP,{multiple:!0,disableCloseOnSelect:!0,options:Nn,value:Pn,onChange:(er,fr)=>Xn(fr),renderOption:(er,{selected:fr})=>s.createElement(Hn,{selected:fr,value:er,availableOptions:yn,showCounts:!!je}),size:"small",popupIcon:s.createElement(bt.Z,{"data-testid":`${String(de)}-picker-expand`}),renderInput:er=>s.createElement(Ln,{...er,...dt})})))}const sn=(0,Ne.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),Rn=v=>{const{initialFilter:S=[]}=v,I=sn();return s.createElement(Zn,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:oe,InputProps:{className:I.input},initialSelectedOptions:S})};function tr(v,S){const I=S==null?void 0:S.defaultKind;let U,de,Te;return"metadata"in v?(U=v.kind,de=v.metadata.namespace,Te=v.metadata.name):(U=v.kind,de=v.namespace,Te=v.name),(de===void 0||de==="")&&(de=m.zG),(S==null?void 0:S.defaultNamespace)!==void 0?(S==null?void 0:S.defaultNamespace)===de&&(de=void 0):de===m.zG&&(de=void 0),U=U.toLocaleLowerCase("en-US"),U=I&&I.toLocaleLowerCase("en-US")===U?void 0:U,`${U?`${U}:`:""}${de?`${de}/`:""}${Te}`}function ir(v,S){for(const I of["spec.profile.displayName","metadata.title"]){const U=k()(v,I);if(U&&typeof U=="string")return U}return S}function Cr({enabled:v}){const S=(0,o.u)(It),[I]=(0,s.useState)(async()=>{if(!v)return[];const U="relations.ownedBy";return S.getEntityFacets({facets:[U]}).then(de=>de.facets[U].map(Te=>Te.value).map(Te=>{const{kind:je,name:ze,namespace:dt}=(0,m.of)(Te);return{apiVersion:"backstage.io/v1beta1",kind:je,metadata:{name:ze,namespace:dt}}}).sort((Te,je)=>(Te.metadata.namespace||"").localeCompare(je.metadata.namespace||"","en-US")||Te.metadata.name.localeCompare(je.metadata.name,"en-US")||Te.kind.localeCompare(je.kind,"en-US"))).catch(()=>[])});return(0,x.default)(async(U,de)=>{var Te;const je=await I;if(!je)return{items:[]};const ze=(Te=de==null?void 0:de.limit)!=null?Te:20,{text:dt,start:Zt}=Mr(U),Lt=je.filter(Tn=>kr(dt,Tn)),mn=Zt+ze;return{items:Lt.slice(0,mn),...Vr({entities:Lt,limit:mn,payload:{text:dt,start:mn}})}},[I],{loading:!0,value:{items:[]}})}function Mr(v){return Rr(v)&&v.cursor?JSON.parse(atob(v.cursor)):{text:v.text||"",start:0}}function Rr(v){return!!v.cursor}function Vr({entities:v,limit:S,payload:I}){return v.length>S?{cursor:btoa(JSON.stringify(I))}:{}}function kr(v,S){var I;const U=v.trim();return S.kind.includes(U)||((I=S.metadata.namespace)==null?void 0:I.includes(U))||S.metadata.name.includes(U)}function Ur(){const v=(0,o.u)(It);return(0,x.default)(async(S,I)=>{var U;const de=S,Te=S,je=(U=I==null?void 0:I.limit)!=null?U:20;if(Te.cursor){const dt=await v.queryEntities({cursor:Te.cursor,limit:je});return{cursor:dt.pageInfo.nextCursor,items:[...Te.items,...dt.items]}}const ze=await v.queryEntities({fullTextFilter:{term:de.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:je});return{cursor:ze.pageInfo.nextCursor,items:ze.items}},[],{loading:!0})}function Nr({mode:v,initialSelectedOwnersRefs:S}){const I=v==="owners-only",U=Ur(),de=Cr({enabled:I}),[Te,je]=I?de:U;return[Te,je,Hr({enabled:!I,initialSelectedOwnersRefs:S})]}function Hr({enabled:v,initialSelectedOwnersRefs:S}){const I=(0,s.useRef)({}),U=(0,o.u)(It),[,de]=(0,x.default)(async()=>{(await U.getEntitiesByRefs({entityRefs:S})).items.forEach(je=>{je&&(I.current[(0,m.eE)(je)]=je)})},[]);return ue(()=>{v&&S.length>0&&de()}),{getEntity:Te=>I.current[Te],setEntity:Te=>{I.current[(0,m.eE)(Te)]=Te}}}const qr=(0,Ne.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),ea=s.createElement(qe.Z,{fontSize:"small"}),pa=s.createElement($e.Z,{fontSize:"small"}),ta=v=>{var S,I,U;const de=qr(),{mode:Te="owners-only"}=v||{},{updateFilters:je,filters:ze,queryParameters:{owners:dt}}=ye(),[Zt,Lt]=(0,s.useState)(""),mn=(0,s.useMemo)(()=>[dt].flat().filter(Boolean),[dt]),[Tn,vn]=(0,s.useState)(mn.length?mn:(I=(S=ze.owners)==null?void 0:S.values)!=null?I:[]),[{value:yn,loading:jn},Pn,Xn]=Nr({mode:Te,initialSelectedOwnersRefs:Tn});Rt(()=>Pn({text:Zt}),[Zt,Pn],250);const Nn=(yn==null?void 0:yn.items)||[];return(0,s.useEffect)(()=>{if(mn.length){const Un=new Tr(mn);vn(Un.values)}},[mn]),(0,s.useEffect)(()=>{je({owners:Tn.length?new Tr(Tn):void 0})},[Tn,je]),["user","group"].includes(((U=ze.kind)==null?void 0:U.value.toLocaleLowerCase("en-US"))||"")?null:s.createElement(u.Z,{pb:1,pt:1},s.createElement(F.Z,{variant:"button",component:"label"},"Owner",s.createElement($t.ZP,{multiple:!0,disableCloseOnSelect:!0,loading:jn,options:Nn,value:Tn,getOptionSelected:(Un,Kn)=>typeof Kn=="string"?(0,m.eE)(Un)===Kn:Un===Kn,getOptionLabel:Un=>{const Kn=typeof Un=="string"?Xn.getEntity(Un)||(0,m.of)(Un,{defaultKind:"group",defaultNamespace:"default"}):Un;return ir(Kn,tr(Kn))},onChange:(Un,Kn)=>{Lt(""),vn(Kn.map(er=>{const fr=typeof er=="string"?er:(0,m.eE)(er);return typeof er!="string"&&Xn.setEntity(er),fr}))},filterOptions:Un=>Un,renderOption:(Un,{selected:Kn})=>{const er=Un.kind.toLocaleLowerCase("en-US")==="group";return s.createElement(g.Z,{control:s.createElement(M.Z,{icon:ea,checkedIcon:pa,checked:Kn}),onClick:fr=>fr.preventDefault(),label:s.createElement(u.Z,{display:"flex",flexWrap:"wrap",alignItems:"center"},er?s.createElement(qt.Z,{fontSize:"small"}):s.createElement(be.Z,{fontSize:"small"}),"\xA0",ir(Un,tr(Un,{defaultKind:Un.kind})))})},size:"small",popupIcon:s.createElement(bt.Z,{"data-testid":"owner-picker-expand"}),renderInput:Un=>s.createElement(Oe.Z,{...Un,className:de.input,onChange:Kn=>{Lt(Kn.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:Un=>{const Kn=Un.currentTarget;Math.abs(Kn.scrollHeight-Kn.clientHeight-Kn.scrollTop)<1&&(yn!=null&&yn.cursor)&&Pn({items:yn.items,cursor:yn.cursor})},"data-testid":"owner-picker-listbox"}})))},yr=(0,Ne.Z)(v=>({root:{display:"inline-flex",alignItems:"center"},icon:{marginRight:v.spacing(.5),color:v.palette.text.secondary,lineHeight:0}}),{name:"CatalogReactEntityDisplayName"}),nr=v=>{const{entityRef:S,hideIcon:I,disableTooltip:U,defaultKind:de,defaultNamespace:Te}=v,je=yr(),{primaryTitle:ze,secondaryTitle:dt,Icon:Zt}=dn(S,{defaultKind:de,defaultNamespace:Te});let Lt=s.createElement(s.Fragment,null,ze);return Lt=s.createElement(u.Z,{component:"span",className:je.root},Zt&&!I?s.createElement(u.Z,{component:"span",className:je.icon},s.createElement(Zt,{fontSize:"inherit"})):null,Lt),dt&&!U&&(Lt=s.createElement(Qe.ZP,{enterDelay:1500,title:dt},Lt)),Lt},rr=(0,nn.uW)("catalog:entity-route-ref",()=>(0,p.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function ua(v){var S,I;return{kind:v.kind.toLocaleLowerCase("en-US"),namespace:(I=(S=v.metadata.namespace)==null?void 0:S.toLocaleLowerCase("en-US"))!=null?I:DEFAULT_NAMESPACE,name:v.metadata.name}}const hr=(0,s.forwardRef)((v,S)=>{var I;const{entityRef:U,defaultKind:de,defaultNamespace:Te,title:je,children:ze,hideIcon:dt,...Zt}=v,Lt=da(v.entityRef),mn=(I=ze!=null?ze:je)!=null?I:s.createElement(nr,{entityRef:U,defaultKind:de,defaultNamespace:Te,hideIcon:dt});return s.createElement(E.rU,{...Zt,ref:S,to:Lt},mn)});function da(v){var S;const I=(0,p.tg)(rr);let U,de,Te;if(typeof v=="string"){const ze=(0,m.of)(v);U=ze.kind,de=ze.namespace,Te=ze.name}else"metadata"in v?(U=v.kind,de=v.metadata.namespace,Te=v.metadata.name):(U=v.kind,de=v.namespace,Te=v.name);U=U.toLocaleLowerCase("en-US"),de=(S=de==null?void 0:de.toLocaleLowerCase("en-US"))!=null?S:m.zG;const je={kind:encodeURIComponent(U),namespace:encodeURIComponent(de),name:encodeURIComponent(Te)};return I(je)}function ot(v){const{entityRefs:S,hideIcons:I,...U}=v;return s.createElement(s.Fragment,null,S.map((de,Te)=>{const je=typeof de=="string"?de:(0,m.eE)(de);return s.createElement(s.Fragment,{key:`${Te}.${je}`},Te>0&&", ",s.createElement(hr,{...U,entityRef:de,hideIcon:I}))}))}const pe=v=>{const S=useRouteRef(rr);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:S(getCompoundEntityRef(v.entity))},React.createElement(InfoIcon,null))},vt=v=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${v.email}`,to:`mailto:${v.email}`},React.createElement(EmailIcon,null)),An=v=>{var S;const I=(S=v.entity.spec.profile)==null?void 0:S.email;return I?React.createElement(vt,{email:I}):null},kn=v=>{var S;const I=(S=v.entity.spec.profile)==null?void 0:S.email;return I?React.createElement(vt,{email:I}):null},Qn=(0,Ne.Z)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),lr=4,Zr=v=>{var S,I,U,de;const{entityRef:Te,children:je,delayTime:ze=500}=v,dt=Qn(),Zt=useApiHolder(),Lt=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[mn,Tn]=useState(!1),vn=useMemo(()=>debounce(()=>Tn(!0),ze),[ze]),[{loading:yn,error:jn,value:Pn},Xn]=useAsyncFn(async()=>{const Un=Zt.get(It);if(Un){const Kn=await Un.getEntityByRef(Te);if(!Kn)throw new Error(`${Te} not found`);return Kn}},[Zt,Te]),Nn=()=>{Tn(!1),vn.cancel()};return useEffect(()=>{Lt.isOpen&&!Pn&&!jn&&!yn&&Xn()},[Lt.isOpen,Xn,Pn,jn,yn]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:vn},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(Lt)},je)),mn&&React.createElement(HoverPopover,{PaperProps:{className:dt.popoverPaper},...bindPopover(Lt),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:Nn},React.createElement(Card,null,React.createElement(CardContent,null,jn&&React.createElement(ResponseErrorPanel,{error:jn}),yn&&React.createElement(Progress,null),Pn&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},Pn.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},Pn.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},Pn.kind),Pn.metadata.description&&React.createElement(Typography,{className:dt.descriptionTypography,paragraph:!0},Pn.metadata.description),React.createElement(Typography,null,(I=(S=Pn.spec)==null?void 0:S.type)==null?void 0:I.toString()),React.createElement(Box,{marginTop:"0.5em"},(Pn.metadata.tags||[]).slice(0,lr).map(Un=>React.createElement(Chip,{key:Un,size:"small",label:Un})),((U=Pn.metadata.tags)==null?void 0:U.length)&&((de=Pn.metadata.tags)==null?void 0:de.length)>lr&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!jn&&Pn&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(Pn)&&React.createElement(kn,{entity:Pn}),isGroupEntity(Pn)&&React.createElement(An,{entity:Pn}),React.createElement(pe,{entity:Pn}))))))},Br=(0,Ne.Z)(v=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),cr=()=>{var v,S;const I=Br(),{filters:U,updateFilters:de}=ye(),[Te,je]=(0,s.useState)((S=(v=U.text)==null?void 0:v.value)!=null?S:"");return(0,he.Z)(()=>{de({text:Te.length?new Or(Te):void 0})},250,[Te,de]),s.createElement(se.Z,{className:I.searchToolbar},s.createElement(Le.Z,null,s.createElement(_e.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:I.input,placeholder:"Search",autoComplete:"off",onChange:ze=>je(ze.target.value),value:Te,startAdornment:s.createElement(Ke.Z,{position:"start"},s.createElement(De.Z,null)),endAdornment:s.createElement(Ke.Z,{position:"end"},s.createElement(St.Z,{"aria-label":"clear search",onClick:()=>je(""),edge:"end",disabled:Te.length===0},s.createElement(we.Z,null)))})))},y=Object.freeze({createEntityRefColumn(v){const{defaultKind:S}=v;function I(U){var de;return((de=U.metadata)==null?void 0:de.title)||tr(U,{defaultKind:S})}return{title:"Name",highlight:!0,customFilterAndSearch(U,de){return I(de).includes(U)},customSort(U,de){return I(U).localeCompare(I(de))},render:U=>{var de;return s.createElement(hr,{entityRef:U,defaultKind:S,title:(de=U.metadata)==null?void 0:de.title})}}},createEntityRelationColumn(v){const{title:S,relation:I,defaultKind:U,filter:de}=v;function Te(ze){return(0,N.g)(ze,I,de)}function je(ze){return Te(ze).map(dt=>tr(dt,{defaultKind:U})).join(", ")}return{title:S,customFilterAndSearch(ze,dt){return je(dt).includes(ze)},customSort(ze,dt){return je(ze).localeCompare(je(dt))},render:ze=>s.createElement(ot,{entityRefs:Te(ze),defaultKind:U})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:m.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:m.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:m.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:v=>s.createElement(E.Or,{text:v.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),l=[y.createEntityRefColumn({defaultKind:"system"}),y.createDomainColumn(),y.createOwnerColumn(),y.createMetadataDescriptionColumn()],b=[y.createEntityRefColumn({defaultKind:"component"}),y.createSystemColumn(),y.createOwnerColumn(),y.createSpecTypeColumn(),y.createSpecLifecycleColumn(),y.createMetadataDescriptionColumn()],B=(0,Ne.Z)(v=>({empty:{padding:v.spacing(2),display:"flex",justifyContent:"center"}})),Re=v=>{const{entities:S,title:I,emptyContent:U,variant:de="gridItem",columns:Te,tableOptions:je={}}=v,ze=B(),dt={minWidth:"0",width:"100%"};return de==="gridItem"&&(dt.height="calc(100% - 10px)"),s.createElement(E.iA,{columns:Te,title:I,style:dt,emptyContent:U&&s.createElement("div",{className:ze.empty},U),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...je},data:S})};Re.columns=y,Re.systemEntityColumns=l,Re.componentEntityColumns=b;const st=(0,Ne.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),At=v=>{const S=st();return s.createElement(Zn,{label:"Tags",name:"tags",path:"metadata.tags",Filter:wr,showCounts:v.showCounts,InputProps:{className:S.input}})},Mt=v=>{var S;const{hidden:I,initialFilter:U}=v,de=(0,o.u)(o.l),{error:Te,availableTypes:je,selectedTypes:ze,setSelectedTypes:dt}=le();if((0,s.useEffect)(()=>{Te&&de.post({message:"Failed to load entity types",severity:"error"}),U&&dt([U])},[Te,de,U,dt]),je.length===0||Te)return null;const Zt=[{value:"all",label:"all"},...je.map(Lt=>({value:Lt,label:Lt}))];return I?null:s.createElement(u.Z,{pb:1,pt:1},s.createElement(E.Ph,{label:"Type",items:Zt,selected:(S=Zt.length>1?ze[0]:void 0)!=null?S:"all",onChange:Lt=>dt(Lt==="all"?[]:[String(Lt)])}))},Sn=(0,L.Z)({root:{color:"#f3ba37"}})(w.Z),Mn=v=>{const{toggleStarredEntity:S,isStarredEntity:I}=rn(v.entity);return s.createElement(St.Z,{"aria-label":"favorite",color:"inherit",...v,onClick:()=>S()},s.createElement(Qe.ZP,{title:I?"Remove from favorites":"Add to favorites"},I?s.createElement(Sn,null):s.createElement(H.Z,null)))},xn=te.Z;function br(v,S){if(v)return v.toLocaleLowerCase("en-US");if(S)try{return(0,m.of)(S).kind.toLocaleLowerCase("en-US")}catch{return}}function Fr(v,S){const I=(0,p.qD)(),U=br(v,S);return U&&I.getSystemIcon(`kind:${U}`)||xn}function Yr(v){const{kind:S,entityRef:I,...U}=v,de=Fr(S,I);return s.createElement(de,{...U})}const oa=(0,Ne.Z)(v=>({node:{fill:v.palette.grey[300],stroke:v.palette.grey[300],"&.primary":{fill:v.palette.primary.light,stroke:v.palette.primary.light},"&.secondary":{fill:v.palette.secondary.light,stroke:v.palette.secondary.light}},text:{fill:v.palette.getContrastText(v.palette.grey[300]),"&.primary":{fill:v.palette.primary.contrastText},"&.secondary":{fill:v.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function oo(v){const S=(0,o.u)(It),I=(0,m.eE)(v),{loading:U,error:de,value:Te}=(0,mt.default)(async()=>{const je=await S.getEntityAncestors({entityRef:I}),ze=new Array,dt=new Array;for(const Zt of je.items){const Lt=(0,m.eE)(Zt.entity),mn=Lt===je.rootEntityRef;ze.push({id:Lt,root:mn,...Zt.entity});for(const Tn of Zt.parentEntityRefs)dt.push({from:Lt,to:Tn})}return{nodes:ze,edges:dt}},[I]);return{loading:U,error:de,nodes:(Te==null?void 0:Te.nodes)||[],edges:(Te==null?void 0:Te.edges)||[]}}function io({node:v}){const S=oa(),I=(0,Z.s0)(),U=(0,p.tg)(rr),[de,Te]=(0,s.useState)(0),[je,ze]=(0,s.useState)(0),dt=(0,s.useRef)(null);(0,s.useLayoutEffect)(()=>{if(dt.current){let{height:Pn,width:Xn}=dt.current.getBBox();Pn=Math.round(Pn),Xn=Math.round(Xn),(Pn!==je||Xn!==de)&&(Te(Xn),ze(Pn))}},[de,je]);const Zt=10,Lt=je,mn=Lt+Zt,Tn=mn+de+Zt*2,vn=je+Zt*2,yn=v.metadata.title||(v.kind&&v.metadata.name&&v.metadata.namespace?tr({kind:v.kind,name:v.metadata.name,namespace:v.metadata.namespace||""}):v.id),jn=()=>{I(U({kind:v.kind,namespace:v.metadata.namespace||m.zG,name:v.metadata.name}))};return s.createElement("g",{onClick:jn,className:S.clickable},s.createElement("rect",{className:G()(S.node,v.root?"secondary":"primary"),width:Tn,height:vn,rx:10}),s.createElement(Yr,{kind:v.kind,y:Zt,x:Zt,width:Lt,height:Lt,className:G()(S.text,v.root?"secondary":"primary")}),s.createElement("text",{ref:dt,className:G()(S.text,v.root?"secondary":"primary"),y:vn/2,x:mn+(de+Zt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},yn))}function Eo(v){const{loading:S,error:I,nodes:U,edges:de}=oo(v.entity);return S?s.createElement(E.Ex,null):I?s.createElement(E.Gk,{error:I}):s.createElement(s.Fragment,null,s.createElement(pt.Z,{variant:"h2"},"Ancestry"),s.createElement(pt.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",s.createElement(E.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),s.createElement(u.Z,{mt:4},s.createElement(E.mn,{nodes:U,edges:de,renderNode:io,direction:E.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const Ja=(0,Ne.Z)(v=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:v.spacing(2)},helpIcon:{marginLeft:v.spacing(1),color:v.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function na(v){const S=Ja();return s.createElement(fe.Z,{...v,primaryTypographyProps:{className:S.monospace},secondaryTypographyProps:{className:S.monospace}})}function ka(v){const S=Ja();return s.createElement(zt.Z,{className:S.monospace},v.children)}function Na(v){return s.createElement(u.Z,{mt:2},s.createElement(Et.Z,{variant:"outlined"},s.createElement(Dt.Z,null,s.createElement(F.Z,{variant:"h6",gutterBottom:!0},v.title,v.helpLink&&s.createElement(Oa,{to:v.helpLink})),v.children)))}function Xa(v){if(v.match(/^url:https?:\/\//))return v.slice(4);if(v.match(/^https?:\/\//))return v}function Fa(v){const[S,I]=v.entry,U=Xa(I);return s.createElement(Wt.Z,null,v.indent&&s.createElement(Je.Z,null),s.createElement(na,{primary:S,secondary:U?s.createElement(E.rU,{to:U},I):I}))}function Oa(v){const S=Ja();return s.createElement(E.rU,{to:v.to,className:S.helpIcon},s.createElement(ut.Z,{fontSize:"inherit"}))}const Pa=(0,Ne.Z)({root:{display:"flex",flexDirection:"column"}});function vo(v){var S,I;const U=(0,o.u)(It),de=(0,m.eE)(v),Te=(S=v.metadata.annotations)==null?void 0:S[m.P1],je=(I=v.metadata.annotations)==null?void 0:I[m.q1],{loading:ze,error:dt,value:Zt}=(0,mt.default)(async()=>!Te&&!je?[]:(await U.getEntities({filter:[...Te?[{[`metadata.annotations.${m.P1}`]:Te}]:[],...je?[{[`metadata.annotations.${m.q1}`]:je}]:[]]})).items,[Te,je]);return{loading:ze,error:dt,location:Te,originLocation:je,colocatedEntities:Zt==null?void 0:Zt.filter(Lt=>(0,m.eE)(Lt)!==de)}}function Wa(v){return s.createElement(_t.Z,{dense:!0},v.header&&s.createElement(Fa,{key:"header",entry:v.header}),v.entities.map(S=>s.createElement(Wt.Z,{key:(0,m.eE)(S)},s.createElement(Je.Z,null,s.createElement(Yr,{kind:S.kind})),s.createElement(na,{primary:s.createElement(hr,{entityRef:S})}))))}function Ta(v){const{entity:S}=v,{loading:I,error:U,location:de,originLocation:Te,colocatedEntities:je}=vo(S);if(I)return s.createElement(E.Ex,null);if(U)return s.createElement(E.Gk,{error:U});if(!de&&!Te)return s.createElement(Ct.Z,{severity:"warning"},"Entity had no location information.");if(!(je!=null&&je.length))return s.createElement(Ct.Z,{severity:"info"},"There were no other entities on this location.");if(de===Te)return s.createElement(Wa,{entities:je});const ze=je.filter(Zt=>{var Lt;return((Lt=Zt.metadata.annotations)==null?void 0:Lt[m.P1])===de}),dt=je.filter(Zt=>{var Lt;return((Lt=Zt.metadata.annotations)==null?void 0:Lt[m.q1])===Te});return s.createElement(s.Fragment,null,ze.length>0&&s.createElement(Wa,{entities:ze,header:["At the same location",de]}),dt.length>0&&s.createElement(Wa,{entities:dt,header:["At the same origin",Te]}))}function so(v){const S=Pa();return s.createElement(s.Fragment,null,s.createElement(pt.Z,{variant:"h2"},"Colocated"),s.createElement(pt.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),s.createElement("div",{className:S.root},s.createElement(Ta,{entity:v.entity})))}function Qa(v){return Object.fromEntries([...Object.entries(v)].sort((S,I)=>S[0]<I[0]?-1:1))}function yo(v){return s.createElement(s.Fragment,null,s.createElement(pt.Z,{variant:"h2"},"Entity as JSON"),s.createElement(pt.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),s.createElement(pt.Z,null,s.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},s.createElement(E.Oi,{text:JSON.stringify(Qa(v.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const bo=(0,Ne.Z)({root:{display:"flex",flexDirection:"column"}});function Co(v){var S,I,U;const de=bo(),{apiVersion:Te,kind:je,metadata:ze,spec:dt,relations:Zt=[],status:Lt={}}=v.entity,mn=ee()(ct()(Zt,vn=>vn.targetRef),"type"),Tn=(0,m.eE)(v.entity);return s.createElement(s.Fragment,null,s.createElement(pt.Z,{variant:"h2"},"Overview"),s.createElement("div",{className:de.root},s.createElement(Na,{title:"Identity"},s.createElement(_t.Z,{dense:!0},s.createElement(Wt.Z,null,s.createElement(na,{primary:"apiVersion",secondary:Te})),s.createElement(Wt.Z,null,s.createElement(na,{primary:"kind",secondary:je})),(dt==null?void 0:dt.type)&&s.createElement(Wt.Z,null,s.createElement(na,{primary:"spec.type",secondary:(S=dt.type)==null?void 0:S.toString()})),ze.uid&&s.createElement(Wt.Z,null,s.createElement(na,{primary:"uid",secondary:ze.uid}),s.createElement(Nt.Z,null,s.createElement(E.bj,{text:ze.uid}))),ze.etag&&s.createElement(Wt.Z,null,s.createElement(na,{primary:"etag",secondary:ze.etag}),s.createElement(Nt.Z,null,s.createElement(E.bj,{text:ze.etag}))),s.createElement(Wt.Z,null,s.createElement(na,{primary:"entityRef",secondary:Tn}),s.createElement(Nt.Z,null,s.createElement(E.bj,{text:Tn}))))),s.createElement(Na,{title:"Metadata"},!!Object.keys(ze.annotations||{}).length&&s.createElement(_t.Z,{dense:!0,subheader:s.createElement(ka,null,"Annotations",s.createElement(Oa,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(ze.annotations).map(vn=>s.createElement(Fa,{key:vn[0],indent:!0,entry:vn}))),!!Object.keys(ze.labels||{}).length&&s.createElement(_t.Z,{dense:!0,subheader:s.createElement(ka,null,"Labels")},Object.entries(ze.labels).map(vn=>s.createElement(Fa,{key:vn[0],indent:!0,entry:vn}))),!!((I=ze.tags)!=null&&I.length)&&s.createElement(_t.Z,{dense:!0,subheader:s.createElement(ka,null,"Tags")},ze.tags.map((vn,yn)=>s.createElement(Wt.Z,{key:`${vn}-${yn}`},s.createElement(Je.Z,null),s.createElement(na,{primary:vn}))))),!!Zt.length&&s.createElement(Na,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(mn).map(([vn,yn],jn)=>s.createElement("div",{key:jn},s.createElement(_t.Z,{dense:!0,subheader:s.createElement(ka,null,vn)},yn.map(Pn=>s.createElement(Wt.Z,{key:Pn.targetRef},s.createElement(Je.Z,null,s.createElement(Yr,{entityRef:Pn.targetRef})),s.createElement(na,{primary:s.createElement(hr,{entityRef:Pn.targetRef})}))))))),!!((U=Lt.items)!=null&&U.length)&&s.createElement(Na,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},Lt.items.map((vn,yn)=>s.createElement("div",{key:yn},s.createElement(F.Z,null,vn.level,": ",vn.type),s.createElement(u.Z,{ml:2},vn.message))))))}function Po(v){return s.createElement(s.Fragment,null,s.createElement(pt.Z,{variant:"h2"},"Entity as YAML"),s.createElement(pt.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),s.createElement(pt.Z,null,s.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},s.createElement(E.Oi,{text:He.ZP.stringify(Qa(v.entity)),language:"yaml",showCopyCodeButton:!0}))))}const ma=(0,Ne.Z)(v=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:v.palette.background.paper},tabs:{borderRight:`1px solid ${v.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Ia(v){const{children:S,value:I,index:U,...de}=v,Te=ma();return s.createElement("div",{role:"tabpanel",hidden:I!==U,id:`vertical-tabpanel-${U}`,"aria-labelledby":`vertical-tab-${U}`,className:Te.tabContents,...de},I===U&&s.createElement(u.Z,{pl:3,pr:3},S))}function Sa(v){return{id:`vertical-tab-${v}`,"aria-controls":`vertical-tabpanel-${v}`}}function Wr(v){const S=ma(),[I,U]=s.useState(0);return(0,s.useEffect)(()=>{U(0)},[v.open]),v.entity?s.createElement(Xt.Z,{fullWidth:!0,maxWidth:"xl",open:v.open,onClose:v.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:S.fullHeightDialog}},s.createElement(Ht.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),s.createElement(Ft.Z,{dividers:!0},s.createElement("div",{className:S.root},s.createElement(yt.Z,{orientation:"vertical",variant:"scrollable",value:I,onChange:(de,Te)=>U(Te),"aria-label":"Inspector options",className:S.tabs},s.createElement(Tt.Z,{label:"Overview",...Sa(0)}),s.createElement(Tt.Z,{label:"Ancestry",...Sa(1)}),s.createElement(Tt.Z,{label:"Colocated",...Sa(2)}),s.createElement(Tt.Z,{label:"Raw JSON",...Sa(3)}),s.createElement(Tt.Z,{label:"Raw YAML",...Sa(4)})),s.createElement(Ia,{value:I,index:0},s.createElement(Co,{entity:v.entity})),s.createElement(Ia,{value:I,index:1},s.createElement(Eo,{entity:v.entity})),s.createElement(Ia,{value:I,index:2},s.createElement(so,{entity:v.entity})),s.createElement(Ia,{value:I,index:3},s.createElement(yo,{entity:v.entity})),s.createElement(Ia,{value:I,index:4},s.createElement(Po,{entity:v.entity})))),s.createElement(wt.Z,null,s.createElement(ve.Z,{onClick:v.onClose,color:"primary"},"Close"))):null}function qa(v){var S;const I=(0,o.u)(It),U=(S=v.metadata.annotations)==null?void 0:S[m.q1],de=v.metadata.uid,Te=U==="bootstrap:bootstrap",je=(0,mt.default)(async()=>{const yn=I.getLocationByRef(U);let jn;if(!U)jn=Promise.resolve([]);else{const Pn=`metadata.annotations.${m.q1}`;jn=I.getEntities({filter:{[Pn]:U},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(Xn=>Xn.items)}return Promise.all([yn,jn]).then(([Pn,Xn])=>({location:Pn,colocatedEntities:Xn}))},[I,v]),ze=(0,s.useCallback)(async function(){const{location:jn}=je.value;await I.removeLocationById(jn.id)},[I,je]),dt=(0,s.useCallback)(async function(){await I.removeEntityByUid(de)},[I,de]);if(Te)return{type:"bootstrap",location:U,deleteEntity:dt};const{loading:Zt,error:Lt,value:mn}=je;if(Zt)return{type:"loading"};if(Lt)return{type:"error",error:Lt};const{location:Tn,colocatedEntities:vn}=mn;return Tn?{type:"unregister",location:U,colocatedEntities:vn.map(m.iB),unregisterLocation:ze,deleteEntity:dt}:{type:"only-delete",deleteEntity:dt}}const Ka=(0,Ne.Z)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),_a=({entity:v,onConfirm:S,onClose:I})=>{var U;const de=(0,o.u)(o.l),Te=(0,o.u)(o.p),je=Ka(),ze=qa(v),[dt,Zt]=(0,s.useState)(!1),[Lt,mn]=(0,s.useState)(!1),Tn=(U=Te.getOptionalString("app.title"))!=null?U:"Backstage",vn=(0,s.useCallback)(async function(){if("unregisterLocation"in ze){mn(!0);try{await ze.unregisterLocation(),S()}catch(Xn){(0,lt.BD)(Xn),de.post({message:Xn.message})}finally{mn(!1)}}},[de,S,ze]),yn=(0,s.useCallback)(async function(){var Xn;if("deleteEntity"in ze){mn(!0);try{await ze.deleteEntity();const Nn=(Xn=v.metadata.title)!=null?Xn:v.metadata.name;S(),de.post({message:`Removed entity ${Nn}`,severity:"success",display:"transient"})}catch(Nn){(0,lt.BD)(Nn),de.post({message:Nn.message})}finally{mn(!1)}}},[de,S,ze,v]),jn=()=>s.createElement(wt.Z,{className:je.dialogActions},s.createElement(ve.Z,{onClick:I,color:"primary"},"Cancel"));return ze.type==="loading"?s.createElement(E.Ex,null):ze.type==="error"?s.createElement(E.Gk,{error:ze.error}):ze.type==="bootstrap"?s.createElement(s.Fragment,null,s.createElement(Ct.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',ze.location,'"). If you believe this is in error, please contact the ',Tn," ","integrator."),s.createElement(u.Z,{marginTop:2},!dt&&s.createElement(s.Fragment,null,s.createElement(ve.Z,{variant:"text",size:"small",color:"primary",className:je.advancedButton,onClick:()=>Zt(!0)},"Advanced Options"),s.createElement(jn,null)),dt&&s.createElement(s.Fragment,null,s.createElement(pt.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),s.createElement(ve.Z,{variant:"contained",color:"secondary",disabled:Lt,onClick:yn},"Delete Entity"),s.createElement(jn,null)))):ze.type==="only-delete"?s.createElement(s.Fragment,null,s.createElement(pt.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),s.createElement(ve.Z,{variant:"contained",color:"secondary",disabled:Lt,onClick:yn},"Delete Entity"),s.createElement(jn,null)):ze.type==="unregister"?s.createElement(s.Fragment,null,s.createElement(pt.Z,null,"This action will unregister the following entities:"),s.createElement(pt.Z,{component:"ul"},ze.colocatedEntities.map(Pn=>s.createElement("li",{key:`${Pn.kind}:${Pn.namespace}/${Pn.name}`},s.createElement(hr,{entityRef:Pn})))),s.createElement(pt.Z,null,"Located at the following location:"),s.createElement(pt.Z,{component:"ul"},s.createElement("li",null,ze.location)),s.createElement(pt.Z,null,"To undo, just re-register the entity in ",Tn,"."),s.createElement(u.Z,{marginTop:2},s.createElement(ve.Z,{variant:"contained",color:"secondary",disabled:Lt,onClick:vn},"Unregister Location"),!dt&&s.createElement(u.Z,{component:"span",marginLeft:2},s.createElement(ve.Z,{variant:"text",size:"small",color:"primary",className:je.advancedButton,onClick:()=>Zt(!0)},"Advanced Options"))),dt&&s.createElement(s.Fragment,null,s.createElement(u.Z,{paddingTop:4,paddingBottom:4},s.createElement(Jt.Z,null)),s.createElement(pt.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),s.createElement(ve.Z,{variant:"contained",color:"secondary",disabled:Lt,onClick:yn},"Delete Entity"))):s.createElement(Ct.Z,{severity:"error"},"Internal error: Unknown state")},ha=v=>{const{open:S,onConfirm:I,onClose:U,entity:de}=v;return s.createElement(Xt.Z,{open:S,onClose:U},s.createElement(Ht.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),s.createElement(Ft.Z,null,s.createElement(_a,{entity:de,onConfirm:I,onClose:U})))};function Da(){const v=(0,o.u)(o.v),S=(0,o.u)(It),{filters:I}=ye(),{value:U,loading:de}=(0,mt.default)(async()=>(await v.getBackstageIdentity()).ownershipEntityRefs,[]),Te=(0,s.useRef)(),je=(0,s.useMemo)(()=>{const{user:Tn,owners:vn,...yn}=I,jn=(0,Q.compact)(Object.values(yn)),Pn=Wn(jn),{["metadata.name"]:Xn,...Nn}=Pn,Un=ga(vn,U);if((U==null?void 0:U.length)===0||Un===void 0||Object.keys(Nn).length===0){Te.current=void 0;return}const Kn={filter:{...Nn,"relations.ownedBy":Un},limit:0};return(0,Q.isEqual)(Kn,Te.current)?Te.current:(Te.current=Kn,Kn)},[I,U]),[{value:ze,loading:dt},Zt]=(0,x.default)(async(Tn,vn)=>{if(vn&&!Tn)return 0;const{totalItems:yn}=await S.queryEntities(Tn);return yn},[],{loading:!0});(0,s.useEffect)(()=>{if(U){if(je&&Object.keys(je).length===0)return;Zt(je,U)}},[Zt,je,U]);const Lt=de||dt,mn=(0,s.useMemo)(()=>rt.owned(U!=null?U:[]),[U]);return{count:ze,loading:Lt,filter:mn,ownershipEntityRefs:U}}function ga(v,S){var I;if(S===void 0)return;const U=(I=v==null?void 0:v.values)!=null?I:[];if(U.length){const de=(0,Q.intersection)(U,S);return de.length===0?void 0:de}return S}function ia(){const v=(0,o.u)(It),{filters:S}=ye(),I=(0,s.useRef)(),U=(0,s.useMemo)(()=>{const{user:je,...ze}=S,dt=(0,Q.compact)(Object.values(ze)),Zt=Wn(dt),Lt={filter:Zt,limit:0};return Object.keys(Zt).length===0?(I.current=void 0,I.current):(0,Q.isEqual)(Lt,I.current)?I.current:(I.current=Lt,Lt)},[S]),{value:de,loading:Te}=(0,mt.default)(async()=>{if(U===void 0)return 0;const{totalItems:je}=await v.queryEntities(U);return je},[U]);return{count:de,loading:Te}}function So(){const v=(0,o.u)(It),{filters:S}=ye(),{starredEntities:I}=We(),U=(0,s.useRef)(),de=(0,s.useMemo)(()=>{const{user:dt,...Zt}=S,Lt=(0,Q.compact)(Object.values(Zt)),vn={filter:{...Wn(Lt),["metadata.name"]:Array.from(I).map(yn=>(0,m.of)(yn).name)},limit:1e3};return(0,Q.isEqual)(vn,U.current)?U.current:(U.current=vn,vn)},[S,I]),{value:Te,loading:je}=(0,mt.default)(async()=>I.size?(await v.queryEntities(de)).items.map(Zt=>(0,m.eE)({kind:Zt.kind,namespace:Zt.metadata.namespace,name:Zt.metadata.name})).filter(Zt=>I.has(Zt)).length:0,[de,I]),ze=(0,s.useMemo)(()=>rt.starred(Array.from(I)),[I]);return{count:Te,loading:je,filter:ze}}const _o=(0,Ne.Z)(v=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:v.spacing(1,0,1,0)},title:{margin:v.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:v.palette.text.primary},menuItem:{minHeight:v.spacing(6)},groupWrapper:{margin:v.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function Ro(v){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:Bt.Z},{id:"starred",label:"Starred",icon:w.Z}]},{name:v!=null?v:"Company",items:[{id:"all",label:"All"}]}]}const Ao=v=>{var S;const{initialFilter:I,availableFilters:U}=v,de=_o(),je=(S=(0,o.u)(o.p).getOptionalString("organization.name"))!=null?S:"Company",{filters:ze,updateFilters:dt,queryParameters:{kind:Zt,user:Lt}}=ye(),mn=["starred","all"],Tn=Ro(je).map(Jr=>({...Jr,items:Jr.items.filter(({id:zr})=>["group","user"].some(Va=>Va===Zt)?mn.includes(zr):!U||U.includes(zr))})).filter(({items:Jr})=>!!Jr.length),{count:vn,loading:yn,filter:jn}=Da(),{count:Pn}=ia(),{count:Xn,filter:Nn,loading:Un}=So(),Kn=(0,s.useMemo)(()=>[Lt].flat()[0],[Lt]),[er,fr]=(0,s.useState)(Kn!=null?Kn:I),sa=(0,s.useMemo)(()=>({all:Pn,starred:Xn,owned:vn}),[Xn,vn,Pn]);(0,s.useEffect)(()=>{Kn&&fr(Kn)},[Kn]);const La=yn||Un;return(0,s.useEffect)(()=>{!La&&er&&er!=="all"&&sa[er]===0&&fr("all")},[La,sa,er,fr]),(0,s.useEffect)(()=>{if(!er||La)return;dt({user:(()=>er==="owned"?jn:er==="starred"?Nn:rt.all())()})},[er,Nn,jn,dt,La]),s.createElement(Et.Z,{className:de.root},Tn.map(Jr=>s.createElement(s.Fragment,{key:Jr.name},s.createElement(F.Z,{variant:"subtitle2",component:"span",className:de.title},Jr.name),s.createElement(Et.Z,{className:de.groupWrapper},s.createElement(_t.Z,{disablePadding:!0,dense:!0,role:"menu","aria-label":Jr.name},Jr.items.map(zr=>{var Va,to;return s.createElement(Ae.Z,{role:"none presentation",key:zr.id,divider:!0,onClick:()=>fr(zr.id),selected:zr.id===((Va=ze.user)==null?void 0:Va.value),className:de.menuItem,disabled:sa[zr.id]===0,"data-testid":`user-picker-${zr.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},zr.icon&&s.createElement(Je.Z,{className:de.listIcon},s.createElement(zr.icon,{fontSize:"small"})),s.createElement(fe.Z,null,s.createElement(F.Z,{variant:"body1"},zr.label," ")),s.createElement(Nt.Z,null,(to=sa[zr.id])!=null?to:"-"))}))))))},eo=(0,Ne.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),or=s.createElement(qe.Z,{fontSize:"small"}),Kr=s.createElement($e.Z,{fontSize:"small"}),za=()=>{const v=eo(),{updateFilters:S}=ye(),[I,U]=(0,s.useState)([]);function de(ze){S({orphan:ze?new _(ze):void 0})}function Te(ze){S({error:ze?new O(ze):void 0})}const je=["Is Orphan","Has Error"];return s.createElement(u.Z,{pb:1,pt:1},s.createElement(F.Z,{variant:"button",component:"label"},"Processing Status",s.createElement($t.ZP,{multiple:!0,disableCloseOnSelect:!0,options:je,value:I,onChange:(ze,dt)=>{U(dt),de(dt.includes("Is Orphan")),Te(dt.includes("Has Error"))},renderOption:(ze,{selected:dt})=>s.createElement(g.Z,{control:s.createElement(M.Z,{icon:or,checkedIcon:Kr,checked:dt}),onClick:Zt=>Zt.preventDefault(),label:ze}),size:"small",popupIcon:s.createElement(bt.Z,{"data-testid":"processing-status-picker-expand"}),renderInput:ze=>s.createElement(Oe.Z,{...ze,className:v.input,variant:"outlined"})})))},ra=(0,Ne.Z)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),Ra=()=>{const v=ra();return s.createElement(Zn,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:Ye,InputProps:{className:v.input}})},Aa=(0,Ne.Z)(v=>({code:{borderRadius:6,margin:v.spacing(2,0),background:v.palette.type==="dark"?"#444":v.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function wa(v,S){var I,U;const de=(S==null?void 0:S.kind)||"Component",Te=(S==null?void 0:S.metadata.name)||"example",je=((I=S==null?void 0:S.spec)==null?void 0:I.type)||"website",ze=((U=S==null?void 0:S.spec)==null?void 0:U.owner)||"user:default/guest",dt=`apiVersion: backstage.io/v1alpha1
kind: ${de}
metadata:
  name: ${Te}
  annotations:${v.map(mn=>`
    ${mn}: value`).join("")}
spec:
  type: ${je}
  owner: ${ze}`;let Zt=6;const Lt=[];return v.forEach(()=>{Lt.push(Zt),Zt++}),{yamlText:dt,lineNumbers:Lt}}function xa(v,S="Component"){const I=v.length<=1;return s.createElement(s.Fragment,null,"The ",I?"annotation":"annotations"," ",v.map(U=>s.createElement("code",null,U)).reduce((U,de)=>s.createElement(s.Fragment,null,U,", ",de))," ",I?"is":"are"," missing. You need to add the"," ",I?"annotation":"annotations"," to your ",S," if you want to enable this tool.")}function Ga(v){let S;try{S=(0,N.u)().entity}catch{}const{annotation:I,readMoreUrl:U}=v,de=Array.isArray(I)?I:[I],Te=U||"https://backstage.io/docs/features/software-catalog/well-known-annotations",je=Aa(),ze=(S==null?void 0:S.kind)||"Component",{yamlText:dt,lineNumbers:Zt}=wa(de,S);return s.createElement(E.ub,{missing:"field",title:"Missing Annotation",description:xa(de,ze),action:s.createElement(s.Fragment,null,s.createElement(F.Z,{variant:"body1"},"Add the annotation to your ",ze," YAML as shown in the highlighted example below:"),s.createElement(u.Z,{className:je.code},s.createElement(E.Oi,{text:dt,language:"yaml",showLineNumbers:!0,highlightedNumbers:Zt,customStyle:{background:"inherit",fontSize:"115%"}})),s.createElement(ve.Z,{color:"primary",component:E.rU,to:Te},"Read more"))})}function ja(v){var S;const{children:I,value:U}=v,[de,Te]=useState((S=U==null?void 0:U.filters)!=null?S:{}),je=useCallback(Zt=>{Te(Lt=>{const mn=typeof Zt=="function"?Zt(Lt):Zt;return{...Lt,...mn}})},[]),ze=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),dt=useMemo(()=>{var Zt,Lt,mn,Tn,vn;return{entities:(Zt=U==null?void 0:U.entities)!=null?Zt:ze.entities,backendEntities:(Lt=U==null?void 0:U.backendEntities)!=null?Lt:ze.backendEntities,updateFilters:(mn=U==null?void 0:U.updateFilters)!=null?mn:je,filters:de,loading:(Tn=U==null?void 0:U.loading)!=null?Tn:!1,queryParameters:(vn=U==null?void 0:U.queryParameters)!=null?vn:ze.queryParameters,error:U==null?void 0:U.error}},[U,ze,de,je]);return React.createElement(T.Provider,{value:dt},I)}},49477:($n,Vt,e)=>{"use strict";e.d(Vt,{C:()=>u});var o=e(34520),p=e(49558),m=e(64304),Y=e(78373),V=e(90436),D=e(15459),W=e(93750),tt=e(27604),Xe=e(2997),r=e(11640),Ve=e(28347),be=e(76635),X=e.n(be),k=e(19928),s=e.n(k),ne=e(2784),re=e(7089);const ie=Object.freeze({createNameColumn(F){function R(M){var g;return((g=M.metadata)==null?void 0:g.title)||(0,m.$3)(M,{defaultKind:F==null?void 0:F.defaultKind})}return{title:"Name",field:"resolved.entityRef",highlight:!0,customSort({entity:M},{entity:g}){return R(M).localeCompare(R(g))},render:({entity:M})=>ne.createElement(m.dx,{entityRef:M,defaultKind:(F==null?void 0:F.defaultKind)||"Component"})}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:F})=>ne.createElement(m.rI,{entityRefs:F.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:F})=>ne.createElement(m.rI,{entityRefs:F.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:F})=>{var R,M;return ne.createElement(ne.Fragment,null,(((R=F==null?void 0:F.spec)==null?void 0:R.targets)||((M=F==null?void 0:F.spec)==null?void 0:M.target))&&ne.createElement(p.Or,{text:(F.spec.targets||[F.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(){return{title:"Type",field:"entity.spec.type",hidden:!0,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:F})=>ne.createElement(p.Or,{text:F.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:F})=>ne.createElement(ne.Fragment,null,F.metadata.tags&&F.metadata.tags.map(R=>ne.createElement(re.Z,{key:R,label:R,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(F){return{title:"Title",field:"entity.metadata.title",hidden:F==null?void 0:F.hidden,searchable:!0}},createLabelColumn(F,R){return{title:(R==null?void 0:R.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:M})=>{var g;const Ne=(g=M.metadata)==null?void 0:g.labels,Oe=Ne&&Ne[F]||(R==null?void 0:R.defaultValue);return ne.createElement(ne.Fragment,null,Oe&&ne.createElement(re.Z,{key:Oe,label:Oe,size:"small",variant:"outlined"}))},width:"auto"}},createNamespaceColumn(){return{title:"Namespace",field:"entity.metadata.namespace",width:"auto"}}}),ve=(0,D.Z)({root:{color:"#f3ba37"}})(r.Z),Ce=(F,R)=>{const M=g=>g.metadata.title||(0,m.$3)(g,{defaultKind:"Component"});return M(F).localeCompare(M(R))},u=F=>{var R,M,g,Ne,Oe;const{columns:Qe,actions:se,tableOptions:Le,subtitle:_e,emptyContent:Ke}=F,{isStarredEntity:St,toggleStarredEntity:L}=(0,m.CR)(),{loading:pt,error:fe,entities:zt,filters:Et}=(0,m.wp)(),Dt=(0,ne.useMemo)(()=>{var wt;return[ie.createTitleColumn({hidden:!0}),ie.createNameColumn({defaultKind:(wt=Et.kind)==null?void 0:wt.value}),...Jt(),ie.createMetadataDescriptionColumn(),ie.createTagsColumn()];function Jt(){var Ae;const j=[ie.createSystemColumn(),ie.createOwnerColumn(),ie.createSpecTypeColumn(),ie.createSpecLifecycleColumn()];switch((Ae=Et.kind)==null?void 0:Ae.value){case"user":return[];case"domain":case"system":return[ie.createOwnerColumn()];case"group":case"template":return[ie.createSpecTypeColumn()];case"location":return[ie.createSpecTypeColumn(),ie.createSpecTargetsColumn()];default:return zt.every(E=>E.metadata.namespace==="default")?j:[...j,ie.createNamespaceColumn()]}}},[(R=Et.kind)==null?void 0:R.value,zt]),Wt=Et.type===void 0,Je=(0,be.capitalize)((g=(M=Et.user)==null?void 0:M.value)!=null?g:"all");if(fe)return ne.createElement("div",null,ne.createElement(p.GB,{severity:"error",title:"Could not fetch catalog entities."},ne.createElement(p.Oi,{language:"text",text:fe.toString()})));const _t=[({entity:wt})=>{var Jt;const Ae=(Jt=wt.metadata.annotations)==null?void 0:Jt[o.l2],j="View";return{icon:()=>ne.createElement(ne.Fragment,null,ne.createElement(V.Z,{style:W.Z},j),ne.createElement(Xe.Z,{fontSize:"small"})),tooltip:j,disabled:!Ae,onClick:()=>{Ae&&window.open(Ae,"_blank")}}},({entity:wt})=>{var Jt;const Ae=(Jt=wt.metadata.annotations)==null?void 0:Jt[o.Tf],j="Edit";return{icon:()=>ne.createElement(ne.Fragment,null,ne.createElement(V.Z,{style:W.Z},j),ne.createElement(tt.Z,{fontSize:"small"})),tooltip:j,disabled:!Ae,onClick:()=>{Ae&&window.open(Ae,"_blank")}}},({entity:wt})=>{const Jt=St(wt),Ae=Jt?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>ne.createElement(ne.Fragment,null,ne.createElement(V.Z,{style:W.Z},Ae),Jt?ne.createElement(ve,null):ne.createElement(Ve.Z,null)),tooltip:Ae,onClick:()=>L(wt)}}],Nt=zt.sort(Ce).map(wt=>{const Jt=(0,Y.g)(wt,o.cz,{kind:"system"}),Ae=(0,Y.g)(wt,o.S4);return{entity:wt,resolved:{name:(0,m.$3)(wt,{defaultKind:"Component"}),entityRef:(0,o.eE)(wt),ownedByRelationsTitle:Ae.map(j=>(0,m.$3)(j,{defaultKind:"group"})).join(", "),ownedByRelations:Ae,partOfSystemRelationTitle:Jt.map(j=>(0,m.$3)(j,{defaultKind:"system"})).join(", "),partOfSystemRelations:Jt}}}),Xt=(Qe||Dt).find(wt=>wt.title==="Type");Xt&&(Xt.hidden=!Wt);const Ht=Nt.length>20,Ft=((Ne=Et.kind)==null?void 0:Ne.value)||"",yt=((Oe=Et.type)==null?void 0:Oe.value)||"",Tt=[Je,yt,s()(Ft)].filter(wt=>wt).join(" ");return ne.createElement(p.iA,{isLoading:pt,columns:Qe||Dt,options:{paging:Ht,pageSize:20,actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!pt,padding:"dense",pageSizeOptions:[20,50,100],...Le},title:`${Tt} (${zt.length})`,data:Nt,actions:se||_t,subtitle:_e,emptyContent:Ke})};u.columns=ie},34445:($n,Vt,e)=>{"use strict";e.d(Vt,{E:()=>bn});var o=e(34520),p=e(49558),m=e(30204),Y=e(30705),V=e(64304),D=e(78373),W=e(12231),tt=e(86136),Xe=e(49378),r=e(85256),Ve=e(80030),be=e(61837),X=e(79784),k=e(50758),s=e(95544),ne=e(99688),re=e(2784),ie=e(73557),ve=e(79692),Ce=e(31654),u=e(43054),F=e(65759),R=e(18473),M=e(68111);const g=(0,m.c)({id:"core.app-tree"});var Ne=Object.defineProperty,Oe=(ce,ae,Ze)=>ae in ce?Ne(ce,ae,{enumerable:!0,configurable:!0,writable:!0,value:Ze}):ce[ae]=Ze,Qe=(ce,ae,Ze)=>(Oe(ce,typeof ae!="symbol"?ae+"":ae,Ze),Ze);const se=({plugin:ce,error:ae,resetError:Ze})=>{const Pt=`Error in ${ce==null?void 0:ce.id}`;return React.createElement(ErrorPanel,{title:Pt,error:ae,defaultExpanded:!0},React.createElement(Button,{variant:"outlined",onClick:Ze},"Retry"))};class Le extends null{constructor(){super(...arguments),Qe(this,"state",{error:void 0}),Qe(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(ae){return{error:ae}}render(){const{error:ae}=this.state,{plugin:Ze,children:Pt}=this.props;return ae?React.createElement(se,{plugin:Ze,error:ae,resetError:this.handleErrorReset}):Pt}}function _e(ce){const{children:ae}=ce,Ze=useApp(),{Progress:Pt}=Ze.getComponents();return React.createElement(Suspense,{fallback:React.createElement(Pt,null)},ae)}(0,R.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1}));const Ke="_ROUTABLE-EXTENSION-RENDERED",St=ce=>{const{disableTracking:ae,children:Ze}=ce,Pt=useAnalytics();return useEffect(()=>{ae||Pt.captureEvent(Ke,"")},[Pt,ae]),React.createElement(React.Fragment,null,Ze)};function L(ce){const{id:ae,source:Ze,routable:Pt,children:Gt}=ce,jt={extension:ae,pluginId:Ze==null?void 0:Ze.id};return React.createElement(_e,null,React.createElement(Le,{plugin:Ze},React.createElement(AnalyticsContext,{attributes:jt},React.createElement(St,{disableTracking:!Pt},Gt))))}function pt(ce){return{id:ce,$$type:"@backstage/ExtensionDataRef",config:{},optional(){return{...this,config:{...this.config,optional:!0}}}}}const fe={reactElement:pt("core.reactElement"),routePath:pt("core.routing.path"),apiFactory:pt("core.api.factory"),routeRef:pt("core.routing.ref"),navTarget:pt("core.nav.target"),theme:pt("core.theme")};function zt(ce){var ae,Ze;return{...ce,disabled:(ae=ce.disabled)!=null?ae:!1,$$type:"@backstage/Extension",inputs:(Ze=ce.inputs)!=null?Ze:{},factory({inputs:Pt,...Gt}){return ce.factory({inputs:Pt,...Gt})}}}function Et(ce,ae){return{$$type:"@backstage/ExtensionInput",extensionData:ce,config:{singleton:Boolean(ae==null?void 0:ae.singleton),optional:Boolean(ae==null?void 0:ae.optional)}}}function Dt(ce){var ae,Ze,Pt;return{...ce,routes:(ae=ce.routes)!=null?ae:{},externalRoutes:(Ze=ce.externalRoutes)!=null?Ze:{},extensions:(Pt=ce.extensions)!=null?Pt:[],$$type:"@backstage/BackstagePlugin"}}function Wt(ce){return{$$type:"@backstage/ExtensionOverrides",version:"v1",extensions:ce.extensions}}function Je(ce){const{factory:ae,configSchema:Ze,inputs:Pt}=ce,Gt="api"in ce?ce.api:ae.api;return zt({id:`apis.${Gt.id}`,attachTo:{id:"core",input:"apis"},inputs:Pt,configSchema:Ze,output:{api:fe.apiFactory},factory({config:jt,inputs:_n}){return typeof ae=="function"?{api:ae({config:jt,inputs:_n})}:{api:ae}}})}function _t(ce){const ae=ce(z);return{parse:Ze=>{const Pt=ae.safeParse(Ze);if(Pt.success)return Pt.data;throw new Error(Pt.error.issues.map(Nt).join("; "))},schema:zodToJsonSchema(ae)}}function Nt(ce){if(ce.code==="invalid_union")return Nt(ce.unionErrors[0].issues[0]);let ae=ce.message;return ae==="Required"&&(ae="Missing required value"),ce.path.length&&(ae+=` at '${ce.path.join(".")}'`),ae}function Xt(ce){var ae;const{id:Ze}=ce,Pt="configSchema"in ce?ce.configSchema:_t(Gt=>Gt.object({path:Gt.string().default(ce.defaultPath)}));return zt({id:Ze,attachTo:(ae=ce.attachTo)!=null?ae:{id:"core.routes",input:"routes"},configSchema:Pt,inputs:ce.inputs,disabled:ce.disabled,output:{element:fe.reactElement,path:fe.routePath,routeRef:fe.routeRef.optional()},factory({config:Gt,inputs:jt,source:_n}){const Wn=lazy(()=>ce.loader({config:Gt,inputs:jt}).then(Gn=>({default:()=>Gn})));return{path:Gt.path,routeRef:ce.routeRef,element:React.createElement(L,{id:Ze,source:_n,routable:!0},React.createElement(Wn,null))}}})}function Ht(ce){const{id:ae,routeRef:Ze,title:Pt,icon:Gt}=ce;return zt({id:ae,attachTo:{id:"core.nav",input:"items"},configSchema:_t(jt=>jt.object({title:jt.string().default(Pt)})),output:{navTarget:fe.navTarget},factory:({config:jt})=>({navTarget:{title:jt.title,icon:Gt,routeRef:Ze}})})}function Ft(ce){return zt({id:`themes.${ce.id}`,attachTo:{id:"core",input:"themes"},output:{theme:fe.theme},factory:()=>({theme:ce})})}const yt="eHgtF5hmbrXyiEvo";function Tt(ce=Error){const{stack:ae}=new ce(yt);if(!ae)return"<unknown>";const Ze=ae.includes(yt)?ae.indexOf(`
`)+1:0,Pt=ae.indexOf(`
`,ae.indexOf(`
`,Ze)+1)+1,Gt=ae.indexOf(`
`,Pt),jt=ae.substring(Pt,Gt).trim();return jt?jt.includes("(")?jt.substring(jt.indexOf("(")+1,jt.indexOf(")")):jt.includes("@")?jt.substring(jt.indexOf("@")+1):jt:"unknown"}var wt=Object.defineProperty,Jt=(ce,ae,Ze)=>ae in ce?wt(ce,ae,{enumerable:!0,configurable:!0,writable:!0,value:Ze}):ce[ae]=Ze,Ae=(ce,ae,Ze)=>(Jt(ce,typeof ae!="symbol"?ae+"":ae,Ze),Ze),j=(ce,ae,Ze)=>{if(!ae.has(ce))throw TypeError("Cannot "+Ze)},E=(ce,ae,Ze)=>(j(ce,ae,"read from private field"),Ze?Ze.call(ce):ae.get(ce)),N=(ce,ae,Ze)=>{if(ae.has(ce))throw TypeError("Cannot add the same private member more than once");ae instanceof WeakSet?ae.add(ce):ae.set(ce,Ze)},Q=(ce,ae,Ze,Pt)=>(j(ce,ae,"write to private field"),Pt?Pt.call(ce,Ze):ae.set(ce,Ze),Ze),q,Ge,Z,x,he;function Fe(ce){const ae=ce;if(ae.$$type!=="@backstage/RouteRef")throw new Error(`Invalid RouteRef, bad type '${ae.$$type}'`);return ae}class mt{constructor(ae=[],Ze){this.params=ae,N(this,x),Ae(this,"$$type","@backstage/RouteRef"),Ae(this,"version","v1"),N(this,q,void 0),N(this,Ge,void 0),N(this,Z,void 0),Q(this,Ge,ae),Q(this,Z,Ze)}getParams(){return E(this,Ge)}getDescription(){return E(this,q)?E(this,q):`created at '${E(this,Z)}'`}setId(ae){if(!ae)throw new Error(`${E(this,x,he)} id must be a non-empty string`);if(E(this,q))throw new Error(`${E(this,x,he)} was referenced twice as both '${E(this,q)}' and '${ae}'`);Q(this,q,ae)}toString(){return`${E(this,x,he)}{${this.getDescription()}}`}}q=new WeakMap,Ge=new WeakMap,Z=new WeakMap,x=new WeakSet,he=function(){return this.$$type.slice(11)};function Qt(ce){return new mt(ce==null?void 0:ce.params,Tt())}var Ie=Object.defineProperty,Be=(ce,ae,Ze)=>ae in ce?Ie(ce,ae,{enumerable:!0,configurable:!0,writable:!0,value:Ze}):ce[ae]=Ze,ct=(ce,ae,Ze)=>(Be(ce,typeof ae!="symbol"?ae+"":ae,Ze),Ze),Ot=(ce,ae,Ze)=>{if(!ae.has(ce))throw TypeError("Cannot "+Ze)},bt=(ce,ae,Ze)=>(Ot(ce,ae,"read from private field"),Ze?Ze.call(ce):ae.get(ce)),$t=(ce,ae,Ze)=>{if(ae.has(ce))throw TypeError("Cannot add the same private member more than once");ae instanceof WeakSet?ae.add(ce):ae.set(ce,Ze)},Ct=(ce,ae,Ze,Pt)=>(Ot(ce,ae,"write to private field"),Pt?Pt.call(ce,Ze):ae.set(ce,Ze),Ze),$e,qe;const Ee=/^\w+$/;class G{constructor(ae,Ze,Pt){this.path=ae,ct(this,"$$type","@backstage/SubRouteRef"),ct(this,"version","v1"),$t(this,$e,void 0),$t(this,qe,void 0),Ct(this,$e,Ze),Ct(this,qe,Pt)}getParams(){return bt(this,$e)}getParent(){return bt(this,qe)}getDescription(){const ae=Fe(bt(this,qe));return`at ${this.path} with parent ${ae.getDescription()}`}toString(){return`SubRouteRef{${this.getDescription()}}`}}$e=new WeakMap,qe=new WeakMap;function ue(ce){const{path:ae,parent:Ze}=ce,Gt=Fe(Ze).getParams(),jt=ae.split("/").filter(Gn=>Gn.startsWith(":")).map(Gn=>Gn.substring(1)),_n=[...Gt,...jt];if(Gt.some(Gn=>jt.includes(Gn)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!ae.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${ae}'`);if(ae.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${ae}'`);for(const Gn of jt)if(!Ee.test(Gn))throw new Error(`SubRouteRef path has invalid param, got '${Gn}'`);return new G(ae,_n,Ze)}var Ue=Object.defineProperty,nt=(ce,ae,Ze)=>ae in ce?Ue(ce,ae,{enumerable:!0,configurable:!0,writable:!0,value:Ze}):ce[ae]=Ze,it=(ce,ae,Ze)=>(nt(ce,typeof ae!="symbol"?ae+"":ae,Ze),Ze);class Rt extends null{constructor(ae,Ze=[],Pt){super(Ze,Pt),this.optional=ae,this.params=Ze,it(this,"$$type","@backstage/ExternalRouteRef")}}function qt(ce){return new Rt(Boolean(ce==null?void 0:ce.optional),ce==null?void 0:ce.params,Tt())}function nn(ce){const{pathname:ae}=useLocation(),Ze=useVersionedContext("routing-context");if(!Ze)throw new Error("Routing context is not available");const Pt=Ze.atVersion(1),Gt=useMemo(()=>Pt&&Pt.resolve(ce,{pathname:ae}),[Pt,ce,ae]);if(!Ze)throw new Error("useRouteRef used outside of routing context");if(!Pt)throw new Error("RoutingContext v1 not available");const jt="optional"in ce&&ce.optional;if(!Gt&&!jt)throw new Error(`No path for ${ce}`);return Gt}function we(ce){return useParams()}var De=e(56563);function w(ce,ae){const Ze=new Set([...getEntityRelations(ce,RELATION_MEMBER_OF,{kind:"group"}),...ce?[getCompoundEntityRef(ce)]:[]].map(stringifyEntityRef)),Pt=getEntityRelations(ae,RELATION_OWNED_BY).map(stringifyEntityRef);for(const Gt of Pt)if(Ze.has(Gt))return!0;return!1}function H(ce){const{entity:ae,loading:Ze,error:Pt}=(0,D.a)(),{allowed:Gt,loading:jt,error:_n}=(0,De.gI)({permission:ce,resourceRef:ae?(0,o.eE)(ae):void 0});return Ze||jt?{loading:!0,allowed:!1}:Pt?{loading:!1,allowed:!1,error:Pt}:{loading:!1,allowed:Gt,error:_n}}const te=pt("plugin.catalog.entity.content.title"),ut=pt("plugin.catalog.entity.filter");function K(ce,ae){return ce?ce.toLocaleLowerCase("en-US")===(ae==null?void 0:ae.toLocaleLowerCase("en-US")):!0}function ee(ce,ae){return Ze=>{var Pt;return((Pt=ce.filter)==null?void 0:Pt.some(jt=>{var _n,Wn;const Gn=K(jt.isKind,Ze.entity.kind),dr=K(jt.isType,(Wn=(_n=Ze.entity.spec)==null?void 0:_n.type)==null?void 0:Wn.toString());return Gn&&dr}))?!0:ae?ae(Ze):!0}}function He(ce){var ae,Ze;const Pt=`entity.cards.${ce.id}`;return createExtension({id:Pt,attachTo:(ae=ce.attachTo)!=null?ae:{id:"entity.content.overview",input:"cards"},disabled:(Ze=ce.disabled)!=null?Ze:!0,output:{element:coreExtensionData.reactElement,filter:ut},inputs:ce.inputs,configSchema:createSchemaFromZod(Gt=>Gt.object({filter:Gt.array(Gt.object({isKind:Gt.string().optional(),isType:Gt.string().optional()})).optional()})),factory({config:Gt,inputs:jt,source:_n}){const Wn=lazy(()=>ce.loader({inputs:jt}).then(Gn=>({default:()=>Gn})));return{element:React.createElement(ExtensionBoundary,{id:Pt,source:_n},React.createElement(Wn,null)),filter:ee(Gt,ce.filter)}}})}function lt(ce){var ae,Ze;const Pt=`entity.content.${ce.id}`;return createExtension({id:Pt,attachTo:(ae=ce.attachTo)!=null?ae:{id:"plugin.catalog.page.entity",input:"contents"},disabled:(Ze=ce.disabled)!=null?Ze:!0,output:{element:coreExtensionData.reactElement,path:coreExtensionData.routePath,routeRef:coreExtensionData.routeRef.optional(),title:te,filter:ut},inputs:ce.inputs,configSchema:createSchemaFromZod(Gt=>Gt.object({path:Gt.string().default(ce.defaultPath),title:Gt.string().default(ce.defaultTitle),filter:Gt.array(Gt.object({isKind:Gt.string().optional(),isType:Gt.string().optional()})).optional()})),factory({config:Gt,inputs:jt,source:_n}){const Wn=lazy(()=>ce.loader({inputs:jt}).then(Gn=>({default:()=>Gn})));return{path:Gt.path,title:Gt.title,routeRef:ce.routeRef,element:React.createElement(ExtensionBoundary,{id:Pt,source:_n,routable:!0},React.createElement(Wn,null)),filter:ee(Gt,ce.filter)}}})}var Bt=e(75650),It=e(49166);function an(ce){var ae;const{unregisterEntityOptions:Ze,isUnregisterAllowed:Pt,onUnregisterEntity:Gt,onClose:jt}=ce,_n=typeof(Ze==null?void 0:Ze.disableUnregister)=="boolean",Wn=(ae=!Pt||(_n?!!(Ze!=null&&Ze.disableUnregister):(Ze==null?void 0:Ze.disableUnregister)==="disable"))!=null?ae:!1;let Gn=re.createElement(re.Fragment,null);return(Ze==null?void 0:Ze.disableUnregister)!=="hidden"&&(Gn=re.createElement(W.Z,{onClick:()=>{jt(),Gt()},disabled:Wn},re.createElement(tt.Z,null,re.createElement(It.Z,{fontSize:"small"})),re.createElement(Xe.Z,{primary:"Unregister entity"}))),re.createElement(re.Fragment,null,Gn)}const on=(0,ve.Z)(ce=>({button:{color:ce.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function fn(ce){const{UNSTABLE_extraContextMenuItems:ae,UNSTABLE_contextMenuOptions:Ze,onUnregisterEntity:Pt,onInspectEntity:Gt}=ce,[jt,_n]=(0,re.useState)(),Wn=on(),dr=H(Bt.j8).allowed,gr=vr=>{_n(vr.currentTarget)},Jn=()=>{_n(void 0)},pr=(0,m.u)(m.l),Pr=(0,re.useCallback)(()=>{window.navigator.clipboard.writeText(window.location.toString()).then(()=>pr.post({message:"Copied!",severity:"info",display:"transient"}))},[pr]),Lr=ae&&[...ae.map(vr=>re.createElement(W.Z,{key:vr.title,onClick:()=>{Jn(),vr.onClick()}},re.createElement(tt.Z,null,re.createElement(vr.Icon,{fontSize:"small"})),re.createElement(Xe.Z,{primary:vr.title}))),re.createElement(r.Z,{key:"the divider is here!"})];return re.createElement(re.Fragment,null,re.createElement(Ve.ZP,{title:"More",arrow:!0},re.createElement(be.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!jt,role:"button",onClick:gr,"data-testid":"menu-button",className:Wn.button,id:"long-menu"},re.createElement(u.Z,null))),re.createElement(X.ZP,{open:Boolean(jt),onClose:Jn,anchorEl:jt,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},re.createElement(k.Z,{autoFocusItem:Boolean(jt)},Lr,re.createElement(an,{unregisterEntityOptions:Ze,isUnregisterAllowed:dr,onUnregisterEntity:Pt,onClose:Jn}),re.createElement(W.Z,{onClick:()=>{Jn(),Gt()}},re.createElement(tt.Z,null,re.createElement(Ce.Z,{fontSize:"small"})),re.createElement(Xe.Z,{primary:"Inspect entity"})),re.createElement(W.Z,{onClick:()=>{Jn(),Pr()}},re.createElement(tt.Z,null,re.createElement(F.Z,{fontSize:"small"})),re.createElement(Xe.Z,{primary:"Copy entity URL"})))))}const tn="plugin.catalog.entityLayoutRoute",cn=()=>null;(0,Y.R5)(cn,tn,!0),(0,Y.R5)(cn,"core.gatherMountPoints",!0);function ln(ce){const{entity:ae,title:Ze}=ce;return re.createElement(s.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},re.createElement(s.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},ae?re.createElement(V.co,{entityRef:ae,hideIcon:!0}):Ze),ae&&re.createElement(V.LH,{entity:ae}))}function wn(ce,ae,Ze,Pt){var Gt,jt,_n,Wn,Gn;const dr=(Gt=ce!=null?ce:Pt==null?void 0:Pt.kind)!=null?Gt:"",gr=(jt=ae!=null?ae:Pt==null?void 0:Pt.metadata.namespace)!=null?jt:"";return{headerTitle:`${(Gn=(Wn=(_n=Pt==null?void 0:Pt.metadata.title)!=null?_n:Ze)!=null?Wn:Pt==null?void 0:Pt.metadata.name)!=null?Gn:""}${gr&&gr!==o.zG?` in ${gr}`:""}`,headerType:(()=>{let pr=dr.toLocaleLowerCase("en-US");return Pt&&Pt.spec&&"type"in Pt.spec&&(pr+=" \u2014 ",pr+=Pt.spec.type.toLocaleLowerCase("en-US")),pr})()}}function dn(ce){var ae,Ze;const{entity:Pt}=ce,Gt=(0,D.g)(Pt,o.S4);return re.createElement(re.Fragment,null,Gt.length>0&&re.createElement(p.i9,{label:"Owner",contentTypograpyRootComponent:"p",value:re.createElement(V.rI,{entityRefs:Gt,defaultKind:"Group",color:"inherit"})}),((ae=Pt.spec)==null?void 0:ae.lifecycle)&&re.createElement(p.i9,{label:"Lifecycle",value:(Ze=Pt.spec.lifecycle)==null?void 0:Ze.toString()}))}const bn=ce=>{var ae,Ze,Pt;const{UNSTABLE_extraContextMenuItems:Gt,UNSTABLE_contextMenuOptions:jt,children:_n,NotFoundComponent:Wn}=ce,{kind:Gn,namespace:dr,name:gr}=(0,Y.Oi)(V.wi),{entity:Jn,loading:pr,error:Pr}=(0,D.a)(),Lr=(0,ie.TH)(),vr=(0,Y.vJ)(_n,O=>O.selectByComponentData({key:tn,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:T})=>{if(Jn){if(T.if&&!T.if(Jn))return[]}else return[];return[{path:T.path,title:T.title,children:T.children,tabProps:T.tabProps}]}),[Jn]),{headerTitle:wr,headerType:Or}=wn(Gn,dr,gr,Jn),[Tr,oe]=(0,re.useState)(!1),[Ye,rt]=(0,re.useState)(!1),C=(0,ie.s0)(),_=async()=>{oe(!1),rt(!1),C("/")};return(0,re.useEffect)(()=>{oe(!1),rt(!1)},[Lr.pathname]),re.createElement(p.T3,{themeId:(Pt=(Ze=(ae=Jn==null?void 0:Jn.spec)==null?void 0:ae.type)==null?void 0:Ze.toString())!=null?Pt:"home"},re.createElement(p.h4,{title:re.createElement(ln,{title:wr,entity:Jn}),pageTitleOverride:wr,type:Or},Jn&&re.createElement(re.Fragment,null,re.createElement(dn,{entity:Jn}),re.createElement(fn,{UNSTABLE_extraContextMenuItems:Gt,UNSTABLE_contextMenuOptions:jt,onUnregisterEntity:()=>oe(!0),onInspectEntity:()=>rt(!0)}))),pr&&re.createElement(p.Ex,null),Jn&&re.createElement(p.tn,{routes:vr}),Pr&&re.createElement(p.VY,null,re.createElement(ne.Z,{severity:"error"},Pr.toString())),!pr&&!Pr&&!Jn&&re.createElement(p.VY,null,Wn||re.createElement(p.GB,{title:"Entity not found"},"There is no ",Gn," with the requested"," ",re.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),re.createElement(V.pp,{open:Tr,entity:Jn,onConfirm:_,onClose:()=>oe(!1)}),re.createElement(V.U_,{open:Ye,entity:Jn,onClose:()=>rt(!1)}))};bn.Route=cn},28814:($n,Vt,e)=>{"use strict";e.d(Vt,{D:()=>Ft,a:()=>Je,b:()=>wt,c:()=>yt,r:()=>Jt,v:()=>Tt});var o=e(34520);function p(Ae){const{years:j=0,months:E=0,weeks:N=0,days:Q=0,hours:q=0,minutes:Ge=0,seconds:Z=0,milliseconds:x=0}=Ae;return((((j*365+E*30+N*7+Q)*24+q)*60+Ge)*60+Z)*1e3+x}var m=e(99798),Y=e.n(m),V=e(12830),D=e.n(V),W=e(82394),tt=e.n(W),Xe=e(64304),r=e(43642),Ve=e(77224),be=e(15933),X=e(78898),k=e(4989),s=e(44407),ne=e(84219),re=e(98685),ie=e(76635),ve=e(30705);const Ce={seconds:10},u={milliseconds:50},F={api:be.Z,component:s.Z,system:Ve.Z,domain:r.Z,location:k.Z,user:re.Z,group:ne.Z,template:X.Z};function R(Ae){return{async:Ae.async,render:({entityRef:j,entity:E,context:N})=>({snapshot:(0,Xe.n8)(E||j,N),loadEntity:Ae.async})}}var M=(Ae,j,E)=>{if(!j.has(Ae))throw TypeError("Cannot "+E)},g=(Ae,j,E)=>(M(Ae,j,"read from private field"),E?E.call(Ae):j.get(Ae)),Ne=(Ae,j,E)=>{if(j.has(Ae))throw TypeError("Cannot add the same private member more than once");j instanceof WeakSet?j.add(Ae):j.set(Ae,E)},Oe=(Ae,j,E,N)=>(M(Ae,j,"write to private field"),N?N.call(Ae,E):j.set(Ae,E),E),Qe=(Ae,j,E)=>(M(Ae,j,"access private method"),E),se,Le,_e,Ke,St,L,pt,fe,zt,Et,Dt;const Wt=class ai{constructor(j){Ne(this,L),Ne(this,fe),Ne(this,Et),Ne(this,se,void 0),Ne(this,Le,void 0),Ne(this,_e,void 0),Ne(this,Ke,void 0),Ne(this,St,void 0);var E,N,Q,q;const Ge=(E=j.cacheTtl)!=null?E:Ce,Z=(N=j.batchDelay)!=null?N:u,x=(Q=j.renderer)!=null?Q:R({async:!0}),he={};if(Object.entries((q=j.kindIcons)!=null?q:F).forEach(([Fe,mt])=>{he[Fe.toLocaleLowerCase("en-US")]=mt}),x.async){if(!j.catalogApi)throw new TypeError("Asynchronous rendering requires a catalog API");Oe(this,_e,Qe(this,fe,zt).call(this,{cacheTtl:Ge,batchDelay:Z,renderer:x,catalogApi:j.catalogApi}))}Oe(this,Le,p(Ge)),Oe(this,se,new Map),Oe(this,Ke,he),Oe(this,St,x)}static createLocal(){return new ai({renderer:R({async:!1})})}static create(j){return new ai(j)}forEntity(j,E){const{entityRef:N,kind:Q,entity:q,needsLoad:Ge}=Qe(this,L,pt).call(this,j),Z=Fe=>{const{snapshot:mt}=g(this,St).render({entityRef:N,loading:Fe.loading,entity:Fe.entity,context:E||{}});return{...mt,entityRef:N,Icon:Qe(this,Et,Dt).call(this,mt.Icon,Q)}};let x;try{x=Z({loading:Ge,entity:q})}catch{x={primaryTitle:N,entityRef:N}}const he=Ge?new(tt())(Fe=>{let mt=!1;return Promise.resolve().then(()=>{var Qt;return(Qt=g(this,_e))==null?void 0:Qt.load(N)}).then(Qt=>{if(!mt&&Qt&&Qt.metadata.etag!==(q==null?void 0:q.metadata.etag)){const Ie=Z({loading:!1,entity:Qt});Fe.next(Ie)}}).catch(()=>{}).finally(()=>{mt||Fe.complete()}),()=>{mt=!0}}):void 0;return{snapshot:x,update$:he}}};se=new WeakMap,Le=new WeakMap,_e=new WeakMap,Ke=new WeakMap,St=new WeakMap,L=new WeakSet,pt=function(Ae){if(typeof Ae!="string")return{entity:Ae,kind:Ae.kind,entityRef:(0,o.eE)(Ae),needsLoad:!1};const j=g(this,se).get(Ae),E=j==null?void 0:j.entity,Q=(!j||Date.now()-j.updatedAt>g(this,Le))&&g(this,St).async!==!1&&g(this,_e)!==void 0;return{entity:E,kind:(0,o.of)(Ae).kind,entityRef:Ae,needsLoad:Q}},fe=new WeakSet,zt=function(Ae){const j=p(Ae.cacheTtl),E=p(Ae.batchDelay);return new(Y())(async N=>{const{items:Q}=await Ae.catalogApi.getEntitiesByRefs({entityRefs:N}),q=Date.now();return N.forEach((Ge,Z)=>{g(this,se).set(Ge,{updatedAt:q,entity:Q[Z]})}),Q},{name:"DefaultEntityPresentationApi",cacheMap:new(D())(j),maxBatchSize:100,batchScheduleFn:E?N=>setTimeout(N,E):void 0})},Et=new WeakSet,Dt=function(Ae,j){return Ae||(Ae===!1?!1:g(this,Ke)[j.toLocaleLowerCase("en-US")])};let Je=Wt;async function _t({storageApi:Ae}){var j;const E=Ae.forBucket("settings"),N=Ae.forBucket("starredEntities"),Q=E.snapshot("starredEntities").value;if(!(0,ie.isArray)(Q))return;const q=new Set((j=N.snapshot("entityRefs").value)!=null?j:[]);Q.filter(ie.isString).map(Ge=>Ge.split(":")).filter(Ge=>Ge.length===4&&Ge[0]==="entity").map(([Ge,Z,x,he])=>(0,o.eE)({kind:Z,namespace:x,name:he})).forEach(Ge=>q.add(Ge)),await N.set("entityRefs",Array.from(q)),await E.remove("starredEntities")}var Nt=Object.defineProperty,Xt=(Ae,j,E)=>j in Ae?Nt(Ae,j,{enumerable:!0,configurable:!0,writable:!0,value:E}):Ae[j]=E,Ht=(Ae,j,E)=>(Xt(Ae,typeof j!="symbol"?j+"":j,E),E);class Ft{constructor(j){Ht(this,"settingsStore"),Ht(this,"starredEntities"),Ht(this,"subscribers",new Set),Ht(this,"observable",new(tt())(N=>(N.next(new Set(this.starredEntities)),this.subscribers.add(N),()=>{this.subscribers.delete(N)})));var E;_t(j).then(),this.settingsStore=j.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((E=this.settingsStore.snapshot("entityRefs").value)!=null?E:[]),this.settingsStore.observe$("entityRefs").subscribe({next:N=>{var Q;this.starredEntities=new Set((Q=N.value)!=null?Q:[]),this.notifyChanges()}})}async toggleStarred(j){this.starredEntities.has(j)?this.starredEntities.delete(j):this.starredEntities.add(j),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const j of this.subscribers)j.next(new Set(this.starredEntities))}}const yt=(0,ve.x8)({id:"create-component",optional:!0}),Tt=(0,ve.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),wt=(0,ve.x8)({id:"create-from-template",optional:!0,params:["namespace","templateName"]}),Jt=(0,ve.NT)({id:"catalog"})},16673:($n,Vt,e)=>{"use strict";e.d(Vt,{BL:()=>Be,Cy:()=>bt,Eq:()=>fe,FZ:()=>Ee,Kf:()=>j,PA:()=>pt,Tu:()=>he,VU:()=>Dt,_l:()=>Ae,bM:()=>mt,dN:()=>Fe,f2:()=>Qt,im:()=>_t,jF:()=>$t,mr:()=>Nt,o6:()=>$e,oU:()=>Ot,p$:()=>Ft,rR:()=>x,vA:()=>Et,yf:()=>ct});var o=e(28814),p=e(2784),m=e(79692),Y=e(12420),V=e(8629),D=e(79249),W=e(49429),tt=e(77277),Xe=e(95544),r=e(64304),Ve=e(78373),be=e(19928),X=e.n(be),k=e(30204),s=e(30705),ne=e(64279),re=e(99688),ie=e(73557),ve=e(32272),Ce=e(49558),u=e(34520),F=e(88285),R=e(42054),M=e(99798),g=e.n(M),Ne=e(82394),Oe=e.n(Ne),Qe=e(76635),se=e.n(Qe);function Le(){const G=useApi(catalogApiRef),{error:ue,loading:Ue,value:nt}=useAsync(async()=>await G.getEntityFacets({facets:["kind"]}).then(Rt=>{var qt;return((qt=Rt.facets.kind)==null?void 0:qt.map(nn=>nn.value).sort())||[]}),[G]);return{loading:Ue,error:ue,allKinds:nt!=null?nt:[]}}function _e(G,ue,Ue){let nt=G;return ue&&(nt=nt.filter(Rt=>ue.some(qt=>qt.toLocaleLowerCase("en-US")===Rt.toLocaleLowerCase("en-US")))),Ue&&!G.some(Rt=>Rt.toLocaleLowerCase("en-US")===Ue.toLocaleLowerCase("en-US"))&&(nt=nt.concat([Ue])),nt.sort().reduce((Rt,qt)=>(Rt[qt.toLocaleLowerCase("en-US")]=qt,Rt),{})}const Ke=(0,m.Z)(G=>(0,Y.Z)({root:{...G.typography.h4}}));function St(G){var ue,Ue;const{initialFilter:nt="component",allowedKinds:it}=G,Rt=Ke(),{allKinds:qt}=Le(),{filters:nn,updateFilters:we,queryParameters:{kind:De}}=useEntityList(),w=useMemo(()=>[De].flat()[0],[De]),[H,te]=useState((Ue=w!=null?w:(ue=nn.kind)==null?void 0:ue.value)!=null?Ue:nt);useEffect(()=>{w&&te(w)},[w]),useEffect(()=>{var K,ee;(K=nn.kind)!=null&&K.value&&te((ee=nn.kind)==null?void 0:ee.value)},[nn.kind]),useEffect(()=>{we({kind:H?new EntityKindFilter(H):void 0})},[H,we]);const ut=_e(qt,it,H);return React.createElement(Select,{input:React.createElement(InputBase,null),value:H.toLocaleLowerCase("en-US"),onChange:K=>te(K.target.value),classes:Rt},Object.keys(ut).map(K=>React.createElement(MenuItem,{value:K,key:K},`${pluralize(ut[K])}`)))}function L(G){const{open:ue,onClose:Ue,onConfirm:nt,entity:it}=G,[Rt,qt]=(0,p.useState)(!1),nn=(0,k.u)(r.Ah),we=(0,k.u)(k.l),De=async()=>{qt(!0);try{const w=it.metadata.uid;await nn.removeEntityByUid(w),nt()}catch(w){(0,ve.BD)(w),we.post({message:w.message})}finally{qt(!1)}};return p.createElement(V.Z,{open:ue,onClose:Ue},p.createElement(D.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),p.createElement(W.Z,null,p.createElement(tt.Z,{variant:"contained",color:"secondary",disabled:Rt,onClick:De},"Delete"),p.createElement(tt.Z,{onClick:Ue,color:"primary"},"Cancel")))}function pt(G){var ue,Ue;return((Ue=(ue=G==null?void 0:G.metadata)==null?void 0:ue.annotations)==null?void 0:Ue["backstage.io/orphan"])==="true"}function fe(){const G=(0,ie.s0)(),ue=(0,s.tg)(o.r),[Ue,nt]=(0,p.useState)(!1),{entity:it}=(0,Ve.u)(),Rt=async()=>{nt(!1),G(ue())};return p.createElement(p.Fragment,null,p.createElement(re.Z,{severity:"warning",onClick:()=>nt(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),p.createElement(L,{open:Ue,entity:it,onConfirm:Rt,onClose:()=>nt(!1)}))}async function zt(G,ue){var Ue;const nt=(Ue=G.relations)==null?void 0:Ue.map(Rt=>Rt.targetRef);if(!nt||(nt==null?void 0:nt.length)<1||nt.length>1e3)return[];const it=await ue.getEntitiesByRefs({entityRefs:nt,fields:["kind","metadata.name","metadata.namespace"]});return nt.filter((Rt,qt)=>it.items[qt]===void 0)}async function Et(G,ue){const Ue=ue.apis.get(r.Ah);if(!Ue)throw new Error(`No implementation available for ${r.Ah}`);return(await zt(G,Ue)).length>0}function Dt(){const{entity:G}=(0,Ve.u)(),ue=(0,k.u)(r.Ah),{loading:Ue,error:nt,value:it}=(0,ne.default)(async()=>zt(G,ue),[G,ue]);return nt?p.createElement(Xe.Z,{mb:1},p.createElement(Ce.Gk,{error:nt})):Ue||!it||it.length===0?null:p.createElement(p.Fragment,null,p.createElement(re.Z,{severity:"warning"},"This entity has relations to other entities, which can't be found in the catalog. ",p.createElement("br",null),"Entities not found are: ",it.join(", ")))}const Wt=G=>G.error&&G.level==="error"&&G.type===F.mk;async function Je(G,ue){return{items:(await ue.getEntityAncestors({entityRef:G})).items.map(it=>{var Rt,qt;return{errors:((qt=(Rt=it.entity.status)==null?void 0:Rt.items)!=null?qt:[]).filter(Wt).map(De=>De.error).filter(De=>Boolean(De)),entity:it.entity}}).filter(it=>it.errors.length>0)}}async function _t(G,ue){const Ue=ue.apis.get(r.Ah);if(!Ue)throw new Error(`No implementation available for ${r.Ah}`);return(await Je((0,u.eE)(G),Ue)).items.length>0}function Nt(){const{entity:G}=(0,Ve.u)(),ue=(0,u.eE)(G),Ue=(0,k.u)(r.Ah),{loading:nt,error:it,value:Rt}=(0,ne.default)(async()=>Je(ue,Ue),[ue,Ue]);return it?p.createElement(Xe.Z,{mb:1},p.createElement(Ce.Gk,{error:it})):nt||!Rt?null:p.createElement(p.Fragment,null,Rt.items.map((qt,nn)=>p.createElement(Xe.Z,{key:nn,mb:1},(0,u.eE)(G)!==(0,u.eE)(qt.entity)&&p.createElement(Xe.Z,{p:1},"The error below originates from"," ",p.createElement(r.dx,{entityRef:qt.entity})),qt.errors.map((we,De)=>p.createElement(Ce.Gk,{key:De,error:we})))))}const Xt="core.backstage.entitySwitch",Ht=G=>null;(0,s.R5)(Ht,Xt,!0);const Ft=G=>{var ue,Ue;const{entity:nt,loading:it}=(0,Ve.a)(),Rt=(0,k.b)(),qt=(0,s.vJ)(G.children,we=>we.selectByComponentData({key:Xt,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(De=>{if(it&&!nt)return[];const{if:w,children:H}=De.props;return nt?[{if:w==null?void 0:w(nt,{apis:Rt}),children:H}]:[{if:w===void 0,children:H}]}),[Rt,nt,it]);if(qt.some(we=>typeof we.if=="object"&&"then"in we.if))return p.createElement(yt,{results:qt,renderMultipleMatches:G.renderMultipleMatches});if(G.renderMultipleMatches==="all"){const we=qt.filter(De=>De.if).map(De=>De.children);return we.length===0?Tt(qt):p.createElement(p.Fragment,null,we)}return(Ue=(ue=qt.find(we=>we.if))==null?void 0:ue.children)!=null?Ue:Tt(qt)};function yt({results:G,renderMultipleMatches:ue}){const{loading:Ue,value:nt}=(0,ne.default)(async()=>{var it;const Rt=G.map(async({if:qt,children:nn})=>{try{if(await qt)return nn}catch{}return null});if(ue==="all"){const qt=(await Promise.all(Rt)).filter(Boolean);return qt.length===0?Tt(G):p.createElement(p.Fragment,null,qt)}return(it=(await Promise.all(Rt)).find(Boolean))!=null?it:Tt(G)},[G]);return Ue||!nt?null:nt}function Tt(G){var ue,Ue;return(Ue=(ue=G.filter(nt=>nt.if===void 0)[0])==null?void 0:ue.children)!=null?Ue:null}Ft.Case=Ht;function wt(G,ue){return Boolean(G&&typeof G=="string"&&(G==null?void 0:G.toLocaleLowerCase("en-US"))===(ue==null?void 0:ue.toLocaleLowerCase("en-US")))}function Jt(G,ue){return typeof ue=="string"?wt(G,ue):ue.length===0||ue.some(Ue=>wt(G,Ue))}function Ae(G){return N({kind:G})}function j(G){return N({kind:"component",type:G})}function E(G){return N({kind:"resource",type:G})}function N(G){return ue=>{var Ue;return!(G.kind&&!Jt(ue.kind,G.kind)||G.type&&!Jt((Ue=ue.spec)==null?void 0:Ue.type,G.type))}}function Q(G){return ue=>{var Ue;return Jt((Ue=ue.metadata)==null?void 0:Ue.namespace,G)}}const q=null,Ge=r._i.Filters,Z=r._i.Content,x=(0,s.rx)({id:"catalog",apis:[(0,s.ni)({api:r.Ah,deps:{discoveryApi:k.q,fetchApi:k.t},factory:({discoveryApi:G,fetchApi:ue})=>new F.MS({discoveryApi:G,fetchApi:ue})}),(0,s.ni)({api:r.p3,deps:{storageApi:k.y},factory:({storageApi:G})=>new o.D({storageApi:G})}),(0,s.ni)({api:r.XI,deps:{catalogApi:r.Ah},factory:({catalogApi:G})=>o.a.create({catalogApi:G})})],routes:{catalogIndex:o.r,catalogEntity:r.wi},externalRoutes:{createComponent:o.c,viewTechDoc:o.v,createFromTemplate:o.b}}),he=x.provide((0,s.P4)({name:"CatalogIndexPage",component:()=>e.e(9302).then(e.bind(e,69302)).then(G=>G.CatalogPage),mountPoint:o.r})),Fe=x.provide((0,s.P4)({name:"CatalogEntityPage",component:()=>e.e(4897).then(e.bind(e,84897)).then(G=>G.CatalogEntityPage),mountPoint:r.wi})),mt=x.provide((0,s.CO)({name:"EntityAboutCard",component:{lazy:()=>e.e(7468).then(e.bind(e,37468)).then(G=>G.AboutCard)}})),Qt=x.provide((0,s.CO)({name:"EntityLinksCard",component:{lazy:()=>e.e(9448).then(e.bind(e,69448)).then(G=>G.EntityLinksCard)}})),Ie=x.provide((0,s.CO)({name:"EntityLabelsCard",component:{lazy:()=>e.e(1296).then(e.bind(e,1296)).then(G=>G.EntityLabelsCard)}})),Be=x.provide((0,s.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(4745).then(e.bind(e,34745)).then(G=>G.HasSystemsCard)}})),ct=x.provide((0,s.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(5932).then(e.bind(e,5932)).then(G=>G.HasComponentsCard)}})),Ot=x.provide((0,s.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(4949).then(e.bind(e,74949)).then(G=>G.HasSubcomponentsCard)}})),bt=x.provide((0,s.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(2842).then(e.bind(e,2842)).then(G=>G.HasResourcesCard)}})),$t=x.provide((0,s.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(748).then(e.bind(e,20748)).then(G=>G.DependsOnComponentsCard)}})),Ct=x.provide((0,s.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(6146).then(e.bind(e,36146)).then(G=>G.DependencyOfComponentsCard)}})),$e=x.provide((0,s.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(7127).then(e.bind(e,47127)).then(G=>G.DependsOnResourcesCard)}})),qe=x.provide((0,s.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(9489).then(e.bind(e,59489)).then(G=>G.RelatedEntitiesCard)}})),Ee=x.provide((0,R.c)({name:"CatalogSearchResultListItem",component:()=>e.e(4329).then(e.bind(e,14329)).then(G=>G.CatalogSearchResultListItem),predicate:G=>G.type==="software-catalog"}))},42214:($n,Vt,e)=>{"use strict";e.d(Vt,{IJ:()=>H,Oz:()=>ut,Q3:()=>Rt,fX:()=>N,i4:()=>w});var o=e(30204),p=e(30705),m=e(1854),Y=e(89393),V=e(49462),D=e(2784),W=e(78373),tt=e(64304),Xe=e(39857),r=e(73557),Ve=e(79692),be=e(27616),X=e(8284),k=e(90436),s=e(4614),ne=e(80030),re=e(69087),ie=e(35111),ve=e(14498),Ce=e(89571),u=e(15584),F=e(49378),R=e(70660),M=e(91256),g=e(37390),Ne=e(95544),Oe=e(67358),Qe=e(27556),se=e(97485),Le=e(61837),_e=e(77277),Ke=e(38016),St=e(69001),L=e(26228),pt=e(49558),fe=e(64279),zt=e(30254),Et=e(34520),Dt=e(82717),Wt=e.n(Dt),Je=e(43266),_t=e(58838),Nt=e(77446),Xt=e(26883);const Ht=(0,o.c)({id:"plugin.githubactions.service"});var Ft=Object.defineProperty,yt=(K,ee,He)=>ee in K?Ft(K,ee,{enumerable:!0,configurable:!0,writable:!0,value:He}):K[ee]=He,Tt=(K,ee,He)=>(yt(K,typeof ee!="symbol"?ee+"":ee,He),He);class wt{constructor(ee){Tt(this,"configApi"),Tt(this,"scmAuthApi"),this.configApi=ee.configApi,this.scmAuthApi=ee.scmAuthApi}async getOctokit(ee="github.com"){var He;const{token:lt}=await this.scmAuthApi.getCredentials({url:`https://${ee}/`,additionalScope:{customScopes:{github:["repo"]}}}),It=(0,m.MY)((He=this.configApi.getOptionalConfigArray("integrations.github"))!=null?He:[]).find(on=>on.host===ee),an=It==null?void 0:It.apiBaseUrl;return new Y.v({auth:lt,baseUrl:an})}async reRunWorkflow(ee){const{hostname:He,owner:lt,repo:Bt,runId:It}=ee;return(await this.getOctokit(He)).actions.reRunWorkflow({owner:lt,repo:Bt,run_id:It})}async listWorkflowRuns(ee){const{hostname:He,owner:lt,repo:Bt,pageSize:It=100,page:an=0,branch:on}=ee;return(await(await this.getOctokit(He)).actions.listWorkflowRunsForRepo({owner:lt,repo:Bt,per_page:It,page:an,...on?{branch:on}:{}})).data}async getWorkflow(ee){const{hostname:He,owner:lt,repo:Bt,id:It}=ee;return(await(await this.getOctokit(He)).actions.getWorkflow({owner:lt,repo:Bt,workflow_id:It})).data}async getWorkflowRun(ee){const{hostname:He,owner:lt,repo:Bt,id:It}=ee;return(await(await this.getOctokit(He)).actions.getWorkflowRun({owner:lt,repo:Bt,run_id:It})).data}async listJobsForWorkflowRun(ee){const{hostname:He,owner:lt,repo:Bt,id:It,pageSize:an=100,page:on=0}=ee;return(await(await this.getOctokit(He)).actions.listJobsForWorkflowRun({owner:lt,repo:Bt,run_id:It,per_page:an,page:on})).data}async downloadJobLogsForWorkflowRun(ee){const{hostname:He,owner:lt,repo:Bt,runId:It}=ee;return(await(await this.getOctokit(He)).actions.downloadJobLogsForWorkflowRun({owner:lt,repo:Bt,job_id:It})).data}}var Jt=(K=>(K[K.success=0]="success",K[K.failure=1]="failure",K[K.pending=2]="pending",K[K.running=3]="running",K))(Jt||{});const Ae=(0,p.NT)({id:"github-actions"}),j=(0,p.Rz)({id:"github-actions/build",path:"/:id",parent:Ae}),E=(0,p.rx)({id:"github-actions",apis:[(0,p.ni)({api:Ht,deps:{configApi:o.p,scmAuthApi:V.Om},factory:({configApi:K,scmAuthApi:ee})=>new wt({configApi:K,scmAuthApi:ee})})],routes:{entityContent:Ae}}),N=E.provide((0,p.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return nn}).then(K=>K.Router),mountPoint:Ae})),Q=E.provide((0,p.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(2546).then(e.bind(e,52546)).then(K=>K.LatestWorkflowRunCard)}})),q=E.provide((0,p.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(2546).then(e.bind(e,52546)).then(K=>K.LatestWorkflowsForBranchCard)}})),Ge=E.provide((0,p.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(2546).then(e.bind(e,52546)).then(K=>K.RecentWorkflowRunsCard)}})),Z="github.com/project-slug",x=K=>{var ee,He;return(He=(ee=K==null?void 0:K.metadata.annotations)==null?void 0:ee[Z])!=null?He:""},he=K=>D.createElement(D.Fragment,null,D.createElement(Fe,{...K}),mt(K));function Fe({status:K,conclusion:ee}){if(K===void 0)return null;switch(K.toLocaleLowerCase("en-US")){case"queued":return D.createElement(pt.wA,null);case"in_progress":return D.createElement(pt.VC,null);case"completed":switch(ee==null?void 0:ee.toLocaleLowerCase("en-US")){case"skipped":return D.createElement(pt.dh,null);case"timed_out":return D.createElement(pt.Pd,null);case"failure":return D.createElement(pt.vK,null);default:return D.createElement(pt.Kq,null)}default:return D.createElement(pt.wA,null)}}function mt({status:K,conclusion:ee}){if(K===void 0)return"";switch(K.toLocaleLowerCase("en-US")){case"queued":return"Queued";case"in_progress":return"In progress";case"completed":switch(ee==null?void 0:ee.toLocaleLowerCase("en-US")){case"skipped":return"Aborted";case"timed_out":return"Timed out";case"failure":return"Error";default:return"Completed"}default:return"Pending"}}const Qt=({hostname:K,owner:ee,repo:He})=>{const lt=(0,o.u)(Ht),{id:Bt}=(0,p.Oi)(j);return(0,fe.default)(async()=>{if(!He||!ee)throw new Error("No repo/owner provided");const It=await lt.listJobsForWorkflowRun({hostname:K,owner:ee,repo:He,id:parseInt(Bt,10)});return{total_count:It.total_count,jobs:It.jobs.map(an=>{var on,fn,tn,cn;return{html_url:(on=an.html_url)!=null?on:void 0,status:an.status,conclusion:(fn=an.conclusion)!=null?fn:void 0,started_at:an.started_at,completed_at:(tn=an.completed_at)!=null?tn:void 0,id:an.id,name:an.name,steps:(cn=an.steps)==null?void 0:cn.map(ln=>{var wn,dn,bn;return{name:ln.name,status:ln.status,conclusion:(wn=ln.conclusion)!=null?wn:void 0,number:ln.number,started_at:(dn=ln.started_at)!=null?dn:void 0,completed_at:(bn=ln.completed_at)!=null?bn:void 0}})}})}},[He,ee,Bt])},Ie=({hostname:K,owner:ee,repo:He})=>{const lt=(0,o.u)(Ht),{id:Bt}=(0,p.Oi)(j);return(0,fe.default)(async()=>He&&ee?lt.getWorkflowRun({hostname:K,owner:ee,repo:He,id:parseInt(Bt,10)}):Promise.reject(new Error("No repo/owner provided")),[He,ee,Bt])},Be=({hostname:K,owner:ee,repo:He,id:lt})=>{const Bt=(0,o.u)(Ht);return(0,fe.default)(async()=>He&&ee?Bt.downloadJobLogsForWorkflowRun({hostname:K,owner:ee,repo:He,runId:lt}):Promise.reject("No repo/owner provided"),[He,ee,lt])},ct=K=>{var ee,He,lt;const Bt=(lt=(ee=K==null?void 0:K.metadata.annotations)==null?void 0:ee[Et.M6])!=null?lt:(He=K==null?void 0:K.metadata.annotations)==null?void 0:He[Et.P1];return Bt!=null&&Bt.startsWith("url:")?Wt()(Bt.slice(4)).resource:void 0},Ot=(0,Ve.Z)(K=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:K.palette.background.default}})),bt=({entity:K,runId:ee,inProgress:He})=>{const lt=Ot(),Bt=x(K),It=ct(K),[an,on]=Bt&&Bt.split("/")||[],fn=Be({hostname:It,owner:an,repo:on,id:ee}),tn=fn.value?String(fn.value):void 0,[cn,ln]=D.useState(!1),wn=()=>{ln(!0)},dn=()=>{ln(!1)};return D.createElement(be.Z,{TransitionProps:{unmountOnExit:!0},disabled:He},D.createElement(X.Z,{expandIcon:D.createElement(Ke.Z,null),IconButtonProps:{className:lt.button}},D.createElement(k.Z,{variant:"button"},fn.loading?D.createElement(s.Z,null):"Job Log"),D.createElement(ne.ZP,{title:"Open Log",TransitionComponent:re.Z,arrow:!0},D.createElement(zt.Z,{onClick:bn=>{bn.stopPropagation(),wn()},style:{marginLeft:"auto"}})),D.createElement(ie.Z,{className:lt.modal,onClick:bn=>bn.stopPropagation(),open:cn,onClose:dn},D.createElement(ve.Z,{in:cn},D.createElement("div",{className:lt.modalLogContainer},D.createElement(pt.nU,{text:tn!=null?tn:"No Values Found",classes:{root:lt.log}}))))),tn&&D.createElement("div",{className:lt.normalLogContainer},D.createElement(pt.nU,{text:tn,classes:{root:lt.log}})))},$t=(0,Ve.Z)(K=>({root:{maxWidth:720,margin:K.spacing(2)},title:{padding:K.spacing(1,0,2,0)},table:{padding:K.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),Ct=(K,ee)=>{if(!K||!ee)return"";const He=L.ou.fromISO(K);return(ee?L.ou.fromISO(ee):L.ou.now()).diff(He).toFormat("m 'minutes' s 'seconds'")},$e=({step:K})=>{var ee;return D.createElement(Ce.Z,null,D.createElement(u.Z,null,D.createElement(F.Z,{primary:K.name,secondary:Ct(K.started_at,K.completed_at)})),D.createElement(u.Z,null,D.createElement(he,{status:K.status.toLocaleUpperCase("en-US"),conclusion:(ee=K.conclusion)==null?void 0:ee.toLocaleUpperCase("en-US")})))},qe=({job:K,className:ee,entity:He})=>{var lt;const Bt=$t();return D.createElement(be.Z,{TransitionProps:{unmountOnExit:!0},className:ee},D.createElement(X.Z,{expandIcon:D.createElement(Ke.Z,null),IconButtonProps:{className:Bt.button}},D.createElement(k.Z,{variant:"button"},K.name," (",Ct(K.started_at,K.completed_at),")")),D.createElement(R.Z,{className:Bt.accordionDetails},D.createElement(M.Z,null,D.createElement(g.Z,null,(lt=K.steps)==null?void 0:lt.map(It=>D.createElement($e,{key:It.number,step:It}))))),K.status==="queued"||K.status==="in_progress"?D.createElement(bt,{runId:K.id,inProgress:!0,entity:He}):D.createElement(bt,{runId:K.id,inProgress:!1,entity:He}))},Ee=({jobs:K,entity:ee})=>{const He=$t();return D.createElement(Ne.Z,null,K&&K.total_count>0&&K.jobs.map(lt=>D.createElement(qe,{key:lt.id,job:lt,className:lt.status!=="success"?He.failed:He.success,entity:ee})))},G=({entity:K})=>{var ee,He,lt,Bt,It,an,on,fn,tn,cn,ln,wn,dn,bn,ce;const ae=x(K),Ze=ct(K),[Pt,Gt]=ae&&ae.split("/")||[],jt=Ie({hostname:Ze,owner:Pt,repo:Gt}),_n=Qt({hostname:Ze,owner:Pt,repo:Gt}),Wn=$t();return jt.error&&jt.error.message?D.createElement(k.Z,{variant:"h6",color:"error"},"Failed to load build, ",jt.error.message):jt.loading?D.createElement(Oe.Z,null):D.createElement("div",{className:Wn.root},D.createElement(Ne.Z,{mb:3},D.createElement(pt.Oo,{"aria-label":"breadcrumb"},D.createElement(pt.rU,{to:".."},"Workflow runs"),D.createElement(k.Z,null,"Workflow run details"))),D.createElement(M.Z,{component:Qe.Z,className:Wn.table},D.createElement(g.Z,null,D.createElement(se.Z,null,D.createElement(Ce.Z,null,D.createElement(u.Z,null,D.createElement(k.Z,{noWrap:!0},"Branch")),D.createElement(u.Z,null,(ee=jt.value)==null?void 0:ee.head_branch)),D.createElement(Ce.Z,null,D.createElement(u.Z,null,D.createElement(k.Z,{noWrap:!0},"Message")),D.createElement(u.Z,null,(lt=(He=jt.value)==null?void 0:He.head_commit)==null?void 0:lt.message)),D.createElement(Ce.Z,null,D.createElement(u.Z,null,D.createElement(k.Z,{noWrap:!0},"Commit ID")),D.createElement(u.Z,null,(It=(Bt=jt.value)==null?void 0:Bt.head_commit)==null?void 0:It.id)),D.createElement(Ce.Z,null,D.createElement(u.Z,null,D.createElement(k.Z,{noWrap:!0},"Workflow")),D.createElement(u.Z,null,(an=jt.value)==null?void 0:an.name)),D.createElement(Ce.Z,null,D.createElement(u.Z,null,D.createElement(k.Z,{noWrap:!0},"Status")),D.createElement(u.Z,null,D.createElement(he,{status:((on=jt.value)==null?void 0:on.status)||void 0,conclusion:((fn=jt.value)==null?void 0:fn.conclusion)||void 0}))),D.createElement(Ce.Z,null,D.createElement(u.Z,null,D.createElement(k.Z,{noWrap:!0},"Author")),D.createElement(u.Z,null,`${(ln=(cn=(tn=jt.value)==null?void 0:tn.head_commit)==null?void 0:cn.author)==null?void 0:ln.name} (${(bn=(dn=(wn=jt.value)==null?void 0:wn.head_commit)==null?void 0:dn.author)==null?void 0:bn.email})`)),D.createElement(Ce.Z,null,D.createElement(u.Z,null,D.createElement(k.Z,{noWrap:!0},"Links")),D.createElement(u.Z,null,((ce=jt.value)==null?void 0:ce.html_url)&&D.createElement(pt.rU,{to:jt.value.html_url},"Workflow runs on GitHub"," ",D.createElement(St.Z,{className:Wn.externalLinkIcon})))),D.createElement(Ce.Z,null,D.createElement(u.Z,{colSpan:2},D.createElement(k.Z,{noWrap:!0},"Jobs"),_n.loading?D.createElement(s.Z,null):D.createElement(Ee,{jobs:_n.value,entity:K})))))))};function ue({hostname:K,owner:ee,repo:He,branch:lt,initialPageSize:Bt=5}){const It=(0,o.u)(Ht),an=(0,o.u)(o.s),[on,fn]=(0,D.useState)(0),[tn,cn]=(0,D.useState)(0),[ln,wn]=(0,D.useState)(Bt),{loading:dn,value:bn,retry:ce,error:ae}=(0,Nt.Z)(async()=>{const Ze=await It.listWorkflowRuns({hostname:K,owner:ee,repo:He,pageSize:ln,page:tn+1,branch:lt});return fn(Ze.total_count),Ze.workflow_runs.map(Pt=>{var Gt,jt,_n,Wn,Gn,dr,gr,Jn,pr;return{workflowName:(Gt=Pt.name)!=null?Gt:void 0,message:(jt=Pt.head_commit)==null?void 0:jt.message,id:`${Pt.id}`,onReRunClick:async()=>{try{await It.reRunWorkflow({hostname:K,owner:ee,repo:He,runId:Pt.id})}catch(Pr){an.post(new Error(`Failed to rerun the workflow: ${Pr.message}`))}},source:{branchName:(_n=Pt.head_branch)!=null?_n:void 0,commit:{hash:(Wn=Pt.head_commit)==null?void 0:Wn.id,url:(gr=(Gn=Pt.head_repository)==null?void 0:Gn.branches_url)==null?void 0:gr.replace("{/branch}",(dr=Pt.head_branch)!=null?dr:"")}},status:(Jn=Pt.status)!=null?Jn:void 0,conclusion:(pr=Pt.conclusion)!=null?pr:void 0,url:Pt.url,githubUrl:Pt.html_url}})},[tn,ln,He,ee]);return[{page:tn,pageSize:ln,loading:dn,runs:bn,projectName:`${ee}/${He}`,total:on,error:ae},{runs:bn,setPage:cn,setPageSize:wn,retry:ce}]}const Ue=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:K=>{const ee=()=>{const He=(0,p.tg)(j);return D.createElement(pt.rU,{component:Xe.rU,to:He({id:K.id})},K.message)};return D.createElement(ee,null)}},{title:"Source",render:K=>{var ee,He;return D.createElement(k.Z,{variant:"body2",noWrap:!0},D.createElement(k.Z,{paragraph:!0,variant:"body2"},(ee=K.source)==null?void 0:ee.branchName),D.createElement(k.Z,{paragraph:!0,variant:"body2"},(He=K.source)==null?void 0:He.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",customSort:(K,ee)=>mt(K).localeCompare(mt(ee)),render:K=>D.createElement(Ne.Z,{display:"flex",alignItems:"center"},D.createElement(he,{status:K.status,conclusion:K.conclusion}))},{title:"Actions",render:K=>D.createElement(ne.ZP,{title:"Rerun workflow"},D.createElement(Le.Z,{onClick:K.onReRunClick},D.createElement(Je.Z,null))),width:"10%"}],nt=({projectName:K,loading:ee,pageSize:He,page:lt,retry:Bt,runs:It,onChangePage:an,onChangePageSize:on,total:fn})=>D.createElement(pt.iA,{isLoading:ee,options:{paging:!0,pageSize:He,padding:"dense"},totalCount:fn,page:lt,actions:[{icon:()=>D.createElement(Xt.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>Bt()}],data:It!=null?It:[],onPageChange:an,onRowsPerPageChange:on,style:{width:"100%"},title:D.createElement(Ne.Z,{display:"flex",alignItems:"center"},D.createElement(_t.Z,null),D.createElement(Ne.Z,{mr:1}),D.createElement(k.Z,{variant:"h6"},K)),columns:Ue}),it=({entity:K,branch:ee})=>{const He=x(K),lt=ct(K),[Bt,It]=(He!=null?He:"/").split("/"),[{runs:an,...on},{retry:fn,setPage:tn,setPageSize:cn}]=ue({hostname:lt,owner:Bt,repo:It,branch:ee}),ln=lt||"github.com";return!on.loading&&!an?D.createElement(pt.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:D.createElement(_e.Z,{variant:"contained",color:"primary",href:`https://${ln}/${He}/actions/new`},"Create new Workflow")}):D.createElement(nt,{...on,runs:an,loading:on.loading,retry:fn,onChangePageSize:cn,onChangePage:tn})},Rt=K=>{var ee;return Boolean((ee=K.metadata.annotations)==null?void 0:ee[Z])};var nn=Object.freeze({__proto__:null,isGithubActionsAvailable:Rt,Router:()=>{const{entity:K}=(0,W.u)();return Rt(K)?D.createElement(r.Z5,null,D.createElement(r.AW,{path:"/",element:D.createElement(it,{entity:K})}),D.createElement(r.AW,{path:`${j.path}`,element:D.createElement(G,{entity:K})}),")"):D.createElement(tt.sk,{annotation:Z})}});const we=(0,Ve.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),De=K=>{var ee;const{error:He,loading:lt,lastRun:Bt,branch:It}=K,an=we();return He?D.createElement(k.Z,null,"Couldn't fetch latest ",It," run"):lt?D.createElement(Oe.Z,null):D.createElement(pt.xT,{metadata:{status:D.createElement(D.Fragment,null,D.createElement(he,{status:Bt.status,conclusion:Bt.conclusion})),message:Bt.message,url:D.createElement(pt.rU,{to:(ee=Bt.githubUrl)!=null?ee:""},"See more on GitHub"," ",D.createElement(St.Z,{className:an.externalLinkIcon}))}})},w=K=>{var ee,He,lt;const{branch:Bt="master",variant:It}=K,{entity:an}=(0,W.u)(),on=(0,o.u)(o.s),fn=ct(an),[tn,cn]=((He=(ee=an==null?void 0:an.metadata.annotations)==null?void 0:ee[Z])!=null?He:"/").split("/"),[{runs:ln,loading:wn,error:dn}]=ue({hostname:fn,owner:tn,repo:cn,branch:Bt}),bn=(lt=ln==null?void 0:ln[0])!=null?lt:{};return(0,D.useEffect)(()=>{dn&&on.post(dn)},[dn,on]),D.createElement(pt.rJ,{title:`Last ${Bt} build`,variant:It},D.createElement(De,{error:dn,loading:wn,branch:Bt,lastRun:bn}))},H=K=>{const{branch:ee="master",variant:He}=K,{entity:lt}=(0,W.u)();return D.createElement(pt.rJ,{title:`Last ${ee} build`,variant:He},D.createElement(it,{branch:ee,entity:lt}))},te=K=>K.split(`
`)[0],ut=K=>{var ee,He;const{branch:lt,dense:Bt=!1,limit:It=5,variant:an}=K,{entity:on}=(0,W.u)(),fn=(0,o.u)(o.s),tn=ct(on),[cn,ln]=((He=(ee=on==null?void 0:on.metadata.annotations)==null?void 0:ee[Z])!=null?He:"/").split("/"),[{runs:wn=[],loading:dn,error:bn}]=ue({hostname:tn,owner:cn,repo:ln,branch:lt,initialPageSize:It});(0,D.useEffect)(()=>{bn&&fn.post(bn)},[bn,fn]);const ce=tn||"github.com",ae=(0,p.tg)(j);return bn?D.createElement(pt.yu,{title:bn.message,error:bn}):D.createElement(pt.rJ,{title:"Recent Workflow Runs",subheader:lt?`Branch: ${lt}`:"All Branches",noPadding:!0,variant:an},wn.length?D.createElement(pt.iA,{isLoading:dn,options:{search:!1,paging:!1,padding:Bt?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:Ze=>{var Pt;return D.createElement(pt.rU,{component:Xe.rU,to:ae({id:Ze.id})},te((Pt=Ze.message)!=null?Pt:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:he}],data:wn}):D.createElement("div",{style:{textAlign:"center"}},D.createElement(k.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),D.createElement(k.Z,{variant:"body2"},D.createElement(pt.rU,{to:`https://${ce}/${cn}/${ln}/actions/new`},"Create a new workflow"))))}},59235:($n,Vt,e)=>{"use strict";e.d(Vt,{$M:()=>_t,Eg:()=>Xt,Jh:()=>Z,Yq:()=>$e,jJ:()=>qe,jQ:()=>Ht,oy:()=>q,qJ:()=>j,rw:()=>Nt,w1:()=>Je});var o=e(30705),p=e(30204),m=e(34520),Y=e(78373),V=e(64304),D=e(79692),W=e(12420),tt=e(60905),Xe=e(95544),r=e(90436),Ve=e(82938),be=e(38402),X=e(86136),k=e(49378),s=e(85256),ne=e(61837),re=e(11776),ie=e(80030),ve=e(9520),Ce=e(76637),u=e(2784),F=e(64279),R=e(49558),M=e(73655),g=e(99688),Ne=e(52866),Oe=e(27604),Qe=e(13384),se=e(62367),Le=e(52160),_e=e(98685),Ke=e(19928),St=e.n(Ke),L=e(14162),pt=e.n(L),fe=e(19126),zt=e.n(fe),Et=e(76635),Dt=e.n(Et);const Wt=(0,o.x8)({id:"catalog-index"}),Je=(0,o.rx)({id:"org",externalRoutes:{catalogIndex:Wt}}),_t=Je.provide((0,o.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(4802).then(e.bind(e,84802)).then(Ee=>Ee.GroupProfileCard)}})),Nt=Je.provide((0,o.CO)({name:"EntityMembersListCard",component:{lazy:()=>e.e(4802).then(e.bind(e,84802)).then(Ee=>Ee.MembersListCard)}})),Xt=Je.provide((0,o.CO)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(4802).then(e.bind(e,84802)).then(Ee=>Ee.OwnershipCard)}})),Ht=Je.provide((0,o.CO)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(4802).then(e.bind(e,84802)).then(Ee=>Ee.UserProfileCard)}})),Ft=async(Ee,G)=>(Ee.length===0?{items:[]}:await G.getEntities({filter:{kind:"User","relations.memberof":Ee.map(Ue=>(0,m.eE)({kind:"group",namespace:Ue.namespace.toLocaleLowerCase("en-US"),name:Ue.name.toLocaleLowerCase("en-US")}))}})).items,yt=async(Ee,G)=>{var ue;const Ue=new Map,it=[{kind:Ee.kind,namespace:(ue=Ee.metadata.namespace)!=null?ue:m.zG,name:Ee.metadata.name}],Rt=[];for(;it.length>0;){const qt=it.shift(),nn=await G.getEntityByRef(qt);Ue.set((0,m.eE)(qt),!0);const we=(0,Y.g)(nn,m._b,{kind:"Group"}).filter(De=>!Ue.has((0,m.eE)(De)));we.forEach(De=>Ue.set((0,m.eE)(De),!0)),it.push(...we),Rt.push(...we)}return Rt},Tt=async(Ee,G)=>Ft(await yt(Ee,G),G),wt=Ee=>{const G=new Map;return Ee.filter(ue=>{const Ue=(0,m.eE)(ue),nt=G.has(Ue);return G.set(Ue,!0),!nt})},Jt=(0,D.Z)(Ee=>(0,W.Z)({card:{border:`1px solid ${Ee.palette.divider}`,boxShadow:Ee.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:Ee.spacing(4,1,1),flex:"1",minWidth:"0px"}})),Ae=Ee=>{var G;const ue=Jt(),{metadata:{name:Ue,description:nt},spec:{profile:it}}=Ee.member,Rt=(G=it==null?void 0:it.displayName)!=null?G:Ue;return u.createElement(tt.Z,{item:!0,container:!0,xs:12,sm:6,md:4,xl:2},u.createElement(Xe.Z,{className:ue.card},u.createElement(Xe.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},u.createElement(R.qE,{displayName:Rt,picture:it==null?void 0:it.picture,customStyles:{position:"absolute",top:"-2rem"}}),u.createElement(Xe.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},u.createElement(r.Z,{variant:"h6"},u.createElement(V.dx,{"data-testid":"user-link",entityRef:Ee.member,title:Rt})),(it==null?void 0:it.email)&&u.createElement(R.rU,{to:`mailto:${it.email}`},u.createElement(R.Or,{text:it.email})),nt&&u.createElement(r.Z,{variant:"subtitle2"},nt)))))},j=Ee=>{var G;const{memberDisplayTitle:ue="Members",pageSize:Ue=50,showAggregateMembersToggle:nt}=Ee,{entity:it}=(0,Y.u)(),{metadata:{name:Rt,namespace:qt},spec:{profile:nn}}=it,we=(0,p.u)(V.Ah),De=(G=nn==null?void 0:nn.displayName)!=null?G:Rt,w=qt||m.zG,[H,te]=u.useState(1),ut=(ln,wn)=>{te(wn)},[K,ee]=(0,u.useState)(!1),{loading:He,value:lt}=(0,F.default)(async()=>nt?await Tt(it,we):[],[we,it,nt]),{loading:Bt,error:It,value:an}=(0,F.default)(async()=>(await we.getEntities({filter:{kind:"User","relations.memberof":[(0,m.eE)({kind:"group",namespace:w.toLocaleLowerCase("en-US"),name:Rt.toLocaleLowerCase("en-US")})]}})).items,[we,it]),on=wt([...an!=null?an:[],...lt&&K?lt:[]].sort((ln,wn)=>(0,m.eE)(ln).localeCompare((0,m.eE)(wn))));if(Bt)return u.createElement(R.Ex,null);if(It)return u.createElement(R.Gk,{error:It});const fn=Math.ceil(((on==null?void 0:on.length)||0)/Ue),tn=fn<2?"":`, page ${H} of ${fn}`,cn=u.createElement(Ce.Z,{count:fn,page:H,onChange:ut,showFirstButton:!0,showLastButton:!0});return u.createElement(tt.Z,{item:!0},u.createElement(R.rJ,{title:`${ue} (${(on==null?void 0:on.length)||0}${tn})`,subheader:`of ${De}`,...fn<=1?{}:{actions:cn}},nt&&u.createElement(u.Fragment,null,"Direct Members",u.createElement(Ve.Z,{color:"primary",checked:K,onChange:()=>{ee(!K)},inputProps:{"aria-label":"Users Type Switch"}}),"Aggregated Members"),K&&He?u.createElement(R.Ex,null):u.createElement(tt.Z,{container:!0,spacing:3},on&&on.length>0?on.slice(Ue*(H-1),Ue*H).map(ln=>u.createElement(Ae,{member:ln,key:ln.metadata.uid})):u.createElement(Xe.Z,{p:2},u.createElement(r.Z,null,"This group has no ",ue.toLocaleLowerCase(),".")))))},E=({href:Ee,Icon:G,text:ue})=>u.createElement(be.Z,{key:Ee},u.createElement(X.Z,null,G?u.createElement(G,null):u.createElement(Le.Z,null)),u.createElement(k.Z,null,u.createElement(R.rU,{to:Ee},ue))),N=({links:Ee})=>{const G=(0,o.qD)(),ue=Ue=>{var nt;return Ue&&(nt=G.getSystemIcon(Ue))!=null?nt:Le.Z};return Ee===void 0?null:u.createElement(u.Fragment,null,u.createElement(s.Z,null),Ee.map(Ue=>u.createElement(E,{key:Ue.url,href:Ue.url,text:Ue.title,Icon:ue(Ue.icon)})))},Q=Ee=>u.createElement(Xe.Z,{display:"flex",alignItems:"center"},u.createElement(se.Z,{fontSize:"inherit"}),u.createElement(Xe.Z,{ml:1},Ee.title)),q=Ee=>{var G,ue,Ue;const nt=(0,p.u)(V.Ah),it=(0,p.u)(p.l),{entity:Rt}=(0,Y.u)(),qt=(0,u.useCallback)(async()=>{await nt.refreshEntity((0,m.eE)(Rt)),it.post({message:"Refresh scheduled",severity:"info",display:"transient"})},[nt,it,Rt]);if(!Rt)return u.createElement(g.Z,{severity:"error"},"Group not found");const{metadata:{name:nn,description:we,title:De,annotations:w,links:H},spec:{profile:te}}=Rt,ut=(0,Y.g)(Rt,m._b,{kind:"Group"}),K=(0,Y.g)(Rt,m.wP,{kind:"group"}),ee=w==null?void 0:w[m.P1],He=(ee==null?void 0:ee.startsWith("url:"))||(ee==null?void 0:ee.startsWith("file:")),lt=(G=Rt.metadata.annotations)==null?void 0:G[m.Tf],Bt=(Ue=(ue=te==null?void 0:te.displayName)!=null?ue:De)!=null?Ue:nn,It=te!=null&&te.email?`mailto:${te.email}`:"#",an=lt?u.createElement(ne.Z,{"aria-label":"Edit",title:"Edit Metadata",component:R.rU,to:lt},u.createElement(Oe.Z,null)):u.createElement(ne.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},u.createElement(Oe.Z,null));return u.createElement(R.rJ,{title:u.createElement(Q,{title:Bt}),subheader:we,variant:Ee.variant,action:u.createElement(u.Fragment,null,He&&u.createElement(ne.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:qt},u.createElement(Ne.Z,null)),an)},u.createElement(tt.Z,{container:!0,spacing:3},u.createElement(tt.Z,{item:!0,xs:12,sm:2,xl:1},u.createElement(R.qE,{displayName:Bt,picture:te==null?void 0:te.picture})),u.createElement(tt.Z,{item:!0,md:10,xl:11},u.createElement(re.Z,null,(te==null?void 0:te.email)&&u.createElement(be.Z,null,u.createElement(X.Z,null,u.createElement(ie.ZP,{title:"Email"},u.createElement(Qe.Z,null))),u.createElement(k.Z,{primary:u.createElement(R.rU,{to:It},te.email),secondary:"Email"})),u.createElement(be.Z,null,u.createElement(X.Z,null,u.createElement(ie.ZP,{title:"Parent Group"},u.createElement(M.Z,null))),u.createElement(k.Z,{primary:K.length?u.createElement(V.rI,{entityRefs:K,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),u.createElement(be.Z,null,u.createElement(X.Z,null,u.createElement(ie.ZP,{title:"Child Groups"},u.createElement(se.Z,null))),u.createElement(k.Z,{primary:ut.length?u.createElement(V.rI,{entityRefs:ut,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),(Ee==null?void 0:Ee.showLinks)&&u.createElement(N,{links:H})))))},Ge=Ee=>Ee.title?u.createElement(Xe.Z,{display:"flex",alignItems:"center"},u.createElement(_e.Z,{fontSize:"inherit"}),u.createElement(Xe.Z,{ml:1},Ee.title)):null,Z=Ee=>{var G,ue;const{entity:Ue}=(0,Y.u)();if(!Ue)return u.createElement(g.Z,{severity:"error"},"User not found");const nt=(G=Ue.metadata.annotations)==null?void 0:G[m.Tf],{metadata:{name:it,description:Rt,links:qt},spec:{profile:nn}}=Ue,we=(ue=nn==null?void 0:nn.displayName)!=null?ue:it,De=nn!=null&&nn.email?`mailto:${nn.email}`:void 0,w=(0,Y.g)(Ue,m.hr,{kind:"Group"});return u.createElement(R.rJ,{title:u.createElement(Ge,{title:we}),subheader:Rt,variant:Ee.variant,action:u.createElement(u.Fragment,null,nt&&u.createElement(ne.Z,{"aria-label":"Edit",title:"Edit Metadata",component:R.rU,to:nt},u.createElement(Oe.Z,null)))},u.createElement(tt.Z,{container:!0,spacing:3,alignItems:"flex-start"},u.createElement(tt.Z,{item:!0,xs:12,sm:2,xl:1},u.createElement(R.qE,{displayName:we,picture:nn==null?void 0:nn.picture})),u.createElement(tt.Z,{item:!0,md:10,xl:11},u.createElement(re.Z,null,(nn==null?void 0:nn.email)&&u.createElement(be.Z,null,u.createElement(X.Z,null,u.createElement(ie.ZP,{title:"Email"},u.createElement(Qe.Z,null))),u.createElement(k.Z,null,u.createElement(R.rU,{to:De!=null?De:""},nn.email))),u.createElement(be.Z,null,u.createElement(X.Z,null,u.createElement(ie.ZP,{title:"Member of"},u.createElement(se.Z,null))),u.createElement(k.Z,null,u.createElement(V.rI,{entityRefs:w,defaultKind:"Group"}))),(Ee==null?void 0:Ee.showLinks)&&u.createElement(N,{links:qt})))))},x=pt()(10),he=(Ee,G)=>{const{kind:ue,type:Ue}=G,nt=Ee.map(Rt=>(0,V.$3)((0,m.of)(Rt),{defaultKind:"group"})),it={kind:ue.toLocaleLowerCase("en-US"),type:Ue,owners:nt,user:"all"};return zt().stringify({filters:it},{arrayFormat:"repeat"})},Fe=Ee=>[...(0,Y.g)(Ee,m.hr,{kind:"Group"}).map(({kind:Ue,namespace:nt,name:it})=>(0,m.eE)({kind:Ue,namespace:nt,name:it})),(0,m.eE)(Ee)],mt=Ee=>Ee!==void 0,Qt=async(Ee,G,ue=[])=>{const Ue=(0,Y.g)(Ee,m._b,{kind:"Group"}),nt=Ue.length>0,it=(0,m.eE)(Ee);if(nt){const Rt=Ue.map(w=>(0,m.eE)(w)),we=(await G.getEntitiesByRefs({fields:["kind","metadata.namespace","metadata.name","relations"],entityRefs:Rt})).items.filter(mt).filter(w=>!ue.includes((0,m.eE)(w))),De=(await Promise.all(we.map(w=>x(()=>Qt(w,G,[...ue,it]))))).flatMap(w=>w);return(0,Et.uniq)([...De,it])}return[it]},Ie=async(Ee,G,ue)=>{const Ue=Ee.kind==="Group",nt=G==="aggregated",it=Ee.kind==="User";return nt&&Ue?Qt(Ee,ue):nt&&it?Fe(Ee):[(0,m.eE)(Ee)]},Be=(Ee,G,ue)=>ue.getEntities({filter:[{kind:G,"relations.ownedBy":Ee}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]});function ct(Ee,G,ue,Ue=6){const nt=(0,p.u)(V.Ah),it=ue!=null?ue:["Component","API","System"],{loading:Rt,error:qt,value:nn}=(0,F.default)(async()=>{const we=await Ie(Ee,G,nt);return(await Be(we,it,nt)).items.reduce((te,ut)=>{var K,ee;const He=te.find(lt=>{var Bt;return lt.kind===ut.kind&&lt.type===((Bt=ut.spec)==null?void 0:Bt.type)});return He?He.count+=1:te.push({kind:ut.kind,type:(ee=(K=ut.spec)==null?void 0:K.type)==null?void 0:ee.toString(),count:1}),te},[]).sort((te,ut)=>ut.count-te.count).slice(0,Ue).map(te=>({counter:te.count,type:te.type,kind:te.kind,queryParams:he(we,te)}))},[nt,Ee,G]);return{componentsWithCounters:nn,loading:Rt,error:qt}}const Ot=(0,D.Z)(Ee=>(0,W.Z)({card:{border:`1px solid ${Ee.palette.divider}`,boxShadow:Ee.shadows[2],borderRadius:"4px",padding:Ee.spacing(2),transition:`${Ee.transitions.duration.standard}ms`,"&:hover":{boxShadow:Ee.shadows[4]},height:"100%"},bold:{fontWeight:Ee.typography.fontWeightBold},smallFont:{fontSize:Ee.typography.body2.fontSize},entityTypeBox:{background:G=>Ee.getPageTheme({themeId:G.type}).backgroundImage,color:G=>Ee.getPageTheme({themeId:G.type}).fontColor}})),bt=({counter:Ee,type:G,kind:ue,url:Ue})=>{const nt=Ot({type:G!=null?G:ue}),it=G!=null?G:ue,Rt=it.length>10;return u.createElement(R.rU,{to:Ue,variant:"body2"},u.createElement(Xe.Z,{className:`${nt.card} ${nt.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},u.createElement(r.Z,{className:nt.bold,variant:"h6"},Ee),u.createElement(Xe.Z,{sx:{width:"100%",textAlign:"center"}},u.createElement(r.Z,{className:`${nt.bold} ${Rt&&nt.smallFont}`,variant:"h6"},u.createElement(R.Or,{text:St()(it.toLocaleUpperCase("en-US"),Ee)}))),G&&u.createElement(r.Z,{variant:"subtitle1"},ue)))},$t=({entity:Ee,relationsType:G,entityFilterKind:ue,entityLimit:Ue=6})=>{const nt=(0,o.tg)(Wt),{componentsWithCounters:it,loading:Rt,error:qt}=ct(Ee,G,ue,Ue);return Rt?u.createElement(R.Ex,null):qt?u.createElement(R.Gk,{error:qt}):u.createElement(tt.Z,{container:!0},it==null?void 0:it.map(nn=>{var we;return u.createElement(tt.Z,{item:!0,xs:6,md:6,lg:4,key:(we=nn.type)!=null?we:nn.kind},u.createElement(bt,{counter:nn.counter,kind:nn.kind,type:nn.type,url:`${nt()}/?${nn.queryParams}`}))}))},Ct=(0,D.Z)(Ee=>({list:{[Ee.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[Ee.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[Ee.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),$e=Ee=>{const{variant:G,entityFilterKind:ue,hideRelationsToggle:Ue,relationsType:nt,entityLimit:it=6}=Ee,Rt=Ue===void 0?!1:Ue,qt=Ct(),{entity:nn}=(0,Y.u)(),we=nn.kind==="User"?"aggregated":"direct",[De,w]=(0,u.useState)(nt!=null?nt:we);return(0,u.useEffect)(()=>{nt||w(we)},[w,we,nt]),u.createElement(R.rJ,{title:"Ownership",variant:G},!Rt&&u.createElement(re.Z,{dense:!0},u.createElement(be.Z,{className:qt.list},u.createElement(k.Z,{className:qt.listItemText}),u.createElement(ve.Z,{className:qt.listItemSecondaryAction},"Direct Relations",u.createElement(ie.ZP,{placement:"top",arrow:!0,title:`${De==="direct"?"Direct":"Aggregated"} Relations`},u.createElement(Ve.Z,{color:"primary",checked:De!=="direct",onChange:()=>{w(De==="direct"?"aggregated":"direct")},name:"pin",inputProps:{"aria-label":"Ownership Type Switch"}})),"Aggregated Relations"))),u.createElement($t,{entity:nn,entityLimit:it,relationsType:De,entityFilterKind:ue}))},qe=Ee=>{const{singularTitle:G,pluralTitle:ue,icon:Ue,filter:nt}=Ee,it=(0,p.u)(p.v),Rt=(0,p.u)(V.Ah),qt=(0,o.tg)(V.wi),{value:nn}=(0,F.default)(async()=>{const we=await it.getBackstageIdentity();return(await Rt.getEntities({filter:[{kind:"group","relations.hasMember":we.userEntityRef,...nt!=null?nt:{}}],fields:["metadata","kind"]})).items},[]);if(!(nn!=null&&nn.length))return null;if(nn.length===1){const we=nn[0];return u.createElement(R.R6,{text:G,to:qt((0,m.iB)(we)),icon:Ue})}return u.createElement(R.R6,{icon:Ue,text:ue},u.createElement(R.k2,{title:ue},nn==null?void 0:nn.map(function(De){return u.createElement(R.BT,{title:De.metadata.title||De.metadata.name,subtitle:De.metadata.namespace!==m.zG?De.metadata.namespace:void 0,to:qt((0,m.iB)(De)),icon:Ue,key:(0,m.eE)(De)})})))}},5083:($n,Vt,e)=>{"use strict";e.d(Vt,{J$:()=>k,Y2:()=>F,g2:()=>tt,rG:()=>D});var o=e(32272),p=e(96279),m=e.n(p),Y=e(9571),V=e(30195),D=(R=>(R.DENY="DENY",R.ALLOW="ALLOW",R.CONDITIONAL="CONDITIONAL",R))(D||{});function W(R,M){return R.name===M.name}function tt(R,M){return"resourceType"in R?!M||R.resourceType===M:!1}function Xe(R){return R.attributes.action==="create"}function r(R){return R.attributes.action==="read"}function Ve(R){return R.attributes.action==="update"}function be(R){return R.attributes.action==="delete"}function X(R){return{authorize:async(M,g)=>await R.authorize(M,g),authorizeConditional(M,g){const Ne=M;return R.authorize(Ne,g)}}}function k({name:R,attributes:M,resourceType:g}){return g?{type:"resource",name:R,attributes:M,resourceType:g}:{type:"basic",name:R,attributes:M}}var s=Object.defineProperty,ne=(R,M,g)=>M in R?s(R,M,{enumerable:!0,configurable:!0,writable:!0,value:g}):R[M]=g,re=(R,M,g)=>(ne(R,typeof M!="symbol"?M+"":M,g),g);const ie=V.z.lazy(()=>V.z.object({rule:V.z.string(),resourceType:V.z.string(),params:V.z.record(V.z.any()).optional()}).or(V.z.object({anyOf:V.z.array(ie).nonempty()})).or(V.z.object({allOf:V.z.array(ie).nonempty()})).or(V.z.object({not:ie}))),ve=V.z.object({result:V.z.literal(D.ALLOW).or(V.z.literal(D.DENY))}),Ce=V.z.union([V.z.object({result:V.z.literal(D.ALLOW).or(V.z.literal(D.DENY))}),V.z.object({result:V.z.literal(D.CONDITIONAL),pluginId:V.z.string(),resourceType:V.z.string(),conditions:ie})]),u=(R,M)=>V.z.object({items:V.z.array(V.z.intersection(V.z.object({id:V.z.string()}),R)).refine(g=>g.length===M.size&&g.every(({id:Ne})=>M.has(Ne)),{message:"Items in response do not match request"})});class F{constructor(M){re(this,"enabled"),re(this,"discovery");var g;this.discovery=M.discovery,this.enabled=(g=M.config.getOptionalBoolean("permission.enabled"))!=null?g:!1}async authorize(M,g){return this.makeRequest(M,ve,g)}async authorizeConditional(M,g){return this.makeRequest(M,Ce,g)}async makeRequest(M,g,Ne){if(!this.enabled)return M.map(St=>({result:D.ALLOW}));const Oe={items:M.map(St=>({id:Y.Z(),...St}))},Qe=await this.discovery.getBaseUrl("permission"),se=await m()(`${Qe}/authorize`,{method:"POST",body:JSON.stringify(Oe),headers:{...this.getAuthorizationHeader(Ne==null?void 0:Ne.token),"content-type":"application/json"}});if(!se.ok)throw await o.VL.fromResponse(se);const Le=await se.json(),Ke=u(g,new Set(Oe.items.map(({id:St})=>St))).parse(Le).items.reduce((St,L)=>(St[L.id]=L,St),{});return Oe.items.map(St=>Ke[St.id])}getAuthorizationHeader(M){return M?{Authorization:`Bearer ${M}`}:{}}}},56563:($n,Vt,e)=>{"use strict";e.d(Vt,{RV:()=>D,gI:()=>tt,iM:()=>W,un:()=>r});var o=e(2784),p=e(30204),m=e(30705),Y=e(5083),V=e(69984);const D=(0,p.c)({id:"plugin.permission.api"});class W{constructor(be,X){this.permissionClient=be,this.identityApi=X}static create(be){const{config:X,discovery:k,identity:s}=be,ne=new Y.Y2({discovery:k,config:X});return new W(ne,s)}async authorize(be){return(await this.permissionClient.authorize([be],await this.identityApi.getCredentials()))[0]}}function tt(Ve){const be=(0,p.u)(D),{data:X,error:k}=(0,V.ZP)(Ve,async s=>{if((0,Y.g2)(s.permission)&&!s.resourceRef)return Y.rG.DENY;const{result:ne}=await be.authorize(s);return ne});return k?{error:k,loading:!1,allowed:!1}:X===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:X===Y.rG.ALLOW}}const Xe=Ve=>{const{permission:be,resourceRef:X,errorComponent:k,...s}=Ve,ne=tt(isResourcePermission(be)?{permission:be,resourceRef:X}:{permission:be}),re=useApp(),{NotFoundErrorPage:ie}=re.getComponents();let ve=k===void 0?React.createElement(ie,null):k;return ne.loading?ve=null:ne.allowed&&(ve=Ve.element),React.createElement(Route,{...s,element:ve})};function r(Ve){const{permission:be,resourceRef:X}=Ve,k=tt((0,Y.g2)(be)?{permission:be,resourceRef:X}:{permission:be}),s=(0,m.qD)();if(k.loading)return null;if(k.allowed)return o.createElement(o.Fragment,null,Ve.children);if(Ve.errorPage)return o.createElement(o.Fragment,null,Ve.errorPage);const{NotFoundErrorPage:ne}=s.getComponents();return o.createElement(ne,null)}},67898:($n,Vt,e)=>{"use strict";e.d(Vt,{t:()=>r});var o=e(34520),p="http://json-schema.org/draft-07/schema",m="TemplateV1beta3",Y="A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.",V=[{apiVersion:"scaffolder.backstage.io/v1beta3",kind:"Template",metadata:{name:"react-ssr-template",title:"React SSR Template",description:"Next.js application skeleton for creating isomorphic web applications.",tags:["recommended","react"]},spec:{owner:"artist-relations-team",type:"website",parameters:{required:["name","description","repoUrl"],"backstage:permissions":{tags:["one","two"]},properties:{name:{title:"Name",type:"string",description:"Unique name of the component"},description:{title:"Description",type:"string",description:"Description of the component"},repoUrl:{title:"Pick a repository",type:"string","ui:field":"RepoUrlPicker"}}},steps:[{id:"fetch",name:"Fetch",action:"fetch:plain",parameters:{url:"./template"},"backstage:permissions":{tags:["one","two"]}},{id:"publish",name:"Publish to GitHub",action:"publish:github",parameters:{repoUrl:"${{ parameters.repoUrl }}"},if:"${{ parameters.repoUrl }}"}],output:{catalogInfoUrl:"${{ steps.publish.output.catalogInfoUrl }}"}}}],D=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["scaffolder.backstage.io/v1beta3"]},kind:{enum:["Template"]},spec:{type:"object",required:["type","steps"],properties:{type:{type:"string",description:"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.",examples:["service","website","library"],minLength:1},owner:{type:"string",description:"The user (or group) owner of the template",minLength:1},parameters:{oneOf:[{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}},{type:"array",description:"A list of separate forms to collect parameters.",items:{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}}}]},steps:{type:"array",description:"A list of steps to execute.",items:{type:"object",description:"A description of the step to execute.",required:["action"],properties:{id:{type:"string",description:"The ID of the step, which can be used to refer to its outputs."},name:{type:"string",description:"The name of the step, which will be displayed in the UI during the scaffolding process."},action:{type:"string",description:"The name of the action to execute."},input:{type:"object",description:"A templated object describing the inputs to the action."},if:{type:["string","boolean"],description:'A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `""`, `0`, or `[]`.'},"backstage:permissions":{type:"object",description:"Object used for authorizing the step",properties:{tags:{type:"array",items:{type:"string"}}}}}}},output:{type:"object",description:"A templated object describing the outputs of the scaffolding task.",properties:{links:{type:"array",description:"A list of external hyperlinks, typically pointing to resources created or updated by the template",items:{type:"object",required:[],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://github.com/my-org/my-new-repo"],minLength:1},entityRef:{type:"string",description:"An entity reference to an entity in the catalog.",examples:["Component:default/my-app"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["View new repo"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}},text:{type:"array",description:"A list of Markdown text blobs, like output data from the template.",items:{type:"object",required:[],properties:{title:{type:"string",description:"A user friendly display name for the text.",examples:["Output Content"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},content:{type:"string",description:"The text blob to display in the UI, rendered as Markdown.",examples:["**hey** _I'm_ Markdown"]}}}}},additionalProperties:{type:"string"}}}}}}],W={$schema:p,$id:m,description:Y,examples:V,allOf:D};const tt=(0,o.wI)(W),Xe={async check(Ve){return tt(Ve)===Ve}},r=Ve=>Ve.apiVersion==="scaffolder.backstage.io/v1beta3"&&Ve.kind==="Template"},31011:($n,Vt,e)=>{"use strict";e.d(Vt,{Iy:()=>Wn,Lp:()=>Pr,_G:()=>Tr,br:()=>it,h4:()=>Ze,l0:()=>It,mg:()=>Ee,ow:()=>ce,v9:()=>vr,vF:()=>on,zP:()=>Ye});var o=e(30204),p=e(30705),m=e(79692),Y=e(42494),V=e(90436),D=e(67358),W=e(31625),tt=e(31377),Xe=e(34546),r=e(77277),Ve=e(60364),be=e(94339),X=e(24579),k=e(60905),s=e(95544),ne=e(85256),re=e(7089),ie=e(14503),ve=e(27556),Ce=e(4614),u=e(97136),F=e(5806),R=e(21324),M=e(86619),g=e(2784),Ne=e(51251),Oe=e(49558),Qe=e(11280),se=e(19126),Le=e.n(se),_e=e(64279),Ke=e(60885),St=e(9850),L=e.n(St),pt=e(95303),fe=e(93804),zt=e(90137),Et=e(34520),Dt=e(64304),Wt=e(78373),Je=e(52160),_t=e(67898),Nt=e(27057),Xt=e(71140),Ht=e(34063),Ft=e(72779),yt=e.n(Ft),Tt=e(34812),wt=e(91750),Jt=e(70218),Ae=e(26228),j=e(75951),E=e.n(j),N=e(52084),Q=e(82108),q=e.n(Q),Ge=e(19996),Z=e(25505),x=e(38016),he=e(88013),Fe=e(61837),mt=e(86136),Qt=e(49378),Ie=e(12231),Be=e(50758),ct=e(79784),Ot=e(30254),bt=e(27604),$t=e(33882),Ct=e(43054);function $e(C){return typeof C=="object"&&C!==null&&!Array.isArray(C)}function qe(C,_){if(!$e(C))return;const{properties:O,items:T,anyOf:me,oneOf:ye,allOf:le,dependencies:Pe,then:ke,else:We}=C;for(const ht in C)C.hasOwnProperty(ht)&&ht.startsWith("ui:")&&(_[ht]=C[ht],delete C[ht]);if($e(O))for(const ht in O){if(!O.hasOwnProperty(ht))continue;const rn=O[ht];if(!$e(rn))continue;const en={};_[ht]=en,qe(rn,en)}if($e(T)){const ht={};_.items=ht,qe(T,ht)}if(Array.isArray(me))for(const ht of me)$e(ht)&&qe(ht,_);if(Array.isArray(ye))for(const ht of ye)$e(ht)&&qe(ht,_);if(Array.isArray(le))for(const ht of le)$e(ht)&&qe(ht,_);if($e(Pe))for(const ht of Object.keys(Pe)){const rn=Pe[ht];$e(rn)&&qe(rn,_)}$e(ke)&&qe(ke,_),$e(We)&&qe(We,_)}const Ee=C=>{const _={},O=JSON.parse(JSON.stringify(C));return qe(O,_),{uiSchema:_,schema:O}},G=()=>{const C={__errors:[],addError:_=>{var O;(O=C.__errors)==null||O.push(_)}};return C};function ue(C){return!!C&&"__errors"in C}function Ue(C){var _;if(!C)return!1;for(const O of Object.values(C)){if(ue(O)){if(((_=O.__errors)!=null?_:[]).length>0)return!0;continue}if(Ue(O))return!0}return!1}function nt(C){return typeof C=="object"&&C!==null&&!Array.isArray(C)}const it=(C,_,O)=>{async function T(me,ye="#",le=me){var Pe,ke;const We=new Ne.NL(C),ht={},rn=async(en,Ut,gn,pn,hn)=>{const En=_[en];if(En){const Cn=G();try{await En(gn,Cn,{...O,formData:me,schema:pn,uiSchema:hn})}catch(Yn){Cn.addError(Yn.message)}ht[Ut]=Cn}};for(const[en,Ut]of Object.entries(le)){const gn=`${ye}/${en}`,pn=We.getSchema(gn,me),{schema:hn,uiSchema:En}=Ee(pn),Cn=pn&&pn.items,Yn=async(In,Ln,Zn)=>{await rn(In["ui:field"],en,Ut,Ln,Zn)},Hn=async In=>{if("ui:field"in In){const{schema:Ln,uiSchema:Zn}=Ee(pn.items);await Yn(In,Ln,Zn)}};if(pn&&"ui:field"in pn)await Yn(pn,hn,En);else if(Cn&&"ui:field"in pn.items)await Hn(pn.items);else if(Cn&&pn.items.type==="object"){const In=(ke=(Pe=pn.items)==null?void 0:Pe.properties)!=null?ke:[];for(const[,Ln]of Object.entries(In))await Hn(Ln)}else nt(Ut)&&(ht[en]=await T(me,gn,Ut))}return ht}return async me=>await T(me)},Rt=C=>{const _=Object.fromEntries(Object.entries(C.formState).map(([O,T])=>{var me;for(const ye of C.schemas){const Pe=new Ne.NL(ye.mergedSchema).getSchema(`#/${O}`,C.formState);if(Pe){const ke=(me=Pe["ui:backstage"])==null?void 0:me.review;if(ke){if(ke.mask)return[O,ke.mask];if(ke.show===!1)return[]}if(Pe["ui:widget"]==="password")return[O,"******"]}}return[O,T]}));return g.createElement(Oe.xT,{metadata:_})},qt=C=>{const _=(0,o.u)(o.f),T=C.steps.map(({title:me,description:ye,schema:le})=>({title:me,description:ye,mergedSchema:le,...Ee(le)})).filter(me=>{var ye;const le=(ye=me.uiSchema["ui:backstage"])==null?void 0:ye.featureFlag;return le?_.isActive(le):!0}).map(me=>{var ye,le;return{...me,schema:{...me.schema,title:void 0,properties:Object.fromEntries(Object.entries((le=(ye=me.schema)==null?void 0:ye.properties)!=null?le:[]).filter(([Pe])=>{var ke,We;const ht=(We=(ke=me.uiSchema[Pe])==null?void 0:ke["ui:backstage"])==null?void 0:We.featureFlag;return ht?_.isActive(ht):!0}))}}});return{presentation:C.presentation,steps:T}},nn=C=>(0,g.useState)(()=>{if(C)return C;const _=Le().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(_.formData)}catch{return{}}}),we=C=>{const _=(0,o.u)(Ke.s),{value:O,loading:T,error:me}=(0,_e.default)(()=>_.getTemplateParameterSchema(C),[_,C]);return{manifest:O,loading:T,error:me}},De=C=>{const _="backstage:featureFlag",O=(0,o.u)(o.f);if(!C)return;const T=C==null?void 0:C.steps.filter(me=>{const ye=me.schema[_];return typeof ye!="string"||O.isActive(ye)}).map(me=>{var ye;const le=L()(me),Pe=[];return le.schema.properties&&(le.schema.properties=Object.fromEntries(Object.entries(le.schema.properties).filter(([ke,We])=>We[_]?O.isActive(We[_])?!0:(Pe.push(ke),!1):!0)),le.schema.required=Array.isArray(le.schema.required)?(ye=le.schema.required)==null?void 0:ye.filter(ke=>!Pe.includes(ke)):le.schema.required),le});return{...C,steps:T}},w=(C,_={})=>{var O;const{layouts:T=[]}=_,me=C==null?void 0:C.uiSchema["ui:ObjectFieldTemplate"];if(typeof me!="string")return C;const ye=(O=T.find(le=>le.name===me))==null?void 0:O.component;return ye?{...C,uiSchema:{...C.uiSchema,["ui:ObjectFieldTemplate"]:ye}}:C};var te=Object.freeze({__proto__:null,DescriptionField:({description:C})=>C&&g.createElement(Oe.SA,{content:C,linkTarget:"_blank"})});const ut=(0,m.Z)(C=>({markdownDescription:{fontSize:C.typography.caption.fontSize,margin:0,color:C.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),K=C=>{const{children:_,displayLabel:O=!0,rawErrors:T=[],errors:me,help:ye,rawDescription:le,required:Pe,disabled:ke}=C,We=ut();return g.createElement(Y.Z,{fullWidth:!0,error:!!T.length,required:Pe,disabled:ke},_,O&&le?g.createElement(Oe.SA,{content:le,className:We.markdownDescription}):null,me,ye)},ee=C=>{const{id:_,children:O,classNames:T,style:me,disabled:ye,displayLabel:le,hidden:Pe,label:ke,onDropPropertyClick:We,onKeyChange:ht,readonly:rn,required:en,rawErrors:Ut=[],errors:gn,help:pn,rawDescription:hn,schema:En,uiSchema:Cn,registry:Yn}=C,Hn=(0,fe.LI)(Cn),In=(0,fe.t4)("WrapIfAdditionalTemplate",Yn,Hn);return Pe?g.createElement("div",{style:{display:"none"}},O):g.createElement(In,{classNames:T,style:me,disabled:ye,id:_,label:ke,onDropPropertyClick:We,onKeyChange:ht,readonly:rn,required:en,schema:En,uiSchema:Cn,registry:Yn},g.createElement(K,{displayLabel:le,rawErrors:Ut,help:pn,disabled:ye,rawDescription:hn,errors:gn,required:en},O))},He=(0,m.Z)(C=>({markdownDescription:{fontSize:C.typography.caption.fontSize,margin:0,color:C.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),lt=C=>{const{id:_,description:O}=C,T=He();return O?typeof O=="string"?g.createElement(Oe.SA,{content:O,className:T.markdownDescription}):g.createElement(V.Z,{id:_,variant:"subtitle2",style:{marginTop:"5px"}},O):null},Bt=(0,pt.Zz)(zt.Q2),It=C=>{const _=g.useMemo(()=>{var T;return Object.fromEntries(Object.entries((T=C.fields)!=null?T:{}).map(([me,ye])=>[me,le=>{var Pe,ke;return g.createElement(ye,{...le,uiSchema:(Pe=le.uiSchema)!=null?Pe:{},formData:le.formData,rawErrors:(ke=le.rawErrors)!=null?ke:[]})}]))},[C.fields]),O=g.useMemo(()=>({FieldTemplate:ee,DescriptionFieldTemplate:lt,...C.templates}),[C.templates]);return g.createElement(Bt,{...C,templates:O,fields:_})},an=(0,m.Z)(C=>({backButton:{marginRight:C.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:C.spacing(2)},formWrapper:{padding:C.spacing(2)}})),on=C=>{var _,O,T,me,ye,le,Pe;const{layouts:ke=[],components:We={},...ht}=C,{ReviewStateComponent:rn=Rt,ReviewStepComponent:en,backButtonText:Ut="Back",createButtonText:gn="Create",reviewButtonText:pn="Review"}=We,hn=(0,p.z$)(),{presentation:En,steps:Cn}=qt(ht.manifest),Yn=(0,o.b)(),[Hn,In]=(0,g.useState)(0),[Ln,Zn]=(0,g.useState)(!1),[sn,Rn]=nn(ht.initialState),[tr,ir]=(0,g.useState)(),Cr=an(),Mr=(0,g.useMemo)(()=>Object.fromEntries(ht.extensions.map(({name:nr,component:rr})=>[nr,rr])),[ht.extensions]),Rr=(0,g.useMemo)(()=>({...te,...Mr}),[Mr]),Vr=(0,g.useMemo)(()=>Object.fromEntries(ht.extensions.map(({name:nr,validation:rr})=>[nr,rr])),[ht.extensions]),kr=(0,g.useMemo)(()=>{var nr;return it((nr=Cn[Hn])==null?void 0:nr.mergedSchema,Vr,{apiHolder:Yn})},[Cn,Hn,Vr,Yn]),Ur=()=>{In(nr=>nr-1)},Nr=(0,g.useCallback)(nr=>Rn(rr=>({...rr,...nr.formData})),[Rn]),Hr=(0,g.useCallback)(()=>{var nr;ht.onCreate(sn);const rr=typeof sn.name=="string"?sn.name:void 0;hn.captureEvent("create",(nr=rr!=null?rr:ht.templateName)!=null?nr:"unknown")},[ht,sn,hn]),qr=w(Cn[Hn],{layouts:ke}),ea=async({formData:nr={}})=>{ir(void 0),Zn(!0);const rr=await kr(nr);Zn(!1),Ue(rr)?ir(rr):(ir(void 0),In(ua=>{const hr=ua+1;return hn.captureEvent("click",`Next Step (${hr})`),hr})),Rn(ua=>({...ua,...nr}))},pa=(O=(_=En==null?void 0:En.buttonLabels)==null?void 0:_.backButtonText)!=null?O:Ut,ta=(me=(T=En==null?void 0:En.buttonLabels)==null?void 0:T.createButtonText)!=null?me:gn,yr=(le=(ye=En==null?void 0:En.buttonLabels)==null?void 0:ye.reviewButtonText)!=null?le:pn;return g.createElement(g.Fragment,null,Ln&&g.createElement(D.Z,{variant:"indeterminate"}),g.createElement(W.Z,{activeStep:Hn,alternativeLabel:!0,variant:"elevation"},Cn.map((nr,rr)=>g.createElement(tt.Z,{key:rr},g.createElement(Xe.Z,null,nr.title))),g.createElement(tt.Z,null,g.createElement(Xe.Z,null,"Review"))),g.createElement("div",{className:Cr.formWrapper},Hn<Cn.length?g.createElement(It,{validator:Qe.ZP,extraErrors:tr,formData:sn,formContext:{formData:sn},schema:qr.schema,uiSchema:qr.uiSchema,onSubmit:ea,fields:Rr,showErrorList:!1,onChange:Nr,...(Pe=ht.formProps)!=null?Pe:{}},g.createElement("div",{className:Cr.footer},g.createElement(r.Z,{onClick:Ur,className:Cr.backButton,disabled:Hn<1||Ln},pa),g.createElement(r.Z,{variant:"contained",color:"primary",type:"submit",disabled:Ln},Hn===Cn.length-1?yr:"Next"))):en?g.createElement(en,{disableButtons:Ln,formData:sn,handleBack:Ur,handleReset:()=>{},steps:Cn,handleCreate:Hr}):g.createElement(g.Fragment,null,g.createElement(rn,{formState:sn,schemas:Cn}),g.createElement("div",{className:Cr.footer},g.createElement(r.Z,{onClick:Ur,className:Cr.backButton,disabled:Hn<1},"Back"),g.createElement(r.Z,{variant:"contained",color:"primary",onClick:Hr},ta)))))},fn=(0,m.Z)(()=>({header:{backgroundImage:({cardBackgroundImage:C})=>C,color:({cardFontColor:C})=>C},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),tn=C=>{const{template:{metadata:{title:_,name:O},spec:{type:T}}}=C,{getPageTheme:me}=(0,Ve.Z)(),ye=me({themeId:T}),le=fn({cardFontColor:ye.fontColor,cardBackgroundImage:ye.backgroundImage}),Pe=g.createElement("div",{className:le.subtitleWrapper},g.createElement("div",null,T),g.createElement("div",null,g.createElement(Dt.LH,{entity:C.template,style:{padding:0}})));return g.createElement(Oe.hu,{title:_!=null?_:O,subtitle:Pe,classes:{root:le.header}})},cn=(0,m.Z)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),ln=({icon:C,text:_,url:O})=>{const T=cn();return g.createElement("div",{className:T.linkText},g.createElement(C,{fontSize:"small"}),g.createElement(Oe.rU,{style:{marginLeft:"8px"},to:O},_||O))},wn=(0,m.Z)(C=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:C.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:C.palette.link}})),dn=C=>{var _,O,T,me,ye,le,Pe;const{template:ke}=C,We=wn(),ht=(0,Wt.g)(ke,Et.S4),rn=(0,p.qD)(),en=Ut=>{var gn;return Ut&&(gn=rn.getSystemIcon(Ut))!=null?gn:Je.Z};return g.createElement(be.Z,null,g.createElement(tn,{template:ke}),g.createElement(X.Z,null,g.createElement(k.Z,{container:!0,spacing:2},g.createElement(k.Z,{item:!0,xs:12},g.createElement(s.Z,{className:We.box},g.createElement(Oe.SA,{className:We.markdown,content:(_=ke.metadata.description)!=null?_:"No description"}))),((T=(O=ke.metadata.tags)==null?void 0:O.length)!=null?T:0)>0&&g.createElement(g.Fragment,null,g.createElement(k.Z,{item:!0,xs:12},g.createElement(ne.Z,null)),g.createElement(k.Z,{item:!0,xs:12},g.createElement(k.Z,{container:!0,spacing:2},(me=ke.metadata.tags)==null?void 0:me.map(Ut=>g.createElement(k.Z,{item:!0},g.createElement(re.Z,{style:{margin:0},size:"small",label:Ut,key:Ut})))))),(C.additionalLinks||((ye=ke.metadata.links)==null?void 0:ye.length))&&g.createElement(g.Fragment,null,g.createElement(k.Z,{item:!0,xs:12},g.createElement(ne.Z,null)),g.createElement(k.Z,{item:!0,xs:12},g.createElement(k.Z,{container:!0,spacing:2},(le=C.additionalLinks)==null?void 0:le.map(({icon:Ut,text:gn,url:pn},hn)=>g.createElement(k.Z,{className:We.linkText,item:!0,xs:6,key:hn},g.createElement(ln,{icon:Ut,text:gn,url:pn}))),(Pe=ke.metadata.links)==null?void 0:Pe.map(({url:Ut,icon:gn,title:pn},hn)=>g.createElement(k.Z,{className:We.linkText,item:!0,xs:6,key:hn},g.createElement(ln,{icon:en(gn),text:pn||Ut,url:Ut})))))))),g.createElement(ie.Z,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},g.createElement("div",{className:We.footer},g.createElement("div",{className:We.ownedBy},ht.length>0&&g.createElement(g.Fragment,null,g.createElement(Oe.tB,{fontSize:"small"}),g.createElement(Dt.rI,{style:{marginLeft:"8px"},entityRefs:ht,defaultKind:"Group",hideIcons:!0}))),g.createElement(r.Z,{size:"small",variant:"outlined",color:"primary",onClick:()=>{var Ut;return(Ut=C.onSelected)==null?void 0:Ut.call(C,ke)}},"Choose"))))},bn=C=>{const{templates:_,title:O,components:{CardComponent:T}={},onSelected:me}=C,ye=typeof O=="string"?g.createElement(Oe.yW,{title:O}):O;if(_.length===0)return null;const le=T||dn;return g.createElement(Oe.VY,null,ye,g.createElement(Oe.Oh,null,_.map(({template:Pe,additionalLinks:ke})=>g.createElement(le,{key:(0,Et.eE)(Pe),additionalLinks:ke,template:Pe,onSelected:me}))))},ce=C=>{const{loading:_,error:O,entities:T}=(0,Dt.wp)(),{groups:me,templateFilter:ye,TemplateCardComponent:le,onTemplateSelected:Pe}=C,ke=(0,o.u)(o.s),We=(0,g.useCallback)(ht=>{Pe==null||Pe(ht)},[Pe]);return _?g.createElement(Oe.Ex,null):O?(ke.post(O),null):!T||!T.length?g.createElement(V.Z,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",g.createElement(Oe.rU,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):g.createElement(g.Fragment,null,me.map(({title:ht,filter:rn},en)=>{const Ut=T.filter(_t.t).filter(gn=>ye?ye(gn):!0).filter(rn).map(gn=>{var pn,hn;const En=(hn=(pn=C.additionalLinksForEntity)==null?void 0:pn.call(C,gn))!=null?hn:[];return{template:gn,additionalLinks:En}});return g.createElement(bn,{key:en,templates:Ut,title:ht,components:{CardComponent:le},onSelected:We})}))},ae=(0,m.Z)(()=>({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}})),Ze=C=>{var _;const{title:O,description:T,namespace:me,templateName:ye,...le}=C,Pe=ae(),ke=(0,Et.eE)({kind:"Template",namespace:me,name:ye}),We=(0,o.u)(o.s),{loading:ht,manifest:rn,error:en}=we(ke),Ut=De(rn);return(0,g.useEffect)(()=>{en&&We.post(new Error(`Failed to load template, ${en}`))},[en,We]),en?le.onError(en):g.createElement(Oe.VY,null,ht&&g.createElement(Oe.Ex,null),Ut&&g.createElement(Oe.rJ,{title:O!=null?O:Ut.title,subheader:g.createElement(Oe.SA,{className:Pe.markdown,content:(_=T!=null?T:Ut.description)!=null?_:"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},g.createElement(on,{manifest:Ut,templateName:ye,...le})))},Pt=C=>React.createElement(SecretsContextProvider,null,React.createElement(Ze,{...C})),Gt=(0,m.Z)({root:{"&:hover":{textDecoration:"none"}}}),jt=C=>{const{links:_=[]}=C.output,O=Gt(),T=(0,p.qD)(),me=(0,p.tg)(Dt.wi),ye=le=>{var Pe;return(Pe=T.getSystemIcon(le))!=null?Pe:Nt.Z};return g.createElement(g.Fragment,null,_.filter(({url:le,entityRef:Pe})=>le||Pe).map(({url:le,entityRef:Pe,title:ke,icon:We})=>{if(Pe){const ht=(0,Et.of)(Pe),rn=me(ht);return{title:ke,icon:We,url:rn}}return{title:ke,icon:We,url:le}}).map(({url:le,title:Pe,icon:ke},We)=>{const ht=ye(ke);return g.createElement(Oe.rU,{to:le,key:We,classes:{root:O.root}},g.createElement(r.Z,{startIcon:g.createElement(ht,null),component:"div",color:"primary"},Pe))}))},_n=C=>{const{output:{text:_=[]},index:O,setIndex:T}=C,me=(0,p.qD)(),ye=le=>{var Pe;return(Pe=me.getSystemIcon(le))!=null?Pe:Nt.Z};return g.createElement(g.Fragment,null,_.filter(({content:le})=>le!==void 0).map(({title:le,icon:Pe},ke)=>{const We=ye(Pe);return g.createElement(r.Z,{key:ke,startIcon:g.createElement(We,null),component:"div",color:"primary",onClick:()=>T==null?void 0:T(O!==ke?ke:void 0),variant:O===ke?"outlined":void 0},le)}))},Wn=C=>{var _,O;const[T,me]=(0,g.useState)(),ye=(0,g.useMemo)(()=>{var le,Pe;return T!==void 0?(Pe=(le=C.output)==null?void 0:le.text)==null?void 0:Pe[T]:null},[C.output,T]);return C.output?g.createElement(g.Fragment,null,g.createElement(s.Z,{paddingBottom:2},g.createElement(ve.Z,null,g.createElement(s.Z,{padding:2,justifyContent:"center",display:"flex",gridGap:16},g.createElement(_n,{output:C.output,index:T,setIndex:me}),g.createElement(jt,{output:C.output})))),ye?g.createElement(s.Z,{paddingBottom:2},g.createElement(Oe.rJ,{title:(_=ye.title)!=null?_:"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},g.createElement(s.Z,{padding:2,height:"100%"},g.createElement(Oe.SA,{content:(O=ye.content)!=null?O:""})))):null):null},Gn=(0,m.Z)(C=>({root:{color:C.palette.text.disabled},completed:{color:C.palette.status.ok},error:{color:C.palette.status.error}})),dr=C=>{const _=Gn(),{active:O,completed:T,error:me,skipped:ye}=C,le=()=>O?g.createElement(Ce.Z,{size:"20px"}):T?g.createElement(Tt.Z,null):me?g.createElement(wt.Z,null):ye?g.createElement(Xt.Z,null):g.createElement(Ht.Z,null);return g.createElement("div",{className:yt()(_.root,{[_.completed]:T,[_.error]:me})},le())},gr=C=>{const[_,O]=(0,g.useState)(""),{step:T}=C,me=()=>T.startedAt&&T.endedAt&&_?null:T.startedAt&&T.endedAt?1:1e3,ye=(0,g.useCallback)(()=>{if(!T.startedAt){O("");return}const le=T.endedAt?Ae.ou.fromISO(T.endedAt):Ae.ou.local(),Pe=Ae.ou.fromISO(T.startedAt),ke=Ae.Xp.fromDateTimes(Pe,le).toDuration().valueOf();O(E()(ke,{round:!0}))},[T.endedAt,T.startedAt]);return(0,N.n)(ye),(0,Jt.Z)(ye,me()),g.createElement(V.Z,{variant:"caption"},_)},Jn=(0,m.Z)(C=>({failed:{backgroundColor:C.palette.error.main},success:{backgroundColor:C.palette.success.main}})),pr=C=>{const _=Jn();return C.isComplete?g.createElement(D.Z,{variant:"determinate",classes:{bar:C.isError?_.failed:_.success},value:100}):g.createElement(D.Z,{variant:"indeterminate"})},Pr=C=>{var _,O;return g.createElement(ve.Z,{style:{position:"relative",overflow:"hidden"}},g.createElement(pr,{isComplete:(_=C.isComplete)!=null?_:!1,isError:(O=C.isError)!=null?O:!1}),g.createElement(s.Z,{padding:2},g.createElement(W.Z,{activeStep:C.activeStep,alternativeLabel:!0,variant:"elevation"},C.steps.map(T=>{const me=T.status==="completed",ye=T.status==="failed",le=T.status==="processing",Pe=T.status==="skipped",ke={completed:me,error:ye,active:le,skipped:Pe};return g.createElement(tt.Z,{key:T.id},g.createElement(u.Z,null,g.createElement(Xe.Z,{StepIconProps:ke,StepIconComponent:dr,"data-testid":"step-label"},g.createElement(s.Z,null,T.name),!Pe&&g.createElement(gr,{step:T}))))}))))},Lr=(0,m.Z)({root:{width:"100%",height:"100%",position:"relative"}}),vr=C=>{const _=Lr();return g.createElement("div",{className:_.root},g.createElement(Oe.nU,{text:Object.values(C.logs).map(O=>O.join(`
`)).filter(Boolean).join(`
`)}))},wr=g.createElement(Z.Z,{fontSize:"small"}),Or=g.createElement(Ge.Z,{fontSize:"small"}),Tr=()=>{const C=(0,o.u)(o.l),{error:_,loading:O,availableTypes:T,selectedTypes:me,setSelectedTypes:ye}=(0,Dt.Uh)();return O?g.createElement(Oe.Ex,null):_?(C.post({message:`Failed to load entity types with error: ${_}`,severity:"error"}),null):T?g.createElement(s.Z,{pb:1,pt:1},g.createElement(V.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),g.createElement(he.ZP,{multiple:!0,id:"categories-picker",options:T,value:me,onChange:(le,Pe)=>ye(Pe),renderOption:(le,{selected:Pe})=>g.createElement(F.Z,{control:g.createElement(R.Z,{icon:wr,checkedIcon:Or,checked:Pe}),label:q()(le)}),size:"small",popupIcon:g.createElement(x.Z,null),renderInput:le=>g.createElement(M.Z,{...le,variant:"outlined"})})):null},oe=(0,m.Z)(C=>({button:{color:C.page.fontColor}}));function Ye(C){const{onEditorClicked:_,onActionsClicked:O,onTasksClicked:T}=C,me=oe(),[ye,le]=(0,g.useState)();if(!_&&!O)return null;const Pe=We=>{le(We.currentTarget)},ke=()=>{le(void 0)};return g.createElement(g.Fragment,null,g.createElement(Fe.Z,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!ye,"aria-haspopup":"true",role:"button",onClick:Pe,"data-testid":"menu-button",color:"inherit",className:me.button},g.createElement(Ct.Z,null)),g.createElement(ct.ZP,{"aria-labelledby":"long-menu",open:Boolean(ye),onClose:ke,anchorEl:ye,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},g.createElement(Be.Z,null,_&&g.createElement(Ie.Z,{onClick:_},g.createElement(mt.Z,null,g.createElement(bt.Z,{fontSize:"small"})),g.createElement(Qt.Z,{primary:"Template Editor"})),O&&g.createElement(Ie.Z,{onClick:O},g.createElement(mt.Z,null,g.createElement(Ot.Z,{fontSize:"small"})),g.createElement(Qt.Z,{primary:"Installed Actions"})),T&&g.createElement(Ie.Z,{onClick:T},g.createElement(mt.Z,null,g.createElement($t.Z,{fontSize:"small"})),g.createElement(Qt.Z,{primary:"Task List"})))))}function rt(C){return{expose(){const _=()=>null;return attachComponentData(_,FIELD_EXTENSION_KEY,C),_}}}},60885:($n,Vt,e)=>{"use strict";e.d(Vt,{F:()=>Y,S:()=>W,a:()=>V,s:()=>Xe,u:()=>tt});var o=e(18473),p=e(2784),m=e(30204);const Y="scaffolder.extensions.wrapper.v1",V="scaffolder.extensions.field.v1",D=(0,o.CT)("secrets-context"),W=r=>{const[Ve,be]=(0,p.useState)({});return p.createElement(D.Provider,{value:(0,o.EI)({1:{secrets:Ve,setSecrets:be}})},r.children)},tt=()=>{var r;const Ve=(r=(0,p.useContext)(D))==null?void 0:r.atVersion(1);if(!Ve)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:be,secrets:X={}}=Ve;return{setSecrets:(0,p.useCallback)(s=>{be(ne=>({...ne,...s}))},[be]),secrets:X}},Xe=(0,o.uW)("scaffolder:scaffolder-api-ref",()=>(0,m.c)({id:"plugin.scaffolder.service"}))},12053:($n,Vt,e)=>{"use strict";e.d(Vt,{PT:()=>tt,WQ:()=>X,eP:()=>D,zS:()=>Ve});var o=e(30705),p=e(30204),m=e(60885),Y=e(92233),V=e(2784);function D(ne){return{expose(){const re=()=>null;return(0,o.R5)(re,m.a,ne),re}}}const W=()=>null;(0,o.R5)(W,m.F,!0);const tt=ne=>(0,o.vJ)(ne,re=>re.selectByComponentData({key:m.F}).findComponentData({key:m.a})),Xe="scaffolder.layout.v1",r="scaffolder.layouts.wrapper.v1",Ve=ne=>(0,o.vJ)(ne,re=>re.selectByComponentData({key:r}).findComponentData({key:Xe}));function be(ne,re){var ie,ve,Ce;switch(re.type){case"INIT":{ne.steps=re.data.spec.steps.reduce((u,F)=>(u[F.id]={status:"open",id:F.id},u),{}),ne.stepLogs=re.data.spec.steps.reduce((u,F)=>(u[F.id]=[],u),{}),ne.loading=!1,ne.error=void 0,ne.completed=!1,ne.task=re.data;return}case"LOGS":{const u=re.data;for(const F of u){const R=`${F.createdAt} ${F.body.message}`;if(!F.body.stepId||!((ie=ne.steps)!=null&&ie[F.body.stepId]))continue;const M=(ve=ne.stepLogs)==null?void 0:ve[F.body.stepId],g=(Ce=ne.steps)==null?void 0:Ce[F.body.stepId];F.body.status&&F.body.status!==g.status&&(g.status=F.body.status,g.status==="processing"&&(g.startedAt=F.createdAt),["cancelled","completed","failed"].includes(g.status)&&(g.endedAt=F.createdAt)),M==null||M.push(R)}return}case"COMPLETED":{ne.completed=!0,ne.output=re.data.body.output,ne.error=re.data.body.error;return}case"CANCELLED":{ne.cancelled=!0;return}case"ERROR":{ne.error=re.data,ne.loading=!1,ne.completed=!0;return}default:return}}const X=ne=>{const re=(0,p.u)(m.s),[ie,ve]=(0,Y.C)(be,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,V.useEffect)(()=>{let Ce=!1,u,F,R=1;const M=()=>re.getTask(ne).then(g=>{if(Ce)return;ve({type:"INIT",data:g});const Ne=re.streamLogs({taskId:ne}),Oe=new Array;function Qe(){if(Oe.length){const se=Oe.splice(0,Oe.length);ve({type:"LOGS",data:se})}}F=setInterval(Qe,500),u=Ne.subscribe({next:se=>{switch(se.type){case"log":return Oe.push(se);case"cancelled":ve({type:"CANCELLED"});return;case"completion":Qe(),ve({type:"COMPLETED",data:se});return;default:throw new Error(`Unhandled event type ${se.type} in observer`)}},error:se=>{Qe(),se.message||(se.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${R}/3 retries)`),R<=3&&setTimeout(()=>{R+=1,M()},15e3),ve({type:"ERROR",data:se})}})},g=>{Ce||ve({type:"ERROR",data:g})});return M(),()=>{Ce=!0,u&&u.unsubscribe(),F&&clearInterval(F)}},[re,ve,ne]),ie};function k(ne){return{expose(){const re=()=>null;return attachComponentData(re,Xe,ne),re}}}const s=()=>null;(0,o.R5)(s,r,!0)},89883:($n,Vt,e)=>{"use strict";e.d(Vt,{A:()=>qe,B:()=>$t,C:()=>$e,D:()=>on,F:()=>an,G:()=>K,H:()=>nt,I:()=>ue,J:()=>G,K:()=>lt,N:()=>He,P:()=>Gt,T:()=>Or,d:()=>Jn,e:()=>rt,i:()=>it,l:()=>Pt,o:()=>wn,p:()=>ae,q:()=>ce,r:()=>cn,s:()=>jt,t:()=>bn,u:()=>fn,v:()=>tn,w:()=>dn,x:()=>ln,y:()=>Be,z:()=>Ie});var o=e(49462),p=e(60885),m=e(12053),Y=e(34520),V=e(32272),D=e(19126),W=e.n(D),tt=e(82394),Xe=e.n(tt),r=e(31734),Ve=e.n(r),be=e(88285),X=e(30204),k=e(30705),s=e(64304),ne=e(86619),re=e(95544),ie=e(90436),ve=e(85256),Ce=e(42494),u=e(5806),F=e(21324),R=e(79692),M=e(60364),g=e(61837),Ne=e(79784),Oe=e(50758),Qe=e(12231),se=e(86136),Le=e(49378),_e=e(27556),Ke=e(77277),St=e(88013),L=e(2784),pt=e(64279),fe=e(30195),zt=e(68111),Et=e(74828),Dt=e(29611),Wt=e(56939),Je=e(49558),_t=e(48760),Nt=e(62155),Xt=e(82108),Ht=e.n(Xt),Ft=e(19996),yt=e(25505),Tt=e(38016),wt=e(73557),Jt=e(51967),Ae=e(49166),j=e(93269),E=e(8198),N=e(15026),Q=e(43054),q=e(31011),Ge=Object.defineProperty,Z=(C,_,O)=>_ in C?Ge(C,_,{enumerable:!0,configurable:!0,writable:!0,value:O}):C[_]=O,x=(C,_,O)=>(Z(C,typeof _!="symbol"?_+"":_,O),O);class he{constructor(_){x(this,"discoveryApi"),x(this,"scmIntegrationsApi"),x(this,"fetchApi"),x(this,"identityApi"),x(this,"useLongPollingLogs");var O,T;this.discoveryApi=_.discoveryApi,this.fetchApi=(O=_.fetchApi)!=null?O:{fetch},this.scmIntegrationsApi=_.scmIntegrationsApi,this.useLongPollingLogs=(T=_.useLongPollingLogs)!=null?T:!1,this.identityApi=_.identityApi}async listTasks(_){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const O=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:T}=await this.identityApi.getBackstageIdentity(),me=W().stringify(_.filterByOwnership==="owned"?{createdBy:T}:{}),ye=await this.fetchApi.fetch(`${O}/v2/tasks?${me}`);if(!ye.ok)throw await V.VL.fromResponse(ye);return await ye.json()}async getIntegrationsList(_){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(T=>!this.scmIntegrationsApi.bitbucketCloud.byHost(T.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(T.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(T=>({type:T.type,title:T.title,host:T.config.host})).filter(T=>_.allowedHosts.includes(T.host))}}async getTemplateParameterSchema(_){const{namespace:O,kind:T,name:me}=(0,Y.of)(_,{defaultKind:"template"}),ye=await this.discoveryApi.getBaseUrl("scaffolder"),le=[O,T,me].map(ht=>encodeURIComponent(ht)).join("/"),Pe=`${ye}/v2/templates/${le}/parameter-schema`,ke=await this.fetchApi.fetch(Pe);if(!ke.ok)throw await V.VL.fromResponse(ke);return await ke.json()}async scaffold(_){const{templateRef:O,values:T,secrets:me={}}=_,ye=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,le=await this.fetchApi.fetch(ye,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:O,values:{...T},secrets:me})});if(le.status!==201){const ke=`${le.status} ${le.statusText}`,We=await le.text();throw new Error(`Backend request failed, ${ke} ${We.trim()}`)}const{id:Pe}=await le.json();return{taskId:Pe}}async getTask(_){const T=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(_)}`,me=await this.fetchApi.fetch(T);if(!me.ok)throw await V.VL.fromResponse(me);return await me.json()}streamLogs(_){return this.useLongPollingLogs?this.streamLogsPolling(_):this.streamLogsEventStream(_)}async dryRun(_){const O=await this.discoveryApi.getBaseUrl("scaffolder"),T=await this.fetchApi.fetch(`${O}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:_.template,values:_.values,secrets:_.secrets,directoryContents:_.directoryContents})});if(!T.ok)throw await V.VL.fromResponse(T);return T.json()}streamLogsEventStream({taskId:_,after:O}){return new(Xe())(T=>{var me;const ye=new URLSearchParams;O!==void 0&&ye.set("after",String(Number(O))),Promise.all([this.discoveryApi.getBaseUrl("scaffolder"),(me=this.identityApi)==null?void 0:me.getCredentials()]).then(([le,Pe])=>{const ke=`${le}/v2/tasks/${encodeURIComponent(_)}/eventstream`,We=rn=>{if(rn.data)try{T.next(JSON.parse(rn.data))}catch(en){T.error(en)}},ht=new r.EventSourcePolyfill(ke,{withCredentials:!0,headers:Pe!=null&&Pe.token?{Authorization:`Bearer ${Pe.token}`}:{}});ht.addEventListener("log",We),ht.addEventListener("cancelled",We),ht.addEventListener("completion",rn=>{We(rn),ht.close(),T.complete()}),ht.addEventListener("error",rn=>{T.error(rn)})},le=>{T.error(le)})})}streamLogsPolling({taskId:_,after:O}){let T=O;return new(Xe())(me=>{this.discoveryApi.getBaseUrl("scaffolder").then(async ye=>{for(;!me.closed;){const le=`${ye}/v2/tasks/${encodeURIComponent(_)}/events?${W().stringify({after:T})}`,Pe=await this.fetchApi.fetch(le);if(!Pe.ok){await new Promise(We=>setTimeout(We,1e3));continue}const ke=await Pe.json();for(const We of ke)if(T=Number(We.id),me.next(We),We.type==="completion"){me.complete();return}}})})}async listActions(){const _=await this.discoveryApi.getBaseUrl("scaffolder"),O=await this.fetchApi.fetch(`${_}/v2/actions`);if(!O.ok)throw await V.VL.fromResponse(O);return await O.json()}async cancelTask(_){const T=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(_)}/cancel`,me=await this.fetchApi.fetch(T,{method:"POST"});if(!me.ok)throw await V.VL.fromResponse(me);return await me.json()}}function Fe(C,_){return{schema:{returnValue:(0,zt.ZP)(C),uiOptions:_?(0,zt.ZP)(_):void 0},type:null,uiOptionsType:null}}const mt=fe.z.record(fe.z.string().or(fe.z.object({exists:fe.z.boolean().optional()})).or(fe.z.array(fe.z.string()))),Ie=Fe(fe.z.string(),fe.z.object({allowedKinds:fe.z.array(fe.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:fe.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:fe.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:fe.z.union([fe.z.string(),fe.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:fe.z.array(mt).or(mt).optional().describe("List of key-value filter expression for entities")})).schema,Be=C=>{var _,O,T,me,ye;const{onChange:le,schema:{title:Pe="Entity",description:ke="An entity from the catalog"},required:We,uiSchema:ht,rawErrors:rn,formData:en,idSchema:Ut}=C,gn=bt(ht),pn=(_=ht["ui:options"])==null?void 0:_.defaultKind,hn=((O=ht["ui:options"])==null?void 0:O.defaultNamespace)||void 0,En=(0,X.u)(s.Ah),{value:Cn,loading:Yn}=(0,pt.default)(async()=>{const{items:sn}=await En.getEntities(gn?{filter:gn}:void 0);return sn}),Hn=(me=(T=ht["ui:options"])==null?void 0:T.allowArbitraryValues)!=null?me:!0,In=(0,L.useCallback)(sn=>{try{return(0,s.$3)((0,Y.of)(sn,{defaultKind:pn,defaultNamespace:hn}),{defaultKind:pn,defaultNamespace:hn})}catch{return sn}},[pn,hn]),Ln=(0,L.useCallback)((sn,Rn,tr)=>{if(typeof Rn!="string")le(Rn?(0,Y.eE)(Rn):void 0);else if(tr==="blur"||tr==="create-option"){let ir=Rn;try{ir=(0,Y.eE)((0,Y.of)(Rn,{defaultKind:pn,defaultNamespace:hn}))}catch{}(en!==Rn||Hn)&&le(ir)}},[le,en,pn,hn,Hn]),Zn=(ye=Cn==null?void 0:Cn.find(sn=>(0,Y.eE)(sn)===en))!=null?ye:Hn&&en?In(en):"";return(0,L.useEffect)(()=>{(Cn==null?void 0:Cn.length)===1&&Zn===""&&le((0,Y.eE)(Cn[0]))},[Cn,le,Zn]),L.createElement(Ce.Z,{margin:"normal",required:We,error:(rn==null?void 0:rn.length)>0&&!en},L.createElement(St.ZP,{disabled:(Cn==null?void 0:Cn.length)===1,id:Ut==null?void 0:Ut.$id,value:Zn,loading:Yn,onChange:Ln,options:Cn||[],getOptionLabel:sn=>typeof sn=="string"?sn:(0,s.$3)(sn,{defaultKind:pn,defaultNamespace:hn}),autoSelect:!0,freeSolo:Hn,renderInput:sn=>L.createElement(ne.Z,{...sn,label:Pe,margin:"dense",helperText:ke,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:We,InputProps:sn.InputProps})}))};function ct(C){return typeof C=="object"&&C.exists?be.n3:C==null?void 0:C.toString()}function Ot(C){const _={};for(const[O,T]of Object.entries(C))Array.isArray(T)?_[O]=T:_[O]=ct(T);return _}function bt(C){var _,O;const T=(_=C["ui:options"])==null?void 0:_.allowedKinds,me=((O=C["ui:options"])==null?void 0:O.catalogFilter)||T&&{kind:T};if(me)return Array.isArray(me)?me.map(Ot):Ot(me)}const $t=(C,_)=>{Y.y$.isValidObjectName(C)||_.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},$e=Fe(fe.z.string()).schema,qe=C=>{const{onChange:_,required:O,schema:{title:T="Name",description:me="Unique name of the component"},rawErrors:ye,formData:le,uiSchema:{"ui:autofocus":Pe},idSchema:ke,placeholder:We}=C;return L.createElement(ne.Z,{id:ke==null?void 0:ke.$id,label:T,placeholder:We,helperText:me,required:O,value:le!=null?le:"",onChange:({target:{value:ht}})=>_(ht),margin:"normal",error:(ye==null?void 0:ye.length)>0&&!le,inputProps:{autoFocus:Pe}})},G=Fe(fe.z.string(),fe.z.object({allowedKinds:fe.z.array(fe.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:fe.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:fe.z.union([fe.z.string(),fe.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:fe.z.array(mt).or(mt).optional().describe("List of key-value filter expression for entities")})).schema,ue=C=>{var _,O,T,me,ye;const{schema:{title:le="Owner",description:Pe="The owner of the component"},uiSchema:ke,...We}=C,ht=(_=ke["ui:options"])==null?void 0:_.defaultNamespace,rn=(O=ke["ui:options"])==null?void 0:O.allowedKinds,en=((T=ke["ui:options"])==null?void 0:T.catalogFilter)||{kind:rn||["Group","User"]},Ut={...ke,"ui:options":{catalogFilter:en,defaultKind:"Group",allowArbitraryValues:(ye=(me=ke["ui:options"])==null?void 0:me.allowArbitraryValues)!=null?ye:!0,...ht!==void 0?{defaultNamespace:ht}:{}}};return L.createElement(Be,{...We,schema:{title:le,description:Pe},uiSchema:Ut})},nt=Fe(fe.z.string(),fe.z.object({allowedHosts:fe.z.array(fe.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:fe.z.array(fe.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:fe.z.array(fe.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:fe.z.array(fe.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:fe.z.array(fe.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:fe.z.object({secretsKey:fe.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:fe.z.object({gerrit:fe.z.array(fe.z.string()).optional().describe("Additional Gerrit scopes to request"),github:fe.z.array(fe.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:fe.z.array(fe.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:fe.z.array(fe.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:fe.z.array(fe.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,it=(C,_,O)=>{var T,me;try{const{host:ye,searchParams:le}=new URL(`https://${C}`),Pe=O.apiHolder.get(o.q3);ye?(((T=Pe==null?void 0:Pe.byHost(ye))==null?void 0:T.type)==="bitbucket"?(ye==="bitbucket.org"&&!le.get("workspace")&&_.addError("Incomplete repository location provided, workspace not provided"),le.get("project")||_.addError("Incomplete repository location provided, project not provided")):((me=Pe==null?void 0:Pe.byHost(ye))==null?void 0:me.type)!=="gerrit"&&(le.get("owner")||_.addError("Incomplete repository location provided, owner not provided")),le.get("repo")||_.addError("Incomplete repository location provided, repo not provided")):_.addError("Incomplete repository location provided, host not provided")}catch{_.addError("Unable to parse the Repository URL")}},Rt=C=>{const{allowedOwners:_=[],rawErrors:O,state:T,onChange:me}=C,ye=_?_.map(Pe=>({label:Pe,value:Pe})):[{label:"Loading...",value:"loading"}],{owner:le}=T;return L.createElement(L.Fragment,null,L.createElement(Ce.Z,{margin:"normal",required:!0,error:(O==null?void 0:O.length)>0&&!le},_!=null&&_.length?L.createElement(Je.Ph,{native:!0,label:"Owner Available",onChange:Pe=>me({owner:String(Array.isArray(Pe)?Pe[0]:Pe)}),disabled:_.length===1,selected:le,items:ye}):L.createElement(L.Fragment,null,L.createElement(Wt.Z,{htmlFor:"ownerInput"},"Owner"),L.createElement(Dt.Z,{id:"ownerInput",onChange:Pe=>me({owner:Pe.target.value}),value:le})),L.createElement(Et.Z,null,"The organization, user or project that this repo will belong to")))},qt=C=>{const{allowedOwners:_=[],state:O,onChange:T,rawErrors:me}=C,ye=_?_.map(Pe=>({label:Pe,value:Pe})):[{label:"Loading...",value:"loading"}],{owner:le}=O;return L.createElement(L.Fragment,null,L.createElement(Ce.Z,{margin:"normal",required:!0,error:(me==null?void 0:me.length)>0&&!le},_!=null&&_.length?L.createElement(Je.Ph,{native:!0,label:"Owner Available",onChange:Pe=>T({owner:String(Array.isArray(Pe)?Pe[0]:Pe)}),disabled:_.length===1,selected:le,items:ye}):L.createElement(L.Fragment,null,L.createElement(Wt.Z,{htmlFor:"ownerInput"},"Owner"),L.createElement(Dt.Z,{id:"ownerInput",onChange:Pe=>T({owner:Pe.target.value}),value:le})),L.createElement(Et.Z,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},nn=C=>{const{allowedOrganizations:_=[],allowedOwners:O=[],rawErrors:T,state:me,onChange:ye}=C,le=_?_.map(ht=>({label:ht,value:ht})):[{label:"Loading...",value:"loading"}],Pe=O?O.map(ht=>({label:ht,value:ht})):[{label:"Loading...",value:"loading"}],{organization:ke,owner:We}=me;return L.createElement(L.Fragment,null,L.createElement(Ce.Z,{margin:"normal",required:!0,error:(T==null?void 0:T.length)>0&&!ke},_!=null&&_.length?L.createElement(Je.Ph,{native:!0,label:"Organization",onChange:ht=>ye({organization:String(Array.isArray(ht)?ht[0]:ht)}),disabled:_.length===1,selected:ke,items:le}):L.createElement(L.Fragment,null,L.createElement(Wt.Z,{htmlFor:"orgInput"},"Organization"),L.createElement(Dt.Z,{id:"orgInput",onChange:ht=>ye({organization:ht.target.value}),value:ke})),L.createElement(Et.Z,null,"The Organization that this repo will belong to")),L.createElement(Ce.Z,{margin:"normal",required:!0,error:(T==null?void 0:T.length)>0&&!We},O!=null&&O.length?L.createElement(Je.Ph,{native:!0,label:"Owner",onChange:ht=>ye({owner:String(Array.isArray(ht)?ht[0]:ht)}),disabled:O.length===1,selected:We,items:Pe}):L.createElement(L.Fragment,null,L.createElement(Wt.Z,{htmlFor:"ownerInput"},"Project"),L.createElement(Dt.Z,{id:"ownerInput",onChange:ht=>ye({owner:ht.target.value}),value:We})),L.createElement(Et.Z,null,"The Project that this repo will belong to")))},we=C=>{const{allowedOwners:_=[],allowedProjects:O=[],onChange:T,rawErrors:me,state:ye}=C,{host:le,workspace:Pe,project:ke}=ye,We=_?_==null?void 0:_.map(rn=>({label:rn,value:rn})):[],ht=O?O==null?void 0:O.map(rn=>({label:rn,value:rn})):[];return(0,L.useEffect)(()=>{le==="bitbucket.org"&&_.length&&T({workspace:_[0]})},[_,le,T]),L.createElement(L.Fragment,null,le==="bitbucket.org"&&L.createElement(Ce.Z,{margin:"normal",required:!0,error:(me==null?void 0:me.length)>0&&!Pe},_!=null&&_.length?L.createElement(Je.Ph,{native:!0,label:"Allowed Workspaces",onChange:rn=>T({workspace:String(Array.isArray(rn)?rn[0]:rn)}),disabled:_.length===1,selected:Pe,items:We}):L.createElement(L.Fragment,null,L.createElement(Wt.Z,{htmlFor:"workspaceInput"},"Workspace"),L.createElement(Dt.Z,{id:"workspaceInput",onChange:rn=>T({workspace:rn.target.value}),value:Pe})),L.createElement(Et.Z,null,"The Workspace that this repo will belong to")),L.createElement(Ce.Z,{margin:"normal",required:!0,error:(me==null?void 0:me.length)>0&&!ke},O!=null&&O.length?L.createElement(Je.Ph,{native:!0,label:"Allowed Projects",onChange:rn=>T({project:String(Array.isArray(rn)?rn[0]:rn)}),disabled:O.length===1,selected:ke,items:ht}):L.createElement(L.Fragment,null,L.createElement(Wt.Z,{htmlFor:"projectInput"},"Project"),L.createElement(Dt.Z,{id:"projectInput",onChange:rn=>T({project:rn.target.value}),value:ke})),L.createElement(Et.Z,null,"The Project that this repo will belong to")))},De=C=>{const{onChange:_,rawErrors:O,state:T}=C,{workspace:me,owner:ye}=T;return L.createElement(L.Fragment,null,L.createElement(Ce.Z,{margin:"normal",error:(O==null?void 0:O.length)>0&&!me},L.createElement(Wt.Z,{htmlFor:"ownerInput"},"Owner"),L.createElement(Dt.Z,{id:"ownerInput",onChange:le=>_({owner:le.target.value}),value:ye}),L.createElement(Et.Z,null,"The owner of the project (optional)")),L.createElement(Ce.Z,{margin:"normal",required:!0,error:(O==null?void 0:O.length)>0&&!me},L.createElement(Wt.Z,{htmlFor:"parentInput"},"Parent"),L.createElement(Dt.Z,{id:"parentInput",onChange:le=>_({workspace:le.target.value}),value:me}),L.createElement(Et.Z,null,"The project parent that the repo will belong to")))},w=C=>{const{host:_,hosts:O,onChange:T,rawErrors:me}=C,ye=(0,X.u)(p.s),{value:{integrations:le}={integrations:[]},loading:Pe}=(0,pt.default)(async()=>await ye.getIntegrationsList({allowedHosts:O!=null?O:[]}));(0,L.useEffect)(()=>{_||(O!=null&&O.length?T(O[0]):le!=null&&le.length&&T(le[0].host))},[O,_,T,le]);const ke=le?le.filter(We=>O!=null&&O.length?O==null?void 0:O.includes(We.host):!0).map(We=>({label:We.title,value:We.host})):[{label:"Loading...",value:"loading"}];return Pe?L.createElement(Je.Ex,null):L.createElement(L.Fragment,null,L.createElement(Ce.Z,{margin:"normal",required:!0,error:(me==null?void 0:me.length)>0&&!_},L.createElement(Je.Ph,{native:!0,disabled:(O==null?void 0:O.length)===1,label:"Host",onChange:We=>T(String(Array.isArray(We)?We[0]:We)),selected:_,items:ke,"data-testid":"host-select"}),L.createElement(Et.Z,null,"The host where the repository will be created")))},H=C=>{const{repoName:_,allowedRepos:O,onChange:T,rawErrors:me}=C;(0,L.useEffect)(()=>{_||O!=null&&O.length&&T(O[0])},[O,_,T]);const ye=O?O.map(le=>({label:le,value:le})):[{label:"Loading...",value:"loading"}];return L.createElement(L.Fragment,null,L.createElement(Ce.Z,{margin:"normal",required:!0,error:(me==null?void 0:me.length)>0&&!_},O!=null&&O.length?L.createElement(Je.Ph,{native:!0,label:"Repositories Available",onChange:le=>T(String(Array.isArray(le)?le[0]:le)),disabled:O.length===1,selected:_,items:ye}):L.createElement(L.Fragment,null,L.createElement(Wt.Z,{htmlFor:"repoNameInput"},"Repository"),L.createElement(Dt.Z,{id:"repoNameInput",onChange:le=>T(String(le.target.value)),value:_})),L.createElement(Et.Z,null,"The name of the repository")))};function te(C){if(!C.host)return;const _=new URLSearchParams;return C.owner&&_.set("owner",C.owner),C.repoName&&_.set("repo",C.repoName),C.organization&&_.set("organization",C.organization),C.workspace&&_.set("workspace",C.workspace),C.project&&_.set("project",C.project),`${C.host}?${_.toString()}`}function ut(C){let _="",O="",T="",me="",ye="",le="";try{if(C){const Pe=new URL(`https://${C}`);_=Pe.host,O=Pe.searchParams.get("owner")||"",T=Pe.searchParams.get("repo")||"",me=Pe.searchParams.get("organization")||"",ye=Pe.searchParams.get("workspace")||"",le=Pe.searchParams.get("project")||""}}catch{}return{host:_,owner:O,repoName:T,organization:me,workspace:ye,project:le}}const K=C=>{var _,O;const{uiSchema:T,onChange:me,rawErrors:ye,formData:le,schema:Pe}=C,[ke,We]=(0,L.useState)(ut(le)),ht=(0,X.u)(o.q3),rn=(0,X.u)(o.Om),{setSecrets:en}=(0,p.u)(),Ut=(0,L.useMemo)(()=>{var sn,Rn;return(Rn=(sn=T==null?void 0:T["ui:options"])==null?void 0:sn.allowedHosts)!=null?Rn:[]},[T]),gn=(0,L.useMemo)(()=>{var sn,Rn;return(Rn=(sn=T==null?void 0:T["ui:options"])==null?void 0:sn.allowedOrganizations)!=null?Rn:[]},[T]),pn=(0,L.useMemo)(()=>{var sn,Rn;return(Rn=(sn=T==null?void 0:T["ui:options"])==null?void 0:sn.allowedOwners)!=null?Rn:[]},[T]),hn=(0,L.useMemo)(()=>{var sn,Rn;return(Rn=(sn=T==null?void 0:T["ui:options"])==null?void 0:sn.allowedProjects)!=null?Rn:[]},[T]),En=(0,L.useMemo)(()=>{var sn,Rn;return(Rn=(sn=T==null?void 0:T["ui:options"])==null?void 0:sn.allowedRepos)!=null?Rn:[]},[T]),{owner:Cn,organization:Yn,project:Hn,repoName:In}=ke;(0,L.useEffect)(()=>{me(te(ke))},[ke,me]),(0,L.useEffect)(()=>{gn.length>0&&!Yn&&We(sn=>({...sn,organization:gn[0]}))},[We,gn,Yn]),(0,L.useEffect)(()=>{pn.length>0&&!Cn&&We(sn=>({...sn,owner:pn[0]}))},[We,pn,Cn]),(0,L.useEffect)(()=>{hn.length>0&&!Hn&&We(sn=>({...sn,project:hn[0]}))},[We,hn,Hn]),(0,L.useEffect)(()=>{En.length>0&&!In&&We(sn=>({...sn,repoName:En[0]}))},[We,En,In]);const Ln=(0,L.useCallback)(sn=>{We(Rn=>({...Rn,...sn}))},[We]);(0,_t.Z)(async()=>{var sn;const{requestUserCredentials:Rn}=(sn=T==null?void 0:T["ui:options"])!=null?sn:{},tr=ke.owner?ke.owner:ke.project;if(!Rn||!(ke.host&&tr&&ke.repoName))return;const[ir,Cr]=[ke.host,ke.repoName].map(encodeURIComponent),{token:Mr}=await rn.getCredentials({url:`https://${ir}/${tr}/${Cr}`,additionalScope:{repoWrite:!0,customScopes:Rn.additionalScopes}});en({[Rn.secretsKey]:Mr})},500,[ke,T]);const Zn=(O=ke.host&&((_=ht.byHost(ke.host))==null?void 0:_.type))!=null?O:null;return L.createElement(L.Fragment,null,Pe.title&&L.createElement(re.Z,{my:1},L.createElement(ie.Z,{variant:"h5"},Pe.title),L.createElement(ve.Z,null)),Pe.description&&L.createElement(ie.Z,{variant:"body1"},Pe.description),L.createElement(w,{host:ke.host,hosts:Ut,onChange:sn=>We(Rn=>({...Rn,host:sn})),rawErrors:ye}),Zn==="github"&&L.createElement(Rt,{allowedOwners:pn,onChange:Ln,rawErrors:ye,state:ke}),Zn==="gitlab"&&L.createElement(qt,{allowedOwners:pn,rawErrors:ye,state:ke,onChange:Ln}),Zn==="bitbucket"&&L.createElement(we,{allowedOwners:pn,allowedProjects:hn,rawErrors:ye,state:ke,onChange:Ln}),Zn==="azure"&&L.createElement(nn,{allowedOrganizations:gn,allowedOwners:pn,rawErrors:ye,state:ke,onChange:Ln}),Zn==="gerrit"&&L.createElement(De,{rawErrors:ye,state:ke,onChange:Ln}),L.createElement(H,{repoName:ke.repoName,allowedRepos:En,onChange:sn=>We(Rn=>({...Rn,repoName:sn})),rawErrors:ye}))},He=Fe(fe.z.string(),fe.z.object({allowedKinds:fe.z.array(fe.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:fe.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:fe.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:fe.z.union([fe.z.string(),fe.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:fe.z.array(mt).or(mt).optional().describe("List of key-value filter expression for entities")})).schema,lt=C=>{const{schema:{title:_="Entity",description:O="An entity from the catalog"},uiSchema:T,required:me}=C,ye=(0,X.u)(X.v),{loading:le,value:Pe}=(0,pt.default)(async()=>(await ye.getBackstageIdentity()).ownershipEntityRefs);if(le)return L.createElement(St.ZP,{loading:le,renderInput:We=>L.createElement(ne.Z,{...We,label:_,margin:"dense",helperText:O,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:me,InputProps:We.InputProps}),options:[]});const ke=Bt(T,Pe);return L.createElement(Be,{...C,uiSchema:ke})};function Bt(C,_){const O=(C==null?void 0:C["ui:options"])||{},T=O.allowedKinds;return{"ui:options":{catalogFilter:{...O.catalogFilter,...T?{kind:T,[`relations.${Y.S4}`]:_||[]}:{[`relations.${Y.S4}`]:_||[]}}}}}const an=Fe(fe.z.array(fe.z.string()),fe.z.object({kinds:fe.z.array(fe.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:fe.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:fe.z.string().optional().describe("Helper text to display")})).schema,on=C=>{var _,O,T;const{formData:me,onChange:ye,uiSchema:le}=C,Pe=(0,X.u)(s.Ah),[ke,We]=(0,L.useState)([]),[ht,rn]=(0,L.useState)(""),[en,Ut]=(0,L.useState)(!1),gn=(0,Y.In)().isValidTag,pn=(_=le["ui:options"])==null?void 0:_.kinds,hn=(O=le["ui:options"])==null?void 0:O.showCounts,En=(T=le["ui:options"])==null?void 0:T.helperText,{loading:Cn,value:Yn}=(0,pt.default)(async()=>{const In="metadata.tags",Ln={facets:[In]};pn&&(Ln.filter={kind:pn});const{facets:Zn}=await Pe.getEntityFacets(Ln),sn=Object.fromEntries(Zn[In].map(({value:Rn,count:tr})=>[Rn,tr]));return We(Object.keys(sn).sort((Rn,tr)=>hn?sn[tr]-sn[Rn]:Rn.localeCompare(tr))),sn}),Hn=(In,Ln)=>{let Zn=!1,sn=!1;const Rn=me||[];if(Ln!=null&&Ln.length&&Rn.length<Ln.length){const tr=Ln[Ln.length-1]=Ln[Ln.length-1].toLocaleLowerCase("en-US").trim();Zn=!gn(tr),sn=Rn.indexOf(tr)!==-1}Ut(Zn),rn(Zn?ht:""),!Zn&&!sn&&ye(Ln||[])};return(0,Nt.Z)(()=>ye(me||[])),L.createElement(Ce.Z,{margin:"normal"},L.createElement(St.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:Hn,value:me||[],inputValue:ht,loading:Cn,options:ke,ChipProps:{size:"small"},renderOption:In=>hn?`${In} (${Yn==null?void 0:Yn[In]})`:In,renderInput:In=>L.createElement(ne.Z,{...In,label:"Tags",onChange:Ln=>rn(Ln.target.value),error:en,helperText:En!=null?En:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},fn=(0,k.x8)({id:"register-component",optional:!0}),tn=(0,k.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),cn=(0,k.NT)({id:"scaffolder"}),ln=(0,k.Rz)({id:"scaffolder/legacy/selected-template",parent:cn,path:"/templates/:templateName"}),wn=(0,k.Rz)({id:"scaffolder/selected-template",parent:cn,path:"/templates/:namespace/:templateName"}),dn=(0,k.Rz)({id:"scaffolder/task",parent:cn,path:"/tasks/:taskId"}),bn=(0,k.Rz)({id:"scaffolder/list-tasks",parent:cn,path:"/tasks"}),ce=(0,k.Rz)({id:"scaffolder/actions",parent:cn,path:"/actions"}),ae=(0,k.Rz)({id:"scaffolder/edit",parent:cn,path:"/edit"}),Pt=Fe(fe.z.string(),fe.z.object({title:fe.z.string().default("Group").describe("Group"),description:fe.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema,Gt=C=>{const{schema:{title:_,description:O},required:T,rawErrors:me,onChange:ye}=C,le=(0,X.u)(X.v),Pe=(0,X.u)(s.Ah),ke=(0,X.u)(X.s),[We,ht]=(0,L.useState)([]),[rn,en]=(0,L.useState)(null);(0,pt.default)(async()=>{const{userEntityRef:gn}=await le.getBackstageIdentity();if(!gn){ke.post(new V.dR("No user entity ref found"));return}const{items:pn}=await Pe.getEntities({filter:{kind:"Group",["relations.hasMember"]:[gn]}}),hn=pn.filter(En=>Boolean(En)).map(En=>{var Cn;return{label:(Cn=En.metadata.title)!=null?Cn:En.metadata.name,ref:(0,Y.eE)(En)}});ht(hn)});const Ut=(gn,pn)=>{var hn;en(pn),ye((hn=pn==null?void 0:pn.ref)!=null?hn:"")};return L.createElement(Ce.Z,{margin:"normal",required:T,error:(me==null?void 0:me.length)>0},L.createElement(St.ZP,{id:"OwnershipEntityRefPicker-dropdown",options:We||[],value:rn,onChange:Ut,getOptionLabel:gn=>gn.label,renderInput:gn=>L.createElement(ne.Z,{...gn,label:_,margin:"dense",helperText:O,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:T})}))},jt=(0,k.rx)({id:"scaffolder",apis:[(0,k.ni)({api:p.s,deps:{discoveryApi:X.q,scmIntegrationsApi:o.q3,fetchApi:X.t,identityApi:X.v},factory:({discoveryApi:C,scmIntegrationsApi:_,fetchApi:O,identityApi:T})=>new he({discoveryApi:C,scmIntegrationsApi:_,fetchApi:O,identityApi:T})})],routes:{root:cn,selectedTemplate:wn,ongoingTask:dn,actions:ce,listTasks:bn,edit:ae},externalRoutes:{registerComponent:fn,viewTechDoc:tn}}),_n=jt.provide((0,m.eP)({component:Be,name:"EntityPicker",schema:Ie})),Wn=jt.provide((0,m.eP)({component:qe,name:"EntityNamePicker",validation:$t,schema:$e})),Gn=jt.provide((0,m.eP)({component:K,name:"RepoUrlPicker",validation:it,schema:nt})),dr=jt.provide((0,m.eP)({component:ue,name:"OwnerPicker",schema:G})),gr=jt.provide((0,m.eP)({component:Gt,name:"MyGroupsPicker",schema:Pt})),Jn=jt.provide((0,k.P4)({name:"ScaffolderPage",component:()=>Promise.all([e.e(3235),e.e(1985)]).then(e.bind(e,1985)).then(C=>C.Router),mountPoint:cn})),pr=jt.provide((0,m.eP)({component:lt,name:"OwnedEntityPicker",schema:He})),Pr=jt.provide((0,m.eP)({component:on,name:"EntityTagsPicker",schema:an})),Lr=jt.provide((0,k.P4)({name:"LegacyScaffolderPage",component:()=>Promise.all([e.e(3235),e.e(5297)]).then(e.bind(e,75297)).then(C=>C.LegacyRouter),mountPoint:cn})),vr=L.createElement(yt.Z,{fontSize:"small"}),wr=L.createElement(Ft.Z,{fontSize:"small"}),Or=()=>{const C=(0,X.u)(X.l),{error:_,loading:O,availableTypes:T,selectedTypes:me,setSelectedTypes:ye}=(0,s.Uh)();return O?L.createElement(Je.Ex,null):T?_?(C.post({message:"Failed to load entity types",severity:"error"}),null):L.createElement(re.Z,{pb:1,pt:1},L.createElement(ie.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),L.createElement(St.ZP,{id:"categories-picker",multiple:!0,options:T,value:me,onChange:(le,Pe)=>ye(Pe),renderOption:(le,{selected:Pe})=>L.createElement(u.Z,{control:L.createElement(F.Z,{icon:vr,checkedIcon:wr,checked:Pe}),label:Ht()(le)}),size:"small",popupIcon:L.createElement(Tt.Z,{"data-testid":"categories-picker-expand"}),renderInput:le=>L.createElement(ne.Z,{...le,variant:"outlined"})})):null},Tr=(0,R.Z)(()=>({button:{color:({fontColor:C})=>C}})),oe=C=>{const{cancelEnabled:_,logsVisible:O,buttonBarVisible:T,onStartOver:me,onToggleLogs:ye,onToggleButtonBar:le,taskId:Pe}=C,{getPageTheme:ke}=(0,M.Z)(),We=ke({themeId:"website"}),ht=Tr({fontColor:We.fontColor}),rn=(0,X.u)(p.s),[en,Ut]=(0,L.useState)(),[{status:gn},{execute:pn}]=(0,Jt.r)(async()=>{Pe&&await rn.cancelTask(Pe)});return L.createElement(L.Fragment,null,L.createElement(g.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:hn=>{Ut(hn.currentTarget)},"data-testid":"menu-button",className:ht.button},L.createElement(Q.Z,null)),L.createElement(Ne.ZP,{open:Boolean(en),onClose:()=>Ut(void 0),anchorEl:en,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},L.createElement(Oe.Z,null,L.createElement(Qe.Z,{onClick:()=>ye==null?void 0:ye(!O)},L.createElement(se.Z,null,L.createElement(E.Z,{fontSize:"small"})),L.createElement(Le.Z,{primary:O?"Hide Logs":"Show Logs"})),L.createElement(Qe.Z,{onClick:()=>le==null?void 0:le(!T)},L.createElement(se.Z,null,L.createElement(N.Z,{fontSize:"small"})),L.createElement(Le.Z,{primary:T?"Hide Button Bar":"Show Button Bar"})),L.createElement(Qe.Z,{onClick:me},L.createElement(se.Z,null,L.createElement(j.Z,{fontSize:"small"})),L.createElement(Le.Z,{primary:"Start Over"})),L.createElement(Qe.Z,{onClick:pn,disabled:!_||gn!=="not-executed","data-testid":"cancel-task"},L.createElement(se.Z,null,L.createElement(Ae.Z,{fontSize:"small"})),L.createElement(Le.Z,{primary:"Cancel"})))))},Ye=(0,R.Z)(C=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:C.spacing(1)},logsVisibilityButton:{marginRight:C.spacing(1)}})),rt=C=>{var _,O,T,me,ye,le,Pe,ke;const{taskId:We}=(0,wt.UO)(),ht=(0,k.tg)(wn),rn=(0,wt.s0)(),en=(0,X.u)(p.s),Ut=(0,m.WQ)(We),gn=Ye(),pn=(0,L.useMemo)(()=>{var ir,Cr;return(Cr=(ir=Ut.task)==null?void 0:ir.spec.steps.map(Mr=>{var Rr;return{...Mr,...(Rr=Ut==null?void 0:Ut.steps)==null?void 0:Rr[Mr.id]}}))!=null?Cr:[]},[Ut]),[hn,En]=(0,L.useState)(!1),[Cn,Yn]=(0,L.useState)(!0);(0,L.useEffect)(()=>{Ut.error&&En(!0)},[Ut.error]),(0,L.useEffect)(()=>{Ut.completed&&!Ut.error&&Yn(!1)},[Ut.error,Ut.completed]);const Hn=(0,L.useMemo)(()=>{for(let ir=pn.length-1;ir>=0;ir--)if(pn[ir].status!=="open")return ir;return 0},[pn]),In=(0,L.useCallback)(()=>{var ir,Cr,Mr,Rr,Vr,kr;const{namespace:Ur,name:Nr}=(Rr=(Mr=(Cr=(ir=Ut.task)==null?void 0:ir.spec.templateInfo)==null?void 0:Cr.entity)==null?void 0:Mr.metadata)!=null?Rr:{},Hr=(kr=(Vr=Ut.task)==null?void 0:Vr.spec.parameters)!=null?kr:{};!Ur||!Nr||rn({pathname:ht({namespace:Ur,templateName:Nr}),search:`?${W().stringify({formData:JSON.stringify(Hr)})}`})},[rn,(_=Ut.task)==null?void 0:_.spec.parameters,(me=(T=(O=Ut.task)==null?void 0:O.spec.templateInfo)==null?void 0:T.entity)==null?void 0:me.metadata,ht]),[{status:Ln},{execute:Zn}]=(0,Jt.r)(async()=>{We&&await en.cancelTask(We)}),sn=(ye=C.TemplateOutputsComponent)!=null?ye:q.Iy,Rn=(ke=(Pe=(le=Ut.task)==null?void 0:le.spec.templateInfo)==null?void 0:Pe.entity)==null?void 0:ke.metadata.name,tr=!(Ut.cancelled||Ut.completed);return L.createElement(Je.T3,{themeId:"website"},L.createElement(Je.h4,{pageTitleOverride:`Run of ${Rn}`,title:L.createElement("div",null,"Run of ",L.createElement("code",null,Rn)),subtitle:`Task ${We}`},L.createElement(oe,{cancelEnabled:tr,logsVisible:hn,buttonBarVisible:Cn,onStartOver:In,onToggleLogs:En,onToggleButtonBar:Yn,taskId:We})),L.createElement(Je.VY,{className:gn.contentWrapper},Ut.error?L.createElement(re.Z,{paddingBottom:2},L.createElement(Je.yu,{error:Ut.error,titleFormat:"markdown",title:Ut.error.message})):null,L.createElement(re.Z,{paddingBottom:2},L.createElement(q.Lp,{steps:pn,activeStep:Hn,isComplete:Ut.completed,isError:Boolean(Ut.error)})),L.createElement(sn,{output:Ut.output}),Cn?L.createElement(re.Z,{paddingBottom:2},L.createElement(_e.Z,null,L.createElement(re.Z,{padding:2},L.createElement("div",{className:gn.buttonBar},L.createElement(Ke.Z,{className:gn.cancelButton,disabled:!tr||Ln!=="not-executed",onClick:Zn,"data-testid":"cancel-button"},"Cancel"),L.createElement(Ke.Z,{className:gn.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>En(!hn)},hn?"Hide Logs":"Show Logs"),L.createElement(Ke.Z,{variant:"contained",color:"primary",disabled:tr,onClick:In},"Start Over"))))):null,hn?L.createElement(re.Z,{paddingBottom:2,height:"100%"},L.createElement(_e.Z,{style:{height:"100%"}},L.createElement(re.Z,{padding:2,height:"100%"},L.createElement(q.v9,{logs:Ut.stepLogs})))):null))}},31734:function($n,Vt){var e,o,p;/** @license
* eventsource.js
* Available under MIT License (MIT)
* https://github.com/Yaffle/EventSource/
*/(function(m){"use strict";var Y=m.setTimeout,V=m.clearTimeout,D=m.XMLHttpRequest,W=m.XDomainRequest,tt=m.ActiveXObject,Xe=m.EventSource,r=m.document,Ve=m.Promise,be=m.fetch,X=m.Response,k=m.TextDecoder,s=m.TextEncoder,ne=m.AbortController;if(typeof window!="undefined"&&typeof r!="undefined"&&!("readyState"in r)&&r.body==null&&(r.readyState="loading",window.addEventListener("load",function(E){r.readyState="complete"},!1)),D==null&&tt!=null&&(D=function(){return new tt("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(E){function N(){}return N.prototype=E,new N}),Date.now||(Date.now=function(){return new Date().getTime()}),ne==null){var re=be;be=function(E,N){var Q=N.signal;return re(E,{headers:N.headers,credentials:N.credentials,cache:N.cache}).then(function(q){var Ge=q.body.getReader();return Q._reader=Ge,Q._aborted&&Q._reader.cancel(),{status:q.status,statusText:q.statusText,headers:q.headers,body:{getReader:function(){return Ge}}}})},ne=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function ie(){this.bitsNeeded=0,this.codePoint=0}ie.prototype.decode=function(E){function N(mt,Qt,Ie){if(Ie===1)return mt>=128>>Qt&&mt<<Qt<=2047;if(Ie===2)return mt>=2048>>Qt&&mt<<Qt<=55295||mt>=57344>>Qt&&mt<<Qt<=65535;if(Ie===3)return mt>=65536>>Qt&&mt<<Qt<=1114111;throw new Error}function Q(mt,Qt){if(mt===6*1)return Qt>>6>15?3:Qt>31?2:1;if(mt===6*2)return Qt>15?3:2;if(mt===6*3)return 3;throw new Error}for(var q=65533,Ge="",Z=this.bitsNeeded,x=this.codePoint,he=0;he<E.length;he+=1){var Fe=E[he];Z!==0&&(Fe<128||Fe>191||!N(x<<6|Fe&63,Z-6,Q(Z,x)))&&(Z=0,x=q,Ge+=String.fromCharCode(x)),Z===0?(Fe>=0&&Fe<=127?(Z=0,x=Fe):Fe>=192&&Fe<=223?(Z=6*1,x=Fe&31):Fe>=224&&Fe<=239?(Z=6*2,x=Fe&15):Fe>=240&&Fe<=247?(Z=6*3,x=Fe&7):(Z=0,x=q),Z!==0&&!N(x,Z,Q(Z,x))&&(Z=0,x=q)):(Z-=6,x=x<<6|Fe&63),Z===0&&(x<=65535?Ge+=String.fromCharCode(x):(Ge+=String.fromCharCode(55296+(x-65535-1>>10)),Ge+=String.fromCharCode(56320+(x-65535-1&1023))))}return this.bitsNeeded=Z,this.codePoint=x,Ge};var ve=function(){try{return new k().decode(new s().encode("test"),{stream:!0})==="test"}catch(E){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+E)}return!1};(k==null||s==null||!ve())&&(k=ie);var Ce=function(){};function u(E){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=Ce,this.onload=Ce,this.onerror=Ce,this.onreadystatechange=Ce,this._contentType="",this._xhr=E,this._sendTimeout=0,this._abort=Ce}u.prototype.open=function(E,N){this._abort(!0);var Q=this,q=this._xhr,Ge=1,Z=0;this._abort=function(Ie){Q._sendTimeout!==0&&(V(Q._sendTimeout),Q._sendTimeout=0),(Ge===1||Ge===2||Ge===3)&&(Ge=4,q.onload=Ce,q.onerror=Ce,q.onabort=Ce,q.onprogress=Ce,q.onreadystatechange=Ce,q.abort(),Z!==0&&(V(Z),Z=0),Ie||(Q.readyState=4,Q.onabort(null),Q.onreadystatechange())),Ge=0};var x=function(){if(Ge===1){var Ie=0,Be="",ct=void 0;if("contentType"in q)Ie=200,Be="OK",ct=q.contentType;else try{Ie=q.status,Be=q.statusText,ct=q.getResponseHeader("Content-Type")}catch{Ie=0,Be="",ct=void 0}Ie!==0&&(Ge=2,Q.readyState=2,Q.status=Ie,Q.statusText=Be,Q._contentType=ct,Q.onreadystatechange())}},he=function(){if(x(),Ge===2||Ge===3){Ge=3;var Ie="";try{Ie=q.responseText}catch{}Q.readyState=3,Q.responseText=Ie,Q.onprogress()}},Fe=function(Ie,Be){if((Be==null||Be.preventDefault==null)&&(Be={preventDefault:Ce}),he(),Ge===1||Ge===2||Ge===3){if(Ge=4,Z!==0&&(V(Z),Z=0),Q.readyState=4,Ie==="load")Q.onload(Be);else if(Ie==="error")Q.onerror(Be);else if(Ie==="abort")Q.onabort(Be);else throw new TypeError;Q.onreadystatechange()}},mt=function(Ie){q!=null&&(q.readyState===4?(!("onload"in q)||!("onerror"in q)||!("onabort"in q))&&Fe(q.responseText===""?"error":"load",Ie):q.readyState===3?"onprogress"in q||he():q.readyState===2&&x())},Qt=function(){Z=Y(function(){Qt()},500),q.readyState===3&&he()};"onload"in q&&(q.onload=function(Ie){Fe("load",Ie)}),"onerror"in q&&(q.onerror=function(Ie){Fe("error",Ie)}),"onabort"in q&&(q.onabort=function(Ie){Fe("abort",Ie)}),"onprogress"in q&&(q.onprogress=he),"onreadystatechange"in q&&(q.onreadystatechange=function(Ie){mt(Ie)}),("contentType"in q||!("ontimeout"in D.prototype))&&(N+=(N.indexOf("?")===-1?"?":"&")+"padding=true"),q.open(E,N,!0),"readyState"in q&&(Z=Y(function(){Qt()},0))},u.prototype.abort=function(){this._abort(!1)},u.prototype.getResponseHeader=function(E){return this._contentType},u.prototype.setRequestHeader=function(E,N){var Q=this._xhr;"setRequestHeader"in Q&&Q.setRequestHeader(E,N)},u.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},u.prototype.send=function(){if((!("ontimeout"in D.prototype)||!("sendAsBinary"in D.prototype)&&!("mozAnon"in D.prototype))&&r!=null&&r.readyState!=null&&r.readyState!=="complete"){var E=this;E._sendTimeout=Y(function(){E._sendTimeout=0,E.send()},4);return}var N=this._xhr;"withCredentials"in N&&(N.withCredentials=this.withCredentials);try{N.send(void 0)}catch(Q){throw Q}};function F(E){return E.replace(/[A-Z]/g,function(N){return String.fromCharCode(N.charCodeAt(0)+32)})}function R(E){for(var N=Object.create(null),Q=E.split(`\r
`),q=0;q<Q.length;q+=1){var Ge=Q[q],Z=Ge.split(": "),x=Z.shift(),he=Z.join(": ");N[F(x)]=he}this._map=N}R.prototype.get=function(E){return this._map[F(E)]},D!=null&&D.HEADERS_RECEIVED==null&&(D.HEADERS_RECEIVED=2);function M(){}M.prototype.open=function(E,N,Q,q,Ge,Z,x){E.open("GET",Ge);var he=0;E.onprogress=function(){var mt=E.responseText,Qt=mt.slice(he);he+=Qt.length,Q(Qt)},E.onerror=function(mt){mt.preventDefault(),q(new Error("NetworkError"))},E.onload=function(){q(null)},E.onabort=function(){q(null)},E.onreadystatechange=function(){if(E.readyState===D.HEADERS_RECEIVED){var mt=E.status,Qt=E.statusText,Ie=E.getResponseHeader("Content-Type"),Be=E.getAllResponseHeaders();N(mt,Qt,Ie,new R(Be))}},E.withCredentials=Z;for(var Fe in x)Object.prototype.hasOwnProperty.call(x,Fe)&&E.setRequestHeader(Fe,x[Fe]);return E.send(),E};function g(E){this._headers=E}g.prototype.get=function(E){return this._headers.get(E)};function Ne(){}Ne.prototype.open=function(E,N,Q,q,Ge,Z,x){var he=null,Fe=new ne,mt=Fe.signal,Qt=new k;return be(Ge,{headers:x,credentials:Z?"include":"same-origin",signal:mt,cache:"no-store"}).then(function(Ie){return he=Ie.body.getReader(),N(Ie.status,Ie.statusText,Ie.headers.get("Content-Type"),new g(Ie.headers)),new Ve(function(Be,ct){var Ot=function(){he.read().then(function(bt){if(bt.done)Be(void 0);else{var $t=Qt.decode(bt.value,{stream:!0});Q($t),Ot()}}).catch(function(bt){ct(bt)})};Ot()})}).catch(function(Ie){if(Ie.name!=="AbortError")return Ie}).then(function(Ie){q(Ie)}),{abort:function(){he!=null&&he.cancel(),Fe.abort()}}};function Oe(){this._listeners=Object.create(null)}function Qe(E){Y(function(){throw E},0)}Oe.prototype.dispatchEvent=function(E){E.target=this;var N=this._listeners[E.type];if(N!=null)for(var Q=N.length,q=0;q<Q;q+=1){var Ge=N[q];try{typeof Ge.handleEvent=="function"?Ge.handleEvent(E):Ge.call(this,E)}catch(Z){Qe(Z)}}},Oe.prototype.addEventListener=function(E,N){E=String(E);var Q=this._listeners,q=Q[E];q==null&&(q=[],Q[E]=q);for(var Ge=!1,Z=0;Z<q.length;Z+=1)q[Z]===N&&(Ge=!0);Ge||q.push(N)},Oe.prototype.removeEventListener=function(E,N){E=String(E);var Q=this._listeners,q=Q[E];if(q!=null){for(var Ge=[],Z=0;Z<q.length;Z+=1)q[Z]!==N&&Ge.push(q[Z]);Ge.length===0?delete Q[E]:Q[E]=Ge}};function se(E){this.type=E,this.target=void 0}function Le(E,N){se.call(this,E),this.data=N.data,this.lastEventId=N.lastEventId}Le.prototype=Object.create(se.prototype);function _e(E,N){se.call(this,E),this.status=N.status,this.statusText=N.statusText,this.headers=N.headers}_e.prototype=Object.create(se.prototype);function Ke(E,N){se.call(this,E),this.error=N.error}Ke.prototype=Object.create(se.prototype);var St=-1,L=0,pt=1,fe=2,zt=-1,Et=0,Dt=1,Wt=2,Je=3,_t=/^text\/event\-stream(;.*)?$/i,Nt=1e3,Xt=18e6,Ht=function(E,N){var Q=E==null?N:parseInt(E,10);return Q!==Q&&(Q=N),Ft(Q)},Ft=function(E){return Math.min(Math.max(E,Nt),Xt)},yt=function(E,N,Q){try{typeof N=="function"&&N.call(E,Q)}catch(q){Qe(q)}};function Tt(E,N){Oe.call(this),N=N||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,Ae(this,E,N)}function wt(){return D!=null&&"withCredentials"in D.prototype||W==null?new D:new W}var Jt=be!=null&&X!=null&&"body"in X.prototype;function Ae(E,N,Q){N=String(N);var q=Boolean(Q.withCredentials),Ge=Q.lastEventIdQueryParameterName||"lastEventId",Z=Ft(1e3),x=Ht(Q.heartbeatTimeout,45e3),he="",Fe=Z,mt=!1,Qt=0,Ie=Q.headers||{},Be=Q.Transport,ct=Jt&&Be==null?void 0:new u(Be!=null?new Be:wt()),Ot=Be!=null&&typeof Be!="string"?new Be:ct==null?new Ne:new M,bt=void 0,$t=0,Ct=St,$e="",qe="",Ee="",G="",ue=Et,Ue=0,nt=0,it=function(De,w,H,te){if(Ct===L)if(De===200&&H!=null&&_t.test(H)){Ct=pt,mt=Date.now(),Fe=Z,E.readyState=pt;var ut=new _e("open",{status:De,statusText:w,headers:te});E.dispatchEvent(ut),yt(E,E.onopen,ut)}else{var K="";De!==200?(w&&(w=w.replace(/\s+/g," ")),K="EventSource's response has a status "+De+" "+w+" that is not 200. Aborting the connection."):K="EventSource's response has a Content-Type specifying an unsupported type: "+(H==null?"-":H.replace(/\s+/g," "))+". Aborting the connection.",nn();var ut=new _e("error",{status:De,statusText:w,headers:te});E.dispatchEvent(ut),yt(E,E.onerror,ut),console.error(K)}},Rt=function(De){if(Ct===pt){for(var w=-1,H=0;H<De.length;H+=1){var te=De.charCodeAt(H);(te===`
`.charCodeAt(0)||te==="\r".charCodeAt(0))&&(w=H)}var ut=(w!==-1?G:"")+De.slice(0,w+1);G=(w===-1?G:"")+De.slice(w+1),De!==""&&(mt=Date.now(),Qt+=De.length);for(var K=0;K<ut.length;K+=1){var te=ut.charCodeAt(K);if(ue===zt&&te===`
`.charCodeAt(0))ue=Et;else if(ue===zt&&(ue=Et),te==="\r".charCodeAt(0)||te===`
`.charCodeAt(0)){if(ue!==Et){ue===Dt&&(nt=K+1);var ee=ut.slice(Ue,nt-1),He=ut.slice(nt+(nt<K&&ut.charCodeAt(nt)===" ".charCodeAt(0)?1:0),K);ee==="data"?($e+=`
`,$e+=He):ee==="id"?qe=He:ee==="event"?Ee=He:ee==="retry"?(Z=Ht(He,Z),Fe=Z):ee==="heartbeatTimeout"&&(x=Ht(He,x),$t!==0&&(V($t),$t=Y(function(){we()},x)))}if(ue===Et){if($e!==""){he=qe,Ee===""&&(Ee="message");var lt=new Le(Ee,{data:$e.slice(1),lastEventId:qe});if(E.dispatchEvent(lt),Ee==="open"?yt(E,E.onopen,lt):Ee==="message"?yt(E,E.onmessage,lt):Ee==="error"&&yt(E,E.onerror,lt),Ct===fe)return}$e="",Ee=""}ue=te==="\r".charCodeAt(0)?zt:Et}else ue===Et&&(Ue=K,ue=Dt),ue===Dt?te===":".charCodeAt(0)&&(nt=K+1,ue=Wt):ue===Wt&&(ue=Je)}}},qt=function(De){if(Ct===pt||Ct===L){Ct=St,$t!==0&&(V($t),$t=0),$t=Y(function(){we()},Fe),Fe=Ft(Math.min(Z*16,Fe*2)),E.readyState=L;var w=new Ke("error",{error:De});E.dispatchEvent(w),yt(E,E.onerror,w),De!=null&&console.error(De)}},nn=function(){Ct=fe,bt!=null&&(bt.abort(),bt=void 0),$t!==0&&(V($t),$t=0),E.readyState=fe},we=function(){if($t=0,Ct!==St){if(!mt&&bt!=null)qt(new Error("No activity within "+x+" milliseconds. "+(Ct===L?"No response received.":Qt+" chars received.")+" Reconnecting.")),bt!=null&&(bt.abort(),bt=void 0);else{var De=Math.max((mt||Date.now())+x-Date.now(),1);mt=!1,$t=Y(function(){we()},De)}return}mt=!1,Qt=0,$t=Y(function(){we()},x),Ct=L,$e="",Ee="",qe=he,G="",Ue=0,nt=0,ue=Et;var w=N;if(N.slice(0,5)!=="data:"&&N.slice(0,5)!=="blob:"&&he!==""){var H=N.indexOf("?");w=H===-1?N:N.slice(0,H+1)+N.slice(H+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(He,lt){return lt===Ge?"":He}),w+=(N.indexOf("?")===-1?"?":"&")+Ge+"="+encodeURIComponent(he)}var te=E.withCredentials,ut={};ut.Accept="text/event-stream";var K=E.headers;if(K!=null)for(var ee in K)Object.prototype.hasOwnProperty.call(K,ee)&&(ut[ee]=K[ee]);try{bt=Ot.open(ct,it,Rt,qt,w,te,ut)}catch(He){throw nn(),He}};E.url=N,E.readyState=L,E.withCredentials=q,E.headers=Ie,E._close=nn,we()}Tt.prototype=Object.create(Oe.prototype),Tt.prototype.CONNECTING=L,Tt.prototype.OPEN=pt,Tt.prototype.CLOSED=fe,Tt.prototype.close=function(){this._close()},Tt.CONNECTING=L,Tt.OPEN=pt,Tt.CLOSED=fe,Tt.prototype.withCredentials=void 0;var j=Xe;D!=null&&(Xe==null||!("withCredentials"in Xe.prototype))&&(j=Tt),function(E){if(typeof $n.exports=="object"){var N=E(Vt);N!==void 0&&($n.exports=N)}else o=[Vt],e=E,p=typeof e=="function"?e.apply(Vt,o):e,p!==void 0&&($n.exports=p)}(function(E){E.EventSourcePolyfill=Tt,E.NativeEventSource=Xe,E.EventSource=j})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:this:globalThis)},42054:($n,Vt,e)=>{"use strict";e.d(Vt,{S:()=>Ce,b:()=>be,c:()=>ie});var o=e(2784),p=e(30705),m=e(79692),Y=e(86136),V=e(49378),D=e(95544),W=e(38402),tt=e(11776),Xe=e(90436),r=e(49558);const Ve=(0,m.Z)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),be=u=>{const{text:F,preTag:R,postTag:M}=u,g=Ve(),Ne=(0,o.useMemo)(()=>F.split(new RegExp(`(${R}.+?${M})`)),[M,R,F]);return o.createElement(o.Fragment,null,Ne.map((Oe,Qe)=>Oe.includes(R)?o.createElement("mark",{className:g.highlight,key:Qe},Oe.replace(new RegExp(`${R}|${M}`,"g"),"")):Oe))},X=({result:u,highlight:F,icon:R,secondaryAction:M,lineClamp:g=5})=>u?o.createElement(o.Fragment,null,R&&o.createElement(Y.Z,null,R),o.createElement(V.Z,{primaryTypographyProps:{variant:"h6"},primary:o.createElement(r.rU,{noTrack:!0,to:u.location},F!=null&&F.fields.title?o.createElement(be,{text:(F==null?void 0:F.fields.title)||"",preTag:(F==null?void 0:F.preTag)||"",postTag:(F==null?void 0:F.postTag)||""}):u.title),secondary:o.createElement(Xe.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:g,overflow:"hidden"},color:"textSecondary",variant:"body2"},F!=null&&F.fields.text?o.createElement(be,{text:F.fields.text,preTag:F.preTag,postTag:F.postTag}):u.text)}),M&&o.createElement(D.Z,{alignItems:"flex-end"},M)):null,k=u=>o.createElement(p.fC,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},o.createElement(X,{...u})),s="search.results.list.items.extensions.v1",ne=(u,F)=>{for(const R of u){if(!(0,o.isValidElement)(R))continue;const M=(0,p.IY)(R,s);if(M!=null&&M(F))return(0,o.cloneElement)(R,{rank:F.rank,highlight:F.highlight,result:F.document,...R.props})}return null},re=u=>{const{rank:F,result:R,noTrack:M,children:g,alignItems:Ne="flex-start",...Oe}=u,Qe=(0,p.z$)(),se=(0,o.useCallback)(()=>{M||R&&Qe.captureEvent("discover",R.title,{attributes:{to:R.location},value:F})},[F,R,M,Qe]);return o.createElement(W.Z,{divider:!0,alignItems:Ne,onClickCapture:se,...Oe},g)},ie=u=>{const{name:F,component:R,predicate:M=()=>!0}=u;return(0,p.YO)({name:F,component:{lazy:()=>R().then(g=>Ne=>o.createElement(re,{rank:Ne.rank,result:Ne.result,noTrack:Ne.noTrack},(0,o.createElement)(g,Ne)))},data:{[s]:M}})},ve=u=>{const F=(0,p.vJ)(u,R=>R.selectByComponentData({key:s}).getElements(),[u]);return(0,o.useCallback)((R,M)=>{const g=ne(F,R);return o.createElement(o.Fragment,{key:M},g!=null?g:o.createElement(re,{rank:R.rank,result:R.document},o.createElement(k,{rank:R.rank,highlight:R.highlight,result:R.document})))},[F])},Ce=u=>{const{results:F,children:R,...M}=u,g=ve(R);return o.createElement(tt.Z,{...M},F.map(g))}},92573:($n,Vt,e)=>{"use strict";e.d(Vt,{E1:()=>yt,GQ:()=>nn,Nd:()=>Xt,Rx:()=>Dt,US:()=>Ft,ay:()=>x,gK:()=>fe,lt:()=>bt,qO:()=>Ae,wy:()=>Qt});var o=e(30204),p=e(30705),m=e(42054),Y=e(50581),V=e(61837),D=e(86619),W=e(79692),tt=e(4614),Xe=e(7089),r=e(42494),Ve=e(84899),be=e(5806),X=e(21324),k=e(56939),s=e(73698),ne=e(12231),re=e(90436),ie=e(28899),ve=e(77277),Ce=e(21853),u=e(2784),F=e(48760),R=e(76635),M=e.n(R),g=e(64279),Ne=e(1849),Oe=e(18473),Qe=e(88013),se=e(69294),Le=e(49558),_e=e(19126),Ke=e.n(_e),St=e(27742),L=e(35352),pt=e(48834).Buffer;const fe=(0,o.c)({id:"plugin.search.queryservice"});class zt{constructor(De){this.mockedResults=De}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const Et=(0,Oe.CT)("search-context"),Dt=()=>{const we=(0,u.useContext)(Et);if(!we)throw new Error("useSearch must be used within a SearchContextProvider");const De=we.atVersion(1);if(!De)throw new Error("No SearchContext v1 found");return De},Wt=()=>(0,u.useContext)(Et)!==void 0,Je={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},_t=(we=Je)=>{var De,w,H,te;const ut=(0,o.u)(fe),K=(0,p.z$)(),[ee,He]=(0,u.useState)(we.term),[lt,Bt]=(0,u.useState)(we.types),[It,an]=(0,u.useState)(we.filters),[on,fn]=(0,u.useState)(we.pageLimit),[tn,cn]=(0,u.useState)(we.pageCursor),ln=(0,Ne.Z)(ee),wn=(0,Ne.Z)(It),dn=(0,g.default)(async()=>{const Gt=await ut.query({term:ee,types:lt,filters:It,pageLimit:on,pageCursor:tn});return ee&&Gt.numberOfResults!==void 0&&K.captureEvent("search",ee,{value:Gt.numberOfResults}),Gt},[ee,lt,It,on,tn]),bn=!dn.loading&&!dn.error&&((De=dn.value)==null?void 0:De.nextPageCursor),ce=!dn.loading&&!dn.error&&((w=dn.value)==null?void 0:w.previousPageCursor),ae=(0,u.useCallback)(()=>{var Gt;cn((Gt=dn.value)==null?void 0:Gt.nextPageCursor)},[(H=dn.value)==null?void 0:H.nextPageCursor]),Ze=(0,u.useCallback)(()=>{var Gt;cn((Gt=dn.value)==null?void 0:Gt.previousPageCursor)},[(te=dn.value)==null?void 0:te.previousPageCursor]);return(0,u.useEffect)(()=>{ln!==void 0&&ee!==ln&&cn(void 0)},[ee,ln,cn]),(0,u.useEffect)(()=>{wn!==void 0&&!(0,R.isEqual)(It,wn)&&cn(void 0)},[It,wn,cn]),{result:dn,term:ee,setTerm:He,types:lt,setTypes:Bt,filters:It,setFilters:an,pageLimit:on,setPageLimit:fn,pageCursor:tn,setPageCursor:cn,fetchNextPage:bn?ae:void 0,fetchPreviousPage:ce?Ze:void 0}},Nt=we=>{const{initialState:De,children:w}=we,H=_t(De);return u.createElement(p.fC,{attributes:{searchTypes:H.types.sort().join(",")}},u.createElement(Et.Provider,{value:(0,Oe.EI)({1:H})},w))},Xt=we=>{const{initialState:De,inheritParentContextIfAvailable:w,children:H}=we,te=Wt(),ut=(0,o.u)(o.p),K=De!=null?De:{},ee=ut.has("search.query.pageLimit")?{pageLimit:ut.getNumber("search.query.pageLimit")}:{},He={...Je,...K,...ee};return te&&w?u.createElement(u.Fragment,null,H):u.createElement(Nt,{initialState:He},H)};function Ht(we){return(0,u.forwardRef)((De,w)=>u.createElement(Xt,{inheritParentContextIfAvailable:!0},u.createElement(we,{...De,ref:w})))}const Ft=Ht((0,u.forwardRef)((we,De)=>{const{onChange:w,onKeyDown:H=()=>{},onClear:te=()=>{},onSubmit:ut=()=>{},debounceTime:K=200,clearButton:ee=!0,fullWidth:He=!0,value:lt,label:Bt,placeholder:It,inputProps:an={},InputProps:on={},endAdornment:fn,...tn}=we,cn=(0,o.u)(o.p),[ln,wn]=(0,u.useState)(""),dn=(0,u.useRef)("");(0,u.useEffect)(()=>{wn(_n=>_n===dn.current?String(lt):_n)},[lt,dn]),(0,F.Z)(()=>{dn.current=ln,w(ln)},K,[ln]);const bn=(0,u.useCallback)(_n=>{wn(_n.target.value)},[wn]),ce=(0,u.useCallback)(_n=>{H&&H(_n),ut&&_n.key==="Enter"&&ut()},[H,ut]),ae=(0,u.useCallback)(()=>{dn.current="",w(""),wn(""),te&&te()},[w,te]),Ze=Bt?void 0:"Search",Pt=It!=null?It:`Search in ${cn.getOptionalString("app.title")||"Backstage"}`,Gt=u.createElement(Y.Z,{position:"start"},u.createElement(V.Z,{"aria-label":"Query",size:"small",disabled:!0},u.createElement(Ce.Z,null))),jt=u.createElement(Y.Z,{position:"end"},u.createElement(ve.Z,{"aria-label":"Clear",size:"small",onClick:ae,onKeyDown:_n=>{_n.key==="Enter"&&_n.stopPropagation()}},"Clear"));return u.createElement(D.Z,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:De,value:ln,label:Bt,placeholder:Pt,InputProps:{startAdornment:Gt,endAdornment:ee?jt:fn,...on},inputProps:{"aria-label":Ze,...an},fullWidth:He,onChange:bn,onKeyDown:ce,...tn})})),yt=Ht((0,u.forwardRef)((we,De)=>{const{value:w="",onChange:H,...te}=we,{term:ut,setTerm:K}=Dt();(0,u.useEffect)(()=>{w&&K(String(w))},[w,K]);const ee=(0,u.useCallback)(He=>{H?H(He):K(He)},[H,K]);return u.createElement(p.fC,{attributes:{pluginId:"search",extension:"SearchBar"}},u.createElement(Ft,{...te,ref:De,value:ut,onChange:ee}))})),Tt=(0,W.Z)(we=>({loading:{right:we.spacing(1),position:"absolute"}})),wt=we=>De=>u.createElement(Xt,{inheritParentContextIfAvailable:!0},u.createElement(we,{...De})),Jt=()=>{const we=Tt();return u.createElement(tt.Z,{className:we.loading,"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20})},Ae=wt(function(De){const{loading:w,value:H,onChange:te=()=>{},options:ut=[],getOptionLabel:K=dn=>String(dn),inputPlaceholder:ee,inputDebounceTime:He,freeSolo:lt=!0,fullWidth:Bt=!0,clearOnBlur:It=!1,"data-testid":an="search-autocomplete",...on}=De,{setTerm:fn}=Dt(),tn=(0,u.useCallback)(dn=>dn?typeof dn=="string"?dn:K(dn):"",[K]),cn=(0,u.useMemo)(()=>tn(H),[H,tn]),ln=(0,u.useCallback)((dn,bn,ce,ae)=>{fn(tn(bn)),te(dn,bn,ce,ae)},[tn,fn,te]),wn=(0,u.useCallback)(({InputProps:{ref:dn,className:bn,endAdornment:ce},InputLabelProps:ae,...Ze})=>u.createElement(yt,{...Ze,ref:dn,clearButton:!1,value:cn,placeholder:ee,debounceTime:He,endAdornment:w?u.createElement(Jt,null):ce,InputProps:{className:bn}}),[w,cn,ee,He]);return u.createElement(Qe.ZP,{...on,"data-testid":an,value:H,onChange:ln,options:ut,getOptionLabel:K,renderInput:wn,freeSolo:lt,fullWidth:Bt,clearOnBlur:It})}),j=we=>{const{icon:De,primaryText:w,primaryTextTypographyProps:H,secondaryText:te,secondaryTextTypographyProps:ut,disableTextTypography:K}=we;return React.createElement(React.Fragment,null,De?React.createElement(ListItemIcon,null,De):null,React.createElement(ListItemText,{primary:w,primaryTypographyProps:H,secondary:te,secondaryTypographyProps:ut,disableTypography:K}))},E=(we,De,w=[],H=250)=>{const te=(0,u.useRef)({}),ut=we||(()=>Promise.resolve([])),[K,ee]=(0,se.default)(ut,[De],{loading:!0});if((0,F.Z)(()=>{te.current[De]===void 0&&(te.current[De]=ee(De).then(lt=>(te.current[De]=lt,lt)))},H,[ee,De]),w.length)return{loading:!1,value:w};const He=te.current[De];return Array.isArray(He)?{loading:!1,value:He}:K},N=(we,De)=>{const{setFilters:w}=Dt();(0,u.useEffect)(()=>{De&&[De].flat().length>0&&w(H=>({...H,[we]:De}))},[])},Q=we=>{const{className:De,defaultValue:w,name:H,values:te,valuesDebounceMs:ut,label:K,filterSelectedOptions:ee,limitTags:He,multiple:lt}=we,[Bt,It]=(0,u.useState)("");N(H,w);const an=typeof te=="function"?te:void 0,on=typeof te=="function"?void 0:te,{value:fn,loading:tn}=E(an,Bt,on,ut),{filters:cn,setFilters:ln}=Dt(),wn=cn[H]||(lt?[]:null),dn=(ae,Ze)=>{ln(Pt=>{const{[H]:Gt,...jt}=Pt;return Ze?{...jt,[H]:Ze}:{...jt}})},bn=ae=>u.createElement(D.Z,{...ae,name:"search",variant:"outlined",label:K,fullWidth:!0}),ce=(ae,Ze)=>ae.map((Pt,Gt)=>u.createElement(Xe.Z,{label:Pt,color:"primary",...Ze({index:Gt})}));return u.createElement(Qe.ZP,{filterSelectedOptions:ee,limitTags:He,multiple:lt,className:De,id:`${lt?"multi-":""}select-filter-${H}--select`,options:fn||[],loading:tn,value:wn,onChange:dn,onInputChange:(ae,Ze)=>It(Ze),renderInput:bn,renderTags:ce})},q=(0,W.Z)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),Ge=we=>{const{className:De,defaultValue:w,label:H,name:te,values:ut=[],valuesDebounceMs:K}=we,ee=q(),{filters:He,setFilters:lt}=Dt();N(te,w);const Bt=typeof ut=="function"?ut:void 0,It=typeof ut=="function"?void 0:ut,{value:an=[],loading:on}=E(Bt,"",It,K),fn=tn=>{const{target:{value:cn,checked:ln}}=tn;lt(wn=>{const{[te]:dn,...bn}=wn,ce=(dn||[]).filter(Ze=>Ze!==cn),ae=ln?[...ce,cn]:ce;return ae.length?{...bn,[te]:ae}:bn})};return u.createElement(r.Z,{className:De,disabled:on,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},H?u.createElement(Ve.Z,{className:ee.label},H):null,an.map(tn=>{var cn;return u.createElement(be.Z,{key:tn,classes:{root:ee.checkboxWrapper,label:ee.textWrapper},label:tn,control:u.createElement(X.Z,{color:"primary",inputProps:{"aria-labelledby":tn},value:tn,name:tn,onChange:fn,checked:((cn=He[te])!=null?cn:[]).includes(tn)})})}))},Z=we=>{const{className:De,defaultValue:w,label:H,name:te,values:ut,valuesDebounceMs:K}=we,ee=q();N(te,w);const He=typeof ut=="function"?ut:void 0,lt=typeof ut=="function"?void 0:ut,{value:Bt=[],loading:It}=E(He,"",lt,K),{filters:an,setFilters:on}=Dt(),fn=tn=>{const{target:{value:cn}}=tn;on(ln=>{const{[te]:wn,...dn}=ln;return cn?{...dn,[te]:cn}:dn})};return u.createElement(r.Z,{disabled:It,className:De,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},H?u.createElement(k.Z,{className:ee.label,margin:"dense"},H):null,u.createElement(s.Z,{variant:"outlined",value:an[te]||"",onChange:fn},u.createElement(ne.Z,{value:""},u.createElement("em",null,"All")),Bt.map(tn=>u.createElement(ne.Z,{key:tn,value:tn},u.createElement(re.Z,{variant:"inherit",noWrap:!0},tn)))))},x=we=>{const{component:De,...w}=we;return u.createElement(De,{...w})};x.Checkbox=we=>u.createElement(x,{...we,component:Ge}),x.Select=we=>u.createElement(x,{...we,component:Z}),x.Autocomplete=we=>u.createElement(x,{...we,component:Q});const he=we=>pt.from(we.toString(),"utf-8").toString("base64"),Fe=we=>we?Number(pt.from(we,"base64").toString("utf-8")):0,mt=we=>{const{total:De=-1,cursor:w,hasNextPage:H,onCursorChange:te,limit:ut=25,limitLabel:K="Results per page:",limitText:ee=({from:fn,to:tn})=>De>0?`of ${De}`:`${fn}-${tn}`,limitOptions:He,onLimitChange:lt,...Bt}=we,It=(0,u.useMemo)(()=>Fe(w),[w]),an=(0,u.useCallback)((fn,tn)=>{te==null||te(he(tn))},[te]),on=(0,u.useCallback)(fn=>{const tn=fn.target.value;lt==null||lt(parseInt(tn,10))},[lt]);return u.createElement(ie.Z,{...Bt,component:"div",count:De,page:It,nextIconButtonProps:{...H!==void 0&&{disabled:!H}},onPageChange:an,rowsPerPage:ut,labelRowsPerPage:K,labelDisplayedRows:ee,rowsPerPageOptions:He,onRowsPerPageChange:on})},Qt=we=>{const{pageLimit:De,setPageLimit:w,pageCursor:H,setPageCursor:te,fetchNextPage:ut}=Dt(),K=(0,u.useCallback)(ee=>{w(ee),te(void 0)},[w,te]);return u.createElement(mt,{...we,hasNextPage:!!ut,limit:De,onLimitChange:K,cursor:H,onCursorChange:te})},Ie=we=>{const{children:De}=we,w=Dt(),{result:H,...te}=w;return De(H,te)},Be=we=>{const{query:De,children:w}=we,H=(0,o.u)(fe),te=(0,g.default)(()=>{const{term:ut="",types:K=[],filters:ee={},...He}=De;return H.query({...He,term:ut,types:K,filters:ee})},[De]);return w(te,De)},ct=we=>{const{query:De,children:w}=we;return De?u.createElement(Be,{query:De},w):u.createElement(Ie,null,w)},Ot=we=>{const{query:De,children:w,noResultsComponent:H=u.createElement(Le.ub,{missing:"data",title:"Sorry, no results were found"}),...te}=we;return u.createElement(ct,{query:De},({loading:ut,error:K,value:ee})=>ut?u.createElement(Le.Ex,null):K?u.createElement(Le.Gk,{title:"Error encountered while fetching search results",error:K}):ee!=null&&ee.results.length?(0,R.isFunction)(w)?w(ee):u.createElement(m.S,{...te,results:ee.results},w):H)},bt=we=>u.createElement(p.fC,{attributes:{pluginId:"search",extension:"SearchResult"}},u.createElement(Ot,{...we})),$t=we=>{const{error:De,loading:w,resultItems:H,renderResultItem:te=He=>React.createElement(HigherOrderDefaultResultListItem,{key:He.document.location,result:He.document}),disableRenderingWithNoResults:ut,noResultsComponent:K=ut?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...ee}=we;return w?React.createElement(Progress,null):De?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:De}):H!=null&&H.length?React.createElement(List,{...ee},H.map(te)):React.createElement(React.Fragment,null,K)},Ct=we=>{const{query:De,renderResultItem:w,children:H,...te}=we,ut=useSearchResultListItemExtensions(H);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(ct,{query:De},({loading:K,error:ee,value:He})=>React.createElement($t,{...te,error:ee,loading:K,resultItems:He==null?void 0:He.results,renderResultItem:w!=null?w:ut})))},$e=(0,W.Z)(we=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:we.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:we.palette.text.secondary,margin:we.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:we.palette.text.secondary,margin:we.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:we.spacing(.5)}})),qe=we=>{const De=$e(),{label:w,children:H,...te}=we;return React.createElement(Chip,{...te,className:De.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,w,": ",H)})},Ee=()=>null,G=(0,W.Z)(we=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:we.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:we.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),ue=we=>{const De=G(),{label:w,value:H="None",onChange:te,onDelete:ut}=we,K=useCallback(ee=>{te(ee.target.value)},[te]);return React.createElement(qe,{label:w,onDelete:ut},React.createElement(Typography,{role:"textbox",component:"span",className:De.root,onChange:K,contentEditable:!0,suppressContentEditableWarning:!0},H==null?void 0:H.toString()))},Ue=(0,W.Z)(we=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:we.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),nt=we=>{const De=Ue(),{label:w,value:H="none",onChange:te,onDelete:ut,children:K}=we,ee=useCallback(He=>{te(He.target.value)},[te]);return React.createElement(qe,{label:w,onDelete:ut},React.createElement(Select,{className:De.root,value:H,onChange:ee,input:React.createElement(InputBase,null),IconComponent:Ee},React.createElement(MenuItem,{value:"none"},"None"),K))};function it(we){const De=$e(),[w,H]=useState(null),{error:te,loading:ut,icon:K,title:ee,titleProps:He={},link:lt=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:De.listSubheaderLinkIcon})),linkProps:Bt={},filterOptions:It,renderFilterOption:an=ae=>React.createElement(MenuItem,{key:String(ae),value:String(ae)},String(ae)),filterFields:on,renderFilterField:fn,resultItems:tn,renderResultItem:cn=ae=>React.createElement(HigherOrderDefaultResultListItem,{key:ae.document.location,result:ae.document}),disableRenderingWithNoResults:ln,noResultsComponent:wn=ln?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...dn}=we,bn=useCallback(ae=>{H(ae.currentTarget)},[]),ce=useCallback(()=>{H(null)},[]);return ut?React.createElement(Progress,null):te?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:te}):tn!=null&&tn.length?React.createElement(List,{...dn},React.createElement(ListSubheader,{className:De.listSubheader},K,React.createElement(Typography,{className:De.listSubheaderName,component:"strong",...He},ee),It?React.createElement(Chip,{className:De.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:bn}):null,It?React.createElement(Menu,{id:"filters-menu",anchorEl:w,open:Boolean(w),onClose:ce,onClick:ce,keepMounted:!0},It.map(an)):null,on==null?void 0:on.map(ae=>{var Ze;return(Ze=fn==null?void 0:fn(ae))!=null?Ze:null}),React.createElement(Link,{className:De.listSubheaderLink,to:"/search",...Bt},lt)),tn.map(cn)):React.createElement(React.Fragment,null,wn)}function Rt(we){const{query:De,children:w,renderResultItem:H,linkProps:te={},...ut}=we,K=useSearchResultListItemExtensions(w);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(ct,{query:De},({loading:ee,error:He,value:lt},{term:Bt,types:It,pageCursor:an,filters:on={}})=>{const fn=`/search?${qs.stringify({term:Bt,types:It,filters:on,pageCursor:an,query:Bt},{arrayFormat:"brackets"})}`;return React.createElement(it,{...ut,error:He,loading:ee,linkProps:{to:fn,...te},filterFields:Object.keys(on),resultItems:lt==null?void 0:lt.results,renderResultItem:H!=null?H:K})}))}const qt=(0,W.Z)(we=>({root:{display:"flex",justifyContent:"space-between",gap:we.spacing(2),margin:we.spacing(2,0)}})),nn=()=>{const{fetchNextPage:we,fetchPreviousPage:De}=Dt(),w=qt();return!we&&!De?u.createElement(u.Fragment,null):u.createElement("nav",{"aria-label":"pagination navigation",className:w.root},u.createElement(ve.Z,{"aria-label":"previous page",disabled:!De,onClick:De,startIcon:u.createElement(L.Z,null)},"Previous"),u.createElement(ve.Z,{"aria-label":"next page",disabled:!we,onClick:we,endIcon:u.createElement(St.Z,null)},"Next"))}},81024:($n,Vt,e)=>{"use strict";e.d(Vt,{S:()=>Xt,a:()=>Jt,b:()=>Wt,c:()=>Je,r:()=>Et});var o=e(32272),p=e(19126),m=e.n(p),Y=e(92573),V=e(30705),D=e(30204),W=e(2784),tt=e(1849),Xe=e(73557),r=e(79692),Ve=e(94339),be=e(32552),X=e(24579),k=e(27616),s=e(8284),ne=e(70660),re=e(11776),ie=e(85256),ve=e(38402),Ce=e(86136),u=e(49378),F=e(99152),R=e(6487),M=e(42494),g=e(56939),Ne=e(73698),Oe=e(7089),Qe=e(12231),se=e(21324),Le=e(62155),_e=e(38016),Ke=e(56881),St=e(64279),L=Object.defineProperty,pt=(Ae,j,E)=>j in Ae?L(Ae,j,{enumerable:!0,configurable:!0,writable:!0,value:E}):Ae[j]=E,fe=(Ae,j,E)=>(pt(Ae,typeof j!="symbol"?j+"":j,E),E);class zt{constructor(j){fe(this,"discoveryApi"),fe(this,"identityApi"),this.discoveryApi=j.discoveryApi,this.identityApi=j.identityApi}async query(j){const{token:E}=await this.identityApi.getCredentials(),N=m().stringify(j),Q=`${await this.discoveryApi.getBaseUrl("search")}/query?${N}`,q=await fetch(Q,{headers:E?{Authorization:`Bearer ${E}`}:{}});if(!q.ok)throw await o.VL.fromResponse(q);return q.json()}}const Et=(0,V.NT)({id:"search"}),Dt=(0,V.rx)({id:"search",apis:[(0,V.ni)({api:Y.gK,deps:{discoveryApi:D.q,identityApi:D.v},factory:({discoveryApi:Ae,identityApi:j})=>new zt({discoveryApi:Ae,identityApi:j})})],routes:{root:Et}}),Wt=Dt.provide((0,V.P4)({name:"SearchPage",component:()=>e.e(3509).then(e.bind(e,53509)).then(Ae=>Ae.SearchPage),mountPoint:Et})),Je=Dt.provide((0,V.CO)({name:"SidebarSearchModal",component:{lazy:()=>e.e(8742).then(e.bind(e,38742)).then(Ae=>Ae.SidebarSearchModal)}})),_t=Dt.provide((0,V.CO)({name:"HomePageSearchBar",component:{lazy:()=>e.e(8622).then(e.bind(e,8622)).then(Ae=>Ae.HomePageSearchBar)}})),Nt=()=>{const Ae=(0,Xe.TH)(),{term:j,setTerm:E,types:N,setTypes:Q,pageCursor:q,setPageCursor:Ge,filters:Z,setFilters:x}=(0,Y.Rx)(),he=(0,tt.Z)(Ae.search);return(0,W.useEffect)(()=>{if(Ae.search===he)return;const Fe=m().parse(Ae.search.substring(1),{arrayLimit:0})||{};Fe.filters&&x(Fe.filters),Fe.query&&E(Fe.query),Fe.pageCursor&&Ge(Fe.pageCursor),Fe.types&&Q(Fe.types)},[he,Ae,E,Q,Ge,x]),(0,W.useEffect)(()=>{const Fe=m().stringify({query:j,types:N,pageCursor:q,filters:Z},{arrayFormat:"brackets"}),mt=`${window.location.pathname}?${Fe}`;window.history.replaceState(null,document.title,mt)},[j,N,q,Z]),null},Xt=()=>{const Ae=(0,Xe.pC)();return W.createElement(Y.Nd,null,W.createElement(Nt,null),Ae)},Ht=(0,r.Z)(Ae=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:Ae.spacing(1)},icon:{color:Ae.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:Ae.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:Ae.spacing(2,0),"&.Mui-expanded":{margin:Ae.spacing(2,0)}},accordionDetails:{padding:Ae.spacing(0,0,1)}})),Ft=Ae=>{const j=Ht(),{filters:E,setPageCursor:N,setTypes:Q,term:q,types:Ge}=(0,Y.Rx)(),Z=(0,D.u)(Y.gK),[x,he]=(0,W.useState)(!0),{defaultValue:Fe,name:mt,showCounts:Qt,types:Ie}=Ae,Be=()=>he(Ct=>!Ct),ct=Ct=>()=>{Q(Ct!==""?[Ct]:[]),N(void 0),he(!1)};(0,W.useEffect)(()=>{Fe&&Q([Fe])},[]);const Ot=[{value:"",name:"All",icon:W.createElement(Ke.Z,null)},...Ie],bt=Ge[0]||"",{value:$t}=(0,St.default)(async()=>{if(!Qt)return{};const Ct=await Promise.all(Ot.map($e=>$e.value).map(async $e=>{const{numberOfResults:qe}=await Z.query({term:q,types:$e?[$e]:[],filters:Ge.includes($e)||!Ge.length&&!$e?E:{},pageLimit:0});return[$e,qe!==void 0?`${qe>=1e4?">10000":qe} results`:" -- "]}));return Object.fromEntries(Ct)},[E,Qt,q,Ge]);return W.createElement(Ve.Z,{className:j.card},W.createElement(be.Z,{title:mt,titleTypographyProps:{variant:"overline"}}),W.createElement(X.Z,{className:j.cardContent},W.createElement(k.Z,{className:j.accordion,expanded:x,onChange:Be},W.createElement(s.Z,{classes:{root:j.accordionSummary,content:j.accordionSummaryContent},expandIcon:W.createElement(_e.Z,{className:j.icon}),IconButtonProps:{size:"small"}},x?"Collapse":Ot.filter(Ct=>Ct.value===bt)[0].name),W.createElement(ne.Z,{classes:{root:j.accordionDetails}},W.createElement(re.Z,{className:j.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},Ot.map(Ct=>W.createElement(W.Fragment,{key:Ct.value},W.createElement(ie.Z,null),W.createElement(ve.Z,{selected:Ge[0]===Ct.value||Ge.length===0&&Ct.value==="",onClick:ct(Ct.value),button:!0},W.createElement(Ce.Z,null,(0,W.cloneElement)(Ct.icon,{className:j.listItemIcon})),W.createElement(u.Z,{primary:Ct.name,secondary:$t&&$t[Ct.value]})))))))))},yt=(0,r.Z)(Ae=>({tabs:{borderBottom:`1px solid ${Ae.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:Ae.typography.fontWeightBold,fontSize:Ae.typography.pxToRem(13),color:Ae.palette.text.primary,minWidth:"130px"}})),Tt=Ae=>{const j=yt(),{setPageCursor:E,setTypes:N,types:Q}=(0,Y.Rx)(),{defaultValue:q,types:Ge}=Ae,Z=(he,Fe)=>{N(Fe!==""?[Fe]:[]),E(void 0)};(0,W.useEffect)(()=>{q&&N([q])},[]);const x=[{value:"",name:"All"},...Ge];return W.createElement(F.Z,{"aria-label":"List of search types tabs",className:j.tabs,indicatorColor:"primary",value:Q.length===0?"":Q[0],onChange:Z},x.map((he,Fe)=>W.createElement(R.Z,{key:Fe,className:j.tab,label:he.name,value:he.value})))},wt=(0,r.Z)(Ae=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:Ae.spacing(1)},chip:{margin:2}})),Jt=Ae=>{const{className:j,defaultValue:E,name:N,values:Q=[]}=Ae,q=wt(),{types:Ge,setTypes:Z}=(0,Y.Rx)();(0,Le.Z)(()=>{Ge.length||(E&&Array.isArray(E)?Z(E):E&&Z([E]))});const x=he=>{const Fe=he.target.value;Z(Fe)};return W.createElement(M.Z,{className:j,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},W.createElement(g.Z,{className:q.label,margin:"dense"},N),W.createElement(Ne.Z,{multiple:!0,variant:"outlined",value:Ge,onChange:x,placeholder:"All Results",renderValue:he=>W.createElement("div",{className:q.chips},he.map(Fe=>W.createElement(Oe.Z,{key:Fe,label:Fe,className:q.chip,size:"small"})))},Q.map(he=>W.createElement(Qe.Z,{key:he,value:he},W.createElement(se.Z,{checked:Ge.indexOf(he)>-1}),W.createElement(u.Z,{primary:he})))))};Jt.Accordion=Ae=>W.createElement(Ft,{...Ae}),Jt.Tabs=Ae=>W.createElement(Tt,{...Ae})},7310:($n,Vt,e)=>{"use strict";e.d(Vt,{M:()=>Y,T:()=>be,a:()=>m});var o=e(30204),p=e(30705);const m=(0,o.c)({id:"plugin.techradar.service"});var Y=(X=>(X[X.Down=-1]="Down",X[X.NoChange=0]="NoChange",X[X.Up=1]="Up",X))(Y||{});const V=new Array;V.push({id:"adopt",name:"ADOPT",color:"#5BA300",description:"Commodi accusantium culpa sed itaque excepturi rem eum nulla possimus."}),V.push({id:"trial",name:"TRIAL",color:"#009EB0",description:"Recusandae possimus ipsum dolores."}),V.push({id:"assess",name:"ASSESS",color:"#C7BA00",description:"In asperiores repellat error recusandae et adipisci laborum porro."}),V.push({id:"hold",name:"HOLD",color:"#E09B96",description:"Esse mollitia in."});const D=new Array;D.push({id:"infrastructure",name:"Infrastructure"}),D.push({id:"frameworks",name:"Frameworks"}),D.push({id:"languages",name:"Languages"}),D.push({id:"process",name:"Process"});const W=new Array;W.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),W.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),W.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),W.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),W.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),W.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),W.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),W.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),W.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const tt={entries:W,quadrants:D,rings:V};class Xe{async load(){return tt}}const r=(0,p.NT)({id:"tech-radar"}),be=(0,p.rx)({id:"tech-radar",routes:{root:r},apis:[(0,p.ni)(m,new Xe)]}).provide((0,p.P4)({name:"TechRadarPage",component:()=>e.e(8272).then(e.bind(e,88272)).then(function(X){return X.b}).then(X=>X.RadarPage),mountPoint:r}))},65609:($n,Vt,e)=>{"use strict";e.d(Vt,{EU:()=>mt});var o=e(30204),p=e(30705),m=e(66565),Y=e(2784),V=e(87370),D=e(15459),W=e(77277),tt=e(79692),Xe=e(8560),r=e(27556),Ve=e(11433),be=e(60364),X=e(12231),k=e(49378),s=e(90436),ne=e(95544),re=e(61837),ie=e(51209),ve=e(38016),Ce=e(82717),u=e.n(Ce),F=e(1854),R=e(49462),M=e(31654),g=e(49558),Ne=e(65549),Oe=e(17373),Qe=e(85224),se=e(96103);const Le=".md-nav__item--nested .md-toggle",_e="@backstage/techdocs-addons/nav-expanded",Ke=(0,D.Z)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(W.Z),St=(0,D.Z)({root:{height:"20px",width:"20px"}})(ie.Z),L=(0,D.Z)({root:{height:"20px",width:"20px"}})(ve.Z),pt=()=>{const Be={expandAllNestedNavs:!1},{value:ct,set:Ot}=(0,V.Z)(_e,{defaultValue:Be}),[bt,$t]=(0,Y.useState)(!1),[...Ct]=(0,m.pV)([Le]),$e=(0,Y.useCallback)(Ee=>{const G=Ee.checked,ue=ct==null?void 0:ct.expandAllNestedNavs;return!!(ue&&!G||!ue&&G)},[ct]);(0,Y.useEffect)(()=>{Ct!=null&&Ct.length&&($t(!0),Ct.forEach(Ee=>{$e(Ee)&&Ee.click()}))},[ct,$e,Ct]);const qe=()=>{Ot(Ee=>({expandAllNestedNavs:!(Ee!=null&&Ee.expandAllNestedNavs)}))};return Y.createElement(Y.Fragment,null,bt?Y.createElement(Ke,{size:"small",onClick:qe,"aria-label":ct!=null&&ct.expandAllNestedNavs?"collapse-nav":"expand-nav"},ct!=null&&ct.expandAllNestedNavs?Y.createElement(L,null):Y.createElement(St,null)):null)},fe="techdocs-report-issue",zt=`#${fe}`,Et='[title^="Edit this page"]',Dt='[title^="Leave feedback for"]',Wt='[data-md-component="main"] .md-content',Je=(Be,ct)=>ct==="github"?(0,F.BT)(Be,"blob"):ct==="gitlab"?(0,F.ah)(Be,"blob"):(console.error(`Invalid SCM type ${ct} found in ReportIssue addon for URL ${Be}!`),Be),_t=Be=>{const ct=Be.toString().substring(0,70),Ot=ct.length===70?"...":"";return`Documentation feedback: ${ct}${Ot}`},Nt=(Be,ct,Ot)=>{const bt="## Documentation Feedback \u{1F4DD}",$t="#### The highlighted text:",Ct="#### The comment on the text:",$e="_>replace this line with your comment<_",qe=Be.toString().trim().split(`
`).map(G=>`> ${G.trim()}`).join(`
`),Ee=[`${Ot} URL: <${window.location.href}> 
Markdown URL: <${ct}>`];return`${bt}

 ${$t} 

 ${qe}

 ${Ct} 
 ${$e}

 ___
${Ee}`},Xt=Be=>{var ct,Ot;const bt={title:"",body:""},$t=(0,m.oi)(Be),[Ct]=(0,m.pV)([Et]),$e=(ct=Ct==null?void 0:Ct.href)!=null?ct:"",qe=(0,o.u)(R.q3),G=(0,o.u)(o.p).getOptionalString("app.title")||"Backstage";if(!$t||!$e)return bt;const ue=(Ot=qe.byUrl($e))==null?void 0:Ot.type;return ue?{title:_t($t),body:Nt($t,Je($e,ue),G)}:bt},Ht=()=>{var Be,ct;const Ot=(0,o.u)(R.q3),[bt]=(0,m.pV)([Et]),$t=(Be=bt==null?void 0:bt.href)!=null?Be:"";if(!$t)return null;const Ct=(ct=Ot.byUrl($t))==null?void 0:ct.type;return Ct?{...u()(Je($t,Ct)),type:Ct}:null},Ft=(0,tt.Z)(Be=>({root:{display:"grid",gridGap:Be.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:Be.palette.common.black,fontSize:Be.typography.button.fontSize}})),yt=({type:Be})=>Be==="github"?g.fy:M.Z,Tt=({type:Be})=>Be==="github"?"Github":"Gitlab",wt=(Be,ct)=>{const{title:Ot,body:bt}=ct,$t=encodeURIComponent(Ot),Ct=encodeURIComponent(bt),{protocol:$e,resource:qe,owner:Ee,name:G,type:ue}=Be,Ue=`${$e}://${qe}/${Ee}/${G}`,nt=encodeURI(Ue);return ue==="github"?`${nt}/issues/new?title=${$t}&body=${Ct}`:`${nt}/issues/new?issue[title]=${$t}&issue[description]=${Ct}`},Jt=({template:Be,repository:ct})=>{const Ot=Ft(),bt=yt(ct),$t=wt(ct,Be);return Y.createElement(g.rU,{className:Ot.root,to:$t,target:"_blank"},Y.createElement(bt,null)," Open new ",Tt(ct)," issue")},Ae=(0,tt.Z)(Be=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:Be.spacing(1),zIndex:Be.zIndex.tooltip,background:Be.palette.common.white}})),j=({debounceTime:Be=500,templateBuilder:ct})=>{const Ot=Ae(),[bt,$t]=(0,Y.useState)(),Ct=Ht(),$e=Xt(Be),qe=(0,m.oi)(Be),[Ee,G]=(0,m.pV)([Wt,Dt]);let[ue]=(0,m.pV)([zt]);return G&&(G.style.display="none"),(0,Y.useEffect)(()=>{if(!Ct||!qe||!qe.containsNode(Ee,!0)||qe!=null&&qe.containsNode(ue,!0))return;const Ue=Ee.getBoundingClientRect(),nt=qe.getRangeAt(0).getBoundingClientRect();$t({top:`${nt.top-Ue.top-16}px`,left:`${nt.left+nt.width/2}px`})},[qe,Ee,ue]),!qe||!Ct||!["github","gitlab"].includes(Ct.type)?null:(ue||(ue=document.createElement("div"),ue.setAttribute("id",fe),Ee.prepend(ue)),Y.createElement(Xe.Z,{container:ue},Y.createElement(r.Z,{"data-testid":"report-issue-addon",className:Ot.root,style:bt},Y.createElement(Jt,{repository:Ct,template:ct?ct({selection:qe}):$e}))))},E="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",N=(0,D.Z)(Be=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:Be.palette.common.white,boxShadow:E,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:E}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:Be.palette.common.black,fontSize:Be.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(Ve.Z),Q={key:"techdocs.addons.settings.textsize",defaultValue:100},q=[{value:90},{value:100},{value:115},{value:130},{value:150}],Ge=(0,tt.Z)(Be=>({container:{color:Be.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:Be.spacing(1)},increaseButton:{marginLeft:Be.spacing(1)}})),Z=()=>{const Be=Ge(),ct=(0,be.Z)(),[Ot]=(0,m.pV)(["body"]),[bt,$t]=(0,Y.useState)(()=>{const it=localStorage==null?void 0:localStorage.getItem(Q.key);return it?parseInt(it,10):Q.defaultValue}),Ct=(0,Y.useMemo)(()=>q.map(it=>it.value),[]),$e=(0,Y.useMemo)(()=>Ct.indexOf(bt),[Ct,bt]),qe=(0,Y.useMemo)(()=>Ct[0],[Ct]),Ee=(0,Y.useMemo)(()=>Ct[Ct.length-1],[Ct]),G=(0,Y.useCallback)(()=>`${bt}%`,[bt]),ue=(0,Y.useCallback)((it,Rt)=>{Array.isArray(Rt)||($t(Rt),localStorage==null||localStorage.setItem(Q.key,String(Rt)))},[$t]),Ue=(0,Y.useCallback)(it=>{ue(it,Ct[$e-1])},[$e,Ct,ue]),nt=(0,Y.useCallback)(it=>{ue(it,Ct[$e+1])},[$e,Ct,ue]);return(0,Y.useEffect)(()=>{var it,Rt;if(!Ot)return;const qt=(Rt=(it=ct.typography)==null?void 0:it.htmlFontSize)!=null?Rt:16;Ot.style.setProperty("--md-typeset-font-size",`${qt*(bt/100)}px`)},[Ot,bt,ct]),Y.createElement(X.Z,{className:Be.menuItem,button:!0,disableRipple:!0},Y.createElement(k.Z,{primary:Y.createElement(s.Z,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:Y.createElement(ne.Z,{className:Be.container},Y.createElement(re.Z,{className:Be.decreaseButton,size:"small",edge:"start",disabled:bt===qe,onClick:Ue,"aria-label":"Decrease text size"},Y.createElement(Oe.Z,null)),Y.createElement(N,{value:bt,"aria-labelledby":"text-size-slider",getAriaValueText:G,valueLabelDisplay:"on",valueLabelFormat:G,marks:q,step:null,min:qe,max:Ee,onChangeCommitted:ue}),Y.createElement(re.Z,{className:Be.increaseButton,size:"small",edge:"end",disabled:bt===Ee,onClick:nt,"aria-label":"Increase text size"},Y.createElement(Ne.Z,null))),disableTypography:!0}))},x=()=>{const Be=(0,m.pV)(["img"]);return(0,Y.useEffect)(()=>{let ct=null,Ot=new Qe.Z({pswpModule:se.Z,initialZoomLevel:1,secondaryZoomLevel:bt=>{const $t=bt.elementSize.x,Ct=bt.elementSize.y,$e=bt.panAreaSize.x,qe=bt.panAreaSize.y,Ee=$e/$t,G=qe/Ct;return Math.min(Ee,G)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return Be.forEach((bt,$t)=>{bt.onclick=()=>(ct===null&&(ct=Be.map(Ct=>({element:Ct,src:Ct.src,msrc:Ct.src,alt:Ct.alt,width:Ct.clientWidth,height:Ct.clientHeight}))),Ot.loadAndOpen($t,ct),!1)}),Ot.init(),()=>{Ot.destroy(),Ot=null}},[Be]),null},he=(0,p.rx)({id:"techdocsModuleAddonsContrib"}),Fe=he.provide((0,m.KY)({name:"ExpandableNavigation",location:m.oZ.PrimarySidebar,component:pt})),mt=he.provide((0,m.KY)({name:"ReportIssue",location:m.oZ.Content,component:j})),Qt=he.provide((0,m.KY)({name:"TextSize",location:m.oZ.Settings,component:Z})),Ie=he.provide((0,m.KY)({name:"LightBox",location:m.oZ.Content,component:x}))},66565:($n,Vt,e)=>{"use strict";e.d(Vt,{$L:()=>R,DR:()=>re,Dl:()=>g,KY:()=>ve,Ox:()=>St,VA:()=>fe,ZS:()=>Le,Zz:()=>ne,gT:()=>M,jM:()=>s,oZ:()=>Ke,oi:()=>Wt,pV:()=>Et,ux:()=>pt,x1:()=>_e});var o=e(2784),p=e(73557),m=e(30705),Y=e(30204),V=e(64279),D=e(77446),W=e(34520),tt=e(18473),Xe=e(70882),r=e(50236),Ve=e(19219),be=e(49558),X=e(54073),k=e.n(X);const s="techdocs.addons.addon.v1",ne="techdocs.addons.wrapper.v1",re=()=>null;(0,m.R5)(re,ne,!0);const ie=Je=>`${s}.${Je.toLocaleLowerCase("en-US")}`;function ve(Je){const{name:_t,component:Nt}=Je;return(0,m.YO)({name:_t,component:{sync:Xt=>o.createElement(Nt,{...Xt})},data:{[s]:Je,[ie(_t)]:!0}})}const Ce=(Je,_t)=>Je.selectByComponentData({key:_t}).getElements()[0],u=Je=>Je.selectByComponentData({key:ne}).selectByComponentData({key:s}),F=Je=>Je.selectByComponentData({key:ne}).findComponentData({key:s}),R=()=>{const Je=(0,p.pC)(),_t=(0,m.vJ)(Je,u),Nt=(0,m.vJ)(Je,F),Xt=(0,o.useCallback)(yt=>{var Tt;if(!_t||!yt)return null;const wt=ie(yt.name);return(Tt=Ce(_t,wt))!=null?Tt:null},[_t]),Ht=(0,o.useCallback)(yt=>{const Tt=Nt.find(wt=>wt.name===yt);return Tt?Xt(Tt):null},[Nt,Xt]),Ft=(0,o.useCallback)(yt=>{const Tt=Nt.filter(wt=>wt.location===yt);return Tt.length?Tt.map(Xt):null},[Nt,Xt]);return{renderComponentByName:Ht,renderComponentsByLocation:Ft}},M=(0,Y.c)({id:"plugin.techdocs.service"}),g=(0,Y.c)({id:"plugin.techdocs.storageservice"});function Ne(Je,_t){return _t.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(Je.kind=Je.kind.toLocaleLowerCase(),Je.name=Je.name.toLocaleLowerCase(),Je.namespace=Je.namespace.toLocaleLowerCase()),Je}const Oe=(Je,_t)=>(0,W.eE)(Je)===(0,W.eE)(_t),Qe={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},se=(0,tt.CT)("techdocs-reader-page-context"),Le=(0,o.memo)(Je=>{const{entityRef:_t,children:Nt}=Je,Xt=(0,Y.u)(M),Ht=(0,Y.u)(Y.p),Ft=(0,V.default)(async()=>Xt.getEntityMetadata(_t),[_t]),yt=(0,D.Z)(async()=>Xt.getTechDocsMetadata(_t),[_t]),[Tt,wt]=(0,o.useState)(Qe.title),[Jt,Ae]=(0,o.useState)(Qe.subtitle),[j,E]=(0,o.useState)(Qe.shadowRoot);(0,o.useEffect)(()=>{j&&!yt.value&&!yt.loading&&yt.retry()},[yt.value,yt.loading,j,yt.retry,yt]);const N={metadata:yt,entityRef:Ne(_t,Ht),entityMetadata:Ft,shadowRoot:j,setShadowRoot:E,title:Tt,setTitle:wt,subtitle:Jt,setSubtitle:Ae},Q=(0,tt.EI)({1:N});return o.createElement(m.fC,{attributes:{entityRef:(0,W.eE)(_t)}},o.createElement(se.Provider,{value:Q},Nt instanceof Function?Nt(N):Nt))},(Je,_t)=>Oe(Je.entityRef,_t.entityRef)),_e=()=>{const Je=(0,o.useContext)(se);if(Je===void 0)return Qe;const _t=Je.atVersion(1);if(_t===void 0)throw new Error("No context found for version 1.");return _t},Ke=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),St="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",L=Je=>{(0,o.useEffect)(()=>{var _t;if(!Je)return()=>{};const Nt=Je.querySelectorAll('head > link[rel="stylesheet"]');let Xt=(_t=Nt==null?void 0:Nt.length)!=null?_t:0;const Ht=new CustomEvent(St);if(!Xt)return Je.dispatchEvent(Ht),()=>{};const Ft=()=>{--Xt===0&&Je.dispatchEvent(Ht)};return Nt==null||Nt.forEach(yt=>{yt.addEventListener("load",Ft)}),()=>{Nt==null||Nt.forEach(yt=>{yt.removeEventListener("load",Ft)})}},[Je])},pt=Je=>{const[_t,Nt]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(!Je)return()=>{};Nt(!0);const Xt=Je.style;Xt.setProperty("opacity","0");const Ht=()=>{Nt(!1),Xt.setProperty("opacity","1")};return Je.addEventListener(St,Ht),()=>{Je.removeEventListener(St,Ht)}},[Je]),_t},fe=Je=>{const{element:_t,onAppend:Nt,children:Xt}=Je,[Ht,Ft]=(0,o.useState)((0,Xe.Ue)({...(0,r.Z)(),insertionPoint:void 0}));L(_t);const yt=pt(_t),Tt=(0,o.useCallback)(wt=>{if(!_t||!wt)return;Ft((0,Xe.Ue)({...(0,r.Z)(),insertionPoint:_t.querySelector("head")||void 0}));let Jt=wt.shadowRoot;Jt||(Jt=wt.attachShadow({mode:"open"})),Jt.replaceChildren(_t),typeof Nt=="function"&&Nt(Jt)},[_t,Nt]);return o.createElement(o.Fragment,null,yt&&o.createElement(be.Ex,null),o.createElement(Ve.ZP,{jss:Ht,sheetsManager:new Map},o.createElement("div",{ref:Tt,"data-testid":"techdocs-native-shadowroot"}),Xt))},zt=()=>{const{shadowRoot:Je}=_e();return Je},Et=Je=>{const _t=zt();return _t?Je.map(Nt=>_t==null?void 0:_t.querySelectorAll(Nt)).filter(Nt=>Nt.length).map(Nt=>Array.from(Nt)).flat():[]},Dt=Je=>Je.toString()&&Je.rangeCount&&Je.getRangeAt(0).getBoundingClientRect().top,Wt=(Je=0)=>{const _t=zt(),[Nt,Xt]=(0,o.useState)(null),Ht=(0,o.useMemo)(()=>k()(()=>{const Ft=_t,yt=Ft.getSelection?Ft.getSelection():document.getSelection();yt&&Dt(yt)?Xt(yt):Xt(null)},Je),[_t,Xt,Je]);return(0,o.useEffect)(()=>(window.document.addEventListener("selectionchange",Ht),()=>{Ht.cancel(),window.document.removeEventListener("selectionchange",Ht)}),[Ht]),Nt}},78832:($n,Vt,e)=>{"use strict";e.d(Vt,{E:()=>s,a:()=>re,c:()=>ie,d:()=>ve,t:()=>X});var o=e(2784),p=e(73557),m=e(34520),Y=e(66565),V=e(67266),D=e(30705),W=e(30204),tt=e(42054),Xe=e(33019),r=e(38334),Ve=e(78373),be=e(64304);const X=(0,D.rx)({id:"techdocs",apis:[(0,D.ni)({api:Y.Dl,deps:{configApi:W.p,discoveryApi:W.q,identityApi:W.v,fetchApi:W.t},factory:({configApi:Qe,discoveryApi:se,identityApi:Le,fetchApi:_e})=>new V.a({configApi:Qe,discoveryApi:se,identityApi:Le,fetchApi:_e})}),(0,D.ni)({api:Y.gT,deps:{configApi:W.p,discoveryApi:W.q,fetchApi:W.t},factory:({configApi:Qe,discoveryApi:se,fetchApi:Le})=>new V.T({configApi:Qe,discoveryApi:se,fetchApi:Le})})],routes:{root:V.r,docRoot:V.b,entityContent:V.c}}),k=X.provide((0,D.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return Oe}).then(Qe=>Qe.Router),mountPoint:V.r})),s=X.provide((0,D.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return Oe}).then(Qe=>Qe.EmbeddedDocsRouter),mountPoint:V.c})),ne=X.provide((0,D.P4)({name:"TechDocsCustomHome",component:()=>e.e(979).then(e.bind(e,979)).then(Qe=>Qe.TechDocsCustomHome),mountPoint:V.r})),re=X.provide((0,D.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(e.bind(e,38334)).then(function(Qe){return Qe.d}).then(Qe=>Qe.TechDocsIndexPage),mountPoint:V.r})),ie=X.provide((0,D.P4)({name:"TechDocsReaderPage",component:()=>e.e(4376).then(e.bind(e,34376)).then(Qe=>Qe.TechDocsReaderPage),mountPoint:V.b})),ve=X.provide((0,tt.c)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(e.bind(e,77529)).then(Qe=>Qe.TechDocsSearchResultListItem),predicate:Qe=>Qe.type==="techdocs"})),Ce="backstage.io/techdocs-entity",u=({entity:Qe})=>{var se,Le;let _e=(0,m.iB)(Qe);if((se=Qe.metadata.annotations)!=null&&se[Ce])try{_e=(0,m.of)((Le=Qe.metadata.annotations)==null?void 0:Le[Ce])}catch{}return o.createElement(ie,{entityRef:_e},o.createElement(Xe.d,null),o.createElement(Xe.c,{withSearch:!1}))},F="backstage.io/techdocs-ref",R="backstage.io/techdocs-entity";var Oe=Object.freeze({__proto__:null,isTechDocsAvailable:Qe=>{var se,Le,_e,Ke;return Boolean((Le=(se=Qe==null?void 0:Qe.metadata)==null?void 0:se.annotations)==null?void 0:Le[F])||Boolean((Ke=(_e=Qe==null?void 0:Qe.metadata)==null?void 0:_e.annotations)==null?void 0:Ke[R])},Router:()=>o.createElement(p.Z5,null,o.createElement(p.AW,{path:"/",element:o.createElement(r.c,null)}),o.createElement(p.AW,{path:"/:namespace/:kind/:name/*",element:o.createElement(Xe.f,null)})),EmbeddedDocsRouter:Qe=>{var se,Le;const{children:_e}=Qe,{entity:Ke}=(0,Ve.u)(),St=(0,p.V$)([{path:"/*",element:o.createElement(u,{entity:Ke}),children:[{path:"*",element:_e}]}]);return((se=Ke.metadata.annotations)==null?void 0:se[F])||((Le=Ke.metadata.annotations)==null?void 0:Le[R])?St:o.createElement(be.sk,{annotation:[F]})}})},38334:($n,Vt,e)=>{"use strict";e.r(Vt),e.d(Vt,{D:()=>R,E:()=>M,T:()=>g,a:()=>Qe,b:()=>Oe,c:()=>se,d:()=>Le,t:()=>ie});var o=e(2784),p=e(73557),m=e(49558),Y=e(64304),V=e(78373),D=e(88285),W=e(30705),tt=e(30204),Xe=e(95074),r=e(76635),Ve=e.n(r),be=e(34520),X=e(67266),k=e(39981),s=e(2337),ne=e(11640),re=e(28347);function ie(_e,Ke){return Ke.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?_e:_e.toLocaleLowerCase("en-US")}const ve=(0,s.Z)({root:{color:"#f3ba37"}})(ne.Z),Ce={createCopyDocsUrlAction(_e){return Ke=>({icon:()=>o.createElement(k.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>_e(`${window.location.origin}${Ke.resolved.docsUrl}`)})},createStarEntityAction(_e,Ke){return St=>{const L=St.entity,pt=_e(L);return{cellStyle:{paddingLeft:"1em"},icon:()=>pt?o.createElement(ve,null):o.createElement(re.Z,null),tooltip:pt?"Remove from favorites":"Add to favorites",onClick:()=>Ke(L)}}}};function u(_e){return _e.metadata.title||_e.metadata.name}const F={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:_e=>o.createElement(m.uw,{value:o.createElement(m.rU,{to:_e.resolved.docsUrl},u(_e.entity)),subvalue:_e.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:_e})=>o.createElement(Y.rI,{entityRefs:_e.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},R=_e=>{const{entities:Ke,title:St,loading:L,columns:pt,actions:fe,options:zt}=_e,[,Et]=(0,Xe.Z)(),Dt=(0,W.tg)(X.b),Wt=(0,tt.u)(tt.p);if(!Ke)return null;const Je=Ke.map(Ft=>{var yt;const Tt=(0,V.g)(Ft,be.S4);return{entity:Ft,resolved:{docsUrl:Dt({namespace:ie((yt=Ft.metadata.namespace)!=null?yt:"default",Wt),kind:ie(Ft.kind,Wt),name:ie(Ft.metadata.name,Wt)}),ownedByRelations:Tt,ownedByRelationsTitle:Tt.map(wt=>(0,Y.$3)(wt,{defaultKind:"group"})).join(", ")}}}),_t=[F.createNameColumn(),F.createOwnerColumn(),F.createKindColumn(),F.createTypeColumn()],Nt=[Ce.createCopyDocsUrlAction(Et)],Xt=20,Ht=Je&&Je.length>Xt;return o.createElement(o.Fragment,null,L||Je&&Je.length>0?o.createElement(m.iA,{isLoading:L,options:{paging:Ht,pageSize:Xt,search:!0,actionsColumnIndex:-1,...zt},data:Je,columns:pt||_t,actions:fe||Nt,title:St?`${St} (${Je.length})`:`All (${Je.length})`}):o.createElement(m.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:o.createElement(m.Qj,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};R.columns=F,R.actions=Ce;const M=_e=>{var Ke,St;const{columns:L,actions:pt,options:fe}=_e,{loading:zt,error:Et,entities:Dt,filters:Wt}=(0,Y.wp)(),{isStarredEntity:Je,toggleStarredEntity:_t}=(0,Y.CR)(),[,Nt]=(0,Xe.Z)(),Xt=(0,r.capitalize)((St=(Ke=Wt.user)==null?void 0:Ke.value)!=null?St:"all"),Ht=[Ce.createCopyDocsUrlAction(Nt),Ce.createStarEntityAction(Je,_t)];return Et?o.createElement(m.GB,{severity:"error",title:"Could not load available documentation."},o.createElement(m.Oi,{language:"text",text:Et.toString()})):o.createElement(R,{title:Xt,entities:Dt,loading:zt,actions:pt||Ht,columns:L,options:fe})};M.columns=F,M.actions=Ce;const g=_e=>{var Ke;const{children:St}=_e,pt=`Documentation available in ${(Ke=(0,tt.u)(tt.p).getOptionalString("organization.name"))!=null?Ke:"Backstage"}`;return o.createElement(m.g9,{title:"Documentation",subtitle:pt,themeId:"documentation"},St)};class Ne{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":D.n3}}}const Oe=()=>{const{updateFilters:_e}=(0,Y.wp)();return(0,o.useEffect)(()=>{_e({techdocs:new Ne})},[_e]),null},Qe=_e=>{const{initialFilter:Ke="owned",columns:St,actions:L}=_e;return o.createElement(g,null,o.createElement(m.VY,null,o.createElement(m.yW,{title:""},o.createElement(m.qt,null,"Discover documentation in your ecosystem.")),o.createElement(Y.UO,null,o.createElement(Y._i,null,o.createElement(Y._i.Filters,null,o.createElement(Oe,null),o.createElement(Y.EW,{initialFilter:Ke}),o.createElement(Y.dq,null),o.createElement(Y.xE,null)),o.createElement(Y._i.Content,null,o.createElement(M,{actions:L,columns:St}))))))},se=_e=>(0,p.pC)()||o.createElement(Qe,{..._e});var Le=Object.freeze({__proto__:null,TechDocsIndexPage:se})},33019:($n,Vt,e)=>{"use strict";e.d(Vt,{a:()=>Or,c:()=>Jn,d:()=>wr,f:()=>Tr});var o=e(2784),p=e(73557),m=e(49558),Y=e(66565),V=e(79692),D=e(12420),W=e(60905),tt=e(90436),Xe=e(61837),r=e(77277),Ve=e(4190),be=e(4614),X=e(41128),k=e(60364),s=e(15459),ne=e(80030),re=e(72379),ie=e(41547),ve=e(41156),Ce=e(8560),u=e(15223),F=e(95544),R=e(48348),M=e(92573),g=e(77529),Ne=e(99688),Oe=e(98069),Qe=e(87685),se=e(30204),Le=e(30705),_e=e(64279),Ke=e(77446),St=e(49462),L=e(35368),pt=e.n(L),fe=e(1854),zt=e(67097),Et=e(82717),Dt=e.n(Et),Wt=e(44882),Je=e(95074),_t=e(18671),Nt=e(73250),Xt=e(78373),Ht=e(64304),Ft=e(34520),yt=e(76635),Tt=e.n(yt),wt=e(67266),Jt=e(47603);function Ae({contentLoading:oe,content:Ye,activeSyncState:rt}){return oe||rt==="BUILD_READY_RELOAD"||!Ye&&rt==="CHECKING"?"CHECKING":!Ye&&rt==="BUILDING"?"INITIAL_BUILD":Ye?rt==="BUILDING"?"CONTENT_STALE_REFRESHING":rt==="BUILD_READY"?"CONTENT_STALE_READY":rt==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function j(oe,Ye){const rt={...oe};switch(Ye.type){case"sync":Ye.state==="CHECKING"&&(rt.buildLog=[]),rt.activeSyncState=Ye.state,rt.syncError=Ye.syncError;break;case"contentLoading":rt.contentLoading=!0,rt.contentError=void 0;break;case"content":typeof Ye.path=="string"&&(rt.path=Ye.path),rt.contentLoading=!1,rt.content=Ye.content,rt.contentError=Ye.contentError;break;case"buildLog":rt.buildLog=rt.buildLog.concat(Ye.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(rt.activeSyncState)&&["contentLoading","content"].includes(Ye.type)&&(rt.activeSyncState="UP_TO_DATE",rt.buildLog=[]),rt}function E(oe,Ye,rt,C){var _,O;const[T,me]=(0,o.useReducer)(j,{activeSyncState:"CHECKING",path:C,contentLoading:!0,buildLog:[]}),ye=(0,se.u)(Y.Dl),{retry:le}=(0,Ke.Z)(async()=>{me({type:"contentLoading"});try{const We=await ye.getEntityDocs({kind:oe,namespace:Ye,name:rt},C);return me({type:"content",content:We,path:C}),We}catch(We){me({type:"content",contentError:We,path:C})}},[ye,oe,Ye,rt,C]),Pe=(0,o.useRef)({content:void 0,reload:()=>{}});return Pe.current={content:T.content,reload:le},(0,_e.default)(async()=>{me({type:"sync",state:"CHECKING"});const We=setTimeout(()=>{me({type:"sync",state:"BUILDING"})},1e3);try{switch(await ye.syncEntityDocs({kind:oe,namespace:Ye,name:rt},rn=>{me({type:"buildLog",log:rn})})){case"updated":Pe.current.content?me({type:"sync",state:"BUILD_READY"}):(Pe.current.reload(),me({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":me({type:"sync",state:"UP_TO_DATE"});break;default:me({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(ht){me({type:"sync",state:"ERROR",syncError:ht})}finally{clearTimeout(We)}},[oe,rt,Ye,ye,me,Pe]),{state:(0,o.useMemo)(()=>Ae({activeSyncState:T.activeSyncState,contentLoading:T.contentLoading,content:T.content}),[T.activeSyncState,T.content,T.contentLoading]),contentReload:le,path:T.path,content:T.content,contentErrorMessage:(_=T.contentError)==null?void 0:_.toString(),syncErrorMessage:(O=T.syncError)==null?void 0:O.toString(),buildLog:T.buildLog}}const N=(0,o.createContext)({}),Q=()=>(0,o.useContext)(N),q=oe=>{const{children:Ye}=oe,{"*":rt=""}=(0,p.UO)(),{entityRef:C}=(0,Y.x1)(),{kind:_,namespace:O,name:T}=C,me=E(_,O,T,rt);return o.createElement(N.Provider,{value:me},Ye instanceof Function?Ye(me):Ye)},Ge=oe=>Ye=>o.createElement(q,null,o.createElement(oe,{...Ye})),Z=oe=>oe==null?void 0:oe.document,x=oe=>{const{entityId:Ye,entityTitle:rt,debounceTime:C=150}=oe,[_,O]=(0,o.useState)(!1),T=(0,p.s0)(),{setFilters:me,result:{loading:ye,value:le}}=(0,M.Rx)(),[Pe,ke]=(0,o.useState)([]);(0,o.useEffect)(()=>{let Ut=!0;if(Ut&&le){const gn=le.results.slice(0,10);ke(gn)}return()=>{Ut=!1}},[ye,le]);const{kind:We,name:ht,namespace:rn}=Ye;(0,o.useEffect)(()=>{me(Ut=>({...Ut,kind:We,namespace:rn,name:ht}))},[We,rn,ht,me]);const en=(Ut,gn)=>{if(Z(gn)){const{location:pn}=gn.document;T(pn)}};return o.createElement(M.qO,{"data-testid":"techdocs-search-bar",size:"small",open:_,getOptionLabel:()=>"",filterOptions:Ut=>Ut,onClose:()=>{O(!1)},onFocus:()=>{O(!0)},onChange:en,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:Pe,renderOption:({document:Ut,highlight:gn})=>o.createElement(g.TechDocsSearchResultListItem,{result:Ut,lineClamp:3,asListItem:!1,asLink:!1,title:Ut.title,highlight:gn}),loading:ye,inputDebounceTime:C,inputPlaceholder:`Search ${rt||Ye.name} docs`,freeSolo:!1})},he=oe=>{const Ye={term:"",types:["techdocs"],pageCursor:"",filters:oe.entityId};return o.createElement(M.Nd,{initialState:Ye},o.createElement(x,{...oe}))},Fe=(0,V.Z)(oe=>(0,D.Z)({paper:{width:"100%",[oe.breakpoints.up("sm")]:{width:"75%"},[oe.breakpoints.up("md")]:{width:"50%"},padding:oe.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:oe.palette.background.default}})),mt=({buildLog:oe,onClose:Ye})=>{const rt=Fe(),C=oe.length===0?"Waiting for logs...":oe.join(`
`);return o.createElement(W.Z,{container:!0,direction:"column",className:rt.root,spacing:0,wrap:"nowrap"},o.createElement(W.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},o.createElement(tt.Z,{variant:"h5"},"Build Details"),o.createElement(Xe.Z,{key:"dismiss",title:"Close the drawer",onClick:Ye,color:"inherit"},o.createElement(Qe.Z,null))),o.createElement(W.Z,{item:!0,xs:!0},o.createElement(m.nU,{text:C,classes:{root:rt.logs}})))},Qt=({buildLog:oe})=>{const Ye=Fe(),[rt,C]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,o.createElement(r.Z,{color:"inherit",onClick:()=>C(!0)},"Show Build Logs"),o.createElement(Ve.ZP,{classes:{paper:Ye.paper},anchor:"right",open:rt,onClose:()=>C(!1)},o.createElement(mt,{buildLog:oe,onClose:()=>C(!1)})))},Ie=({errorMessage:oe})=>{const Ye=(0,se.u)(se.p).getOptionalString("techdocs.builder"),rt=(0,Le.z$)(),{entityRef:C}=(0,Y.x1)(),_=(0,p.TH)();(0,o.useEffect)(()=>{const{pathname:T,search:me,hash:ye}=_;rt.captureEvent("not-found",`${T}${me}${ye}`,{attributes:C})},[rt,C,_]);let O="";return Ye!=="local"&&(O="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),o.createElement(m.mf,{status:"404",statusMessage:oe||"Documentation not found",additionalInfo:O})},Be=(0,V.Z)(oe=>({root:{marginBottom:oe.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),ct=()=>{let oe=null;const Ye=Be(),{state:rt,contentReload:C,contentErrorMessage:_,syncErrorMessage:O,buildLog:T}=Q();return rt==="INITIAL_BUILD"&&(oe=o.createElement(Ne.Z,{classes:{root:Ye.root},variant:"outlined",severity:"info",icon:o.createElement(be.Z,{size:"24px"}),action:o.createElement(Qt,{buildLog:T})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),rt==="CONTENT_STALE_REFRESHING"&&(oe=o.createElement(Ne.Z,{variant:"outlined",severity:"info",icon:o.createElement(be.Z,{size:"24px"}),action:o.createElement(Qt,{buildLog:T}),classes:{root:Ye.root}},"A newer version of this documentation is being prepared and will be available shortly.")),rt==="CONTENT_STALE_READY"&&(oe=o.createElement(Ne.Z,{variant:"outlined",severity:"success",action:o.createElement(r.Z,{color:"inherit",onClick:()=>C()},"Refresh"),classes:{root:Ye.root}},"A newer version of this documentation is now available, please refresh to view.")),rt==="CONTENT_STALE_ERROR"&&(oe=o.createElement(Ne.Z,{variant:"outlined",severity:"error",action:o.createElement(Qt,{buildLog:T}),classes:{root:Ye.root,message:Ye.message}},"Building a newer version of this documentation failed."," ",O)),rt==="CONTENT_NOT_FOUND"&&(oe=o.createElement(o.Fragment,null,O&&o.createElement(Ne.Z,{variant:"outlined",severity:"error",action:o.createElement(Qt,{buildLog:T}),classes:{root:Ye.root,message:Ye.message}},"Building a newer version of this documentation failed."," ",O),o.createElement(Ie,{errorMessage:_}))),oe},Ot=/main\.[A-Fa-f0-9]{8}\.min\.css$/,bt=/^https:\/\/fonts\.googleapis\.com/,$t=/^https:\/\/fonts\.gstatic\.com/,Ct=oe=>oe.nodeName==="LINK",$e=oe=>{const Ye=(oe==null?void 0:oe.getAttribute("href"))||"",rt=Ye.match(Ot),C=Ye.match(bt),_=Ye.match($t);return rt||C||_},qe=oe=>(Ct(oe)&&!$e(oe)&&oe.remove(),oe),Ee=oe=>oe.nodeName==="IFRAME",G=(oe,Ye)=>{const rt=oe.getAttribute("src")||"";try{const{host:C}=new URL(rt);return Ye.includes(C)}catch{return!1}},ue=oe=>Ye=>(Ee(Ye)&&!G(Ye,oe)&&Ye.remove(),Ye),Ue=()=>{const oe=(0,se.u)(se.p);return(0,o.useMemo)(()=>oe.getOptionalConfig("techdocs.sanitizer"),[oe])},nt=()=>{const oe=Ue();return(0,o.useCallback)(async Ye=>{const rt=oe==null?void 0:oe.getOptionalStringArray("allowedIframeHosts");pt().addHook("beforeSanitizeElements",qe);const C=["link"];return rt&&(C.push("iframe"),pt().addHook("beforeSanitizeElements",ue(rt))),pt().sanitize(Ye.outerHTML,{ADD_TAGS:C,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[oe])};var it=({theme:oe})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${oe.palette.text.primary};
  --md-default-fg-color--light: ${oe.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,X.$n)(oe.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,X.$n)(oe.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${oe.palette.background.default};
  --md-default-bg-color--light: ${oe.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,X.$n)(oe.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,X.$n)(oe.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${oe.palette.primary.main};
  --md-primary-fg-color--light: ${oe.palette.primary.light};
  --md-primary-fg-color--dark: ${oe.palette.primary.dark};
  --md-primary-bg-color: ${oe.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,X.$n)(oe.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${oe.shadows[1]};
  --md-shadow-z2: ${oe.shadows[2]};
  --md-shadow-z3: ${oe.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${oe.palette.text.primary};
  --md-code-bg-color: ${oe.palette.background.paper};
  --md-code-hl-color: ${(0,X.Fq)(oe.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${oe.palette.type==="dark"?oe.palette.primary.light:oe.palette.primary.dark};
  --md-code-hl-function-color: ${oe.palette.type==="dark"?oe.palette.secondary.light:oe.palette.secondary.dark};
  --md-code-hl-string-color: ${oe.palette.type==="dark"?oe.palette.success.light:oe.palette.success.dark};
  --md-code-hl-number-color: ${oe.palette.type==="dark"?oe.palette.error.light:oe.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${oe.palette.link};
  --md-typeset-table-color: ${oe.palette.text.primary};
  --md-typeset-del-color: ${oe.palette.type==="dark"?(0,X.Fq)(oe.palette.error.dark,.5):(0,X.Fq)(oe.palette.error.light,.5)};
  --md-typeset-ins-color: ${oe.palette.type==="dark"?(0,X.Fq)(oe.palette.success.dark,.5):(0,X.Fq)(oe.palette.success.light,.5)};
  --md-typeset-mark-color: ${oe.palette.type==="dark"?(0,X.Fq)(oe.palette.warning.dark,.5):(0,X.Fq)(oe.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,Rt=({theme:oe})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${oe.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const qt="224px";var nn=({theme:oe,sidebar:Ye})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${oe.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${oe.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link, .md-footer__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${Ye.isPinned?`calc(-12.1rem + ${qt})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}


@media print {
  .md-sidebar,
  #toggle-sidebar {
    display: none;
  }
  
  .md-content {
    margin: 0;
    width: 100%;
    max-width: 100%;
  }
}
`;const we=["h1","h2","h3","h4","h5","h6"];var De=({theme:oe})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${we.reduce((Ye,rt)=>{var C;const _=(C=oe.typography.htmlFontSize)!=null?C:16,O=oe.typography[rt],{lineHeight:T,fontFamily:me,fontWeight:ye,fontSize:le}=O,Pe=ke=>{let We=1;return typeof ke=="number"&&(We=ke/_*.6),typeof ke=="string"&&(We=ke.replace("rem","")),`calc(${We} * var(--md-typeset-font-size))`};return Ye.concat(`
    .md-typeset ${rt} {
      color: var(--md-default-fg-color);
      line-height: ${T};
      font-family: ${me};
      font-weight: ${ye};
      font-size: ${Pe(le)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${oe.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}
`,w=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,H=({theme:oe})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${oe.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${oe.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${oe.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${oe.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${oe.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const te=[it,Rt,nn,De,w,H],ut=()=>(0,m.Pf)(),K=()=>{const oe=ut(),Ye=(0,k.Z)();return(0,o.useMemo)(()=>{const rt={theme:Ye,sidebar:oe};return te.reduce((C,_)=>C+_(rt),"")},[Ye,oe])},ee=()=>{const oe=K();return(0,o.useCallback)(Ye=>(Ye.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${oe}</style>`),Ye),[oe])},He=(oe,Ye,rt)=>{const C=oe==="src"&&Ye.endsWith(".svg"),_=!Ye.match(/^([a-z]*:)?\/\//i),O=Ye.startsWith(rt);return C&&(_||O)},lt=({techdocsStorageApi:oe,entityId:Ye,path:rt})=>async C=>{const _=await oe.getApiOrigin(),O=async(T,me)=>{for(const ye of T)if(ye.hasAttribute(me)){const le=ye.getAttribute(me);if(!le)return;const Pe=await oe.getBaseUrl(le,Ye,rt);if(He(me,le,_))try{const We=await(await fetch(Pe,{credentials:"include"})).text();ye.setAttribute(me,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(We)))}`)}catch{ye.setAttribute("alt",`Error: ${le}`)}else ye.setAttribute(me,Pe)}};return await Promise.all([O(C.querySelectorAll("img"),"src"),O(C.querySelectorAll("script"),"src"),O(C.querySelectorAll("source"),"src"),O(C.querySelectorAll("link"),"href"),O(C.querySelectorAll("a[download]"),"href")]),C};let Bt;Bt=Promise.resolve().then(e.t.bind(e,28316,19));function It(oe,Ye){Bt.then(rt=>{"createRoot"in rt?rt.createRoot(Ye).render(oe):rt.render(oe,Ye)})}const an=oe=>Ye=>{var rt;const C=Ye.querySelector('[title="Edit this page"]');if(!C||!C.href)return Ye;const _=new URL(C.href),O=oe.byUrl(_);if((O==null?void 0:O.type)!=="github"&&(O==null?void 0:O.type)!=="gitlab")return Ye;const T=((rt=Ye.querySelector("article>h1"))==null?void 0:rt.childNodes[0].textContent)||"",me=encodeURIComponent(`Documentation Feedback: ${T}`),ye=encodeURIComponent(`Page source:
${C.href}

Feedback:`),le=(O==null?void 0:O.type)==="github"?(0,fe.BT)(_.href,"blob"):_.href,Pe=Dt()(le),ke=`/${Pe.organization}/${Pe.name}`,We=C.cloneNode();switch(O==null?void 0:O.type){case"gitlab":We.href=`${_.origin}${ke}/issues/new?issue[title]=${me}&issue[description]=${ye}`;break;case"github":We.href=`${_.origin}${ke}/issues/new?title=${me}&body=${ye}`;break;default:return Ye}return It(o.createElement(zt.Z),We),We.style.paddingLeft="5px",We.title="Leave feedback for this page",We.id="git-feedback-link",C==null||C.insertAdjacentElement("beforebegin",We),Ye},on=()=>oe=>{const Ye=oe.querySelector('.md-header label[for="__drawer"]'),rt=oe.querySelector("article");if(!Ye||!rt)return oe;const C=Ye.cloneNode();return It(o.createElement(Wt.Z),C),C.id="toggle-sidebar",C.title="Toggle Sidebar",C.classList.add("md-content__button"),C.style.setProperty("padding","0 0 0 5px"),C.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),rt==null||rt.prepend(C),oe},fn=()=>oe=>(((rt,C)=>{Array.from(rt).filter(_=>_.hasAttribute(C)).forEach(_=>{const O=_.getAttribute(C);if(O){O.match(/^https?:\/\//i)&&_.setAttribute("target","_blank");try{const T=tn(window.location.href);_.setAttribute(C,new URL(O,T).toString())}catch{_.replaceWith(_.textContent||O)}}})})(Array.from(oe.getElementsByTagName("a")),"href"),oe);function tn(oe){const Ye=new URL(oe);return!Ye.pathname.endsWith("/")&&!Ye.pathname.endsWith(".html")&&(Ye.pathname+="/"),Ye.toString()}const cn=({baseUrl:oe,onClick:Ye})=>rt=>(Array.from(rt.getElementsByTagName("a")).forEach(C=>{C.addEventListener("click",_=>{const T=C.getAttribute("href");T&&T.startsWith(oe)&&!C.hasAttribute("download")&&(_.preventDefault(),Ye(_,T))})}),rt),ln=(0,s.Z)(oe=>({tooltip:{fontSize:"inherit",color:oe.palette.text.primary,margin:0,padding:oe.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(ne.ZP),wn=()=>o.createElement(re.Z,null,o.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),dn=({text:oe})=>{const[Ye,rt]=(0,o.useState)(!1),[,C]=(0,Je.Z)(),_=(0,o.useCallback)(()=>{C(oe),rt(!0)},[oe,C]),O=(0,o.useCallback)(()=>{rt(!1)},[rt]);return o.createElement(ln,{title:"Copied to clipboard",placement:"left",open:Ye,onClose:O,leaveDelay:1e3},o.createElement(Xe.Z,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:_},o.createElement(wn,null)))},bn=oe=>Ye=>{var rt;const C=Ye.querySelectorAll("pre > code");for(const _ of C){const O=_.textContent||"",T=document.createElement("div");(rt=_==null?void 0:_.parentElement)==null||rt.prepend(T),It(o.createElement(ie.Z,{theme:oe},o.createElement(dn,{text:O})),T)}return Ye},ce=()=>oe=>{var Ye;return(Ye=oe.querySelector(".md-header"))==null||Ye.remove(),oe},ae=()=>oe=>{var Ye,rt;return(Ye=oe.querySelector(".md-footer .md-copyright"))==null||Ye.remove(),(rt=oe.querySelector(".md-footer-copyright"))==null||rt.remove(),oe},Ze=({onLoading:oe,onLoaded:Ye})=>rt=>(oe(),rt.addEventListener(Y.Ox,function C(){Ye(),rt.removeEventListener(Y.Ox,C)}),rt),Pt=()=>oe=>(setTimeout(()=>{const Ye=oe==null?void 0:oe.querySelectorAll("li.md-nav__item--active");Ye.length!==0&&(Ye.forEach(C=>{const _=C==null?void 0:C.querySelector("input");_!=null&&_.checked||_==null||_.click()}),Ye[Ye.length-1].scrollIntoView())},200),oe),Gt=async(oe,Ye)=>{let rt;if(typeof oe=="string")rt=new DOMParser().parseFromString(oe,"text/html").documentElement;else if(oe instanceof Element)rt=oe;else throw new Error("dom is not a recognized type");for(const C of Ye)rt=await C(rt);return rt};function jt(oe,Ye){const rt=new URL(Ye),C=`${rt.origin}${rt.pathname.replace(/\/$/,"")}`,_=oe.replace(C,"").replace(/^\/+/,""),O=new URL(`http://localhost/${_}`);return`${O.pathname}${O.search}${O.hash}`}function _n(){const oe=(0,p.s0)(),rt=(0,se.u)(se.p).getOptionalString("app.baseUrl");return(0,o.useCallback)(_=>{let O=_;if(rt)try{O=jt(_,rt)}catch{}oe(O)},[oe,rt])}const Wn="screen and (max-width: 76.1875em)",Gn=oe=>{const Ye=_n(),rt=(0,k.Z)(),C=(0,ve.Z)(Wn),_=nt(),O=ee(),T=(0,Le.z$)(),me=(0,se.u)(Y.Dl),ye=(0,se.u)(St.q3),{state:le,path:Pe,content:ke}=Q(),[We,ht]=(0,o.useState)(null),rn=(0,Y.ux)(We),en=(0,o.useCallback)(()=>{if(!We)return;We.querySelectorAll(".md-sidebar").forEach(En=>{var Cn,Yn,Hn;if(C)En.style.top="0px";else{const In=document==null?void 0:document.querySelector(".techdocs-reader-page"),Ln=(Cn=In==null?void 0:In.getBoundingClientRect().top)!=null?Cn:0;let Zn=(Yn=We.getBoundingClientRect().top)!=null?Yn:0;const sn=We.querySelector(".md-container > .md-tabs"),Rn=(Hn=sn==null?void 0:sn.getBoundingClientRect().height)!=null?Hn:0;Zn<Ln&&(Zn=Ln),En.style.top=`${Math.max(Zn,0)+Rn}px`}En.style.setProperty("opacity","1")})},[We,C]);(0,o.useEffect)(()=>(window.addEventListener("resize",en),window.addEventListener("scroll",en,!0),()=>{window.removeEventListener("resize",en),window.removeEventListener("scroll",en,!0)}),[We,en]);const Ut=(0,o.useCallback)(()=>{if(!We)return;const hn=We.querySelector(".md-footer");hn&&(hn.style.width=`${We.getBoundingClientRect().width}px`)},[We]);(0,o.useEffect)(()=>(window.addEventListener("resize",Ut),()=>{window.removeEventListener("resize",Ut)}),[We,Ut]),(0,o.useEffect)(()=>{rn||(Ut(),en())},[le,rn,Ut,en]);const gn=(0,o.useCallback)((hn,En)=>Gt(hn,[_,lt({techdocsStorageApi:me,entityId:oe,path:En}),fn(),on(),ce(),ae(),an(ye),O]),[oe,ye,me,_,O]),pn=(0,o.useCallback)(async hn=>Gt(hn,[Pt(),bn(rt),cn({baseUrl:window.location.origin,onClick:(En,Cn)=>{var Yn,Hn;const In=En.ctrlKey||En.metaKey,Ln=new URL(Cn),Zn=((Yn=En.target)==null?void 0:Yn.innerText)||Cn,sn=Cn.replace(window.location.origin,"");T.captureEvent("click",Zn,{attributes:{to:sn}}),Ln.hash?In?window.open(Cn,"_blank"):(Ye(Cn),(Hn=hn==null?void 0:hn.querySelector(`[id="${Ln.hash.slice(1)}"]`))==null||Hn.scrollIntoView()):In?window.open(Cn,"_blank"):Ye(Cn)}}),Ze({onLoading:()=>{},onLoaded:()=>{var En;(En=hn.querySelector(".md-nav__title"))==null||En.removeAttribute("for")}}),Ze({onLoading:()=>{Array.from(hn.querySelectorAll(".md-sidebar")).forEach(Cn=>{Cn.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[rt,Ye,T]);return(0,o.useEffect)(()=>{if(!ke)return()=>{};let hn=!0;return gn(ke,Pe).then(async En=>{if(!(En!=null&&En.innerHTML)||!hn)return;window.scroll({top:0});const Cn=await pn(En);ht(Cn)}),()=>{hn=!1}},[ke,Pe,gn,pn]),We},dr=()=>{const oe=(0,Y.$L)(),{shadowRoot:Ye}=(0,Y.x1)(),rt=Ye==null?void 0:Ye.querySelector('[data-md-component="content"]'),C=Ye==null?void 0:Ye.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let _=C==null?void 0:C.querySelector('[data-techdocs-addons-location="primary sidebar"]');_||(_=document.createElement("div"),_.setAttribute("data-techdocs-addons-location","primary sidebar"),C==null||C.prepend(_));const O=Ye==null?void 0:Ye.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let T=O==null?void 0:O.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return T||(T=document.createElement("div"),T.setAttribute("data-techdocs-addons-location","secondary sidebar"),O==null||O.prepend(T)),o.createElement(o.Fragment,null,o.createElement(Ce.Z,{container:_},oe.renderComponentsByLocation(Y.oZ.PrimarySidebar)),o.createElement(Ce.Z,{container:rt},oe.renderComponentsByLocation(Y.oZ.Content)),o.createElement(Ce.Z,{container:T},oe.renderComponentsByLocation(Y.oZ.SecondarySidebar)))},gr=(0,V.Z)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"},"@media print":{display:"none"}}}),Jn=Ge(oe=>{var Ye;const{withSearch:rt=!0,onReady:C}=oe,_=gr(),{entityMetadata:{value:O,loading:T},entityRef:me,setShadowRoot:ye}=(0,Y.x1)(),le=Gn(me),Pe=window.location.pathname,ke=window.location.hash,We=(0,Y.ux)(le),[ht]=(0,Y.pV)([`[id="${ke.slice(1)}"]`]);(0,o.useEffect)(()=>{var en;We||(ke?ht&&ht.scrollIntoView():(en=document==null?void 0:document.querySelector("header"))==null||en.scrollIntoView())},[Pe,ke,ht,We]);const rn=(0,o.useCallback)(en=>{ye(en),C instanceof Function&&C()},[ye,C]);return T===!1&&!O?o.createElement(m.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}):le?o.createElement(m.VY,null,o.createElement(W.Z,{container:!0},o.createElement(W.Z,{xs:12,item:!0},o.createElement(ct,null)),rt&&o.createElement(W.Z,{className:_.search,xs:"auto",item:!0},o.createElement(he,{entityId:me,entityTitle:(Ye=O==null?void 0:O.metadata)==null?void 0:Ye.title})),o.createElement(W.Z,{xs:12,item:!0},o.createElement(Y.VA,{element:le,onAppend:rn},o.createElement(dr,null))))):o.createElement(m.VY,null,o.createElement(W.Z,{container:!0},o.createElement(W.Z,{xs:12,item:!0},o.createElement(ct,null))))}),pr=null,Pr=o.createElement(Oe.Z,{animation:"wave",variant:"text",height:40}),Lr=oe=>{const{palette:{common:{white:Ye}}}=(0,k.Z)(),{children:rt}=oe,C=(0,Y.$L)(),_=(0,se.u)(se.p),{title:O,setTitle:T,subtitle:me,setSubtitle:ye,entityRef:le,metadata:{value:Pe,loading:ke},entityMetadata:{value:We,loading:ht}}=(0,Y.x1)();(0,o.useEffect)(()=>{Pe&&(T(Pe.site_name),ye(()=>{let{site_description:In}=Pe;return(!In||In==="None")&&(In=""),In}))},[Pe,T,ye]);const rn=_.getOptional("app.title")||"Backstage",en=[O,me,rn].filter(Boolean).join(" | "),{locationMetadata:Ut,spec:gn}=We||{},pn=gn==null?void 0:gn.lifecycle,hn=We?(0,Xt.g)(We,Ft.S4):[],En=(0,Le.tg)(wt.r)(),Cn=o.createElement(o.Fragment,null,o.createElement(m.i9,{label:(0,yt.capitalize)((We==null?void 0:We.kind)||"entity"),value:o.createElement(Ht.dx,{color:"inherit",entityRef:le,title:We==null?void 0:We.metadata.title,defaultKind:"Component"})}),hn.length>0&&o.createElement(m.i9,{label:"Owner",value:o.createElement(Ht.rI,{color:"inherit",entityRefs:hn,defaultKind:"group"})}),pn?o.createElement(m.i9,{label:"Lifecycle",value:String(pn)}):null,Ut&&Ut.type!=="dir"&&Ut.type!=="file"?o.createElement(m.i9,{label:"",value:o.createElement(W.Z,{container:!0,direction:"column",alignItems:"center",style:{color:Ye}},o.createElement(W.Z,{style:{padding:0},item:!0},o.createElement(Nt.Z,{style:{marginTop:"-25px"}})),o.createElement(W.Z,{style:{padding:0},item:!0},"Source")),url:Ut.target}):null);return!ht&&We===void 0||!ke&&Pe===void 0?null:o.createElement(m.h4,{type:"Documentation",typeLink:En,title:O||Pr,subtitle:me===""?void 0:me||Pr},o.createElement(_t.Z,{titleTemplate:"%s"},o.createElement("title",null,en)),Cn,rt,C.renderComponentsByLocation(Y.oZ.Header))},vr=(0,V.Z)(oe=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:oe.spacing(3,3,0),"@media print":{display:"none"}}})),wr=oe=>{const Ye=vr(),[rt,C]=(0,o.useState)(null),_=(0,o.useCallback)(ke=>{C(ke.currentTarget)},[]),O=(0,o.useCallback)(()=>{C(null)},[]),{entityMetadata:{value:T,loading:me}}=(0,Y.x1)(),ye=(0,Y.$L)(),le=ye.renderComponentsByLocation(Y.oZ.Subheader),Pe=ye.renderComponentsByLocation(Y.oZ.Settings);return!le&&!Pe||me===!1&&!T?null:o.createElement(u.Z,{classes:Ye,...oe.toolbarProps},o.createElement(F.Z,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},le,Pe?o.createElement(o.Fragment,null,o.createElement(ne.ZP,{title:"Settings"},o.createElement(Xe.Z,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:_},o.createElement(Jt.Z,null))),o.createElement(R.Z,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:rt,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(rt),onClose:O,keepMounted:!0},o.createElement("div",null,Pe))):null))},Or=oe=>{const{withSearch:Ye,withHeader:rt=!0}=oe;return o.createElement(m.T3,{themeId:"documentation"},rt&&o.createElement(Lr,null),o.createElement(wr,null),o.createElement(Jn,{withSearch:Ye}))},Tr=oe=>{const{kind:Ye,name:rt,namespace:C}=(0,Le.Oi)(wt.b),{children:_,entityRef:O={kind:Ye,name:rt,namespace:C}}=oe,T=(0,p.pC)();if(!_){const le=(T?o.Children.toArray(T.props.children):[]).flatMap(Pe=>{var ke,We;return(We=(ke=Pe==null?void 0:Pe.props)==null?void 0:ke.children)!=null?We:[]}).find(Pe=>!(0,Le.IY)(Pe,Y.Zz)&&!(0,Le.IY)(Pe,Y.jM));return o.createElement(Y.ZS,{entityRef:O},le||o.createElement(Or,null))}return o.createElement(Y.ZS,{entityRef:O},({metadata:me,entityMetadata:ye,onReady:le})=>o.createElement("div",{className:"techdocs-reader-page"},o.createElement(m.T3,{themeId:"documentation"},_ instanceof Function?_({entityRef:O,techdocsMetadataValue:me.value,entityMetadataValue:ye.value,onReady:le}):_)))}},77529:($n,Vt,e)=>{"use strict";e.r(Vt),e.d(Vt,{TechDocsSearchResultListItem:()=>Xe});var o=e(2784),p=e(79692),m=e(49378),Y=e(86136),V=e(90436),D=e(49558),W=e(42054);const tt=(0,p.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),Xe=r=>{const{result:Ve,highlight:be,lineClamp:X=5,asListItem:k=!0,asLink:s=!0,title:ne,icon:re}=r,ie=tt(),ve=({children:F})=>s?o.createElement(D.rU,{noTrack:!0,to:Ve.location},F):o.createElement(o.Fragment,null,F),Ce=()=>{const F=be!=null&&be.fields.title?o.createElement(W.b,{text:be.fields.title,preTag:be.preTag,postTag:be.postTag}):Ve.title,R=be!=null&&be.fields.entityTitle?o.createElement(W.b,{text:be.fields.entityTitle,preTag:be.preTag,postTag:be.postTag}):Ve.entityTitle,M=be!=null&&be.fields.name?o.createElement(W.b,{text:be.fields.name,preTag:be.preTag,postTag:be.postTag}):Ve.name;return Ve?o.createElement(m.Z,{className:ie.itemText,primaryTypographyProps:{variant:"h6"},primary:o.createElement(ve,null,ne||o.createElement(o.Fragment,null,F," | ",R!=null?R:M," docs")),secondary:o.createElement(V.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:X,overflow:"hidden"},color:"textSecondary",variant:"body2"},be!=null&&be.fields.text?o.createElement(W.b,{text:be.fields.text,preTag:be.preTag,postTag:be.postTag}):Ve.text)}):null},u=({children:F})=>k?o.createElement(o.Fragment,null,re&&o.createElement(Y.Z,null,typeof re=="function"?re(Ve):re),o.createElement("div",{className:ie.flexContainer},F)):o.createElement(o.Fragment,null,F);return o.createElement(u,null,o.createElement(Ce,null))}},67266:($n,Vt,e)=>{"use strict";e.d(Vt,{T:()=>tt,a:()=>Xe,b:()=>Ve,c:()=>be,r:()=>r});var o=e(32272),p=e(76372),m=e.n(p),Y=e(30705),V=Object.defineProperty,D=(X,k,s)=>k in X?V(X,k,{enumerable:!0,configurable:!0,writable:!0,value:s}):X[k]=s,W=(X,k,s)=>(D(X,typeof k!="symbol"?k+"":k,s),s);class tt{constructor(k){W(this,"configApi"),W(this,"discoveryApi"),W(this,"fetchApi"),this.configApi=k.configApi,this.discoveryApi=k.discoveryApi,this.fetchApi=k.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(k){const{kind:s,namespace:ne,name:re}=k,ve=`${await this.getApiOrigin()}/metadata/techdocs/${ne}/${s}/${re}`,Ce=await this.fetchApi.fetch(`${ve}`);if(!Ce.ok)throw await o.VL.fromResponse(Ce);return await Ce.json()}async getEntityMetadata(k){const{kind:s,namespace:ne,name:re}=k,ve=`${await this.getApiOrigin()}/metadata/entity/${ne}/${s}/${re}`,Ce=await this.fetchApi.fetch(`${ve}`);if(!Ce.ok)throw await o.VL.fromResponse(Ce);return await Ce.json()}}class Xe{constructor(k){W(this,"configApi"),W(this,"discoveryApi"),W(this,"identityApi"),W(this,"fetchApi"),this.configApi=k.configApi,this.discoveryApi=k.discoveryApi,this.identityApi=k.identityApi,this.fetchApi=k.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var k;return(k=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?k:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(k,s){const{kind:ne,namespace:re,name:ie}=k,Ce=`${await this.getStorageUrl()}/${re}/${ne}/${ie}/${s}`,u=await this.fetchApi.fetch(`${Ce.endsWith("/")?Ce:`${Ce}/`}index.html`);let F="";switch(u.status){case 404:throw F="Page not found. ",s||(F+="This could be because there is no index.md file in the root of the docs directory of this repository."),new o.dR(F);case 500:throw F="Could not generate documentation or an error in the TechDocs backend. ",new Error(F)}return u.text()}async syncEntityDocs(k,s=()=>{}){const{kind:ne,namespace:re,name:ie}=k,Ce=`${await this.getApiOrigin()}/sync/${re}/${ne}/${ie}`,{token:u}=await this.identityApi.getCredentials();return new Promise((F,R)=>{const M=new p.EventSourcePolyfill(Ce,{withCredentials:!0,headers:u?{Authorization:`Bearer ${u}`}:{}});M.addEventListener("log",g=>{g.data&&s(JSON.parse(g.data))}),M.addEventListener("finish",g=>{let Ne=!1;g.data&&({updated:Ne}=JSON.parse(g.data)),F(Ne?"updated":"cached")}),M.onerror=g=>{switch(M.close(),g.status){case 404:R(new o.dR(g.message));return;default:R(new Error(g.data));return}}})}async getBaseUrl(k,s,ne){const{kind:re,namespace:ie,name:ve}=s,u=`${await this.getApiOrigin()}/static/docs/${ie}/${re}/${ve}/${ne}`;return new URL(k,u.endsWith("/")?u:`${u}/`).toString()}}const r=(0,Y.NT)({id:"techdocs:index-page"}),Ve=(0,Y.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),be=(0,Y.NT)({id:"techdocs:catalog-reader-view"})},54892:($n,Vt,e)=>{"use strict";e.d(Vt,{L:()=>ct,S:()=>bt,a:()=>Ct,e:()=>Jt});var o=e(73557),p=e(2784),m=e(90436),Y=e(77277),V=e(79692),D=e(43434),W=e(38402),tt=e(86136),Xe=e(49378),r=e(80030),Ve=e(60905),be=e(9520),X=e(11776),k=e(82938),s=e(86619),ne=e(61837),re=e(48348),ie=e(12231),ve=e(49558),Ce=e(11640),u=e(30204),F=e(30705),R=e(33375),M=e(64279),g=e(71554),Ne=e(43054),Oe=e(72164),Qe=e(59324),se=e(13737),Le=e(31168),_e=e(83487),Ke=e(40080),St=e(64304);const L=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,pt=()=>p.createElement(ve.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:p.createElement(p.Fragment,null,p.createElement(m.Z,{variant:"body1"},"Open ",p.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),p.createElement(ve.Oi,{text:L,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),p.createElement(Y.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),fe=(0,V.Z)($e=>({avatar:{width:({size:qe})=>qe,height:({size:qe})=>qe,fontSize:({size:qe})=>qe*.7,border:`1px solid ${$e.palette.textSubtle}`}})),zt=({size:$e,picture:qe})=>{const{iconSize:Ee}=ve.sidebarConfig,G=fe($e?{size:$e}:{size:Ee});return p.createElement(D.Z,{src:qe,className:G.avatar})},Et={},Dt=$e=>{const{title:qe,description:Ee,icon:G,apiRef:ue}=$e,Ue=(0,u.u)(ue),nt=(0,u.u)(u.s),[it,Rt]=(0,p.useState)(!1),[qt,nn]=(0,p.useState)(Et);return(0,p.useEffect)(()=>{let we=!1;const De=Ue.sessionState$().subscribe(w=>{w!==u.S.SignedIn&&(nn(Et),Rt(!1)),we||Ue.getProfile({optional:!0}).then(H=>{we||(w===u.S.SignedIn&&Rt(!0),H&&nn(H))})});return()=>{we=!0,De.unsubscribe()}},[Ue]),p.createElement(W.Z,null,p.createElement(tt.Z,null,p.createElement(G,null)),p.createElement(Xe.Z,{primary:qe,secondary:p.createElement(r.ZP,{placement:"top",arrow:!0,title:Ee},p.createElement(Ve.Z,{container:!0,spacing:6},p.createElement(Ve.Z,{item:!0},p.createElement(zt,{size:48,picture:qt.picture})),p.createElement(Ve.Z,{item:!0,xs:12,sm:!0,container:!0},p.createElement(Ve.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},p.createElement(Ve.Z,{item:!0,xs:!0},p.createElement(m.Z,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},qt.displayName),p.createElement(m.Z,{variant:"body2",color:"textSecondary"},qt.email),p.createElement(m.Z,{variant:"body2",color:"textSecondary"},Ee)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),p.createElement(be.Z,null,p.createElement(r.ZP,{placement:"top",arrow:!0,title:it?`Sign out from ${qe}`:`Sign in to ${qe}`},p.createElement(Y.Z,{variant:"outlined",color:"primary",onClick:()=>{(it?Ue.signOut():Ue.signIn()).catch(De=>nt.post(De))}},it?"Sign out":"Sign in"))))},Wt=$e=>{const{configuredProviders:qe}=$e;return p.createElement(p.Fragment,null,qe.includes("google")&&p.createElement(Dt,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:u.g,icon:Ce.Z}),qe.includes("microsoft")&&p.createElement(Dt,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:u.m,icon:Ce.Z}),qe.includes("github")&&p.createElement(Dt,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:u.d,icon:Ce.Z}),qe.includes("gitlab")&&p.createElement(Dt,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:u.e,icon:Ce.Z}),qe.includes("okta")&&p.createElement(Dt,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:u.o,icon:Ce.Z}),qe.includes("bitbucket")&&p.createElement(Dt,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:u.i,icon:Ce.Z}),qe.includes("onelogin")&&p.createElement(Dt,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:u.h,icon:Ce.Z}),qe.includes("atlassian")&&p.createElement(Dt,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:u.k,icon:Ce.Z}),qe.includes("bitbucketServer")&&p.createElement(Dt,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:u.j,icon:Ce.Z}))},Je=$e=>{const{providerSettings:qe}=$e,G=(0,u.u)(u.p).getOptionalConfig("auth.providers"),ue=(G==null?void 0:G.keys())||[],Ue=qe!=null?qe:p.createElement(Wt,{configuredProviders:ue});return!qe&&!(ue!=null&&ue.length)?p.createElement(pt,null):p.createElement(ve.rJ,{title:"Available Providers"},p.createElement(X.Z,{dense:!0},Ue))},_t=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,Nt=()=>p.createElement(ve.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:p.createElement(p.Fragment,null,p.createElement(m.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),p.createElement(ve.Oi,{text:_t,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),p.createElement(Y.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),Xt=$e=>$e.description?$e.description:$e.pluginId?`Registered in ${$e.pluginId} plugin`:"Registered in the application",Ht=({flag:$e,enabled:qe,toggleHandler:Ee})=>p.createElement(W.Z,{divider:!0,button:!0,onClick:()=>Ee($e.name)},p.createElement(tt.Z,null,p.createElement(r.ZP,{placement:"top",arrow:!0,title:qe?"Disable":"Enable"},p.createElement(k.Z,{color:"primary",checked:qe,name:$e.name}))),p.createElement(Xe.Z,{primary:$e.name,secondary:Xt($e)})),Ft=($e,qe)=>{const Ee=$e.filter(ue=>qe.isActive(ue.name)),G=$e.filter(ue=>!qe.isActive(ue.name));return[...Ee,...G]},yt=()=>{const $e=(0,u.u)(u.f),qe=p.useRef(),Ee=$e.getRegisteredFlags(),G=Ft(Ee,$e),[ue]=(0,p.useState)(G),Ue=Object.fromEntries(ue.map(({name:H})=>[H,$e.isActive(H)])),[nt,it]=(0,p.useState)(Ue),[Rt,qt]=(0,p.useState)(""),nn=(0,p.useCallback)(H=>{const te=$e.isActive(H)?u.F.None:u.F.Active;$e.save({states:{[H]:te},merge:!0}),it(ut=>({...ut,[H]:te===u.F.Active}))},[$e]);if(!ue.length)return p.createElement(Nt,null);const we=()=>{var H;qt(""),(H=qe==null?void 0:qe.current)==null||H.focus()},De=ue.filter(H=>H.name.toLocaleLowerCase("en-US").includes(Rt.toLocaleLowerCase("en-US"))),w=()=>p.createElement(Ve.Z,{container:!0,style:{justifyContent:"space-between"}},p.createElement(Ve.Z,{item:!0,xs:6,md:8},p.createElement(m.Z,{variant:"h5"},"Feature Flags"),p.createElement(m.Z,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),ue.length>=10&&p.createElement(Ve.Z,{item:!0,xs:6,md:4},p.createElement(s.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:H=>H&&H.focus(),InputProps:{...Rt.length&&{endAdornment:p.createElement(ne.Z,{"aria-label":"Clear filter",onClick:we,edge:"end"},p.createElement(R.Z,null))}},onChange:H=>qt(H.target.value),value:Rt})));return p.createElement(ve.rJ,{title:p.createElement(w,null)},p.createElement(X.Z,{dense:!0},De.map(H=>{const te=Boolean(nt[H.name]);return p.createElement(Ht,{key:H.name,flag:H,enabled:te,toggleHandler:nn})})))},Tt=()=>{var $e;const qe=(0,u.u)(u.v),Ee=(0,u.u)(u.l),{value:G,loading:ue,error:Ue}=(0,M.default)(async()=>({profile:await qe.getProfileInfo(),identity:await qe.getBackstageIdentity()}),[]);return(0,p.useEffect)(()=>{Ue&&Ee.post({message:`Failed to load user identity: ${Ue}`,severity:"error"})},[Ue,Ee]),ue||Ue?{profile:{},displayName:"",loading:ue}:{profile:G.profile,backstageIdentity:G.identity,displayName:($e=G.profile.displayName)!=null?$e:G.identity.userEntityRef,loading:ue}},wt=(0,V.Z)($e=>({avatar:{width:({size:qe})=>qe,height:({size:qe})=>qe,fontSize:({size:qe})=>qe*.7,border:`1px solid ${$e.palette.textSubtle}`}})),Jt=$e=>{const{size:qe}=$e,{iconSize:Ee}=ve.sidebarConfig,G=wt(qe?{size:qe}:{size:Ee}),{profile:ue}=Tt();return p.createElement(D.Z,{src:ue.picture,className:G.avatar,alt:"Profile picture"})},Ae=()=>{const $e=(0,u.u)(u.s),qe=(0,u.u)(u.v),[Ee,G]=p.useState(!1),[ue,Ue]=p.useState(void 0),nt=Rt=>{Ue(Rt.currentTarget),G(!0)},it=()=>{Ue(void 0),G(!1)};return p.createElement(p.Fragment,null,p.createElement(ne.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:nt},p.createElement(Ne.Z,null)),p.createElement(re.Z,{anchorEl:ue,open:Ee,onClose:it},p.createElement(ie.Z,{"data-testid":"sign-out",onClick:()=>qe.signOut().catch(Rt=>$e.post(Rt))},p.createElement(tt.Z,null,p.createElement(g.Z,null)),"Sign Out")))},j=()=>{const{profile:$e,displayName:qe}=Tt();return p.createElement(ve.rJ,{title:"Profile",variant:"gridItem"},p.createElement(Ve.Z,{container:!0,spacing:6},p.createElement(Ve.Z,{item:!0},p.createElement(Jt,{size:96})),p.createElement(Ve.Z,{item:!0,xs:12,sm:!0,container:!0},p.createElement(Ve.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},p.createElement(Ve.Z,{item:!0,xs:!0},p.createElement(m.Z,{variant:"subtitle1",gutterBottom:!0},qe),$e.email&&p.createElement(m.Z,{variant:"body2",color:"textSecondary"},$e.email))),p.createElement(Ve.Z,{item:!0},p.createElement(Ae,null)))))},E=()=>{const{isPinned:$e,toggleSidebarPinState:qe}=(0,ve.Pf)();return p.createElement(W.Z,null,p.createElement(Xe.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),p.createElement(be.Z,null,p.createElement(r.ZP,{placement:"top",arrow:!0,title:`${$e?"Unpin":"Pin"} Sidebar`},p.createElement(k.Z,{color:"primary",checked:$e,onChange:()=>qe(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},N=({id:$e,activeId:qe,icon:Ee})=>Ee?(0,p.cloneElement)(Ee,{color:qe===$e?"primary":void 0}):p.createElement(Qe.Z,{color:qe===$e?"primary":void 0}),Q=(0,V.Z)($e=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[$e.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[$e.breakpoints.down("xs")]:{paddingLeft:0}}})),q=({children:$e,title:qe,value:Ee,...G})=>p.createElement(r.ZP,{placement:"top",arrow:!0,title:qe},p.createElement(se.Z,{value:Ee,...G},$e)),Ge=()=>{const $e=Q(),qe=(0,u.u)(u.n),Ee=(0,Oe.Z)(qe.activeThemeId$(),qe.getActiveThemeId()),G=qe.getInstalledThemes(),{t:ue}=(0,_e.iH)(Ke.a),Ue=(nt,it)=>{G.some(Rt=>Rt.id===it)?qe.setActiveThemeId(it):qe.setActiveThemeId(void 0)};return p.createElement(W.Z,{className:$e.list,classes:{container:$e.container}},p.createElement(Xe.Z,{className:$e.listItemText,primary:ue("theme"),secondary:ue("change_the_theme_mode")}),p.createElement(be.Z,{className:$e.listItemSecondaryAction},p.createElement(Le.Z,{exclusive:!0,size:"small",value:Ee!=null?Ee:"auto",onChange:Ue},G.map(nt=>{const it=nt.id,Rt=nt.icon,qt=nt.title||(it==="light"||it==="dark"?ue(`theme_${it}`):it);return p.createElement(q,{key:it,title:ue("select_theme",{theme:qt}),value:it},p.createElement(p.Fragment,null,qt,"\xA0",p.createElement(N,{id:it,icon:Rt,activeId:Ee})))}),p.createElement(r.ZP,{placement:"top",arrow:!0,title:ue("select_theme_auto")},p.createElement(se.Z,{value:"auto",selected:Ee===void 0},ue("theme_auto"),"\xA0",p.createElement(Qe.Z,{color:Ee===void 0?"primary":void 0}))))))},Z=(0,V.Z)($e=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[$e.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[$e.breakpoints.down("xs")]:{paddingLeft:0}}})),x=({children:$e,title:qe,value:Ee,...G})=>p.createElement(r.ZP,{placement:"top",arrow:!0,title:qe},p.createElement(se.Z,{value:Ee,...G},$e)),he=()=>{const $e=Z(),qe=(0,u.u)(_e.IB),{t:Ee}=(0,_e.iH)(Ke.a),[G]=(0,p.useState)(()=>qe.language$()),{language:ue}=(0,Oe.Z)(G,qe.getLanguage()),{languages:Ue}=qe.getAvailableLanguages();if(Ue.length<=1)return null;const nt=(it,Rt)=>{qe.setLanguage(Rt)};return p.createElement(W.Z,{className:$e.list,classes:{container:$e.container}},p.createElement(Xe.Z,{className:$e.listItemText,primary:Ee("language"),secondary:Ee("change_the_language")}),p.createElement(be.Z,{className:$e.listItemSecondaryAction},p.createElement(Le.Z,{exclusive:!0,size:"small",value:ue,onChange:nt},Ue.map(it=>p.createElement(x,{key:it,title:Ee("select_lng",{language:it}),value:it},p.createElement(p.Fragment,null,it))))))},Fe=()=>{const{isMobile:$e}=(0,ve.Pf)();return p.createElement(ve.rJ,{title:"Appearance",variant:"gridItem"},p.createElement(X.Z,{dense:!0},p.createElement(Ge,null),p.createElement(he,null),!$e&&p.createElement(E,null)))},mt=()=>{const{backstageIdentity:$e}=Tt();return $e?p.createElement(Ve.Z,{container:!0,spacing:1},p.createElement(Ve.Z,{item:!0,xs:12},p.createElement(m.Z,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",p.createElement(St.rI,{entityRefs:[$e.userEntityRef]}))),p.createElement(Ve.Z,{item:!0,xs:12},p.createElement(m.Z,{variant:"subtitle1"},"Ownership Entities:"," ",p.createElement(St.rI,{entityRefs:$e.ownershipEntityRefs})))):p.createElement(m.Z,null,"No Backstage Identity")},Qt=()=>p.createElement(ve.rJ,{title:"Backstage Identity"},p.createElement(mt,null)),Ie=()=>p.createElement(Ve.Z,{container:!0,direction:"row",spacing:3},p.createElement(Ve.Z,{item:!0,xs:12,md:6},p.createElement(j,null)),p.createElement(Ve.Z,{item:!0,xs:12,md:6},p.createElement(Fe,null)),p.createElement(Ve.Z,{item:!0,xs:12,md:6},p.createElement(Qt,null))),Be="plugin.user-settings.settingsLayout",ct="plugin.user-settings.settingsLayoutRoute",Ot=()=>null;(0,F.R5)(Ot,ct,!0),(0,F.R5)(Ot,"core.gatherMountPoints",!0);const bt=$e=>{const{title:qe,children:Ee}=$e,{isMobile:G}=(0,ve.Pf)(),ue=(0,F.vJ)(Ee,Ue=>Ue.selectByComponentData({key:ct,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(nt=>nt.props));return p.createElement(ve.T3,{themeId:"home"},!G&&p.createElement(ve.h4,{title:qe!=null?qe:"Settings"}),p.createElement(ve.tn,{routes:ue}))};(0,F.R5)(bt,Be,!0),bt.Route=Ot;const $t=$e=>{const{providerSettings:qe,tabs:Ee}=$e;return p.createElement(bt,null,p.createElement(bt.Route,{path:"general",title:"General"},p.createElement(Ie,null)),p.createElement(bt.Route,{path:"auth-providers",title:"Authentication Providers"},p.createElement(Je,{providerSettings:qe})),p.createElement(bt.Route,{path:"feature-flags",title:"Feature Flags"},p.createElement(yt,null)),Ee)},Ct=$e=>{const{providerSettings:qe}=$e,Ee=(0,o.pC)(),G=(0,F.vJ)(Ee,Ue=>Ue.selectByComponentData({key:Be}).getElements()),ue=(0,F.vJ)(Ee,Ue=>Ue.selectByComponentData({key:ct}).getElements());return p.createElement(p.Fragment,null,G.length!==0&&G||p.createElement($t,{tabs:ue,providerSettings:qe}))}},40080:($n,Vt,e)=>{"use strict";e.d(Vt,{U:()=>V,a:()=>D,s:()=>m});var o=e(30705),p=e(83487);const m=(0,o.NT)({id:"user-settings"}),V=(0,o.rx)({id:"user-settings",routes:{settingsPage:m}}).provide((0,o.P4)({name:"UserSettingsPage",component:()=>e.e(5863).then(e.bind(e,25863)).then(W=>W.SettingsPage),mountPoint:m})),D=(0,p.FB)({id:"user-settings",messages:{language:"Language",change_the_language:"Change the language",theme:"Theme",theme_light:"Light",theme_dark:"Dark",theme_auto:"Auto",change_the_theme_mode:"Change the theme mode",select_theme:"Select {{theme}}",select_theme_auto:"Select Auto Theme",select_lng:"Select language {{language}}"}})},43229:($n,Vt,e)=>{"use strict";e.d(Vt,{Zr:()=>s});var o=e(82394),p=e.n(o),m=e(40080),Y=e(2784),V=e(47603),D=e(49558),W=e(30705),tt=e(54892),Xe=Object.defineProperty,r=(ie,ve,Ce)=>ve in ie?Xe(ie,ve,{enumerable:!0,configurable:!0,writable:!0,value:Ce}):ie[ve]=Ce,Ve=(ie,ve,Ce)=>(r(ie,typeof ve!="symbol"?ve+"":ve,Ce),Ce);const be={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},X=new Map;class k{constructor(ve,Ce,u,F,R,M){this.namespace=ve,this.fetchApi=Ce,this.discoveryApi=u,this.errorApi=F,this.identityApi=R,this.fallback=M,Ve(this,"subscribers",new Set),Ve(this,"observables",new Map)}static create(ve){var Ce;return new k((Ce=ve.namespace)!=null?Ce:"default",ve.fetchApi,ve.discoveryApi,ve.errorApi,ve.identityApi,WebStorage.create({namespace:ve.namespace,errorApi:ve.errorApi}))}forBucket(ve){const Ce=`${this.namespace}.${ve}`;return X.has(Ce)||X.set(Ce,new k(Ce,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),X.get(Ce)}async remove(ve){const Ce=await this.getFetchUrl(ve),u=await this.fetchApi.fetch(Ce,{method:"DELETE"});if(!u.ok&&u.status!==404)throw await ResponseError.fromResponse(u);this.notifyChanges({key:ve,presence:"absent"})}async set(ve,Ce){if(!await this.isSignedIn()){await this.fallback.set(ve,Ce),this.notifyChanges({key:ve,presence:"present",value:Ce});return}const u=await this.getFetchUrl(ve),F=await this.fetchApi.fetch(u,{method:"PUT",headers:be,body:JSON.stringify({value:Ce})});if(!F.ok)throw await ResponseError.fromResponse(F);const{value:R}=await F.json();this.notifyChanges({key:ve,value:R,presence:"present"})}observe$(ve){return this.observables.has(ve)||this.observables.set(ve,new ObservableImpl(Ce=>(this.subscribers.add(Ce),Promise.resolve().then(()=>this.get(ve)).then(u=>Ce.next(u)).catch(u=>this.errorApi.post(u)),()=>{this.subscribers.delete(Ce)})).filter(({key:Ce})=>Ce===ve)),this.observables.get(ve)}snapshot(ve){return{key:ve,presence:"unknown"}}async get(ve){if(!await this.isSignedIn())return this.fallback.snapshot(ve);const Ce=await this.getFetchUrl(ve),u=await this.fetchApi.fetch(Ce);if(u.status===404)return{key:ve,presence:"absent"};if(!u.ok)throw await ResponseError.fromResponse(u);try{const{value:F}=await u.json(),R=JSON.parse(JSON.stringify(F),(M,g)=>(typeof g=="object"&&g!==null&&Object.freeze(g),g));return{key:ve,presence:"present",value:R}}catch{return{key:ve,presence:"absent"}}}async getFetchUrl(ve){const Ce=await this.discoveryApi.getBaseUrl("user-settings"),u=encodeURIComponent(this.namespace),F=encodeURIComponent(ve);return`${Ce}/buckets/${u}/keys/${F}`}async notifyChanges(ve){for(const Ce of this.subscribers)try{Ce.next(ve)}catch{}}async isSignedIn(){try{const ve=await this.identityApi.getCredentials();return!!(ve!=null&&ve.token)}catch{return!1}}}const s=ie=>{const ve=(0,W.tg)(m.s),Ce=ie.icon?ie.icon:V.Z;return Y.createElement(D.R6,{text:"Settings",to:ve(),icon:Ce})},ne=tt.L,re=ie=>Y.createElement(tt.S.Route,{path:ie.path,title:ie.title},Y.createElement(Y.Fragment,null,"props.children"));(0,W.R5)(re,ne,"UserSettingsTab")},18473:($n,Vt,e)=>{"use strict";e.d(Vt,{CT:()=>W,EI:()=>D,Vt:()=>tt,uW:()=>V});var o=e(2784);function p(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const m=p(),Y=r=>`__@backstage/${r}__`;function V(r,Ve){const be=Y(r);let X=m[be];return X||(X=Ve(),m[be]=X,X)}function D(r){Object.freeze(r);const Ve={atVersion(be){return r[be]}};return Object.defineProperty(Ve,"$map",{configurable:!0,enumerable:!0,get(){return r}}),Ve}function W(r){return V(r,()=>(0,o.createContext)(void 0))}function tt(r){return(0,o.useContext)(W(r))}function Xe(r){return{set(Ve){globalThis[`__@backstage/${r}__`]=createContext(D(Ve))},reset(){delete globalThis[`__@backstage/${r}__`]}}}}}]);})();

//# sourceMappingURL=module-backstage.59485639.js.map
{"version":3,"file":"static/module-backstage.59485639.js","mappings":"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ACT,gBACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,4CACb,QAAW,UACX,SAAU,CACT,UACA,OACD,EACA,UAAW,CACZ,CACD,CACD,CACD,EACIC,GAAuB,CAC1B,QAASR,GACT,IAAKC,GACL,YAAaC,EACb,SAAUC,GACV,KAAMC,GACN,SAAUC,GACV,qBAAsBC,GACtB,WAAYC,EACb,EAEIE,GAAY,yCACZC,GAAQ,SACRC,GAAgB,yEAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,YACN,SAAU,CACT,KAAM,eACN,YAAa,6BACb,OAAQ,CACP,aAAc,wBACf,EACA,YAAa,CACZ,KAAM,0CACP,CACD,EACA,KAAM,CACL,KAAM,UACN,UAAW,aACX,MAAO,OACR,CACD,CACD,EACIC,GAAS,SACTC,GAAa,CAChB,aACA,OACA,UACD,EACIC,GAAyB,GACzBC,GAAe,CAClB,WAAY,CACX,KAAM,SACN,YAAa,+FACb,UAAW,EACX,SAAU,CACT,wBACA,oBACA,KACD,CACD,EACA,KAAM,CACL,KAAM,SACN,YAAa,8CACb,UAAW,EACX,SAAU,CACT,MACA,YACA,SACA,QACA,WACA,WACA,SACA,WACA,MACD,CACD,EACA,SAAU,CACT,KAAM,YACP,EACA,KAAM,CACL,KAAM,SACN,YAAa,sDACd,EACA,UAAW,CACV,KAAM,QACN,YAAa,0DACb,MAAO,CACN,KAAM,iBACP,CACD,EACA,OAAQ,CACP,KAAM,eACP,CACD,EACIC,GAAe,CAClB,QAASR,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,KAAMC,GACN,SAAUC,GACV,qBAAsBC,GACtB,WAAYC,EACb,EAEIE,GAAY,yCACZC,GAAQ,aACRC,EAAgB,0DAChBC,EAAa,CAChB,CACC,IAAK,uCACL,KAAM,2BACN,KAAM,mBACN,UAAW,gBACX,OAAQ,CACP,sBAAuB,YACxB,EACA,YAAa,CACZ,uBAAwB,YACzB,EACA,KAAM,CACL,OACA,MACD,CACD,CACD,EACIC,EAAS,SACTC,EAAW,CACd,MACD,EACIC,EAAuB,GACvBC,GAAa,CAChB,IAAK,CACJ,KAAM,SACN,YAAa,iXACb,SAAU,CACT,sCACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,mbACb,SAAU,CACT,0BACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,6HACb,SAAU,CACT,gBACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,4CACb,QAAW,UACX,SAAU,CACT,UACA,OACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,iHACb,SAAU,CACT,oBACD,EACA,UAAW,CACZ,EACA,YAAa,CACZ,KAAM,SACN,YAAa,kFACd,EACA,OAAQ,CACP,KAAM,SACN,YAAa,qEACb,qBAAsB,GACtB,kBAAmB,CAClB,OAAQ,CACP,KAAM,QACP,CACD,CACD,EACA,YAAa,CACZ,KAAM,SACN,YAAa,mFACb,qBAAsB,GACtB,kBAAmB,CAClB,OAAQ,CACP,KAAM,QACP,CACD,CACD,EACA,KAAM,CACL,KAAM,QACN,YAAa,6FACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,MAAO,CACN,KAAM,QACN,YAAa,kNACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,KACD,EACA,WAAY,CACX,IAAK,CACJ,KAAM,SACN,YAAa,kCACb,SAAU,CACT,+BACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,6CACb,SAAU,CACT,iBACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,8DACb,SAAU,CACT,WACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,8DACb,SAAU,CACT,UACA,gBACA,OACA,WACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,EACIC,EAAmB,CACtB,QAASR,GACT,IAAKC,GACL,YAAaC,EACb,SAAUC,EACV,KAAMC,EACN,SAAUC,EACV,qBAAsBC,EACtB,WAAYC,EACb,EAEIE,EAAY,yCACZC,GAAQ,SACRvF,GAAO,SACPwF,GAAgB,kDAChBC,GAAc,CACjB,UAAW,CACV,IAAK,aACL,KAAM,SACN,YAAa,yCACb,SAAU,CACT,OACA,YACA,MACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,gCACb,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,8CACb,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,yCACb,UAAW,CACZ,CACD,CACD,EACA,SAAU,CACT,IAAK,YACL,KAAM,SACN,YAAa,kDACb,SAAU,CACT,OACA,WACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,UAAW,EACX,QAAS,SACT,YAAa,uBACd,EACA,OAAQ,CACP,KAAM,aACN,WAAY,EACb,EACA,UAAW,CACV,KAAM,SACN,UAAW,EACX,YAAa,gDACd,CACD,CACD,EACA,OAAQ,CACP,IAAK,UACL,KAAM,SACN,YAAa,mEACb,SAAU,CACV,EACA,qBAAsB,GACtB,WAAY,CACX,MAAO,CACN,KAAM,QACN,MAAO,CACN,KAAM,aACP,CACD,CACD,CACD,EACA,WAAY,CACX,IAAK,cACL,KAAM,SACN,YAAa,iDACb,SAAU,CACT,OACA,QACA,SACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,UAAW,CACZ,EACA,MAAO,CACN,KAAM,eACN,YAAa,iDACd,EACA,QAAS,CACR,KAAM,SACN,YAAa,wEACd,EACA,MAAO,CACN,KAAM,SACN,YAAa,4DACd,CACD,CACD,EACA,YAAa,CACZ,IAAK,eACL,KAAM,SACN,YAAa,6BACb,KAAQ,CACP,OACA,UACA,OACD,CACD,EACA,MAAO,CACN,IAAK,SACL,KAAM,SACN,YAAa,6BACb,SAAU,CACT,OACA,SACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,SAAU,CACT,QACA,YACD,EACA,YAAa,6BACb,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,0BACd,EACA,KAAM,CACL,KAAM,SACN,YAAa,yCACd,EACA,MAAO,CACN,KAAM,SACN,YA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,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,SAASE,GAA+B3D,GAAQ,CAC9C,IAAIkC,GACJ,MAAO,CACL,MAAM,MAAMlB,GAAM,CAChB,OAAKkB,KACHA,GAAYjB,GAA0BjB,EAAM,GAEvCkC,GAAUlB,EAAI,IAAMA,EAC7B,CACF,CACF,CAEA,MAAM4C,GAA6BD,GAA+BD,EAAQ,EAE1E,IAAIG,GAAY,yCACZC,GAAQ,oBACRC,GAAgB,4PAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,YACN,SAAU,CACT,KAAM,eACN,YAAa,6BACb,OAAQ,CACP,aAAc,wBACf,EACA,YAAa,CACZ,KAAM,0CACP,CACD,EACA,KAAM,CACL,KAAM,UACN,UAAW,aACX,MAAO,OACR,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,WACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,YACA,OACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,yBACb,SAAU,CACT,UACA,UACA,SACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,wCACb,SAAU,CACT,eACA,aACA,YACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,mEACb,UAAW,CACZ,EACA,eAAgB,CACf,KAAM,SACN,YAAa,6EACb,UAAW,CACZ,EACA,aAAc,CACb,KAAM,QACN,YAAa,gFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,aAAc,CACb,KAAM,QACN,YAAa,gFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,UAAW,CACV,KAAM,QACN,YAAa,sFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAmCR,GAA+BO,EAAQ,EAEhF,IAAIE,GAAY,yCACZC,GAAQ,iBACRC,GAAgB,kJAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,SACN,SAAU,CACT,KAAM,UACN,YAAa,0BACd,EACA,KAAM,CACL,MAAO,uBACR,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,QACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACD,EACA,WAAY,CACX,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAgCf,GAA+Bc,EAAQ,EAE7E,IAAIE,GAAY,yCACZC,GAAQ,gBACRC,GAAgB,kNAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,QACN,SAAU,CACT,KAAM,iBACN,YAAa,yBACd,EACA,KAAM,CACL,KAAM,gBACN,QAAS,CACR,YAAa,iBACb,MAAO,6BACP,QAAS,mDACV,EACA,OAAQ,MACR,SAAU,CACT,YACA,OACD,CACD,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,OACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,UACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,2LACb,SAAU,CACT,OACA,gBACA,eACA,MACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,uYACb,WAAY,CACX,YAAa,CACZ,KAAM,SACN,YAAa,6CACb,SAAU,CACT,gBACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,6CACb,SAAU,CACT,4BACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,mDACb,SAAU,CACT,mDACD,EACA,UAAW,CACZ,CACD,CACD,EACA,OAAQ,CACP,KAAM,SACN,YAAa,4NACb,SAAU,CACT,KACD,EACA,UAAW,CACZ,EACA,SAAU,CACT,KAAM,QACN,YAAa,mSACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,YACA,OACD,EACA,UAAW,CACZ,CACD,EACA,QAAS,CACR,KAAM,QACN,YAAa,6FACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,MACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAA+BtB,GAA+BqB,EAAQ,EAE5E,IAAIE,GAAY,yCACZC,GAAQ,mBACRC,GAAgB,gFAChBC,EAAa,CAChB,CACC,WAAY,wBACZ,KAAM,WACN,SAAU,CACT,KAAM,UACP,EACA,KAAM,CACL,KAAM,MACN,QAAS,CACR,0EACA,+EACD,CACD,CACD,CACD,EACIC,EAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,UACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACV,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,gLACb,SAAU,CACT,KACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,6NACb,SAAU,CACT,6BACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,QACN,YAAa,sOACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,8BACA,yEACD,EACA,UAAW,CACZ,CACD,EACA,SAAU,CACT,KAAM,SACN,YAAa,sHACb,QAAW,WACX,SAAU,CACT,UACD,EACA,KAAQ,CACP,WACA,UACD,CACD,CACD,CACD,CACD,CACD,CACD,EACIC,EAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,EACV,MAAOC,CACR,EAEA,MAAME,EAAkC7B,GAA+B4B,CAAQ,EAEzEE,GAAoB,UACpBC,GAAoB,UACpBC,GAAwB,cACxBC,GAA2B,gBAC3BC,GAAwB,cACxBC,GAA2B,gBAC3BC,GAAsB,YACtBC,GAAyB,eACzBC,GAAqB,WACrBC,GAAoB,UACpBC,GAAqB,WACrBC,GAAsB,YACtBC,GAAmB,SACnBC,GAAoB,UAE1B,IAAIC,GAAY,yCACZC,GAAQ,mBACRC,GAAgB,8PAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,WACN,SAAU,CACT,KAAM,aACN,YAAa,uBACd,EACA,KAAM,CACL,KAAM,WACN,MAAO,wBACP,OAAQ,0BACT,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,UACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,OACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,wBACb,SAAU,CACT,WACA,YACA,SACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,oDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,QACN,YAAa,qFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,OAAQ,CACP,KAAM,SACN,YAAa,kEACb,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAkClD,GAA+BiD,EAAQ,EAE/E,IAAIE,GAAY,yCACZC,GAAQ,iBACRC,GAAgB,uXAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,SACN,SAAU,CACT,KAAM,2BACN,YAAa,yCACd,EACA,KAAM,CACL,MAAO,wBACP,OAAQ,SACT,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,QACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACD,EACA,WAAY,CACX,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,gEACb,SAAU,CACT,SACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAgCzD,GAA+BwD,EAAQ,EAE7E,IAAIE,GAAU,yCACVC,GAAM,eACNC,GAAc,8SACdC,GAAW,CACd,CACC,WAAY,wBACZ,KAAM,OACN,SAAU,CACT,KAAM,MACP,EACA,KAAM,CACL,QAAS,CACR,YAAa,YACb,MAAO,wBACP,QAAS,qDACV,EACA,SAAU,CACT,SACA,WACD,CACD,CACD,CACD,EACIC,GAAQ,CACX,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,MACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,UACD,EACA,WAAY,CACX,QAAS,CACR,KAAM,SACN,YAAa,wYACb,WAAY,CACX,YAAa,CACZ,KAAM,SACN,YAAa,6CACb,SAAU,CACT,WA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ACX,KAAQ,CACP,iCACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,UACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,OACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,+YACb,SAAU,CACT,UACA,UACA,SACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,4CACb,UAAW,CACZ,EACA,WAAY,CACX,MAAO,CACN,CACC,KAAM,SACN,YAAa,yDACb,WAAY,CACX,wBAAyB,CACxB,KAAM,SACN,YAAa,4CACb,WAAY,CACX,KAAM,CACL,KAAM,QACN,MAAO,CACN,KAAM,QACP,CACD,CACD,CACD,CACD,CACD,EACA,CACC,KAAM,QACN,YAAa,kDACb,MAAO,CACN,KAAM,SACN,YAAa,yDACb,WAAY,CACX,wBAAyB,CACxB,KAAM,SACN,YAAa,4CACb,WAAY,CACX,KAAM,CACL,KAAM,QACN,MAAO,CACN,KAAM,QACP,CACD,CACD,CACD,CACD,CACD,CACD,CACD,CACD,EACA,MAAO,CACN,KAAM,QACN,YAAa,8BACb,MAAO,CACN,KAAM,SACN,YAAa,wCACb,SAAU,CACT,QACD,EACA,WAAY,CACX,GAAI,CACH,KAAM,SACN,YAAa,gEACd,EACA,KAAM,CACL,KAAM,SACN,YAAa,yFACd,EACA,OAAQ,CACP,KAAM,SACN,YAAa,oCACd,EACA,MAAO,CACN,KAAM,SACN,YAAa,yDACd,EACA,GAAM,CACL,KAAM,CACL,SACA,SACD,EACA,YAAa,gOACd,EACA,wBAAyB,CACxB,KAAM,SACN,YAAa,uCACb,WAAY,CACX,KAAM,CACL,KAAM,QACN,MAAO,CACN,KAAM,QACP,CACD,CACD,CACD,CACD,CACD,CACD,EACA,OAAQ,CACP,KAAM,SACN,YAAa,qEACb,WAAY,CACX,MAAO,CACN,KAAM,QACN,YAAa,oGACb,MAAO,CACN,KAAM,SACN,SAAU,CACV,EACA,WAAY,CACX,IAAK,CACJ,KAAM,SACN,YAAa,kCACb,SAAU,CACT,uCACD,EACA,UAAW,CACZ,EACA,UA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","sources":["webpack://app/../../node_modules/@backstage/theme/dist/index.esm.js","webpack://app/../../node_modules/@backstage/app-defaults/dist/index.esm.js","webpack://app/../../node_modules/@backstage/catalog-client/dist/index.esm.js","webpack://app/../../node_modules/@backstage/catalog-model/dist/index.esm.js","webpack://app/../../node_modules/@backstage/config/dist/index.esm.js","webpack://app/../../node_modules/@backstage/core-app-api/dist/index.esm.js","webpack://app/../../node_modules/@backstage/core-components/dist/index.esm.js","webpack://app/../../node_modules/@backstage/core-plugin-api/dist/alpha.esm.js","webpack://app/../../node_modules/@backstage/core-plugin-api/dist/esm/types-08c0ee05.esm.js","webpack://app/../../node_modules/@backstage/core-plugin-api/dist/index.esm.js","webpack://app/../../node_modules/@backstage/errors/dist/index.esm.js","webpack://app/../../node_modules/@backstage/integration-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/integration/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-api-docs/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-common/dist/alpha.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-graph/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-import/dist/esm/plugin-014562a4.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/dist/esm/useEntity-de64059a.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/node_modules/@react-hookz/web/esm/useMountEffect/index.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/node_modules/@react-hookz/web/esm/useSyncedRef/index.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/node_modules/@react-hookz/web/esm/useUnmountEffect/index.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/node_modules/@react-hookz/web/esm/useDebouncedCallback/index.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/node_modules/@react-hookz/web/esm/useDebouncedEffect/index.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog/dist/esm/CatalogTable-e4b8aedd.esm.js","webpack://app/../../node_modules/@backstage/frontend-plugin-api/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/dist/alpha.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog/dist/esm/EntityLayout-d224d43b.esm.js","webpack://app/../../node_modules/@backstage/types/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog/dist/esm/routes-45cc523b.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-github-actions/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-org/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-permission-common/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-permission-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-common/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/alpha.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/esm/ref-6fdfc121.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/esm/OngoingTask-377f1a3a.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/node_modules/event-source-polyfill/src/eventsource.js","webpack://app/../../node_modules/@backstage/plugin-search-react/dist/esm/extensions-c878c532.esm.js","webpack://app/../../node_modules/@backstage/plugin-search-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-search/dist/esm/SearchType-a8f79021.esm.js","webpack://app/../../node_modules/@backstage/plugin-tech-radar/dist/esm/plugin-76dae734.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs-module-addons-contrib/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs/dist/esm/Router-4dd3c907.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs/dist/esm/TechDocsIndexPage-a43a1a1c.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs/dist/esm/TechDocsReaderPage-cbdbc148.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs/dist/esm/TechDocsSearchResultListItem-4736f829.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs/dist/esm/routes-691e552c.esm.js","webpack://app/../../node_modules/@backstage/plugin-user-settings/dist/esm/SettingsPage-70c1c7c8.esm.js","webpack://app/../../node_modules/@backstage/plugin-user-settings/dist/esm/translation-ecd113d9.esm.js","webpack://app/../../node_modules/@backstage/plugin-user-settings/dist/index.esm.js","webpack://app/../../node_modules/@backstage/version-bridge/dist/index.esm.js"],"sourcesContent":["import { createTheme as createTheme$2, createGenerateClassName, StylesProvider, ThemeProvider } from '@material-ui/core/styles';\nimport { darken, lighten, createTheme as createTheme$1, adaptV4Theme, StyledEngineProvider, ThemeProvider as ThemeProvider$1 } from '@mui/material/styles';\nimport React from 'react';\nimport { unstable_ClassNameGenerator } from '@mui/material/className';\nimport { CssBaseline } from '@material-ui/core';\n\nconst __v5Spacing = (defaultSpacing) => (...argsInput) => {\n  const args = argsInput.length === 0 ? [1] : argsInput;\n  const transform = (argument, themeSpacing) => {\n    if (typeof argument === \"string\") {\n      return argument;\n    }\n    return themeSpacing * argument;\n  };\n  return args.map((argument) => {\n    const output = transform(argument, defaultSpacing);\n    return typeof output === \"number\" ? `${output}px` : output;\n  }).join(\" \");\n};\nfunction adaptV5CssBaselineOverride(theme, overrides) {\n  if (!overrides || typeof overrides === \"string\") {\n    return void 0;\n  }\n  const styles = typeof overrides === \"function\" ? overrides(theme) : overrides;\n  if (styles) {\n    return { \"@global\": styles };\n  }\n  return void 0;\n}\nfunction adaptV5Override(theme, overrides) {\n  if (!overrides || typeof overrides === \"string\") {\n    return void 0;\n  }\n  if (typeof overrides === \"object\") {\n    const _theme = { ...theme };\n    const defaultSpacing = theme.spacing(1);\n    if (typeof defaultSpacing === \"number\") {\n      _theme.spacing = __v5Spacing(defaultSpacing);\n    }\n    return Object.fromEntries(\n      Object.entries(overrides).map(([className, style]) => {\n        if (typeof style === \"function\") {\n          return [className, style({ theme: _theme })];\n        }\n        return [className, style];\n      })\n    );\n  }\n  return overrides;\n}\nconst stateStyleKeyPattern = /^&.Mui-([\\w-]+)$/;\nfunction extractV5StateOverrides(overrides) {\n  let output = overrides;\n  if (!overrides || typeof overrides !== \"object\") {\n    return output;\n  }\n  for (const className of Object.keys(overrides)) {\n    const styles = overrides[className];\n    if (!styles || typeof styles !== \"object\") {\n      continue;\n    }\n    for (const _styleKey of Object.keys(styles)) {\n      const styleKey = _styleKey;\n      const match = styleKey.match(stateStyleKeyPattern);\n      if (match) {\n        const [, state] = match;\n        const { [styleKey]: stateStyles, ...restStyles } = styles;\n        if (stateStyles) {\n          output = {\n            ...output,\n            [className]: restStyles,\n            [state]: stateStyles\n          };\n        }\n      }\n    }\n  }\n  return output;\n}\nfunction transformV5ComponentThemesToV4(theme, components = {}) {\n  const overrides = {};\n  const props = {};\n  for (const name of Object.keys(components)) {\n    const component = components[name];\n    if (!component) {\n      continue;\n    }\n    if (\"styleOverrides\" in component) {\n      if (name === \"MuiCssBaseline\") {\n        overrides[name] = adaptV5CssBaselineOverride(\n          theme,\n          component.styleOverrides\n        );\n      } else {\n        overrides[name] = extractV5StateOverrides(\n          adaptV5Override(theme, component.styleOverrides)\n        );\n      }\n    }\n    if (\"defaultProps\" in component) {\n      props[name] = component.defaultProps;\n    }\n  }\n  return { overrides, props };\n}\n\nconst shapes = {\n  wave: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  wave2: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  round: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`\n};\nconst colorVariants = {\n  darkGrey: [\"#171717\", \"#383838\"],\n  marineBlue: [\"#006D8F\", \"#0049A1\"],\n  veryBlue: [\"#0027AF\", \"#270094\"],\n  rubyRed: [\"#98002B\", \"#8D1134\"],\n  toastyOrange: [\"#BE2200\", \"#A41D00\"],\n  purpleSky: [\"#8912CA\", \"#3E00EA\"],\n  eveningSea: [\"#00FFF2\", \"#035355\"],\n  teal: [\"#005B4B\"],\n  pinkSea: [\"#C8077A\", \"#C2297D\"],\n  greens: [\"#4BB8A5\", \"#187656\"]\n};\nfunction genPageTheme(props) {\n  var _a;\n  const { colors, shape, options } = props;\n  const gradientColors = colors.length === 1 ? [colors[0], colors[0]] : colors;\n  const gradient = `linear-gradient(90deg, ${gradientColors.join(\", \")})`;\n  const backgroundImage = `${shape},  ${gradient}`;\n  const fontColor = (_a = options == null ? void 0 : options.fontColor) != null ? _a : \"#FFFFFF\";\n  return {\n    colors,\n    shape,\n    backgroundImage,\n    fontColor\n  };\n}\nconst pageTheme = {\n  home: genPageTheme({ colors: colorVariants.teal, shape: shapes.wave }),\n  documentation: genPageTheme({\n    colors: colorVariants.pinkSea,\n    shape: shapes.wave2\n  }),\n  tool: genPageTheme({ colors: colorVariants.purpleSky, shape: shapes.round }),\n  service: genPageTheme({\n    colors: colorVariants.marineBlue,\n    shape: shapes.wave\n  }),\n  website: genPageTheme({ colors: colorVariants.veryBlue, shape: shapes.wave }),\n  library: genPageTheme({ colors: colorVariants.rubyRed, shape: shapes.wave }),\n  other: genPageTheme({ colors: colorVariants.darkGrey, shape: shapes.wave }),\n  app: genPageTheme({ colors: colorVariants.toastyOrange, shape: shapes.wave }),\n  apis: genPageTheme({ colors: colorVariants.teal, shape: shapes.wave2 }),\n  card: genPageTheme({ colors: colorVariants.greens, shape: shapes.wave })\n};\n\nconst DEFAULT_HTML_FONT_SIZE = 16;\nconst DEFAULT_FONT_FAMILY = '\"Helvetica Neue\", Helvetica, Roboto, Arial, sans-serif';\nconst DEFAULT_PAGE_THEME = \"home\";\nfunction createBaseThemeOptions(options) {\n  const {\n    palette,\n    htmlFontSize = DEFAULT_HTML_FONT_SIZE,\n    fontFamily = DEFAULT_FONT_FAMILY,\n    defaultPageTheme = DEFAULT_PAGE_THEME,\n    pageTheme: pageTheme$1 = pageTheme,\n    typography\n  } = options;\n  if (!pageTheme$1[defaultPageTheme]) {\n    throw new Error(`${defaultPageTheme} is not defined in pageTheme.`);\n  }\n  const defaultTypography = {\n    htmlFontSize,\n    fontFamily,\n    h1: {\n      fontSize: 54,\n      fontWeight: 700,\n      marginBottom: 10\n    },\n    h2: {\n      fontSize: 40,\n      fontWeight: 700,\n      marginBottom: 8\n    },\n    h3: {\n      fontSize: 32,\n      fontWeight: 700,\n      marginBottom: 6\n    },\n    h4: {\n      fontWeight: 700,\n      fontSize: 28,\n      marginBottom: 6\n    },\n    h5: {\n      fontWeight: 700,\n      fontSize: 24,\n      marginBottom: 4\n    },\n    h6: {\n      fontWeight: 700,\n      fontSize: 20,\n      marginBottom: 2\n    }\n  };\n  return {\n    palette,\n    typography: typography != null ? typography : defaultTypography,\n    page: pageTheme$1[defaultPageTheme],\n    getPageTheme: ({ themeId }) => {\n      var _a;\n      return (_a = pageTheme$1[themeId]) != null ? _a : pageTheme$1[defaultPageTheme];\n    }\n  };\n}\n\nconst defaultComponentThemes = {\n  MuiCssBaseline: {\n    styleOverrides: (theme) => ({\n      html: {\n        height: \"100%\",\n        fontFamily: theme.typography.fontFamily\n      },\n      body: {\n        height: \"100%\",\n        fontFamily: theme.typography.fontFamily,\n        overscrollBehaviorY: \"none\",\n        fontSize: \"0.875rem\",\n        lineHeight: 1.43\n      },\n      a: {\n        color: \"inherit\",\n        textDecoration: \"none\"\n      }\n    })\n  },\n  MuiGrid: {\n    defaultProps: {\n      spacing: 2\n    }\n  },\n  MuiSwitch: {\n    defaultProps: {\n      color: \"primary\"\n    }\n  },\n  MuiTableRow: {\n    styleOverrides: {\n      // Alternating row backgrounds\n      root: ({ theme }) => ({\n        \"&:nth-of-type(odd)\": {\n          backgroundColor: theme.palette.background.default\n        }\n      }),\n      // Use pointer for hoverable rows\n      hover: {\n        \"&:hover\": {\n          cursor: \"pointer\"\n        }\n      },\n      // Alternating head backgrounds\n      head: ({ theme }) => ({\n        \"&:nth-of-type(odd)\": {\n          backgroundColor: theme.palette.background.paper\n        }\n      })\n    }\n  },\n  // Tables are more dense than default mui tables\n  MuiTableCell: {\n    styleOverrides: {\n      root: ({ theme }) => ({\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        verticalAlign: \"middle\",\n        lineHeight: \"1\",\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0\n      }),\n      sizeSmall: ({ theme }) => ({\n        padding: theme.spacing(1.5, 2, 1.5, 2.5)\n      }),\n      head: ({ theme }) => ({\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        color: theme.palette.textSubtle,\n        fontWeight: \"normal\",\n        lineHeight: \"1\"\n      })\n    }\n  },\n  MuiTabs: {\n    styleOverrides: {\n      // Tabs are smaller than default mui tab rows\n      root: {\n        minHeight: 24\n      }\n    }\n  },\n  MuiTab: {\n    styleOverrides: {\n      // Tabs are smaller and have a hover background\n      root: ({ theme }) => ({\n        color: theme.palette.link,\n        minHeight: 24,\n        textTransform: \"initial\",\n        letterSpacing: \"0.07em\",\n        \"&:hover\": {\n          color: darken(theme.palette.link, 0.3),\n          background: lighten(theme.palette.link, 0.95)\n        },\n        [theme.breakpoints.up(\"md\")]: {\n          minWidth: 120,\n          fontSize: theme.typography.pxToRem(14),\n          fontWeight: 500\n        }\n      }),\n      textColorPrimary: ({ theme }) => ({\n        color: theme.palette.link\n      })\n    }\n  },\n  MuiTableSortLabel: {\n    styleOverrides: {\n      // No color change on hover, just rely on the arrow showing up instead.\n      root: {\n        color: \"inherit\",\n        \"&:hover\": {\n          color: \"inherit\"\n        },\n        \"&:focus\": {\n          color: \"inherit\"\n        },\n        // Bold font for highlighting selected column\n        \"&.Mui-active\": {\n          fontWeight: \"bold\",\n          color: \"inherit\"\n        }\n      }\n    }\n  },\n  MuiListItemText: {\n    styleOverrides: {\n      dense: {\n        // Default dense list items to adding ellipsis for really long str...\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\"\n      }\n    }\n  },\n  MuiButton: {\n    styleOverrides: {\n      text: {\n        // Text buttons have less padding by default, but we want to keep the original padding\n        padding: void 0\n      }\n    }\n  },\n  MuiChip: {\n    styleOverrides: {\n      root: ({ theme }) => ({\n        // By default there's no margin, but it's usually wanted, so we add some trailing margin\n        marginRight: theme.spacing(1),\n        marginBottom: theme.spacing(1)\n      }),\n      label: ({ theme }) => ({\n        lineHeight: theme.spacing(2.5),\n        fontWeight: theme.typography.fontWeightMedium,\n        fontSize: theme.spacing(1.75)\n      }),\n      labelSmall: ({ theme }) => ({\n        fontSize: theme.spacing(1.5)\n      }),\n      deleteIcon: ({ theme }) => ({\n        width: theme.spacing(3),\n        height: theme.spacing(3),\n        margin: theme.spacing(0, 0.75, 0, -0.75)\n      }),\n      deleteIconSmall: ({ theme }) => ({\n        width: theme.spacing(2),\n        height: theme.spacing(2),\n        margin: theme.spacing(0, 0.5, 0, -0.5)\n      })\n    }\n  },\n  MuiCard: {\n    styleOverrides: {\n      root: {\n        // When cards have a forced size, such as when they are arranged in a\n        // CSS grid, the content needs to flex such that the actions (buttons\n        // etc) end up at the bottom of the card instead of just below the body\n        // contents.\n        display: \"flex\",\n        flexDirection: \"column\"\n      }\n    }\n  },\n  MuiCardHeader: {\n    styleOverrides: {\n      root: {\n        // Reduce padding between header and content\n        paddingBottom: 0\n      }\n    }\n  },\n  MuiCardContent: {\n    styleOverrides: {\n      root: {\n        // When cards have a forced size, such as when they are arranged in a\n        // CSS grid, the content needs to flex such that the actions (buttons\n        // etc) end up at the bottom of the card instead of just below the body\n        // contents.\n        flexGrow: 1,\n        \"&:last-child\": {\n          paddingBottom: void 0\n        }\n      }\n    }\n  },\n  MuiCardActions: {\n    styleOverrides: {\n      root: {\n        // We default to putting the card actions at the end\n        justifyContent: \"flex-end\"\n      }\n    }\n  },\n  MuiLink: {\n    defaultProps: {\n      underline: \"hover\"\n    }\n  }\n};\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _themes;\nclass UnifiedThemeHolder {\n  constructor(v4, v5) {\n    __privateAdd(this, _themes, /* @__PURE__ */ new Map());\n    __privateSet(this, _themes, /* @__PURE__ */ new Map());\n    if (v4) {\n      __privateGet(this, _themes).set(\"v4\", v4);\n    }\n    if (v5) {\n      __privateGet(this, _themes).set(\"v5\", v5);\n    }\n  }\n  getTheme(version) {\n    return __privateGet(this, _themes).get(version);\n  }\n}\n_themes = new WeakMap();\nfunction createUnifiedTheme(options) {\n  const themeOptions = createBaseThemeOptions(options);\n  const components = { ...defaultComponentThemes, ...options.components };\n  const v5Theme = createTheme$1({ ...themeOptions, components });\n  const v4Overrides = transformV5ComponentThemesToV4(v5Theme, components);\n  const v4Theme = { ...createTheme$2(themeOptions), ...v4Overrides };\n  return new UnifiedThemeHolder(v4Theme, v5Theme);\n}\nfunction createUnifiedThemeFromV4(options) {\n  const v5Theme = adaptV4Theme(options);\n  const v4Theme = createTheme$2(options);\n  return new UnifiedThemeHolder(v4Theme, v5Theme);\n}\n\nconst palettes = {\n  light: {\n    type: \"light\",\n    mode: \"light\",\n    background: {\n      default: \"#F8F8F8\",\n      paper: \"#FFFFFF\"\n    },\n    status: {\n      ok: \"#1DB954\",\n      warning: \"#FF9800\",\n      error: \"#E22134\",\n      running: \"#1F5493\",\n      pending: \"#FFED51\",\n      aborted: \"#757575\"\n    },\n    bursts: {\n      fontColor: \"#FEFEFE\",\n      slackChannelText: \"#ddd\",\n      backgroundColor: {\n        default: \"#7C3699\"\n      },\n      gradient: {\n        linear: \"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)\"\n      }\n    },\n    primary: {\n      main: \"#1F5493\"\n    },\n    banner: {\n      info: \"#2E77D0\",\n      error: \"#E22134\",\n      text: \"#FFFFFF\",\n      link: \"#000000\",\n      closeButtonColor: \"#FFFFFF\",\n      warning: \"#FF9800\"\n    },\n    border: \"#E6E6E6\",\n    textContrast: \"#000000\",\n    textVerySubtle: \"#DDD\",\n    textSubtle: \"#6E6E6E\",\n    highlight: \"#FFFBCC\",\n    errorBackground: \"#FFEBEE\",\n    warningBackground: \"#F59B23\",\n    infoBackground: \"#ebf5ff\",\n    errorText: \"#CA001B\",\n    infoText: \"#004e8a\",\n    warningText: \"#000000\",\n    linkHover: \"#2196F3\",\n    link: \"#0A6EBE\",\n    gold: \"#FFD600\",\n    navigation: {\n      background: \"#171717\",\n      indicator: \"#9BF0E1\",\n      color: \"#b5b5b5\",\n      selectedColor: \"#FFF\",\n      navItem: {\n        hoverBackground: \"#404040\"\n      },\n      submenu: {\n        background: \"#404040\"\n      }\n    },\n    pinSidebarButton: {\n      icon: \"#181818\",\n      background: \"#BDBDBD\"\n    },\n    tabbar: {\n      indicator: \"#9BF0E1\"\n    }\n  },\n  dark: {\n    type: \"dark\",\n    mode: \"dark\",\n    background: {\n      default: \"#333333\",\n      paper: \"#424242\"\n    },\n    status: {\n      ok: \"#71CF88\",\n      warning: \"#FFB84D\",\n      error: \"#F84C55\",\n      running: \"#3488E3\",\n      pending: \"#FEF071\",\n      aborted: \"#9E9E9E\"\n    },\n    bursts: {\n      fontColor: \"#FEFEFE\",\n      slackChannelText: \"#ddd\",\n      backgroundColor: {\n        default: \"#7C3699\"\n      },\n      gradient: {\n        linear: \"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)\"\n      }\n    },\n    primary: {\n      main: \"#9CC9FF\",\n      dark: \"#82BAFD\"\n    },\n    secondary: {\n      main: \"#FF88B2\"\n    },\n    banner: {\n      info: \"#2E77D0\",\n      error: \"#E22134\",\n      text: \"#FFFFFF\",\n      link: \"#000000\",\n      closeButtonColor: \"#FFFFFF\",\n      warning: \"#FF9800\"\n    },\n    border: \"#E6E6E6\",\n    textContrast: \"#FFFFFF\",\n    textVerySubtle: \"#727272\",\n    textSubtle: \"#CCCCCC\",\n    highlight: \"#FFFBCC\",\n    errorBackground: \"#FFEBEE\",\n    warningBackground: \"#F59B23\",\n    infoBackground: \"#ebf5ff\",\n    errorText: \"#CA001B\",\n    infoText: \"#004e8a\",\n    warningText: \"#000000\",\n    linkHover: \"#82BAFD\",\n    link: \"#9CC9FF\",\n    gold: \"#FFD600\",\n    navigation: {\n      background: \"#424242\",\n      indicator: \"#9BF0E1\",\n      color: \"#b5b5b5\",\n      selectedColor: \"#FFF\",\n      navItem: {\n        hoverBackground: \"#404040\"\n      },\n      submenu: {\n        background: \"#404040\"\n      }\n    },\n    pinSidebarButton: {\n      icon: \"#404040\",\n      background: \"#BDBDBD\"\n    },\n    tabbar: {\n      indicator: \"#9BF0E1\"\n    }\n  }\n};\n\nconst themes = {\n  light: createUnifiedTheme({ palette: palettes.light }),\n  dark: createUnifiedTheme({ palette: palettes.dark })\n};\n\nunstable_ClassNameGenerator.configure((componentName) => {\n  return `v5-${componentName}`;\n});\n\nconst generateV4ClassName = createGenerateClassName({\n  productionPrefix: \"jss4-\"\n});\nfunction UnifiedThemeProvider(props) {\n  const { children, theme, noCssBaseline = false } = props;\n  const v4Theme = theme.getTheme(\"v4\");\n  const v5Theme = theme.getTheme(\"v5\");\n  let cssBaseline = void 0;\n  if (!noCssBaseline) {\n    cssBaseline = /* @__PURE__ */ React.createElement(CssBaseline, null);\n  }\n  let result = /* @__PURE__ */ React.createElement(React.Fragment, null, cssBaseline, children);\n  if (v4Theme) {\n    result = /* @__PURE__ */ React.createElement(StylesProvider, { generateClassName: generateV4ClassName }, /* @__PURE__ */ React.createElement(ThemeProvider, { theme: v4Theme }, result));\n  }\n  if (v5Theme) {\n    result = /* @__PURE__ */ React.createElement(StyledEngineProvider, { injectFirst: true }, /* @__PURE__ */ React.createElement(ThemeProvider$1, { theme: v5Theme }, result));\n  }\n  return result;\n}\n\nfunction createThemeOptions(options) {\n  var _a, _b, _c, _d;\n  return {\n    props: {\n      MuiGrid: (_b = (_a = defaultComponentThemes) == null ? void 0 : _a.MuiGrid) == null ? void 0 : _b.defaultProps,\n      MuiSwitch: (_d = (_c = defaultComponentThemes) == null ? void 0 : _c.MuiSwitch) == null ? void 0 : _d.defaultProps\n    },\n    ...createBaseThemeOptions(options)\n  };\n}\nfunction createThemeOverrides(theme) {\n  return transformV5ComponentThemesToV4(\n    // Safe but we have to make sure we don't use mui5 specific stuff in the default component themes\n    theme,\n    defaultComponentThemes\n  ).overrides;\n}\nfunction createTheme(options) {\n  const themeOptions = createThemeOptions(options);\n  const baseTheme = createTheme$2(themeOptions);\n  const overrides = createThemeOverrides(baseTheme);\n  const theme = { ...baseTheme, overrides };\n  return theme;\n}\n\nconst lightTheme = createTheme({\n  palette: palettes.light\n});\nconst darkTheme = createTheme({\n  palette: palettes.dark\n});\n\nexport { UnifiedThemeProvider, colorVariants, createBaseThemeOptions, createTheme, createThemeOptions, createThemeOverrides, createUnifiedTheme, createUnifiedThemeFromV4, darkTheme, defaultComponentThemes, genPageTheme, lightTheme, pageTheme, palettes, shapes, themes, transformV5ComponentThemesToV4 };\n//# sourceMappingURL=index.esm.js.map\n","import { UrlPatternDiscovery, AlertApiForwarder, NoOpAnalyticsApi, ErrorAlerter, ErrorApiForwarder, UnhandledErrorForwarder, WebStorage, createFetchApi, FetchMiddlewares, OAuthRequestManager, GoogleAuth, MicrosoftAuth, GithubAuth, OktaAuth, GitlabAuth, OneLoginAuth, BitbucketAuth, BitbucketServerAuth, AtlassianAuth, createSpecializedApp } from '@backstage/core-app-api';\nimport { createApiFactory, discoveryApiRef, configApiRef, alertApiRef, analyticsApiRef, errorApiRef, storageApiRef, fetchApiRef, identityApiRef, oauthRequestApiRef, googleAuthApiRef, microsoftAuthApiRef, githubAuthApiRef, oktaAuthApiRef, gitlabAuthApiRef, oneloginAuthApiRef, bitbucketAuthApiRef, bitbucketServerAuthApiRef, atlassianAuthApiRef } from '@backstage/core-plugin-api';\nimport { permissionApiRef, IdentityPermissionApi } from '@backstage/plugin-permission-react';\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { Progress, ErrorPage, ErrorPanel } from '@backstage/core-components';\nimport { BrowserRouter, useInRouterContext, MemoryRouter } from 'react-router-dom';\nimport MuiApartmentIcon from '@material-ui/icons/Apartment';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport MuiCategoryIcon from '@material-ui/icons/Category';\nimport MuiCreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\nimport MuiSubjectIcon from '@material-ui/icons/Subject';\nimport MuiSearchIcon from '@material-ui/icons/Search';\nimport MuiChatIcon from '@material-ui/icons/Chat';\nimport MuiDashboardIcon from '@material-ui/icons/Dashboard';\nimport MuiDocsIcon from '@material-ui/icons/Description';\nimport MuiEmailIcon from '@material-ui/icons/Email';\nimport MuiExtensionIcon from '@material-ui/icons/Extension';\nimport MuiGitHubIcon from '@material-ui/icons/GitHub';\nimport MuiHelpIcon from '@material-ui/icons/Help';\nimport MuiLocationOnIcon from '@material-ui/icons/LocationOn';\nimport MuiMemoryIcon from '@material-ui/icons/Memory';\nimport MuiMenuBookIcon from '@material-ui/icons/MenuBook';\nimport MuiPeopleIcon from '@material-ui/icons/People';\nimport MuiPersonIcon from '@material-ui/icons/Person';\nimport MuiWarningIcon from '@material-ui/icons/Warning';\nimport MuiWorkIcon from '@material-ui/icons/Work';\nimport MuiFeaturedPlayListIcon from '@material-ui/icons/FeaturedPlayList';\nimport { UnifiedThemeProvider, themes as themes$1 } from '@backstage/theme';\nimport DarkIcon from '@material-ui/icons/Brightness2';\nimport LightIcon from '@material-ui/icons/WbSunny';\n\nconst apis = [\n  createApiFactory({\n    api: discoveryApiRef,\n    deps: { configApi: configApiRef },\n    factory: ({ configApi }) => UrlPatternDiscovery.compile(\n      `${configApi.getString(\"backend.baseUrl\")}/api/{{ pluginId }}`\n    )\n  }),\n  createApiFactory({\n    api: alertApiRef,\n    deps: {},\n    factory: () => new AlertApiForwarder()\n  }),\n  createApiFactory({\n    api: analyticsApiRef,\n    deps: {},\n    factory: () => new NoOpAnalyticsApi()\n  }),\n  createApiFactory({\n    api: errorApiRef,\n    deps: { alertApi: alertApiRef },\n    factory: ({ alertApi }) => {\n      const errorApi = new ErrorAlerter(alertApi, new ErrorApiForwarder());\n      UnhandledErrorForwarder.forward(errorApi, { hidden: false });\n      return errorApi;\n    }\n  }),\n  createApiFactory({\n    api: storageApiRef,\n    deps: { errorApi: errorApiRef },\n    factory: ({ errorApi }) => WebStorage.create({ errorApi })\n  }),\n  createApiFactory({\n    api: fetchApiRef,\n    deps: {\n      configApi: configApiRef,\n      identityApi: identityApiRef,\n      discoveryApi: discoveryApiRef\n    },\n    factory: ({ configApi, identityApi, discoveryApi }) => {\n      return createFetchApi({\n        middleware: [\n          FetchMiddlewares.resolvePluginProtocol({\n            discoveryApi\n          }),\n          FetchMiddlewares.injectIdentityAuth({\n            identityApi,\n            config: configApi\n          })\n        ]\n      });\n    }\n  }),\n  createApiFactory({\n    api: oauthRequestApiRef,\n    deps: {},\n    factory: () => new OAuthRequestManager()\n  }),\n  createApiFactory({\n    api: googleAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GoogleAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: microsoftAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => MicrosoftAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: githubAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GithubAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"read:user\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oktaAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OktaAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: gitlabAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GitlabAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oneloginAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OneLoginAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: bitbucketAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => BitbucketAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"team\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: bitbucketServerAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => BitbucketServerAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"REPO_READ\"]\n    })\n  }),\n  createApiFactory({\n    api: atlassianAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => {\n      return AtlassianAuth.create({\n        configApi,\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString(\"auth.environment\")\n      });\n    }\n  }),\n  createApiFactory({\n    api: permissionApiRef,\n    deps: {\n      discovery: discoveryApiRef,\n      identity: identityApiRef,\n      config: configApiRef\n    },\n    factory: ({ config, discovery, identity }) => IdentityPermissionApi.create({ config, discovery, identity })\n  })\n];\n\nfunction OptionallyWrapInRouter({ children }) {\n  if (useInRouterContext()) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return /* @__PURE__ */ React.createElement(MemoryRouter, null, children);\n}\nconst DefaultNotFoundPage = () => /* @__PURE__ */ React.createElement(ErrorPage, { status: \"404\", statusMessage: \"PAGE NOT FOUND\" });\nconst DefaultBootErrorPage = ({ step, error }) => {\n  let message = \"\";\n  if (step === \"load-config\") {\n    message = `The configuration failed to load, someone should have a look at this error: ${error.message}`;\n  } else if (step === \"load-chunk\") {\n    message = `Lazy loaded chunk failed to load, try to reload the page: ${error.message}`;\n  }\n  return /* @__PURE__ */ React.createElement(OptionallyWrapInRouter, null, /* @__PURE__ */ React.createElement(ErrorPage, { status: \"501\", statusMessage: message }));\n};\nconst DefaultErrorBoundaryFallback = ({\n  error,\n  resetError,\n  plugin\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    ErrorPanel,\n    {\n      title: `Error in ${plugin == null ? void 0 : plugin.getId()}`,\n      defaultExpanded: true,\n      error\n    },\n    /* @__PURE__ */ React.createElement(Button, { variant: \"outlined\", onClick: resetError }, \"Retry\")\n  );\n};\nconst components = {\n  Progress,\n  Router: BrowserRouter,\n  NotFoundErrorPage: DefaultNotFoundPage,\n  BootErrorPage: DefaultBootErrorPage,\n  ErrorBoundaryFallback: DefaultErrorBoundaryFallback\n};\n\nconst icons = {\n  brokenImage: MuiBrokenImageIcon,\n  // To be confirmed: see https://github.com/backstage/backstage/issues/4970\n  catalog: MuiMenuBookIcon,\n  scaffolder: MuiCreateNewFolderIcon,\n  techdocs: MuiSubjectIcon,\n  search: MuiSearchIcon,\n  chat: MuiChatIcon,\n  dashboard: MuiDashboardIcon,\n  docs: MuiDocsIcon,\n  email: MuiEmailIcon,\n  github: MuiGitHubIcon,\n  group: MuiPeopleIcon,\n  help: MuiHelpIcon,\n  \"kind:api\": MuiExtensionIcon,\n  \"kind:component\": MuiMemoryIcon,\n  \"kind:domain\": MuiApartmentIcon,\n  \"kind:group\": MuiPeopleIcon,\n  \"kind:location\": MuiLocationOnIcon,\n  \"kind:system\": MuiCategoryIcon,\n  \"kind:user\": MuiPersonIcon,\n  \"kind:resource\": MuiWorkIcon,\n  \"kind:template\": MuiFeaturedPlayListIcon,\n  user: MuiPersonIcon,\n  warning: MuiWarningIcon\n};\n\nconst themes = [\n  {\n    id: \"light\",\n    title: \"Light Theme\",\n    variant: \"light\",\n    icon: /* @__PURE__ */ React.createElement(LightIcon, null),\n    Provider: ({ children }) => /* @__PURE__ */ React.createElement(UnifiedThemeProvider, { theme: themes$1.light, children })\n  },\n  {\n    id: \"dark\",\n    title: \"Dark Theme\",\n    variant: \"dark\",\n    icon: /* @__PURE__ */ React.createElement(DarkIcon, null),\n    Provider: ({ children }) => /* @__PURE__ */ React.createElement(UnifiedThemeProvider, { theme: themes$1.dark, children })\n  }\n];\n\nfunction createApp(options) {\n  var _a, _b, _c, _d;\n  return createSpecializedApp({\n    ...options,\n    apis: (_a = options == null ? void 0 : options.apis) != null ? _a : [],\n    bindRoutes: options == null ? void 0 : options.bindRoutes,\n    components: {\n      ...components,\n      ...options == null ? void 0 : options.components\n    },\n    configLoader: options == null ? void 0 : options.configLoader,\n    defaultApis: apis,\n    icons: {\n      ...icons,\n      ...options == null ? void 0 : options.icons\n    },\n    plugins: (_b = options == null ? void 0 : options.plugins) != null ? _b : [],\n    featureFlags: (_c = options == null ? void 0 : options.featureFlags) != null ? _c : [],\n    themes: (_d = options == null ? void 0 : options.themes) != null ? _d : themes\n  });\n}\n\nexport { createApp };\n//# sourceMappingURL=index.esm.js.map\n","import { parseEntityRef, stringifyLocationRef, stringifyEntityRef } from '@backstage/catalog-model';\nimport { ResponseError } from '@backstage/errors';\nimport crossFetch from 'cross-fetch';\n\nconst CATALOG_FILTER_EXISTS = Symbol.for(\n  // Random UUID to ensure no collisions\n  \"CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111\"\n);\n\nfunction isQueryEntitiesInitialRequest(request) {\n  return !request.cursor;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass CatalogClient {\n  constructor(options) {\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"fetchApi\");\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi || { fetch: crossFetch };\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntityAncestors}\n   */\n  async getEntityAncestors(request, options) {\n    const { kind, namespace, name } = parseEntityRef(request.entityRef);\n    return await this.requestRequired(\n      \"GET\",\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace\n      )}/${encodeURIComponent(name)}/ancestry`,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.getLocationById}\n   */\n  async getLocationById(id, options) {\n    return await this.requestOptional(\n      \"GET\",\n      `/locations/${encodeURIComponent(id)}`,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntities}\n   */\n  async getEntities(request, options) {\n    const {\n      filter = [],\n      fields = [],\n      order,\n      offset,\n      limit,\n      after\n    } = request != null ? request : {};\n    const params = this.getParams(filter);\n    if (fields.length) {\n      params.push(`fields=${fields.map(encodeURIComponent).join(\",\")}`);\n    }\n    if (order) {\n      for (const directive of [order].flat()) {\n        if (directive) {\n          params.push(\n            `order=${encodeURIComponent(directive.order)}:${encodeURIComponent(\n              directive.field\n            )}`\n          );\n        }\n      }\n    }\n    if (offset !== void 0) {\n      params.push(`offset=${offset}`);\n    }\n    if (limit !== void 0) {\n      params.push(`limit=${limit}`);\n    }\n    if (after !== void 0) {\n      params.push(`after=${encodeURIComponent(after)}`);\n    }\n    const query = params.length ? `?${params.join(\"&\")}` : \"\";\n    const entities = await this.requestRequired(\n      \"GET\",\n      `/entities${query}`,\n      options\n    );\n    const refCompare = (a, b) => {\n      var _a, _b;\n      if (((_a = a.metadata) == null ? void 0 : _a.name) === void 0 || a.kind === void 0 || ((_b = b.metadata) == null ? void 0 : _b.name) === void 0 || b.kind === void 0) {\n        return 0;\n      }\n      const aRef = stringifyEntityRef(a);\n      const bRef = stringifyEntityRef(b);\n      if (aRef < bRef) {\n        return -1;\n      }\n      if (aRef > bRef) {\n        return 1;\n      }\n      return 0;\n    };\n    return { items: entities.sort(refCompare) };\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntitiesByRefs}\n   */\n  async getEntitiesByRefs(request, options) {\n    var _a;\n    const body = { entityRefs: request.entityRefs };\n    if ((_a = request.fields) == null ? void 0 : _a.length) {\n      body.fields = request.fields;\n    }\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"catalog\");\n    const url = `${baseUrl}/entities/by-refs`;\n    const response = await this.fetchApi.fetch(url, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"POST\",\n      body: JSON.stringify(body)\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const { items } = await response.json();\n    return { items: items.map((i) => i != null ? i : void 0) };\n  }\n  /**\n   * {@inheritdoc CatalogApi.queryEntities}\n   */\n  async queryEntities(request = {}, options) {\n    var _a, _b;\n    const params = [];\n    if (isQueryEntitiesInitialRequest(request)) {\n      const {\n        fields = [],\n        filter,\n        limit,\n        orderFields,\n        fullTextFilter\n      } = request;\n      params.push(...this.getParams(filter));\n      if (limit !== void 0) {\n        params.push(`limit=${limit}`);\n      }\n      if (orderFields !== void 0) {\n        (Array.isArray(orderFields) ? orderFields : [orderFields]).forEach(\n          ({ field, order }) => params.push(`orderField=${field},${order}`)\n        );\n      }\n      if (fields.length) {\n        params.push(`fields=${fields.map(encodeURIComponent).join(\",\")}`);\n      }\n      const normalizedFullTextFilterTerm = (_a = fullTextFilter == null ? void 0 : fullTextFilter.term) == null ? void 0 : _a.trim();\n      if (normalizedFullTextFilterTerm) {\n        params.push(`fullTextFilterTerm=${normalizedFullTextFilterTerm}`);\n      }\n      if ((_b = fullTextFilter == null ? void 0 : fullTextFilter.fields) == null ? void 0 : _b.length) {\n        params.push(`fullTextFilterFields=${fullTextFilter.fields.join(\",\")}`);\n      }\n    } else {\n      const { fields = [], limit, cursor } = request;\n      params.push(`cursor=${cursor}`);\n      if (limit !== void 0) {\n        params.push(`limit=${limit}`);\n      }\n      if (fields.length) {\n        params.push(`fields=${fields.map(encodeURIComponent).join(\",\")}`);\n      }\n    }\n    const query = params.length ? `?${params.join(\"&\")}` : \"\";\n    return this.requestRequired(\n      \"GET\",\n      `/entities/by-query${query}`,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntityByRef}\n   */\n  async getEntityByRef(entityRef, options) {\n    const { kind, namespace, name } = parseEntityRef(entityRef);\n    return this.requestOptional(\n      \"GET\",\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace\n      )}/${encodeURIComponent(name)}`,\n      options\n    );\n  }\n  // NOTE(freben): When we deprecate getEntityByName from the interface, we may\n  // still want to leave this implementation in place for quite some time\n  // longer, to minimize the risk for breakages. Suggested date for removal:\n  // August 2022\n  /**\n   * @deprecated Use getEntityByRef instead\n   */\n  async getEntityByName(compoundName, options) {\n    const { kind, namespace = \"default\", name } = compoundName;\n    return this.requestOptional(\n      \"GET\",\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace\n      )}/${encodeURIComponent(name)}`,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.refreshEntity}\n   */\n  async refreshEntity(entityRef, options) {\n    const response = await this.fetchApi.fetch(\n      `${await this.discoveryApi.getBaseUrl(\"catalog\")}/refresh`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n        },\n        method: \"POST\",\n        body: JSON.stringify({ entityRef })\n      }\n    );\n    if (response.status !== 200) {\n      throw new Error(await response.text());\n    }\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntityFacets}\n   */\n  async getEntityFacets(request, options) {\n    const { filter = [], facets } = request;\n    const params = this.getParams(filter);\n    for (const facet of facets) {\n      params.push(`facet=${encodeURIComponent(facet)}`);\n    }\n    const query = params.length ? `?${params.join(\"&\")}` : \"\";\n    return await this.requestOptional(\"GET\", `/entity-facets${query}`, options);\n  }\n  /**\n   * {@inheritdoc CatalogApi.addLocation}\n   */\n  async addLocation(request, options) {\n    const { type = \"url\", target, dryRun } = request;\n    const response = await this.fetchApi.fetch(\n      `${await this.discoveryApi.getBaseUrl(\"catalog\")}/locations${dryRun ? \"?dryRun=true\" : \"\"}`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n        },\n        method: \"POST\",\n        body: JSON.stringify({ type, target })\n      }\n    );\n    if (response.status !== 201) {\n      throw new Error(await response.text());\n    }\n    const { location, entities, exists } = await response.json();\n    if (!location) {\n      throw new Error(`Location wasn't added: ${target}`);\n    }\n    return {\n      location,\n      entities,\n      exists\n    };\n  }\n  /**\n   * {@inheritdoc CatalogApi.getLocationByRef}\n   */\n  async getLocationByRef(locationRef, options) {\n    const all = await this.requestRequired(\n      \"GET\",\n      \"/locations\",\n      options\n    );\n    return all.map((r) => r.data).find((l) => locationRef === stringifyLocationRef(l));\n  }\n  /**\n   * {@inheritdoc CatalogApi.removeLocationById}\n   */\n  async removeLocationById(id, options) {\n    await this.requestIgnored(\n      \"DELETE\",\n      `/locations/${encodeURIComponent(id)}`,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.removeEntityByUid}\n   */\n  async removeEntityByUid(uid, options) {\n    await this.requestIgnored(\n      \"DELETE\",\n      `/entities/by-uid/${encodeURIComponent(uid)}`,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.validateEntity}\n   */\n  async validateEntity(entity, locationRef, options) {\n    const response = await this.fetchApi.fetch(\n      `${await this.discoveryApi.getBaseUrl(\"catalog\")}/validate-entity`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n        },\n        method: \"POST\",\n        body: JSON.stringify({ entity, location: locationRef })\n      }\n    );\n    if (response.ok) {\n      return {\n        valid: true\n      };\n    }\n    if (response.status !== 400) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const { errors = [] } = await response.json();\n    return {\n      valid: false,\n      errors\n    };\n  }\n  //\n  // Private methods\n  //\n  async requestIgnored(method, path, options) {\n    const url = `${await this.discoveryApi.getBaseUrl(\"catalog\")}${path}`;\n    const headers = (options == null ? void 0 : options.token) ? { Authorization: `Bearer ${options.token}` } : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n  }\n  async requestRequired(method, path, options) {\n    const url = `${await this.discoveryApi.getBaseUrl(\"catalog\")}${path}`;\n    const headers = (options == null ? void 0 : options.token) ? { Authorization: `Bearer ${options.token}` } : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return response.json();\n  }\n  async requestOptional(method, path, options) {\n    const url = `${await this.discoveryApi.getBaseUrl(\"catalog\")}${path}`;\n    const headers = (options == null ? void 0 : options.token) ? { Authorization: `Bearer ${options.token}` } : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n    if (!response.ok) {\n      if (response.status === 404) {\n        return void 0;\n      }\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  getParams(filter = []) {\n    const params = [];\n    for (const filterItem of [filter].flat()) {\n      const filterParts = [];\n      for (const [key, value] of Object.entries(filterItem)) {\n        for (const v of [value].flat()) {\n          if (v === CATALOG_FILTER_EXISTS) {\n            filterParts.push(encodeURIComponent(key));\n          } else if (typeof v === \"string\") {\n            filterParts.push(\n              `${encodeURIComponent(key)}=${encodeURIComponent(v)}`\n            );\n          }\n        }\n      }\n      if (filterParts.length) {\n        params.push(`filter=${filterParts.join(\",\")}`);\n      }\n    }\n    return params;\n  }\n}\n\nconst ENTITY_STATUS_CATALOG_PROCESSING_TYPE = \"backstage.io/catalog-processing\";\n\nexport { CATALOG_FILTER_EXISTS, CatalogClient, ENTITY_STATUS_CATALOG_PROCESSING_TYPE };\n//# sourceMappingURL=index.esm.js.map\n","import lodash from 'lodash';\nimport Ajv from 'ajv';\n\nfunction isApiEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"API\";\n}\nfunction isComponentEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"COMPONENT\";\n}\nfunction isDomainEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"DOMAIN\";\n}\nfunction isGroupEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"GROUP\";\n}\nfunction isLocationEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"LOCATION\";\n}\nfunction isResourceEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"RESOURCE\";\n}\nfunction isSystemEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"SYSTEM\";\n}\nfunction isUserEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"USER\";\n}\n\nconst DEFAULT_NAMESPACE = \"default\";\nconst ANNOTATION_VIEW_URL = \"backstage.io/view-url\";\nconst ANNOTATION_EDIT_URL = \"backstage.io/edit-url\";\nconst ANNOTATION_KUBERNETES_API_SERVER = \"kubernetes.io/api-server\";\nconst ANNOTATION_KUBERNETES_API_SERVER_CA = \"kubernetes.io/api-server-certificate-authority\";\nconst ANNOTATION_KUBERNETES_AUTH_PROVIDER = \"kubernetes.io/auth-provider\";\n\nvar __defProp$4 = Object.defineProperty;\nvar __defNormalProp$4 = (obj, key, value) => key in obj ? __defProp$4(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$4 = (obj, key, value) => {\n  __defNormalProp$4(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass DefaultNamespaceEntityPolicy {\n  constructor(namespace = DEFAULT_NAMESPACE) {\n    __publicField$4(this, \"namespace\");\n    this.namespace = namespace;\n  }\n  async enforce(entity) {\n    if (entity.metadata.namespace) {\n      return entity;\n    }\n    return lodash.merge({ metadata: { namespace: this.namespace } }, entity);\n  }\n}\n\nfunction parseRefString(ref) {\n  let colonI = ref.indexOf(\":\");\n  const slashI = ref.indexOf(\"/\");\n  if (slashI !== -1 && slashI < colonI) {\n    colonI = -1;\n  }\n  const kind = colonI === -1 ? void 0 : ref.slice(0, colonI);\n  const namespace = slashI === -1 ? void 0 : ref.slice(colonI + 1, slashI);\n  const name = ref.slice(Math.max(colonI + 1, slashI + 1));\n  if (kind === \"\" || namespace === \"\" || name === \"\") {\n    throw new TypeError(\n      `Entity reference \"${ref}\" was not on the form [<kind>:][<namespace>/]<name>`\n    );\n  }\n  return { kind, namespace, name };\n}\nfunction getCompoundEntityRef(entity) {\n  return {\n    kind: entity.kind,\n    namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n    name: entity.metadata.name\n  };\n}\nfunction parseEntityRef(ref, context) {\n  var _a, _b, _c, _d;\n  if (!ref) {\n    throw new Error(`Entity reference must not be empty`);\n  }\n  const defaultKind = context == null ? void 0 : context.defaultKind;\n  const defaultNamespace = (context == null ? void 0 : context.defaultNamespace) || DEFAULT_NAMESPACE;\n  let kind;\n  let namespace;\n  let name;\n  if (typeof ref === \"string\") {\n    const parsed = parseRefString(ref);\n    kind = (_a = parsed.kind) != null ? _a : defaultKind;\n    namespace = (_b = parsed.namespace) != null ? _b : defaultNamespace;\n    name = parsed.name;\n  } else {\n    kind = (_c = ref.kind) != null ? _c : defaultKind;\n    namespace = (_d = ref.namespace) != null ? _d : defaultNamespace;\n    name = ref.name;\n  }\n  if (!kind) {\n    const textual = JSON.stringify(ref);\n    throw new Error(\n      `Entity reference ${textual} had missing or empty kind (e.g. did not start with \"component:\" or similar)`\n    );\n  } else if (!namespace) {\n    const textual = JSON.stringify(ref);\n    throw new Error(\n      `Entity reference ${textual} had missing or empty namespace`\n    );\n  } else if (!name) {\n    const textual = JSON.stringify(ref);\n    throw new Error(`Entity reference ${textual} had missing or empty name`);\n  }\n  return { kind, namespace, name };\n}\nfunction stringifyEntityRef(ref) {\n  var _a, _b;\n  let kind;\n  let namespace;\n  let name;\n  if (\"metadata\" in ref) {\n    kind = ref.kind;\n    namespace = (_a = ref.metadata.namespace) != null ? _a : DEFAULT_NAMESPACE;\n    name = ref.metadata.name;\n  } else {\n    kind = ref.kind;\n    namespace = (_b = ref.namespace) != null ? _b : DEFAULT_NAMESPACE;\n    name = ref.name;\n  }\n  return `${kind.toLocaleLowerCase(\"en-US\")}:${namespace.toLocaleLowerCase(\n    \"en-US\"\n  )}/${name.toLocaleLowerCase(\"en-US\")}`;\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass GroupDefaultParentEntityPolicy {\n  constructor(parentEntityRef) {\n    __publicField$3(this, \"parentRef\");\n    const { kind, namespace, name } = parseEntityRef(parentEntityRef, {\n      defaultKind: \"Group\",\n      defaultNamespace: DEFAULT_NAMESPACE\n    });\n    if (kind.toLocaleUpperCase(\"en-US\") !== \"GROUP\") {\n      throw new TypeError(\"group parent must be a group\");\n    }\n    this.parentRef = stringifyEntityRef({\n      kind,\n      namespace,\n      name\n    });\n  }\n  async enforce(entity) {\n    if (entity.kind !== \"Group\") {\n      return entity;\n    }\n    const group = entity;\n    if (group.spec.parent) {\n      return group;\n    }\n    if (stringifyEntityRef(group) !== this.parentRef) {\n      group.spec.parent = this.parentRef;\n    }\n    return group;\n  }\n}\n\nclass CommonValidatorFunctions {\n  /**\n   * Checks that the value is on the form `<suffix>` or `<prefix><separator><suffix>`, and validates\n   * those parts separately.\n   *\n   * @param value - The value to check\n   * @param separator - The separator between parts\n   * @param isValidPrefix - Checks that the part before the separator is valid, if present\n   * @param isValidSuffix - Checks that the part after the separator (or the entire value if there is no separator) is valid\n   */\n  static isValidPrefixAndOrSuffix(value, separator, isValidPrefix, isValidSuffix) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    const parts = value.split(separator);\n    if (parts.length === 1) {\n      return isValidSuffix(parts[0]);\n    } else if (parts.length === 2) {\n      return isValidPrefix(parts[0]) && isValidSuffix(parts[1]);\n    }\n    return false;\n  }\n  /**\n   * Checks that the value can be safely transferred as JSON.\n   *\n   * @param value - The value to check\n   */\n  static isJsonSafe(value) {\n    try {\n      return lodash.isEqual(value, JSON.parse(JSON.stringify(value)));\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * Checks that the value is a valid DNS subdomain name.\n   *\n   * @param value - The value to check\n   * @see https://tools.ietf.org/html/rfc1123\n   */\n  static isValidDnsSubdomain(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 253 && value.split(\".\").every(CommonValidatorFunctions.isValidDnsLabel);\n  }\n  /**\n   * Checks that the value is a valid DNS label.\n   *\n   * @param value - The value to check\n   * @see https://tools.ietf.org/html/rfc1123\n   */\n  static isValidDnsLabel(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9]+(?:\\-+[a-z0-9]+)*$/.test(value);\n  }\n  /**\n   * Checks that the value is a valid tag.\n   *\n   * @deprecated This will be removed in a future release\n   * @param value - The value to check\n   */\n  static isValidTag(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9+#]+(\\-[a-z0-9+#]+)*$/.test(value);\n  }\n  /**\n   * Checks that the value is a valid string URL.\n   *\n   * @param value - The value to check\n   */\n  static isValidUrl(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    try {\n      new URL(value);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * Checks that the value is a non empty string value.\n   *\n   * @deprecated use isNonEmptyString instead\n   * @param value - The value to check\n   */\n  static isValidString(value) {\n    var _a;\n    return typeof value === \"string\" && ((_a = value == null ? void 0 : value.trim()) == null ? void 0 : _a.length) >= 1;\n  }\n  /**\n   * Checks that the value is a string value that's not empty.\n   *\n   * @param value - The value to check\n   */\n  static isNonEmptyString(value) {\n    var _a;\n    return typeof value === \"string\" && ((_a = value == null ? void 0 : value.trim()) == null ? void 0 : _a.length) >= 1;\n  }\n}\n\nvar $schema$b = \"http://json-schema.org/draft-07/schema\";\nvar $id$b = \"EntityEnvelope\";\nvar description$b = \"The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.\";\nvar examples$a = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\"\n\t\t}\n\t}\n];\nvar type$3 = \"object\";\nvar required$2 = [\n\t\"apiVersion\",\n\t\"kind\",\n\t\"metadata\"\n];\nvar additionalProperties$2 = true;\nvar properties$2 = {\n\tapiVersion: {\n\t\ttype: \"string\",\n\t\tdescription: \"The version of specification format for this particular entity that this is written against.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\"my-company.net/v1\",\n\t\t\t\"1.0\"\n\t\t]\n\t},\n\tkind: {\n\t\ttype: \"string\",\n\t\tdescription: \"The high level entity type being described.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"API\",\n\t\t\t\"Component\",\n\t\t\t\"Domain\",\n\t\t\t\"Group\",\n\t\t\t\"Location\",\n\t\t\t\"Resource\",\n\t\t\t\"System\",\n\t\t\t\"Template\",\n\t\t\t\"User\"\n\t\t]\n\t},\n\tmetadata: {\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"name\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"metadata-proxy\"\n\t\t\t\t],\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tnamespace: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The namespace that the entity belongs to.\",\n\t\t\t\t\"default\": \"default\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"default\",\n\t\t\t\t\t\"admin\"\n\t\t\t\t],\n\t\t\t\tminLength: 1\n\t\t\t}\n\t\t}\n\t}\n};\nvar entityEnvelopeSchema = {\n\t$schema: $schema$b,\n\t$id: $id$b,\n\tdescription: description$b,\n\texamples: examples$a,\n\ttype: type$3,\n\trequired: required$2,\n\tadditionalProperties: additionalProperties$2,\n\tproperties: properties$2\n};\n\nvar $schema$a = \"http://json-schema.org/draft-07/schema\";\nvar $id$a = \"Entity\";\nvar description$a = \"The parts of the format that's common to all versions/kinds of entity.\";\nvar examples$9 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\",\n\t\t\tdescription: \"Creates Lorems like a pro.\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"service\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"tools\"\n\t\t}\n\t}\n];\nvar type$2 = \"object\";\nvar required$1 = [\n\t\"apiVersion\",\n\t\"kind\",\n\t\"metadata\"\n];\nvar additionalProperties$1 = false;\nvar properties$1 = {\n\tapiVersion: {\n\t\ttype: \"string\",\n\t\tdescription: \"The version of specification format for this particular entity that this is written against.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\"my-company.net/v1\",\n\t\t\t\"1.0\"\n\t\t]\n\t},\n\tkind: {\n\t\ttype: \"string\",\n\t\tdescription: \"The high level entity type being described.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"API\",\n\t\t\t\"Component\",\n\t\t\t\"Domain\",\n\t\t\t\"Group\",\n\t\t\t\"Location\",\n\t\t\t\"Resource\",\n\t\t\t\"System\",\n\t\t\t\"Template\",\n\t\t\t\"User\"\n\t\t]\n\t},\n\tmetadata: {\n\t\t$ref: \"EntityMeta\"\n\t},\n\tspec: {\n\t\ttype: \"object\",\n\t\tdescription: \"The specification data describing the entity itself.\"\n\t},\n\trelations: {\n\t\ttype: \"array\",\n\t\tdescription: \"The relations that this entity has with other entities.\",\n\t\titems: {\n\t\t\t$ref: \"common#relation\"\n\t\t}\n\t},\n\tstatus: {\n\t\t$ref: \"common#status\"\n\t}\n};\nvar entitySchema = {\n\t$schema: $schema$a,\n\t$id: $id$a,\n\tdescription: description$a,\n\texamples: examples$9,\n\ttype: type$2,\n\trequired: required$1,\n\tadditionalProperties: additionalProperties$1,\n\tproperties: properties$1\n};\n\nvar $schema$9 = \"http://json-schema.org/draft-07/schema\";\nvar $id$9 = \"EntityMeta\";\nvar description$9 = \"Metadata fields common to all versions/kinds of entity.\";\nvar examples$8 = [\n\t{\n\t\tuid: \"e01199ab-08cc-44c2-8e19-5c29ded82521\",\n\t\tetag: \"lsndfkjsndfkjnsdfkjnsd==\",\n\t\tname: \"my-component-yay\",\n\t\tnamespace: \"the-namespace\",\n\t\tlabels: {\n\t\t\t\"backstage.io/custom\": \"ValueStuff\"\n\t\t},\n\t\tannotations: {\n\t\t\t\"example.com/bindings\": \"are-secret\"\n\t\t},\n\t\ttags: [\n\t\t\t\"java\",\n\t\t\t\"data\"\n\t\t]\n\t}\n];\nvar type$1 = \"object\";\nvar required = [\n\t\"name\"\n];\nvar additionalProperties = true;\nvar properties = {\n\tuid: {\n\t\ttype: \"string\",\n\t\tdescription: \"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.\",\n\t\texamples: [\n\t\t\t\"e01199ab-08cc-44c2-8e19-5c29ded82521\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tetag: {\n\t\ttype: \"string\",\n\t\tdescription: \"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.\",\n\t\texamples: [\n\t\t\t\"lsndfkjsndfkjnsdfkjnsd==\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tname: {\n\t\ttype: \"string\",\n\t\tdescription: \"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.\",\n\t\texamples: [\n\t\t\t\"metadata-proxy\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tnamespace: {\n\t\ttype: \"string\",\n\t\tdescription: \"The namespace that the entity belongs to.\",\n\t\t\"default\": \"default\",\n\t\texamples: [\n\t\t\t\"default\",\n\t\t\t\"admin\"\n\t\t],\n\t\tminLength: 1\n\t},\n\ttitle: {\n\t\ttype: \"string\",\n\t\tdescription: \"A display name of the entity, to be presented in user interfaces instead of the name property, when available.\",\n\t\texamples: [\n\t\t\t\"React SSR Template\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tdescription: {\n\t\ttype: \"string\",\n\t\tdescription: \"A short (typically relatively few words, on one line) description of the entity.\"\n\t},\n\tlabels: {\n\t\ttype: \"object\",\n\t\tdescription: \"Key/value pairs of identifying information attached to the entity.\",\n\t\tadditionalProperties: true,\n\t\tpatternProperties: {\n\t\t\t\"^.+$\": {\n\t\t\t\ttype: \"string\"\n\t\t\t}\n\t\t}\n\t},\n\tannotations: {\n\t\ttype: \"object\",\n\t\tdescription: \"Key/value pairs of non-identifying auxiliary information attached to the entity.\",\n\t\tadditionalProperties: true,\n\t\tpatternProperties: {\n\t\t\t\"^.+$\": {\n\t\t\t\ttype: \"string\"\n\t\t\t}\n\t\t}\n\t},\n\ttags: {\n\t\ttype: \"array\",\n\t\tdescription: \"A list of single-valued strings, to for example classify catalog entities in various ways.\",\n\t\titems: {\n\t\t\ttype: \"string\",\n\t\t\tminLength: 1\n\t\t}\n\t},\n\tlinks: {\n\t\ttype: \"array\",\n\t\tdescription: \"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.\",\n\t\titems: {\n\t\t\ttype: \"object\",\n\t\t\trequired: [\n\t\t\t\t\"url\"\n\t\t\t],\n\t\t\tproperties: {\n\t\t\t\turl: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A url in a standard uri format.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"https://admin.example-org.com\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A user friendly display name for the link.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"Admin Dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ticon: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A key representing a visual icon to be displayed in the UI.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ttype: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"An optional value to categorize links into specific groups.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"runbook\",\n\t\t\t\t\t\t\"documentation\",\n\t\t\t\t\t\t\"logs\",\n\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\nvar entityMetaSchema = {\n\t$schema: $schema$9,\n\t$id: $id$9,\n\tdescription: description$9,\n\texamples: examples$8,\n\ttype: type$1,\n\trequired: required,\n\tadditionalProperties: additionalProperties,\n\tproperties: properties\n};\n\nvar $schema$8 = \"http://json-schema.org/draft-07/schema\";\nvar $id$8 = \"common\";\nvar type = \"object\";\nvar description$8 = \"Common definitions to import from other schemas\";\nvar definitions = {\n\treference: {\n\t\t$id: \"#reference\",\n\t\ttype: \"object\",\n\t\tdescription: \"A reference by name to another entity.\",\n\t\trequired: [\n\t\t\t\"kind\",\n\t\t\t\"namespace\",\n\t\t\t\"name\"\n\t\t],\n\t\tadditionalProperties: false,\n\t\tproperties: {\n\t\t\tkind: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The kind field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tnamespace: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The metadata.namespace field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The metadata.name field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t}\n\t\t}\n\t},\n\trelation: {\n\t\t$id: \"#relation\",\n\t\ttype: \"object\",\n\t\tdescription: \"A directed relation from one entity to another.\",\n\t\trequired: [\n\t\t\t\"type\",\n\t\t\t\"targetRef\"\n\t\t],\n\t\tadditionalProperties: false,\n\t\tproperties: {\n\t\t\ttype: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1,\n\t\t\t\tpattern: \"^\\\\w+$\",\n\t\t\t\tdescription: \"The type of relation.\"\n\t\t\t},\n\t\t\ttarget: {\n\t\t\t\t$ref: \"#reference\",\n\t\t\t\tdeprecated: true\n\t\t\t},\n\t\t\ttargetRef: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1,\n\t\t\t\tdescription: \"The entity ref of the target of this relation.\"\n\t\t\t}\n\t\t}\n\t},\n\tstatus: {\n\t\t$id: \"#status\",\n\t\ttype: \"object\",\n\t\tdescription: \"The current status of the entity, as claimed by various sources.\",\n\t\trequired: [\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\titems: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\t$ref: \"#statusItem\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tstatusItem: {\n\t\t$id: \"#statusItem\",\n\t\ttype: \"object\",\n\t\tdescription: \"A specific status item on a well known format.\",\n\t\trequired: [\n\t\t\t\"type\",\n\t\t\t\"level\",\n\t\t\t\"message\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\ttype: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tlevel: {\n\t\t\t\t$ref: \"#statusLevel\",\n\t\t\t\tdescription: \"The status level / severity of the status item.\"\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"A brief message describing the status, intended for human consumption.\"\n\t\t\t},\n\t\t\terror: {\n\t\t\t\t$ref: \"#error\",\n\t\t\t\tdescription: \"An optional serialized error object related to the status.\"\n\t\t\t}\n\t\t}\n\t},\n\tstatusLevel: {\n\t\t$id: \"#statusLevel\",\n\t\ttype: \"string\",\n\t\tdescription: \"A status level / severity.\",\n\t\t\"enum\": [\n\t\t\t\"info\",\n\t\t\t\"warning\",\n\t\t\t\"error\"\n\t\t]\n\t},\n\terror: {\n\t\t$id: \"#error\",\n\t\ttype: \"object\",\n\t\tdescription: \"A serialized error object.\",\n\t\trequired: [\n\t\t\t\"name\",\n\t\t\t\"message\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"Error\",\n\t\t\t\t\t\"InputError\"\n\t\t\t\t],\n\t\t\t\tdescription: \"The type name of the error\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The message of the error\"\n\t\t\t},\n\t\t\tcode: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"An error code associated with the error\"\n\t\t\t},\n\t\t\tstack: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"An error stack trace\"\n\t\t\t}\n\t\t}\n\t}\n};\nvar commonSchema = {\n\t$schema: $schema$8,\n\t$id: $id$8,\n\ttype: type,\n\tdescription: description$8,\n\tdefinitions: definitions\n};\n\nconst compiledSchemaCache = /* @__PURE__ */ new Map();\nconst refDependencyCandidates = [\n  entityEnvelopeSchema,\n  entitySchema,\n  entityMetaSchema,\n  commonSchema\n];\nfunction throwAjvError(errors) {\n  if (!(errors == null ? void 0 : errors.length)) {\n    throw new TypeError(\"Unknown error\");\n  }\n  const error = errors[0];\n  throw new TypeError(\n    `${error.instancePath || \"<root>\"} ${error.message}${error.params ? ` - ${Object.entries(error.params).map(([key, val]) => `${key}: ${val}`).join(\", \")}` : \"\"}`\n  );\n}\nfunction compileAjvSchema(schema, options = {}) {\n  var _a;\n  const disableCache = (_a = options == null ? void 0 : options.disableCache) != null ? _a : false;\n  const cacheKey = disableCache ? \"\" : JSON.stringify(schema);\n  if (!disableCache) {\n    const cached = compiledSchemaCache.get(cacheKey);\n    if (cached) {\n      return cached;\n    }\n  }\n  const extraSchemas = getExtraSchemas(schema);\n  const ajv = new Ajv({\n    allowUnionTypes: true,\n    allErrors: true,\n    validateSchema: true\n  });\n  if (extraSchemas.length) {\n    ajv.addSchema(extraSchemas, void 0, void 0, true);\n  }\n  const compiled = ajv.compile(schema);\n  if (!disableCache) {\n    compiledSchemaCache.set(cacheKey, compiled);\n  }\n  return compiled;\n}\nfunction getExtraSchemas(schema) {\n  if (typeof schema !== \"object\") {\n    return [];\n  }\n  const seen = /* @__PURE__ */ new Set();\n  if (schema.$id) {\n    seen.add(schema.$id);\n  }\n  const selected = new Array();\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n    for (const ref of getAllRefs(current)) {\n      if (!seen.has(ref)) {\n        seen.add(ref);\n        const match = refDependencyCandidates.find((c) => c.$id === ref);\n        if (match) {\n          selected.push(match);\n          todo.push(match);\n        }\n      }\n    }\n  }\n  return selected;\n}\nfunction* getAllRefs(schema) {\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n    if (typeof current === \"object\" && current) {\n      for (const [key, value] of Object.entries(current)) {\n        if (key === \"$ref\" && typeof value === \"string\") {\n          yield value.split(\"#\")[0];\n        } else {\n          todo.push(value);\n        }\n      }\n    }\n  }\n}\n\nfunction entityEnvelopeSchemaValidator(schema) {\n  const validate = compileAjvSchema(\n    schema ? schema : entityEnvelopeSchema\n  );\n  return (data) => {\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nfunction entityKindSchemaValidator(schema) {\n  const validate = compileAjvSchema(schema);\n  return (data) => {\n    var _a;\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    const softCandidates = (_a = validate.errors) == null ? void 0 : _a.filter(\n      (e) => [\"/kind\", \"/apiVersion\"].includes(e.instancePath)\n    );\n    if ((softCandidates == null ? void 0 : softCandidates.length) && softCandidates.every((e) => e.keyword === \"enum\")) {\n      return false;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nfunction entitySchemaValidator(schema) {\n  const validate = compileAjvSchema(schema ? schema : entitySchema);\n  return (data) => {\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nclass KubernetesValidatorFunctions {\n  static isValidApiVersion(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      \"/\",\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      (n) => n.length >= 1 && n.length <= 63 && /^[a-z0-9A-Z]+$/.test(n)\n    );\n  }\n  static isValidKind(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-zA-Z][a-z0-9A-Z]*$/.test(value);\n  }\n  static isValidObjectName(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(value);\n  }\n  static isValidNamespace(value) {\n    return CommonValidatorFunctions.isValidDnsLabel(value);\n  }\n  static isValidLabelKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      \"/\",\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName\n    );\n  }\n  static isValidLabelValue(value) {\n    return value === \"\" || KubernetesValidatorFunctions.isValidObjectName(value);\n  }\n  static isValidAnnotationKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      \"/\",\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName\n    );\n  }\n  static isValidAnnotationValue(value) {\n    return typeof value === \"string\";\n  }\n}\n\nconst defaultValidators = {\n  isValidApiVersion: KubernetesValidatorFunctions.isValidApiVersion,\n  isValidKind: KubernetesValidatorFunctions.isValidKind,\n  isValidEntityName: KubernetesValidatorFunctions.isValidObjectName,\n  isValidNamespace: KubernetesValidatorFunctions.isValidNamespace,\n  isValidLabelKey: KubernetesValidatorFunctions.isValidLabelKey,\n  isValidLabelValue: KubernetesValidatorFunctions.isValidLabelValue,\n  isValidAnnotationKey: KubernetesValidatorFunctions.isValidAnnotationKey,\n  isValidAnnotationValue: KubernetesValidatorFunctions.isValidAnnotationValue,\n  isValidTag: (value) => {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9:+#]+(\\-[a-z0-9:+#]+)*$/.test(value);\n  }\n};\nfunction makeValidator(overrides = {}) {\n  return {\n    ...defaultValidators,\n    ...overrides\n  };\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass FieldFormatEntityPolicy {\n  constructor(validators = makeValidator()) {\n    __publicField$2(this, \"validators\");\n    this.validators = validators;\n  }\n  async enforce(entity) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    function require2(field, value, validator) {\n      if (value === void 0 || value === null) {\n        throw new Error(`${field} must have a value`);\n      }\n      let isValid;\n      try {\n        isValid = validator(value);\n      } catch (e) {\n        throw new Error(`${field} could not be validated, ${e}`);\n      }\n      if (!isValid) {\n        let expectation;\n        switch (validator.name) {\n          case \"isValidLabelValue\":\n          case \"isValidObjectName\":\n            expectation = \"a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total\";\n            break;\n          case \"isValidLabelKey\":\n          case \"isValidApiVersion\":\n          case \"isValidAnnotationKey\":\n            expectation = \"a valid prefix and/or suffix\";\n            break;\n          case \"isValidNamespace\":\n          case \"isValidDnsLabel\":\n            expectation = \"a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total\";\n            break;\n          case \"isValidTag\":\n            expectation = \"a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total\";\n            break;\n          case \"isValidAnnotationValue\":\n            expectation = \"a string\";\n            break;\n          case \"isValidKind\":\n            expectation = \"a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total\";\n            break;\n          case \"isValidUrl\":\n            expectation = \"a string that is a valid url\";\n            break;\n          case \"isValidString\":\n          case \"isNonEmptyString\":\n            expectation = \"a non empty string\";\n            break;\n          default:\n            expectation = void 0;\n            break;\n        }\n        const message = expectation ? ` expected ${expectation} but found \"${value}\".` : \"\";\n        throw new Error(\n          `\"${field}\" is not valid;${message} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`\n        );\n      }\n    }\n    function optional(field, value, validator) {\n      return value === void 0 || require2(field, value, validator);\n    }\n    require2(\"apiVersion\", entity.apiVersion, this.validators.isValidApiVersion);\n    require2(\"kind\", entity.kind, this.validators.isValidKind);\n    require2(\"metadata.name\", entity.metadata.name, this.validators.isValidEntityName);\n    optional(\n      \"metadata.namespace\",\n      entity.metadata.namespace,\n      this.validators.isValidNamespace\n    );\n    for (const [k, v] of Object.entries((_a = entity.metadata.labels) != null ? _a : [])) {\n      require2(`labels.${k}`, k, this.validators.isValidLabelKey);\n      require2(`labels.${k}`, v, this.validators.isValidLabelValue);\n    }\n    for (const [k, v] of Object.entries((_b = entity.metadata.annotations) != null ? _b : [])) {\n      require2(`annotations.${k}`, k, this.validators.isValidAnnotationKey);\n      require2(`annotations.${k}`, v, this.validators.isValidAnnotationValue);\n    }\n    const tags = (_c = entity.metadata.tags) != null ? _c : [];\n    for (let i = 0; i < tags.length; ++i) {\n      require2(`tags.${i}`, tags[i], this.validators.isValidTag);\n    }\n    const links = (_d = entity.metadata.links) != null ? _d : [];\n    for (let i = 0; i < links.length; ++i) {\n      require2(`links.${i}.url`, (_e = links[i]) == null ? void 0 : _e.url, CommonValidatorFunctions.isValidUrl);\n      optional(\n        `links.${i}.title`,\n        (_f = links[i]) == null ? void 0 : _f.title,\n        CommonValidatorFunctions.isNonEmptyString\n      );\n      optional(\n        `links.${i}.icon`,\n        (_g = links[i]) == null ? void 0 : _g.icon,\n        KubernetesValidatorFunctions.isValidObjectName\n      );\n    }\n    return entity;\n  }\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst defaultKnownFields = [\"apiVersion\", \"kind\", \"metadata\", \"spec\"];\nclass NoForeignRootFieldsEntityPolicy {\n  constructor(knownFields = defaultKnownFields) {\n    __publicField$1(this, \"knownFields\");\n    this.knownFields = knownFields;\n  }\n  async enforce(entity) {\n    for (const field of Object.keys(entity)) {\n      if (!this.knownFields.includes(field)) {\n        throw new Error(`Unknown field ${field}`);\n      }\n    }\n    return entity;\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass SchemaValidEntityPolicy {\n  constructor() {\n    __publicField(this, \"validate\");\n  }\n  async enforce(entity) {\n    if (!this.validate) {\n      const ajv = new Ajv({ allowUnionTypes: true });\n      this.validate = ajv.addSchema([commonSchema, entityMetaSchema], void 0, void 0, true).compile(entitySchema);\n    }\n    const result = this.validate(entity);\n    if (result === true) {\n      return entity;\n    }\n    const [error] = this.validate.errors || [];\n    if (!error) {\n      throw new Error(`Malformed envelope, Unknown error`);\n    }\n    throw new Error(\n      `Malformed envelope, ${error.instancePath || \"<root>\"} ${error.message}`\n    );\n  }\n}\n\nclass AllEntityPolicies {\n  constructor(policies) {\n    this.policies = policies;\n  }\n  async enforce(entity) {\n    let result = entity;\n    for (const policy of this.policies) {\n      const output = await policy.enforce(result);\n      if (!output) {\n        throw new Error(\n          `Policy ${policy.constructor.name} did not return a result`\n        );\n      }\n      result = output;\n    }\n    return result;\n  }\n}\nclass AnyEntityPolicy {\n  constructor(policies) {\n    this.policies = policies;\n  }\n  async enforce(entity) {\n    for (const policy of this.policies) {\n      const output = await policy.enforce(entity);\n      if (output) {\n        return output;\n      }\n    }\n    throw new Error(`The entity did not match any known policy`);\n  }\n}\nconst EntityPolicies = {\n  allOf(policies) {\n    return new AllEntityPolicies(policies);\n  },\n  oneOf(policies) {\n    return new AnyEntityPolicy(policies);\n  }\n};\n\nvar $schema$7 = \"http://json-schema.org/draft-07/schema\";\nvar $id$7 = \"ApiV1alpha1\";\nvar description$7 = \"An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.\";\nvar examples$7 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"API\",\n\t\tmetadata: {\n\t\t\tname: \"artist-api\",\n\t\t\tdescription: \"Retrieve artist details\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"openapi\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"artist-relations-team\",\n\t\t\tsystem: \"artist-engagement-portal\",\n\t\t\tdefinition: \"openapi: \\\"3.0.0\\\"\\ninfo:...\"\n\t\t}\n\t}\n];\nvar allOf$7 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"API\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"lifecycle\",\n\t\t\t\t\t\"owner\",\n\t\t\t\t\t\"definition\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of the API definition.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"openapi\",\n\t\t\t\t\t\t\t\"asyncapi\",\n\t\t\t\t\t\t\t\"graphql\",\n\t\t\t\t\t\t\t\"grpc\",\n\t\t\t\t\t\t\t\"trpc\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tlifecycle: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The lifecycle state of the API.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"experimental\",\n\t\t\t\t\t\t\t\"production\",\n\t\t\t\t\t\t\t\"deprecated\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the API.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the API belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdefinition: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The definition of the API, based on the format defined by the type.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$7 = {\n\t$schema: $schema$7,\n\t$id: $id$7,\n\tdescription: description$7,\n\texamples: examples$7,\n\tallOf: allOf$7\n};\n\nfunction ajvCompiledJsonSchemaValidator(schema) {\n  let validator;\n  return {\n    async check(data) {\n      if (!validator) {\n        validator = entityKindSchemaValidator(schema);\n      }\n      return validator(data) === data;\n    }\n  };\n}\n\nconst apiEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$7);\n\nvar $schema$6 = \"http://json-schema.org/draft-07/schema\";\nvar $id$6 = \"ComponentV1alpha1\";\nvar description$6 = \"A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a \\\"unit of software\\\", usually with a distinct deployable or linkable artifact.\";\nvar examples$6 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\",\n\t\t\tdescription: \"Creates Lorems like a pro.\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"service\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"tools\"\n\t\t}\n\t}\n];\nvar allOf$6 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Component\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"lifecycle\",\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"service\",\n\t\t\t\t\t\t\t\"website\",\n\t\t\t\t\t\t\t\"library\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tlifecycle: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The lifecycle state of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"experimental\",\n\t\t\t\t\t\t\t\"production\",\n\t\t\t\t\t\t\t\"deprecated\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the component belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsubcomponentOf: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to another component of which the component is a part.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tprovidesApis: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of entity references to the APIs that are provided by the component.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tconsumesApis: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of entity references to the APIs that are consumed by the component.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdependsOn: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of references to other entities that the component depends on to function.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$6 = {\n\t$schema: $schema$6,\n\t$id: $id$6,\n\tdescription: description$6,\n\texamples: examples$6,\n\tallOf: allOf$6\n};\n\nconst componentEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$6);\n\nvar $schema$5 = \"http://json-schema.org/draft-07/schema\";\nvar $id$5 = \"DomainV1alpha1\";\nvar description$5 = \"A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.\";\nvar examples$5 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Domain\",\n\t\tmetadata: {\n\t\t\tname: \"artists\",\n\t\t\tdescription: \"Everything about artists\"\n\t\t},\n\t\tspec: {\n\t\t\towner: \"artist-relations-team\"\n\t\t}\n\t}\n];\nvar allOf$5 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Domain\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$5 = {\n\t$schema: $schema$5,\n\t$id: $id$5,\n\tdescription: description$5,\n\texamples: examples$5,\n\tallOf: allOf$5\n};\n\nconst domainEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$5);\n\nvar $schema$4 = \"http://json-schema.org/draft-07/schema\";\nvar $id$4 = \"GroupV1alpha1\";\nvar description$4 = \"A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.\";\nvar examples$4 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Group\",\n\t\tmetadata: {\n\t\t\tname: \"infrastructure\",\n\t\t\tdescription: \"The infra business unit\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"business-unit\",\n\t\t\tprofile: {\n\t\t\t\tdisplayName: \"Infrastructure\",\n\t\t\t\temail: \"infrastructure@example.com\",\n\t\t\t\tpicture: \"https://example.com/groups/bu-infrastructure.jpeg\"\n\t\t\t},\n\t\t\tparent: \"ops\",\n\t\t\tchildren: [\n\t\t\t\t\"backstage\",\n\t\t\t\t\"other\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf$4 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Group\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"children\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"team\",\n\t\t\t\t\t\t\t\"business-unit\",\n\t\t\t\t\t\t\t\"product-area\",\n\t\t\t\t\t\t\t\"root\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tprofile: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tdisplayName: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"A simple display name to present to users.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"Infrastructure\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"An email where this entity can be reached.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"infrastructure@example.com\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpicture: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The URL of an image that represents this entity.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"https://example.com/groups/bu-infrastructure.jpeg\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tparent: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"ops\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tchildren: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"backstage\",\n\t\t\t\t\t\t\t\t\"other\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmembers: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The users that are members of this group. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"jdoe\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$4 = {\n\t$schema: $schema$4,\n\t$id: $id$4,\n\tdescription: description$4,\n\texamples: examples$4,\n\tallOf: allOf$4\n};\n\nconst groupEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$4);\n\nvar $schema$3 = \"http://json-schema.org/draft-07/schema\";\nvar $id$3 = \"LocationV1alpha1\";\nvar description$3 = \"A location is a marker that references other places to look for catalog data.\";\nvar examples$3 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Location\",\n\t\tmetadata: {\n\t\t\tname: \"org-data\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"url\",\n\t\t\ttargets: [\n\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml\",\n\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf$3 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Location\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"url\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\ttarget: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"./details/catalog-info.yaml\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\ttargets: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"./details/catalog-info.yaml\",\n\t\t\t\t\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tpresence: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Whether the presence of the location target is required and it should be considered an error if it can not be found\",\n\t\t\t\t\t\t\"default\": \"required\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"required\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"enum\": [\n\t\t\t\t\t\t\t\"required\",\n\t\t\t\t\t\t\t\"optional\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$3 = {\n\t$schema: $schema$3,\n\t$id: $id$3,\n\tdescription: description$3,\n\texamples: examples$3,\n\tallOf: allOf$3\n};\n\nconst locationEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$3);\n\nconst RELATION_OWNED_BY = \"ownedBy\";\nconst RELATION_OWNER_OF = \"ownerOf\";\nconst RELATION_CONSUMES_API = \"consumesApi\";\nconst RELATION_API_CONSUMED_BY = \"apiConsumedBy\";\nconst RELATION_PROVIDES_API = \"providesApi\";\nconst RELATION_API_PROVIDED_BY = \"apiProvidedBy\";\nconst RELATION_DEPENDS_ON = \"dependsOn\";\nconst RELATION_DEPENDENCY_OF = \"dependencyOf\";\nconst RELATION_PARENT_OF = \"parentOf\";\nconst RELATION_CHILD_OF = \"childOf\";\nconst RELATION_MEMBER_OF = \"memberOf\";\nconst RELATION_HAS_MEMBER = \"hasMember\";\nconst RELATION_PART_OF = \"partOf\";\nconst RELATION_HAS_PART = \"hasPart\";\n\nvar $schema$2 = \"http://json-schema.org/draft-07/schema\";\nvar $id$2 = \"ResourceV1alpha1\";\nvar description$2 = \"A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.\";\nvar examples$2 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Resource\",\n\t\tmetadata: {\n\t\t\tname: \"artists-db\",\n\t\t\tdescription: \"Stores artist details\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"database\",\n\t\t\towner: \"artist-relations-team\",\n\t\t\tsystem: \"artist-engagement-portal\"\n\t\t}\n\t}\n];\nvar allOf$2 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Resource\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of resource.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"database\",\n\t\t\t\t\t\t\t\"s3-bucket\",\n\t\t\t\t\t\t\t\"cluster\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the resource.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdependsOn: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of references to other entities that the resource depends on to function.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the resource belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$2 = {\n\t$schema: $schema$2,\n\t$id: $id$2,\n\tdescription: description$2,\n\texamples: examples$2,\n\tallOf: allOf$2\n};\n\nconst resourceEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$2);\n\nvar $schema$1 = \"http://json-schema.org/draft-07/schema\";\nvar $id$1 = \"SystemV1alpha1\";\nvar description$1 = \"A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.\";\nvar examples$1 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"System\",\n\t\tmetadata: {\n\t\t\tname: \"artist-engagement-portal\",\n\t\t\tdescription: \"Handy tools to keep artists in the loop\"\n\t\t},\n\t\tspec: {\n\t\t\towner: \"artist-relations-team\",\n\t\t\tdomain: \"artists\"\n\t\t}\n\t}\n];\nvar allOf$1 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"System\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdomain: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the domain that the system belongs to.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artists\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$1 = {\n\t$schema: $schema$1,\n\t$id: $id$1,\n\tdescription: description$1,\n\texamples: examples$1,\n\tallOf: allOf$1\n};\n\nconst systemEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$1);\n\nvar $schema = \"http://json-schema.org/draft-07/schema\";\nvar $id = \"UserV1alpha1\";\nvar description = \"A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.\";\nvar examples = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"User\",\n\t\tmetadata: {\n\t\t\tname: \"jdoe\"\n\t\t},\n\t\tspec: {\n\t\t\tprofile: {\n\t\t\t\tdisplayName: \"Jenny Doe\",\n\t\t\t\temail: \"jenny-doe@example.com\",\n\t\t\t\tpicture: \"https://example.com/staff/jenny-with-party-hat.jpeg\"\n\t\t\t},\n\t\t\tmemberOf: [\n\t\t\t\t\"team-b\",\n\t\t\t\t\"employees\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"User\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"memberOf\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\tprofile: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tdisplayName: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"A simple display name to present to users.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"Jenny Doe\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"An email where this user can be reached.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"jenny-doe@example.com\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpicture: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The URL of an image that represents this user.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"https://example.com/staff/jenny-with-party-hat.jpeg\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmemberOf: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"team-b\",\n\t\t\t\t\t\t\t\t\"employees\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema = {\n\t$schema: $schema,\n\t$id: $id,\n\tdescription: description,\n\texamples: examples,\n\tallOf: allOf\n};\n\nconst userEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema);\n\nconst ANNOTATION_LOCATION = \"backstage.io/managed-by-location\";\nconst ANNOTATION_ORIGIN_LOCATION = \"backstage.io/managed-by-origin-location\";\nconst ANNOTATION_SOURCE_LOCATION = \"backstage.io/source-location\";\n\nconst scriptProtocolPattern = (\n  // eslint-disable-next-line no-control-regex\n  /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*\\:/i\n);\nfunction parseLocationRef(ref) {\n  if (typeof ref !== \"string\") {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', unexpected argument ${typeof ref}`\n    );\n  }\n  const splitIndex = ref.indexOf(\":\");\n  if (splitIndex < 0) {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`\n    );\n  }\n  const type = ref.substring(0, splitIndex).trim();\n  const target = ref.substring(splitIndex + 1).trim();\n  if (!type || !target) {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`\n    );\n  }\n  if (type === \"http\" || type === \"https\") {\n    throw new TypeError(\n      `Invalid location ref '${ref}', please prefix it with 'url:', e.g. 'url:${ref}'`\n    );\n  }\n  if (scriptProtocolPattern.test(target)) {\n    throw new TypeError(\n      `Invalid location ref '${ref}', target is a javascript: URL`\n    );\n  }\n  return { type, target };\n}\nfunction stringifyLocationRef(ref) {\n  const { type, target } = ref;\n  if (!type) {\n    throw new TypeError(`Unable to stringify location ref, empty type`);\n  } else if (!target) {\n    throw new TypeError(`Unable to stringify location ref, empty target`);\n  }\n  if (scriptProtocolPattern.test(target)) {\n    throw new TypeError(\n      `Invalid location ref '${type}:${target}', target is a javascript: URL`\n    );\n  }\n  return `${type}:${target}`;\n}\nfunction getEntitySourceLocation(entity) {\n  var _a, _b, _c, _d, _e;\n  const locationRef = (_e = (_b = (_a = entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[ANNOTATION_SOURCE_LOCATION]) != null ? _e : (_d = (_c = entity.metadata) == null ? void 0 : _c.annotations) == null ? void 0 : _d[ANNOTATION_LOCATION];\n  if (!locationRef) {\n    throw new Error(\n      `Entity '${stringifyEntityRef(entity)}' is missing location`\n    );\n  }\n  return parseLocationRef(locationRef);\n}\n\nexport { ANNOTATION_EDIT_URL, ANNOTATION_KUBERNETES_API_SERVER, ANNOTATION_KUBERNETES_API_SERVER_CA, ANNOTATION_KUBERNETES_AUTH_PROVIDER, ANNOTATION_LOCATION, ANNOTATION_ORIGIN_LOCATION, ANNOTATION_SOURCE_LOCATION, ANNOTATION_VIEW_URL, CommonValidatorFunctions, DEFAULT_NAMESPACE, DefaultNamespaceEntityPolicy, EntityPolicies, FieldFormatEntityPolicy, GroupDefaultParentEntityPolicy, KubernetesValidatorFunctions, NoForeignRootFieldsEntityPolicy, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY, RELATION_CHILD_OF, RELATION_CONSUMES_API, RELATION_DEPENDENCY_OF, RELATION_DEPENDS_ON, RELATION_HAS_MEMBER, RELATION_HAS_PART, RELATION_MEMBER_OF, RELATION_OWNED_BY, RELATION_OWNER_OF, RELATION_PARENT_OF, RELATION_PART_OF, RELATION_PROVIDES_API, SchemaValidEntityPolicy, apiEntityV1alpha1Validator, componentEntityV1alpha1Validator, domainEntityV1alpha1Validator, entityEnvelopeSchemaValidator, entityKindSchemaValidator, entitySchemaValidator, getCompoundEntityRef, getEntitySourceLocation, groupEntityV1alpha1Validator, isApiEntity, isComponentEntity, isDomainEntity, isGroupEntity, isLocationEntity, isResourceEntity, isSystemEntity, isUserEntity, locationEntityV1alpha1Validator, makeValidator, parseEntityRef, parseLocationRef, resourceEntityV1alpha1Validator, stringifyEntityRef, stringifyLocationRef, systemEntityV1alpha1Validator, userEntityV1alpha1Validator };\n//# sourceMappingURL=index.esm.js.map\n","import { InputError } from '@backstage/errors';\nimport cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nconst propsOfHumanDuration = [\n  \"years\",\n  \"months\",\n  \"weeks\",\n  \"days\",\n  \"hours\",\n  \"minutes\",\n  \"seconds\",\n  \"milliseconds\"\n];\nfunction readDurationFromConfig(config, options) {\n  let root;\n  let found = false;\n  const result = {};\n  try {\n    root = (options == null ? void 0 : options.key) ? config.getConfig(options.key) : config;\n    for (const prop of propsOfHumanDuration) {\n      const value = root.getOptionalNumber(prop);\n      if (value !== void 0) {\n        result[prop] = value;\n        found = true;\n      }\n    }\n  } catch (error) {\n    throw new InputError(`Failed to read duration from config, ${error}`);\n  }\n  try {\n    if (!found) {\n      const good = propsOfHumanDuration.map((p) => `'${p}'`).join(\", \");\n      throw new Error(`Needs one or more of ${good}`);\n    }\n    const invalidProps = root.keys().filter((prop) => !propsOfHumanDuration.includes(prop));\n    if (invalidProps.length) {\n      const what = invalidProps.length === 1 ? \"property\" : \"properties\";\n      const bad = invalidProps.map((p) => `'${p}'`).join(\", \");\n      const good = propsOfHumanDuration.map((p) => `'${p}'`).join(\", \");\n      throw new Error(\n        `Unknown ${what} ${bad}; expected one or more of ${good}`\n      );\n    }\n  } catch (error) {\n    let prefix = \"Failed to read duration from config\";\n    if (options == null ? void 0 : options.key) {\n      prefix += ` at '${options.key}'`;\n    }\n    throw new InputError(`${prefix}, ${error}`);\n  }\n  return result;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst CONFIG_KEY_PART_PATTERN = /^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;\nfunction isObject(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\nfunction typeOf(value) {\n  if (value === null) {\n    return \"null\";\n  } else if (Array.isArray(value)) {\n    return \"array\";\n  }\n  const type = typeof value;\n  if (type === \"number\" && isNaN(value)) {\n    return \"nan\";\n  }\n  if (type === \"string\" && value === \"\") {\n    return \"empty-string\";\n  }\n  return type;\n}\nconst errors = {\n  type(key, context, typeName, expected) {\n    return `Invalid type in config for key '${key}' in '${context}', got ${typeName}, wanted ${expected}`;\n  },\n  missing(key) {\n    return `Missing required config value at '${key}'`;\n  },\n  convert(key, context, expected) {\n    return `Unable to convert config value for key '${key}' in '${context}' to a ${expected}`;\n  }\n};\nclass ConfigReader {\n  constructor(data, context = \"mock-config\", fallback, prefix = \"\") {\n    this.data = data;\n    this.context = context;\n    this.fallback = fallback;\n    this.prefix = prefix;\n    /**\n     * A set of key paths that where removed from the config due to not being visible.\n     *\n     * This was added as a mutable private member to avoid changes to the public API.\n     * Its only purpose of this is to warn users of missing visibility when running\n     * the frontend in development mode.\n     */\n    __publicField(this, \"filteredKeys\");\n    __publicField(this, \"notifiedFilteredKeys\", /* @__PURE__ */ new Set());\n  }\n  /**\n   * Instantiates the config reader from a list of application config objects.\n   */\n  static fromConfigs(configs) {\n    if (configs.length === 0) {\n      return new ConfigReader(void 0);\n    }\n    return configs.reduce(\n      (previousReader, { data, context, filteredKeys, deprecatedKeys }) => {\n        const reader = new ConfigReader(data, context, previousReader);\n        reader.filteredKeys = filteredKeys;\n        if (deprecatedKeys) {\n          for (const { key, description } of deprecatedKeys) {\n            console.warn(\n              `The configuration key '${key}' of ${context} is deprecated and may be removed soon. ${description || \"\"}`\n            );\n          }\n        }\n        return reader;\n      },\n      void 0\n    );\n  }\n  /** {@inheritdoc Config.has} */\n  has(key) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value !== void 0) {\n      return true;\n    }\n    return (_b = (_a = this.fallback) == null ? void 0 : _a.has(key)) != null ? _b : false;\n  }\n  /** {@inheritdoc Config.keys} */\n  keys() {\n    var _a, _b;\n    const localKeys = this.data ? Object.keys(this.data) : [];\n    const fallbackKeys = (_b = (_a = this.fallback) == null ? void 0 : _a.keys()) != null ? _b : [];\n    return [.../* @__PURE__ */ new Set([...localKeys, ...fallbackKeys])];\n  }\n  /** {@inheritdoc Config.get} */\n  get(key) {\n    const value = this.getOptional(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key != null ? key : \"\")));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptional} */\n  getOptional(key) {\n    var _a, _b;\n    const value = cloneDeep(this.readValue(key));\n    const fallbackValue = (_a = this.fallback) == null ? void 0 : _a.getOptional(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        if (fallbackValue === void 0 && key) {\n          const fullKey = this.fullKey(key);\n          if (((_b = this.filteredKeys) == null ? void 0 : _b.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n            this.notifiedFilteredKeys.add(fullKey);\n            console.warn(\n              `Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n            );\n          }\n        }\n      }\n      return fallbackValue;\n    } else if (fallbackValue === void 0) {\n      return value;\n    }\n    return mergeWith(\n      {},\n      { value: fallbackValue },\n      { value },\n      (into, from) => !isObject(from) || !isObject(into) ? from : void 0\n    ).value;\n  }\n  /** {@inheritdoc Config.getConfig} */\n  getConfig(key) {\n    const value = this.getOptionalConfig(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalConfig} */\n  getOptionalConfig(key) {\n    var _a;\n    const value = this.readValue(key);\n    const fallbackConfig = (_a = this.fallback) == null ? void 0 : _a.getOptionalConfig(key);\n    if (isObject(value)) {\n      return this.copy(value, key, fallbackConfig);\n    }\n    if (value !== void 0) {\n      throw new TypeError(\n        errors.type(this.fullKey(key), this.context, typeOf(value), \"object\")\n      );\n    }\n    return fallbackConfig;\n  }\n  /** {@inheritdoc Config.getConfigArray} */\n  getConfigArray(key) {\n    const value = this.getOptionalConfigArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalConfigArray} */\n  getOptionalConfigArray(key) {\n    var _a;\n    const configs = this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"object-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (!isObject(value)) {\n          return { expected: \"object-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n    if (!configs) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.some((k) => k.startsWith(fullKey))) && !this.notifiedFilteredKeys.has(key)) {\n          this.notifiedFilteredKeys.add(key);\n          console.warn(\n            `Failed to read configuration array at '${key}' as it does not have any visible elements. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n          );\n        }\n      }\n      return void 0;\n    }\n    return configs.map((obj, index) => this.copy(obj, `${key}[${index}]`));\n  }\n  /** {@inheritdoc Config.getNumber} */\n  getNumber(key) {\n    const value = this.getOptionalNumber(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalNumber} */\n  getOptionalNumber(key) {\n    const value = this.readConfigValue(\n      key,\n      (val) => typeof val === \"number\" || typeof val === \"string\" || { expected: \"number\" }\n    );\n    if (typeof value === \"number\" || value === void 0) {\n      return value;\n    }\n    const number = Number(value);\n    if (!Number.isFinite(number)) {\n      throw new Error(\n        errors.convert(this.fullKey(key), this.context, \"number\")\n      );\n    }\n    return number;\n  }\n  /** {@inheritdoc Config.getBoolean} */\n  getBoolean(key) {\n    const value = this.getOptionalBoolean(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalBoolean} */\n  getOptionalBoolean(key) {\n    const value = this.readConfigValue(\n      key,\n      (val) => typeof val === \"boolean\" || typeof val === \"number\" || typeof val === \"string\" || { expected: \"boolean\" }\n    );\n    if (typeof value === \"boolean\" || value === void 0) {\n      return value;\n    }\n    const valueString = String(value).trim();\n    if (/^(?:y|yes|true|1|on)$/i.test(valueString)) {\n      return true;\n    }\n    if (/^(?:n|no|false|0|off)$/i.test(valueString)) {\n      return false;\n    }\n    throw new Error(errors.convert(this.fullKey(key), this.context, \"boolean\"));\n  }\n  /** {@inheritdoc Config.getString} */\n  getString(key) {\n    const value = this.getOptionalString(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalString} */\n  getOptionalString(key) {\n    return this.readConfigValue(\n      key,\n      (value) => typeof value === \"string\" && value !== \"\" || { expected: \"string\" }\n    );\n  }\n  /** {@inheritdoc Config.getStringArray} */\n  getStringArray(key) {\n    const value = this.getOptionalStringArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalStringArray} */\n  getOptionalStringArray(key) {\n    return this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"string-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (typeof value !== \"string\" || value === \"\") {\n          return { expected: \"string-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n  }\n  fullKey(key) {\n    return `${this.prefix}${this.prefix ? \".\" : \"\"}${key}`;\n  }\n  copy(data, key, fallback) {\n    const reader = new ConfigReader(\n      data,\n      this.context,\n      fallback,\n      this.fullKey(key)\n    );\n    reader.filteredKeys = this.filteredKeys;\n    return reader;\n  }\n  readConfigValue(key, validate) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n          this.notifiedFilteredKeys.add(fullKey);\n          console.warn(\n            `Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n          );\n        }\n      }\n      return (_b = this.fallback) == null ? void 0 : _b.readConfigValue(key, validate);\n    }\n    const result = validate(value);\n    if (result !== true) {\n      const { key: keyName = key, value: theValue = value, expected } = result;\n      throw new TypeError(\n        errors.type(\n          this.fullKey(keyName),\n          this.context,\n          typeOf(theValue),\n          expected\n        )\n      );\n    }\n    return value;\n  }\n  readValue(key) {\n    const parts = key ? key.split(\".\") : [];\n    for (const part of parts) {\n      if (!CONFIG_KEY_PART_PATTERN.test(part)) {\n        throw new TypeError(`Invalid config key '${key}'`);\n      }\n    }\n    if (this.data === void 0) {\n      return void 0;\n    }\n    let value = this.data;\n    for (const [index, part] of parts.entries()) {\n      if (isObject(value)) {\n        value = value[part];\n      } else if (value !== void 0) {\n        const badKey = this.fullKey(parts.slice(0, index).join(\".\"));\n        throw new TypeError(\n          errors.type(badKey, this.context, typeOf(value), \"object\")\n        );\n      }\n    }\n    return value;\n  }\n}\n\nexport { ConfigReader, readDurationFromConfig };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useContext, createContext, useEffect, useState, Children, isValidElement, useMemo, useRef, Suspense } from 'react';\nimport PropTypes from 'prop-types';\nimport { createVersionedContext, createVersionedValueMap, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport ObservableImpl from 'zen-observable';\nimport { SessionState, FeatureFlagState, AnalyticsContext, useAnalytics, attachComponentData, useApp, useApi, configApiRef, getComponentData, featureFlagsApiRef, appThemeApiRef, identityApiRef, useElementFilter } from '@backstage/core-plugin-api';\nimport { z } from 'zod';\nimport { ConfigReader } from '@backstage/config';\nexport { ConfigReader } from '@backstage/config';\nimport { createRoutesFromChildren, Route, useLocation, matchRoutes, Routes, generatePath, useRoutes } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport { appLanguageApiRef, translationApiRef } from '@backstage/core-plugin-api/alpha';\nimport mapValues from 'lodash/mapValues';\nimport useObservable from 'react-use/lib/useObservable';\nimport { createInstance } from 'i18next';\n\nvar __defProp$l = Object.defineProperty;\nvar __defNormalProp$l = (obj, key, value) => key in obj ? __defProp$l(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$l = (obj, key, value) => {\n  __defNormalProp$l(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ApiAggregator {\n  constructor(...holders) {\n    __publicField$l(this, \"holders\");\n    this.holders = holders;\n  }\n  get(apiRef) {\n    for (const holder of this.holders) {\n      const api = holder.get(apiRef);\n      if (api) {\n        return api;\n      }\n    }\n    return void 0;\n  }\n}\n\nconst ApiContext = createVersionedContext(\"api-context\");\nconst ApiProvider = (props) => {\n  var _a;\n  const { apis, children } = props;\n  const parentHolder = (_a = useContext(ApiContext)) == null ? void 0 : _a.atVersion(1);\n  const holder = parentHolder ? new ApiAggregator(apis, parentHolder) : apis;\n  return /* @__PURE__ */ React.createElement(\n    ApiContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: holder }),\n      children\n    }\n  );\n};\nApiProvider.propTypes = {\n  apis: PropTypes.shape({ get: PropTypes.func.isRequired }).isRequired,\n  children: PropTypes.node\n};\n\nvar __defProp$k = Object.defineProperty;\nvar __defNormalProp$k = (obj, key, value) => key in obj ? __defProp$k(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$k = (obj, key, value) => {\n  __defNormalProp$k(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ApiResolver {\n  constructor(factories) {\n    this.factories = factories;\n    __publicField$k(this, \"apis\", /* @__PURE__ */ new Map());\n  }\n  /**\n   * Validate factories by making sure that each of the apis can be created\n   * without hitting any circular dependencies.\n   */\n  static validateFactories(factories, apis) {\n    for (const api of apis) {\n      const heap = [api];\n      const allDeps = /* @__PURE__ */ new Set();\n      while (heap.length) {\n        const apiRef = heap.shift();\n        const factory = factories.get(apiRef);\n        if (!factory) {\n          continue;\n        }\n        for (const dep of Object.values(factory.deps)) {\n          if (dep.id === api.id) {\n            throw new Error(`Circular dependency of api factory for ${api}`);\n          }\n          if (!allDeps.has(dep)) {\n            allDeps.add(dep);\n            heap.push(dep);\n          }\n        }\n      }\n    }\n  }\n  get(ref) {\n    return this.load(ref);\n  }\n  load(ref, loading = []) {\n    const impl = this.apis.get(ref.id);\n    if (impl) {\n      return impl;\n    }\n    const factory = this.factories.get(ref);\n    if (!factory) {\n      return void 0;\n    }\n    if (loading.includes(factory.api)) {\n      throw new Error(`Circular dependency of api factory for ${factory.api}`);\n    }\n    const deps = this.loadDeps(ref, factory.deps, [...loading, factory.api]);\n    const api = factory.factory(deps);\n    this.apis.set(ref.id, api);\n    return api;\n  }\n  loadDeps(dependent, apis, loading) {\n    const impls = {};\n    for (const key in apis) {\n      if (apis.hasOwnProperty(key)) {\n        const ref = apis[key];\n        const api = this.load(ref, loading);\n        if (!api) {\n          throw new Error(\n            `No API factory available for dependency ${ref} of dependent ${dependent}`\n          );\n        }\n        impls[key] = api;\n      }\n    }\n    return impls;\n  }\n}\n\nvar __defProp$j = Object.defineProperty;\nvar __defNormalProp$j = (obj, key, value) => key in obj ? __defProp$j(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$j = (obj, key, value) => {\n  __defNormalProp$j(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar ScopePriority = /* @__PURE__ */ ((ScopePriority2) => {\n  ScopePriority2[ScopePriority2[\"default\"] = 10] = \"default\";\n  ScopePriority2[ScopePriority2[\"app\"] = 50] = \"app\";\n  ScopePriority2[ScopePriority2[\"static\"] = 100] = \"static\";\n  return ScopePriority2;\n})(ScopePriority || {});\nclass ApiFactoryRegistry {\n  constructor() {\n    __publicField$j(this, \"factories\", /* @__PURE__ */ new Map());\n  }\n  /**\n   * Register a new API factory. Returns true if the factory was added\n   * to the registry.\n   *\n   * A factory will not be added to the registry if there is already\n   * an existing factory with the same or higher priority.\n   */\n  register(scope, factory) {\n    const priority = ScopePriority[scope];\n    const existing = this.factories.get(factory.api.id);\n    if (existing && existing.priority >= priority) {\n      return false;\n    }\n    this.factories.set(factory.api.id, { priority, factory });\n    return true;\n  }\n  get(api) {\n    const tuple = this.factories.get(api.id);\n    if (!tuple) {\n      return void 0;\n    }\n    return tuple.factory;\n  }\n  getAllApis() {\n    const refs = /* @__PURE__ */ new Set();\n    for (const { factory } of this.factories.values()) {\n      refs.add(factory.api);\n    }\n    return refs;\n  }\n}\n\nfunction showLoginPopup(options) {\n  return new Promise((resolve, reject) => {\n    const width = options.width || 500;\n    const height = options.height || 700;\n    const left = window.screen.width / 2 - width / 2;\n    const top = window.screen.height / 2 - height / 2;\n    const popup = window.open(\n      options.url,\n      options.name,\n      `menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${width},height=${height},top=${top},left=${left}`\n    );\n    let targetOrigin = \"\";\n    if (!popup || typeof popup.closed === \"undefined\" || popup.closed) {\n      const error = new Error(\"Failed to open auth popup.\");\n      error.name = \"PopupRejectedError\";\n      reject(error);\n      return;\n    }\n    const messageListener = (event) => {\n      if (event.source !== popup) {\n        return;\n      }\n      if (event.origin !== options.origin) {\n        return;\n      }\n      const { data } = event;\n      if (data.type === \"config_info\") {\n        targetOrigin = data.targetOrigin;\n        return;\n      }\n      if (data.type !== \"authorization_response\") {\n        return;\n      }\n      const authResult = data;\n      if (\"error\" in authResult) {\n        const error = new Error(authResult.error.message);\n        error.name = authResult.error.name;\n        reject(error);\n      } else {\n        resolve(authResult.response);\n      }\n      done();\n    };\n    const intervalId = setInterval(() => {\n      if (popup.closed) {\n        const errMessage = `Login failed, ${targetOrigin && targetOrigin !== window.location.origin ? `Incorrect app origin, expected ${targetOrigin}` : \"popup was closed\"}`;\n        const error = new Error(errMessage);\n        error.name = \"PopupClosedError\";\n        reject(error);\n        done();\n      }\n    }, 100);\n    function done() {\n      window.removeEventListener(\"message\", messageListener);\n      clearInterval(intervalId);\n    }\n    window.addEventListener(\"message\", messageListener);\n  });\n}\n\nvar __defProp$i = Object.defineProperty;\nvar __defNormalProp$i = (obj, key, value) => key in obj ? __defProp$i(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$i = (obj, key, value) => {\n  __defNormalProp$i(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nlet warned$1 = false;\nfunction defaultJoinScopes(scopes) {\n  return [...scopes].join(\" \");\n}\nclass DefaultAuthConnector {\n  constructor(options) {\n    __publicField$i(this, \"discoveryApi\");\n    __publicField$i(this, \"environment\");\n    __publicField$i(this, \"provider\");\n    __publicField$i(this, \"joinScopesFunc\");\n    __publicField$i(this, \"authRequester\");\n    __publicField$i(this, \"sessionTransform\");\n    __publicField$i(this, \"enableExperimentalRedirectFlow\");\n    __publicField$i(this, \"popupOptions\");\n    var _a;\n    const {\n      configApi,\n      discoveryApi,\n      environment,\n      provider,\n      joinScopes = defaultJoinScopes,\n      oauthRequestApi,\n      sessionTransform = (id) => id,\n      popupOptions\n    } = options;\n    if (!warned$1 && !configApi) {\n      console.warn(\n        \"DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor.\"\n      );\n      warned$1 = true;\n    }\n    this.enableExperimentalRedirectFlow = configApi ? (_a = configApi.getOptionalBoolean(\"enableExperimentalRedirectFlow\")) != null ? _a : false : false;\n    this.authRequester = oauthRequestApi.createAuthRequester({\n      provider,\n      onAuthRequest: async (scopes) => {\n        if (!this.enableExperimentalRedirectFlow) {\n          return this.showPopup(scopes);\n        }\n        return this.executeRedirect(scopes);\n      }\n    });\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.joinScopesFunc = joinScopes;\n    this.sessionTransform = sessionTransform;\n    this.popupOptions = popupOptions;\n  }\n  async createSession(options) {\n    if (options.instantPopup) {\n      if (this.enableExperimentalRedirectFlow) {\n        return this.executeRedirect(options.scopes);\n      }\n      return this.showPopup(options.scopes);\n    }\n    return this.authRequester(options.scopes);\n  }\n  async refreshSession(scopes) {\n    const res = await fetch(\n      await this.buildUrl(\"/refresh\", {\n        optional: true,\n        ...scopes && { scope: this.joinScopesFunc(scopes) }\n      }),\n      {\n        headers: {\n          \"x-requested-with\": \"XMLHttpRequest\"\n        },\n        credentials: \"include\"\n      }\n    ).catch((error) => {\n      throw new Error(`Auth refresh request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(\n        `Auth refresh request failed, ${res.statusText}`\n      );\n      error.status = res.status;\n      throw error;\n    }\n    const authInfo = await res.json();\n    if (authInfo.error) {\n      const error = new Error(authInfo.error.message);\n      if (authInfo.error.name) {\n        error.name = authInfo.error.name;\n      }\n      throw error;\n    }\n    return await this.sessionTransform(authInfo);\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async showPopup(scopes) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    const scope = this.joinScopesFunc(scopes);\n    const popupUrl = await this.buildUrl(\"/start\", {\n      scope,\n      origin: window.location.origin,\n      flow: \"popup\"\n    });\n    const width = ((_b = (_a = this.popupOptions) == null ? void 0 : _a.size) == null ? void 0 : _b.fullscreen) ? window.screen.width : ((_d = (_c = this.popupOptions) == null ? void 0 : _c.size) == null ? void 0 : _d.width) || 450;\n    const height = ((_f = (_e = this.popupOptions) == null ? void 0 : _e.size) == null ? void 0 : _f.fullscreen) ? window.screen.height : ((_h = (_g = this.popupOptions) == null ? void 0 : _g.size) == null ? void 0 : _h.height) || 730;\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width,\n      height\n    });\n    return await this.sessionTransform(payload);\n  }\n  async executeRedirect(scopes) {\n    const scope = this.joinScopesFunc(scopes);\n    window.location.href = await this.buildUrl(\"/start\", {\n      scope,\n      origin: window.location.origin,\n      redirectUrl: window.location.href,\n      flow: \"redirect\"\n    });\n    return new Promise(() => {\n    });\n  }\n  async buildUrl(path, query) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    const queryString = this.buildQueryString({\n      ...query,\n      env: this.environment\n    });\n    return `${baseUrl}/${this.provider.id}${path}${queryString}`;\n  }\n  buildQueryString(query) {\n    if (!query) {\n      return \"\";\n    }\n    const queryString = Object.entries(query).map(([key, value]) => {\n      if (typeof value === \"string\") {\n        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n      } else if (value) {\n        return encodeURIComponent(key);\n      }\n      return void 0;\n    }).filter(Boolean).join(\"&\");\n    if (!queryString) {\n      return \"\";\n    }\n    return `?${queryString}`;\n  }\n}\n\nvar __defProp$h = Object.defineProperty;\nvar __defNormalProp$h = (obj, key, value) => key in obj ? __defProp$h(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$h = (obj, key, value) => {\n  __defNormalProp$h(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass DirectAuthConnector {\n  constructor(options) {\n    __publicField$h(this, \"discoveryApi\");\n    __publicField$h(this, \"environment\");\n    __publicField$h(this, \"provider\");\n    const { discoveryApi, environment, provider } = options;\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n  }\n  async createSession() {\n    const popupUrl = await this.buildUrl(\"/start\");\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730\n    });\n    return {\n      ...payload,\n      id: payload.profile.email\n    };\n  }\n  async refreshSession() {\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async buildUrl(path) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    return `${baseUrl}/${this.provider.id}${path}?env=${this.environment}`;\n  }\n}\n\nfunction hasScopes$1(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nclass SessionScopeHelper {\n  constructor(options) {\n    this.options = options;\n  }\n  sessionExistsAndHasScope(session, scopes) {\n    if (!session) {\n      return false;\n    }\n    if (!scopes) {\n      return true;\n    }\n    if (this.options.sessionScopes === void 0) {\n      return true;\n    }\n    const sessionScopes = this.options.sessionScopes(session);\n    return hasScopes$1(sessionScopes, scopes);\n  }\n  getExtendedScope(session, scopes) {\n    const newScope = new Set(this.options.defaultScopes);\n    if (session && this.options.sessionScopes !== void 0) {\n      const sessionScopes = this.options.sessionScopes(session);\n      for (const scope of sessionScopes) {\n        newScope.add(scope);\n      }\n    }\n    if (scopes) {\n      for (const scope of scopes) {\n        newScope.add(scope);\n      }\n    }\n    return newScope;\n  }\n}\n\nvar __defProp$g = Object.defineProperty;\nvar __defNormalProp$g = (obj, key, value) => key in obj ? __defProp$g(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$g = (obj, key, value) => {\n  __defNormalProp$g(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass PublishSubject {\n  constructor() {\n    __publicField$g(this, \"isClosed\", false);\n    __publicField$g(this, \"terminatingError\");\n    __publicField$g(this, \"observable\", new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n    __publicField$g(this, \"subscribers\", /* @__PURE__ */ new Set());\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\nclass BehaviorSubject {\n  constructor(value) {\n    __publicField$g(this, \"isClosed\");\n    __publicField$g(this, \"currentValue\");\n    __publicField$g(this, \"terminatingError\");\n    __publicField$g(this, \"observable\");\n    __publicField$g(this, \"subscribers\", /* @__PURE__ */ new Set());\n    this.isClosed = false;\n    this.currentValue = value;\n    this.terminatingError = void 0;\n    this.observable = new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      subscriber.next(this.currentValue);\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.currentValue = value;\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\n\nvar __defProp$f = Object.defineProperty;\nvar __defNormalProp$f = (obj, key, value) => key in obj ? __defProp$f(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$f = (obj, key, value) => {\n  __defNormalProp$f(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass SessionStateTracker {\n  constructor() {\n    __publicField$f(this, \"subject\", new BehaviorSubject(\n      SessionState.SignedOut\n    ));\n    __publicField$f(this, \"signedIn\", false);\n  }\n  setIsSignedIn(isSignedIn) {\n    if (this.signedIn !== isSignedIn) {\n      this.signedIn = isSignedIn;\n      this.subject.next(\n        this.signedIn ? SessionState.SignedIn : SessionState.SignedOut\n      );\n    }\n  }\n  sessionState$() {\n    return this.subject;\n  }\n}\n\nvar __defProp$e = Object.defineProperty;\nvar __defNormalProp$e = (obj, key, value) => key in obj ? __defProp$e(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$e = (obj, key, value) => {\n  __defNormalProp$e(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass RefreshingAuthSessionManager {\n  constructor(options) {\n    __publicField$e(this, \"connector\");\n    __publicField$e(this, \"helper\");\n    __publicField$e(this, \"sessionScopesFunc\");\n    __publicField$e(this, \"sessionShouldRefreshFunc\");\n    __publicField$e(this, \"stateTracker\", new SessionStateTracker());\n    __publicField$e(this, \"refreshPromise\");\n    __publicField$e(this, \"currentSession\");\n    const {\n      connector,\n      defaultScopes = /* @__PURE__ */ new Set(),\n      sessionScopes,\n      sessionShouldRefresh\n    } = options;\n    this.connector = connector;\n    this.sessionScopesFunc = sessionScopes;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(this.currentSession);\n      if (!shouldRefresh) {\n        return this.currentSession;\n      }\n      try {\n        const refreshedSession = await this.collapsedSessionRefresh(\n          options.scopes\n        );\n        const currentScopes = this.sessionScopesFunc(this.currentSession);\n        const refreshedScopes = this.sessionScopesFunc(refreshedSession);\n        if (hasScopes$1(refreshedScopes, currentScopes)) {\n          this.currentSession = refreshedSession;\n        }\n        return refreshedSession;\n      } catch (error) {\n        if (options.optional) {\n          return void 0;\n        }\n        throw error;\n      }\n    }\n    if (!this.currentSession && !options.instantPopup) {\n      try {\n        const newSession = await this.collapsedSessionRefresh(options.scopes);\n        this.currentSession = newSession;\n        return this.getSession(options);\n      } catch {\n      }\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  async removeSession() {\n    this.currentSession = void 0;\n    await this.connector.removeSession();\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n  async collapsedSessionRefresh(scopes) {\n    if (this.refreshPromise) {\n      return this.refreshPromise;\n    }\n    this.refreshPromise = this.connector.refreshSession(\n      this.helper.getExtendedScope(this.currentSession, scopes)\n    );\n    try {\n      const session = await this.refreshPromise;\n      this.stateTracker.setIsSignedIn(true);\n      return session;\n    } finally {\n      delete this.refreshPromise;\n    }\n  }\n}\n\nvar __defProp$d = Object.defineProperty;\nvar __defNormalProp$d = (obj, key, value) => key in obj ? __defProp$d(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$d = (obj, key, value) => {\n  __defNormalProp$d(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass StaticAuthSessionManager {\n  constructor(options) {\n    __publicField$d(this, \"connector\");\n    __publicField$d(this, \"helper\");\n    __publicField$d(this, \"stateTracker\", new SessionStateTracker());\n    __publicField$d(this, \"currentSession\");\n    const { connector, defaultScopes = /* @__PURE__ */ new Set(), sessionScopes } = options;\n    this.connector = connector;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  setSession(session) {\n    this.currentSession = session;\n    this.stateTracker.setIsSignedIn(Boolean(session));\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      return this.currentSession;\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  /**\n   * We don't call this.connector.removeSession here, since this session manager\n   * is intended to be static. As such there's no need to hit the remote logout\n   * endpoint - simply discarding the local session state when signing out is\n   * enough.\n   */\n  async removeSession() {\n    this.currentSession = void 0;\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n}\n\nvar __defProp$c = Object.defineProperty;\nvar __defNormalProp$c = (obj, key, value) => key in obj ? __defProp$c(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$c = (obj, key, value) => {\n  __defNormalProp$c(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass AuthSessionStore {\n  constructor(options) {\n    __publicField$c(this, \"manager\");\n    __publicField$c(this, \"storageKey\");\n    __publicField$c(this, \"schema\");\n    __publicField$c(this, \"sessionShouldRefreshFunc\");\n    __publicField$c(this, \"helper\");\n    const {\n      manager,\n      storageKey,\n      schema,\n      sessionScopes,\n      sessionShouldRefresh = () => false\n    } = options;\n    this.manager = manager;\n    this.storageKey = storageKey;\n    this.schema = schema;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({\n      sessionScopes,\n      defaultScopes: /* @__PURE__ */ new Set()\n    });\n  }\n  setSession(session) {\n    this.manager.setSession(session);\n    this.saveSession(session);\n  }\n  async getSession(options) {\n    const { scopes } = options;\n    const session = this.loadSession();\n    if (this.helper.sessionExistsAndHasScope(session, scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(session);\n      if (!shouldRefresh) {\n        this.manager.setSession(session);\n        return session;\n      }\n    }\n    const newSession = await this.manager.getSession(options);\n    this.saveSession(newSession);\n    return newSession;\n  }\n  async removeSession() {\n    localStorage.removeItem(this.storageKey);\n    await this.manager.removeSession();\n  }\n  sessionState$() {\n    return this.manager.sessionState$();\n  }\n  loadSession() {\n    try {\n      const sessionJson = localStorage.getItem(this.storageKey);\n      if (sessionJson) {\n        const session = JSON.parse(sessionJson, (_key, value) => {\n          if ((value == null ? void 0 : value.__type) === \"Set\") {\n            return new Set(value.__value);\n          }\n          return value;\n        });\n        try {\n          return this.schema.parse(session);\n        } catch (e) {\n          console.log(\n            `Failed to load session from local storage because it did not conform to the expected schema, ${e}`\n          );\n          throw e;\n        }\n      }\n      return void 0;\n    } catch (error) {\n      localStorage.removeItem(this.storageKey);\n      return void 0;\n    }\n  }\n  saveSession(session) {\n    if (session === void 0) {\n      localStorage.removeItem(this.storageKey);\n      return;\n    }\n    try {\n      this.schema.parse(session);\n    } catch (e) {\n      console.warn(\n        `Failed to save session to local storage because it did not conform to the expected schema, ${e}`\n      );\n      return;\n    }\n    localStorage.setItem(\n      this.storageKey,\n      JSON.stringify(session, (_key, value) => {\n        if (value instanceof Set) {\n          return {\n            __type: \"Set\",\n            __value: Array.from(value)\n          };\n        }\n        return value;\n      })\n    );\n  }\n}\n\nvar __defProp$b = Object.defineProperty;\nvar __defNormalProp$b = (obj, key, value) => key in obj ? __defProp$b(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$b = (obj, key, value) => {\n  __defNormalProp$b(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst DEFAULT_PROVIDER$a = {\n  id: \"oauth2\",\n  title: \"Your Identity Provider\",\n  icon: () => null\n};\nclass OAuth2 {\n  constructor(options) {\n    __publicField$b(this, \"sessionManager\");\n    __publicField$b(this, \"scopeTransform\");\n    this.sessionManager = options.sessionManager;\n    this.scopeTransform = options.scopeTransform;\n  }\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$a,\n      oauthRequestApi,\n      defaultScopes = [],\n      scopeTransform = (x) => x,\n      popupOptions\n    } = options;\n    const connector = new DefaultAuthConnector({\n      configApi,\n      discoveryApi,\n      environment,\n      provider,\n      oauthRequestApi,\n      sessionTransform({\n        backstageIdentity,\n        ...res\n      }) {\n        var _a;\n        const session = {\n          ...res,\n          providerInfo: {\n            idToken: res.providerInfo.idToken,\n            accessToken: res.providerInfo.accessToken,\n            scopes: OAuth2.normalizeScopes(\n              scopeTransform,\n              res.providerInfo.scope\n            ),\n            expiresAt: res.providerInfo.expiresInSeconds ? new Date(Date.now() + res.providerInfo.expiresInSeconds * 1e3) : void 0\n          }\n        };\n        if (backstageIdentity) {\n          const expInSec = (_a = backstageIdentity.expiresInSeconds) != null ? _a : res.providerInfo.expiresInSeconds;\n          session.backstageIdentity = {\n            token: backstageIdentity.token,\n            identity: backstageIdentity.identity,\n            expiresAt: expInSec ? new Date(Date.now() + expInSec * 1e3) : void 0\n          };\n        }\n        return session;\n      },\n      popupOptions\n    });\n    const sessionManager = new RefreshingAuthSessionManager({\n      connector,\n      defaultScopes: new Set(defaultScopes),\n      sessionScopes: (session) => session.providerInfo.scopes,\n      sessionShouldRefresh: (session) => {\n        var _a, _b;\n        let min = Infinity;\n        if ((_a = session.providerInfo) == null ? void 0 : _a.expiresAt) {\n          min = Math.min(\n            min,\n            (session.providerInfo.expiresAt.getTime() - Date.now()) / 1e3\n          );\n        }\n        if ((_b = session.backstageIdentity) == null ? void 0 : _b.expiresAt) {\n          min = Math.min(\n            min,\n            (session.backstageIdentity.expiresAt.getTime() - Date.now()) / 1e3\n          );\n        }\n        return min < 60 * 5;\n      }\n    });\n    return new OAuth2({ sessionManager, scopeTransform });\n  }\n  async signIn() {\n    await this.getAccessToken();\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async getAccessToken(scope, options) {\n    var _a;\n    const normalizedScopes = OAuth2.normalizeScopes(this.scopeTransform, scope);\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: normalizedScopes\n    });\n    return (_a = session == null ? void 0 : session.providerInfo.accessToken) != null ? _a : \"\";\n  }\n  async getIdToken(options = {}) {\n    var _a;\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: /* @__PURE__ */ new Set([\"openid\"])\n    });\n    return (_a = session == null ? void 0 : session.providerInfo.idToken) != null ? _a : \"\";\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n  static normalizeScopes(scopeTransform, scopes) {\n    if (!scopes) {\n      return /* @__PURE__ */ new Set();\n    }\n    const scopeList = Array.isArray(scopes) ? scopes : scopes.split(/[\\s|,]/).filter(Boolean);\n    return new Set(scopeTransform(scopeList));\n  }\n}\n\nconst DEFAULT_PROVIDER$9 = {\n  id: \"github\",\n  title: \"GitHub\",\n  icon: () => null\n};\nclass GithubAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$9,\n      oauthRequestApi,\n      defaultScopes = [\"read:user\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$8 = {\n  id: \"gitlab\",\n  title: \"GitLab\",\n  icon: () => null\n};\nclass GitlabAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$8,\n      oauthRequestApi,\n      defaultScopes = [\"read_user\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$7 = {\n  id: \"google\",\n  title: \"Google\",\n  icon: () => null\n};\nconst SCOPE_PREFIX$1 = \"https://www.googleapis.com/auth/\";\nclass GoogleAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$7,\n      defaultScopes = [\n        \"openid\",\n        `${SCOPE_PREFIX$1}userinfo.email`,\n        `${SCOPE_PREFIX$1}userinfo.profile`\n      ]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (scope === \"openid\") {\n            return scope;\n          }\n          if (scope === \"profile\" || scope === \"email\") {\n            return `${SCOPE_PREFIX$1}userinfo.${scope}`;\n          }\n          if (scope.startsWith(SCOPE_PREFIX$1)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX$1}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$6 = {\n  id: \"okta\",\n  title: \"Okta\",\n  icon: () => null\n};\nconst OKTA_OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst OKTA_SCOPE_PREFIX = \"okta.\";\nclass OktaAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$6,\n      oauthRequestApi,\n      defaultScopes = [\"openid\", \"email\", \"profile\", \"offline_access\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OKTA_OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(OKTA_SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${OKTA_SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst samlSessionSchema = z.object({\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional()\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal(\"user\"),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string())\n    })\n  })\n});\n\nconst DEFAULT_PROVIDER$5 = {\n  id: \"saml\",\n  title: \"SAML\",\n  icon: () => null\n};\nclass SamlAuth {\n  constructor(sessionManager) {\n    this.sessionManager = sessionManager;\n  }\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$5\n    } = options;\n    const connector = new DirectAuthConnector({\n      discoveryApi,\n      environment,\n      provider\n    });\n    const sessionManager = new StaticAuthSessionManager({\n      connector\n    });\n    const authSessionStore = new AuthSessionStore({\n      manager: sessionManager,\n      storageKey: `${provider.id}Session`,\n      schema: samlSessionSchema\n    });\n    return new SamlAuth(authSessionStore);\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async signIn() {\n    await this.getBackstageIdentity({});\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n}\n\nvar __defProp$a = Object.defineProperty;\nvar __defNormalProp$a = (obj, key, value) => key in obj ? __defProp$a(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$a = (obj, key, value) => {\n  __defNormalProp$a(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst DEFAULT_PROVIDER$4 = {\n  id: \"microsoft\",\n  title: \"Microsoft\",\n  icon: () => null\n};\nconst _MicrosoftAuth = class _MicrosoftAuth {\n  constructor(options) {\n    __publicField$a(this, \"oauth2\");\n    __publicField$a(this, \"configApi\");\n    __publicField$a(this, \"environment\");\n    __publicField$a(this, \"provider\");\n    __publicField$a(this, \"oauthRequestApi\");\n    __publicField$a(this, \"discoveryApi\");\n    __publicField$a(this, \"scopeTransform\");\n    const {\n      configApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$4,\n      oauthRequestApi,\n      discoveryApi,\n      defaultScopes = [\n        \"openid\",\n        \"offline_access\",\n        \"profile\",\n        \"email\",\n        \"User.Read\"\n      ],\n      scopeTransform = (scopes) => scopes.concat(\"offline_access\")\n    } = options;\n    this.configApi = configApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.oauthRequestApi = oauthRequestApi;\n    this.discoveryApi = discoveryApi;\n    this.scopeTransform = scopeTransform;\n    this.oauth2 = {\n      [_MicrosoftAuth.MicrosoftGraphID]: OAuth2.create({\n        configApi: this.configApi,\n        discoveryApi: this.discoveryApi,\n        oauthRequestApi: this.oauthRequestApi,\n        provider: this.provider,\n        environment: this.environment,\n        scopeTransform: this.scopeTransform,\n        defaultScopes\n      })\n    };\n  }\n  static create(options) {\n    return new _MicrosoftAuth(options);\n  }\n  microsoftGraph() {\n    return this.oauth2[_MicrosoftAuth.MicrosoftGraphID];\n  }\n  static resourceForScopes(scope) {\n    var _a;\n    const audiences = [\n      ...new Set(\n        scope.split(\" \").map(_MicrosoftAuth.resourceForScope).filter((aud) => aud !== \"openid\")\n      )\n    ];\n    if (audiences.length > 1) {\n      return Promise.reject(\n        new Error(\n          `Requested access token with scopes from multiple Azure resources: ${audiences.join(\n            \", \"\n          )}. Access tokens can only have a single audience.`\n        )\n      );\n    }\n    const audience = (_a = audiences[0]) != null ? _a : _MicrosoftAuth.MicrosoftGraphID;\n    return Promise.resolve(audience);\n  }\n  static resourceForScope(scope) {\n    var _a;\n    const groups = (_a = scope.match(/^(?<resourceURI>.*)\\/(?<scp>[^\\/]*)$/)) == null ? void 0 : _a.groups;\n    if (groups) {\n      const { resourceURI } = groups;\n      const aud = resourceURI.replace(/^api:\\/\\//, \"\");\n      return aud;\n    }\n    switch (scope) {\n      case \"email\":\n      case \"openid\":\n      case \"offline_access\":\n      case \"profile\": {\n        return \"openid\";\n      }\n      default:\n        return _MicrosoftAuth.MicrosoftGraphID;\n    }\n  }\n  async getAccessToken(scope, options) {\n    const aud = scope === void 0 ? _MicrosoftAuth.MicrosoftGraphID : await _MicrosoftAuth.resourceForScopes(\n      Array.isArray(scope) ? scope.join(\" \") : scope\n    );\n    if (!(aud in this.oauth2)) {\n      this.oauth2[aud] = OAuth2.create({\n        configApi: this.configApi,\n        discoveryApi: this.discoveryApi,\n        oauthRequestApi: this.oauthRequestApi,\n        provider: this.provider,\n        environment: this.environment,\n        scopeTransform: this.scopeTransform\n      });\n    }\n    return this.oauth2[aud].getAccessToken(scope, options);\n  }\n  getIdToken(options) {\n    return this.microsoftGraph().getIdToken(options);\n  }\n  getProfile(options) {\n    return this.microsoftGraph().getProfile(options);\n  }\n  getBackstageIdentity(options) {\n    return this.microsoftGraph().getBackstageIdentity(options);\n  }\n  signIn() {\n    return this.microsoftGraph().signIn();\n  }\n  signOut() {\n    return this.microsoftGraph().signOut();\n  }\n  sessionState$() {\n    return this.microsoftGraph().sessionState$();\n  }\n};\n__publicField$a(_MicrosoftAuth, \"MicrosoftGraphID\", \"00000003-0000-0000-c000-000000000000\");\nlet MicrosoftAuth = _MicrosoftAuth;\n\nconst DEFAULT_PROVIDER$3 = {\n  id: \"onelogin\",\n  title: \"onelogin\",\n  icon: () => null\n};\nconst OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst SCOPE_PREFIX = \"onelogin.\";\nclass OneLoginAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$3,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$2 = {\n  id: \"bitbucket\",\n  title: \"Bitbucket\",\n  icon: () => null\n};\nclass BitbucketAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$2,\n      oauthRequestApi,\n      defaultScopes = [\"team\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$1 = {\n  id: \"bitbucketServer\",\n  title: \"Bitbucket Server\",\n  icon: () => null\n};\nclass BitbucketServerAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$1,\n      oauthRequestApi,\n      defaultScopes = [\"PROJECT_ADMIN\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER = {\n  id: \"atlassian\",\n  title: \"Atlassian\",\n  icon: () => null\n};\nclass AtlassianAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment\n    });\n  }\n}\n\nvar __defProp$9 = Object.defineProperty;\nvar __defNormalProp$9 = (obj, key, value) => key in obj ? __defProp$9(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$9 = (obj, key, value) => {\n  __defNormalProp$9(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass AlertApiForwarder {\n  constructor() {\n    __publicField$9(this, \"subject\", new PublishSubject());\n  }\n  post(alert) {\n    this.subject.next(alert);\n  }\n  alert$() {\n    return this.subject;\n  }\n}\n\nclass MultipleAnalyticsApi {\n  constructor(actualApis) {\n    this.actualApis = actualApis;\n  }\n  /**\n   * Create an AnalyticsApi implementation from an array of concrete\n   * implementations.\n   *\n   * @example\n   *\n   * ```jsx\n   * MultipleAnalyticsApi.fromApis([\n   *   SomeAnalyticsApi.fromConfig(configApi),\n   *   new CustomAnalyticsApi(),\n   * ]);\n   * ```\n   */\n  static fromApis(actualApis) {\n    return new MultipleAnalyticsApi(actualApis);\n  }\n  /**\n   * Forward the event to all configured analytics API implementations.\n   */\n  captureEvent(event) {\n    this.actualApis.forEach((analyticsApi) => {\n      try {\n        analyticsApi.captureEvent(event);\n      } catch {\n      }\n    });\n  }\n}\n\nclass NoOpAnalyticsApi {\n  captureEvent(_event) {\n  }\n}\n\nvar __defProp$8 = Object.defineProperty;\nvar __defNormalProp$8 = (obj, key, value) => key in obj ? __defProp$8(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$8 = (obj, key, value) => {\n  __defNormalProp$8(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst STORAGE_KEY$1 = \"theme\";\nclass AppThemeSelector {\n  constructor(themes) {\n    this.themes = themes;\n    __publicField$8(this, \"activeThemeId\");\n    __publicField$8(this, \"subject\", new BehaviorSubject(void 0));\n  }\n  static createWithStorage(themes) {\n    var _a;\n    const selector = new AppThemeSelector(themes);\n    if (!window.localStorage) {\n      return selector;\n    }\n    const initialThemeId = (_a = window.localStorage.getItem(STORAGE_KEY$1)) != null ? _a : void 0;\n    selector.setActiveThemeId(initialThemeId);\n    selector.activeThemeId$().subscribe((themeId) => {\n      if (themeId) {\n        window.localStorage.setItem(STORAGE_KEY$1, themeId);\n      } else {\n        window.localStorage.removeItem(STORAGE_KEY$1);\n      }\n    });\n    window.addEventListener(\"storage\", (event) => {\n      var _a2;\n      if (event.key === STORAGE_KEY$1) {\n        const themeId = (_a2 = localStorage.getItem(STORAGE_KEY$1)) != null ? _a2 : void 0;\n        selector.setActiveThemeId(themeId);\n      }\n    });\n    return selector;\n  }\n  getInstalledThemes() {\n    return this.themes.slice();\n  }\n  activeThemeId$() {\n    return this.subject;\n  }\n  getActiveThemeId() {\n    return this.activeThemeId;\n  }\n  setActiveThemeId(themeId) {\n    this.activeThemeId = themeId;\n    this.subject.next(themeId);\n  }\n}\n\nconst ERROR_PREFIX = \"Invalid discovery URL pattern,\";\nclass UrlPatternDiscovery {\n  constructor(parts) {\n    this.parts = parts;\n  }\n  /**\n   * Creates a new UrlPatternDiscovery given a template. The the only\n   * interpolation done for the template is to replace instances of `{{pluginId}}`\n   * with the ID of the plugin being requested.\n   *\n   * Example pattern: `http://localhost:7007/api/{{ pluginId }}`\n   */\n  static compile(pattern) {\n    const parts = pattern.split(/\\{\\{\\s*pluginId\\s*\\}\\}/);\n    const urlStr = parts.join(\"pluginId\");\n    let url;\n    try {\n      url = new URL(urlStr);\n    } catch {\n      throw new Error(`${ERROR_PREFIX} URL '${urlStr}' is invalid`);\n    }\n    if (url.hash) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a hash`);\n    }\n    if (url.search) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a query`);\n    }\n    if (urlStr.endsWith(\"/\")) {\n      throw new Error(`${ERROR_PREFIX} URL must not end with a slash`);\n    }\n    return new UrlPatternDiscovery(parts);\n  }\n  async getBaseUrl(pluginId) {\n    return this.parts.join(encodeURIComponent(pluginId));\n  }\n}\n\nclass FrontendHostDiscovery {\n  constructor(endpoints, defaultEndpoint) {\n    this.endpoints = endpoints;\n    this.defaultEndpoint = defaultEndpoint;\n  }\n  /**\n   * Creates a new FrontendHostDiscovery discovery instance by reading\n   * the external target URL from the `discovery.endpoints` config section.\n   *\n   * eg.\n   * ```yaml\n   * discovery:\n   *  endpoints:\n   *    - target: https://internal.example.com/internal-catalog\n   *      plugins: [catalog]\n   *    - target: https://internal.example.com/secure/api/{{pluginId}}\n   *      plugins: [auth, permissions]\n   *    - target:\n   *        internal: https://internal.example.com/search\n   *        external: https://example.com/search\n   *      plugins: [search]\n   * ```\n   *\n   * If a plugin is not declared in the config, the discovery will fall back to using the baseUrl with\n   * the provided `pathPattern` appended. The default path pattern is `\"/api/{{ pluginId }}\"`.\n   */\n  static fromConfig(config, options) {\n    var _a, _b;\n    const path = (_a = options == null ? void 0 : options.pathPattern) != null ? _a : \"/api/{{ pluginId }}\";\n    const baseUrl = config.getString(\"backend.baseUrl\");\n    const endpoints = (_b = config.getOptionalConfigArray(\"discovery.endpoints\")) == null ? void 0 : _b.flatMap((e) => {\n      const target = typeof e.get(\"target\") === \"object\" ? e.getString(\"target.external\") : e.getString(\"target\");\n      const discovery = UrlPatternDiscovery.compile(target);\n      return e.getStringArray(\"plugins\").map((pluginId) => [pluginId, discovery]);\n    });\n    return new FrontendHostDiscovery(\n      new Map(endpoints),\n      UrlPatternDiscovery.compile(`${baseUrl}${path}`)\n    );\n  }\n  async getBaseUrl(pluginId) {\n    const endpoint = this.endpoints.get(pluginId);\n    if (endpoint) {\n      return endpoint.getBaseUrl(pluginId);\n    }\n    return this.defaultEndpoint.getBaseUrl(pluginId);\n  }\n}\n\nclass ErrorAlerter {\n  constructor(alertApi, errorApi) {\n    this.alertApi = alertApi;\n    this.errorApi = errorApi;\n  }\n  post(error, context) {\n    if (!(context == null ? void 0 : context.hidden)) {\n      this.alertApi.post({ message: error.message, severity: \"error\" });\n    }\n    return this.errorApi.post(error, context);\n  }\n  error$() {\n    return this.errorApi.error$();\n  }\n}\n\nvar __defProp$7 = Object.defineProperty;\nvar __defNormalProp$7 = (obj, key, value) => key in obj ? __defProp$7(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$7 = (obj, key, value) => {\n  __defNormalProp$7(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ErrorApiForwarder {\n  constructor() {\n    __publicField$7(this, \"subject\", new PublishSubject());\n  }\n  post(error, context) {\n    this.subject.next({ error, context });\n  }\n  error$() {\n    return this.subject;\n  }\n}\n\nclass UnhandledErrorForwarder {\n  /**\n   * Add event listener, such that unhandled errors can be forwarded using an given `ErrorApi` instance\n   */\n  static forward(errorApi, errorContext) {\n    window.addEventListener(\n      \"unhandledrejection\",\n      (e) => {\n        errorApi.post(e.reason, errorContext);\n      }\n    );\n  }\n}\n\nvar __defProp$6 = Object.defineProperty;\nvar __defNormalProp$6 = (obj, key, value) => key in obj ? __defProp$6(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$6 = (obj, key, value) => {\n  __defNormalProp$6(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction validateFlagName(name) {\n  if (name.length < 3) {\n    throw new Error(\n      `The '${name}' feature flag must have a minimum length of three characters.`\n    );\n  }\n  if (name.length > 150) {\n    throw new Error(\n      `The '${name}' feature flag must not exceed 150 characters.`\n    );\n  }\n  if (!name.match(/^[a-z]+[a-z0-9-]+$/)) {\n    throw new Error(\n      `The '${name}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`\n    );\n  }\n}\nclass LocalStorageFeatureFlags {\n  constructor() {\n    __publicField$6(this, \"registeredFeatureFlags\", []);\n    __publicField$6(this, \"flags\");\n  }\n  registerFlag(flag) {\n    validateFlagName(flag.name);\n    this.registeredFeatureFlags.push(flag);\n  }\n  getRegisteredFlags() {\n    return this.registeredFeatureFlags.slice();\n  }\n  isActive(name) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    return this.flags.get(name) === FeatureFlagState.Active;\n  }\n  save(options) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    if (!options.merge) {\n      this.flags.clear();\n    }\n    for (const [name, state] of Object.entries(options.states)) {\n      this.flags.set(name, state);\n    }\n    const enabled = Array.from(this.flags.entries()).filter(\n      ([, state]) => state === FeatureFlagState.Active\n    );\n    window.localStorage.setItem(\n      \"featureFlags\",\n      JSON.stringify(Object.fromEntries(enabled))\n    );\n  }\n  load() {\n    try {\n      const jsonStr = window.localStorage.getItem(\"featureFlags\");\n      if (!jsonStr) {\n        return /* @__PURE__ */ new Map();\n      }\n      const json = JSON.parse(jsonStr);\n      if (typeof json !== \"object\" || json === null || Array.isArray(json)) {\n        return /* @__PURE__ */ new Map();\n      }\n      const entries = Object.entries(json).filter(([name, value]) => {\n        validateFlagName(name);\n        return value === FeatureFlagState.Active;\n      });\n      return new Map(entries);\n    } catch {\n      return /* @__PURE__ */ new Map();\n    }\n  }\n}\n\nfunction createFetchApi(options) {\n  var _a;\n  let result = options.baseImplementation || global.fetch;\n  const middleware = [(_a = options.middleware) != null ? _a : []].flat().reverse();\n  for (const m of middleware) {\n    result = m.apply(result);\n  }\n  return {\n    fetch: result\n  };\n}\n\nclass IdentityAuthInjectorFetchMiddleware {\n  constructor(identityApi, allowUrl, headerName, headerValue) {\n    this.identityApi = identityApi;\n    this.allowUrl = allowUrl;\n    this.headerName = headerName;\n    this.headerValue = headerValue;\n  }\n  static create(options) {\n    var _a, _b;\n    const matcher = buildMatcher(options);\n    const headerName = ((_a = options.header) == null ? void 0 : _a.name) || \"authorization\";\n    const headerValue = ((_b = options.header) == null ? void 0 : _b.value) || ((token) => `Bearer ${token}`);\n    return new IdentityAuthInjectorFetchMiddleware(\n      options.identityApi,\n      matcher,\n      headerName,\n      headerValue\n    );\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const { token } = await this.identityApi.getCredentials();\n      if (request.headers.get(this.headerName) || typeof token !== \"string\" || !token || !this.allowUrl(request.url)) {\n        return next(input, init);\n      }\n      request.headers.set(this.headerName, this.headerValue(token));\n      return next(request);\n    };\n  }\n}\nfunction buildMatcher(options) {\n  if (options.allowUrl) {\n    return options.allowUrl;\n  } else if (options.urlPrefixAllowlist) {\n    return buildPrefixMatcher(options.urlPrefixAllowlist);\n  } else if (options.config) {\n    return buildPrefixMatcher([options.config.getString(\"backend.baseUrl\")]);\n  }\n  return () => false;\n}\nfunction buildPrefixMatcher(prefixes) {\n  const trimmedPrefixes = prefixes.map((prefix) => prefix.replace(/\\/$/, \"\"));\n  return (url) => trimmedPrefixes.some(\n    (prefix) => url === prefix || url.startsWith(`${prefix}/`)\n  );\n}\n\nfunction join(left, right) {\n  if (!right || right === \"/\") {\n    return left;\n  }\n  return `${left.replace(/\\/$/, \"\")}/${right.replace(/^\\//, \"\")}`;\n}\nclass PluginProtocolResolverFetchMiddleware {\n  constructor(discoveryApi) {\n    this.discoveryApi = discoveryApi;\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const prefix = \"plugin://\";\n      if (!request.url.startsWith(prefix)) {\n        return next(input, init);\n      }\n      const { hostname, pathname, search, hash, username, password } = new URL(\n        `http://${request.url.substring(prefix.length)}`\n      );\n      let base = await this.discoveryApi.getBaseUrl(hostname);\n      if (username || password) {\n        const baseUrl = new URL(base);\n        const authority = `${username}${password ? `:${password}` : \"\"}@`;\n        base = `${baseUrl.protocol}//${authority}${baseUrl.host}${baseUrl.pathname}`;\n      }\n      const target = `${join(base, pathname)}${search}${hash}`;\n      return next(\n        target,\n        typeof input === \"string\" || isUrl(input) ? init : input\n      );\n    };\n  }\n}\nfunction isUrl(a) {\n  return typeof a === \"object\" && (a == null ? void 0 : a.constructor) === URL;\n}\n\nclass FetchMiddlewares {\n  /**\n   * Handles translation from `plugin://` URLs to concrete http(s) URLs based on\n   * the discovery API.\n   *\n   * @remarks\n   *\n   * If the request is for `plugin://catalog/entities?filter=x=y`, the discovery\n   * API will be queried for `'catalog'`. If it returned\n   * `https://backstage.example.net/api/catalog`, the resulting query would be\n   * `https://backstage.example.net/api/catalog/entities?filter=x=y`.\n   *\n   * If the incoming URL protocol was not `plugin`, the request is just passed\n   * through verbatim to the underlying implementation.\n   */\n  static resolvePluginProtocol(options) {\n    return new PluginProtocolResolverFetchMiddleware(options.discoveryApi);\n  }\n  /**\n   * Injects a Backstage token header when the user is signed in.\n   *\n   * @remarks\n   *\n   * Per default, an `Authorization: Bearer <token>` is generated. This can be\n   * customized using the `header` option.\n   *\n   * The header injection only happens on allowlisted URLs. Per default, if the\n   * `config` option is passed in, the `backend.baseUrl` is allowlisted, unless\n   * the `urlPrefixAllowlist` or `allowUrl` options are passed in, in which case\n   * they take precedence. If you pass in neither config nor an\n   * allowlist/callback, the middleware will have no effect since effectively no\n   * request will match the (nonexistent) rules.\n   */\n  static injectIdentityAuth(options) {\n    return IdentityAuthInjectorFetchMiddleware.create(options);\n  }\n  constructor() {\n  }\n}\n\nvar __defProp$5 = Object.defineProperty;\nvar __defNormalProp$5 = (obj, key, value) => key in obj ? __defProp$5(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$5 = (obj, key, value) => {\n  __defNormalProp$5(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction hasScopes(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction joinScopes(scopes, ...moreScopess) {\n  const result = new Set(scopes);\n  for (const moreScopes of moreScopess) {\n    for (const scope of moreScopes) {\n      result.add(scope);\n    }\n  }\n  return result;\n}\nclass OAuthPendingRequests {\n  constructor() {\n    __publicField$5(this, \"requests\", []);\n    __publicField$5(this, \"subject\", new BehaviorSubject(\n      this.getCurrentPending()\n    ));\n  }\n  request(scopes) {\n    return new Promise((resolve, reject) => {\n      this.requests.push({ scopes, resolve, reject });\n      this.subject.next(this.getCurrentPending());\n    });\n  }\n  resolve(scopes, result) {\n    this.requests = this.requests.filter((request) => {\n      if (hasScopes(scopes, request.scopes)) {\n        request.resolve(result);\n        return false;\n      }\n      return true;\n    });\n    this.subject.next(this.getCurrentPending());\n  }\n  reject(error) {\n    this.requests.forEach((request) => request.reject(error));\n    this.requests = [];\n    this.subject.next(this.getCurrentPending());\n  }\n  pending() {\n    return this.subject;\n  }\n  getCurrentPending() {\n    const currentScopes = this.requests.length === 0 ? void 0 : this.requests.slice(1).reduce(\n      (acc, current) => joinScopes(acc, current.scopes),\n      this.requests[0].scopes\n    );\n    return {\n      scopes: currentScopes,\n      resolve: (value) => {\n        if (currentScopes) {\n          this.resolve(currentScopes, value);\n        }\n      },\n      reject: (reason) => {\n        if (currentScopes) {\n          this.reject(reason);\n        }\n      }\n    };\n  }\n}\n\nvar __defProp$4 = Object.defineProperty;\nvar __defNormalProp$4 = (obj, key, value) => key in obj ? __defProp$4(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$4 = (obj, key, value) => {\n  __defNormalProp$4(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass OAuthRequestManager {\n  constructor() {\n    __publicField$4(this, \"subject\", new BehaviorSubject([]));\n    __publicField$4(this, \"currentRequests\", []);\n    __publicField$4(this, \"handlerCount\", 0);\n  }\n  createAuthRequester(options) {\n    const handler = new OAuthPendingRequests();\n    const index = this.handlerCount;\n    this.handlerCount++;\n    handler.pending().subscribe({\n      next: (scopeRequest) => {\n        const newRequests = this.currentRequests.slice();\n        const request = this.makeAuthRequest(scopeRequest, options);\n        if (!request) {\n          delete newRequests[index];\n        } else {\n          newRequests[index] = request;\n        }\n        this.currentRequests = newRequests;\n        this.subject.next(newRequests.filter(Boolean));\n      }\n    });\n    return (scopes) => {\n      return handler.request(scopes);\n    };\n  }\n  // Converts the pending request and popup options into a popup request that we can forward to subscribers.\n  makeAuthRequest(request, options) {\n    const { scopes } = request;\n    if (!scopes) {\n      return void 0;\n    }\n    return {\n      provider: options.provider,\n      trigger: async () => {\n        const result = await options.onAuthRequest(scopes);\n        request.resolve(result);\n      },\n      reject: () => {\n        const error = new Error(\"Login failed, rejected by user\");\n        error.name = \"RejectedError\";\n        request.reject(error);\n      }\n    };\n  }\n  authRequest$() {\n    return this.subject;\n  }\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst buckets = /* @__PURE__ */ new Map();\nconst _WebStorage = class _WebStorage {\n  constructor(namespace, errorApi) {\n    this.namespace = namespace;\n    this.errorApi = errorApi;\n    __publicField$3(this, \"subscribers\", /* @__PURE__ */ new Set());\n    __publicField$3(this, \"observable\", new ObservableImpl((subscriber) => {\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n  }\n  static create(options) {\n    var _a;\n    return new _WebStorage((_a = options.namespace) != null ? _a : \"\", options.errorApi);\n  }\n  static addStorageEventListener() {\n    window.addEventListener(\"storage\", (event) => {\n      var _a;\n      for (const [bucketPath, webStorage] of buckets.entries()) {\n        if ((_a = event.key) == null ? void 0 : _a.startsWith(bucketPath)) {\n          webStorage.handleStorageChange(event.key);\n        }\n      }\n    });\n  }\n  get(key) {\n    return this.snapshot(key).value;\n  }\n  snapshot(key) {\n    let value = void 0;\n    let presence = \"absent\";\n    try {\n      const item = localStorage.getItem(this.getKeyName(key));\n      if (item) {\n        value = JSON.parse(item, (_key, val) => {\n          if (typeof val === \"object\" && val !== null) {\n            Object.freeze(val);\n          }\n          return val;\n        });\n        presence = \"present\";\n      }\n    } catch (e) {\n      this.errorApi.post(\n        new Error(`Error when parsing JSON config from storage for: ${key}`)\n      );\n    }\n    return { key, value, presence };\n  }\n  forBucket(name) {\n    const bucketPath = `${this.namespace}/${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(bucketPath, new _WebStorage(bucketPath, this.errorApi));\n    }\n    return buckets.get(bucketPath);\n  }\n  async set(key, data) {\n    localStorage.setItem(this.getKeyName(key), JSON.stringify(data));\n    this.notifyChanges(key);\n  }\n  async remove(key) {\n    localStorage.removeItem(this.getKeyName(key));\n    this.notifyChanges(key);\n  }\n  observe$(key) {\n    if (!_WebStorage.hasSubscribed) {\n      _WebStorage.addStorageEventListener();\n      _WebStorage.hasSubscribed = true;\n    }\n    return this.observable.filter(({ key: messageKey }) => messageKey === key);\n  }\n  handleStorageChange(eventKey) {\n    if (!(eventKey == null ? void 0 : eventKey.startsWith(this.namespace))) {\n      return;\n    }\n    const trimmedKey = eventKey == null ? void 0 : eventKey.slice(`${this.namespace}/`.length);\n    if (!trimmedKey.includes(\"/\")) {\n      this.notifyChanges(decodeURIComponent(trimmedKey));\n    }\n  }\n  getKeyName(key) {\n    return `${this.namespace}/${encodeURIComponent(key)}`;\n  }\n  notifyChanges(key) {\n    const snapshot = this.snapshot(key);\n    for (const subscription of this.subscribers) {\n      subscription.next(snapshot);\n    }\n  }\n};\n__publicField$3(_WebStorage, \"hasSubscribed\", false);\nlet WebStorage = _WebStorage;\n\nconst InternalAppContext = createContext(void 0);\n\nfunction isReactRouterBeta() {\n  const [obj] = createRoutesFromChildren(/* @__PURE__ */ React.createElement(Route, { index: true, element: /* @__PURE__ */ React.createElement(\"div\", null) }));\n  return !obj.index;\n}\n\nconst getExtensionContext = (pathname, routes) => {\n  try {\n    const matches = matchRoutes(routes, { pathname });\n    const routeMatch = matches == null ? void 0 : matches.filter((match) => {\n      var _a;\n      return ((_a = match == null ? void 0 : match.route.routeRefs) == null ? void 0 : _a.size) > 0;\n    }).pop();\n    const routeObject = routeMatch == null ? void 0 : routeMatch.route;\n    if (!routeObject) {\n      return void 0;\n    }\n    if (routeObject.path === \"\" && pathname !== \"/\") {\n      return void 0;\n    }\n    let routeRef;\n    if (routeObject.routeRefs.size === 1) {\n      routeRef = routeObject.routeRefs.values().next().value;\n    }\n    let plugin;\n    if (routeObject.plugins.size === 1) {\n      plugin = routeObject.plugins.values().next().value;\n    }\n    const params = Object.entries(\n      (routeMatch == null ? void 0 : routeMatch.params) || {}\n    ).reduce((acc, [key, value]) => {\n      if (value !== void 0 && key !== \"*\") {\n        acc[key] = value;\n      }\n      return acc;\n    }, {});\n    return {\n      extension: \"App\",\n      pluginId: (plugin == null ? void 0 : plugin.getId()) || \"root\",\n      ...routeRef ? { routeRef: routeRef.id } : {},\n      _routeNodeType: routeObject.element,\n      params\n    };\n  } catch {\n    return void 0;\n  }\n};\nconst TrackNavigation = ({\n  pathname,\n  search,\n  hash,\n  attributes\n}) => {\n  const analytics = useAnalytics();\n  useEffect(() => {\n    analytics.captureEvent(\"navigate\", `${pathname}${search}${hash}`, {\n      attributes\n    });\n  }, [analytics, pathname, search, hash, attributes]);\n  return null;\n};\nconst RouteTracker = ({\n  routeObjects\n}) => {\n  const { pathname, search, hash } = useLocation();\n  const { params, ...attributes } = getExtensionContext(\n    pathname,\n    routeObjects\n  ) || { params: {} };\n  return /* @__PURE__ */ React.createElement(AnalyticsContext, { attributes }, /* @__PURE__ */ React.createElement(\n    TrackNavigation,\n    {\n      pathname,\n      search,\n      hash,\n      attributes: params\n    }\n  ));\n};\n\nfunction getBasePath(configApi) {\n  if (!isReactRouterBeta()) {\n    return \"\";\n  }\n  return readBasePath(configApi);\n}\nfunction readBasePath(configApi) {\n  var _a;\n  let { pathname } = new URL(\n    (_a = configApi.getOptionalString(\"app.baseUrl\")) != null ? _a : \"/\",\n    \"http://sample.dev\"\n    // baseUrl can be specified as just a path\n  );\n  pathname = pathname.replace(/\\/*$/, \"\");\n  return pathname;\n}\nfunction SignInPageWrapper({\n  component: Component,\n  appIdentityProxy,\n  children\n}) {\n  const [identityApi, setIdentityApi] = useState();\n  const configApi = useApi(configApiRef);\n  const basePath = readBasePath(configApi);\n  if (!identityApi) {\n    return /* @__PURE__ */ React.createElement(Component, { onSignInSuccess: setIdentityApi });\n  }\n  appIdentityProxy.setTarget(identityApi, {\n    signOutTargetUrl: basePath || \"/\"\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n}\nfunction AppRouter(props) {\n  const { Router: RouterComponent, SignInPage: SignInPageComponent } = useApp().getComponents();\n  const configApi = useApi(configApiRef);\n  const basePath = readBasePath(configApi);\n  const mountPath = `${basePath}/*`;\n  const internalAppContext = useContext(InternalAppContext);\n  if (!internalAppContext) {\n    throw new Error(\"AppRouter must be rendered within the AppProvider\");\n  }\n  const { routeObjects, appIdentityProxy } = internalAppContext;\n  if (!SignInPageComponent) {\n    appIdentityProxy.setTarget(\n      {\n        getUserId: () => \"guest\",\n        getIdToken: async () => void 0,\n        getProfile: () => ({\n          email: \"guest@example.com\",\n          displayName: \"Guest\"\n        }),\n        getProfileInfo: async () => ({\n          email: \"guest@example.com\",\n          displayName: \"Guest\"\n        }),\n        getBackstageIdentity: async () => ({\n          type: \"user\",\n          userEntityRef: \"user:default/guest\",\n          ownershipEntityRefs: [\"user:default/guest\"]\n        }),\n        getCredentials: async () => ({}),\n        signOut: async () => {\n        }\n      },\n      { signOutTargetUrl: basePath || \"/\" }\n    );\n    if (isReactRouterBeta()) {\n      return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: mountPath, element: /* @__PURE__ */ React.createElement(React.Fragment, null, props.children) })));\n    }\n    return /* @__PURE__ */ React.createElement(RouterComponent, { basename: basePath }, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), props.children);\n  }\n  if (isReactRouterBeta()) {\n    return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(\n      SignInPageWrapper,\n      {\n        component: SignInPageComponent,\n        appIdentityProxy\n      },\n      /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: mountPath, element: /* @__PURE__ */ React.createElement(React.Fragment, null, props.children) }))\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(RouterComponent, { basename: basePath }, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(\n    SignInPageWrapper,\n    {\n      component: SignInPageComponent,\n      appIdentityProxy\n    },\n    props.children\n  ));\n}\nattachComponentData(AppRouter, \"core.type\", \"AppRouter\");\n\nfunction traverseElementTree(options) {\n  const collectors = {};\n  for (const name in options.collectors) {\n    if (options.collectors.hasOwnProperty(name)) {\n      collectors[name] = options.collectors[name]();\n    }\n  }\n  const queue = [\n    {\n      node: Children.toArray(options.root),\n      parent: void 0,\n      contexts: {}\n    }\n  ];\n  while (queue.length !== 0) {\n    const { node, parent, contexts } = queue.shift();\n    Children.forEach(node, (element) => {\n      if (!isValidElement(element)) {\n        return;\n      }\n      const nextContexts = {};\n      for (const name in collectors) {\n        if (collectors.hasOwnProperty(name)) {\n          const collector = collectors[name];\n          nextContexts[name] = collector.visit(\n            collector.accumulator,\n            element,\n            parent,\n            contexts[name]\n          );\n        }\n      }\n      for (const discoverer of options.discoverers) {\n        const children = discoverer(element);\n        if (children) {\n          queue.push({\n            node: children,\n            parent: element,\n            contexts: nextContexts\n          });\n        }\n      }\n    });\n  }\n  return Object.fromEntries(\n    Object.entries(collectors).map(([name, c]) => [name, c.accumulator])\n  );\n}\nfunction createCollector(accumulatorFactory, visit) {\n  return () => ({ accumulator: accumulatorFactory(), visit });\n}\nfunction childDiscoverer(element) {\n  var _a;\n  return (_a = element.props) == null ? void 0 : _a.children;\n}\nfunction routeElementDiscoverer(element) {\n  var _a, _b, _c;\n  if (((_a = element.props) == null ? void 0 : _a.path) && ((_b = element.props) == null ? void 0 : _b.element)) {\n    return (_c = element.props) == null ? void 0 : _c.element;\n  }\n  return void 0;\n}\n\nconst pluginCollector = createCollector(\n  () => /* @__PURE__ */ new Set(),\n  (acc, node) => {\n    const plugin = getComponentData(node, \"core.plugin\");\n    if (plugin) {\n      acc.add(plugin);\n    }\n  }\n);\n\nconst FeatureFlagged = (props) => {\n  const { children } = props;\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  const isEnabled = \"with\" in props ? featureFlagApi.isActive(props.with) : !featureFlagApi.isActive(props.without);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, isEnabled ? children : null);\n};\nattachComponentData(FeatureFlagged, \"core.featureFlagged\", true);\n\nconst MATCH_ALL_ROUTE = {\n  caseSensitive: false,\n  path: \"*\",\n  element: \"match-all\",\n  // These elements aren't used, so we add in a bit of debug information\n  routeRefs: /* @__PURE__ */ new Set(),\n  plugins: /* @__PURE__ */ new Set()\n};\nfunction stringifyNode(node) {\n  var _a, _b;\n  const anyNode = node;\n  if (anyNode == null ? void 0 : anyNode.type) {\n    return (_b = (_a = anyNode.type.displayName) != null ? _a : anyNode.type.name) != null ? _b : String(anyNode.type);\n  }\n  return String(anyNode);\n}\nconst pluginSet = (plugin) => {\n  const set = /* @__PURE__ */ new Set();\n  if (plugin) {\n    set.add(plugin);\n  }\n  return set;\n};\nfunction collectSubTree(node, entries = new Array()) {\n  Children.forEach(node, (element) => {\n    if (!isValidElement(element)) {\n      return;\n    }\n    const routeRef = getComponentData(element, \"core.mountPoint\");\n    if (routeRef) {\n      const plugin = getComponentData(element, \"core.plugin\");\n      entries.push({ routeRef, plugin });\n    }\n    collectSubTree(element.props.children, entries);\n  });\n  return entries;\n}\nconst routingV2Collector = createCollector(\n  () => ({\n    paths: /* @__PURE__ */ new Map(),\n    parents: /* @__PURE__ */ new Map(),\n    objects: new Array()\n  }),\n  (acc, node, parent, ctx) => {\n    var _a, _b, _c, _d, _e, _f, _g;\n    if (ctx == null ? void 0 : ctx.isElementAncestor) {\n      return ctx;\n    }\n    if ((parent == null ? void 0 : parent.props.element) === node) {\n      return { ...ctx, isElementAncestor: true };\n    }\n    const pathProp = (_a = node.props) == null ? void 0 : _a.path;\n    const mountPoint = getComponentData(node, \"core.mountPoint\");\n    if (mountPoint && pathProp) {\n      throw new Error(\n        `Path property may not be set directly on a routable extension \"${stringifyNode(\n          node\n        )}\"`\n      );\n    }\n    const parentChildren = (_c = (_b = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _b.children) != null ? _c : acc.objects;\n    if (pathProp !== void 0) {\n      if (typeof pathProp !== \"string\") {\n        throw new Error(\n          `Element path must be a string at \"${stringifyNode(node)}\"`\n        );\n      }\n      const path = pathProp.startsWith(\"/\") ? pathProp.slice(1) : pathProp;\n      const elementProp = node.props.element;\n      if (getComponentData(node, \"core.gatherMountPoints\")) {\n        if (elementProp) {\n          throw new Error(\n            `Mount point gatherers may not have an element prop \"${stringifyNode(\n              node\n            )}\"`\n          );\n        }\n        const newObj = {\n          path,\n          element: \"gathered\",\n          routeRefs: /* @__PURE__ */ new Set(),\n          caseSensitive: Boolean((_d = node.props) == null ? void 0 : _d.caseSensitive),\n          children: [MATCH_ALL_ROUTE],\n          plugins: /* @__PURE__ */ new Set()\n        };\n        parentChildren.push(newObj);\n        return {\n          obj: newObj,\n          gatherPath: path,\n          routeRef: ctx == null ? void 0 : ctx.routeRef,\n          gatherRouteRef: ctx == null ? void 0 : ctx.routeRef\n        };\n      }\n      if (elementProp) {\n        const [extension, ...others] = collectSubTree(elementProp);\n        if (others.length > 0) {\n          throw new Error(\n            `Route element with path \"${pathProp}\" may not contain multiple routable extensions`\n          );\n        }\n        if (!extension) {\n          return ctx;\n        }\n        const { routeRef, plugin } = extension;\n        const newObj = {\n          path,\n          element: \"mounted\",\n          routeRefs: /* @__PURE__ */ new Set([routeRef]),\n          caseSensitive: Boolean((_e = node.props) == null ? void 0 : _e.caseSensitive),\n          children: [MATCH_ALL_ROUTE],\n          plugins: pluginSet(plugin)\n        };\n        parentChildren.push(newObj);\n        acc.paths.set(routeRef, path);\n        acc.parents.set(routeRef, ctx == null ? void 0 : ctx.routeRef);\n        return {\n          obj: newObj,\n          routeRef: routeRef != null ? routeRef : ctx == null ? void 0 : ctx.routeRef,\n          gatherPath: path,\n          gatherRouteRef: ctx == null ? void 0 : ctx.gatherRouteRef\n        };\n      }\n    }\n    if (mountPoint) {\n      if ((ctx == null ? void 0 : ctx.gatherPath) === void 0) {\n        throw new Error(\n          `Routable extension \"${stringifyNode(\n            node\n          )}\" with mount point \"${mountPoint}\" must be assigned a path`\n        );\n      }\n      (_f = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _f.routeRefs.add(mountPoint);\n      const mountPointPlugin = getComponentData(\n        node,\n        \"core.plugin\"\n      );\n      if (mountPointPlugin) {\n        (_g = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _g.plugins.add(mountPointPlugin);\n      }\n      acc.paths.set(mountPoint, ctx.gatherPath);\n      acc.parents.set(mountPoint, ctx == null ? void 0 : ctx.gatherRouteRef);\n      return {\n        ...ctx,\n        routeRef: mountPoint\n      };\n    }\n    return ctx;\n  }\n);\nconst routingV1Collector = createCollector(\n  () => ({\n    paths: /* @__PURE__ */ new Map(),\n    parents: /* @__PURE__ */ new Map(),\n    objects: new Array()\n  }),\n  (acc, node, parent, ctx) => {\n    var _a, _b, _c, _d, _e;\n    if ((parent == null ? void 0 : parent.props.element) === node) {\n      return ctx;\n    }\n    let currentObj = ctx == null ? void 0 : ctx.obj;\n    let currentParentRouteRef = ctx == null ? void 0 : ctx.routeRef;\n    let sticky = ctx == null ? void 0 : ctx.sticky;\n    const path = (_a = node.props) == null ? void 0 : _a.path;\n    const parentChildren = (_b = currentObj == null ? void 0 : currentObj.children) != null ? _b : acc.objects;\n    const caseSensitive = Boolean((_c = node.props) == null ? void 0 : _c.caseSensitive);\n    let currentCtxPath = ctx == null ? void 0 : ctx.path;\n    if (getComponentData(node, \"core.gatherMountPoints\")) {\n      if (!path) {\n        throw new Error(\"Mount point gatherer must have a path\");\n      }\n      currentCtxPath = path;\n    }\n    const element = (_d = node.props) == null ? void 0 : _d.element;\n    let routeRef = getComponentData(node, \"core.mountPoint\");\n    if (!routeRef && isValidElement(element)) {\n      routeRef = getComponentData(element, \"core.mountPoint\");\n    }\n    if (routeRef) {\n      let routePath = path;\n      if (currentCtxPath) {\n        if (routePath) {\n          currentCtxPath = void 0;\n        } else {\n          routePath = currentCtxPath;\n        }\n      }\n      if (!routePath) {\n        throw new Error(\"Mounted routable extension must have a path\");\n      }\n      acc.paths.set(routeRef, routePath);\n      if (currentParentRouteRef && sticky) {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        if (path) {\n          currentParentRouteRef = routeRef;\n          sticky = false;\n        }\n      } else {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        currentParentRouteRef = routeRef;\n      }\n      if (path) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: \"mounted\",\n          routeRefs: /* @__PURE__ */ new Set([routeRef]),\n          children: [MATCH_ALL_ROUTE],\n          plugins: pluginSet(\n            getComponentData(\n              node.props.element,\n              \"core.plugin\"\n            )\n          )\n        };\n        parentChildren.push(currentObj);\n      } else {\n        currentObj == null ? void 0 : currentObj.routeRefs.add(routeRef);\n      }\n    }\n    if (getComponentData(node, \"core.gatherMountPoints\")) {\n      sticky = true;\n    }\n    const isGatherer = getComponentData(\n      node,\n      \"core.gatherMountPoints\"\n    );\n    if (isGatherer) {\n      if (!path) {\n        throw new Error(\"Mount point gatherer must have a path\");\n      }\n      if (!routeRef) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: \"gathered\",\n          routeRefs: /* @__PURE__ */ new Set(),\n          children: [MATCH_ALL_ROUTE],\n          plugins: ((_e = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _e.plugins) || /* @__PURE__ */ new Set()\n        };\n        parentChildren.push(currentObj);\n      }\n    }\n    return {\n      obj: currentObj,\n      path: currentCtxPath,\n      routeRef: currentParentRouteRef,\n      sticky\n    };\n  }\n);\nconst featureFlagCollector = createCollector(\n  () => /* @__PURE__ */ new Set(),\n  (acc, node) => {\n    if (node.type === FeatureFlagged) {\n      const props = node.props;\n      acc.add(\"with\" in props ? props.with : props.without);\n    }\n  }\n);\n\nconst routeRefType = getOrCreateGlobalSingleton(\n  \"route-ref-type\",\n  () => Symbol(\"route-ref-type\")\n);\nfunction isRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"absolute\";\n}\nfunction isSubRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"sub\";\n}\nfunction isExternalRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"external\";\n}\n\nfunction joinPaths(...paths) {\n  const normalized = paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\n  if (normalized !== \"/\" && normalized.endsWith(\"/\")) {\n    return normalized.slice(0, -1);\n  }\n  return normalized;\n}\n\nfunction resolveTargetRef(anyRouteRef, routePaths, routeBindings) {\n  let targetRef;\n  let subRoutePath = \"\";\n  if (isRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef;\n  } else if (isSubRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef.parent;\n    subRoutePath = anyRouteRef.path;\n  } else if (isExternalRouteRef(anyRouteRef)) {\n    const resolvedRoute = routeBindings.get(anyRouteRef);\n    if (!resolvedRoute) {\n      return [void 0, \"\"];\n    }\n    if (isRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute;\n    } else if (isSubRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute.parent;\n      subRoutePath = resolvedRoute.path;\n    } else {\n      throw new Error(\n        `ExternalRouteRef was bound to invalid target, ${resolvedRoute}`\n      );\n    }\n  } else if (anyRouteRef[routeRefType]) {\n    throw new Error(\n      `Unknown or invalid route ref type, ${anyRouteRef[routeRefType]}`\n    );\n  } else {\n    throw new Error(`Unknown object passed to useRouteRef, got ${anyRouteRef}`);\n  }\n  if (!targetRef) {\n    return [void 0, \"\"];\n  }\n  const resolvedPath = routePaths.get(targetRef);\n  if (resolvedPath === void 0) {\n    return [void 0, \"\"];\n  }\n  const targetPath = joinPaths(resolvedPath, subRoutePath);\n  return [targetRef, targetPath];\n}\nfunction resolveBasePath(targetRef, sourceLocation, routePaths, routeParents, routeObjects) {\n  var _a;\n  const match = (_a = matchRoutes(routeObjects, sourceLocation)) != null ? _a : [];\n  const refDiffList = Array();\n  let matchIndex = -1;\n  for (let targetSearchRef = targetRef; targetSearchRef; targetSearchRef = routeParents.get(targetSearchRef)) {\n    matchIndex = match.findIndex(\n      (m) => m.route.routeRefs.has(targetSearchRef)\n    );\n    if (matchIndex !== -1) {\n      break;\n    }\n    refDiffList.unshift(targetSearchRef);\n  }\n  if (refDiffList.length === 0) {\n    matchIndex -= 1;\n  }\n  const parentPath = matchIndex === -1 ? \"\" : match[matchIndex].pathname;\n  const diffPaths = refDiffList.slice(0, -1).map((ref) => {\n    const path = routePaths.get(ref);\n    if (path === void 0) {\n      throw new Error(`No path for ${ref}`);\n    }\n    if (path.includes(\":\")) {\n      throw new Error(\n        `Cannot route to ${targetRef} with parent ${ref} as it has parameters`\n      );\n    }\n    return path;\n  });\n  return `${joinPaths(parentPath, ...diffPaths)}/`;\n}\nclass RouteResolver {\n  constructor(routePaths, routeParents, routeObjects, routeBindings, appBasePath) {\n    this.routePaths = routePaths;\n    this.routeParents = routeParents;\n    this.routeObjects = routeObjects;\n    this.routeBindings = routeBindings;\n    this.appBasePath = appBasePath;\n  }\n  resolve(anyRouteRef, sourceLocation) {\n    const [targetRef, targetPath] = resolveTargetRef(\n      anyRouteRef,\n      this.routePaths,\n      this.routeBindings\n    );\n    if (!targetRef) {\n      return void 0;\n    }\n    let relativeSourceLocation;\n    if (typeof sourceLocation === \"string\") {\n      relativeSourceLocation = this.trimPath(sourceLocation);\n    } else if (sourceLocation.pathname) {\n      relativeSourceLocation = {\n        ...sourceLocation,\n        pathname: this.trimPath(sourceLocation.pathname)\n      };\n    } else {\n      relativeSourceLocation = sourceLocation;\n    }\n    const basePath = this.appBasePath + resolveBasePath(\n      targetRef,\n      relativeSourceLocation,\n      this.routePaths,\n      this.routeParents,\n      this.routeObjects\n    );\n    const routeFunc = (...[params]) => {\n      const encodedParams = params && mapValues(params, (value) => {\n        if (typeof value === \"string\") {\n          return value.replaceAll(/[&?#;\\/]/g, (c) => encodeURIComponent(c));\n        }\n        return value;\n      });\n      return joinPaths(basePath, generatePath(targetPath, encodedParams));\n    };\n    return routeFunc;\n  }\n  trimPath(targetPath) {\n    if (!targetPath) {\n      return targetPath;\n    }\n    if (targetPath.startsWith(this.appBasePath)) {\n      return targetPath.slice(this.appBasePath.length);\n    }\n    return targetPath;\n  }\n}\n\nconst RoutingContext = createVersionedContext(\n  \"routing-context\"\n);\nconst RoutingProvider = ({\n  routePaths,\n  routeParents,\n  routeObjects,\n  routeBindings,\n  basePath = \"\",\n  children\n}) => {\n  const resolver = new RouteResolver(\n    routePaths,\n    routeParents,\n    routeObjects,\n    routeBindings,\n    basePath\n  );\n  const versionedValue = createVersionedValueMap({ 1: resolver });\n  return /* @__PURE__ */ React.createElement(RoutingContext.Provider, { value: versionedValue }, children);\n};\n\nfunction validateRouteParameters(routePaths, routeParents) {\n  const notLeafRoutes = new Set(routeParents.values());\n  notLeafRoutes.delete(void 0);\n  for (const route of routeParents.keys()) {\n    if (notLeafRoutes.has(route)) {\n      continue;\n    }\n    let currentRouteRef = route;\n    let fullPath = \"\";\n    while (currentRouteRef) {\n      const path = routePaths.get(currentRouteRef);\n      if (path === void 0) {\n        throw new Error(`No path for ${currentRouteRef}`);\n      }\n      fullPath = joinPaths(path, fullPath);\n      currentRouteRef = routeParents.get(currentRouteRef);\n    }\n    const params = fullPath.match(/:(\\w+)/g);\n    if (params) {\n      for (let j = 0; j < params.length; j++) {\n        for (let i = j + 1; i < params.length; i++) {\n          if (params[i] === params[j]) {\n            throw new Error(\n              `Parameter ${params[i]} is duplicated in path ${fullPath}`\n            );\n          }\n        }\n      }\n    }\n  }\n}\nfunction validateRouteBindings(routeBindings, plugins) {\n  for (const plugin of plugins) {\n    if (!plugin.externalRoutes) {\n      continue;\n    }\n    for (const [name, externalRouteRef] of Object.entries(\n      plugin.externalRoutes\n    )) {\n      if (externalRouteRef.optional) {\n        continue;\n      }\n      if (!routeBindings.has(externalRouteRef)) {\n        throw new Error(\n          `External route '${name}' of the '${plugin.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`\n        );\n      }\n    }\n  }\n}\n\nconst AppContext = createVersionedContext(\"app-context\");\nconst AppContextProvider = ({\n  appContext,\n  children\n}) => {\n  const versionedValue = createVersionedValueMap({ 1: appContext });\n  return /* @__PURE__ */ React.createElement(AppContext.Provider, { value: versionedValue, children });\n};\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction mkError(thing) {\n  return new Error(\n    `Tried to access IdentityApi ${thing} before app was loaded`\n  );\n}\nfunction logDeprecation(thing) {\n  console.warn(\n    `WARNING: Call to ${thing} is deprecated and will break in the future`\n  );\n}\nclass AppIdentityProxy {\n  constructor() {\n    __publicField$2(this, \"target\");\n    __publicField$2(this, \"waitForTarget\");\n    __publicField$2(this, \"resolveTarget\", () => {\n    });\n    __publicField$2(this, \"signOutTargetUrl\", \"/\");\n    this.waitForTarget = new Promise((resolve) => {\n      this.resolveTarget = resolve;\n    });\n  }\n  // This is called by the app manager once the sign-in page provides us with an implementation\n  setTarget(identityApi, targetOptions) {\n    this.target = identityApi;\n    this.signOutTargetUrl = targetOptions.signOutTargetUrl;\n    this.resolveTarget(identityApi);\n  }\n  getUserId() {\n    if (!this.target) {\n      throw mkError(\"getUserId\");\n    }\n    if (!this.target.getUserId) {\n      throw new Error(\"IdentityApi does not implement getUserId\");\n    }\n    logDeprecation(\"getUserId\");\n    return this.target.getUserId();\n  }\n  getProfile() {\n    if (!this.target) {\n      throw mkError(\"getProfile\");\n    }\n    if (!this.target.getProfile) {\n      throw new Error(\"IdentityApi does not implement getProfile\");\n    }\n    logDeprecation(\"getProfile\");\n    return this.target.getProfile();\n  }\n  async getProfileInfo() {\n    return this.waitForTarget.then((target) => target.getProfileInfo());\n  }\n  async getBackstageIdentity() {\n    const identity = await this.waitForTarget.then(\n      (target) => target.getBackstageIdentity()\n    );\n    if (!identity.userEntityRef.match(/^.*:.*\\/.*$/)) {\n      console.warn(\n        `WARNING: The App IdentityApi provided an invalid userEntityRef, '${identity.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`\n      );\n    }\n    return identity;\n  }\n  async getCredentials() {\n    return this.waitForTarget.then((target) => target.getCredentials());\n  }\n  async getIdToken() {\n    return this.waitForTarget.then((target) => {\n      if (!target.getIdToken) {\n        throw new Error(\"IdentityApi does not implement getIdToken\");\n      }\n      logDeprecation(\"getIdToken\");\n      return target.getIdToken();\n    });\n  }\n  async signOut() {\n    await this.waitForTarget.then((target) => target.signOut());\n    window.location.href = this.signOutTargetUrl;\n  }\n}\n\nfunction resolveTheme(themeId, shouldPreferDark, themes) {\n  if (themeId !== void 0) {\n    const selectedTheme = themes.find((theme) => theme.id === themeId);\n    if (selectedTheme) {\n      return selectedTheme;\n    }\n  }\n  if (shouldPreferDark) {\n    const darkTheme = themes.find((theme) => theme.variant === \"dark\");\n    if (darkTheme) {\n      return darkTheme;\n    }\n  }\n  const lightTheme = themes.find((theme) => theme.variant === \"light\");\n  if (lightTheme) {\n    return lightTheme;\n  }\n  return themes[0];\n}\nconst useShouldPreferDarkTheme = () => {\n  const mediaQuery = useMemo(\n    () => window.matchMedia(\"(prefers-color-scheme: dark)\"),\n    []\n  );\n  const [shouldPreferDark, setPrefersDark] = useState(mediaQuery.matches);\n  useEffect(() => {\n    const listener = (event) => {\n      setPrefersDark(event.matches);\n    };\n    mediaQuery.addListener(listener);\n    return () => {\n      mediaQuery.removeListener(listener);\n    };\n  }, [mediaQuery]);\n  return shouldPreferDark;\n};\nfunction AppThemeProvider({ children }) {\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId()\n  );\n  const shouldPreferDark = Boolean(window.matchMedia) ? useShouldPreferDarkTheme() : false;\n  const appTheme = resolveTheme(\n    themeId,\n    shouldPreferDark,\n    appThemeApi.getInstalledThemes()\n  );\n  if (!appTheme) {\n    throw new Error(\"App has no themes\");\n  }\n  return /* @__PURE__ */ React.createElement(appTheme.Provider, { children });\n}\n\nconst defaultConfigLoader = async () => defaultConfigLoaderSync();\nfunction defaultConfigLoaderSync(runtimeConfigJson = \"__APP_INJECTED_RUNTIME_CONFIG__\") {\n  const appConfig = process.env.APP_CONFIG;\n  if (!appConfig) {\n    throw new Error(\"No static configuration provided\");\n  }\n  if (!Array.isArray(appConfig)) {\n    throw new Error(\"Static configuration has invalid format\");\n  }\n  const configs = appConfig.slice();\n  if (runtimeConfigJson !== \"__app_injected_runtime_config__\".toLocaleUpperCase(\"en-US\")) {\n    try {\n      const data = JSON.parse(runtimeConfigJson);\n      if (Array.isArray(data)) {\n        configs.push(...data);\n      } else {\n        configs.push({ data, context: \"env\" });\n      }\n    } catch (error) {\n      throw new Error(`Failed to load runtime configuration, ${error}`);\n    }\n  }\n  const windowAppConfig = window.__APP_CONFIG__;\n  if (windowAppConfig) {\n    configs.push({\n      context: \"window\",\n      data: windowAppConfig\n    });\n  }\n  return configs;\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ApiRegistryBuilder {\n  constructor() {\n    __publicField$1(this, \"apis\", []);\n  }\n  add(api, impl) {\n    this.apis.push([api.id, impl]);\n    return impl;\n  }\n  build() {\n    return new ApiRegistry(new Map(this.apis));\n  }\n}\nclass ApiRegistry {\n  constructor(apis) {\n    this.apis = apis;\n  }\n  static builder() {\n    return new ApiRegistryBuilder();\n  }\n  /**\n   * Creates a new ApiRegistry with a list of API implementations.\n   *\n   * @param apis - A list of pairs mapping an ApiRef to its respective implementation\n   */\n  static from(apis) {\n    return new ApiRegistry(new Map(apis.map(([api, impl]) => [api.id, impl])));\n  }\n  /**\n   * Creates a new ApiRegistry with a single API implementation.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  static with(api, impl) {\n    return new ApiRegistry(/* @__PURE__ */ new Map([[api.id, impl]]));\n  }\n  /**\n   * Returns a new ApiRegistry with the provided API added to the existing ones.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  with(api, impl) {\n    return new ApiRegistry(new Map([...this.apis, [api.id, impl]]));\n  }\n  get(api) {\n    return this.apis.get(api.id);\n  }\n}\n\nfunction resolveRouteBindings(bindRoutes) {\n  const result = /* @__PURE__ */ new Map();\n  if (bindRoutes) {\n    const bind = (externalRoutes, targetRoutes) => {\n      for (const [key, value] of Object.entries(targetRoutes)) {\n        const externalRoute = externalRoutes[key];\n        if (!externalRoute) {\n          throw new Error(`Key ${key} is not an existing external route`);\n        }\n        if (!value && !externalRoute.optional) {\n          throw new Error(\n            `External route ${key} is required but was undefined`\n          );\n        }\n        if (value) {\n          result.set(externalRoute, value);\n        }\n      }\n    };\n    bindRoutes({ bind });\n  }\n  return result;\n}\n\nvar __accessCheck$2 = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$2 = (obj, member, getter) => {\n  __accessCheck$2(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$2 = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$2 = (obj, member, value, setter) => {\n  __accessCheck$2(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _languages, _language$1, _subject;\nconst STORAGE_KEY = \"language\";\nconst DEFAULT_LANGUAGE = \"en\";\nconst _AppLanguageSelector = class _AppLanguageSelector {\n  constructor(languages, initialLanguage) {\n    __privateAdd$2(this, _languages, void 0);\n    __privateAdd$2(this, _language$1, void 0);\n    __privateAdd$2(this, _subject, void 0);\n    __privateSet$2(this, _languages, languages);\n    __privateSet$2(this, _language$1, initialLanguage);\n    __privateSet$2(this, _subject, new BehaviorSubject({\n      language: __privateGet$2(this, _language$1)\n    }));\n  }\n  static create(options) {\n    var _a, _b;\n    const languages = (_a = options == null ? void 0 : options.availableLanguages) != null ? _a : [DEFAULT_LANGUAGE];\n    if (languages.length !== new Set(languages).size) {\n      throw new Error(\n        `Supported languages may not contain duplicates, got '${languages.join(\n          \"', '\"\n        )}'`\n      );\n    }\n    if (!languages.includes(DEFAULT_LANGUAGE)) {\n      throw new Error(`Supported languages must include '${DEFAULT_LANGUAGE}'`);\n    }\n    const initialLanguage = (_b = options == null ? void 0 : options.defaultLanguage) != null ? _b : DEFAULT_LANGUAGE;\n    if (!languages.includes(initialLanguage)) {\n      throw new Error(\n        `Initial language must be one of the supported languages, got '${initialLanguage}'`\n      );\n    }\n    return new _AppLanguageSelector(languages, initialLanguage);\n  }\n  static createWithStorage(options) {\n    const selector = _AppLanguageSelector.create(options);\n    if (!window.localStorage) {\n      return selector;\n    }\n    const storedLanguage = window.localStorage.getItem(STORAGE_KEY);\n    const { languages } = selector.getAvailableLanguages();\n    if (storedLanguage && languages.includes(storedLanguage)) {\n      selector.setLanguage(storedLanguage);\n    }\n    selector.language$().subscribe(({ language }) => {\n      if (language !== window.localStorage.getItem(STORAGE_KEY)) {\n        window.localStorage.setItem(STORAGE_KEY, language);\n      }\n    });\n    window.addEventListener(\"storage\", (event) => {\n      var _a;\n      if (event.key === STORAGE_KEY) {\n        const language = (_a = localStorage.getItem(STORAGE_KEY)) != null ? _a : void 0;\n        if (language) {\n          selector.setLanguage(language);\n        }\n      }\n    });\n    return selector;\n  }\n  getAvailableLanguages() {\n    return { languages: __privateGet$2(this, _languages).slice() };\n  }\n  setLanguage(language) {\n    const lng = language != null ? language : DEFAULT_LANGUAGE;\n    if (lng === __privateGet$2(this, _language$1)) {\n      return;\n    }\n    if (lng && !__privateGet$2(this, _languages).includes(lng)) {\n      throw new Error(\n        `Failed to change language to '${lng}', available languages are '${__privateGet$2(this, _languages).join(\n          \"', '\"\n        )}'`\n      );\n    }\n    __privateSet$2(this, _language$1, lng);\n    __privateGet$2(this, _subject).next({ language: lng });\n  }\n  getLanguage() {\n    return { language: __privateGet$2(this, _language$1) };\n  }\n  language$() {\n    return __privateGet$2(this, _subject);\n  }\n};\n_languages = new WeakMap();\n_language$1 = new WeakMap();\n_subject = new WeakMap();\nlet AppLanguageSelector = _AppLanguageSelector;\n\nfunction toInternalTranslationResource(resource) {\n  const r = resource;\n  if (r.$$type !== \"@backstage/TranslationResource\") {\n    throw new Error(`Invalid translation resource, bad type '${r.$$type}'`);\n  }\n  if (r.version !== \"v1\") {\n    throw new Error(`Invalid translation resource, bad version '${r.version}'`);\n  }\n  return r;\n}\n\nfunction toInternalTranslationRef(ref) {\n  const r = ref;\n  if (r.$$type !== \"@backstage/TranslationRef\") {\n    throw new Error(`Invalid translation ref, bad type '${r.$$type}'`);\n  }\n  if (r.version !== \"v1\") {\n    throw new Error(`Invalid translation ref, bad version '${r.version}'`);\n  }\n  return r;\n}\n\nvar __accessCheck$1 = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$1 = (obj, member, getter) => {\n  __accessCheck$1(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$1 = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$1 = (obj, member, value, setter) => {\n  __accessCheck$1(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck$1(obj, member, \"access private method\");\n  return method;\n};\nvar _loaded, _loading, _loaders, _getLoaderKey, getLoaderKey_fn, _i18n, _loader, _language, _registeredRefs, _languageChangeListeners, _changeLanguage, changeLanguage_fn, _createSnapshot, createSnapshot_fn, _registerDefaults, registerDefaults_fn;\nfunction removeNulls(messages) {\n  return Object.fromEntries(\n    Object.entries(messages).filter(\n      (e) => e[1] !== null\n    )\n  );\n}\nclass ResourceLoader {\n  constructor(onLoad) {\n    this.onLoad = onLoad;\n    __privateAdd$1(this, _getLoaderKey);\n    /** Loaded resources by loader key */\n    __privateAdd$1(this, _loaded, /* @__PURE__ */ new Set());\n    /** Resource loading promises by loader key */\n    __privateAdd$1(this, _loading, /* @__PURE__ */ new Map());\n    /** Loaders for each resource language */\n    __privateAdd$1(this, _loaders, /* @__PURE__ */ new Map());\n  }\n  addTranslationResource(resource) {\n    const internalResource = toInternalTranslationResource(resource);\n    for (const entry of internalResource.resources) {\n      const key = __privateMethod(this, _getLoaderKey, getLoaderKey_fn).call(this, entry.language, internalResource.id);\n      if (!__privateGet$1(this, _loaders).has(key)) {\n        __privateGet$1(this, _loaders).set(key, entry.loader);\n      }\n    }\n  }\n  needsLoading(language, namespace) {\n    const key = __privateMethod(this, _getLoaderKey, getLoaderKey_fn).call(this, language, namespace);\n    const loader = __privateGet$1(this, _loaders).get(key);\n    if (!loader) {\n      return false;\n    }\n    return !__privateGet$1(this, _loaded).has(key);\n  }\n  async load(language, namespace) {\n    const key = __privateMethod(this, _getLoaderKey, getLoaderKey_fn).call(this, language, namespace);\n    const loader = __privateGet$1(this, _loaders).get(key);\n    if (!loader) {\n      return;\n    }\n    if (__privateGet$1(this, _loaded).has(key)) {\n      return;\n    }\n    const loading = __privateGet$1(this, _loading).get(key);\n    if (loading) {\n      await loading;\n      return;\n    }\n    const load = loader().then(\n      (result) => {\n        this.onLoad({ language, namespace, messages: result.messages });\n        __privateGet$1(this, _loaded).add(key);\n      },\n      (error) => {\n        __privateGet$1(this, _loaded).add(key);\n        throw error;\n      }\n    );\n    __privateGet$1(this, _loading).set(key, load);\n    await load;\n  }\n}\n_loaded = new WeakMap();\n_loading = new WeakMap();\n_loaders = new WeakMap();\n_getLoaderKey = new WeakSet();\ngetLoaderKey_fn = function(language, namespace) {\n  return `${language}/${namespace}`;\n};\nconst _I18nextTranslationApi = class _I18nextTranslationApi {\n  constructor(i18n, loader, language) {\n    __privateAdd$1(this, _changeLanguage);\n    __privateAdd$1(this, _createSnapshot);\n    __privateAdd$1(this, _registerDefaults);\n    __privateAdd$1(this, _i18n, void 0);\n    __privateAdd$1(this, _loader, void 0);\n    __privateAdd$1(this, _language, void 0);\n    /** Keep track of which refs we have registered default resources for */\n    __privateAdd$1(this, _registeredRefs, /* @__PURE__ */ new Set());\n    /** Notify observers when language changes */\n    __privateAdd$1(this, _languageChangeListeners, /* @__PURE__ */ new Set());\n    __privateSet$1(this, _i18n, i18n);\n    __privateSet$1(this, _loader, loader);\n    __privateSet$1(this, _language, language);\n  }\n  static create(options) {\n    const { languages } = options.languageApi.getAvailableLanguages();\n    const i18n = createInstance({\n      fallbackLng: DEFAULT_LANGUAGE,\n      supportedLngs: languages,\n      interpolation: {\n        escapeValue: false\n      },\n      ns: [],\n      defaultNS: false,\n      fallbackNS: false,\n      // Disable resource loading on init, meaning i18n will be ready to use immediately\n      initImmediate: false\n    });\n    i18n.init();\n    if (!i18n.isInitialized) {\n      throw new Error(\"i18next was unexpectedly not initialized\");\n    }\n    const { language: initialLanguage } = options.languageApi.getLanguage();\n    if (initialLanguage !== DEFAULT_LANGUAGE) {\n      i18n.changeLanguage(initialLanguage);\n    }\n    const loader = new ResourceLoader((loaded) => {\n      i18n.addResourceBundle(\n        loaded.language,\n        loaded.namespace,\n        removeNulls(loaded.messages),\n        false,\n        // do not merge with existing translations\n        true\n        // overwrite translations\n      );\n    });\n    const resources = (options == null ? void 0 : options.resources) || [];\n    for (let i = resources.length - 1; i >= 0; i--) {\n      const resource = resources[i];\n      if (resource.$$type === \"@backstage/TranslationResource\") {\n        loader.addTranslationResource(resource);\n      } else if (resource.$$type === \"@backstage/TranslationMessages\") {\n        i18n.addResourceBundle(\n          DEFAULT_LANGUAGE,\n          resource.id,\n          removeNulls(resource.messages),\n          true,\n          // merge with existing translations\n          false\n          // do not overwrite translations\n        );\n      }\n    }\n    const instance = new _I18nextTranslationApi(\n      i18n,\n      loader,\n      options.languageApi.getLanguage().language\n    );\n    options.languageApi.language$().subscribe(({ language }) => {\n      var _a;\n      __privateMethod(_a = instance, _changeLanguage, changeLanguage_fn).call(_a, language);\n    });\n    return instance;\n  }\n  getTranslation(translationRef) {\n    const internalRef = toInternalTranslationRef(translationRef);\n    __privateMethod(this, _registerDefaults, registerDefaults_fn).call(this, internalRef);\n    return __privateMethod(this, _createSnapshot, createSnapshot_fn).call(this, internalRef);\n  }\n  translation$(translationRef) {\n    const internalRef = toInternalTranslationRef(translationRef);\n    __privateMethod(this, _registerDefaults, registerDefaults_fn).call(this, internalRef);\n    return new ObservableImpl((subscriber) => {\n      let loadTicket = {};\n      const loadResource = () => {\n        loadTicket = {};\n        const ticket = loadTicket;\n        __privateGet$1(this, _loader).load(__privateGet$1(this, _language), internalRef.id).then(\n          () => {\n            if (ticket === loadTicket) {\n              const snapshot = __privateMethod(this, _createSnapshot, createSnapshot_fn).call(this, internalRef);\n              if (snapshot.ready) {\n                subscriber.next(snapshot);\n              }\n            }\n          },\n          (error) => {\n            if (ticket === loadTicket) {\n              subscriber.error(Array.isArray(error) ? error[0] : error);\n            }\n          }\n        );\n      };\n      const onChange = () => {\n        const snapshot = __privateMethod(this, _createSnapshot, createSnapshot_fn).call(this, internalRef);\n        if (snapshot.ready) {\n          subscriber.next(snapshot);\n        } else {\n          loadResource();\n        }\n      };\n      if (__privateGet$1(this, _loader).needsLoading(__privateGet$1(this, _language), internalRef.id)) {\n        loadResource();\n      }\n      __privateGet$1(this, _languageChangeListeners).add(onChange);\n      return () => {\n        __privateGet$1(this, _languageChangeListeners).delete(onChange);\n      };\n    });\n  }\n};\n_i18n = new WeakMap();\n_loader = new WeakMap();\n_language = new WeakMap();\n_registeredRefs = new WeakMap();\n_languageChangeListeners = new WeakMap();\n_changeLanguage = new WeakSet();\nchangeLanguage_fn = function(language) {\n  if (__privateGet$1(this, _language) !== language) {\n    __privateSet$1(this, _language, language);\n    __privateGet$1(this, _i18n).changeLanguage(language);\n    __privateGet$1(this, _languageChangeListeners).forEach((listener) => listener());\n  }\n};\n_createSnapshot = new WeakSet();\ncreateSnapshot_fn = function(internalRef) {\n  if (__privateGet$1(this, _loader).needsLoading(__privateGet$1(this, _language), internalRef.id)) {\n    return { ready: false };\n  }\n  const t = __privateGet$1(this, _i18n).getFixedT(\n    null,\n    internalRef.id\n  );\n  return {\n    ready: true,\n    t\n  };\n};\n_registerDefaults = new WeakSet();\nregisterDefaults_fn = function(internalRef) {\n  if (__privateGet$1(this, _registeredRefs).has(internalRef.id)) {\n    return;\n  }\n  __privateGet$1(this, _registeredRefs).add(internalRef.id);\n  const defaultMessages = internalRef.getDefaultMessages();\n  __privateGet$1(this, _i18n).addResourceBundle(\n    DEFAULT_LANGUAGE,\n    internalRef.id,\n    defaultMessages,\n    true,\n    // merge with existing translations\n    false\n    // do not overwrite translations\n  );\n  const defaultResource = internalRef.getDefaultResource();\n  if (defaultResource) {\n    __privateGet$1(this, _loader).addTranslationResource(defaultResource);\n  }\n};\nlet I18nextTranslationApi = _I18nextTranslationApi;\n\nfunction createLocalBaseUrl(fullUrl) {\n  const url = new URL(fullUrl);\n  url.protocol = document.location.protocol;\n  url.hostname = document.location.hostname;\n  url.port = document.location.port;\n  return url.toString().replace(/\\/$/, \"\");\n}\nfunction overrideBaseUrlConfigs(inputConfigs) {\n  const urlConfigReader = ConfigReader.fromConfigs(inputConfigs);\n  const appBaseUrl = urlConfigReader.getOptionalString(\"app.baseUrl\");\n  const backendBaseUrl = urlConfigReader.getOptionalString(\"backend.baseUrl\");\n  let configs = inputConfigs;\n  let newBackendBaseUrl = void 0;\n  let newAppBaseUrl = void 0;\n  if (appBaseUrl && backendBaseUrl) {\n    const appOrigin = new URL(appBaseUrl).origin;\n    const backendOrigin = new URL(backendBaseUrl).origin;\n    if (appOrigin === backendOrigin) {\n      const maybeNewBackendBaseUrl = createLocalBaseUrl(backendBaseUrl);\n      if (backendBaseUrl !== maybeNewBackendBaseUrl) {\n        newBackendBaseUrl = maybeNewBackendBaseUrl;\n      }\n    }\n  }\n  if (appBaseUrl) {\n    const maybeNewAppBaseUrl = createLocalBaseUrl(appBaseUrl);\n    if (appBaseUrl !== maybeNewAppBaseUrl) {\n      newAppBaseUrl = maybeNewAppBaseUrl;\n    }\n  }\n  if (newAppBaseUrl || newBackendBaseUrl) {\n    configs = configs.concat({\n      data: {\n        app: newAppBaseUrl && {\n          baseUrl: newAppBaseUrl\n        },\n        backend: newBackendBaseUrl && {\n          baseUrl: newBackendBaseUrl\n        }\n      },\n      context: \"relative-resolver\"\n    });\n  }\n  return configs;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _getProviderCalled;\nfunction useConfigLoader(configLoader, components, appThemeApi) {\n  var _a;\n  const hasConfig = Boolean(configLoader);\n  const config = useAsync(configLoader || (() => Promise.resolve([])));\n  let noConfigNode = void 0;\n  if (hasConfig && config.loading) {\n    const { Progress } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (config.error) {\n    const { BootErrorPage } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(BootErrorPage, { step: \"load-config\", error: config.error });\n  }\n  const { ThemeProvider = AppThemeProvider } = components;\n  if (noConfigNode) {\n    return {\n      node: /* @__PURE__ */ React.createElement(ApiProvider, { apis: ApiRegistry.with(appThemeApiRef, appThemeApi) }, /* @__PURE__ */ React.createElement(ThemeProvider, null, noConfigNode))\n    };\n  }\n  const configReader = ConfigReader.fromConfigs(\n    ((_a = config.value) == null ? void 0 : _a.length) ? overrideBaseUrlConfigs(config.value) : []\n  );\n  return { api: configReader };\n}\nclass AppContextImpl {\n  constructor(app) {\n    this.app = app;\n  }\n  getPlugins() {\n    return this.app.getPlugins();\n  }\n  getSystemIcon(key) {\n    return this.app.getSystemIcon(key);\n  }\n  getSystemIcons() {\n    return this.app.getSystemIcons();\n  }\n  getComponents() {\n    return this.app.getComponents();\n  }\n}\nclass AppManager {\n  constructor(options) {\n    __publicField(this, \"apiHolder\");\n    __publicField(this, \"configApi\");\n    __publicField(this, \"apis\");\n    __publicField(this, \"icons\");\n    __publicField(this, \"plugins\");\n    __publicField(this, \"featureFlags\");\n    __publicField(this, \"components\");\n    __publicField(this, \"themes\");\n    __publicField(this, \"configLoader\");\n    __publicField(this, \"defaultApis\");\n    __publicField(this, \"bindRoutes\");\n    __publicField(this, \"appLanguageApi\");\n    __publicField(this, \"translationResources\");\n    __publicField(this, \"appIdentityProxy\", new AppIdentityProxy());\n    __publicField(this, \"apiFactoryRegistry\");\n    __privateAdd(this, _getProviderCalled, false);\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n    this.apis = (_a = options.apis) != null ? _a : [];\n    this.icons = options.icons;\n    this.plugins = new Set((_b = options.plugins) != null ? _b : []);\n    this.featureFlags = (_c = options.featureFlags) != null ? _c : [];\n    this.components = options.components;\n    this.themes = options.themes;\n    this.configLoader = (_d = options.configLoader) != null ? _d : defaultConfigLoader;\n    this.defaultApis = (_e = options.defaultApis) != null ? _e : [];\n    this.bindRoutes = options.bindRoutes;\n    this.apiFactoryRegistry = new ApiFactoryRegistry();\n    this.appLanguageApi = AppLanguageSelector.createWithStorage({\n      defaultLanguage: (_f = options.__experimentalTranslations) == null ? void 0 : _f.defaultLanguage,\n      availableLanguages: (_g = options.__experimentalTranslations) == null ? void 0 : _g.availableLanguages\n    });\n    this.translationResources = (_i = (_h = options.__experimentalTranslations) == null ? void 0 : _h.resources) != null ? _i : [];\n  }\n  getPlugins() {\n    return Array.from(this.plugins);\n  }\n  getSystemIcon(key) {\n    return this.icons[key];\n  }\n  getSystemIcons() {\n    return this.icons;\n  }\n  getComponents() {\n    return this.components;\n  }\n  createRoot(element) {\n    const AppProvider = this.getProvider();\n    const AppRoot = () => {\n      return /* @__PURE__ */ React.createElement(AppProvider, null, element);\n    };\n    return AppRoot;\n  }\n  getProvider() {\n    if (__privateGet(this, _getProviderCalled)) {\n      throw new Error(\n        \"app.getProvider() or app.createRoot() has already been called, and can only be called once\"\n      );\n    }\n    __privateSet(this, _getProviderCalled, true);\n    const appContext = new AppContextImpl(this);\n    let routesHaveBeenValidated = false;\n    const Provider = ({ children }) => {\n      const needsFeatureFlagRegistrationRef = useRef(true);\n      const appThemeApi = useMemo(\n        () => AppThemeSelector.createWithStorage(this.themes),\n        []\n      );\n      const { routing, featureFlags, routeBindings } = useMemo(() => {\n        const result = traverseElementTree({\n          root: children,\n          discoverers: [childDiscoverer, routeElementDiscoverer],\n          collectors: {\n            routing: isReactRouterBeta() ? routingV1Collector : routingV2Collector,\n            collectedPlugins: pluginCollector,\n            featureFlags: featureFlagCollector\n          }\n        });\n        result.collectedPlugins.forEach((plugin) => this.plugins.add(plugin));\n        this.verifyPlugins(this.plugins);\n        this.getApiHolder();\n        return {\n          ...result,\n          routeBindings: resolveRouteBindings(this.bindRoutes)\n        };\n      }, [children]);\n      if (!routesHaveBeenValidated) {\n        routesHaveBeenValidated = true;\n        validateRouteParameters(routing.paths, routing.parents);\n        validateRouteBindings(\n          routeBindings,\n          this.plugins\n        );\n      }\n      const loadedConfig = useConfigLoader(\n        this.configLoader,\n        this.components,\n        appThemeApi\n      );\n      const hasConfigApi = \"api\" in loadedConfig;\n      if (hasConfigApi) {\n        const { api } = loadedConfig;\n        this.configApi = api;\n      }\n      if (\"node\" in loadedConfig) {\n        return loadedConfig.node;\n      }\n      if (hasConfigApi && needsFeatureFlagRegistrationRef.current) {\n        needsFeatureFlagRegistrationRef.current = false;\n        const featureFlagsApi = this.getApiHolder().get(featureFlagsApiRef);\n        if (featureFlagsApi) {\n          for (const flag of this.featureFlags) {\n            featureFlagsApi.registerFlag({\n              ...flag,\n              pluginId: \"\"\n            });\n          }\n          for (const plugin of this.plugins.values()) {\n            if (\"getFeatureFlags\" in plugin) {\n              for (const flag of plugin.getFeatureFlags()) {\n                featureFlagsApi.registerFlag({\n                  name: flag.name,\n                  pluginId: plugin.getId()\n                });\n              }\n            } else {\n              for (const output of plugin.output()) {\n                if (output.type === \"feature-flag\") {\n                  featureFlagsApi.registerFlag({\n                    name: output.name,\n                    pluginId: plugin.getId()\n                  });\n                }\n              }\n            }\n          }\n          const registeredFlags = featureFlagsApi.getRegisteredFlags();\n          const flagNames = new Set(registeredFlags.map((f) => f.name));\n          for (const name of featureFlags) {\n            if (!flagNames.has(name)) {\n              featureFlagsApi.registerFlag({ name, pluginId: \"\" });\n            }\n          }\n        }\n      }\n      const { ThemeProvider = AppThemeProvider, Progress } = this.components;\n      return /* @__PURE__ */ React.createElement(ApiProvider, { apis: this.getApiHolder() }, /* @__PURE__ */ React.createElement(AppContextProvider, { appContext }, /* @__PURE__ */ React.createElement(ThemeProvider, null, /* @__PURE__ */ React.createElement(\n        RoutingProvider,\n        {\n          routePaths: routing.paths,\n          routeParents: routing.parents,\n          routeObjects: routing.objects,\n          routeBindings,\n          basePath: getBasePath(loadedConfig.api)\n        },\n        /* @__PURE__ */ React.createElement(\n          InternalAppContext.Provider,\n          {\n            value: {\n              routeObjects: routing.objects,\n              appIdentityProxy: this.appIdentityProxy\n            }\n          },\n          /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, children)\n        )\n      ))));\n    };\n    return Provider;\n  }\n  getRouter() {\n    return AppRouter;\n  }\n  getApiHolder() {\n    if (this.apiHolder) {\n      for (const plugin of this.plugins) {\n        for (const factory of plugin.getApis()) {\n          if (!this.apiFactoryRegistry.get(factory.api)) {\n            this.apiFactoryRegistry.register(\"default\", factory);\n          }\n        }\n      }\n      ApiResolver.validateFactories(\n        this.apiFactoryRegistry,\n        this.apiFactoryRegistry.getAllApis()\n      );\n      return this.apiHolder;\n    }\n    this.apiFactoryRegistry.register(\"static\", {\n      api: appThemeApiRef,\n      deps: {},\n      factory: () => AppThemeSelector.createWithStorage(this.themes)\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: configApiRef,\n      deps: {},\n      factory: () => {\n        if (!this.configApi) {\n          throw new Error(\n            \"Tried to access config API before config was loaded\"\n          );\n        }\n        return this.configApi;\n      }\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: identityApiRef,\n      deps: {},\n      factory: () => this.appIdentityProxy\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: appLanguageApiRef,\n      deps: {},\n      factory: () => this.appLanguageApi\n    });\n    this.apiFactoryRegistry.register(\"default\", {\n      api: translationApiRef,\n      deps: { languageApi: appLanguageApiRef },\n      factory: ({ languageApi }) => I18nextTranslationApi.create({\n        languageApi,\n        resources: this.translationResources\n      })\n    });\n    this.apiFactoryRegistry.register(\"default\", {\n      api: featureFlagsApiRef,\n      deps: {},\n      factory: () => new LocalStorageFeatureFlags()\n    });\n    for (const factory of this.defaultApis) {\n      this.apiFactoryRegistry.register(\"default\", factory);\n    }\n    for (const plugin of this.plugins) {\n      for (const factory of plugin.getApis()) {\n        if (!this.apiFactoryRegistry.register(\"default\", factory)) {\n          throw new Error(\n            `Plugin ${plugin.getId()} tried to register duplicate or forbidden API factory for ${factory.api}`\n          );\n        }\n      }\n    }\n    for (const factory of this.apis) {\n      if (!this.apiFactoryRegistry.register(\"app\", factory)) {\n        throw new Error(\n          `Duplicate or forbidden API factory for ${factory.api} in app`\n        );\n      }\n    }\n    ApiResolver.validateFactories(\n      this.apiFactoryRegistry,\n      this.apiFactoryRegistry.getAllApis()\n    );\n    this.apiHolder = new ApiResolver(this.apiFactoryRegistry);\n    return this.apiHolder;\n  }\n  verifyPlugins(plugins) {\n    const pluginIds = /* @__PURE__ */ new Set();\n    for (const plugin of plugins) {\n      const id = plugin.getId();\n      if (pluginIds.has(id)) {\n        throw new Error(`Duplicate plugin found '${id}'`);\n      }\n      pluginIds.add(id);\n    }\n  }\n}\n_getProviderCalled = new WeakMap();\n\nfunction createSpecializedApp(options) {\n  return new AppManager(options);\n}\n\nlet warned = false;\nconst FlatRoutes = (props) => {\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  const isBeta = useMemo(() => isReactRouterBeta(), []);\n  const routes = useElementFilter(\n    props.children,\n    (elements) => elements.getElements().flatMap((child) => {\n      var _a;\n      let path = child.props.path;\n      if (path === \"\") {\n        return [];\n      }\n      path = (_a = path == null ? void 0 : path.replace(/\\/\\*$/, \"\")) != null ? _a : \"/\";\n      let element = isBeta ? child : child.props.element;\n      if (!isBeta && !element) {\n        element = child;\n        if (!warned && process.env.NODE_ENV !== \"test\") {\n          console.warn(\n            \"DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />.\"\n          );\n          warned = true;\n        }\n      }\n      return [\n        {\n          // Each route matches any sub route, except for the explicit root path\n          path,\n          element,\n          children: child.props.children ? [\n            // These are the children of each route, which we all add in under a catch-all\n            // subroute in order to make them available to `useOutlet`\n            {\n              path: path === \"/\" ? \"/\" : \"*\",\n              // The root path must require an exact match\n              element: child.props.children\n            }\n          ] : void 0\n        }\n      ];\n    }).sort((a, b) => b.path.localeCompare(a.path)).map((obj) => ({ ...obj, path: obj.path === \"/\" ? \"/\" : `${obj.path}/*` }))\n  );\n  const withNotFound = [\n    ...routes,\n    {\n      path: \"*\",\n      element: /* @__PURE__ */ React.createElement(NotFoundErrorPage, null)\n    }\n  ];\n  return useRoutes(withNotFound);\n};\nattachComponentData(FlatRoutes, \"core.type\", \"FlatRoutes\");\n\nexport { AlertApiForwarder, ApiFactoryRegistry, ApiProvider, ApiResolver, AppRouter, AppThemeSelector, AtlassianAuth, BitbucketAuth, BitbucketServerAuth, ErrorAlerter, ErrorApiForwarder, FeatureFlagged, FetchMiddlewares, FlatRoutes, FrontendHostDiscovery, GithubAuth, GitlabAuth, GoogleAuth, LocalStorageFeatureFlags, MicrosoftAuth, MultipleAnalyticsApi, NoOpAnalyticsApi, OAuth2, OAuthRequestManager, OktaAuth, OneLoginAuth, SamlAuth, UnhandledErrorForwarder, UrlPatternDiscovery, WebStorage, createFetchApi, createSpecializedApp, defaultConfigLoader };\n//# sourceMappingURL=index.esm.js.map\n","import { useApi, alertApiRef, identityApiRef, configApiRef, useAnalytics, errorApiRef, storageApiRef, useApp, oauthRequestApiRef, useApiHolder, attachComponentData, useElementFilter, discoveryApiRef } from '@backstage/core-plugin-api';\nimport IconButton from '@material-ui/core/IconButton';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { Alert } from '@material-ui/lab';\nimport pluralize from 'pluralize';\nimport React, { useState, useEffect, useMemo, useRef, useCallback, useLayoutEffect, lazy, Suspense, Component as Component$3, Children, isValidElement, useContext, Fragment, forwardRef, createContext } from 'react';\nimport { useIdleTimer, workerTimers } from 'react-idle-timer';\nimport Button$1 from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MaterialAvatar from '@material-ui/core/Avatar';\nimport { makeStyles, useTheme, darken, lighten, withStyles, createStyles, styled, alpha, ThemeProvider } from '@material-ui/core/styles';\nimport MaterialLink from '@material-ui/core/Link';\nimport classNames from 'classnames';\nimport { trimEnd, isEqual, transform, orderBy, isMatch } from 'lodash';\nimport { Link as Link$1, createRoutesFromChildren, Route as Route$1, useSearchParams, useNavigate, useParams, useRoutes, matchRoutes, useLocation, useResolvedPath as useResolvedPath$1, resolvePath } from 'react-router-dom';\nimport Box from '@material-ui/core/Box';\nimport LightAsync from 'react-syntax-highlighter/dist/esm/light-async';\nimport dark from 'react-syntax-highlighter/dist/esm/styles/hljs/dark';\nimport docco from 'react-syntax-highlighter/dist/esm/styles/hljs/docco';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CopyIcon from '@material-ui/icons/FileCopy';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport AddCircleOutline from '@material-ui/icons/AddCircleOutline';\nimport * as d3Zoom from 'd3-zoom';\nimport * as d3Selection from 'd3-selection';\nimport useTheme$1 from '@material-ui/core/styles/useTheme';\nimport dagre from 'dagre';\nimport debounce from 'lodash/debounce';\nimport makeStyles$1 from '@material-ui/core/styles/makeStyles';\nimport * as d3Shape from 'd3-shape';\nimport isFinite from 'lodash/isFinite';\nimport useObservable from 'react-use/lib/useObservable';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport Grid from '@material-ui/core/Grid';\nimport missingAnnotation from './components/EmptyState/assets/missingAnnotation.svg';\nimport noInformation from './components/EmptyState/assets/noInformation.svg';\nimport createComponent from './components/EmptyState/assets/createComponent.svg';\nimport noBuild from './components/EmptyState/assets/noBuild.svg';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport Divider from '@material-ui/core/Divider';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { createPortal } from 'react-dom';\nimport LinkIcon from '@material-ui/icons/Link';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport { isError, ResponseError, ForwardedError } from '@backstage/errors';\nimport TextTruncate from 'react-text-truncate';\nimport { useIsMounted, useDebouncedEffect, useLocalStorageValue, useAsync, useMountEffect } from '@react-hookz/web';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport ArrowIcon from '@material-ui/icons/ArrowForward';\nimport { Circle, Line } from 'rc-progress';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Chip from '@material-ui/core/Chip';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputBase from '@material-ui/core/InputBase';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport MuiStepper from '@material-ui/core/Stepper';\nimport MuiStep from '@material-ui/core/Step';\nimport StepContent from '@material-ui/core/StepContent';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport startCase from 'lodash/startCase';\nimport Table$1 from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport MenuList from '@material-ui/core/MenuList';\nimport Popover from '@material-ui/core/Popover';\nimport qs from 'qs';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport { Helmet } from 'react-helmet';\nimport TabUI from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport MTable, { MTableHeader, MTableToolbar, MTableBody } from '@material-table/core';\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { Sparklines, SparklinesLine } from 'react-sparklines';\nimport MicDropSvgUrl from './layout/ErrorPage/mic-drop.svg';\nimport MaterialBreadcrumbs from '@material-ui/core/Breadcrumbs';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport Drawer from '@material-ui/core/Drawer';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport Badge from '@material-ui/core/Badge';\nimport TextField from '@material-ui/core/TextField';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport Collapse from '@material-ui/core/Collapse';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport { z } from 'zod';\nimport { useForm } from 'react-hook-form';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport isEmpty from 'lodash/isEmpty';\n\nfunction AlertDisplay(props) {\n  const [messages, setMessages] = useState([]);\n  const alertApi = useApi(alertApiRef);\n  const {\n    anchorOrigin = { vertical: \"top\", horizontal: \"center\" },\n    transientTimeoutMs\n  } = props;\n  const timeoutMs = transientTimeoutMs != null ? transientTimeoutMs : 5e3;\n  useEffect(() => {\n    const subscription = alertApi.alert$().subscribe((message) => setMessages((msgs) => msgs.concat(message)));\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [alertApi]);\n  const [firstMessage] = messages;\n  useEffect(() => {\n    if (firstMessage && firstMessage.display === \"transient\") {\n      const timeout = setTimeout(() => {\n        setMessages((msgs) => {\n          const newMsgs = msgs.filter((msg) => msg !== firstMessage);\n          return newMsgs.length === msgs.length ? msgs : newMsgs;\n        });\n      }, timeoutMs);\n      return () => clearTimeout(timeout);\n    }\n    return void 0;\n  }, [firstMessage, timeoutMs]);\n  if (messages.length === 0) {\n    return null;\n  }\n  const handleClose = () => {\n    setMessages((msgs) => msgs.filter((msg) => msg !== firstMessage));\n  };\n  return /* @__PURE__ */ React.createElement(Snackbar, { open: true, anchorOrigin }, /* @__PURE__ */ React.createElement(\n    Alert,\n    {\n      action: /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          color: \"inherit\",\n          size: \"small\",\n          onClick: handleClose,\n          \"data-testid\": \"error-button-close\"\n        },\n        /* @__PURE__ */ React.createElement(CloseIcon, null)\n      ),\n      severity: firstMessage.severity\n    },\n    /* @__PURE__ */ React.createElement(Typography, { component: \"span\" }, String(firstMessage.message), messages.length > 1 && /* @__PURE__ */ React.createElement(\"em\", null, ` (${messages.length - 1} older ${pluralize(\n      \"message\",\n      messages.length - 1\n    )})`))\n  ));\n}\n\nconst LAST_SEEN_ONLINE_STORAGE_KEY = \"@backstage/autologout:lastSeenOnline\";\nconst useLogoutDisconnectedUserEffect = ({\n  enableEffect,\n  autologoutIsEnabled,\n  idleTimeoutSeconds,\n  lastSeenOnlineStore,\n  identityApi\n}) => {\n  useEffect(() => {\n    if (autologoutIsEnabled && enableEffect) {\n      const lastSeenOnline = lastSeenOnlineStore.get();\n      if (lastSeenOnline) {\n        const now = /* @__PURE__ */ new Date();\n        const nowSeconds = Math.ceil(now.getTime() / 1e3);\n        const lastSeenOnlineSeconds = Math.ceil(\n          lastSeenOnline.getTime() / 1e3\n        );\n        if (nowSeconds - lastSeenOnlineSeconds > idleTimeoutSeconds) {\n          identityApi.signOut();\n        }\n      }\n      lastSeenOnlineStore.save(/* @__PURE__ */ new Date());\n    } else {\n      lastSeenOnlineStore.delete();\n    }\n  }, [\n    autologoutIsEnabled,\n    enableEffect,\n    identityApi,\n    idleTimeoutSeconds,\n    lastSeenOnlineStore\n  ]);\n};\n\nconst StillTherePrompt = (props) => {\n  const {\n    idleTimer,\n    setOpen,\n    open,\n    promptTimeoutMillis,\n    remainingTime,\n    setRemainingTime\n  } = props;\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setRemainingTime(Math.ceil(idleTimer.getRemainingTime()));\n    }, 500);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [idleTimer, setRemainingTime]);\n  const handleStillHere = () => {\n    setOpen(false);\n    idleTimer.activate();\n  };\n  const timeTillPrompt = Math.max(\n    remainingTime - promptTimeoutMillis / 1e3,\n    0\n  );\n  const seconds = timeTillPrompt > 1 ? \"seconds\" : \"second\";\n  return /* @__PURE__ */ React.createElement(Dialog, { open, \"data-testid\": \"inactivity-prompt-dialog\" }, /* @__PURE__ */ React.createElement(DialogTitle, null, \"Logging out due to inactivity\"), /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"You are about to be disconnected in\", \" \", /* @__PURE__ */ React.createElement(\"b\", null, Math.ceil(remainingTime / 1e3), \" \", seconds), \". Are you still there?\")), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      onClick: handleStillHere,\n      color: \"secondary\",\n      variant: \"contained\",\n      size: \"small\"\n    },\n    \"Yes! Don't log me out\"\n  )));\n};\n\nclass DefaultTimestampStore {\n  constructor(key) {\n    this.key = key;\n  }\n  save(date) {\n    localStorage.setItem(this.key, date.toJSON());\n  }\n  delete() {\n    localStorage.removeItem(this.key);\n  }\n  get() {\n    const timestamp = localStorage.getItem(this.key);\n    return timestamp !== null ? new Date(Date.parse(timestamp)) : null;\n  }\n}\n\nconst ConditionalAutoLogout = ({\n  idleTimeoutMinutes,\n  events,\n  useWorkerTimers,\n  logoutIfDisconnected,\n  promptBeforeIdleSeconds,\n  promptOpen,\n  setPromptOpen,\n  remainingTimeCountdown,\n  setRemainingTimeCountdown,\n  identityApi,\n  lastSeenOnlineStore\n}) => {\n  const promptBeforeIdleMillis = promptBeforeIdleSeconds * 1e3;\n  const promptBeforeIdle = promptBeforeIdleMillis > 0 ? true : false;\n  const onPrompt = async () => {\n    setPromptOpen(true);\n    setRemainingTimeCountdown(promptBeforeIdleMillis);\n  };\n  const onIdle = () => {\n    setPromptOpen(false);\n    setRemainingTimeCountdown(0);\n    identityApi.signOut();\n  };\n  const onActive = () => {\n    setPromptOpen(false);\n    setRemainingTimeCountdown(0);\n  };\n  const onAction = (_event, _idleTimer) => {\n    lastSeenOnlineStore.save(/* @__PURE__ */ new Date());\n  };\n  const timer = useIdleTimer({\n    timeout: idleTimeoutMinutes * 60 * 1e3,\n    events,\n    crossTab: true,\n    name: \"autologout-timer\",\n    timers: useWorkerTimers ? workerTimers : void 0,\n    onIdle,\n    onActive: promptBeforeIdle ? onActive : void 0,\n    onAction: logoutIfDisconnected ? onAction : void 0,\n    onPrompt: promptBeforeIdle ? onPrompt : void 0,\n    promptBeforeIdle: promptBeforeIdle ? promptBeforeIdleMillis : void 0,\n    syncTimers: 1e3\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, promptBeforeIdle && /* @__PURE__ */ React.createElement(\n    StillTherePrompt,\n    {\n      idleTimer: timer,\n      open: promptOpen,\n      setOpen: setPromptOpen,\n      remainingTime: remainingTimeCountdown,\n      setRemainingTime: setRemainingTimeCountdown,\n      promptTimeoutMillis: promptBeforeIdleMillis\n    }\n  ));\n};\nconst defaultConfig = {\n  enabled: true,\n  idleTimeoutMinutes: 0.5,\n  promptBeforeIdleSeconds: 10,\n  useWorkerTimers: true,\n  logoutIfDisconnected: true\n};\nconst defaultTrackedEvents = [\n  \"mousemove\",\n  \"keydown\",\n  \"wheel\",\n  \"DOMMouseScroll\",\n  \"mousewheel\",\n  \"mousedown\",\n  \"touchstart\",\n  \"touchmove\",\n  \"MSPointerDown\",\n  \"MSPointerMove\",\n  \"visibilitychange\"\n];\nconst parseConfig = (configApi, props) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;\n  return {\n    enabled: (_b = (_a = configApi.getOptionalBoolean(\"auth.autologout.enabled\")) != null ? _a : props.enabled) != null ? _b : defaultConfig.enabled,\n    idleTimeoutMinutes: (_d = (_c = configApi.getOptionalNumber(\"auth.autologout.idleTimeoutMinutes\")) != null ? _c : props.idleTimeoutMinutes) != null ? _d : defaultConfig.idleTimeoutMinutes,\n    promptBeforeIdleSeconds: (_f = (_e = configApi.getOptionalNumber(\"auth.autologout.promptBeforeIdleSeconds\")) != null ? _e : props.promptBeforeIdleSeconds) != null ? _f : defaultConfig.promptBeforeIdleSeconds,\n    useWorkerTimers: (_h = (_g = configApi.getOptionalBoolean(\"auth.autologout.useWorkerTimers\")) != null ? _g : props.useWorkerTimers) != null ? _h : defaultConfig.useWorkerTimers,\n    logoutIfDisconnected: (_j = (_i = configApi.getOptionalBoolean(\"auth.autologout.logoutIfDisconnected\")) != null ? _i : props.logoutIfDisconnected) != null ? _j : defaultConfig.logoutIfDisconnected\n  };\n};\nconst AutoLogout = (props) => {\n  const identityApi = useApi(identityApiRef);\n  const configApi = useApi(configApiRef);\n  const [isLogged, setIsLogged] = useState(false);\n  useEffect(() => {\n    async function isLoggedIn(identity) {\n      if ((await identity.getCredentials()).token) {\n        setIsLogged(true);\n      } else {\n        setIsLogged(false);\n      }\n    }\n    isLoggedIn(identityApi);\n  }, [identityApi]);\n  const {\n    enabled,\n    idleTimeoutMinutes,\n    promptBeforeIdleSeconds,\n    logoutIfDisconnected,\n    useWorkerTimers\n  } = useMemo(() => {\n    return parseConfig(configApi, props);\n  }, [configApi, props]);\n  useEffect(() => {\n    if (idleTimeoutMinutes < 0.5) {\n      throw new Error(\n        \"\\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).\"\n      );\n    }\n    if (promptBeforeIdleSeconds < 0) {\n      throw new Error(\n        \"\\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.\"\n      );\n    }\n    if (idleTimeoutMinutes * 60 <= promptBeforeIdleSeconds) {\n      throw new Error(\n        `\\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes`\n      );\n    }\n  }, [idleTimeoutMinutes, promptBeforeIdleSeconds]);\n  const lastSeenOnlineStore = useMemo(\n    () => new DefaultTimestampStore(LAST_SEEN_ONLINE_STORAGE_KEY),\n    []\n  );\n  const [promptOpen, setPromptOpen] = useState(false);\n  const [remainingTimeCountdown, setRemainingTimeCountdown] = useState(0);\n  useLogoutDisconnectedUserEffect({\n    enableEffect: logoutIfDisconnected,\n    autologoutIsEnabled: enabled && isLogged,\n    idleTimeoutSeconds: idleTimeoutMinutes * 60,\n    lastSeenOnlineStore,\n    identityApi\n  });\n  if (!enabled || !isLogged) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\n    ConditionalAutoLogout,\n    {\n      idleTimeoutMinutes,\n      promptBeforeIdleSeconds,\n      useWorkerTimers,\n      events: defaultTrackedEvents,\n      logoutIfDisconnected,\n      promptOpen,\n      setPromptOpen,\n      remainingTimeCountdown,\n      setRemainingTimeCountdown,\n      identityApi,\n      lastSeenOnlineStore\n    }\n  );\n};\n\nfunction stringToColor(str) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let color = \"#\";\n  for (let i = 0; i < 3; i++) {\n    const value = hash >> i * 8 & 255;\n    color += `00${value.toString(16)}`.slice(-2);\n  }\n  return color;\n}\nfunction extractInitials(name) {\n  var _a;\n  const names = name.trim().split(\" \");\n  const firstName = (_a = names[0]) != null ? _a : \"\";\n  const lastName = names.length > 1 ? names[names.length - 1] : \"\";\n  return firstName && lastName ? `${firstName.charAt(0)}${lastName.charAt(0)}` : firstName.charAt(0);\n}\n\nconst useStyles$O = makeStyles(\n  (theme) => ({\n    avatar: {\n      width: \"4rem\",\n      height: \"4rem\",\n      color: theme.palette.common.white\n    },\n    avatarText: {\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: \"1px\",\n      textTransform: \"uppercase\"\n    }\n  }),\n  { name: \"BackstageAvatar\" }\n);\nfunction Avatar(props) {\n  const { displayName, picture, customStyles } = props;\n  const classes = useStyles$O();\n  let styles = { ...customStyles };\n  const fontStyles = {\n    fontFamily: styles.fontFamily,\n    fontSize: styles.fontSize,\n    fontWeight: styles.fontWeight\n  };\n  if (!picture) {\n    styles = {\n      backgroundColor: stringToColor(displayName || \"\"),\n      ...customStyles\n    };\n  }\n  return /* @__PURE__ */ React.createElement(\n    MaterialAvatar,\n    {\n      alt: displayName,\n      src: picture,\n      className: classes.avatar,\n      style: styles\n    },\n    displayName && /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"h6\",\n        component: \"span\",\n        className: classes.avatarText,\n        style: fontStyles\n      },\n      extractInitials(displayName)\n    )\n  );\n}\n\nfunction isReactRouterBeta() {\n  const [obj] = createRoutesFromChildren(/* @__PURE__ */ React.createElement(Route$1, { index: true, element: /* @__PURE__ */ React.createElement(\"div\", null) }));\n  return !obj.index;\n}\nconst useStyles$N = makeStyles(\n  {\n    visuallyHidden: {\n      clip: \"rect(0 0 0 0)\",\n      clipPath: \"inset(50%)\",\n      overflow: \"hidden\",\n      position: \"absolute\",\n      whiteSpace: \"nowrap\",\n      height: 1,\n      width: 1\n    },\n    externalLink: {\n      position: \"relative\"\n    }\n  },\n  { name: \"Link\" }\n);\nconst isExternalUri = (uri) => /^([a-z+.-]+):/.test(uri);\nconst scriptProtocolPattern = (\n  // eslint-disable-next-line no-control-regex\n  /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*\\:/i\n);\nconst originalWindowOpen = window.open;\nif (originalWindowOpen && !originalWindowOpen.__backstage) {\n  const newOpen = function open(...args) {\n    const url = String(args[0]);\n    if (scriptProtocolPattern.test(url)) {\n      throw new Error(\n        \"Rejected window.open() with a javascript: URL as a security precaution\"\n      );\n    }\n    return originalWindowOpen.apply(this, args);\n  };\n  newOpen.__backstage = true;\n  window.open = newOpen;\n}\nconst useBaseUrl = () => {\n  try {\n    const config = useApi(configApiRef);\n    return config.getOptionalString(\"app.baseUrl\");\n  } catch {\n    return void 0;\n  }\n};\nconst useBasePath = () => {\n  var _a;\n  const base = \"http://sample.dev\";\n  const url = (_a = useBaseUrl()) != null ? _a : \"/\";\n  const { pathname } = new URL(url, base);\n  return trimEnd(pathname, \"/\");\n};\nconst useResolvedPath = (uri) => {\n  let resolvedPath = String(uri);\n  const basePath = useBasePath();\n  const external = isExternalUri(resolvedPath);\n  const startsWithBasePath = resolvedPath.startsWith(basePath);\n  if (!external && !startsWithBasePath) {\n    resolvedPath = basePath.concat(resolvedPath);\n  }\n  return resolvedPath;\n};\nconst getNodeText = (node) => {\n  var _a;\n  if (node instanceof Array) {\n    return node.map(getNodeText).join(\" \").trim();\n  }\n  if (typeof node === \"object\" && node) {\n    return getNodeText((_a = node == null ? void 0 : node.props) == null ? void 0 : _a.children);\n  }\n  if ([\"string\", \"number\"].includes(typeof node)) {\n    return String(node);\n  }\n  return \"\";\n};\nconst Link = React.forwardRef(\n  ({ onClick, noTrack, ...props }, ref) => {\n    const classes = useStyles$N();\n    const analytics = useAnalytics();\n    const to = isReactRouterBeta() ? useResolvedPath(props.to) : props.to;\n    const linkText = getNodeText(props.children) || to;\n    const external = isExternalUri(to);\n    const newWindow = external && !!/^https?:/.exec(to);\n    if (scriptProtocolPattern.test(to)) {\n      throw new Error(\n        \"Link component rejected javascript: URL as a security precaution\"\n      );\n    }\n    const handleClick = (event) => {\n      onClick == null ? void 0 : onClick(event);\n      if (!noTrack) {\n        analytics.captureEvent(\"click\", linkText, { attributes: { to } });\n      }\n    };\n    return external ? (\n      // External links\n      /* @__PURE__ */ React.createElement(\n        MaterialLink,\n        {\n          ...newWindow ? { target: \"_blank\", rel: \"noopener\" } : {},\n          ...props,\n          ...props[\"aria-label\"] ? { \"aria-label\": `${props[\"aria-label\"]}, Opens in a new window` } : {},\n          ref,\n          href: to,\n          onClick: handleClick,\n          className: classNames(classes.externalLink, props.className)\n        },\n        props.children,\n        /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.visuallyHidden }, \", Opens in a new window\")\n      )\n    ) : (\n      // Interact with React Router for internal links\n      /* @__PURE__ */ React.createElement(\n        MaterialLink,\n        {\n          ...props,\n          ref,\n          component: Link$1,\n          to,\n          onClick: handleClick\n        }\n      )\n    );\n  }\n);\n\nconst LinkWrapper = React.forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Link, { ref, ...props, color: \"initial\" }));\nconst LinkButton = React.forwardRef(\n  (props, ref) => /* @__PURE__ */ React.createElement(Button$1, { ref, component: LinkWrapper, ...props })\n);\nconst Button = LinkButton;\n\nfunction CopyTextButton(props) {\n  const {\n    text,\n    tooltipDelay = 1e3,\n    tooltipText = \"Text copied to clipboard\",\n    \"aria-label\": ariaLabel = \"Copy text\"\n  } = props;\n  const errorApi = useApi(errorApiRef);\n  const [open, setOpen] = useState(false);\n  const [{ error }, copyToClipboard] = useCopyToClipboard();\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  const handleCopyClick = (e) => {\n    e.stopPropagation();\n    setOpen(true);\n    copyToClipboard(text);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      id: \"copy-test-tooltip\",\n      title: tooltipText,\n      placement: \"top\",\n      leaveDelay: tooltipDelay,\n      onClose: () => setOpen(false),\n      open\n    },\n    /* @__PURE__ */ React.createElement(IconButton, { onClick: handleCopyClick, \"aria-label\": ariaLabel }, /* @__PURE__ */ React.createElement(CopyIcon, null))\n  ));\n}\n\nfunction CodeSnippet(props) {\n  const {\n    text,\n    language,\n    showLineNumbers = false,\n    highlightedNumbers,\n    customStyle,\n    showCopyCodeButton = false\n  } = props;\n  const theme = useTheme();\n  const mode = theme.palette.type === \"dark\" ? dark : docco;\n  const highlightColor = theme.palette.type === \"dark\" ? \"#256bf3\" : \"#e6ffed\";\n  return /* @__PURE__ */ React.createElement(Box, { position: \"relative\" }, /* @__PURE__ */ React.createElement(\n    LightAsync,\n    {\n      customStyle,\n      language,\n      style: mode,\n      showLineNumbers,\n      wrapLines: true,\n      lineNumberStyle: { color: theme.palette.textVerySubtle },\n      lineProps: (lineNumber) => (highlightedNumbers == null ? void 0 : highlightedNumbers.includes(lineNumber)) ? {\n        style: {\n          backgroundColor: highlightColor\n        }\n      } : {}\n    },\n    text\n  ), showCopyCodeButton && /* @__PURE__ */ React.createElement(Box, { position: \"absolute\", top: 0, right: 0 }, /* @__PURE__ */ React.createElement(CopyTextButton, { text })));\n}\n\nfunction CreateButton(props) {\n  const { title, to } = props;\n  const isXSScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"xs\")\n  );\n  if (!to) {\n    return null;\n  }\n  return isXSScreen ? /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      component: Link$1,\n      color: \"primary\",\n      title,\n      size: \"small\",\n      to\n    },\n    /* @__PURE__ */ React.createElement(AddCircleOutline, null)\n  ) : /* @__PURE__ */ React.createElement(Button$1, { component: Link$1, variant: \"contained\", color: \"primary\", to }, title);\n}\n\nvar DependencyGraphTypes;\n((DependencyGraphTypes2) => {\n  ((Direction2) => {\n    Direction2[\"TOP_BOTTOM\"] = \"TB\";\n    Direction2[\"BOTTOM_TOP\"] = \"BT\";\n    Direction2[\"LEFT_RIGHT\"] = \"LR\";\n    Direction2[\"RIGHT_LEFT\"] = \"RL\";\n  })(DependencyGraphTypes2.Direction || (DependencyGraphTypes2.Direction = {}));\n  ((Alignment2) => {\n    Alignment2[\"UP_LEFT\"] = \"UL\";\n    Alignment2[\"UP_RIGHT\"] = \"UR\";\n    Alignment2[\"DOWN_LEFT\"] = \"DL\";\n    Alignment2[\"DOWN_RIGHT\"] = \"DR\";\n  })(DependencyGraphTypes2.Alignment || (DependencyGraphTypes2.Alignment = {}));\n  ((Ranker2) => {\n    Ranker2[\"NETWORK_SIMPLEX\"] = \"network-simplex\";\n    Ranker2[\"TIGHT_TREE\"] = \"tight-tree\";\n    Ranker2[\"LONGEST_PATH\"] = \"longest-path\";\n  })(DependencyGraphTypes2.Ranker || (DependencyGraphTypes2.Ranker = {}));\n  ((LabelPosition2) => {\n    LabelPosition2[\"LEFT\"] = \"l\";\n    LabelPosition2[\"RIGHT\"] = \"r\";\n    LabelPosition2[\"CENTER\"] = \"c\";\n  })(DependencyGraphTypes2.LabelPosition || (DependencyGraphTypes2.LabelPosition = {}));\n})(DependencyGraphTypes || (DependencyGraphTypes = {}));\n\nconst useStyles$M = makeStyles(\n  (theme) => ({\n    node: {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light\n    },\n    text: {\n      fill: theme.palette.primary.contrastText\n    }\n  }),\n  { name: \"BackstageDependencyGraphDefaultNode\" }\n);\nfunction DefaultNode({ node: { id } }) {\n  const classes = useStyles$M();\n  const [width, setWidth] = React.useState(0);\n  const [height, setHeight] = React.useState(0);\n  const idRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const padding = 10;\n  const paddedWidth = width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  return /* @__PURE__ */ React.createElement(\"g\", null, /* @__PURE__ */ React.createElement(\n    \"rect\",\n    {\n      className: classes.node,\n      width: paddedWidth,\n      height: paddedHeight,\n      rx: 10\n    }\n  ), /* @__PURE__ */ React.createElement(\n    \"text\",\n    {\n      ref: idRef,\n      className: classes.text,\n      y: paddedHeight / 2,\n      x: paddedWidth / 2,\n      textAnchor: \"middle\",\n      alignmentBaseline: \"middle\"\n    },\n    id\n  ));\n}\n\nconst ARROW_MARKER_ID = \"arrow-marker\";\nconst NODE_TEST_ID = \"node\";\nconst EDGE_TEST_ID = \"edge\";\nconst LABEL_TEST_ID = \"label\";\n\nconst useStyles$L = makeStyles$1(\n  (theme) => ({\n    node: {\n      transition: `${theme.transitions.duration.shortest}ms`\n    }\n  }),\n  { name: \"BackstageDependencyGraphNode\" }\n);\nconst renderDefault$1 = (props) => /* @__PURE__ */ React.createElement(DefaultNode, { ...props });\nfunction Node({\n  render = renderDefault$1,\n  setNode,\n  node\n}) {\n  const { width, height, x = 0, y = 0 } = node;\n  const nodeProps = node;\n  const classes = useStyles$L();\n  const nodeRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (nodeRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = nodeRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setNode(node.id, {\n          ...node,\n          height: renderedHeight,\n          width: renderedWidth\n        });\n      }\n    }\n  }, [node, width, height, setNode]);\n  return /* @__PURE__ */ React.createElement(\n    \"g\",\n    {\n      ref: nodeRef,\n      \"data-testid\": NODE_TEST_ID,\n      className: classes.node,\n      transform: `translate(${x - width / 2},${y - height / 2})`\n    },\n    render({ node: nodeProps })\n  );\n}\n\nconst useStyles$K = makeStyles$1(\n  (theme) => ({\n    text: {\n      fill: theme.palette.textContrast\n    }\n  }),\n  { name: \"BackstageDependencyGraphDefaultLabel\" }\n);\nfunction DefaultLabel({ edge: { label } }) {\n  const classes = useStyles$K();\n  return /* @__PURE__ */ React.createElement(\"text\", { className: classes.text, textAnchor: \"middle\" }, label);\n}\n\nconst useStyles$J = makeStyles$1(\n  (theme) => ({\n    path: {\n      strokeWidth: 1,\n      stroke: theme.palette.textSubtle,\n      fill: \"none\",\n      transition: `${theme.transitions.duration.shortest}ms`\n    },\n    label: {\n      transition: `${theme.transitions.duration.shortest}ms`\n    }\n  }),\n  { name: \"BackstageDependencyGraphEdge\" }\n);\nconst renderDefault = (props) => /* @__PURE__ */ React.createElement(DefaultLabel, { ...props });\nfunction Edge({\n  render = renderDefault,\n  setEdge,\n  id,\n  edge,\n  curve\n}) {\n  const { x = 0, y = 0, width, height, points } = edge;\n  const labelProps = edge;\n  const classes = useStyles$J();\n  const labelRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (labelRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = labelRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setEdge(id, {\n          ...edge,\n          height: renderedHeight,\n          width: renderedWidth\n        });\n      }\n    }\n  }, [edge, height, width, setEdge, id]);\n  let path = \"\";\n  const createPath = React.useMemo(\n    () => d3Shape.line().x((d) => d.x).y((d) => d.y).curve(d3Shape[curve]),\n    [curve]\n  );\n  if (points) {\n    const finitePoints = points.filter(\n      (point) => isFinite(point.x) && isFinite(point.y)\n    );\n    path = createPath(finitePoints) || \"\";\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, path && /* @__PURE__ */ React.createElement(\"path\", { \"data-testid\": EDGE_TEST_ID, className: classes.path, d: path }), labelProps.label ? /* @__PURE__ */ React.createElement(\n    \"g\",\n    {\n      ref: labelRef,\n      \"data-testid\": LABEL_TEST_ID,\n      className: classes.label,\n      transform: `translate(${x},${y})`\n    },\n    render({ edge: labelProps })\n  ) : null);\n}\n\nconst WORKSPACE_ID = \"workspace\";\nfunction DependencyGraph(props) {\n  var _a, _b;\n  const {\n    edges,\n    nodes,\n    renderNode,\n    direction = DependencyGraphTypes.Direction.TOP_BOTTOM,\n    align,\n    nodeMargin = 50,\n    edgeMargin = 10,\n    rankMargin = 50,\n    paddingX = 0,\n    paddingY = 0,\n    acyclicer,\n    ranker = DependencyGraphTypes.Ranker.NETWORK_SIMPLEX,\n    labelPosition = DependencyGraphTypes.LabelPosition.RIGHT,\n    labelOffset = 10,\n    edgeRanks = 1,\n    edgeWeight = 1,\n    renderLabel,\n    defs,\n    zoom = \"enabled\",\n    curve = \"curveMonotoneX\",\n    fit = \"grow\",\n    ...svgProps\n  } = props;\n  const theme = useTheme$1();\n  const [containerWidth, setContainerWidth] = React.useState(100);\n  const [containerHeight, setContainerHeight] = React.useState(100);\n  const graph = React.useRef(new dagre.graphlib.Graph());\n  const [graphWidth, setGraphWidth] = React.useState(\n    ((_a = graph.current.graph()) == null ? void 0 : _a.width) || 0\n  );\n  const [graphHeight, setGraphHeight] = React.useState(\n    ((_b = graph.current.graph()) == null ? void 0 : _b.height) || 0\n  );\n  const [graphNodes, setGraphNodes] = React.useState([]);\n  const [graphEdges, setGraphEdges] = React.useState([]);\n  const maxWidth = Math.max(graphWidth, containerWidth);\n  const maxHeight = Math.max(graphHeight, containerHeight);\n  const minHeight = Math.min(graphHeight, containerHeight);\n  const scalableHeight = fit === \"grow\" ? maxHeight : minHeight;\n  const containerRef = React.useMemo(\n    () => debounce((node) => {\n      if (!node) {\n        return;\n      }\n      const container = d3Selection.select(node);\n      const workspace = d3Selection.select(node.getElementById(WORKSPACE_ID));\n      function enableZoom() {\n        container.call(\n          d3Zoom.zoom().scaleExtent([1, Infinity]).on(\"zoom\", (event) => {\n            event.transform.x = Math.min(\n              0,\n              Math.max(\n                event.transform.x,\n                maxWidth - maxWidth * event.transform.k\n              )\n            );\n            event.transform.y = Math.min(\n              0,\n              Math.max(\n                event.transform.y,\n                maxHeight - maxHeight * event.transform.k\n              )\n            );\n            workspace.attr(\"transform\", event.transform);\n          })\n        );\n      }\n      if (zoom === \"enabled\") {\n        enableZoom();\n      } else if (zoom === \"enable-on-click\") {\n        container.on(\"click\", () => enableZoom());\n      }\n      const { width: newContainerWidth, height: newContainerHeight } = node.getBoundingClientRect();\n      if (containerWidth !== newContainerWidth) {\n        setContainerWidth(newContainerWidth);\n      }\n      if (containerHeight !== newContainerHeight) {\n        setContainerHeight(newContainerHeight);\n      }\n    }, 100),\n    [containerHeight, containerWidth, maxWidth, maxHeight, zoom]\n  );\n  const setNodesAndEdges = React.useCallback(() => {\n    const currentGraphNodes = graph.current.nodes();\n    const currentGraphEdges = graph.current.edges();\n    currentGraphNodes.forEach((nodeId) => {\n      const remainingNode = nodes.some((node) => node.id === nodeId);\n      if (!remainingNode) {\n        graph.current.removeNode(nodeId);\n      }\n    });\n    currentGraphEdges.forEach((e) => {\n      const remainingEdge = edges.some(\n        (edge) => edge.from === e.v && edge.to === e.w\n      );\n      if (!remainingEdge) {\n        graph.current.removeEdge(e.v, e.w);\n      }\n    });\n    nodes.forEach((node) => {\n      const existingNode = graph.current.nodes().find((nodeId) => node.id === nodeId);\n      if (existingNode && graph.current.node(existingNode)) {\n        const { width, height, x, y } = graph.current.node(existingNode);\n        graph.current.setNode(existingNode, { ...node, width, height, x, y });\n      } else {\n        graph.current.setNode(node.id, { ...node, width: 0, height: 0 });\n      }\n    });\n    edges.forEach((e) => {\n      graph.current.setEdge(e.from, e.to, {\n        ...e,\n        label: e.label,\n        width: 0,\n        height: 0,\n        labelpos: labelPosition,\n        labeloffset: labelOffset,\n        weight: edgeWeight,\n        minlen: edgeRanks\n      });\n    });\n  }, [edges, nodes, labelPosition, labelOffset, edgeWeight, edgeRanks]);\n  const updateGraph = React.useMemo(\n    () => debounce(\n      () => {\n        dagre.layout(graph.current);\n        const { height, width } = graph.current.graph();\n        const newHeight = Math.max(0, height || 0);\n        const newWidth = Math.max(0, width || 0);\n        setGraphWidth(newWidth);\n        setGraphHeight(newHeight);\n        setGraphNodes(graph.current.nodes());\n        setGraphEdges(graph.current.edges());\n      },\n      250,\n      { leading: true }\n    ),\n    []\n  );\n  React.useEffect(() => {\n    graph.current.setGraph({\n      rankdir: direction,\n      align,\n      nodesep: nodeMargin,\n      edgesep: edgeMargin,\n      ranksep: rankMargin,\n      marginx: paddingX,\n      marginy: paddingY,\n      acyclicer,\n      ranker\n    });\n    setNodesAndEdges();\n    updateGraph();\n    return updateGraph.cancel;\n  }, [\n    acyclicer,\n    align,\n    direction,\n    edgeMargin,\n    paddingX,\n    paddingY,\n    nodeMargin,\n    rankMargin,\n    ranker,\n    setNodesAndEdges,\n    updateGraph\n  ]);\n  function setNode(id, node) {\n    graph.current.setNode(id, node);\n    updateGraph();\n    return graph.current;\n  }\n  function setEdge(id, edge) {\n    graph.current.setEdge(id, edge);\n    updateGraph();\n    return graph.current;\n  }\n  return /* @__PURE__ */ React.createElement(\n    \"svg\",\n    {\n      ref: containerRef,\n      ...svgProps,\n      width: \"100%\",\n      height: scalableHeight,\n      viewBox: `0 0 ${maxWidth} ${maxHeight}`\n    },\n    /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\n      \"marker\",\n      {\n        id: ARROW_MARKER_ID,\n        viewBox: \"0 0 24 24\",\n        markerWidth: \"14\",\n        markerHeight: \"14\",\n        refX: \"16\",\n        refY: \"12\",\n        orient: \"auto\",\n        markerUnits: \"strokeWidth\"\n      },\n      /* @__PURE__ */ React.createElement(\n        \"path\",\n        {\n          fill: theme.palette.textSubtle,\n          d: \"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"\n        }\n      )\n    ), defs),\n    /* @__PURE__ */ React.createElement(\"g\", { id: WORKSPACE_ID }, /* @__PURE__ */ React.createElement(\n      \"svg\",\n      {\n        width: graphWidth,\n        height: graphHeight,\n        y: maxHeight / 2 - graphHeight / 2,\n        x: maxWidth / 2 - graphWidth / 2,\n        viewBox: `0 0 ${graphWidth} ${graphHeight}`\n      },\n      graphEdges.map((e) => {\n        const edge = graph.current.edge(e);\n        if (!edge)\n          return null;\n        return /* @__PURE__ */ React.createElement(\n          Edge,\n          {\n            key: `${e.v}-${e.w}`,\n            id: e,\n            setEdge,\n            render: renderLabel,\n            edge,\n            curve\n          }\n        );\n      }),\n      graphNodes.map((id) => {\n        const node = graph.current.node(id);\n        if (!node)\n          return null;\n        return /* @__PURE__ */ React.createElement(\n          Node,\n          {\n            key: id,\n            setNode,\n            render: renderNode,\n            node\n          }\n        );\n      })\n    ))\n  );\n}\n\nconst useStyles$I = makeStyles(\n  (theme) => {\n    var _a, _b;\n    return {\n      root: {\n        padding: theme.spacing(0),\n        marginBottom: theme.spacing(0),\n        marginTop: theme.spacing(0),\n        display: \"flex\",\n        flexFlow: \"row nowrap\"\n      },\n      // showing on top\n      topPosition: {\n        position: \"relative\",\n        marginBottom: theme.spacing(6),\n        marginTop: -theme.spacing(3),\n        zIndex: \"unset\"\n      },\n      icon: {\n        fontSize: theme.typography.h6.fontSize\n      },\n      content: {\n        width: \"100%\",\n        maxWidth: \"inherit\",\n        flexWrap: \"nowrap\",\n        color: theme.palette.banner.text\n      },\n      message: {\n        display: \"flex\",\n        alignItems: \"center\",\n        \"& a\": {\n          color: theme.palette.banner.link\n        }\n      },\n      button: {\n        color: (_a = theme.palette.banner.closeButtonColor) != null ? _a : \"inherit\"\n      },\n      info: {\n        backgroundColor: theme.palette.banner.info\n      },\n      error: {\n        backgroundColor: theme.palette.banner.error\n      },\n      warning: {\n        backgroundColor: (_b = theme.palette.banner.warning) != null ? _b : theme.palette.banner.error\n      }\n    };\n  },\n  { name: \"BackstageDismissableBanner\" }\n);\nconst DismissableBanner = (props) => {\n  var _a;\n  const { variant, message, id, fixed = false } = props;\n  const classes = useStyles$I();\n  const storageApi = useApi(storageApiRef);\n  const notificationsStore = storageApi.forBucket(\"notifications\");\n  const rawDismissedBanners = (_a = notificationsStore.snapshot(\"dismissedBanners\").value) != null ? _a : [];\n  const [dismissedBanners, setDismissedBanners] = useState(\n    new Set(rawDismissedBanners)\n  );\n  const observedItems = useObservable(\n    notificationsStore.observe$(\"dismissedBanners\")\n  );\n  useEffect(() => {\n    var _a2;\n    if (observedItems == null ? void 0 : observedItems.value) {\n      const currentValue = (_a2 = observedItems == null ? void 0 : observedItems.value) != null ? _a2 : [];\n      setDismissedBanners(new Set(currentValue));\n    }\n  }, [observedItems == null ? void 0 : observedItems.value]);\n  const handleClick = () => {\n    notificationsStore.set(\"dismissedBanners\", [...dismissedBanners, id]);\n  };\n  return /* @__PURE__ */ React.createElement(\n    Snackbar,\n    {\n      anchorOrigin: fixed ? { vertical: \"bottom\", horizontal: \"center\" } : { vertical: \"top\", horizontal: \"center\" },\n      open: !dismissedBanners.has(id),\n      classes: {\n        root: classNames(classes.root, !fixed && classes.topPosition)\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      SnackbarContent,\n      {\n        classes: {\n          root: classNames(classes.content, classes[variant]),\n          message: classes.message\n        },\n        message,\n        action: [\n          /* @__PURE__ */ React.createElement(\n            IconButton,\n            {\n              key: \"dismiss\",\n              title: \"Permanently dismiss this message\",\n              className: classes.button,\n              onClick: handleClick\n            },\n            /* @__PURE__ */ React.createElement(CloseIcon, { className: classes.icon })\n          )\n        ]\n      }\n    )\n  );\n};\n\nconst useStyles$H = makeStyles(\n  {\n    generalImg: {\n      width: \"95%\",\n      zIndex: 2,\n      position: \"relative\",\n      left: \"50%\",\n      top: \"50%\",\n      transform: \"translate(-50%, 15%)\"\n    }\n  },\n  { name: \"BackstageEmptyStateImage\" }\n);\nconst EmptyStateImage = ({ missing }) => {\n  const classes = useStyles$H();\n  switch (missing) {\n    case \"field\":\n      return /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: missingAnnotation,\n          className: classes.generalImg,\n          alt: \"annotation is missing\"\n        }\n      );\n    case \"info\":\n      return /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: noInformation,\n          alt: \"no Information\",\n          className: classes.generalImg\n        }\n      );\n    case \"content\":\n      return /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: createComponent,\n          alt: \"create Component\",\n          className: classes.generalImg\n        }\n      );\n    case \"data\":\n      return /* @__PURE__ */ React.createElement(\"img\", { src: noBuild, alt: \"no Build\", className: classes.generalImg });\n    default:\n      return null;\n  }\n};\n\nconst useStyles$G = makeStyles(\n  (theme) => ({\n    root: {\n      backgroundColor: theme.palette.background.default,\n      padding: theme.spacing(2, 0, 0, 0)\n    },\n    action: {\n      marginTop: theme.spacing(2)\n    },\n    imageContainer: {\n      position: \"relative\"\n    }\n  }),\n  { name: \"BackstageEmptyState\" }\n);\nfunction EmptyState(props) {\n  const { title, description, missing, action } = props;\n  const classes = useStyles$G();\n  return /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"space-around\",\n      alignItems: \"flex-start\",\n      className: classes.root,\n      spacing: 2\n    },\n    /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React.createElement(Grid, { container: true, direction: \"column\" }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\" }, title)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, description)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true, className: classes.action }, action))),\n    /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6, className: classes.imageContainer }, typeof missing === \"string\" ? /* @__PURE__ */ React.createElement(EmptyStateImage, { missing }) : missing.customImage)\n  );\n}\n\nconst COMPONENT_YAML_TEMPLATE = `apiVersion: backstage.io/v1alpha1\nkind: Component\nmetadata:\n  name: example\n  description: example.com\n  annotations:\n    ANNOTATION: value\nspec:\n  type: website\n  lifecycle: production\n  owner: user:guest`;\nconst ANNOTATION_REGEXP = /^.*ANNOTATION.*$/m;\nconst ANNOTATION_YAML = COMPONENT_YAML_TEMPLATE.match(ANNOTATION_REGEXP)[0];\nconst ANNOTATION_LINE = COMPONENT_YAML_TEMPLATE.split(\"\\n\").findIndex(\n  (line) => ANNOTATION_REGEXP.test(line)\n);\nconst useStyles$F = makeStyles(\n  (theme) => ({\n    code: {\n      borderRadius: 6,\n      margin: theme.spacing(2, 0),\n      background: theme.palette.type === \"dark\" ? \"#444\" : theme.palette.common.white\n    }\n  }),\n  { name: \"BackstageMissingAnnotationEmptyState\" }\n);\nfunction generateLineNumbers(lineCount) {\n  return Array.from(Array(lineCount + 1).keys(), (i) => i + ANNOTATION_LINE);\n}\nfunction generateComponentYaml(annotations) {\n  const annotationYaml = annotations.map((ann) => ANNOTATION_YAML.replace(\"ANNOTATION\", ann)).join(\"\\n\");\n  return COMPONENT_YAML_TEMPLATE.replace(ANNOTATION_YAML, annotationYaml);\n}\nfunction generateDescription(annotations) {\n  const isSingular = annotations.length <= 1;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, \"The \", isSingular ? \"annotation\" : \"annotations\", \" \", annotations.map((ann) => /* @__PURE__ */ React.createElement(\"code\", null, ann)).reduce((prev, curr) => /* @__PURE__ */ React.createElement(React.Fragment, null, prev, \", \", curr)), \" \", isSingular ? \"is\" : \"are\", \" missing. You need to add the\", \" \", isSingular ? \"annotation\" : \"annotations\", \" to your component if you want to enable this tool.\");\n}\nfunction MissingAnnotationEmptyState(props) {\n  const { annotation, readMoreUrl } = props;\n  const annotations = Array.isArray(annotation) ? annotation : [annotation];\n  const url = readMoreUrl || \"https://backstage.io/docs/features/software-catalog/well-known-annotations\";\n  const classes = useStyles$F();\n  return /* @__PURE__ */ React.createElement(\n    EmptyState,\n    {\n      missing: \"field\",\n      title: \"Missing Annotation\",\n      description: generateDescription(annotations),\n      action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Add the annotation to your component YAML as shown in the highlighted example below:\"), /* @__PURE__ */ React.createElement(Box, { className: classes.code }, /* @__PURE__ */ React.createElement(\n        CodeSnippet,\n        {\n          text: generateComponentYaml(annotations),\n          language: \"yaml\",\n          showLineNumbers: true,\n          highlightedNumbers: generateLineNumbers(annotations.length),\n          customStyle: { background: \"inherit\", fontSize: \"115%\" }\n        }\n      )), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", component: Link, to: url }, \"Read more\"))\n    }\n  );\n}\n\nconst useStyles$E = makeStyles(\n  (theme) => ({\n    markdown: {\n      \"& table\": {\n        borderCollapse: \"collapse\",\n        border: `1px solid ${theme.palette.border}`\n      },\n      \"& th, & td\": {\n        border: `1px solid ${theme.palette.border}`,\n        padding: theme.spacing(1)\n      },\n      \"& td\": {\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        verticalAlign: \"middle\",\n        lineHeight: \"1\",\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0\n      },\n      \"& th\": {\n        backgroundColor: theme.palette.background.paper\n      },\n      \"& tr\": {\n        backgroundColor: theme.palette.background.paper\n      },\n      \"& tr:nth-child(odd)\": {\n        backgroundColor: theme.palette.background.default\n      },\n      \"& a\": {\n        color: theme.palette.link\n      },\n      \"& img\": {\n        maxWidth: \"100%\"\n      }\n    }\n  }),\n  { name: \"BackstageMarkdownContent\" }\n);\nconst flatten = (text, child) => {\n  if (!child)\n    return text;\n  return typeof child === \"string\" ? text + child : React.Children.toArray(child.props.children).reduce(flatten, text);\n};\nconst headingRenderer = ({ level, children }) => {\n  const childrenArray = React.Children.toArray(children);\n  const text = childrenArray.reduce(flatten, \"\");\n  const slug = text.toLocaleLowerCase(\"en-US\").replace(/\\W/g, \"-\");\n  return React.createElement(`h${level}`, { id: slug }, children);\n};\nconst components = {\n  code: ({ inline, className, children, ...props }) => {\n    const text = String(children).replace(/\\n+$/, \"\");\n    const match = /language-(\\w+)/.exec(className || \"\");\n    return !inline && match ? /* @__PURE__ */ React.createElement(CodeSnippet, { language: match[1], text }) : /* @__PURE__ */ React.createElement(\"code\", { className, ...props }, children);\n  },\n  h1: headingRenderer,\n  h2: headingRenderer,\n  h3: headingRenderer,\n  h4: headingRenderer,\n  h5: headingRenderer,\n  h6: headingRenderer\n};\nfunction MarkdownContent(props) {\n  const {\n    content,\n    dialect = \"gfm\",\n    linkTarget,\n    transformLinkUri,\n    transformImageUri,\n    className\n  } = props;\n  const classes = useStyles$E();\n  return /* @__PURE__ */ React.createElement(\n    ReactMarkdown,\n    {\n      remarkPlugins: dialect === \"gfm\" ? [gfm] : [],\n      className: `${classes.markdown} ${className}`,\n      children: content,\n      components,\n      linkTarget,\n      transformLinkUri,\n      transformImageUri\n    }\n  );\n}\n\nconst getWarningTextColor = (severity, theme) => {\n  const getColor = theme.palette.type === \"light\" ? darken : lighten;\n  return getColor(theme.palette[severity].light, 0.6);\n};\nconst getWarningBackgroundColor = (severity, theme) => {\n  const getBackgroundColor = theme.palette.type === \"light\" ? lighten : darken;\n  return getBackgroundColor(theme.palette[severity].light, 0.9);\n};\nconst useErrorOutlineStyles = makeStyles((theme) => ({\n  root: {\n    marginRight: theme.spacing(1),\n    fill: ({ severity }) => getWarningTextColor(\n      severity,\n      theme\n    )\n  }\n}));\nconst ErrorOutlineStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return /* @__PURE__ */ React.createElement(ErrorOutline, { classes });\n};\nconst ExpandMoreIconStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return /* @__PURE__ */ React.createElement(ExpandMoreIcon, { classes });\n};\nconst useStyles$D = makeStyles(\n  (theme) => ({\n    panel: {\n      backgroundColor: ({ severity }) => getWarningBackgroundColor(\n        severity,\n        theme\n      ),\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      verticalAlign: \"middle\"\n    },\n    summary: {\n      display: \"flex\",\n      flexDirection: \"row\"\n    },\n    summaryText: {\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      fontWeight: theme.typography.fontWeightBold\n    },\n    markdownContent: {\n      \"& p\": {\n        display: \"inline\"\n      }\n    },\n    message: {\n      width: \"100%\",\n      display: \"block\",\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      backgroundColor: ({ severity }) => getWarningBackgroundColor(\n        severity,\n        theme\n      )\n    },\n    details: {\n      width: \"100%\",\n      display: \"block\",\n      color: theme.palette.textContrast,\n      backgroundColor: theme.palette.background.default,\n      border: `1px solid ${theme.palette.border}`,\n      padding: theme.spacing(2),\n      fontFamily: \"sans-serif\"\n    }\n  }),\n  { name: \"BackstageWarningPanel\" }\n);\nconst capitalize = (s) => {\n  return s.charAt(0).toLocaleUpperCase(\"en-US\") + s.slice(1);\n};\nfunction WarningPanel(props) {\n  const {\n    severity = \"warning\",\n    title,\n    titleFormat,\n    message,\n    children,\n    defaultExpanded\n  } = props;\n  const classes = useStyles$D({ severity });\n  const subTitle = capitalize(severity) + (title ? `: ${title}` : \"\");\n  return /* @__PURE__ */ React.createElement(\n    Accordion,\n    {\n      defaultExpanded: defaultExpanded != null ? defaultExpanded : false,\n      className: classes.panel,\n      role: \"alert\"\n    },\n    /* @__PURE__ */ React.createElement(\n      AccordionSummary,\n      {\n        expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIconStyled, { severity }),\n        className: classes.summary\n      },\n      /* @__PURE__ */ React.createElement(ErrorOutlineStyled, { severity }),\n      /* @__PURE__ */ React.createElement(Typography, { className: classes.summaryText, variant: \"subtitle1\" }, titleFormat === \"markdown\" ? /* @__PURE__ */ React.createElement(\n        MarkdownContent,\n        {\n          content: subTitle,\n          className: classes.markdownContent\n        }\n      ) : subTitle)\n    ),\n    (message || children) && /* @__PURE__ */ React.createElement(AccordionDetails, null, /* @__PURE__ */ React.createElement(Grid, { container: true }, message && /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Typography, { className: classes.message, variant: \"body1\" }, message)), children && /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, className: classes.details }, children)))\n  );\n}\n\nconst useStyles$C = makeStyles(\n  (theme) => ({\n    text: {\n      fontFamily: \"monospace\",\n      whiteSpace: \"pre\",\n      overflowX: \"auto\",\n      marginRight: theme.spacing(2)\n    },\n    divider: {\n      margin: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageErrorPanel\" }\n);\nconst ErrorList = ({\n  error,\n  message,\n  stack,\n  children\n}) => {\n  const classes = useStyles$C();\n  return /* @__PURE__ */ React.createElement(List, { dense: true }, /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { secondary: classes.text },\n      primary: \"Error\",\n      secondary: error\n    }\n  ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: error })), /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { secondary: classes.text },\n      primary: \"Message\",\n      secondary: message\n    }\n  ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: message })), stack && /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { secondary: classes.text },\n      primary: \"Stack Trace\",\n      secondary: stack\n    }\n  ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: stack })), children);\n};\nfunction ErrorPanel(props) {\n  const { title, error, defaultExpanded, titleFormat, children } = props;\n  return /* @__PURE__ */ React.createElement(\n    WarningPanel,\n    {\n      severity: \"error\",\n      title: title != null ? title : error.message,\n      defaultExpanded,\n      titleFormat\n    },\n    /* @__PURE__ */ React.createElement(\n      ErrorList,\n      {\n        error: error.name,\n        message: error.message,\n        stack: error.stack,\n        children\n      }\n    )\n  );\n}\n\nconst useStyles$B = makeStyles(\n  (theme) => ({\n    text: {\n      fontFamily: \"monospace\",\n      whiteSpace: \"pre\",\n      overflowX: \"auto\",\n      marginRight: theme.spacing(2)\n    },\n    divider: {\n      margin: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageResponseErrorPanel\" }\n);\nfunction ResponseErrorPanel(props) {\n  var _a;\n  const { title, error, defaultExpanded } = props;\n  const classes = useStyles$B();\n  if (error.name !== \"ResponseError\") {\n    return /* @__PURE__ */ React.createElement(\n      ErrorPanel,\n      {\n        title: title != null ? title : error.message,\n        defaultExpanded,\n        error\n      }\n    );\n  }\n  const { body, cause } = error;\n  const { request, response } = body;\n  const errorString = `${response.statusCode}: ${cause.name}`;\n  const requestString = request && `${request.method} ${request.url}`;\n  const messageString = cause.message.replace(/\\\\n/g, \"\\n\");\n  const stackString = (_a = cause.stack) == null ? void 0 : _a.replace(/\\\\n/g, \"\\n\");\n  const jsonString = JSON.stringify(body, void 0, 2);\n  return /* @__PURE__ */ React.createElement(\n    ErrorPanel,\n    {\n      title: title != null ? title : error.message,\n      defaultExpanded,\n      error: { name: errorString, message: messageString, stack: stackString }\n    },\n    requestString && /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        classes: { secondary: classes.text },\n        primary: \"Request\",\n        secondary: request ? `${requestString}` : void 0\n      }\n    ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: requestString })),\n    /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Divider, { component: \"li\", className: classes.divider }), /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        classes: { secondary: classes.text },\n        primary: \"Full Error as JSON\"\n      }\n    )), /* @__PURE__ */ React.createElement(CodeSnippet, { language: \"json\", text: jsonString, showCopyCodeButton: true }))\n  );\n}\n\nfunction createRootElement(id) {\n  const rootContainer = document.createElement(\"div\");\n  rootContainer.setAttribute(\"id\", id);\n  return rootContainer;\n}\nfunction addRootElement(rootElem) {\n  document.body.insertBefore(\n    rootElem,\n    document.body.lastElementChild.nextElementSibling\n  );\n}\nfunction usePortal(id) {\n  const rootElemRef = useRef(null);\n  useEffect(\n    function setupElement() {\n      const existingParent = document.querySelector(`#${id}`);\n      const parentElem = existingParent || createRootElement(id);\n      if (!existingParent) {\n        addRootElement(parentElem);\n      }\n      parentElem.appendChild(rootElemRef.current);\n      return function removeElement() {\n        rootElemRef.current.remove();\n        if (parentElem.childNodes.length === -1) {\n          parentElem.remove();\n        }\n      };\n    },\n    [id]\n  );\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement(\"div\");\n    }\n    return rootElemRef.current;\n  }\n  return getRootElem();\n}\n\nconst STATES_LOCAL_STORAGE_KEY = \"core.calloutSeen\";\nfunction useCalloutStates() {\n  const [states, setStates] = useState(() => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    return raw ? JSON.parse(raw) : {};\n  });\n  const setState = useCallback((key, value) => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    const oldStates = raw ? JSON.parse(raw) : {};\n    const newStates = { ...oldStates, [key]: value };\n    setStates(newStates);\n    localStorage.setItem(STATES_LOCAL_STORAGE_KEY, JSON.stringify(newStates));\n  }, []);\n  return { states, setState };\n}\nfunction useCalloutHasBeenSeen(featureId) {\n  const { states, setState } = useCalloutStates();\n  const markSeen = useCallback(() => {\n    setState(featureId, true);\n  }, [setState, featureId]);\n  return { seen: states[featureId] === true, markSeen };\n}\nfunction useShowCallout(featureId) {\n  const { seen, markSeen } = useCalloutHasBeenSeen(featureId);\n  return { show: seen === false, hide: markSeen };\n}\n\nconst useStyles$A = makeStyles(\n  (theme) => ({\n    \"@keyframes pulsateSlightly\": {\n      \"0%\": { transform: \"scale(1.0)\" },\n      \"100%\": { transform: \"scale(1.1)\" }\n    },\n    \"@keyframes pulsateAndFade\": {\n      \"0%\": { transform: \"scale(1.0)\", opacity: 0.9 },\n      \"100%\": { transform: \"scale(1.5)\", opacity: 0 }\n    },\n    featureWrapper: {\n      position: \"relative\"\n    },\n    backdrop: {\n      zIndex: 2e3,\n      position: \"fixed\",\n      overflow: \"hidden\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    },\n    dot: {\n      position: \"absolute\",\n      backgroundColor: \"transparent\",\n      borderRadius: \"100%\",\n      border: \"1px solid rgba(103, 146, 180, 0.98)\",\n      boxShadow: \"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)\",\n      zIndex: 2001,\n      transformOrigin: \"center center\",\n      animation: \"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite\"\n    },\n    pulseCircle: {\n      width: \"100%\",\n      height: \"100%\",\n      backgroundColor: \"transparent\",\n      borderRadius: \"100%\",\n      border: `2px solid ${theme.palette.common.white}`,\n      zIndex: 2001,\n      transformOrigin: \"center center\",\n      animation: \"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite\"\n    },\n    text: {\n      position: \"absolute\",\n      color: theme.palette.common.white,\n      zIndex: 2003\n    }\n  }),\n  { name: \"BackstageFeatureCalloutCircular\" }\n);\nfunction FeatureCalloutCircular(props) {\n  const { featureId, title, description, children } = props;\n  const { show, hide } = useShowCallout(featureId);\n  const portalElement = usePortal(\"core.callout\");\n  const wrapperRef = useRef(null);\n  const [placement, setPlacement] = useState();\n  const classes = useStyles$A();\n  const update = useCallback(() => {\n    if (wrapperRef.current) {\n      const wrapperBounds = wrapperRef.current.getBoundingClientRect();\n      const longest = Math.max(wrapperBounds.width, wrapperBounds.height);\n      const borderWidth = 800;\n      const dotLeft = wrapperBounds.x - (longest - wrapperBounds.width) / 2 - borderWidth;\n      const dotTop = wrapperBounds.y - (longest - wrapperBounds.height) / 2 - borderWidth;\n      const dotSize = longest + 2 * borderWidth;\n      const textWidth = 450;\n      const textLeft = wrapperBounds.x + wrapperBounds.width / 2 - textWidth;\n      const textTop = wrapperBounds.y - (longest - wrapperBounds.height) / 2 + longest + 20;\n      setPlacement({\n        dotLeft,\n        dotTop,\n        dotSize,\n        borderWidth,\n        textTop,\n        textLeft,\n        textWidth\n      });\n    }\n  }, []);\n  useEffect(() => {\n    window.addEventListener(\"resize\", update);\n    window.addEventListener(\"scroll\", update);\n    return () => {\n      window.removeEventListener(\"resize\", update);\n      window.removeEventListener(\"scroll\", update);\n    };\n  }, [update]);\n  useLayoutEffect(update, [wrapperRef.current, update]);\n  if (!show) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { className: classes.featureWrapper, ...{ ref: wrapperRef } }, children), createPortal(\n    /* @__PURE__ */ React.createElement(Box, { className: classes.backdrop }, /* @__PURE__ */ React.createElement(ClickAwayListener, { onClickAway: hide }, /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        className: classes.dot,\n        \"data-testid\": \"dot\",\n        style: {\n          left: placement == null ? void 0 : placement.dotLeft,\n          top: placement == null ? void 0 : placement.dotTop,\n          width: placement == null ? void 0 : placement.dotSize,\n          height: placement == null ? void 0 : placement.dotSize,\n          borderWidth: placement == null ? void 0 : placement.borderWidth\n        },\n        onClick: hide,\n        onKeyDown: hide,\n        role: \"button\",\n        tabIndex: 0\n      },\n      /* @__PURE__ */ React.createElement(Box, { className: classes.pulseCircle })\n    ), /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        className: classes.text,\n        \"data-testid\": \"text\",\n        style: {\n          left: placement == null ? void 0 : placement.textLeft,\n          top: placement == null ? void 0 : placement.textTop,\n          width: placement == null ? void 0 : placement.textWidth\n        }\n      },\n      /* @__PURE__ */ React.createElement(Typography, { variant: \"h2\", paragraph: true }, title),\n      /* @__PURE__ */ React.createElement(Typography, null, description)\n    )))),\n    portalElement\n  ));\n}\n\nconst useIconStyles = makeStyles(\n  (theme) => ({\n    link: {\n      display: \"grid\",\n      justifyItems: \"center\",\n      gridGap: 4,\n      textAlign: \"center\"\n    },\n    disabled: {\n      color: theme.palette.text.secondary,\n      cursor: \"default\"\n    },\n    primary: {\n      color: theme.palette.primary.main\n    },\n    secondary: {\n      color: theme.palette.secondary.main\n    },\n    label: {\n      textTransform: \"uppercase\",\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: 1.2\n    }\n  }),\n  { name: \"BackstageIconLinkVertical\" }\n);\nfunction IconLinkVertical({\n  color = \"primary\",\n  disabled = false,\n  href = \"#\",\n  icon = /* @__PURE__ */ React.createElement(LinkIcon, null),\n  label,\n  onClick,\n  title\n}) {\n  const classes = useIconStyles();\n  if (disabled) {\n    return /* @__PURE__ */ React.createElement(Box, { title, className: classNames(classes.link, classes.disabled) }, icon, /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"caption\",\n        component: \"span\",\n        className: classes.label\n      },\n      label\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    Link,\n    {\n      title,\n      className: classNames(classes.link, classes[color]),\n      to: href,\n      onClick\n    },\n    icon,\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\", component: \"span\", className: classes.label }, label)\n  );\n}\n\nconst useStyles$z = makeStyles(\n  (theme) => ({\n    links: {\n      margin: theme.spacing(2, 0),\n      display: \"grid\",\n      gridAutoFlow: \"column\",\n      gridAutoColumns: \"min-content\",\n      gridGap: theme.spacing(3)\n    }\n  }),\n  { name: \"BackstageHeaderIconLinkRow\" }\n);\nfunction HeaderIconLinkRow(props) {\n  const { links } = props;\n  const classes = useStyles$z();\n  return /* @__PURE__ */ React.createElement(\"nav\", { className: classes.links }, links.map((link, index) => /* @__PURE__ */ React.createElement(IconLinkVertical, { key: index + 1, ...link })));\n}\n\nconst generateGradientStops = (themeType) => {\n  const luminance = themeType === \"dark\" ? \"16%\" : \"97%\";\n  return `\n    hsl(0, 0%, ${luminance}) 0%,\n    hsla(0, 0%, ${luminance}, 0.987) 8.1%,\n    hsla(0, 0%, ${luminance}, 0.951) 15.5%,\n    hsla(0, 0%, ${luminance}, 0.896) 22.5%,\n    hsla(0, 0%, ${luminance}, 0.825) 29%,\n    hsla(0, 0%, ${luminance}, 0.741) 35.3%,\n    hsla(0, 0%, ${luminance}, 0.648) 41.2%,\n    hsla(0, 0%, ${luminance}, 0.55) 47.1%,\n    hsla(0, 0%, ${luminance}, 0.45) 52.9%,\n    hsla(0, 0%, ${luminance}, 0.352) 58.8%,\n    hsla(0, 0%, ${luminance}, 0.259) 64.7%,\n    hsla(0, 0%, ${luminance}, 0.175) 71%,\n    hsla(0, 0%, ${luminance}, 0.104) 77.5%,\n    hsla(0, 0%, ${luminance}, 0.049) 84.5%,\n    hsla(0, 0%, ${luminance}, 0.013) 91.9%,\n    hsla(0, 0%, ${luminance}, 0) 100%\n  `;\n};\nconst fadeSize = 100;\nconst fadePadding = 10;\nconst useStyles$y = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"relative\",\n      display: \"flex\",\n      flexFlow: \"row nowrap\",\n      alignItems: \"center\"\n    },\n    container: {\n      overflow: \"auto\",\n      scrollbarWidth: 0,\n      // hide in FF\n      \"&::-webkit-scrollbar\": {\n        display: \"none\"\n        // hide in Chrome\n      }\n    },\n    fade: {\n      position: \"absolute\",\n      width: fadeSize,\n      height: `calc(100% + ${fadePadding}px)`,\n      transition: \"opacity 300ms\",\n      pointerEvents: \"none\"\n    },\n    fadeLeft: {\n      left: -fadePadding,\n      background: `linear-gradient(90deg, ${generateGradientStops(\n        theme.palette.type\n      )})`\n    },\n    fadeRight: {\n      right: -fadePadding,\n      background: `linear-gradient(270deg, ${generateGradientStops(\n        theme.palette.type\n      )})`\n    },\n    fadeHidden: {\n      opacity: 0\n    },\n    button: {\n      position: \"absolute\"\n    },\n    buttonLeft: {\n      left: -theme.spacing(2)\n    },\n    buttonRight: {\n      right: -theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageHorizontalScrollGrid\" }\n);\nfunction useScrollDistance(ref) {\n  const [[scrollLeft, scrollRight], setScroll] = React.useState([0, 0]);\n  React.useLayoutEffect(() => {\n    const el = ref.current;\n    if (!el) {\n      setScroll([0, 0]);\n      return;\n    }\n    const handleUpdate = () => {\n      const left = el.scrollLeft;\n      const right = el.scrollWidth - el.offsetWidth - el.scrollLeft;\n      setScroll([left, right]);\n    };\n    handleUpdate();\n    el.addEventListener(\"scroll\", handleUpdate);\n    window.addEventListener(\"resize\", handleUpdate);\n    return () => {\n      el.removeEventListener(\"scroll\", handleUpdate);\n      window.removeEventListener(\"resize\", handleUpdate);\n    };\n  }, [ref]);\n  return [scrollLeft, scrollRight];\n}\nfunction useSmoothScroll(ref, speed, minDistance) {\n  const [scrollTarget, setScrollTarget] = React.useState(0);\n  React.useLayoutEffect(() => {\n    if (scrollTarget === 0) {\n      return;\n    }\n    const startTime = window.performance.now();\n    const id = requestAnimationFrame((frameTime) => {\n      if (!ref.current) {\n        return;\n      }\n      const frameDuration = frameTime - startTime;\n      const scrollDistance = Math.abs(scrollTarget) * frameDuration / speed;\n      const cappedScrollDistance = Math.max(minDistance, scrollDistance);\n      const scrollAmount = cappedScrollDistance * Math.sign(scrollTarget);\n      ref.current.scrollBy({ left: scrollAmount });\n      const newScrollTarget = scrollTarget - scrollAmount;\n      if (Math.sign(scrollTarget) !== Math.sign(newScrollTarget)) {\n        setScrollTarget(0);\n      } else {\n        setScrollTarget(newScrollTarget);\n      }\n    });\n    return () => cancelAnimationFrame(id);\n  }, [ref, scrollTarget, speed, minDistance]);\n  return setScrollTarget;\n}\nfunction HorizontalScrollGrid(props) {\n  const {\n    scrollStep = 100,\n    scrollSpeed = 50,\n    minScrollDistance = 5,\n    children,\n    ...otherProps\n  } = props;\n  const classes = useStyles$y(props);\n  const ref = React.useRef();\n  const [scrollLeft, scrollRight] = useScrollDistance(ref);\n  const setScrollTarget = useSmoothScroll(ref, scrollSpeed, minScrollDistance);\n  const handleScrollClick = (forwards) => {\n    const el = ref.current;\n    if (!el) {\n      return;\n    }\n    setScrollTarget(forwards ? scrollStep : -scrollStep);\n  };\n  return /* @__PURE__ */ React.createElement(Box, { ...otherProps, className: classes.root }, /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      direction: \"row\",\n      wrap: \"nowrap\",\n      className: classes.container,\n      ref\n    },\n    children\n  ), /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classNames(classes.fade, classes.fadeLeft, {\n        [classes.fadeHidden]: scrollLeft === 0\n      })\n    }\n  ), /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classNames(classes.fade, classes.fadeRight, {\n        [classes.fadeHidden]: scrollRight === 0\n      })\n    }\n  ), scrollLeft > 0 && /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      title: \"Scroll Left\",\n      onClick: () => handleScrollClick(false),\n      className: classNames(classes.button, classes.buttonLeft, {})\n    },\n    /* @__PURE__ */ React.createElement(ChevronLeftIcon, null)\n  ), scrollRight > 0 && /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      title: \"Scroll Right\",\n      onClick: () => handleScrollClick(true),\n      className: classNames(classes.button, classes.buttonRight, {})\n    },\n    /* @__PURE__ */ React.createElement(ChevronRight, null)\n  ));\n}\n\nconst useStyles$x = makeStyles(\n  (theme) => ({\n    alpha: {\n      color: theme.palette.common.white,\n      fontFamily: \"serif\",\n      fontWeight: \"normal\",\n      fontStyle: \"italic\"\n    },\n    beta: {\n      color: \"#4d65cc\",\n      fontFamily: \"serif\",\n      fontWeight: \"normal\",\n      fontStyle: \"italic\"\n    }\n  }),\n  { name: \"BackstageLifecycle\" }\n);\nfunction Lifecycle(props) {\n  const classes = useStyles$x(props);\n  const { shorthand, alpha } = props;\n  return shorthand ? /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classes[alpha ? \"alpha\" : \"beta\"],\n      style: { fontSize: \"120%\" }\n    },\n    alpha ? /* @__PURE__ */ React.createElement(React.Fragment, null, \"\\u03B1\") : /* @__PURE__ */ React.createElement(React.Fragment, null, \"\\u03B2\")\n  ) : /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes[alpha ? \"alpha\" : \"beta\"] }, alpha ? \"Alpha\" : \"Beta\");\n}\n\nconst RealLogViewer = lazy(\n  () => import('./esm/RealLogViewer-8feb687c.esm.js').then((m) => ({ default: m.RealLogViewer }))\n);\nfunction LogViewer(props) {\n  const { Progress } = useApp().getComponents();\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(RealLogViewer, { ...props }));\n}\n\nconst useItemStyles = makeStyles(\n  (theme) => ({\n    root: {\n      paddingLeft: theme.spacing(3)\n    }\n  }),\n  { name: \"BackstageLoginRequestListItem\" }\n);\nconst LoginRequestListItem = ({ request, busy, setBusy }) => {\n  const classes = useItemStyles();\n  const [error, setError] = useState();\n  const handleContinue = async () => {\n    setBusy(true);\n    try {\n      await request.trigger();\n    } catch (e) {\n      setError(isError(e) ? e.message : \"An unspecified error occurred\");\n    } finally {\n      setBusy(false);\n    }\n  };\n  const IconComponent = request.provider.icon;\n  return /* @__PURE__ */ React.createElement(ListItem, { disabled: busy, classes: { root: classes.root } }, /* @__PURE__ */ React.createElement(ListItemAvatar, null, /* @__PURE__ */ React.createElement(IconComponent, { fontSize: \"large\" })), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: request.provider.title,\n      secondary: error && /* @__PURE__ */ React.createElement(Typography, { color: \"error\" }, error)\n    }\n  ), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", variant: \"contained\", onClick: handleContinue }, \"Log in\"));\n};\n\nconst useStyles$w = makeStyles(\n  (theme) => ({\n    dialog: {\n      paddingTop: theme.spacing(1)\n    },\n    title: {\n      minWidth: 0\n    },\n    titleHeading: {\n      fontSize: theme.typography.h6.fontSize\n    },\n    contentList: {\n      padding: 0\n    },\n    actionButtons: {\n      padding: theme.spacing(2, 0)\n    }\n  }),\n  { name: \"OAuthRequestDialog\" }\n);\nfunction OAuthRequestDialog(_props) {\n  var _a;\n  const classes = useStyles$w();\n  const [busy, setBusy] = useState(false);\n  const oauthRequestApi = useApi(oauthRequestApiRef);\n  const configApi = useApi(configApiRef);\n  const authRedirect = (_a = configApi.getOptionalBoolean(\"enableExperimentalRedirectFlow\")) != null ? _a : false;\n  const requests = useObservable(\n    useMemo(() => oauthRequestApi.authRequest$(), [oauthRequestApi]),\n    []\n  );\n  const handleRejectAll = () => {\n    requests.forEach((request) => request.reject());\n  };\n  return /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      open: Boolean(requests.length),\n      fullWidth: true,\n      maxWidth: \"xs\",\n      classes: { paper: classes.dialog },\n      \"aria-labelledby\": \"oauth-req-dialog-title\"\n    },\n    /* @__PURE__ */ React.createElement(\"main\", null, /* @__PURE__ */ React.createElement(\n      DialogTitle,\n      {\n        classes: { root: classes.title },\n        id: \"oauth-req-dialog-title\"\n      },\n      /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          className: classes.titleHeading,\n          variant: \"h1\",\n          variantMapping: { h1: \"span\" }\n        },\n        \"Login Required\"\n      ),\n      authRedirect ? /* @__PURE__ */ React.createElement(Typography, null, \"This will trigger a http redirect to OAuth Login.\") : null\n    ), /* @__PURE__ */ React.createElement(DialogContent, { dividers: true, classes: { root: classes.contentList } }, /* @__PURE__ */ React.createElement(List, null, requests.map((request) => /* @__PURE__ */ React.createElement(\n      LoginRequestListItem,\n      {\n        key: request.provider.title,\n        request,\n        busy,\n        setBusy\n      }\n    ))))),\n    /* @__PURE__ */ React.createElement(DialogActions, { classes: { root: classes.actionButtons } }, /* @__PURE__ */ React.createElement(Button$1, { onClick: handleRejectAll }, \"Reject All\"))\n  );\n}\n\nconst useStyles$v = makeStyles(\n  {\n    container: {\n      overflow: \"visible !important\"\n    }\n  },\n  { name: \"BackstageOverflowTooltip\" }\n);\nfunction OverflowTooltip(props) {\n  var _a;\n  const [hover, setHover] = useState(false);\n  const isMounted = useIsMounted();\n  const classes = useStyles$v();\n  const handleToggled = (truncated) => {\n    if (isMounted()) {\n      setHover(truncated);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      title: (_a = props.title) != null ? _a : props.text || \"\",\n      placement: props.placement,\n      disableHoverListener: !hover\n    },\n    /* @__PURE__ */ React.createElement(\n      TextTruncate,\n      {\n        text: props.text,\n        line: props.line,\n        onToggled: handleToggled,\n        containerClassName: classes.container\n      }\n    )\n  );\n}\n\nfunction Progress(props) {\n  const theme = useTheme();\n  const [isVisible, setIsVisible] = useState(false);\n  useEffect(() => {\n    const handle = setTimeout(\n      () => setIsVisible(true),\n      theme.transitions.duration.short\n    );\n    return () => clearTimeout(handle);\n  }, [theme.transitions.duration.short]);\n  return isVisible ? /* @__PURE__ */ React.createElement(LinearProgress, { ...props, \"data-testid\": \"progress\" }) : /* @__PURE__ */ React.createElement(Box, { display: \"none\" });\n}\n\nconst useStyles$u = makeStyles(\n  (theme) => ({\n    root: {\n      maxWidth: \"fit-content\",\n      padding: theme.spacing(2, 2, 2, 2.5)\n    },\n    boxTitle: {\n      margin: 0,\n      color: theme.palette.textSubtle\n    },\n    arrow: {\n      color: theme.palette.textSubtle\n    }\n  }),\n  { name: \"BackstageBottomLink\" }\n);\nfunction BottomLink(props) {\n  const { link, title, onClick } = props;\n  const classes = useStyles$u();\n  return /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(Link, { to: link, onClick, underline: \"none\" }, /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\", className: classes.root }, /* @__PURE__ */ React.createElement(Box, { className: classes.boxTitle, fontWeight: \"fontWeightBold\", m: 1 }, /* @__PURE__ */ React.createElement(Typography, null, /* @__PURE__ */ React.createElement(\"strong\", null, title))), /* @__PURE__ */ React.createElement(ArrowIcon, { className: classes.arrow }))));\n}\n\nconst SlackLink = (props) => {\n  const { slackChannel } = props;\n  if (!slackChannel) {\n    return null;\n  } else if (typeof slackChannel === \"string\") {\n    return /* @__PURE__ */ React.createElement(Typography, null, \"Please contact \", slackChannel, \" for help.\");\n  } else if (!slackChannel.href) {\n    return /* @__PURE__ */ React.createElement(Typography, null, \"Please contact \", slackChannel.name, \" for help.\");\n  }\n  return /* @__PURE__ */ React.createElement(LinkButton, { to: slackChannel.href, variant: \"contained\" }, slackChannel.name);\n};\nconst ErrorBoundary = class ErrorBoundary2 extends Component$3 {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: void 0,\n      errorInfo: void 0\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error(`ErrorBoundary, error: ${error}, info: ${errorInfo}`);\n    this.setState({ error, errorInfo });\n  }\n  render() {\n    const { slackChannel, children } = this.props;\n    const { error } = this.state;\n    if (!error) {\n      return children;\n    }\n    return /* @__PURE__ */ React.createElement(ErrorPanel, { title: \"Something Went Wrong\", error }, /* @__PURE__ */ React.createElement(SlackLink, { slackChannel }));\n  }\n};\n\nconst useStyles$t = makeStyles(\n  (theme) => ({\n    noPadding: {\n      padding: 0,\n      \"&:last-child\": {\n        paddingBottom: 0\n      }\n    },\n    header: {\n      padding: theme.spacing(2, 2, 2, 2.5)\n    },\n    headerTitle: {\n      fontWeight: theme.typography.fontWeightBold\n    },\n    headerSubheader: {\n      paddingTop: theme.spacing(1)\n    },\n    headerAvatar: {},\n    headerAction: {},\n    headerContent: {},\n    subheader: {\n      display: \"flex\"\n    }\n  }),\n  { name: \"BackstageInfoCard\" }\n);\nconst CardActionsTopRight = withStyles(\n  (theme) => ({\n    root: {\n      display: \"inline-block\",\n      padding: theme.spacing(8, 8, 0, 0),\n      float: \"right\"\n    }\n  }),\n  { name: \"BackstageInfoCardCardActionsTopRight\" }\n)(CardActions);\nconst VARIANT_STYLES = {\n  card: {\n    flex: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    fullHeight: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"100%\"\n    },\n    gridItem: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"calc(100% - 10px)\",\n      // for pages without content header\n      marginBottom: \"10px\",\n      breakInside: \"avoid-page\",\n      \"@media print\": {\n        height: \"auto\"\n      }\n    }\n  },\n  cardContent: {\n    fullHeight: {\n      flex: 1\n    },\n    gridItem: {\n      flex: 1\n    }\n  }\n};\nfunction InfoCard(props) {\n  const {\n    title,\n    subheader,\n    divider = true,\n    deepLink,\n    slackChannel,\n    errorBoundaryProps,\n    variant,\n    children,\n    headerStyle,\n    headerProps,\n    icon,\n    action,\n    actionsClassName,\n    actions,\n    cardClassName,\n    actionsTopRight,\n    className,\n    noPadding,\n    titleTypographyProps\n  } = props;\n  const classes = useStyles$t();\n  let calculatedStyle = {};\n  let calculatedCardStyle = {};\n  if (variant) {\n    const variants = variant.split(/[\\s]+/g);\n    variants.forEach((name) => {\n      calculatedStyle = {\n        ...calculatedStyle,\n        ...VARIANT_STYLES.card[name]\n      };\n      calculatedCardStyle = {\n        ...calculatedCardStyle,\n        ...VARIANT_STYLES.cardContent[name]\n      };\n    });\n  }\n  const cardSubTitle = () => {\n    if (!subheader && !icon) {\n      return null;\n    }\n    return /* @__PURE__ */ React.createElement(\n      \"div\",\n      {\n        className: classes.headerSubheader,\n        \"data-testid\": \"info-card-subheader\"\n      },\n      subheader && /* @__PURE__ */ React.createElement(\"div\", { className: classes.subheader }, subheader),\n      icon\n    );\n  };\n  const errProps = errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n  return /* @__PURE__ */ React.createElement(Card, { style: calculatedStyle, className }, /* @__PURE__ */ React.createElement(ErrorBoundary, { ...errProps }, title && /* @__PURE__ */ React.createElement(\n    CardHeader,\n    {\n      classes: {\n        root: classes.header,\n        title: classes.headerTitle,\n        subheader: classes.headerSubheader,\n        avatar: classes.headerAvatar,\n        action: classes.headerAction,\n        content: classes.headerContent\n      },\n      title,\n      subheader: cardSubTitle(),\n      action,\n      style: { ...headerStyle },\n      titleTypographyProps,\n      ...headerProps\n    }\n  ), actionsTopRight && /* @__PURE__ */ React.createElement(CardActionsTopRight, null, actionsTopRight), divider && /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(\n    CardContent,\n    {\n      className: classNames(cardClassName, {\n        [classes.noPadding]: noPadding\n      }),\n      style: calculatedCardStyle\n    },\n    children\n  ), actions && /* @__PURE__ */ React.createElement(CardActions, { className: actionsClassName }, actions), deepLink && /* @__PURE__ */ React.createElement(BottomLink, { ...deepLink })));\n}\n\nconst useStyles$s = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"relative\",\n      lineHeight: 0\n    },\n    overlay: {\n      position: \"absolute\",\n      top: \"50%\",\n      left: \"50%\",\n      transform: \"translate(-50%, -60%)\",\n      fontSize: theme.typography.pxToRem(45),\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.textContrast\n    },\n    description: {\n      fontSize: \"100%\",\n      top: \"50%\",\n      left: \"50%\",\n      transform: \"translate(-50%, -50%)\",\n      position: \"absolute\",\n      wordBreak: \"break-all\",\n      display: \"inline-block\"\n    },\n    circle: {\n      width: \"80%\",\n      transform: \"translate(10%, 0)\"\n    },\n    colorUnknown: {}\n  }),\n  { name: \"BackstageGauge\" }\n);\nconst defaultGaugeProps = {\n  fractional: true,\n  inverse: false,\n  unit: \"%\",\n  max: 100\n};\nconst getProgressColor = ({\n  palette,\n  value,\n  inverse,\n  max\n}) => {\n  if (isNaN(value)) {\n    return \"#ddd\";\n  }\n  const actualMax = max ? max : defaultGaugeProps.max;\n  const actualValue = inverse ? actualMax - value : value;\n  if (actualValue < actualMax / 3) {\n    return palette.status.error;\n  } else if (actualValue < actualMax * (2 / 3)) {\n    return palette.status.warning;\n  }\n  return palette.status.ok;\n};\nfunction Gauge(props) {\n  const [hoverRef, setHoverRef] = useState(null);\n  const { getColor = getProgressColor } = props;\n  const classes = useStyles$s(props);\n  const { palette } = useTheme();\n  const { value, fractional, inverse, unit, max, description } = {\n    ...defaultGaugeProps,\n    ...props\n  };\n  const asPercentage = fractional ? Math.round(value * max) : value;\n  const asActual = max !== 100 ? Math.round(value) : asPercentage;\n  const [isHovering, setIsHovering] = useState(false);\n  useEffect(() => {\n    const node = hoverRef;\n    const handleMouseOver = () => setIsHovering(true);\n    const handleMouseOut = () => setIsHovering(false);\n    if (node && description) {\n      node.addEventListener(\"mouseenter\", handleMouseOver);\n      node.addEventListener(\"mouseleave\", handleMouseOut);\n      return () => {\n        node.removeEventListener(\"mouseenter\", handleMouseOver);\n        node.removeEventListener(\"mouseleave\", handleMouseOut);\n      };\n    }\n    return () => {\n      setIsHovering(false);\n    };\n  }, [description, hoverRef]);\n  return /* @__PURE__ */ React.createElement(Box, { ...{ ref: setHoverRef }, className: classes.root }, /* @__PURE__ */ React.createElement(\n    Circle,\n    {\n      strokeLinecap: \"butt\",\n      percent: asPercentage,\n      strokeWidth: 12,\n      trailWidth: 12,\n      strokeColor: getColor({ palette, value: asActual, inverse, max }),\n      className: classes.circle\n    }\n  ), description && isHovering ? /* @__PURE__ */ React.createElement(Box, { className: classes.description }, description) : /* @__PURE__ */ React.createElement(Box, { className: classes.overlay }, isNaN(value) ? \"N/A\" : `${asActual}${unit}`));\n}\n\nconst useStyles$r = makeStyles(\n  {\n    root: {\n      height: \"100%\",\n      width: 250\n    }\n  },\n  { name: \"BackstageGaugeCard\" }\n);\nfunction GaugeCard(props) {\n  const classes = useStyles$r(props);\n  const {\n    title,\n    subheader,\n    progress,\n    inverse,\n    deepLink,\n    description,\n    icon,\n    variant,\n    getColor\n  } = props;\n  const gaugeProps = {\n    inverse,\n    description,\n    getColor,\n    value: progress\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title,\n      subheader,\n      deepLink,\n      variant,\n      icon\n    },\n    /* @__PURE__ */ React.createElement(Gauge, { ...gaugeProps })\n  ));\n}\n\nfunction LinearGauge(props) {\n  const { value, getColor = getProgressColor, width = \"thick\" } = props;\n  const { palette } = useTheme();\n  if (isNaN(value)) {\n    return null;\n  }\n  let percent = Math.round(value * 100 * 100) / 100;\n  if (percent > 100) {\n    percent = 100;\n  }\n  const lineWidth = width === \"thick\" ? 4 : 1;\n  const strokeColor = getColor({\n    palette,\n    value: percent,\n    inverse: false,\n    max: 100\n  });\n  return /* @__PURE__ */ React.createElement(Tooltip, { title: `${percent}%` }, /* @__PURE__ */ React.createElement(Typography, { component: \"span\" }, /* @__PURE__ */ React.createElement(\n    Line,\n    {\n      percent,\n      strokeWidth: lineWidth,\n      trailWidth: lineWidth,\n      strokeColor\n    }\n  )));\n}\n\nconst useStyles$q = makeStyles(\n  (theme) => createStyles({\n    icon: {\n      position: \"absolute\",\n      right: theme.spacing(0.5),\n      pointerEvents: \"none\"\n    }\n  }),\n  { name: \"BackstageClosedDropdown\" }\n);\nconst ClosedDropdown = () => {\n  const classes = useStyles$q();\n  return /* @__PURE__ */ React.createElement(\n    SvgIcon,\n    {\n      className: classes.icon,\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    },\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        d: \"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z\",\n        fill: \"#616161\"\n      }\n    )\n  );\n};\n\nconst useStyles$p = makeStyles(\n  (theme) => createStyles({\n    icon: {\n      position: \"absolute\",\n      right: theme.spacing(0.5),\n      pointerEvents: \"none\"\n    }\n  }),\n  { name: \"BackstageOpenedDropdown\" }\n);\nconst OpenedDropdown = () => {\n  const classes = useStyles$p();\n  return /* @__PURE__ */ React.createElement(\n    SvgIcon,\n    {\n      className: classes.icon,\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    },\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        d: \"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z\",\n        fill: \"#616161\"\n      }\n    )\n  );\n};\n\nconst BootstrapInput = withStyles(\n  (theme) => createStyles({\n    root: {\n      \"label + &\": {\n        marginTop: theme.spacing(3)\n      },\n      \"&.Mui-focused > div[role=button]\": {\n        borderColor: theme.palette.primary.main\n      }\n    },\n    input: {\n      borderRadius: theme.shape.borderRadius,\n      position: \"relative\",\n      backgroundColor: theme.palette.background.paper,\n      border: \"1px solid #ced4da\",\n      fontSize: theme.typography.body1.fontSize,\n      padding: theme.spacing(1.25, 3.25, 1.25, 1.5),\n      transition: theme.transitions.create([\"border-color\", \"box-shadow\"]),\n      fontFamily: \"Helvetica Neue\",\n      \"&:focus\": {\n        background: theme.palette.background.paper,\n        borderRadius: theme.shape.borderRadius\n      }\n    }\n  }),\n  { name: \"BackstageSelectInputBase\" }\n)(InputBase);\nconst useStyles$o = makeStyles(\n  (theme) => createStyles({\n    formControl: {\n      margin: theme.spacing(1, 0),\n      maxWidth: 300\n    },\n    label: {\n      transform: \"initial\",\n      fontWeight: \"bold\",\n      fontSize: theme.typography.body2.fontSize,\n      fontFamily: theme.typography.fontFamily,\n      color: theme.palette.text.primary,\n      \"&.Mui-focused\": {\n        color: theme.palette.text.primary\n      }\n    },\n    formLabel: {\n      transform: \"initial\",\n      fontWeight: \"bold\",\n      fontSize: theme.typography.body2.fontSize,\n      fontFamily: theme.typography.fontFamily,\n      color: theme.palette.text.primary,\n      \"&.Mui-focused\": {\n        color: theme.palette.text.primary\n      }\n    },\n    chips: {\n      display: \"flex\",\n      flexWrap: \"wrap\"\n    },\n    chip: {\n      margin: 2\n    },\n    checkbox: {},\n    root: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    }\n  }),\n  { name: \"BackstageSelect\" }\n);\nfunction SelectComponent(props) {\n  const {\n    multiple,\n    items,\n    label,\n    placeholder,\n    selected,\n    onChange,\n    triggerReset,\n    native = false,\n    disabled = false,\n    margin\n  } = props;\n  const classes = useStyles$o();\n  const [value, setValue] = useState(\n    selected || (multiple ? [] : \"\")\n  );\n  const [isOpen, setOpen] = useState(false);\n  useEffect(() => {\n    setValue(multiple ? [] : \"\");\n  }, [triggerReset, multiple]);\n  useEffect(() => {\n    setValue(selected || (multiple ? [] : \"\"));\n  }, [selected, multiple]);\n  const handleChange = (event) => {\n    setValue(event.target.value);\n    onChange(event.target.value);\n  };\n  const handleOpen = (event) => {\n    if (disabled) {\n      event.preventDefault();\n      return;\n    }\n    setOpen((previous) => {\n      if (multiple && !(event.target instanceof HTMLElement)) {\n        return true;\n      }\n      return !previous;\n    });\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const handleDelete = (selectedValue) => () => {\n    const newValue = value.filter((chip) => chip !== selectedValue);\n    setValue(newValue);\n    onChange(newValue);\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, /* @__PURE__ */ React.createElement(FormControl, { className: classes.formControl }, /* @__PURE__ */ React.createElement(InputLabel, { className: classes.formLabel }, label), /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      \"aria-label\": label,\n      value,\n      native,\n      disabled,\n      \"data-testid\": \"select\",\n      displayEmpty: true,\n      multiple,\n      margin,\n      onChange: handleChange,\n      open: isOpen,\n      onOpen: handleOpen,\n      onClose: handleClose,\n      input: /* @__PURE__ */ React.createElement(BootstrapInput, null),\n      label,\n      renderValue: (s) => {\n        var _a;\n        return multiple && value.length !== 0 ? /* @__PURE__ */ React.createElement(Box, { className: classes.chips }, s.map((selectedValue) => {\n          const item = items.find((el) => el.value === selectedValue);\n          return item ? /* @__PURE__ */ React.createElement(\n            Chip,\n            {\n              key: item == null ? void 0 : item.value,\n              label: item == null ? void 0 : item.label,\n              clickable: true,\n              onDelete: handleDelete(selectedValue),\n              className: classes.chip\n            }\n          ) : false;\n        })) : /* @__PURE__ */ React.createElement(Typography, null, value.length === 0 ? placeholder || \"\" : (_a = items.find((el) => el.value === s)) == null ? void 0 : _a.label);\n      },\n      IconComponent: () => !isOpen ? /* @__PURE__ */ React.createElement(ClosedDropdown, null) : /* @__PURE__ */ React.createElement(OpenedDropdown, null),\n      MenuProps: {\n        anchorOrigin: {\n          vertical: \"bottom\",\n          horizontal: \"left\"\n        },\n        transformOrigin: {\n          vertical: \"top\",\n          horizontal: \"left\"\n        },\n        getContentAnchorEl: null\n      }\n    },\n    placeholder && !multiple && /* @__PURE__ */ React.createElement(MenuItem, { value: [] }, placeholder),\n    native ? items && items.map((item) => /* @__PURE__ */ React.createElement(\"option\", { value: item.value, key: item.value }, item.label)) : items && items.map((item) => /* @__PURE__ */ React.createElement(MenuItem, { key: item.value, value: item.value }, multiple && /* @__PURE__ */ React.createElement(\n      Checkbox,\n      {\n        color: \"primary\",\n        checked: value.includes(item.value) || false,\n        className: classes.checkbox\n      }\n    ), item.label))\n  )));\n}\n\nconst noop = () => {\n};\nconst VerticalStepperContext = React.createContext({\n  stepperLength: 0,\n  stepIndex: 0,\n  setStepIndex: noop,\n  stepHistory: [],\n  setStepHistory: noop,\n  onStepChange: noop\n});\nfunction SimpleStepper(props) {\n  const { children, elevated, onStepChange, activeStep = 0 } = props;\n  const [stepIndex, setStepIndex] = useState(activeStep);\n  const [stepHistory, setStepHistory] = useState([0]);\n  useEffect(() => {\n    setStepIndex(activeStep);\n  }, [activeStep]);\n  const steps = [];\n  let endStep;\n  Children.forEach(children, (child) => {\n    if (isValidElement(child)) {\n      if (child.props.end) {\n        endStep = child;\n      } else {\n        steps.push(child);\n      }\n    }\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    VerticalStepperContext.Provider,\n    {\n      value: {\n        stepIndex,\n        setStepIndex,\n        stepHistory,\n        setStepHistory,\n        onStepChange,\n        stepperLength: Children.count(children)\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      MuiStepper,\n      {\n        activeStep: stepIndex,\n        orientation: \"vertical\",\n        elevation: elevated ? 2 : 0\n      },\n      steps\n    )\n  ), stepIndex >= Children.count(children) - 1 && endStep);\n}\n\nconst useStyles$n = makeStyles(\n  (theme) => ({\n    root: {\n      marginTop: theme.spacing(3),\n      \"& button\": {\n        marginRight: theme.spacing(1)\n      }\n    }\n  }),\n  { name: \"BackstageSimpleStepperFooter\" }\n);\nconst RestartBtn = ({ text, handleClick }) => /* @__PURE__ */ React.createElement(Button$1, { onClick: handleClick }, text || \"Reset\");\nconst NextBtn = ({\n  text,\n  handleClick,\n  disabled,\n  last,\n  stepIndex\n}) => /* @__PURE__ */ React.createElement(\n  Button$1,\n  {\n    variant: \"contained\",\n    color: \"primary\",\n    disabled,\n    \"data-testid\": `nextButton-${stepIndex}`,\n    onClick: handleClick\n  },\n  text || (last ? \"Finish\" : \"Next\")\n);\nconst SkipBtn = ({ text, handleClick, disabled, stepIndex }) => /* @__PURE__ */ React.createElement(\n  Button$1,\n  {\n    variant: \"outlined\",\n    color: \"primary\",\n    disabled,\n    \"data-testid\": `skipButton-${stepIndex}`,\n    onClick: handleClick\n  },\n  text || \"Skip\"\n);\nconst BackBtn = ({ text, handleClick, disabled, stepIndex }) => /* @__PURE__ */ React.createElement(\n  Button$1,\n  {\n    onClick: handleClick,\n    \"data-testid\": `backButton-${stepIndex}`,\n    disabled\n  },\n  text || \"Back\"\n);\nconst SimpleStepperFooter = ({\n  actions = {},\n  children\n}) => {\n  const classes = useStyles$n();\n  const {\n    stepperLength,\n    stepIndex,\n    setStepIndex,\n    stepHistory,\n    setStepHistory,\n    onStepChange\n  } = useContext(VerticalStepperContext);\n  const onChange = (newIndex, callback) => {\n    if (callback) {\n      callback();\n    }\n    if (onStepChange) {\n      onStepChange(stepIndex, newIndex);\n    }\n    setStepIndex(newIndex);\n  };\n  const handleNext = () => {\n    const newIndex = actions.nextStep ? actions.nextStep(stepIndex, stepperLength - 1) : stepIndex + 1;\n    onChange(newIndex, actions.onNext);\n    setStepHistory([...stepHistory, newIndex]);\n  };\n  const handleBack = () => {\n    stepHistory.pop();\n    onChange(stepHistory[stepHistory.length - 1], actions.onBack);\n    setStepHistory([...stepHistory]);\n  };\n  const handleRestart = () => {\n    onChange(0, actions.onRestart);\n    setStepHistory([0]);\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, [void 0, true].includes(actions.showBack) && stepIndex !== 0 && /* @__PURE__ */ React.createElement(\n    BackBtn,\n    {\n      text: actions.backText,\n      handleClick: handleBack,\n      disabled: stepIndex === 0,\n      stepIndex\n    }\n  ), actions.showSkip && /* @__PURE__ */ React.createElement(\n    SkipBtn,\n    {\n      text: actions.skipText,\n      handleClick: handleNext,\n      disabled: !!stepperLength && stepIndex >= stepperLength || !!actions.canSkip && !actions.canSkip(),\n      stepIndex\n    }\n  ), [void 0, true].includes(actions.showNext) && /* @__PURE__ */ React.createElement(\n    NextBtn,\n    {\n      text: actions.nextText,\n      handleClick: handleNext,\n      disabled: !!stepperLength && stepIndex >= stepperLength || !!actions.canNext && !actions.canNext(),\n      stepIndex\n    }\n  ), actions.showRestart && stepIndex !== 0 && /* @__PURE__ */ React.createElement(\n    RestartBtn,\n    {\n      text: actions.restartText,\n      handleClick: handleRestart,\n      stepIndex\n    }\n  ), children);\n};\n\nconst useStyles$m = makeStyles(\n  (theme) => ({\n    end: {\n      padding: theme.spacing(3)\n    }\n  }),\n  { name: \"SimpleStepperStep\" }\n);\nfunction SimpleStepperStep(props) {\n  const { title, children, end, actions, ...muiProps } = props;\n  const classes = useStyles$m();\n  return end ? /* @__PURE__ */ React.createElement(Box, { className: classes.end }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, title), children, /* @__PURE__ */ React.createElement(SimpleStepperFooter, { actions: { ...actions || {}, showNext: false } })) : /* @__PURE__ */ React.createElement(MuiStep, { ...muiProps }, /* @__PURE__ */ React.createElement(StepLabel, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, title)), /* @__PURE__ */ React.createElement(StepContent, null, children, /* @__PURE__ */ React.createElement(SimpleStepperFooter, { actions })));\n}\n\nconst useStyles$l = makeStyles(\n  (theme) => ({\n    status: {\n      fontWeight: theme.typography.fontWeightMedium,\n      \"&::before\": {\n        width: \"0.7em\",\n        height: \"0.7em\",\n        display: \"inline-block\",\n        marginRight: theme.spacing(1),\n        borderRadius: \"50%\",\n        content: '\"\"'\n      }\n    },\n    ok: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.ok\n      }\n    },\n    warning: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.warning\n      }\n    },\n    error: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.error\n      }\n    },\n    pending: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.pending\n      }\n    },\n    running: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.running\n      }\n    },\n    aborted: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.aborted\n      }\n    }\n  }),\n  { name: \"BackstageStatus\" }\n);\nfunction StatusOK(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.ok),\n      \"aria-label\": \"Status ok\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusWarning(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.warning),\n      \"aria-label\": \"Status warning\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusError(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.error),\n      \"aria-label\": \"Status error\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusPending(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.pending),\n      \"aria-label\": \"Status pending\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusRunning(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.running),\n      \"aria-label\": \"Status running\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusAborted(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.aborted),\n      \"aria-label\": \"Status aborted\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\n\nconst tableTitleCellStyles = (theme) => createStyles({\n  root: {\n    fontWeight: theme.typography.fontWeightBold,\n    whiteSpace: \"nowrap\",\n    paddingRight: theme.spacing(4),\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n});\nconst tableContentCellStyles = {\n  root: {\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n};\nconst listStyles = (theme) => createStyles({\n  root: {\n    margin: theme.spacing(0, 0, -1, 0)\n  }\n});\nconst listItemStyles = (theme) => createStyles({\n  root: {\n    padding: theme.spacing(0, 0, 1, 0)\n  },\n  random: {}\n});\nconst TitleCell = withStyles(tableTitleCellStyles, {\n  name: \"BackstageMetadataTableTitleCell\"\n})(TableCell);\nconst ContentCell = withStyles(tableContentCellStyles, {\n  name: \"BackstageMetadataTableCell\"\n})(TableCell);\nconst MetadataTable = ({\n  dense,\n  children\n}) => /* @__PURE__ */ React.createElement(Table$1, { size: dense ? \"small\" : \"medium\" }, /* @__PURE__ */ React.createElement(TableBody, null, children));\nconst MetadataTableItem = ({\n  title,\n  children,\n  ...rest\n}) => /* @__PURE__ */ React.createElement(TableRow, null, title && /* @__PURE__ */ React.createElement(TitleCell, null, title), /* @__PURE__ */ React.createElement(ContentCell, { colSpan: title ? 1 : 2, ...rest }, children));\nconst MetadataList = withStyles(listStyles, {\n  name: \"BackstageMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(List, { disablePadding: true, className: classes.root }, children));\nconst MetadataListItem = withStyles(listItemStyles, {\n  name: \"BackstageMetadataTableListItem\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(ListItem, { className: classes.root }, children));\n\nconst listStyle = createStyles({\n  root: {\n    margin: \"0 0\",\n    listStyleType: \"none\"\n  }\n});\nconst nestedListStyle = (theme) => createStyles({\n  root: {\n    ...listStyle.root,\n    paddingLeft: theme.spacing(1)\n  }\n});\nconst StyledList = withStyles(listStyle, {\n  name: \"BackstageStructuredMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(MetadataList, { classes }, children));\nconst StyledNestedList = withStyles(nestedListStyle, {\n  name: \"BackstageStructuredMetadataTableNestedList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(MetadataList, { classes }, children));\nfunction renderList(list, options, nested) {\n  const values = list.map((item, index) => /* @__PURE__ */ React.createElement(MetadataListItem, { key: index }, toValue(item, options, nested)));\n  return nested ? /* @__PURE__ */ React.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React.createElement(StyledList, null, values);\n}\nfunction renderMap(map, options, nested) {\n  const values = Object.keys(map).map((key) => {\n    const value = toValue(map[key], options, true);\n    return /* @__PURE__ */ React.createElement(MetadataListItem, { key }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", component: \"span\" }, `${options.titleFormat(key)}: `), value);\n  });\n  return nested ? /* @__PURE__ */ React.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React.createElement(StyledList, null, values);\n}\nfunction toValue(value, options, nested) {\n  if (React.isValidElement(value)) {\n    return /* @__PURE__ */ React.createElement(Fragment, null, value);\n  }\n  if (value !== null && typeof value === \"object\" && !Array.isArray(value)) {\n    return renderMap(value, options, nested);\n  }\n  if (Array.isArray(value)) {\n    return renderList(value, options, nested);\n  }\n  if (typeof value === \"boolean\") {\n    return /* @__PURE__ */ React.createElement(Fragment, null, value ? \"\\u2705\" : \"\\u274C\");\n  }\n  return /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", component: \"span\" }, value);\n}\nconst ItemValue = ({ value, options }) => /* @__PURE__ */ React.createElement(Fragment, null, toValue(value, options, false));\nconst TableItem = ({\n  title,\n  value,\n  options\n}) => {\n  return /* @__PURE__ */ React.createElement(MetadataTableItem, { title: options.titleFormat(title) }, /* @__PURE__ */ React.createElement(ItemValue, { value, options }));\n};\nfunction mapToItems(info, options) {\n  return Object.keys(info).map((key) => /* @__PURE__ */ React.createElement(TableItem, { key, title: key, value: info[key], options }));\n}\nfunction StructuredMetadataTable(props) {\n  const { metadata, dense = true, options = {} } = props;\n  const metadataItems = mapToItems(metadata, {\n    titleFormat: startCase,\n    ...options\n  });\n  return /* @__PURE__ */ React.createElement(MetadataTable, { dense }, metadataItems);\n}\n\nfunction stringify(queryParams) {\n  return qs.stringify(queryParams, {\n    strictNullHandling: true\n  });\n}\nfunction parse(queryString) {\n  return qs.parse(queryString, {\n    ignoreQueryPrefix: true,\n    strictNullHandling: true\n  });\n}\nfunction extractState(queryString, stateName) {\n  const queryParams = parse(queryString);\n  return queryParams[stateName];\n}\nfunction joinQueryString(queryString, stateName, state) {\n  const queryParams = {\n    ...parse(queryString),\n    [stateName]: state\n  };\n  return stringify(queryParams);\n}\nfunction useQueryParamState(stateName, debounceTime = 250) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const searchParamsString = searchParams.toString();\n  const [queryParamState, setQueryParamState] = useState(\n    extractState(searchParamsString, stateName)\n  );\n  useEffect(() => {\n    const newState = extractState(searchParamsString, stateName);\n    setQueryParamState(\n      (oldState) => isEqual(newState, oldState) ? oldState : newState\n    );\n  }, [searchParamsString, setQueryParamState, stateName]);\n  useDebouncedEffect(\n    () => {\n      const queryString = joinQueryString(\n        searchParamsString,\n        stateName,\n        queryParamState\n      );\n      if (searchParamsString !== queryString) {\n        setSearchParams(queryString, { replace: true });\n      }\n    },\n    [setSearchParams, queryParamState, searchParamsString, stateName],\n    debounceTime\n  );\n  return [queryParamState, setQueryParamState];\n}\n\nconst DEFAULT_SUPPORT_CONFIG = {\n  url: \"https://github.com/backstage/backstage/issues\",\n  items: [\n    {\n      title: \"Support Not Configured\",\n      icon: \"warning\",\n      links: [\n        {\n          // TODO: Update to dedicated support page on backstage.io/docs\n          title: \"Add `app.support` config key\",\n          url: \"https://github.com/backstage/backstage/blob/master/app-config.yaml\"\n        }\n      ]\n    }\n  ]\n};\nfunction useSupportConfig() {\n  const apiHolder = useApiHolder();\n  const config = apiHolder.get(configApiRef);\n  const supportConfig = config == null ? void 0 : config.getOptionalConfig(\"app.support\");\n  if (!supportConfig) {\n    return DEFAULT_SUPPORT_CONFIG;\n  }\n  return {\n    url: supportConfig.getString(\"url\"),\n    items: supportConfig.getConfigArray(\"items\").flatMap((itemConf) => {\n      var _a;\n      return {\n        title: itemConf.getString(\"title\"),\n        icon: itemConf.getOptionalString(\"icon\"),\n        links: ((_a = itemConf.getOptionalConfigArray(\"links\")) != null ? _a : []).flatMap(\n          (linkConf) => ({\n            url: linkConf.getString(\"url\"),\n            title: linkConf.getString(\"title\")\n          })\n        )\n      };\n    })\n  };\n}\n\nfunction useSystemIcon(key, props) {\n  const app = useApp();\n  const Icon = app.getSystemIcon(key);\n  return Icon ? /* @__PURE__ */ React.createElement(Icon, { ...props }) : /* @__PURE__ */ React.createElement(MuiBrokenImageIcon, { ...props });\n}\nfunction BrokenImageIcon(props) {\n  return useSystemIcon(\"brokenImage\", props);\n}\nfunction CatalogIcon(props) {\n  return useSystemIcon(\"catalog\", props);\n}\nfunction ChatIcon(props) {\n  return useSystemIcon(\"chat\", props);\n}\nfunction DashboardIcon(props) {\n  return useSystemIcon(\"dashboard\", props);\n}\nfunction DocsIcon(props) {\n  return useSystemIcon(\"docs\", props);\n}\nfunction EmailIcon(props) {\n  return useSystemIcon(\"email\", props);\n}\nfunction GitHubIcon(props) {\n  return useSystemIcon(\"github\", props);\n}\nfunction GroupIcon(props) {\n  return useSystemIcon(\"group\", props);\n}\nfunction HelpIcon(props) {\n  return useSystemIcon(\"help\", props);\n}\nfunction UserIcon(props) {\n  return useSystemIcon(\"user\", props);\n}\nfunction WarningIcon(props) {\n  return useSystemIcon(\"warning\", props);\n}\n\nconst useStyles$k = makeStyles(\n  {\n    popoverList: {\n      minWidth: 260,\n      maxWidth: 400\n    },\n    menuItem: {\n      whiteSpace: \"normal\"\n    }\n  },\n  { name: \"BackstageSupportButton\" }\n);\nconst SupportIcon = ({ icon }) => {\n  var _a;\n  const app = useApp();\n  const Icon = icon ? (_a = app.getSystemIcon(icon)) != null ? _a : HelpIcon : HelpIcon;\n  return /* @__PURE__ */ React.createElement(Icon, null);\n};\nconst SupportLink = ({ link }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(Link, { to: link.url }, (_a = link.title) != null ? _a : link.url);\n};\nconst SupportListItem = ({ item }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(MenuItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(SupportIcon, { icon: item.icon })), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: item.title,\n      secondary: (_a = item.links) == null ? void 0 : _a.reduce(\n        (prev, link, idx) => [\n          ...prev,\n          idx > 0 && /* @__PURE__ */ React.createElement(\"br\", { key: idx }),\n          /* @__PURE__ */ React.createElement(SupportLink, { link, key: link.url })\n        ],\n        []\n      )\n    }\n  ));\n};\nfunction SupportButton(props) {\n  const { title, items, children } = props;\n  const { items: configItems } = useSupportConfig();\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const classes = useStyles$k();\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"sm\")\n  );\n  const onClickHandler = (event) => {\n    setAnchorEl(event.currentTarget);\n    setPopoverOpen(true);\n  };\n  const popoverCloseHandler = () => {\n    setPopoverOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { display: \"flex\", ml: 1 }, isSmallScreen ? /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      color: \"primary\",\n      size: \"small\",\n      onClick: onClickHandler,\n      \"data-testid\": \"support-button\",\n      \"aria-label\": \"Support\"\n    },\n    /* @__PURE__ */ React.createElement(HelpIcon, null)\n  ) : /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      \"data-testid\": \"support-button\",\n      \"aria-label\": \"Support\",\n      color: \"primary\",\n      onClick: onClickHandler,\n      startIcon: /* @__PURE__ */ React.createElement(HelpIcon, null)\n    },\n    \"Support\"\n  )), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      \"data-testid\": \"support-button-popover\",\n      open: popoverOpen,\n      anchorEl,\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"right\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      onClose: popoverCloseHandler\n    },\n    /* @__PURE__ */ React.createElement(\n      MenuList,\n      {\n        className: classes.popoverList,\n        autoFocusItem: Boolean(anchorEl)\n      },\n      title && /* @__PURE__ */ React.createElement(MenuItem, { alignItems: \"flex-start\", className: classes.menuItem }, /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\" }, title)),\n      React.Children.map(children, (child, i) => /* @__PURE__ */ React.createElement(\n        MenuItem,\n        {\n          alignItems: \"flex-start\",\n          key: `child-${i}`,\n          className: classes.menuItem\n        },\n        child\n      )),\n      (items != null ? items : configItems).map((item, i) => /* @__PURE__ */ React.createElement(SupportListItem, { item, key: `item-${i}` }))\n    ),\n    /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        color: \"primary\",\n        onClick: popoverCloseHandler,\n        \"aria-label\": \"Close\"\n      },\n      \"Close\"\n    ))\n  ));\n}\n\nconst useStyles$j = makeStyles(\n  (theme) => ({\n    root: {\n      gridArea: \"pageContent\",\n      minWidth: 0,\n      paddingTop: theme.spacing(3),\n      paddingBottom: theme.spacing(3),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up(\"sm\")]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3)\n      }\n    },\n    stretch: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      flexGrow: 1\n    },\n    noPadding: {\n      padding: 0\n    }\n  }),\n  { name: \"BackstageContent\" }\n);\nfunction Content(props) {\n  const { className, stretch, noPadding, children, ...restProps } = props;\n  const classes = useStyles$j();\n  return /* @__PURE__ */ React.createElement(\n    \"article\",\n    {\n      ...restProps,\n      className: classNames(classes.root, className, {\n        [classes.stretch]: stretch,\n        [classes.noPadding]: noPadding\n      })\n    },\n    children\n  );\n}\n\nconst useStyles$i = makeStyles(\n  (theme) => ({\n    tabsWrapper: {\n      gridArea: \"pageSubheader\",\n      backgroundColor: theme.palette.background.paper,\n      paddingLeft: theme.spacing(3),\n      minWidth: 0\n    },\n    defaultTab: {\n      ...theme.typography.caption,\n      padding: theme.spacing(3, 3),\n      textTransform: \"uppercase\",\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.text.secondary\n    },\n    selected: {\n      color: theme.palette.text.primary\n    },\n    tabRoot: {\n      \"&:hover\": {\n        backgroundColor: theme.palette.background.default,\n        color: theme.palette.text.primary\n      }\n    }\n  }),\n  { name: \"BackstageHeaderTabs\" }\n);\nfunction HeaderTabs(props) {\n  const { tabs, onChange, selectedIndex } = props;\n  const [selectedTab, setSelectedTab] = useState(selectedIndex != null ? selectedIndex : 0);\n  const styles = useStyles$i();\n  const handleChange = useCallback(\n    (_, index) => {\n      if (selectedIndex === void 0) {\n        setSelectedTab(index);\n      }\n      if (onChange)\n        onChange(index);\n    },\n    [selectedIndex, onChange]\n  );\n  useEffect(() => {\n    if (selectedIndex !== void 0) {\n      setSelectedTab(selectedIndex);\n    }\n  }, [selectedIndex]);\n  return /* @__PURE__ */ React.createElement(Box, { className: styles.tabsWrapper }, /* @__PURE__ */ React.createElement(\n    Tabs,\n    {\n      selectionFollowsFocus: true,\n      indicatorColor: \"primary\",\n      textColor: \"inherit\",\n      variant: \"scrollable\",\n      scrollButtons: \"auto\",\n      \"aria-label\": \"tabs\",\n      onChange: handleChange,\n      value: selectedTab\n    },\n    tabs.map((tab, index) => /* @__PURE__ */ React.createElement(\n      TabUI,\n      {\n        ...tab.tabProps,\n        \"data-testid\": `header-tab-${index}`,\n        label: tab.label,\n        key: tab.id,\n        value: index,\n        className: styles.defaultTab,\n        classes: { selected: styles.selected, root: styles.tabRoot }\n      }\n    ))\n  ));\n}\n\nfunction useSelectedSubRoute(subRoutes) {\n  var _a, _b, _c, _d, _e;\n  const params = useParams();\n  const routes = subRoutes.map(({ path, children }) => ({\n    caseSensitive: false,\n    path: `${path}/*`,\n    element: children\n  }));\n  const sortedRoutes = routes.sort(\n    (a, b) => (\n      // remove \"/*\" symbols from path end before comparing\n      b.path.replace(/\\/\\*$/, \"\").localeCompare(a.path.replace(/\\/\\*$/, \"\"))\n    )\n  );\n  const element = (_b = useRoutes(sortedRoutes)) != null ? _b : (_a = subRoutes[0]) == null ? void 0 : _a.children;\n  let currentRoute = (_c = params[\"*\"]) != null ? _c : \"\";\n  if (!currentRoute.startsWith(\"/\")) {\n    currentRoute = `/${currentRoute}`;\n  }\n  const [matchedRoute] = (_d = matchRoutes(sortedRoutes, currentRoute)) != null ? _d : [];\n  const foundIndex = matchedRoute ? subRoutes.findIndex((t) => `${t.path}/*` === matchedRoute.route.path) : 0;\n  return {\n    index: foundIndex === -1 ? 0 : foundIndex,\n    element,\n    route: (_e = subRoutes[foundIndex]) != null ? _e : subRoutes[0]\n  };\n}\nfunction RoutedTabs(props) {\n  const { routes } = props;\n  const navigate = useNavigate();\n  const { index, route, element } = useSelectedSubRoute(routes);\n  const headerTabs = useMemo(\n    () => routes.map((t) => ({\n      id: t.path,\n      label: t.title,\n      tabProps: t.tabProps\n    })),\n    [routes]\n  );\n  const onTabChange = (tabIndex) => {\n    let { path } = routes[tabIndex];\n    path = path.replace(/\\/\\*$/, \"\");\n    path = path.replace(/^\\//, \"\");\n    navigate(path);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    HeaderTabs,\n    {\n      tabs: headerTabs,\n      selectedIndex: index,\n      onChange: onTabChange\n    }\n  ), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Helmet, { title: route == null ? void 0 : route.title }), element));\n}\n\nconst Route = () => null;\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nfunction createSubRoutesFromChildren(childrenProps) {\n  const routeType = (/* @__PURE__ */ React.createElement(Route, { path: \"\", title: \"\" }, /* @__PURE__ */ React.createElement(\"div\", null))).type;\n  return Children.toArray(childrenProps).flatMap((child) => {\n    if (!isValidElement(child)) {\n      return [];\n    }\n    if (child.type === Fragment) {\n      return createSubRoutesFromChildren(child.props.children);\n    }\n    if (child.type !== routeType) {\n      throw new Error(\"Child of TabbedLayout must be an TabbedLayout.Route\");\n    }\n    const { path, title, children, tabProps } = child.props;\n    return [{ path, title, children, tabProps }];\n  });\n}\nfunction TabbedLayout(props) {\n  const routes = createSubRoutesFromChildren(props.children);\n  return /* @__PURE__ */ React.createElement(RoutedTabs, { routes });\n}\nTabbedLayout.Route = Route;\n\nconst useSubvalueCellStyles = makeStyles(\n  (theme) => ({\n    value: {\n      marginBottom: theme.spacing(0.75)\n    },\n    subvalue: {\n      color: theme.palette.textSubtle,\n      fontWeight: \"normal\"\n    }\n  }),\n  { name: \"BackstageSubvalueCell\" }\n);\nfunction SubvalueCell(props) {\n  const { value, subvalue } = props;\n  const classes = useSubvalueCellStyles();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { className: classes.value }, value), /* @__PURE__ */ React.createElement(Box, { className: classes.subvalue }, subvalue));\n}\n\nconst useFilterStyles$1 = makeStyles(\n  (theme) => ({\n    root: {\n      height: \"100%\",\n      width: \"315px\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      marginRight: theme.spacing(3)\n    },\n    value: {\n      fontWeight: \"bold\",\n      fontSize: 18\n    },\n    header: {\n      display: \"flex\",\n      alignItems: \"center\",\n      height: theme.spacing(7.5),\n      justifyContent: \"space-between\",\n      borderBottom: `1px solid ${theme.palette.grey[500]}`\n    },\n    filters: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      \"& > *\": {\n        marginTop: theme.spacing(2)\n      }\n    }\n  }),\n  { name: \"BackstageTableFilters\" }\n);\nconst Filters = (props) => {\n  var _a;\n  const classes = useFilterStyles$1();\n  const { onChangeFilters } = props;\n  const [selectedFilters, setSelectedFilters] = useState({\n    ...props.selectedFilters\n  });\n  const [reset, triggerReset] = useState(false);\n  const handleClick = () => {\n    setSelectedFilters({});\n    triggerReset((el) => !el);\n  };\n  useEffect(() => {\n    onChangeFilters(selectedFilters);\n  }, [selectedFilters, onChangeFilters]);\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, /* @__PURE__ */ React.createElement(Box, { className: classes.header }, /* @__PURE__ */ React.createElement(Box, { className: classes.value }, \"Filters\"), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", onClick: handleClick }, \"Clear all\")), /* @__PURE__ */ React.createElement(Box, { className: classes.filters }, ((_a = props.filters) == null ? void 0 : _a.length) && props.filters.map((filter) => /* @__PURE__ */ React.createElement(\n    SelectComponent,\n    {\n      triggerReset: reset,\n      key: filter.element.label,\n      ...filter.element,\n      selected: selectedFilters[filter.element.label],\n      onChange: (el) => setSelectedFilters({\n        ...selectedFilters,\n        [filter.element.label]: el\n      })\n    }\n  ))));\n};\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(AddBox, { ...props, ref })),\n  Check: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Check, { ...props, ref })),\n  Clear: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Clear, { ...props, ref })),\n  Delete: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(DeleteOutline, { ...props, ref })),\n  DetailPanel: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronRight, { ...props, ref })),\n  Edit: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Edit, { ...props, ref })),\n  Export: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(SaveAlt, { ...props, ref })),\n  Filter: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FilterList, { ...props, ref })),\n  FirstPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FirstPage, { ...props, ref })),\n  LastPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(LastPage, { ...props, ref })),\n  NextPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronRight, { ...props, ref })),\n  PreviousPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronLeftIcon, { ...props, ref })),\n  ResetSearch: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Clear, { ...props, ref })),\n  Search: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FilterList, { ...props, ref })),\n  SortArrow: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ArrowUpward, { ...props, ref })),\n  ThirdStateCheck: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Remove, { ...props, ref })),\n  ViewColumn: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ViewColumn, { ...props, ref }))\n};\nfunction extractValueByField(data, field) {\n  const path = field.split(\".\");\n  let value = data[path[0]];\n  for (let i = 1; i < path.length; ++i) {\n    if (value === void 0) {\n      return value;\n    }\n    const f = path[i];\n    value = value[f];\n  }\n  return value;\n}\nconst StyledMTableHeader = withStyles(\n  (theme) => ({\n    header: {\n      padding: theme.spacing(1, 2, 1, 2.5),\n      borderTop: `1px solid ${theme.palette.grey.A100}`,\n      borderBottom: `1px solid ${theme.palette.grey.A100}`,\n      // withStyles hasn't a generic overload for theme\n      fontWeight: theme.typography.fontWeightBold,\n      position: \"static\",\n      wordBreak: \"normal\"\n    }\n  }),\n  { name: \"BackstageTableHeader\" }\n)(MTableHeader);\nconst StyledMTableToolbar = withStyles(\n  (theme) => ({\n    root: {\n      padding: theme.spacing(3, 0, 2.5, 2.5)\n    },\n    title: {\n      \"& > h6\": {\n        fontWeight: theme.typography.fontWeightBold\n      }\n    },\n    searchField: {\n      paddingRight: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageTableToolbar\" }\n)(MTableToolbar);\nconst useFilterStyles = makeStyles(\n  (theme) => ({\n    root: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\"\n    },\n    title: {\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: 18,\n      whiteSpace: \"nowrap\"\n    }\n  }),\n  { name: \"BackstageTableFiltersContainer\" }\n);\nconst useTableStyles = makeStyles(\n  () => ({\n    root: {\n      display: \"flex\",\n      alignItems: \"start\"\n    }\n  }),\n  { name: \"BackstageTable\" }\n);\nfunction convertColumns(columns, theme) {\n  return columns.map((column) => {\n    var _a;\n    const headerStyle = (_a = column.headerStyle) != null ? _a : {};\n    let cellStyle = column.cellStyle || {};\n    if (column.highlight) {\n      headerStyle.color = theme.palette.textContrast;\n      if (typeof cellStyle === \"object\") {\n        cellStyle.fontWeight = theme.typography.fontWeightBold;\n      } else {\n        const cellStyleFn = cellStyle;\n        cellStyle = (data, rowData, rowColumn) => {\n          const style = cellStyleFn(data, rowData, rowColumn);\n          return { ...style, fontWeight: theme.typography.fontWeightBold };\n        };\n      }\n    }\n    return {\n      ...column,\n      headerStyle,\n      cellStyle\n    };\n  });\n}\nfunction removeDefaultValues(state, defaultState) {\n  return transform(state, (result, value, key) => {\n    if (!isEqual(value, defaultState[key])) {\n      result[key] = value;\n    }\n  });\n}\nconst defaultInitialState = {\n  search: \"\",\n  filtersOpen: false,\n  filters: {}\n};\nfunction TableToolbar(toolbarProps) {\n  const {\n    toolbarRef,\n    setSearch,\n    hasFilters,\n    selectedFiltersLength,\n    toggleFilters\n  } = toolbarProps;\n  const filtersClasses = useFilterStyles();\n  const onSearchChanged = useCallback(\n    (searchText) => {\n      toolbarProps.onSearchChanged(searchText);\n      setSearch(searchText);\n    },\n    [toolbarProps, setSearch]\n  );\n  if (hasFilters) {\n    return /* @__PURE__ */ React.createElement(Box, { className: filtersClasses.root }, /* @__PURE__ */ React.createElement(Box, { className: filtersClasses.root }, /* @__PURE__ */ React.createElement(IconButton, { onClick: toggleFilters, \"aria-label\": \"filter list\" }, /* @__PURE__ */ React.createElement(FilterList, null)), /* @__PURE__ */ React.createElement(Typography, { className: filtersClasses.title }, \"Filters (\", selectedFiltersLength, \")\")), /* @__PURE__ */ React.createElement(\n      StyledMTableToolbar,\n      {\n        ...toolbarProps,\n        ref: toolbarRef,\n        onSearchChanged\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    StyledMTableToolbar,\n    {\n      ...toolbarProps,\n      ref: toolbarRef,\n      onSearchChanged\n    }\n  );\n}\nfunction Table(props) {\n  const {\n    data,\n    columns,\n    options,\n    title,\n    subtitle,\n    filters,\n    initialState,\n    emptyContent,\n    onStateChange,\n    components,\n    isLoading,\n    ...restProps\n  } = props;\n  const tableClasses = useTableStyles();\n  const theme = useTheme();\n  const calculatedInitialState = { ...defaultInitialState, ...initialState };\n  const [filtersOpen, setFiltersOpen] = useState(\n    calculatedInitialState.filtersOpen\n  );\n  const toggleFilters = useCallback(\n    () => setFiltersOpen((v) => !v),\n    [setFiltersOpen]\n  );\n  const [selectedFiltersLength, setSelectedFiltersLength] = useState(0);\n  const [tableData, setTableData] = useState(data);\n  const [selectedFilters, setSelectedFilters] = useState(\n    calculatedInitialState.filters\n  );\n  const MTColumns = convertColumns(columns, theme);\n  const [search, setSearch] = useState(calculatedInitialState.search);\n  useEffect(() => {\n    if (onStateChange) {\n      const state = removeDefaultValues(\n        {\n          search,\n          filtersOpen,\n          filters: selectedFilters\n        },\n        defaultInitialState\n      );\n      onStateChange(state);\n    }\n  }, [search, filtersOpen, selectedFilters, onStateChange]);\n  const defaultOptions = {\n    headerStyle: {\n      textTransform: \"uppercase\"\n    }\n  };\n  const getFieldByTitle = useCallback(\n    (titleValue) => {\n      var _a;\n      return (_a = columns.find((el) => el.title === titleValue)) == null ? void 0 : _a.field;\n    },\n    [columns]\n  );\n  useEffect(() => {\n    if (typeof data === \"function\") {\n      return;\n    }\n    if (!selectedFilters) {\n      setTableData(data);\n      return;\n    }\n    const selectedFiltersArray = Object.values(selectedFilters);\n    if (data && selectedFiltersArray.flat().length) {\n      const newData = data.filter(\n        (el) => !!Object.entries(selectedFilters).filter(([, value]) => !!value.length).every(([key, filterValue]) => {\n          const fieldValue = extractValueByField(\n            el,\n            getFieldByTitle(key)\n          );\n          if (Array.isArray(fieldValue) && Array.isArray(filterValue)) {\n            return fieldValue.some((v) => filterValue.includes(v));\n          } else if (Array.isArray(fieldValue)) {\n            return fieldValue.includes(filterValue);\n          } else if (Array.isArray(filterValue)) {\n            return filterValue.includes(fieldValue);\n          }\n          return fieldValue === filterValue;\n        })\n      );\n      setTableData(newData);\n    } else {\n      setTableData(data);\n    }\n    setSelectedFiltersLength(selectedFiltersArray.flat().length);\n  }, [data, selectedFilters, getFieldByTitle]);\n  const constructFilters = (filterConfig, dataValue) => {\n    const extractDistinctValues = (field) => {\n      const distinctValues = /* @__PURE__ */ new Set();\n      const addValue = (value) => {\n        if (value !== void 0 && value !== null) {\n          distinctValues.add(value);\n        }\n      };\n      if (dataValue) {\n        dataValue.forEach((el) => {\n          const value = extractValueByField(\n            el,\n            getFieldByTitle(field)\n          );\n          if (Array.isArray(value)) {\n            value.forEach(addValue);\n          } else {\n            addValue(value);\n          }\n        });\n      }\n      return distinctValues;\n    };\n    const constructSelect = (filter) => {\n      return {\n        placeholder: \"All results\",\n        label: filter.column,\n        multiple: filter.type === \"multiple-select\",\n        items: [...extractDistinctValues(filter.column)].sort().map((value) => ({\n          label: value,\n          value\n        }))\n      };\n    };\n    return filterConfig.map((filter) => ({\n      type: filter.type,\n      element: constructSelect(filter)\n    }));\n  };\n  const hasFilters = !!(filters == null ? void 0 : filters.length);\n  const Toolbar = useCallback(\n    (toolbarProps) => {\n      return /* @__PURE__ */ React.createElement(\n        TableToolbar,\n        {\n          setSearch,\n          hasFilters,\n          selectedFiltersLength,\n          toggleFilters,\n          ...toolbarProps\n        }\n      );\n    },\n    [toggleFilters, hasFilters, selectedFiltersLength, setSearch]\n  );\n  const hasNoRows = typeof data !== \"function\" && data.length === 0;\n  const columnCount = columns.length;\n  const Body = useCallback(\n    (bodyProps) => {\n      if (isLoading) {\n        return /* @__PURE__ */ React.createElement(\"tbody\", { \"data-testid\": \"loading-indicator\" }, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { colSpan: columnCount }, /* @__PURE__ */ React.createElement(\n          Box,\n          {\n            sx: {\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              width: \"100%\",\n              minHeight: \"15rem\"\n            }\n          },\n          /* @__PURE__ */ React.createElement(CircularProgress, { size: \"5rem\" })\n        ))));\n      }\n      if (emptyContent && hasNoRows) {\n        return /* @__PURE__ */ React.createElement(\"tbody\", null, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { colSpan: columnCount }, emptyContent)));\n      }\n      return /* @__PURE__ */ React.createElement(MTableBody, { ...bodyProps });\n    },\n    [hasNoRows, emptyContent, columnCount, isLoading]\n  );\n  return /* @__PURE__ */ React.createElement(Box, { className: tableClasses.root }, filtersOpen && data && typeof data !== \"function\" && (filters == null ? void 0 : filters.length) && /* @__PURE__ */ React.createElement(\n    Filters,\n    {\n      filters: constructFilters(filters, data),\n      selectedFilters,\n      onChangeFilters: setSelectedFilters\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MTable,\n    {\n      components: {\n        Header: StyledMTableHeader,\n        Toolbar,\n        Body,\n        ...components\n      },\n      options: { ...defaultOptions, ...options },\n      columns: MTColumns,\n      icons: tableIcons,\n      title: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", component: \"h2\" }, title), subtitle && /* @__PURE__ */ React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\" }, subtitle)),\n      data: typeof data === \"function\" ? data : tableData,\n      style: { width: \"100%\" },\n      localization: {\n        toolbar: { searchPlaceholder: \"Filter\", searchTooltip: \"Filter\" }\n      },\n      ...restProps\n    }\n  ));\n}\nTable.icons = Object.freeze(tableIcons);\n\nfunction color(data, theme) {\n  const lastNum = data[data.length - 1];\n  if (!lastNum)\n    return void 0;\n  if (lastNum >= 0.9)\n    return theme.palette.status.ok;\n  if (lastNum >= 0.5)\n    return theme.palette.status.warning;\n  return theme.palette.status.error;\n}\nfunction TrendLine(props) {\n  var _a;\n  const theme = useTheme();\n  if (!props.data)\n    return null;\n  return /* @__PURE__ */ React.createElement(Sparklines, { width: 120, height: 30, min: 0, max: 1, ...props }, props.title && /* @__PURE__ */ React.createElement(\"title\", null, props.title), /* @__PURE__ */ React.createElement(SparklinesLine, { color: (_a = props.color) != null ? _a : color(props.data, theme) }));\n}\n\nconst useStyles$h = (props) => makeStyles(\n  (theme) => ({\n    container: {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      justifyContent: \"flex-end\",\n      alignItems: \"center\",\n      marginBottom: theme.spacing(2),\n      textAlign: props.textAlign\n    },\n    leftItemsBox: {\n      flex: \"1 1 auto\",\n      minWidth: 0,\n      overflow: \"visible\"\n    },\n    rightItemsBox: {\n      flex: \"0 1 auto\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      alignItems: \"center\",\n      marginLeft: theme.spacing(1),\n      minWidth: 0,\n      overflow: \"visible\"\n    },\n    description: {},\n    title: {\n      display: \"inline-flex\",\n      marginBottom: 0\n    }\n  }),\n  { name: \"BackstageContentHeader\" }\n);\nconst ContentHeaderTitle = ({\n  title = \"Unknown page\",\n  className\n}) => /* @__PURE__ */ React.createElement(\n  Typography,\n  {\n    variant: \"h4\",\n    component: \"h2\",\n    className,\n    \"data-testid\": \"header-title\"\n  },\n  title\n);\nfunction ContentHeader(props) {\n  const {\n    description,\n    title,\n    titleComponent: TitleComponent = void 0,\n    children,\n    textAlign = \"left\"\n  } = props;\n  const classes = useStyles$h({ textAlign })();\n  const renderedTitle = TitleComponent ? TitleComponent : /* @__PURE__ */ React.createElement(ContentHeaderTitle, { title, className: classes.title });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Helmet, { title }), /* @__PURE__ */ React.createElement(Box, { className: classes.container }, /* @__PURE__ */ React.createElement(Box, { className: classes.leftItemsBox }, renderedTitle, description && /* @__PURE__ */ React.createElement(Typography, { className: classes.description, variant: \"body2\" }, description)), /* @__PURE__ */ React.createElement(Box, { className: classes.rightItemsBox }, children)));\n}\n\nconst useStyles$g = makeStyles(\n  (theme) => ({\n    micDrop: {\n      maxWidth: \"60%\",\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      [theme.breakpoints.down(\"xs\")]: {\n        maxWidth: \"96%\",\n        bottom: \"unset\",\n        right: \"unset\",\n        margin: theme.spacing(10, \"auto\", 4)\n      }\n    }\n  }),\n  { name: \"BackstageErrorPageMicDrop\" }\n);\nconst MicDrop = () => {\n  const classes = useStyles$g();\n  return /* @__PURE__ */ React.createElement(\n    \"img\",\n    {\n      src: MicDropSvgUrl,\n      className: classes.micDrop,\n      alt: \"Girl dropping mic from her hands\"\n    }\n  );\n};\n\nconst useStyles$f = makeStyles(\n  (theme) => ({\n    container: {\n      padding: theme.spacing(8),\n      [theme.breakpoints.down(\"xs\")]: {\n        padding: theme.spacing(2)\n      }\n    },\n    title: {\n      paddingBottom: theme.spacing(5),\n      [theme.breakpoints.down(\"xs\")]: {\n        paddingBottom: theme.spacing(4),\n        fontSize: theme.typography.h3.fontSize\n      }\n    },\n    subtitle: {\n      color: theme.palette.textSubtle\n    }\n  }),\n  { name: \"BackstageErrorPage\" }\n);\nfunction ErrorPage(props) {\n  const { status, statusMessage, additionalInfo, supportUrl } = props;\n  const classes = useStyles$f();\n  const navigate = useNavigate();\n  const support = useSupportConfig();\n  return /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 0, className: classes.container }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: 8, md: 4 }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      \"data-testid\": \"error\",\n      variant: \"body1\",\n      className: classes.subtitle\n    },\n    \"ERROR \",\n    status,\n    \": \",\n    statusMessage\n  ), /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\", className: classes.subtitle }, additionalInfo), /* @__PURE__ */ React.createElement(Typography, { variant: \"h2\", className: classes.title }, \"Looks like someone dropped the mic!\"), /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, /* @__PURE__ */ React.createElement(Link, { to: \"#\", \"data-testid\": \"go-back-link\", onClick: () => navigate(-1) }, \"Go back\"), \"... or please\", \" \", /* @__PURE__ */ React.createElement(Link, { to: supportUrl || support.url }, \"contact support\"), \" if you think this is a bug.\")), /* @__PURE__ */ React.createElement(MicDrop, null));\n}\n\nconst ClickableText = withStyles(\n  {\n    root: {\n      textDecoration: \"underline\",\n      cursor: \"pointer\"\n    }\n  },\n  { name: \"BackstageBreadcrumbsClickableText\" }\n)(Typography);\nconst StyledBox = withStyles(\n  {\n    root: {\n      textDecoration: \"underline\",\n      color: \"inherit\"\n    }\n  },\n  { name: \"BackstageBreadcrumbsStyledBox\" }\n)(Box);\nfunction Breadcrumbs(props) {\n  const { children, ...restProps } = props;\n  const [anchorEl, setAnchorEl] = React.useState(\n    null\n  );\n  const childrenArray = React.Children.toArray(children);\n  const [firstPage, secondPage, ...expandablePages] = childrenArray;\n  const currentPage = expandablePages.length ? expandablePages.pop() : childrenArray[childrenArray.length - 1];\n  const hasHiddenBreadcrumbs = childrenArray.length > 3;\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const open = Boolean(anchorEl);\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(MaterialBreadcrumbs, { \"aria-label\": \"breadcrumb\", ...restProps }, childrenArray.length > 1 && /* @__PURE__ */ React.createElement(StyledBox, { clone: true }, firstPage), childrenArray.length > 2 && /* @__PURE__ */ React.createElement(StyledBox, { clone: true }, secondPage), hasHiddenBreadcrumbs && /* @__PURE__ */ React.createElement(ClickableText, { onClick: handleClick }, \"...\"), /* @__PURE__ */ React.createElement(Box, { style: { fontStyle: \"italic\" } }, currentPage)), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open,\n      anchorEl,\n      onClose: handleClose,\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"left\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"left\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(List, null, expandablePages.map((pageLink, index) => /* @__PURE__ */ React.createElement(ListItem, { key: index, button: true }, /* @__PURE__ */ React.createElement(StyledBox, { clone: true }, pageLink))))\n  ));\n}\n\nconst drawerWidthClosed = 72;\nconst iconPadding = 24;\nconst userBadgePadding = 18;\nconst sidebarConfig = {\n  drawerWidthClosed,\n  drawerWidthOpen: 224,\n  // As per NN/g's guidance on timing for exposing hidden content\n  // See https://www.nngroup.com/articles/timing-exposing-content/\n  defaultOpenDelayMs: 100,\n  defaultCloseDelayMs: 0,\n  defaultFadeDuration: 200,\n  logoHeight: 32,\n  iconContainerWidth: drawerWidthClosed,\n  iconSize: drawerWidthClosed - iconPadding * 2,\n  iconPadding,\n  selectedIndicatorWidth: 3,\n  userBadgePadding,\n  userBadgeDiameter: drawerWidthClosed - userBadgePadding * 2,\n  mobileSidebarHeight: 56\n};\nconst makeSidebarConfig = (customSidebarConfig) => ({\n  ...sidebarConfig,\n  ...customSidebarConfig,\n  iconContainerWidth: sidebarConfig.drawerWidthClosed,\n  iconSize: sidebarConfig.drawerWidthClosed - sidebarConfig.iconPadding * 2,\n  userBadgeDiameter: sidebarConfig.drawerWidthClosed - sidebarConfig.userBadgePadding * 2\n});\nconst submenuConfig = {\n  drawerWidthClosed: 0,\n  drawerWidthOpen: 202,\n  defaultOpenDelayMs: sidebarConfig.defaultOpenDelayMs + 200\n};\nconst makeSidebarSubmenuConfig = (customSubmenuConfig) => ({\n  ...submenuConfig,\n  ...customSubmenuConfig\n});\nconst SIDEBAR_INTRO_LOCAL_STORAGE = \"@backstage/core/sidebar-intro-dismissed\";\nconst SidebarConfigContext = createContext({\n  sidebarConfig,\n  submenuConfig\n});\nconst SidebarItemWithSubmenuContext = createContext({\n  isHoveredOn: false,\n  setIsHoveredOn: () => {\n  }\n});\n\nconst defaultSidebarOpenStateContext = {\n  isOpen: false,\n  setOpen: () => {\n  }\n};\nconst LegacySidebarContext = createContext(\n  defaultSidebarOpenStateContext\n);\nconst VersionedSidebarContext = createVersionedContext(\"sidebar-open-state-context\");\nfunction SidebarOpenStateProvider(props) {\n  const { children, value } = props;\n  return /* @__PURE__ */ React.createElement(LegacySidebarContext.Provider, { value }, /* @__PURE__ */ React.createElement(\n    VersionedSidebarContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: value })\n    },\n    children\n  ));\n}\nconst useSidebarOpenState = () => {\n  const versionedOpenStateContext = useContext(VersionedSidebarContext);\n  const legacyOpenStateContext = useContext(LegacySidebarContext);\n  if (versionedOpenStateContext === void 0) {\n    return legacyOpenStateContext || defaultSidebarOpenStateContext;\n  }\n  const openStateContext = versionedOpenStateContext.atVersion(1);\n  if (openStateContext === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return openStateContext;\n};\n\nconst MobileSidebarContext = createContext({\n  selectedMenuItemIndex: -1,\n  setSelectedMenuItemIndex: () => {\n  }\n});\n\nconst defaultSidebarPinStateContext = {\n  isPinned: true,\n  toggleSidebarPinState: () => {\n  },\n  isMobile: false\n};\nconst LegacySidebarPinStateContext = createContext(defaultSidebarPinStateContext);\nconst VersionedSidebarPinStateContext = createVersionedContext(\"sidebar-pin-state-context\");\nfunction SidebarPinStateProvider(props) {\n  const { children, value } = props;\n  return /* @__PURE__ */ React.createElement(LegacySidebarPinStateContext.Provider, { value }, /* @__PURE__ */ React.createElement(\n    VersionedSidebarPinStateContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: value })\n    },\n    children\n  ));\n}\nconst useSidebarPinState = () => {\n  const versionedPinStateContext = useContext(VersionedSidebarPinStateContext);\n  const legacyPinStateContext = useContext(LegacySidebarPinStateContext);\n  if (versionedPinStateContext === void 0) {\n    return legacyPinStateContext || defaultSidebarPinStateContext;\n  }\n  const pinStateContext = versionedPinStateContext.atVersion(1);\n  if (pinStateContext === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return pinStateContext;\n};\n\nconst useStyles$e = makeStyles(\n  (theme) => ({\n    root: {\n      flexGrow: 0,\n      margin: theme.spacing(0, 2),\n      color: theme.palette.navigation.color\n    },\n    selected: (props) => ({\n      color: `${theme.palette.navigation.selectedColor}!important`,\n      borderTop: `solid ${props.sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n      marginTop: \"-1px\"\n    }),\n    label: {\n      display: \"none\"\n    }\n  })\n);\nconst MobileSidebarGroup = (props) => {\n  const { to, label, icon, value } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$e({ sidebarConfig });\n  const location = useLocation();\n  const { selectedMenuItemIndex, setSelectedMenuItemIndex } = useContext(MobileSidebarContext);\n  const onChange = (_, value2) => {\n    if (value2 === selectedMenuItemIndex) {\n      setSelectedMenuItemIndex(-1);\n    } else {\n      setSelectedMenuItemIndex(value2);\n    }\n  };\n  const selected = value === selectedMenuItemIndex && selectedMenuItemIndex >= 0 || !(value === selectedMenuItemIndex) && !(selectedMenuItemIndex >= 0) && to === location.pathname;\n  return (\n    // Material UI issue: https://github.com/mui-org/material-ui/issues/27820\n    /* @__PURE__ */ React.createElement(\n      BottomNavigationAction,\n      {\n        \"aria-label\": label,\n        label,\n        icon,\n        component: Link,\n        to: to ? to : location.pathname,\n        onChange,\n        value,\n        selected,\n        classes\n      }\n    )\n  );\n};\nconst SidebarGroup = (props) => {\n  const { children, to, label, icon, value } = props;\n  const { isMobile } = useSidebarPinState();\n  return isMobile ? /* @__PURE__ */ React.createElement(MobileSidebarGroup, { to, label, icon, value }) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\n\nconst useStyles$d = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"fixed\",\n      backgroundColor: theme.palette.navigation.background,\n      color: theme.palette.navigation.color,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      zIndex: theme.zIndex.snackbar,\n      // SidebarDivider color\n      borderTop: \"1px solid #383838\",\n      \"@media print\": {\n        display: \"none\"\n      }\n    },\n    overlay: (props) => ({\n      background: theme.palette.navigation.background,\n      width: \"100%\",\n      bottom: `${props.sidebarConfig.mobileSidebarHeight}px`,\n      height: `calc(100% - ${props.sidebarConfig.mobileSidebarHeight}px)`,\n      flex: \"0 1 auto\",\n      overflow: \"auto\"\n    }),\n    overlayHeader: {\n      display: \"flex\",\n      color: theme.palette.navigation.color,\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      padding: theme.spacing(2, 3)\n    },\n    overlayHeaderClose: {\n      color: theme.palette.navigation.color\n    },\n    marginMobileSidebar: (props) => ({\n      marginBottom: `${props.sidebarConfig.mobileSidebarHeight}px`\n    })\n  })\n);\nconst sortSidebarGroupsForPriority = (children) => orderBy(\n  children,\n  ({ props: { priority } }) => Number.isInteger(priority) ? priority : -1,\n  \"desc\"\n);\nconst sidebarGroupType = React.createElement(SidebarGroup).type;\nconst OverlayMenu = ({\n  children,\n  label = \"Menu\",\n  open,\n  onClose\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$d({ sidebarConfig });\n  return /* @__PURE__ */ React.createElement(\n    Drawer,\n    {\n      anchor: \"bottom\",\n      open,\n      onClose,\n      ModalProps: {\n        BackdropProps: { classes: { root: classes.marginMobileSidebar } }\n      },\n      classes: {\n        root: classes.marginMobileSidebar,\n        paperAnchorBottom: classes.overlay\n      }\n    },\n    /* @__PURE__ */ React.createElement(Box, { className: classes.overlayHeader }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h3\" }, label), /* @__PURE__ */ React.createElement(\n      IconButton,\n      {\n        onClick: onClose,\n        classes: { root: classes.overlayHeaderClose }\n      },\n      /* @__PURE__ */ React.createElement(CloseIcon, null)\n    )),\n    /* @__PURE__ */ React.createElement(Box, { component: \"nav\" }, children)\n  );\n};\nconst MobileSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { children } = props;\n  const classes = useStyles$d({ sidebarConfig });\n  const location = useLocation();\n  const [selectedMenuItemIndex, setSelectedMenuItemIndex] = useState(-1);\n  useEffect(() => {\n    setSelectedMenuItemIndex(-1);\n  }, [location.pathname]);\n  let sidebarGroups = useElementFilter(\n    children,\n    (elements) => elements.getElements().filter((child) => child.type === sidebarGroupType)\n  );\n  if (!children) {\n    return null;\n  } else if (!sidebarGroups.length) {\n    sidebarGroups.push(\n      /* @__PURE__ */ React.createElement(SidebarGroup, { key: \"default_menu\", icon: /* @__PURE__ */ React.createElement(MenuIcon, null) }, children)\n    );\n  } else {\n    sidebarGroups = sortSidebarGroupsForPriority(sidebarGroups);\n  }\n  const shouldShowGroupChildren = selectedMenuItemIndex >= 0 && !sidebarGroups[selectedMenuItemIndex].props.to;\n  return /* @__PURE__ */ React.createElement(SidebarOpenStateProvider, { value: { isOpen: true, setOpen: () => {\n  } } }, /* @__PURE__ */ React.createElement(\n    MobileSidebarContext.Provider,\n    {\n      value: { selectedMenuItemIndex, setSelectedMenuItemIndex }\n    },\n    /* @__PURE__ */ React.createElement(\n      OverlayMenu,\n      {\n        label: sidebarGroups[selectedMenuItemIndex] && sidebarGroups[selectedMenuItemIndex].props.label,\n        open: shouldShowGroupChildren,\n        onClose: () => setSelectedMenuItemIndex(-1)\n      },\n      sidebarGroups[selectedMenuItemIndex] && sidebarGroups[selectedMenuItemIndex].props.children\n    ),\n    /* @__PURE__ */ React.createElement(\n      BottomNavigation,\n      {\n        className: classes.root,\n        \"data-testid\": \"mobile-sidebar-root\",\n        component: \"nav\"\n      },\n      sidebarGroups\n    )\n  ));\n};\n\nconst LocalStorage = {\n  getSidebarPinState() {\n    let value;\n    try {\n      value = JSON.parse(\n        window.localStorage.getItem(\"sidebarPinState\" /* SIDEBAR_PIN_STATE */) || \"true\"\n      );\n    } catch {\n      return true;\n    }\n    return !!value;\n  },\n  setSidebarPinState(state) {\n    return window.localStorage.setItem(\n      \"sidebarPinState\" /* SIDEBAR_PIN_STATE */,\n      JSON.stringify(state)\n    );\n  }\n};\n\nconst useStyles$c = makeStyles(\n  (theme) => ({\n    root: {\n      width: \"100%\",\n      transition: \"padding-left 0.1s ease-out\",\n      isolation: \"isolate\",\n      [theme.breakpoints.up(\"sm\")]: {\n        paddingLeft: (props) => props.isPinned ? props.sidebarConfig.drawerWidthOpen : props.sidebarConfig.drawerWidthClosed\n      },\n      [theme.breakpoints.down(\"xs\")]: {\n        paddingBottom: (props) => props.sidebarConfig.mobileSidebarHeight\n      },\n      \"@media print\": {\n        padding: \"0px !important\"\n      }\n    },\n    content: {\n      zIndex: 0,\n      isolation: \"isolate\",\n      \"&:focus\": {\n        outline: 0\n      }\n    }\n  }),\n  { name: \"BackstageSidebarPage\" }\n);\nconst PageContext = createContext({\n  content: {\n    contentRef: void 0\n  }\n});\nfunction SidebarPage(props) {\n  const [isPinned, setIsPinned] = useState(\n    () => LocalStorage.getSidebarPinState()\n  );\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const contentRef = useRef(null);\n  const pageContext = useMemo(\n    () => ({\n      content: {\n        contentRef\n      }\n    }),\n    [contentRef]\n  );\n  useEffect(() => {\n    LocalStorage.setSidebarPinState(isPinned);\n  }, [isPinned]);\n  const isMobile = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"xs\"),\n    { noSsr: true }\n  );\n  const toggleSidebarPinState = () => setIsPinned(!isPinned);\n  const classes = useStyles$c({ isPinned, sidebarConfig });\n  return /* @__PURE__ */ React.createElement(\n    SidebarPinStateProvider,\n    {\n      value: {\n        isPinned,\n        toggleSidebarPinState,\n        isMobile\n      }\n    },\n    /* @__PURE__ */ React.createElement(PageContext.Provider, { value: pageContext }, /* @__PURE__ */ React.createElement(Box, { className: classes.root }, props.children))\n  );\n}\nfunction useContent() {\n  const { content } = useContext(PageContext);\n  const focusContent = useCallback(() => {\n    var _a, _b;\n    (_b = (_a = content == null ? void 0 : content.contentRef) == null ? void 0 : _a.current) == null ? void 0 : _b.focus();\n  }, [content]);\n  return { focusContent, contentRef: content == null ? void 0 : content.contentRef };\n}\n\nconst useStyles$b = makeStyles(\n  (theme) => ({\n    drawer: {\n      display: \"flex\",\n      flexFlow: \"column nowrap\",\n      alignItems: \"flex-start\",\n      position: \"fixed\",\n      left: 0,\n      top: 0,\n      bottom: 0,\n      zIndex: theme.zIndex.appBar,\n      background: theme.palette.navigation.background,\n      overflowX: \"hidden\",\n      msOverflowStyle: \"none\",\n      scrollbarWidth: \"none\",\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shortest\n      }),\n      \"& > *\": {\n        flexShrink: 0\n      },\n      \"&::-webkit-scrollbar\": {\n        display: \"none\"\n      },\n      \"@media print\": {\n        display: \"none\"\n      }\n    },\n    drawerWidth: (props) => ({\n      width: props.sidebarConfig.drawerWidthClosed\n    }),\n    drawerOpen: (props) => ({\n      width: props.sidebarConfig.drawerWidthOpen,\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shorter\n      })\n    }),\n    visuallyHidden: {\n      top: 0,\n      position: \"absolute\",\n      zIndex: 1e3,\n      transform: \"translateY(-200%)\",\n      \"&:focus\": {\n        transform: \"translateY(5px)\"\n      }\n    }\n  }),\n  { name: \"BackstageSidebar\" }\n);\nconst DesktopSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const {\n    openDelayMs = sidebarConfig.defaultOpenDelayMs,\n    closeDelayMs = sidebarConfig.defaultCloseDelayMs,\n    disableExpandOnHover,\n    children\n  } = props;\n  const classes = useStyles$b({ sidebarConfig });\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"md\"),\n    { noSsr: true }\n  );\n  const [state, setState] = useState(0 /* Closed */);\n  const hoverTimerRef = useRef();\n  const { isPinned, toggleSidebarPinState } = useSidebarPinState();\n  const handleOpen = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = void 0;\n    }\n    if (state !== 2 /* Open */ && !isSmallScreen) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = void 0;\n        setState(2 /* Open */);\n      }, openDelayMs);\n      setState(1 /* Idle */);\n    }\n  };\n  const handleClose = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = void 0;\n    }\n    if (state === 1 /* Idle */) {\n      setState(0 /* Closed */);\n    } else if (state === 2 /* Open */) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = void 0;\n        setState(0 /* Closed */);\n      }, closeDelayMs);\n    }\n  };\n  const isOpen = state === 2 /* Open */ && !isSmallScreen || isPinned;\n  const setOpen = (open) => {\n    if (open) {\n      setState(2 /* Open */);\n      toggleSidebarPinState();\n    } else {\n      setState(0 /* Closed */);\n      toggleSidebarPinState();\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\"nav\", { style: {}, \"aria-label\": \"sidebar nav\" }, /* @__PURE__ */ React.createElement(A11ySkipSidebar, null), /* @__PURE__ */ React.createElement(SidebarOpenStateProvider, { value: { isOpen, setOpen } }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classes.root,\n      \"data-testid\": \"sidebar-root\",\n      onMouseEnter: disableExpandOnHover ? () => {\n      } : handleOpen,\n      onFocus: disableExpandOnHover ? () => {\n      } : handleOpen,\n      onMouseLeave: disableExpandOnHover ? () => {\n      } : handleClose,\n      onBlur: disableExpandOnHover ? () => {\n      } : handleClose\n    },\n    /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        className: classNames(classes.drawer, classes.drawerWidth, {\n          [classes.drawerOpen]: isOpen\n        })\n      },\n      children\n    )\n  )));\n};\nconst Sidebar = (props) => {\n  var _a, _b;\n  const sidebarConfig = makeSidebarConfig(\n    (_a = props.sidebarOptions) != null ? _a : {}\n  );\n  const submenuConfig = makeSidebarSubmenuConfig(\n    (_b = props.submenuOptions) != null ? _b : {}\n  );\n  const { children, disableExpandOnHover, openDelayMs, closeDelayMs } = props;\n  const { isMobile } = useSidebarPinState();\n  return isMobile ? /* @__PURE__ */ React.createElement(MobileSidebar, null, children) : /* @__PURE__ */ React.createElement(SidebarConfigContext.Provider, { value: { sidebarConfig, submenuConfig } }, /* @__PURE__ */ React.createElement(\n    DesktopSidebar,\n    {\n      openDelayMs,\n      closeDelayMs,\n      disableExpandOnHover\n    },\n    children\n  ));\n};\nfunction A11ySkipSidebar() {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { focusContent, contentRef } = useContent();\n  const classes = useStyles$b({ sidebarConfig });\n  if (!(contentRef == null ? void 0 : contentRef.current)) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      onClick: focusContent,\n      variant: \"contained\",\n      className: classNames(classes.visuallyHidden)\n    },\n    \"Skip to content\"\n  );\n}\n\nfunction isLocationMatch(currentLocation, toLocation, exact = false) {\n  const toDecodedSearch = new URLSearchParams(toLocation.search).toString();\n  const toQueryParameters = qs.parse(toDecodedSearch);\n  const currentDecodedSearch = new URLSearchParams(\n    currentLocation.search\n  ).toString();\n  const currentQueryParameters = qs.parse(currentDecodedSearch);\n  const queryStringMatcher = exact ? isEqual : isMatch;\n  const matching = isEqual(toLocation.pathname, currentLocation.pathname) && queryStringMatcher(currentQueryParameters, toQueryParameters);\n  return matching;\n}\n\nconst useStyles$a = makeStyles(\n  (theme) => {\n    var _a, _b;\n    return {\n      item: {\n        height: 48,\n        width: \"100%\",\n        \"&:hover\": {\n          background: ((_a = theme.palette.navigation.navItem) == null ? void 0 : _a.hoverBackground) || \"#6f6f6f\",\n          color: theme.palette.navigation.selectedColor\n        },\n        display: \"flex\",\n        alignItems: \"center\",\n        color: theme.palette.navigation.color,\n        padding: theme.spacing(2.5),\n        cursor: \"pointer\",\n        position: \"relative\",\n        background: \"none\",\n        border: \"none\"\n      },\n      itemContainer: {\n        width: \"100%\"\n      },\n      selected: {\n        background: \"#6f6f6f\",\n        color: theme.palette.common.white\n      },\n      label: {\n        margin: theme.spacing(1.75),\n        marginLeft: theme.spacing(1),\n        fontSize: theme.typography.body2.fontSize,\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\",\n        lineHeight: 1\n      },\n      subtitle: {\n        fontSize: 10,\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\"\n      },\n      dropdownArrow: {\n        position: \"absolute\",\n        right: 21\n      },\n      dropdown: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"end\"\n      },\n      dropdownItem: {\n        width: \"100%\",\n        padding: \"10px 0 10px 0\",\n        \"&:hover\": {\n          background: ((_b = theme.palette.navigation.navItem) == null ? void 0 : _b.hoverBackground) || \"#6f6f6f\",\n          color: theme.palette.navigation.selectedColor\n        }\n      },\n      textContent: {\n        color: theme.palette.navigation.color,\n        paddingLeft: theme.spacing(4),\n        paddingRight: theme.spacing(1),\n        fontSize: theme.typography.body2.fontSize,\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\"\n      }\n    };\n  },\n  { name: \"BackstageSidebarSubmenuItem\" }\n);\nconst SidebarSubmenuItem = (props) => {\n  const { title, subtitle, to, icon: Icon, dropdownItems, exact } = props;\n  const classes = useStyles$a();\n  const { setIsHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const closeSubmenu = () => {\n    setIsHoveredOn(false);\n  };\n  const toLocation = useResolvedPath$1(to != null ? to : \"\");\n  const currentLocation = useLocation();\n  let isActive = isLocationMatch(currentLocation, toLocation, exact);\n  const [showDropDown, setShowDropDown] = useState(false);\n  const handleClickDropdown = () => {\n    setShowDropDown(!showDropDown);\n  };\n  if (dropdownItems !== void 0) {\n    dropdownItems.some((item) => {\n      const resolvedPath = resolvePath(item.to);\n      isActive = isLocationMatch(currentLocation, resolvedPath, exact);\n      return isActive;\n    });\n    return /* @__PURE__ */ React.createElement(Box, { className: classes.itemContainer }, /* @__PURE__ */ React.createElement(Tooltip, { title, enterDelay: 500, enterNextDelay: 500 }, /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        role: \"button\",\n        onClick: handleClickDropdown,\n        onTouchStart: (e) => e.stopPropagation(),\n        className: classNames(\n          classes.item,\n          isActive ? classes.selected : void 0\n        )\n      },\n      Icon && /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }),\n      /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          variant: \"subtitle1\",\n          component: \"span\",\n          className: classes.label\n        },\n        title,\n        /* @__PURE__ */ React.createElement(\"br\", null),\n        subtitle && /* @__PURE__ */ React.createElement(\n          Typography,\n          {\n            variant: \"caption\",\n            component: \"span\",\n            className: classes.subtitle\n          },\n          subtitle\n        )\n      ),\n      showDropDown ? /* @__PURE__ */ React.createElement(ArrowDropUpIcon, { className: classes.dropdownArrow }) : /* @__PURE__ */ React.createElement(ArrowDropDownIcon, { className: classes.dropdownArrow })\n    )), dropdownItems && showDropDown && /* @__PURE__ */ React.createElement(Box, { className: classes.dropdown }, dropdownItems.map((object, key) => /* @__PURE__ */ React.createElement(\n      Tooltip,\n      {\n        key,\n        title: object.title,\n        enterDelay: 500,\n        enterNextDelay: 500\n      },\n      /* @__PURE__ */ React.createElement(\n        Link,\n        {\n          to: object.to,\n          underline: \"none\",\n          className: classes.dropdownItem,\n          onClick: closeSubmenu,\n          onTouchStart: (e) => e.stopPropagation()\n        },\n        /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.textContent }, object.title)\n      )\n    ))));\n  }\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.itemContainer }, /* @__PURE__ */ React.createElement(Tooltip, { title, enterDelay: 500, enterNextDelay: 500 }, /* @__PURE__ */ React.createElement(\n    Link,\n    {\n      to,\n      underline: \"none\",\n      className: classNames(\n        classes.item,\n        isActive ? classes.selected : void 0\n      ),\n      onClick: closeSubmenu,\n      onTouchStart: (e) => e.stopPropagation()\n    },\n    Icon && /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }),\n    /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"subtitle1\",\n        component: \"span\",\n        className: classes.label\n      },\n      title,\n      /* @__PURE__ */ React.createElement(\"br\", null),\n      subtitle && /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          variant: \"caption\",\n          component: \"span\",\n          className: classes.subtitle\n        },\n        subtitle\n      )\n    )\n  )));\n};\n\nconst useStyles$9 = makeStyles(\n  (theme) => ({\n    root: {\n      zIndex: 1e3,\n      position: \"relative\",\n      overflow: \"visible\",\n      width: theme.spacing(7) + 1\n    },\n    drawer: (props) => {\n      var _a, _b;\n      return {\n        display: \"flex\",\n        flexFlow: \"column nowrap\",\n        alignItems: \"flex-start\",\n        position: \"fixed\",\n        [theme.breakpoints.up(\"sm\")]: {\n          marginLeft: props.left,\n          transition: theme.transitions.create(\"margin-left\", {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.shortest\n          })\n        },\n        top: 0,\n        bottom: 0,\n        padding: 0,\n        background: (_b = (_a = theme.palette.navigation.submenu) == null ? void 0 : _a.background) != null ? _b : \"#404040\",\n        overflowX: \"hidden\",\n        msOverflowStyle: \"none\",\n        scrollbarWidth: \"none\",\n        cursor: \"default\",\n        width: props.submenuConfig.drawerWidthClosed,\n        transitionDelay: `${props.submenuConfig.defaultOpenDelayMs}ms`,\n        \"& > *\": {\n          flexShrink: 0\n        },\n        \"&::-webkit-scrollbar\": {\n          display: \"none\"\n        }\n      };\n    },\n    drawerOpen: (props) => ({\n      width: props.submenuConfig.drawerWidthOpen,\n      [theme.breakpoints.down(\"xs\")]: {\n        width: \"100%\",\n        position: \"relative\",\n        paddingLeft: theme.spacing(3),\n        left: 0,\n        top: 0\n      }\n    }),\n    title: {\n      fontSize: theme.typography.h5.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      color: theme.palette.common.white,\n      padding: theme.spacing(2.5),\n      [theme.breakpoints.down(\"xs\")]: {\n        display: \"none\"\n      }\n    }\n  }),\n  { name: \"BackstageSidebarSubmenu\" }\n);\nconst SidebarSubmenu = (props) => {\n  const { isOpen } = useSidebarOpenState();\n  const { sidebarConfig, submenuConfig } = useContext(SidebarConfigContext);\n  const left = isOpen ? sidebarConfig.drawerWidthOpen : sidebarConfig.drawerWidthClosed;\n  const classes = useStyles$9({ left, submenuConfig });\n  const { isHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const [isSubmenuOpen, setIsSubmenuOpen] = useState(false);\n  useEffect(() => {\n    setIsSubmenuOpen(isHoveredOn);\n  }, [isHoveredOn]);\n  return /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classNames(classes.drawer, {\n        [classes.drawerOpen]: isSubmenuOpen\n      })\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", component: \"span\", className: classes.title }, props.title),\n    props.children\n  );\n};\n\nconst useStyles$8 = makeStyles({\n  iconContainer: {\n    display: \"flex\",\n    position: \"relative\",\n    width: \"100%\"\n  },\n  arrow1: {\n    right: \"6px\",\n    position: \"absolute\"\n  }\n});\nconst DoubleArrowLeft = () => {\n  const classes = useStyles$8();\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.iconContainer }, /* @__PURE__ */ React.createElement(Box, { className: classes.arrow1 }, /* @__PURE__ */ React.createElement(ArrowBackIosIcon, { style: { fontSize: \"12px\" } })), /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(ArrowBackIosIcon, { style: { fontSize: \"12px\" } })));\n};\n\nconst useStyles$7 = makeStyles({\n  iconContainer: {\n    display: \"flex\",\n    position: \"relative\",\n    width: \"100%\"\n  },\n  arrow1: {\n    right: \"6px\",\n    position: \"absolute\"\n  }\n});\nconst DoubleArrowRight = () => {\n  const classes = useStyles$7();\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.iconContainer }, /* @__PURE__ */ React.createElement(Box, { className: classes.arrow1 }, /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, { style: { fontSize: \"12px\" } })), /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, { style: { fontSize: \"12px\" } })));\n};\n\nconst makeSidebarStyles = (sidebarConfig) => makeStyles(\n  (theme) => {\n    var _a, _b, _c, _d;\n    return {\n      root: {\n        color: theme.palette.navigation.color,\n        display: \"flex\",\n        flexFlow: \"row nowrap\",\n        alignItems: \"center\",\n        height: 48,\n        cursor: \"pointer\"\n      },\n      buttonItem: {\n        background: \"none\",\n        border: \"none\",\n        width: \"100%\",\n        margin: 0,\n        padding: 0,\n        textAlign: \"inherit\",\n        font: \"inherit\",\n        textTransform: \"none\"\n      },\n      closed: {\n        width: sidebarConfig.drawerWidthClosed,\n        justifyContent: \"center\"\n      },\n      open: {\n        [theme.breakpoints.up(\"sm\")]: {\n          width: sidebarConfig.drawerWidthOpen\n        }\n      },\n      highlightable: {\n        \"&:hover\": {\n          background: (_b = (_a = theme.palette.navigation.navItem) == null ? void 0 : _a.hoverBackground) != null ? _b : \"#404040\"\n        }\n      },\n      highlighted: {\n        background: (_d = (_c = theme.palette.navigation.navItem) == null ? void 0 : _c.hoverBackground) != null ? _d : \"#404040\"\n      },\n      label: {\n        // XXX (@koroeskohr): I can't seem to achieve the desired font-weight from the designs\n        fontWeight: \"bold\",\n        whiteSpace: \"nowrap\",\n        lineHeight: \"auto\",\n        flex: \"3 1 auto\",\n        width: \"110px\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\"\n      },\n      iconContainer: {\n        boxSizing: \"border-box\",\n        height: \"100%\",\n        width: sidebarConfig.iconContainerWidth,\n        marginRight: -theme.spacing(2),\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        lineHeight: \"0\"\n      },\n      searchRoot: {\n        marginBottom: 12\n      },\n      searchField: {\n        color: \"#b5b5b5\",\n        fontWeight: theme.typography.fontWeightBold,\n        fontSize: theme.typography.fontSize\n      },\n      searchFieldHTMLInput: {\n        padding: theme.spacing(2, 0, 2)\n      },\n      searchContainer: {\n        width: sidebarConfig.drawerWidthOpen - sidebarConfig.iconContainerWidth\n      },\n      secondaryAction: {\n        width: theme.spacing(6),\n        textAlign: \"center\",\n        marginRight: theme.spacing(1)\n      },\n      closedItemIcon: {\n        width: \"100%\",\n        justifyContent: \"center\"\n      },\n      submenuArrow: {\n        display: \"flex\"\n      },\n      expandButton: {\n        background: \"none\",\n        border: \"none\",\n        color: theme.palette.navigation.color,\n        width: \"100%\",\n        cursor: \"pointer\",\n        position: \"relative\",\n        height: 48\n      },\n      arrows: {\n        position: \"absolute\",\n        right: 10\n      },\n      selected: {\n        \"&$root\": {\n          borderLeft: `solid ${sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n          color: theme.palette.navigation.selectedColor\n        },\n        \"&$closed\": {\n          width: sidebarConfig.drawerWidthClosed\n        },\n        \"& $closedItemIcon\": {\n          paddingRight: sidebarConfig.selectedIndicatorWidth\n        },\n        \"& $iconContainer\": {\n          marginLeft: -sidebarConfig.selectedIndicatorWidth\n        }\n      }\n    };\n  },\n  { name: \"BackstageSidebarItem\" }\n);\nfunction useMemoStyles(sidebarConfig) {\n  const useStyles = useMemo(\n    () => makeSidebarStyles(sidebarConfig),\n    [sidebarConfig]\n  );\n  return useStyles();\n}\nconst useLocationMatch = (submenu, location) => useElementFilter(\n  submenu.props.children,\n  (elements) => {\n    let active = false;\n    elements.getElements().forEach(\n      ({\n        props: { to, dropdownItems }\n      }) => {\n        if (!active) {\n          if (dropdownItems == null ? void 0 : dropdownItems.length) {\n            dropdownItems.forEach(\n              ({ to: _to }) => active = active || isLocationMatch(location, resolvePath(_to))\n            );\n            return;\n          }\n          if (to) {\n            active = isLocationMatch(location, resolvePath(to));\n          }\n        }\n      }\n    );\n    return active;\n  },\n  [location.pathname]\n);\nfunction isButtonItem(props) {\n  return props.to === void 0;\n}\nconst sidebarSubmenuType = React.createElement(SidebarSubmenu).type;\nconst WorkaroundNavLink = React.forwardRef(function WorkaroundNavLinkWithRef({\n  to,\n  end,\n  style,\n  className,\n  activeStyle,\n  caseSensitive,\n  activeClassName = \"active\",\n  \"aria-current\": ariaCurrentProp = \"page\",\n  ...rest\n}, ref) {\n  let { pathname: locationPathname } = useLocation();\n  let { pathname: toPathname } = useResolvedPath$1(to);\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLocaleLowerCase(\"en-US\");\n    toPathname = toPathname.toLocaleLowerCase(\"en-US\");\n  }\n  let isActive = locationPathname === toPathname;\n  if (!isActive && !end) {\n    isActive = locationPathname.startsWith(`${toPathname}/`);\n  }\n  const ariaCurrent = isActive ? ariaCurrentProp : void 0;\n  return /* @__PURE__ */ React.createElement(\n    Link$1,\n    {\n      ...rest,\n      to,\n      ref,\n      \"aria-current\": ariaCurrent,\n      style: { ...style, ...isActive ? activeStyle : void 0 },\n      className: classNames([\n        typeof className !== \"function\" ? className : void 0,\n        isActive ? activeClassName : void 0\n      ])\n    }\n  );\n});\nconst SidebarItemBase = forwardRef((props, ref) => {\n  const {\n    icon: Icon,\n    text,\n    hasNotifications = false,\n    hasSubmenu = false,\n    disableHighlight = false,\n    onClick,\n    noTrack,\n    children,\n    className,\n    ...navLinkProps\n  } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen } = useSidebarOpenState();\n  const divStyle = !isOpen && hasSubmenu ? { display: \"flex\", marginLeft: \"20px\" } : { lineHeight: \"0\" };\n  const displayItemIcon = /* @__PURE__ */ React.createElement(Box, { style: divStyle }, /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }), !isOpen && hasSubmenu ? /* @__PURE__ */ React.createElement(ArrowRightIcon, { fontSize: \"small\" }) : /* @__PURE__ */ React.createElement(React.Fragment, null));\n  const itemIcon = /* @__PURE__ */ React.createElement(\n    Badge,\n    {\n      color: \"secondary\",\n      variant: \"dot\",\n      overlap: \"circular\",\n      invisible: !hasNotifications,\n      className: classNames({ [classes.closedItemIcon]: !isOpen })\n    },\n    displayItemIcon\n  );\n  const openContent = /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { \"data-testid\": \"login-button\", className: classes.iconContainer }, itemIcon), text && /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      variant: \"subtitle2\",\n      component: \"span\",\n      className: classes.label\n    },\n    text\n  ), /* @__PURE__ */ React.createElement(\"div\", { className: classes.secondaryAction }, children));\n  const content = isOpen ? openContent : itemIcon;\n  const childProps = {\n    onClick,\n    className: classNames(\n      className,\n      classes.root,\n      isOpen ? classes.open : classes.closed,\n      isButtonItem(props) && classes.buttonItem,\n      { [classes.highlightable]: !disableHighlight }\n    )\n  };\n  const analyticsApi = useAnalytics();\n  const { pathname: to } = useResolvedPath$1(\n    !isButtonItem(props) && props.to ? props.to : \"\"\n  );\n  const handleClick = useCallback(\n    (event) => {\n      if (!noTrack) {\n        const action = \"click\";\n        const subject = text != null ? text : \"Sidebar Item\";\n        const options = to ? { attributes: { to } } : void 0;\n        analyticsApi.captureEvent(action, subject, options);\n      }\n      onClick == null ? void 0 : onClick(event);\n    },\n    [analyticsApi, text, to, noTrack, onClick]\n  );\n  if (isButtonItem(props)) {\n    return /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        role: \"button\",\n        \"aria-label\": text,\n        ...childProps,\n        ref,\n        onClick: handleClick\n      },\n      content\n    );\n  }\n  return /* @__PURE__ */ React.createElement(\n    WorkaroundNavLink,\n    {\n      ...childProps,\n      activeClassName: classes.selected,\n      to: props.to ? props.to : \"\",\n      ref,\n      \"aria-label\": text ? text : props.to,\n      ...navLinkProps,\n      onClick: handleClick\n    },\n    content\n  );\n});\nconst SidebarItemWithSubmenu = ({\n  children,\n  ...props\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const [isHoveredOn, setIsHoveredOn] = useState(false);\n  const location = useLocation();\n  const isActive = useLocationMatch(children, location);\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"sm\")\n  );\n  const handleMouseEnter = () => {\n    setIsHoveredOn(true);\n  };\n  const handleMouseLeave = () => {\n    setIsHoveredOn(false);\n  };\n  const arrowIcon = () => {\n    if (isSmallScreen) {\n      return isHoveredOn ? /* @__PURE__ */ React.createElement(ArrowDropUpIcon, { fontSize: \"small\", className: classes.submenuArrow }) : /* @__PURE__ */ React.createElement(ArrowDropDownIcon, { fontSize: \"small\", className: classes.submenuArrow });\n    }\n    return !isHoveredOn && /* @__PURE__ */ React.createElement(ArrowRightIcon, { fontSize: \"small\", className: classes.submenuArrow });\n  };\n  return /* @__PURE__ */ React.createElement(\n    SidebarItemWithSubmenuContext.Provider,\n    {\n      value: {\n        isHoveredOn,\n        setIsHoveredOn\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      \"div\",\n      {\n        \"data-testid\": \"item-with-submenu\",\n        onMouseLeave: handleMouseLeave,\n        onTouchStart: isHoveredOn ? handleMouseLeave : handleMouseEnter,\n        onMouseEnter: handleMouseEnter,\n        className: classNames(isHoveredOn && classes.highlighted)\n      },\n      /* @__PURE__ */ React.createElement(\n        SidebarItemBase,\n        {\n          hasSubmenu: true,\n          className: isActive ? classes.selected : \"\",\n          ...props\n        },\n        arrowIcon()\n      ),\n      isHoveredOn && children\n    )\n  );\n};\nconst SidebarItem = forwardRef((props, ref) => {\n  const [submenu] = useElementFilter(\n    props.children,\n    (elements) => (\n      // Directly comparing child.type with SidebarSubmenu will not work with in\n      // combination with react-hot-loader\n      //\n      // https://github.com/gaearon/react-hot-loader/issues/304#issuecomment-456569720\n      elements.getElements().filter((child) => child.type === sidebarSubmenuType)\n    )\n  );\n  if (submenu) {\n    return /* @__PURE__ */ React.createElement(SidebarItemWithSubmenu, { ...props }, submenu);\n  }\n  return /* @__PURE__ */ React.createElement(SidebarItemBase, { ...props, ref });\n});\nfunction SidebarSearchField(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const [input, setInput] = useState(\"\");\n  const classes = useMemoStyles(sidebarConfig);\n  const Icon = props.icon ? props.icon : SearchIcon;\n  const search = () => {\n    props.onSearch(input);\n    setInput(\"\");\n  };\n  const handleEnter = (ev) => {\n    if (ev.key === \"Enter\") {\n      ev.preventDefault();\n      search();\n    }\n  };\n  const handleInput = (ev) => {\n    setInput(ev.target.value);\n  };\n  const handleInputClick = (ev) => {\n    ev.preventDefault();\n    ev.stopPropagation();\n  };\n  const handleItemClick = (ev) => {\n    search();\n    ev.preventDefault();\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.searchRoot }, /* @__PURE__ */ React.createElement(\n    SidebarItem,\n    {\n      icon: Icon,\n      to: props.to,\n      onClick: handleItemClick,\n      disableHighlight: true\n    },\n    /* @__PURE__ */ React.createElement(\n      TextField,\n      {\n        placeholder: \"Search\",\n        value: input,\n        onClick: handleInputClick,\n        onChange: handleInput,\n        onKeyDown: handleEnter,\n        className: classes.searchContainer,\n        InputProps: {\n          disableUnderline: true,\n          className: classes.searchField\n        },\n        inputProps: {\n          className: classes.searchFieldHTMLInput\n        }\n      }\n    )\n  ));\n}\nconst SidebarSpace = styled(\"div\")(\n  {\n    flex: 1\n  },\n  { name: \"BackstageSidebarSpace\" }\n);\nconst SidebarSpacer = styled(\"div\")(\n  {\n    height: 8\n  },\n  { name: \"BackstageSidebarSpacer\" }\n);\nconst SidebarDivider = styled(\"hr\")(\n  ({ theme }) => ({\n    height: 1,\n    width: \"100%\",\n    background: \"#383838\",\n    border: \"none\",\n    margin: theme.spacing(1.2, 0)\n  }),\n  { name: \"BackstageSidebarDivider\" }\n);\nconst styledScrollbar = (theme) => ({\n  overflowY: \"auto\",\n  \"&::-webkit-scrollbar\": {\n    backgroundColor: theme.palette.background.default,\n    width: \"5px\",\n    borderRadius: \"5px\"\n  },\n  \"&::-webkit-scrollbar-thumb\": {\n    backgroundColor: theme.palette.text.secondary,\n    borderRadius: \"5px\"\n  }\n});\nconst SidebarScrollWrapper = styled(\"div\")(({ theme }) => {\n  const scrollbarStyles = styledScrollbar(theme);\n  return {\n    flex: \"0 1 auto\",\n    overflowX: \"hidden\",\n    // 5px space to the right of the scrollbar\n    width: \"calc(100% - 5px)\",\n    // Display at least one item in the container\n    // Question: Can this be a config/theme variable - if so, which? :/\n    minHeight: \"48px\",\n    overflowY: \"hidden\",\n    \"@media (hover: none)\": scrollbarStyles,\n    \"&:hover\": scrollbarStyles\n  };\n});\nconst SidebarExpandButton = () => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen, setOpen } = useSidebarOpenState();\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"md\"),\n    { noSsr: true }\n  );\n  if (isSmallScreen) {\n    return null;\n  }\n  const handleClick = () => {\n    setOpen(!isOpen);\n  };\n  return /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      role: \"button\",\n      onClick: handleClick,\n      className: classes.expandButton,\n      \"aria-label\": \"Expand Sidebar\",\n      \"data-testid\": \"sidebar-expand-button\"\n    },\n    /* @__PURE__ */ React.createElement(Box, { className: classes.arrows }, isOpen ? /* @__PURE__ */ React.createElement(DoubleArrowLeft, null) : /* @__PURE__ */ React.createElement(DoubleArrowRight, null))\n  );\n};\n\nconst useStyles$6 = makeStyles(\n  (theme) => ({\n    introCard: (props) => ({\n      color: \"#b5b5b5\",\n      // XXX (@koroeskohr): should I be using a Mui theme variable?\n      fontSize: 12,\n      width: props.sidebarConfig.drawerWidthOpen,\n      marginTop: theme.spacing(2.25),\n      marginBottom: theme.spacing(1.5),\n      paddingLeft: props.sidebarConfig.iconPadding,\n      paddingRight: props.sidebarConfig.iconPadding\n    }),\n    introDismiss: {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      alignItems: \"center\",\n      marginTop: theme.spacing(1.5)\n    },\n    introDismissLink: {\n      color: \"#dddddd\",\n      display: \"flex\",\n      alignItems: \"center\",\n      marginBottom: theme.spacing(0.5),\n      \"&:hover\": {\n        color: theme.palette.linkHover,\n        transition: theme.transitions.create(\"color\", {\n          easing: theme.transitions.easing.sharp,\n          duration: theme.transitions.duration.shortest\n        })\n      }\n    },\n    introDismissText: {\n      fontSize: \"0.7rem\",\n      fontWeight: \"bold\",\n      textTransform: \"uppercase\",\n      letterSpacing: 1\n    },\n    introDismissIcon: {\n      width: 18,\n      height: 18,\n      marginRight: theme.spacing(1.5)\n    }\n  }),\n  { name: \"BackstageSidebarIntro\" }\n);\nfunction IntroCard(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$6({ sidebarConfig });\n  const { text, onClose } = props;\n  const handleClose = () => onClose();\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.introCard }, /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\" }, text), /* @__PURE__ */ React.createElement(Box, { className: classes.introDismiss }, /* @__PURE__ */ React.createElement(IconButton, { onClick: handleClose, className: classes.introDismissLink }, /* @__PURE__ */ React.createElement(CloseIcon, { className: classes.introDismissIcon }), /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.introDismissText }, \"Dismiss\"))));\n}\nconst SidebarIntroCard = (props) => {\n  const { text, onDismiss } = props;\n  const [collapsing, setCollapsing] = useState(false);\n  const startDismissing = () => {\n    setCollapsing(true);\n  };\n  return /* @__PURE__ */ React.createElement(Collapse, { in: !collapsing, onExited: onDismiss }, /* @__PURE__ */ React.createElement(IntroCard, { text, onClose: startDismissing }));\n};\nconst starredIntroText = `Fun fact! As you explore all the awesome plugins in Backstage, you can actually pin them to this side nav.\nKeep an eye out for the little star icon (\\u2B50) next to the plugin name and give it a click!`;\nconst recentlyViewedIntroText = \"And your recently viewed plugins will pop up here!\";\nfunction SidebarIntro(_props) {\n  const { isOpen } = useSidebarOpenState();\n  const defaultValue = {\n    starredItemsDismissed: false,\n    recentlyViewedItemsDismissed: false\n  };\n  const { value: dismissedIntro, set: setDismissedIntro } = useLocalStorageValue(SIDEBAR_INTRO_LOCAL_STORAGE);\n  const { starredItemsDismissed, recentlyViewedItemsDismissed } = dismissedIntro != null ? dismissedIntro : {};\n  const dismissStarred = () => {\n    setDismissedIntro((state) => ({\n      ...defaultValue,\n      ...state,\n      starredItemsDismissed: true\n    }));\n  };\n  const dismissRecentlyViewed = () => {\n    setDismissedIntro((state) => ({\n      ...defaultValue,\n      ...state,\n      recentlyViewedItemsDismissed: true\n    }));\n  };\n  if (!isOpen) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, !starredItemsDismissed && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    SidebarIntroCard,\n    {\n      text: starredIntroText,\n      onDismiss: dismissStarred\n    }\n  ), /* @__PURE__ */ React.createElement(SidebarDivider, null)), !recentlyViewedItemsDismissed && /* @__PURE__ */ React.createElement(\n    SidebarIntroCard,\n    {\n      text: recentlyViewedIntroText,\n      onDismiss: dismissRecentlyViewed\n    }\n  ));\n}\n\nconst useStyles$5 = makeStyles(\n  (theme) => ({\n    header: {\n      gridArea: \"pageHeader\",\n      padding: theme.spacing(3),\n      width: \"100%\",\n      boxShadow: theme.shadows[4],\n      position: \"relative\",\n      zIndex: 100,\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      backgroundImage: theme.page.backgroundImage,\n      backgroundPosition: \"center\",\n      backgroundSize: \"cover\",\n      [theme.breakpoints.down(\"sm\")]: {\n        flexWrap: \"wrap\"\n      }\n    },\n    leftItemsBox: {\n      maxWidth: \"100%\",\n      flexGrow: 1\n    },\n    rightItemsBox: {\n      width: \"auto\",\n      alignItems: \"center\"\n    },\n    title: {\n      color: theme.page.fontColor,\n      wordBreak: \"break-word\",\n      fontSize: theme.typography.h3.fontSize,\n      marginBottom: 0\n    },\n    subtitle: {\n      color: theme.page.fontColor,\n      opacity: 0.8,\n      display: \"inline-block\",\n      // prevents margin collapse of adjacent siblings\n      marginTop: theme.spacing(1),\n      maxWidth: \"75ch\"\n    },\n    type: {\n      textTransform: \"uppercase\",\n      fontSize: 11,\n      opacity: 0.8,\n      marginBottom: theme.spacing(1),\n      color: theme.page.fontColor\n    },\n    breadcrumb: {\n      color: theme.page.fontColor\n    },\n    breadcrumbType: {\n      fontSize: \"inherit\",\n      opacity: 0.7,\n      marginRight: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3)\n    },\n    breadcrumbTitle: {\n      fontSize: \"inherit\",\n      marginLeft: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3)\n    }\n  }),\n  { name: \"BackstageHeader\" }\n);\nconst TypeFragment = ({\n  type,\n  typeLink,\n  classes,\n  pageTitle\n}) => {\n  if (!type) {\n    return null;\n  }\n  if (!typeLink) {\n    return /* @__PURE__ */ React.createElement(Typography, { className: classes.type }, type);\n  }\n  return /* @__PURE__ */ React.createElement(Breadcrumbs, { className: classes.breadcrumb }, /* @__PURE__ */ React.createElement(Link, { to: typeLink }, type), /* @__PURE__ */ React.createElement(Typography, null, pageTitle));\n};\nconst TitleFragment = ({ pageTitle, classes, tooltip }) => {\n  const { contentRef } = useContent();\n  const FinalTitle = /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      ref: contentRef,\n      tabIndex: -1,\n      className: classes.title,\n      variant: \"h1\"\n    },\n    pageTitle\n  );\n  if (!tooltip) {\n    return FinalTitle;\n  }\n  return /* @__PURE__ */ React.createElement(Tooltip, { title: tooltip, placement: \"top-start\" }, FinalTitle);\n};\nconst SubtitleFragment = ({ classes, subtitle }) => {\n  if (!subtitle) {\n    return null;\n  }\n  if (typeof subtitle !== \"string\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, subtitle);\n  }\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      className: classes.subtitle,\n      variant: \"subtitle2\",\n      component: \"span\"\n    },\n    subtitle\n  );\n};\nfunction Header(props) {\n  const {\n    children,\n    pageTitleOverride,\n    style,\n    subtitle,\n    title,\n    tooltip,\n    type,\n    typeLink\n  } = props;\n  const classes = useStyles$5();\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptionalString(\"app.title\") || \"Backstage\";\n  const documentTitle = pageTitleOverride || title;\n  const pageTitle = title || pageTitleOverride;\n  const titleTemplate = `${documentTitle} | %s | ${appTitle}`;\n  const defaultTitle = `${documentTitle} | ${appTitle}`;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Helmet, { titleTemplate, defaultTitle }), /* @__PURE__ */ React.createElement(\"header\", { style, className: classes.header }, /* @__PURE__ */ React.createElement(Box, { className: classes.leftItemsBox }, /* @__PURE__ */ React.createElement(\n    TypeFragment,\n    {\n      classes,\n      type,\n      typeLink,\n      pageTitle\n    }\n  ), /* @__PURE__ */ React.createElement(\n    TitleFragment,\n    {\n      classes,\n      pageTitle,\n      tooltip\n    }\n  ), /* @__PURE__ */ React.createElement(SubtitleFragment, { classes, subtitle })), /* @__PURE__ */ React.createElement(Grid, { container: true, className: classes.rightItemsBox, spacing: 4 }, children)));\n}\n\nconst ActionItem = ({\n  label,\n  secondaryLabel,\n  icon,\n  disabled = false,\n  onClick\n}) => {\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(\n    ListItem,\n    {\n      \"data-testid\": \"header-action-item\",\n      disabled,\n      button: true,\n      onClick: (event) => {\n        if (onClick) {\n          onClick(event);\n        }\n      }\n    },\n    icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, icon),\n    /* @__PURE__ */ React.createElement(ListItemText, { primary: label, secondary: secondaryLabel })\n  ));\n};\nfunction HeaderActionMenu(props) {\n  const {\n    palette: {\n      common: { white }\n    }\n  } = useTheme();\n  const { actionItems } = props;\n  const [open, setOpen] = React.useState(false);\n  const anchorElRef = React.useRef(null);\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      onClick: () => setOpen(true),\n      \"data-testid\": \"header-action-menu\",\n      ref: anchorElRef,\n      style: {\n        color: white,\n        height: 56,\n        width: 56,\n        marginRight: -4,\n        padding: 0\n      }\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  ), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open,\n      anchorEl: anchorElRef.current,\n      anchorOrigin: { horizontal: \"right\", vertical: \"bottom\" },\n      transformOrigin: { horizontal: \"right\", vertical: \"top\" },\n      onClose: () => setOpen(false)\n    },\n    /* @__PURE__ */ React.createElement(List, null, actionItems.map((actionItem, i) => {\n      return /* @__PURE__ */ React.createElement(ActionItem, { key: `header-action-menu-${i}`, ...actionItem });\n    }))\n  ));\n}\n\nconst useStyles$4 = makeStyles(\n  (theme) => ({\n    root: {\n      textAlign: \"left\"\n    },\n    label: {\n      color: theme.page.fontColor,\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: 0,\n      fontSize: theme.typography.fontSize,\n      marginBottom: theme.spacing(1) / 2,\n      lineHeight: 1\n    },\n    value: {\n      color: alpha(theme.page.fontColor, 0.8),\n      fontSize: theme.typography.fontSize,\n      lineHeight: 1\n    }\n  }),\n  { name: \"BackstageHeaderLabel\" }\n);\nconst HeaderLabelContent = ({\n  value,\n  className,\n  typographyRootComponent\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: typographyRootComponent != null ? typographyRootComponent : typeof value === \"string\" ? \"p\" : \"span\",\n      className\n    },\n    value\n  );\n};\nfunction HeaderLabel(props) {\n  const { label, value, url, contentTypograpyRootComponent } = props;\n  const classes = useStyles$4();\n  const content = /* @__PURE__ */ React.createElement(\n    HeaderLabelContent,\n    {\n      className: classes.value,\n      value: value || \"<Unknown>\",\n      typographyRootComponent: contentTypograpyRootComponent\n    }\n  );\n  return /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.root }, /* @__PURE__ */ React.createElement(Typography, { className: classes.label }, label), url ? /* @__PURE__ */ React.createElement(Link, { to: url }, content) : content));\n}\n\nconst styles$1 = (theme) => createStyles({\n  root: {\n    color: theme.palette.common.white,\n    padding: theme.spacing(2, 2, 3),\n    backgroundImage: theme.getPageTheme({ themeId: \"card\" }).backgroundImage,\n    backgroundPosition: 0,\n    backgroundSize: \"inherit\"\n  }\n});\nconst useStyles$3 = makeStyles(styles$1, { name: \"BackstageItemCardHeader\" });\nfunction ItemCardHeader(props) {\n  const { title, subtitle, children } = props;\n  const classes = useStyles$3(props);\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, subtitle && /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\", component: \"h3\" }, subtitle), title && /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", component: \"h4\" }, title), children);\n}\n\nfunction ItemCard(props) {\n  const { description, tags, title, type, subtitle, label, onClick, href } = props;\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardMedia, null, /* @__PURE__ */ React.createElement(ItemCardHeader, { title, subtitle: subtitle || type })), /* @__PURE__ */ React.createElement(CardContent, null, (tags == null ? void 0 : tags.length) ? /* @__PURE__ */ React.createElement(Box, null, tags.map((tag, i) => /* @__PURE__ */ React.createElement(Chip, { size: \"small\", label: tag, key: i }))) : null, description), /* @__PURE__ */ React.createElement(CardActions, null, !href && /* @__PURE__ */ React.createElement(LinkButton, { to: \"#\", onClick, color: \"primary\" }, label), href && /* @__PURE__ */ React.createElement(LinkButton, { to: href, color: \"primary\" }, label)));\n}\n\nconst styles = (theme) => createStyles({\n  root: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fill, minmax(22em, 1fr))\",\n    gridAutoRows: \"1fr\",\n    gridGap: theme.spacing(2)\n  }\n});\nconst useStyles$2 = makeStyles(styles, { name: \"BackstageItemCardGrid\" });\nfunction ItemCardGrid(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles$2(otherProps);\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root, ...otherProps }, children);\n}\n\nconst useStyles$1 = makeStyles(\n  (theme) => ({\n    root: {\n      display: \"grid\",\n      gridTemplateAreas: \"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'\",\n      gridTemplateRows: \"max-content auto 1fr\",\n      gridTemplateColumns: \"auto 1fr auto\",\n      overflowY: \"auto\",\n      height: \"100vh\",\n      [theme.breakpoints.down(\"xs\")]: {\n        height: \"100%\"\n      },\n      \"@media print\": {\n        display: \"block\",\n        height: \"auto\",\n        overflowY: \"inherit\"\n      }\n    }\n  }),\n  { name: \"BackstagePage\" }\n);\nfunction Page(props) {\n  const { themeId, children } = props;\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(\n    ThemeProvider,\n    {\n      theme: (baseTheme) => ({\n        ...baseTheme,\n        page: baseTheme.getPageTheme({ themeId })\n      })\n    },\n    /* @__PURE__ */ React.createElement(\"main\", { className: classes.root }, children)\n  );\n}\n\nfunction PageWithHeader(props) {\n  const { themeId, children, ...restProps } = props;\n  return /* @__PURE__ */ React.createElement(Page, { themeId }, /* @__PURE__ */ React.createElement(Header, { ...restProps }), children);\n}\n\nconst proxiedSessionSchema = z.object({\n  providerInfo: z.object({}).catchall(z.unknown()).optional(),\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional()\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal(\"user\"),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string())\n    })\n  })\n});\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst DEFAULTS = {\n  // The amount of time between token refreshes, if we fail to get an actual\n  // value out of the exp claim\n  defaultTokenExpiryMillis: 5 * 60 * 1e3,\n  // The amount of time before the actual expiry of the Backstage token, that we\n  // shall start trying to get a new one\n  tokenExpiryMarginMillis: 5 * 60 * 1e3\n};\nfunction tokenToExpiry(jwtToken) {\n  const fallback = new Date(Date.now() + DEFAULTS.defaultTokenExpiryMillis);\n  if (!jwtToken) {\n    return fallback;\n  }\n  const [_header, rawPayload, _signature] = jwtToken.split(\".\");\n  const payload = JSON.parse(window.atob(rawPayload));\n  if (typeof payload.exp !== \"number\") {\n    return fallback;\n  }\n  return new Date(payload.exp * 1e3 - DEFAULTS.tokenExpiryMarginMillis);\n}\nclass ProxiedSignInIdentity {\n  constructor(options) {\n    __publicField$1(this, \"options\");\n    __publicField$1(this, \"abortController\");\n    __publicField$1(this, \"state\");\n    this.options = options;\n    this.abortController = new AbortController();\n    this.state = { type: \"empty\" };\n  }\n  async start() {\n    await this.getSessionAsync();\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId() {\n    const { backstageIdentity } = this.getSessionSync();\n    const ref = backstageIdentity.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n    return match[3];\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.token;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile() {\n    const session = this.getSessionSync();\n    return session.profile;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo() {\n    const session = await this.getSessionAsync();\n    return session.profile;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.identity;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials() {\n    const session = await this.getSessionAsync();\n    return {\n      token: session.backstageIdentity.token\n    };\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut() {\n    this.abortController.abort();\n  }\n  getSessionSync() {\n    if (this.state.type === \"active\") {\n      return this.state.session;\n    } else if (this.state.type === \"fetching\" && this.state.previous) {\n      return this.state.previous;\n    }\n    throw new Error(\"No session available. Try reloading your browser page.\");\n  }\n  async getSessionAsync() {\n    if (this.state.type === \"fetching\") {\n      return this.state.promise;\n    } else if (this.state.type === \"active\" && /* @__PURE__ */ new Date() < this.state.expiresAt) {\n      return this.state.session;\n    }\n    const previous = this.state.type === \"active\" ? this.state.session : void 0;\n    const promise = this.fetchSession().then(\n      (session) => {\n        this.state = {\n          type: \"active\",\n          session,\n          expiresAt: tokenToExpiry(session.backstageIdentity.token)\n        };\n        return session;\n      },\n      (error) => {\n        this.state = {\n          type: \"failed\",\n          error\n        };\n        throw error;\n      }\n    );\n    this.state = {\n      type: \"fetching\",\n      promise,\n      previous\n    };\n    return promise;\n  }\n  async fetchSession() {\n    const baseUrl = await this.options.discoveryApi.getBaseUrl(\"auth\");\n    const headers = typeof this.options.headers === \"function\" ? await this.options.headers() : this.options.headers;\n    const mergedHeaders = new Headers(headers);\n    mergedHeaders.set(\"X-Requested-With\", \"XMLHttpRequest\");\n    const response = await fetch(\n      `${baseUrl}/${this.options.provider}/refresh`,\n      {\n        signal: this.abortController.signal,\n        headers: mergedHeaders,\n        credentials: \"include\"\n      }\n    );\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return proxiedSessionSchema.parse(await response.json());\n  }\n}\n\nconst ProxiedSignInPage = (props) => {\n  const discoveryApi = useApi(discoveryApiRef);\n  const [{ status, error }, { execute }] = useAsync(async () => {\n    const identity = new ProxiedSignInIdentity({\n      provider: props.provider,\n      discoveryApi,\n      headers: props.headers\n    });\n    await identity.start();\n    props.onSignInSuccess(identity);\n  });\n  useMountEffect(execute);\n  if (status === \"loading\") {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(\n      ErrorPanel,\n      {\n        title: \"You do not appear to be signed in. Please try reloading the browser page.\",\n        error\n      }\n    );\n  }\n  return null;\n};\n\nclass GuestUserIdentity {\n  getUserId() {\n    return \"guest\";\n  }\n  async getIdToken() {\n    return void 0;\n  }\n  getProfile() {\n    return {\n      email: \"guest@example.com\",\n      displayName: \"Guest\"\n    };\n  }\n  async getProfileInfo() {\n    return {\n      email: \"guest@example.com\",\n      displayName: \"Guest\"\n    };\n  }\n  async getBackstageIdentity() {\n    const userEntityRef = `user:default/guest`;\n    return {\n      type: \"user\",\n      userEntityRef,\n      ownershipEntityRefs: [userEntityRef]\n    };\n  }\n  async getCredentials() {\n    return {};\n  }\n  async signOut() {\n  }\n}\n\nfunction parseJwtPayload(token) {\n  const [_header, payload, _signature] = token.split(\".\");\n  return JSON.parse(window.atob(payload));\n}\nclass LegacyUserIdentity {\n  constructor(result) {\n    this.result = result;\n  }\n  getUserId() {\n    return this.result.userId;\n  }\n  static fromResult(result) {\n    return new LegacyUserIdentity(result);\n  }\n  async getIdToken() {\n    var _a, _b;\n    return (_b = (_a = this.result).getIdToken) == null ? void 0 : _b.call(_a);\n  }\n  getProfile() {\n    return this.result.profile;\n  }\n  async getProfileInfo() {\n    return this.result.profile;\n  }\n  async getBackstageIdentity() {\n    const token = await this.getIdToken();\n    if (!token) {\n      const userEntityRef = `user:default/${this.getUserId()}`;\n      return {\n        type: \"user\",\n        userEntityRef,\n        ownershipEntityRefs: [userEntityRef]\n      };\n    }\n    const { sub, ent } = parseJwtPayload(token);\n    return {\n      type: \"user\",\n      userEntityRef: sub,\n      ownershipEntityRefs: ent != null ? ent : []\n    };\n  }\n  async getCredentials() {\n    var _a, _b;\n    const token = await ((_b = (_a = this.result).getIdToken) == null ? void 0 : _b.call(_a));\n    return { token };\n  }\n  async signOut() {\n    var _a, _b;\n    return (_b = (_a = this.result).signOut) == null ? void 0 : _b.call(_a);\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass UserIdentity {\n  constructor(identity, authApi, profile) {\n    this.identity = identity;\n    this.authApi = authApi;\n    this.profile = profile;\n    __publicField(this, \"profilePromise\");\n  }\n  /**\n   * Creates a new IdentityApi that acts as a Guest User.\n   *\n   * @public\n   */\n  static createGuest() {\n    return new GuestUserIdentity();\n  }\n  /**\n   * Creates a new IdentityApi using a legacy SignInResult object.\n   *\n   * @public\n   */\n  static fromLegacy(result) {\n    return LegacyUserIdentity.fromResult(result);\n  }\n  /**\n   * Creates a new IdentityApi implementation using a user identity\n   * and an auth API that will be used to request backstage tokens.\n   *\n   * @public\n   */\n  static create(options) {\n    return new UserIdentity(options.identity, options.authApi, options.profile);\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId() {\n    const ref = this.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n    return match[3];\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return identity.token;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile() {\n    if (!this.profile) {\n      throw new Error(\n        \"The identity API does not implement synchronous profile fetching, use getProfileInfo() instead\"\n      );\n    }\n    return this.profile;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo() {\n    if (this.profilePromise) {\n      return await this.profilePromise;\n    }\n    try {\n      this.profilePromise = this.authApi.getProfile();\n      return await this.profilePromise;\n    } catch (ex) {\n      this.profilePromise = void 0;\n      throw ex;\n    }\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity() {\n    return this.identity;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return { token: identity.token };\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut() {\n    return this.authApi.signOut();\n  }\n}\n\nconst useStyles = makeStyles(\n  {\n    container: {\n      padding: 0,\n      listStyle: \"none\"\n    },\n    item: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      width: \"100%\",\n      maxWidth: \"400px\",\n      margin: 0,\n      padding: 0\n    }\n  },\n  { name: \"BackstageSignInPage\" }\n);\nconst GridItem = ({ children }) => {\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(Grid, { component: \"li\", item: true, classes }, children);\n};\n\nconst Component$2 = ({\n  config,\n  onSignInStarted,\n  onSignInSuccess,\n  onSignInFailure\n}) => {\n  const { apiRef, title, message } = config;\n  const authApi = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n  const handleLogin = async () => {\n    try {\n      onSignInStarted();\n      const identityResponse = await authApi.getBackstageIdentity({\n        instantPopup: true\n      });\n      if (!identityResponse) {\n        onSignInFailure();\n        throw new Error(\n          `The ${title} provider is not configured to support sign-in`\n        );\n      }\n      const profile = await authApi.getProfile();\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          profile,\n          authApi\n        })\n      );\n    } catch (error) {\n      onSignInFailure();\n      errorApi.post(new ForwardedError(\"Login failed\", error));\n    }\n  };\n  return /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      variant: \"fullHeight\",\n      title,\n      actions: /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", variant: \"outlined\", onClick: handleLogin }, \"Sign In\")\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, message)\n  ));\n};\nconst loader$2 = async (apis, apiRef) => {\n  const authApi = apis.get(apiRef);\n  const identityResponse = await authApi.getBackstageIdentity({\n    optional: true\n  });\n  if (!identityResponse) {\n    return void 0;\n  }\n  const profile = await authApi.getProfile();\n  return UserIdentity.create({\n    identity: identityResponse.identity,\n    profile,\n    authApi\n  });\n};\nconst commonProvider = { Component: Component$2, loader: loader$2 };\n\nconst Component$1 = ({ onSignInStarted, onSignInSuccess }) => /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(\n  InfoCard,\n  {\n    title: \"Guest\",\n    variant: \"fullHeight\",\n    actions: /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        color: \"primary\",\n        variant: \"outlined\",\n        onClick: () => {\n          onSignInStarted();\n          onSignInSuccess(new GuestUserIdentity());\n        }\n      },\n      \"Enter\"\n    )\n  },\n  /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Enter as a Guest User.\", /* @__PURE__ */ React.createElement(\"br\", null), \"You will not have a verified identity,\", /* @__PURE__ */ React.createElement(\"br\", null), \"meaning some features might be unavailable.\")\n));\nconst loader$1 = async () => {\n  return new GuestUserIdentity();\n};\nconst guestProvider = { Component: Component$1, loader: loader$1 };\n\nconst ID_TOKEN_REGEX = /^[a-z0-9_\\-]+\\.[a-z0-9_\\-]+\\.[a-z0-9_\\-]+$/i;\nconst useFormStyles = makeStyles(\n  (theme) => ({\n    form: {\n      display: \"flex\",\n      flexFlow: \"column nowrap\"\n    },\n    button: {\n      alignSelf: \"center\",\n      marginTop: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageCustomProvider\" }\n);\nconst asInputRef = (renderResult) => {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest\n  };\n};\nconst Component = ({ onSignInStarted, onSignInSuccess }) => {\n  const classes = useFormStyles();\n  const { register, handleSubmit, formState } = useForm({\n    mode: \"onChange\"\n  });\n  const { errors } = formState;\n  const handleResult = ({ userId, idToken }) => {\n    onSignInStarted();\n    onSignInSuccess(\n      UserIdentity.fromLegacy({\n        userId,\n        getIdToken: idToken !== void 0 ? async () => idToken : void 0,\n        profile: {\n          email: `${userId}@example.com`\n        }\n      })\n    );\n  };\n  return /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(InfoCard, { title: \"Custom User\", variant: \"fullHeight\" }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Enter your own User ID and credentials.\", /* @__PURE__ */ React.createElement(\"br\", null), \"This selection will not be stored.\"), /* @__PURE__ */ React.createElement(\"form\", { className: classes.form, onSubmit: handleSubmit(handleResult) }, /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      ...asInputRef(register(\"userId\", { required: true })),\n      label: \"User ID\",\n      margin: \"normal\",\n      error: Boolean(errors.userId)\n    }\n  ), errors.userId && /* @__PURE__ */ React.createElement(FormHelperText, { error: true }, errors.userId.message)), /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      ...asInputRef(\n        register(\"idToken\", {\n          required: false,\n          validate: (token) => !token || ID_TOKEN_REGEX.test(token) || \"Token is not a valid OpenID Connect JWT Token\"\n        })\n      ),\n      label: \"ID Token (optional)\",\n      margin: \"normal\",\n      autoComplete: \"off\",\n      error: Boolean(errors.idToken)\n    }\n  ), errors.idToken && /* @__PURE__ */ React.createElement(FormHelperText, { error: true }, errors.idToken.message)), /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      type: \"submit\",\n      color: \"primary\",\n      variant: \"outlined\",\n      className: classes.button,\n      disabled: !(formState == null ? void 0 : formState.isDirty) || !isEmpty(errors)\n    },\n    \"Continue\"\n  ))));\n};\nconst loader = async () => void 0;\nconst customProvider = { Component, loader };\n\nclass IdentityApiSignOutProxy {\n  constructor(config) {\n    this.config = config;\n  }\n  static from(config) {\n    return new IdentityApiSignOutProxy(config);\n  }\n  getUserId() {\n    if (!this.config.identityApi.getUserId) {\n      throw new Error(`SignOutProxy IdentityApi.getUserId is not implemented`);\n    }\n    return this.config.identityApi.getUserId();\n  }\n  getIdToken() {\n    if (!this.config.identityApi.getIdToken) {\n      throw new Error(`SignOutProxy IdentityApi.getIdToken is not implemented`);\n    }\n    return this.config.identityApi.getIdToken();\n  }\n  getProfile() {\n    if (!this.config.identityApi.getProfile) {\n      throw new Error(`SignOutProxy IdentityApi.getProfile is not implemented`);\n    }\n    return this.config.identityApi.getProfile();\n  }\n  getProfileInfo() {\n    return this.config.identityApi.getProfileInfo();\n  }\n  getBackstageIdentity() {\n    return this.config.identityApi.getBackstageIdentity();\n  }\n  getCredentials() {\n    return this.config.identityApi.getCredentials();\n  }\n  signOut() {\n    return this.config.signOut();\n  }\n}\n\nconst PROVIDER_STORAGE_KEY = \"@backstage/core:SignInPage:provider\";\nconst signInProviders = {\n  guest: guestProvider,\n  custom: customProvider,\n  common: commonProvider\n};\nfunction validateIDs(id, providers) {\n  if (id in providers)\n    throw new Error(\n      `\"${id}\" ID is duplicated. IDs of identity providers have to be unique.`\n    );\n}\nfunction getSignInProviders(identityProviders) {\n  const providers = identityProviders.reduce(\n    (acc, config) => {\n      if (typeof config === \"string\") {\n        validateIDs(config, acc);\n        acc[config] = { components: signInProviders[config], id: config };\n        return acc;\n      }\n      const { id } = config;\n      validateIDs(id, acc);\n      acc[id] = { components: signInProviders.common, id, config };\n      return acc;\n    },\n    {}\n  );\n  return providers;\n}\nconst useSignInProviders = (providers, onSignInSuccess) => {\n  const errorApi = useApi(errorApiRef);\n  const apiHolder = useApiHolder();\n  const [loading, setLoading] = useState(true);\n  const handleWrappedResult = useCallback(\n    (identityApi) => {\n      onSignInSuccess(\n        IdentityApiSignOutProxy.from({\n          identityApi,\n          signOut: async () => {\n            var _a;\n            localStorage.removeItem(PROVIDER_STORAGE_KEY);\n            await ((_a = identityApi.signOut) == null ? void 0 : _a.call(identityApi));\n          }\n        })\n      );\n    },\n    [onSignInSuccess]\n  );\n  useLayoutEffect(() => {\n    var _a;\n    if (!loading) {\n      return void 0;\n    }\n    const selectedProviderId = localStorage.getItem(\n      PROVIDER_STORAGE_KEY\n    );\n    if (selectedProviderId === null) {\n      setLoading(false);\n      return void 0;\n    }\n    const provider = providers[selectedProviderId];\n    if (!provider) {\n      setLoading(false);\n      return void 0;\n    }\n    let didCancel = false;\n    provider.components.loader(apiHolder, (_a = provider.config) == null ? void 0 : _a.apiRef).then((result) => {\n      if (didCancel) {\n        localStorage.removeItem(PROVIDER_STORAGE_KEY);\n        return;\n      }\n      if (result) {\n        handleWrappedResult(result);\n      } else {\n        setLoading(false);\n      }\n    }).catch((error) => {\n      localStorage.removeItem(PROVIDER_STORAGE_KEY);\n      if (didCancel) {\n        return;\n      }\n      errorApi.post(error);\n      setLoading(false);\n    });\n    return () => {\n      didCancel = true;\n    };\n  }, [\n    loading,\n    errorApi,\n    onSignInSuccess,\n    apiHolder,\n    providers,\n    handleWrappedResult\n  ]);\n  const elements = useMemo(\n    () => Object.keys(providers).map((key) => {\n      const provider = providers[key];\n      const { Component } = provider.components;\n      const handleSignInSuccess = (result) => {\n        handleWrappedResult(result);\n      };\n      const handleSignInStarted = () => {\n        var _a;\n        localStorage.setItem(\n          PROVIDER_STORAGE_KEY,\n          ((_a = provider == null ? void 0 : provider.config) == null ? void 0 : _a.id) || provider.id\n        );\n      };\n      const handleSignInFailure = () => {\n        localStorage.removeItem(PROVIDER_STORAGE_KEY);\n      };\n      return /* @__PURE__ */ React.createElement(\n        Component,\n        {\n          key: provider.id,\n          config: provider.config,\n          onSignInStarted: handleSignInStarted,\n          onSignInSuccess: handleSignInSuccess,\n          onSignInFailure: handleSignInFailure\n        }\n      );\n    }),\n    [providers, handleWrappedResult]\n  );\n  return [loading, elements];\n};\n\nconst MultiSignInPage = ({\n  onSignInSuccess,\n  providers = [],\n  title,\n  align = \"left\"\n}) => {\n  const configApi = useApi(configApiRef);\n  const classes = useStyles();\n  const signInProviders = getSignInProviders(providers);\n  const [loading, providerElements] = useSignInProviders(\n    signInProviders,\n    onSignInSuccess\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(Header, { title: configApi.getString(\"app.title\") }), /* @__PURE__ */ React.createElement(Content, null, title && /* @__PURE__ */ React.createElement(ContentHeader, { title, textAlign: align }), /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      justifyContent: align === \"center\" ? align : \"flex-start\",\n      spacing: 2,\n      component: \"ul\",\n      classes\n    },\n    providerElements\n  )));\n};\nconst SingleSignInPage = ({\n  provider,\n  auto,\n  onSignInSuccess\n}) => {\n  const classes = useStyles();\n  const authApi = useApi(provider.apiRef);\n  const configApi = useApi(configApiRef);\n  const [error, setError] = useState();\n  const [showLoginPage, setShowLoginPage] = useState(false);\n  const login = async ({ checkExisting, showPopup }) => {\n    try {\n      let identityResponse;\n      if (checkExisting) {\n        identityResponse = await authApi.getBackstageIdentity({\n          optional: true\n        });\n      }\n      if (!identityResponse && (showPopup || auto)) {\n        setShowLoginPage(true);\n        identityResponse = await authApi.getBackstageIdentity({\n          instantPopup: true\n        });\n        if (!identityResponse) {\n          throw new Error(\n            `The ${provider.title} provider is not configured to support sign-in`\n          );\n        }\n      }\n      if (!identityResponse) {\n        setShowLoginPage(true);\n        return;\n      }\n      const profile = await authApi.getProfile();\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          authApi,\n          profile\n        })\n      );\n    } catch (err) {\n      setError(err);\n      setShowLoginPage(true);\n    }\n  };\n  useMountEffect(() => login({ checkExisting: true }));\n  return showLoginPage ? /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(Header, { title: configApi.getString(\"app.title\") }), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      justifyContent: \"center\",\n      spacing: 2,\n      component: \"ul\",\n      classes\n    },\n    /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(\n      InfoCard,\n      {\n        variant: \"fullHeight\",\n        title: provider.title,\n        actions: /* @__PURE__ */ React.createElement(\n          Button$1,\n          {\n            color: \"primary\",\n            variant: \"outlined\",\n            onClick: () => {\n              login({ showPopup: true });\n            }\n          },\n          \"Sign In\"\n        )\n      },\n      /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, provider.message),\n      error && error.name !== \"PopupRejectedError\" && /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\", color: \"error\" }, error.message)\n    ))\n  ))) : /* @__PURE__ */ React.createElement(Progress, null);\n};\nfunction SignInPage(props) {\n  if (\"provider\" in props) {\n    return /* @__PURE__ */ React.createElement(SingleSignInPage, { ...props });\n  }\n  return /* @__PURE__ */ React.createElement(MultiSignInPage, { ...props });\n}\n\nconst useTabsStyles = makeStyles(\n  (theme) => ({\n    root: {\n      padding: theme.spacing(0, 2, 0, 2.5),\n      minHeight: theme.spacing(3)\n    },\n    indicator: {\n      backgroundColor: theme.palette.info.main,\n      height: theme.spacing(0.3)\n    }\n  }),\n  { name: \"BackstageTabbedCard\" }\n);\nconst BoldHeader = withStyles(\n  (theme) => ({\n    root: { padding: theme.spacing(2, 2, 2, 2.5), display: \"inline-block\" },\n    title: { fontWeight: 700 },\n    subheader: { paddingTop: theme.spacing(1) }\n  }),\n  { name: \"BackstageTabbedCardBoldHeader\" }\n)(CardHeader);\nfunction TabbedCard(props) {\n  const {\n    slackChannel,\n    errorBoundaryProps,\n    children,\n    title,\n    deepLink,\n    value,\n    onChange\n  } = props;\n  const tabsClasses = useTabsStyles();\n  const [selectedIndex, selectIndex] = useState(0);\n  const handleChange = onChange ? onChange : (_ev, newSelectedIndex) => selectIndex(newSelectedIndex);\n  let selectedTabContent;\n  if (!value) {\n    React.Children.map(children, (child, index) => {\n      if (React.isValidElement(child) && index === selectedIndex) {\n        selectedTabContent = child == null ? void 0 : child.props.children;\n      }\n    });\n  } else {\n    React.Children.map(children, (child) => {\n      if (React.isValidElement(\n        child\n      ) && (child == null ? void 0 : child.props.value) === value) {\n        selectedTabContent = child == null ? void 0 : child.props.children;\n      }\n    });\n  }\n  const errProps = errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(ErrorBoundary, { ...errProps }, title && /* @__PURE__ */ React.createElement(BoldHeader, { title }), /* @__PURE__ */ React.createElement(\n    Tabs,\n    {\n      selectionFollowsFocus: true,\n      classes: tabsClasses,\n      value: value || selectedIndex,\n      onChange: handleChange\n    },\n    children\n  ), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(CardContent, null, selectedTabContent), deepLink && /* @__PURE__ */ React.createElement(BottomLink, { ...deepLink })));\n}\nconst useCardTabStyles = makeStyles(\n  (theme) => ({\n    root: {\n      minWidth: theme.spacing(6),\n      minHeight: theme.spacing(3),\n      margin: theme.spacing(0, 2, 0, 0),\n      padding: theme.spacing(0.5, 0, 0.5, 0),\n      textTransform: \"none\",\n      \"&:hover\": {\n        opacity: 1,\n        backgroundColor: \"transparent\",\n        color: theme.palette.text.primary\n      }\n    },\n    selected: {\n      fontWeight: theme.typography.fontWeightBold\n    }\n  }),\n  { name: \"BackstageCardTab\" }\n);\nfunction CardTab(props) {\n  const { children, ...restProps } = props;\n  const classes = useCardTabStyles();\n  return /* @__PURE__ */ React.createElement(TabUI, { disableRipple: true, classes, ...restProps });\n}\n\nexport { AlertDisplay, AutoLogout, Avatar, BottomLink, Breadcrumbs, BrokenImageIcon, Button, CardTab, CatalogIcon, ChatIcon, CodeSnippet, Content, ContentHeader, CopyTextButton, CreateButton, DashboardIcon, DependencyGraph, DependencyGraphTypes, DismissableBanner, DocsIcon, EmailIcon, EmptyState, ErrorBoundary, ErrorPage, ErrorPanel, FeatureCalloutCircular, Gauge, GaugeCard, GitHubIcon, GroupIcon, Header, HeaderActionMenu, HeaderIconLinkRow, HeaderLabel, HeaderTabs, HelpIcon, HorizontalScrollGrid, InfoCard, IntroCard, ItemCard, ItemCardGrid, ItemCardHeader, Lifecycle, LinearGauge, Link, LinkButton, LogViewer, MarkdownContent, MissingAnnotationEmptyState, MobileSidebar, OAuthRequestDialog, OverflowTooltip, Page, PageWithHeader, Progress, ProxiedSignInPage, ResponseErrorPanel, RoutedTabs, SIDEBAR_INTRO_LOCAL_STORAGE, SelectComponent as Select, Sidebar, LegacySidebarContext as SidebarContext, SidebarDivider, SidebarExpandButton, SidebarGroup, SidebarIntro, SidebarItem, SidebarOpenStateProvider, SidebarPage, LegacySidebarPinStateContext as SidebarPinStateContext, SidebarPinStateProvider, SidebarScrollWrapper, SidebarSearchField, SidebarSpace, SidebarSpacer, SidebarSubmenu, SidebarSubmenuItem, SignInPage, SimpleStepper, SimpleStepperStep, StatusAborted, StatusError, StatusOK, StatusPending, StatusRunning, StatusWarning, StructuredMetadataTable, SubvalueCell, SupportButton, TabbedCard, TabbedLayout, Table, TrendLine, UserIcon, UserIdentity, WarningIcon, WarningPanel, sidebarConfig, useContent, useQueryParamState, useSidebarOpenState, useSidebarPinState, useSupportConfig };\n//# sourceMappingURL=index.esm.js.map\n","import { useState, useMemo, useCallback, useEffect, useRef } from 'react';\nimport { u as useApi, s as errorApiRef, r as routeRefType } from './esm/types-08c0ee05.esm.js';\nimport { createApiRef } from '@backstage/core-plugin-api';\nimport 'react-router-dom';\nimport '@backstage/version-bridge';\n\nfunction createTranslationMessages(options) {\n  return {\n    $$type: \"@backstage/TranslationMessages\",\n    id: options.ref.id,\n    full: Boolean(options.full),\n    messages: options.messages\n  };\n}\n\nfunction createTranslationResource(options) {\n  return {\n    $$type: \"@backstage/TranslationResource\",\n    version: \"v1\",\n    id: options.ref.id,\n    resources: Object.entries(options.translations).map(\n      ([language, loader]) => ({\n        language,\n        loader: () => loader().then((m) => {\n          const value = m.default;\n          return {\n            messages: (value == null ? void 0 : value.$$type) === \"@backstage/TranslationMessages\" ? value.messages : value\n          };\n        })\n      })\n    )\n  };\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck$2 = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$2 = (obj, member, getter) => {\n  __accessCheck$2(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$2 = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$2 = (obj, member, value, setter) => {\n  __accessCheck$2(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _id$1, _messages, _resources;\nclass TranslationRefImpl {\n  constructor(options) {\n    __privateAdd$2(this, _id$1, void 0);\n    __privateAdd$2(this, _messages, void 0);\n    __privateAdd$2(this, _resources, void 0);\n    __publicField$3(this, \"$$type\", \"@backstage/TranslationRef\");\n    __publicField$3(this, \"version\", \"v1\");\n    __privateSet$2(this, _id$1, options.id);\n    __privateSet$2(this, _messages, options.messages);\n  }\n  get id() {\n    return __privateGet$2(this, _id$1);\n  }\n  get T() {\n    throw new Error(\"Not implemented\");\n  }\n  getDefaultMessages() {\n    return __privateGet$2(this, _messages);\n  }\n  setDefaultResource(resources) {\n    __privateSet$2(this, _resources, resources);\n  }\n  getDefaultResource() {\n    return __privateGet$2(this, _resources);\n  }\n  toString() {\n    return `TranslationRef{id=${this.id}}`;\n  }\n}\n_id$1 = new WeakMap();\n_messages = new WeakMap();\n_resources = new WeakMap();\nfunction createTranslationRef(config) {\n  const ref = new TranslationRefImpl(config);\n  if (config.translations) {\n    ref.setDefaultResource(\n      createTranslationResource({\n        ref,\n        translations: config.translations\n      })\n    );\n  }\n  return ref;\n}\n\nconst translationApiRef = createApiRef({\n  id: \"core.translation\"\n});\n\nconst appLanguageApiRef = createApiRef({\n  id: \"core.applanguage\"\n});\n\nconst loggedRefs = /* @__PURE__ */ new WeakSet();\nconst useTranslationRef = (translationRef) => {\n  const errorApi = useApi(errorApiRef);\n  const translationApi = useApi(translationApiRef);\n  const [snapshot, setSnapshot] = useState(\n    () => translationApi.getTranslation(translationRef)\n  );\n  const observable = useMemo(\n    () => translationApi.translation$(translationRef),\n    [translationApi, translationRef]\n  );\n  const onError = useCallback(\n    (error) => {\n      if (!loggedRefs.has(translationRef)) {\n        const errMsg = `Failed to load translation resource '${translationRef.id}'; caused by ${error}`;\n        console.error(errMsg);\n        errorApi.post(new Error(errMsg));\n        loggedRefs.add(translationRef);\n      }\n    },\n    [errorApi, translationRef]\n  );\n  useEffect(() => {\n    const subscription = observable.subscribe({\n      next(next) {\n        if (next.ready) {\n          setSnapshot(next);\n        }\n      },\n      error(error) {\n        onError(error);\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [observable, onError]);\n  const initialRenderRef = useRef(true);\n  useEffect(() => {\n    if (initialRenderRef.current) {\n      initialRenderRef.current = false;\n    } else {\n      setSnapshot(translationApi.getTranslation(translationRef));\n    }\n  }, [translationApi, translationRef]);\n  if (!snapshot.ready) {\n    throw new Promise((resolve) => {\n      const subscription = observable.subscribe({\n        next(next) {\n          if (next.ready) {\n            subscription.unsubscribe();\n            resolve();\n          }\n        },\n        error(error) {\n          subscription.unsubscribe();\n          onError(error);\n          resolve();\n        }\n      });\n    });\n  }\n  return { t: snapshot.t };\n};\n\nconst MESSAGE_MARKER = \"eHgtF5hmbrXyiEvo\";\nfunction describeParentCallSite(ErrorConstructor = Error) {\n  const { stack } = new ErrorConstructor(MESSAGE_MARKER);\n  if (!stack) {\n    return \"<unknown>\";\n  }\n  const startIndex = stack.includes(MESSAGE_MARKER) ? stack.indexOf(\"\\n\") + 1 : 0;\n  const secondEntryStart = stack.indexOf(\"\\n\", stack.indexOf(\"\\n\", startIndex) + 1) + 1;\n  const secondEntryEnd = stack.indexOf(\"\\n\", secondEntryStart);\n  const line = stack.substring(secondEntryStart, secondEntryEnd).trim();\n  if (!line) {\n    return \"unknown\";\n  }\n  if (line.includes(\"(\")) {\n    return line.substring(line.indexOf(\"(\") + 1, line.indexOf(\")\"));\n  }\n  if (line.includes(\"@\")) {\n    return line.substring(line.indexOf(\"@\") + 1);\n  }\n  return line;\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck$1 = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$1 = (obj, member, getter) => {\n  __accessCheck$1(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$1 = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$1 = (obj, member, value, setter) => {\n  __accessCheck$1(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _id, _params$1, _creationSite, _name, name_get;\nfunction toInternalRouteRef(resource) {\n  const r = resource;\n  if (r.$$type !== \"@backstage/RouteRef\") {\n    throw new Error(`Invalid RouteRef, bad type '${r.$$type}'`);\n  }\n  return r;\n}\nclass RouteRefImpl {\n  constructor(params = [], creationSite) {\n    this.params = params;\n    __privateAdd$1(this, _name);\n    __publicField$2(this, \"$$type\", \"@backstage/RouteRef\");\n    __publicField$2(this, \"version\", \"v1\");\n    __privateAdd$1(this, _id, void 0);\n    __privateAdd$1(this, _params$1, void 0);\n    __privateAdd$1(this, _creationSite, void 0);\n    __privateSet$1(this, _params$1, params);\n    __privateSet$1(this, _creationSite, creationSite);\n  }\n  getParams() {\n    return __privateGet$1(this, _params$1);\n  }\n  getDescription() {\n    if (__privateGet$1(this, _id)) {\n      return __privateGet$1(this, _id);\n    }\n    return `created at '${__privateGet$1(this, _creationSite)}'`;\n  }\n  setId(id) {\n    if (!id) {\n      throw new Error(`${__privateGet$1(this, _name, name_get)} id must be a non-empty string`);\n    }\n    if (__privateGet$1(this, _id)) {\n      throw new Error(\n        `${__privateGet$1(this, _name, name_get)} was referenced twice as both '${__privateGet$1(this, _id)}' and '${id}'`\n      );\n    }\n    __privateSet$1(this, _id, id);\n  }\n  toString() {\n    return `${__privateGet$1(this, _name, name_get)}{${this.getDescription()}}`;\n  }\n}\n_id = new WeakMap();\n_params$1 = new WeakMap();\n_creationSite = new WeakMap();\n_name = new WeakSet();\nname_get = function() {\n  return this.$$type.slice(\"@backstage/\".length);\n};\nfunction createRouteRef(config) {\n  return new RouteRefImpl(\n    config == null ? void 0 : config.params,\n    describeParentCallSite()\n  );\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _params, _parent;\nconst PARAM_PATTERN = /^\\w+$/;\nfunction toInternalSubRouteRef(resource) {\n  const r = resource;\n  if (r.$$type !== \"@backstage/SubRouteRef\") {\n    throw new Error(`Invalid SubRouteRef, bad type '${r.$$type}'`);\n  }\n  return r;\n}\nclass SubRouteRefImpl {\n  constructor(path, params, parent) {\n    this.path = path;\n    __publicField$1(this, \"$$type\", \"@backstage/SubRouteRef\");\n    __publicField$1(this, \"version\", \"v1\");\n    __privateAdd(this, _params, void 0);\n    __privateAdd(this, _parent, void 0);\n    __privateSet(this, _params, params);\n    __privateSet(this, _parent, parent);\n  }\n  getParams() {\n    return __privateGet(this, _params);\n  }\n  getParent() {\n    return __privateGet(this, _parent);\n  }\n  getDescription() {\n    const parent = toInternalRouteRef(__privateGet(this, _parent));\n    return `at ${this.path} with parent ${parent.getDescription()}`;\n  }\n  toString() {\n    return `SubRouteRef{${this.getDescription()}}`;\n  }\n}\n_params = new WeakMap();\n_parent = new WeakMap();\nfunction createSubRouteRef(config) {\n  const { path, parent } = config;\n  const internalParent = toInternalRouteRef(parent);\n  const parentParams = internalParent.getParams();\n  const pathParams = path.split(\"/\").filter((p) => p.startsWith(\":\")).map((p) => p.substring(1));\n  const params = [...parentParams, ...pathParams];\n  if (parentParams.some((p) => pathParams.includes(p))) {\n    throw new Error(\n      \"SubRouteRef may not have params that overlap with its parent\"\n    );\n  }\n  if (!path.startsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must start with '/', got '${path}'`);\n  }\n  if (path.endsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must not end with '/', got '${path}'`);\n  }\n  for (const param of pathParams) {\n    if (!PARAM_PATTERN.test(param)) {\n      throw new Error(`SubRouteRef path has invalid param, got '${param}'`);\n    }\n  }\n  const subRouteRef = new SubRouteRefImpl(\n    path,\n    params,\n    parent\n  );\n  return subRouteRef;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction toInternalExternalRouteRef(resource) {\n  const r = resource;\n  if (r.$$type !== \"@backstage/ExternalRouteRef\") {\n    throw new Error(`Invalid ExternalRouteRef, bad type '${r.$$type}'`);\n  }\n  return r;\n}\nclass ExternalRouteRefImpl extends RouteRefImpl {\n  constructor(optional, params = [], creationSite) {\n    super(params, creationSite);\n    this.optional = optional;\n    this.params = params;\n    __publicField(this, \"$$type\", \"@backstage/ExternalRouteRef\");\n  }\n}\nfunction createExternalRouteRef(options) {\n  return new ExternalRouteRefImpl(\n    Boolean(options == null ? void 0 : options.optional),\n    options == null ? void 0 : options.params,\n    describeParentCallSite()\n  );\n}\n\nfunction convertLegacyRouteRef(ref) {\n  if (\"$$type\" in ref) {\n    return ref;\n  }\n  const type = ref[routeRefType];\n  if (type === \"absolute\") {\n    const legacyRef = ref;\n    const newRef = toInternalRouteRef(\n      createRouteRef({\n        params: legacyRef.params\n      })\n    );\n    return Object.assign(legacyRef, {\n      $$type: \"@backstage/RouteRef\",\n      version: \"v1\",\n      T: newRef.T,\n      getParams() {\n        return newRef.getParams();\n      },\n      getDescription() {\n        return newRef.getDescription();\n      },\n      setId(id) {\n        newRef.setId(id);\n      },\n      toString() {\n        return newRef.toString();\n      }\n    });\n  }\n  if (type === \"sub\") {\n    const legacyRef = ref;\n    const newRef = toInternalSubRouteRef(\n      createSubRouteRef({\n        path: legacyRef.path,\n        parent: convertLegacyRouteRef(legacyRef.parent)\n      })\n    );\n    return Object.assign(legacyRef, {\n      $$type: \"@backstage/SubRouteRef\",\n      version: \"v1\",\n      T: newRef.T,\n      getParams() {\n        return newRef.getParams();\n      },\n      getParent() {\n        return newRef.getParent();\n      },\n      getDescription() {\n        return newRef.getDescription();\n      },\n      toString() {\n        return newRef.toString();\n      }\n    });\n  }\n  if (type === \"external\") {\n    const legacyRef = ref;\n    const newRef = toInternalExternalRouteRef(\n      createExternalRouteRef({\n        params: legacyRef.params,\n        optional: legacyRef.optional\n      })\n    );\n    return Object.assign(legacyRef, {\n      $$type: \"@backstage/ExternalRouteRef\",\n      version: \"v1\",\n      T: newRef.T,\n      optional: newRef.optional,\n      getParams() {\n        return newRef.getParams();\n      },\n      getDescription() {\n        return newRef.getDescription();\n      },\n      setId(id) {\n        newRef.setId(id);\n      },\n      toString() {\n        return newRef.toString();\n      }\n    });\n  }\n  throw new Error(`Failed to convert legacy route ref, unknown type '${type}'`);\n}\n\nexport { appLanguageApiRef, convertLegacyRouteRef, createTranslationMessages, createTranslationRef, createTranslationResource, translationApiRef, useTranslationRef };\n//# sourceMappingURL=alpha.esm.js.map\n","import React from 'react';\nimport { useVersionedContext, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\n\nfunction useApiHolder() {\n  const versionedHolder = useVersionedContext(\"api-context\");\n  if (!versionedHolder) {\n    throw new Error(\"API context is not available\");\n  }\n  const apiHolder = versionedHolder.atVersion(1);\n  if (!apiHolder) {\n    throw new Error(\"ApiContext v1 not available\");\n  }\n  return apiHolder;\n}\nfunction useApi(apiRef) {\n  const apiHolder = useApiHolder();\n  const api = apiHolder.get(apiRef);\n  if (!api) {\n    throw new Error(`No implementation available for ${apiRef}`);\n  }\n  return api;\n}\nfunction withApis(apis) {\n  return function withApisWrapper(WrappedComponent) {\n    const Hoc = (props) => {\n      const apiHolder = useApiHolder();\n      const impls = {};\n      for (const key in apis) {\n        if (apis.hasOwnProperty(key)) {\n          const ref = apis[key];\n          const api = apiHolder.get(ref);\n          if (!api) {\n            throw new Error(`No implementation available for ${ref}`);\n          }\n          impls[key] = api;\n        }\n      }\n      return /* @__PURE__ */ React.createElement(WrappedComponent, { ...props, ...impls });\n    };\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    Hoc.displayName = `withApis(${displayName})`;\n    return Hoc;\n  };\n}\n\nclass ApiRefImpl {\n  constructor(config) {\n    this.config = config;\n    const valid = config.id.split(\".\").flatMap((part) => part.split(\"-\")).every((part) => part.match(/^[a-z][a-z0-9]*$/));\n    if (!valid) {\n      throw new Error(\n        `API id must only contain period separated lowercase alphanum tokens with dashes, got '${config.id}'`\n      );\n    }\n  }\n  get id() {\n    return this.config.id;\n  }\n  // Utility for getting type of an api, using `typeof apiRef.T`\n  get T() {\n    throw new Error(`tried to read ApiRef.T of ${this}`);\n  }\n  toString() {\n    return `apiRef{${this.config.id}}`;\n  }\n}\nfunction createApiRef(config) {\n  return new ApiRefImpl(config);\n}\n\nvar SessionState = /* @__PURE__ */ ((SessionState2) => {\n  SessionState2[\"SignedIn\"] = \"SignedIn\";\n  SessionState2[\"SignedOut\"] = \"SignedOut\";\n  return SessionState2;\n})(SessionState || {});\nconst googleAuthApiRef = createApiRef({\n  id: \"core.auth.google\"\n});\nconst githubAuthApiRef = createApiRef({\n  id: \"core.auth.github\"\n});\nconst oktaAuthApiRef = createApiRef({\n  id: \"core.auth.okta\"\n});\nconst gitlabAuthApiRef = createApiRef({\n  id: \"core.auth.gitlab\"\n});\nconst microsoftAuthApiRef = createApiRef({\n  id: \"core.auth.microsoft\"\n});\nconst oneloginAuthApiRef = createApiRef({\n  id: \"core.auth.onelogin\"\n});\nconst bitbucketAuthApiRef = createApiRef({\n  id: \"core.auth.bitbucket\"\n});\nconst bitbucketServerAuthApiRef = createApiRef({\n  id: \"core.auth.bitbucket-server\"\n});\nconst atlassianAuthApiRef = createApiRef({\n  id: \"core.auth.atlassian\"\n});\n\nconst alertApiRef = createApiRef({\n  id: \"core.alert\"\n});\n\nconst analyticsApiRef = createApiRef({\n  id: \"core.analytics\"\n});\n\nconst appThemeApiRef = createApiRef({\n  id: \"core.apptheme\"\n});\n\nconst configApiRef = createApiRef({\n  id: \"core.config\"\n});\n\nconst discoveryApiRef = createApiRef({\n  id: \"core.discovery\"\n});\n\nconst errorApiRef = createApiRef({\n  id: \"core.error\"\n});\n\nvar FeatureFlagState = /* @__PURE__ */ ((FeatureFlagState2) => {\n  FeatureFlagState2[FeatureFlagState2[\"None\"] = 0] = \"None\";\n  FeatureFlagState2[FeatureFlagState2[\"Active\"] = 1] = \"Active\";\n  return FeatureFlagState2;\n})(FeatureFlagState || {});\nconst featureFlagsApiRef = createApiRef({\n  id: \"core.featureflags\"\n});\n\nconst fetchApiRef = createApiRef({\n  id: \"core.fetch\"\n});\n\nconst identityApiRef = createApiRef({\n  id: \"core.identity\"\n});\n\nconst oauthRequestApiRef = createApiRef({\n  id: \"core.oauthrequest\"\n});\n\nconst storageApiRef = createApiRef({\n  id: \"core.storage\"\n});\n\nconst routeRefType = getOrCreateGlobalSingleton(\n  \"route-ref-type\",\n  () => Symbol(\"route-ref-type\")\n);\n\nexport { FeatureFlagState as F, SessionState as S, analyticsApiRef as a, useApiHolder as b, createApiRef as c, githubAuthApiRef as d, gitlabAuthApiRef as e, featureFlagsApiRef as f, googleAuthApiRef as g, oneloginAuthApiRef as h, bitbucketAuthApiRef as i, bitbucketServerAuthApiRef as j, atlassianAuthApiRef as k, alertApiRef as l, microsoftAuthApiRef as m, appThemeApiRef as n, oktaAuthApiRef as o, configApiRef as p, discoveryApiRef as q, routeRefType as r, errorApiRef as s, fetchApiRef as t, useApi as u, identityApiRef as v, withApis as w, oauthRequestApiRef as x, storageApiRef as y };\n//# sourceMappingURL=types-08c0ee05.esm.js.map\n","import { createVersionedContext, createVersionedValueMap, getOrCreateGlobalSingleton, useVersionedContext } from '@backstage/version-bridge';\nimport React, { useContext, useRef, useMemo, lazy, Suspense, useEffect, Children, isValidElement, Fragment } from 'react';\nimport { u as useApi, a as analyticsApiRef, r as routeRefType, f as featureFlagsApiRef } from './esm/types-08c0ee05.esm.js';\nexport { F as FeatureFlagState, S as SessionState, l as alertApiRef, a as analyticsApiRef, n as appThemeApiRef, k as atlassianAuthApiRef, i as bitbucketAuthApiRef, j as bitbucketServerAuthApiRef, p as configApiRef, c as createApiRef, q as discoveryApiRef, s as errorApiRef, f as featureFlagsApiRef, t as fetchApiRef, d as githubAuthApiRef, e as gitlabAuthApiRef, g as googleAuthApiRef, v as identityApiRef, m as microsoftAuthApiRef, x as oauthRequestApiRef, o as oktaAuthApiRef, h as oneloginAuthApiRef, y as storageApiRef, u as useApi, b as useApiHolder, w as withApis } from './esm/types-08c0ee05.esm.js';\nimport { useLocation, useParams } from 'react-router-dom';\n\nconst AnalyticsReactContext = createVersionedContext(\"analytics-context\");\nconst useAnalyticsContext = () => {\n  const theContext = useContext(AnalyticsReactContext);\n  if (theContext === void 0) {\n    return {\n      routeRef: \"unknown\",\n      pluginId: \"root\",\n      extension: \"App\"\n    };\n  }\n  const theValue = theContext.atVersion(1);\n  if (theValue === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return theValue;\n};\nconst AnalyticsContext = (options) => {\n  const { attributes, children } = options;\n  const parentValues = useAnalyticsContext();\n  const combinedValue = {\n    ...parentValues,\n    ...attributes\n  };\n  const versionedCombinedValue = createVersionedValueMap({ 1: combinedValue });\n  return /* @__PURE__ */ React.createElement(AnalyticsReactContext.Provider, { value: versionedCombinedValue }, children);\n};\n\nfunction createApiFactory(factory, instance) {\n  if (\"id\" in factory) {\n    return {\n      api: factory,\n      deps: {},\n      factory: () => instance\n    };\n  }\n  return factory;\n}\n\nconst globalEvents = getOrCreateGlobalSingleton(\n  \"core-plugin-api:analytics-tracker-events\",\n  () => ({\n    mostRecentGatheredNavigation: void 0,\n    mostRecentRoutableExtensionRender: void 0,\n    beforeUnloadRegistered: false\n  })\n);\nconst routableExtensionRenderedEvent = \"_ROUTABLE-EXTENSION-RENDERED\";\nclass Tracker {\n  constructor(analyticsApi, context = {\n    routeRef: \"unknown\",\n    pluginId: \"root\",\n    extension: \"App\"\n  }) {\n    this.analyticsApi = analyticsApi;\n    this.context = context;\n    if (!globalEvents.beforeUnloadRegistered) {\n      addEventListener(\n        \"beforeunload\",\n        () => {\n          if (globalEvents.mostRecentGatheredNavigation) {\n            this.analyticsApi.captureEvent({\n              ...globalEvents.mostRecentGatheredNavigation,\n              ...globalEvents.mostRecentRoutableExtensionRender\n            });\n            globalEvents.mostRecentGatheredNavigation = void 0;\n            globalEvents.mostRecentRoutableExtensionRender = void 0;\n          }\n        },\n        { once: true, passive: true }\n      );\n      globalEvents.beforeUnloadRegistered = true;\n    }\n  }\n  setContext(context) {\n    this.context = context;\n  }\n  captureEvent(action, subject, {\n    value,\n    attributes\n  } = {}) {\n    const { _routeNodeType, ...context } = this.context;\n    if (action === routableExtensionRenderedEvent) {\n      if (globalEvents.mostRecentGatheredNavigation) {\n        globalEvents.mostRecentRoutableExtensionRender = {\n          context: {\n            ...context,\n            extension: \"App\"\n          }\n        };\n      }\n      return;\n    }\n    if (globalEvents.mostRecentGatheredNavigation) {\n      try {\n        this.analyticsApi.captureEvent({\n          ...globalEvents.mostRecentGatheredNavigation,\n          ...globalEvents.mostRecentRoutableExtensionRender\n        });\n      } catch (e) {\n        console.warn(\"Error during analytics event capture. %o\", e);\n      }\n      globalEvents.mostRecentGatheredNavigation = void 0;\n      globalEvents.mostRecentRoutableExtensionRender = void 0;\n    }\n    if (action === \"navigate\" && _routeNodeType === \"gathered\" && context.pluginId === \"root\") {\n      globalEvents.mostRecentGatheredNavigation = {\n        action,\n        subject,\n        value,\n        attributes,\n        context\n      };\n      return;\n    }\n    try {\n      this.analyticsApi.captureEvent({\n        action,\n        subject,\n        value,\n        attributes,\n        context\n      });\n    } catch (e) {\n      console.warn(\"Error during analytics event capture. %o\", e);\n    }\n  }\n}\n\nfunction useAnalyticsApi() {\n  try {\n    return useApi(analyticsApiRef);\n  } catch {\n    return { captureEvent: () => {\n    } };\n  }\n}\nfunction useAnalytics() {\n  const trackerRef = useRef(null);\n  const context = useAnalyticsContext();\n  const analyticsApi = useAnalyticsApi();\n  function getTracker() {\n    if (trackerRef.current === null) {\n      trackerRef.current = new Tracker(analyticsApi);\n    }\n    return trackerRef.current;\n  }\n  const tracker = getTracker();\n  tracker.setContext(context);\n  return tracker;\n}\n\nconst useApp = () => {\n  const versionedContext = useVersionedContext(\n    \"app-context\"\n  );\n  if (!versionedContext) {\n    throw new Error(\"App context is not available\");\n  }\n  const appContext = versionedContext.atVersion(1);\n  if (!appContext) {\n    throw new Error(\"AppContext v1 not available\");\n  }\n  return appContext;\n};\n\nconst globalStore = getOrCreateGlobalSingleton(\n  \"component-data-store\",\n  () => /* @__PURE__ */ new WeakMap()\n);\nconst componentDataKey = \"__backstage_data\";\nfunction attachComponentData(component, type, data) {\n  var _a;\n  const dataComponent = component;\n  let container = (_a = dataComponent[componentDataKey]) != null ? _a : globalStore.get(component);\n  if (!container) {\n    container = { map: /* @__PURE__ */ new Map() };\n    Object.defineProperty(dataComponent, componentDataKey, {\n      enumerable: false,\n      configurable: true,\n      writable: false,\n      value: container\n    });\n    globalStore.set(component, container);\n  }\n  if (container.map.has(type)) {\n    const name = component.displayName || component.name;\n    throw new Error(\n      `Attempted to attach duplicate data \"${type}\" to component \"${name}\"`\n    );\n  }\n  container.map.set(type, data);\n}\nfunction getComponentData(node, type) {\n  var _a;\n  if (!node) {\n    return void 0;\n  }\n  const component = node.type;\n  if (!component) {\n    return void 0;\n  }\n  const container = (_a = component[componentDataKey]) != null ? _a : globalStore.get(component);\n  if (!container) {\n    return void 0;\n  }\n  return container.map.get(type);\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar _a$2;\nclass RouteRefImpl {\n  constructor(id, params) {\n    this.id = id;\n    this.params = params;\n    __publicField$3(this, _a$2, \"absolute\");\n  }\n  get title() {\n    return this.id;\n  }\n  toString() {\n    return `routeRef{type=absolute,id=${this.id}}`;\n  }\n}\n_a$2 = routeRefType;\nfunction createRouteRef(config) {\n  var _a2;\n  return new RouteRefImpl(\n    config.id,\n    (_a2 = config.params) != null ? _a2 : []\n  );\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar _a$1;\nconst PARAM_PATTERN = /^\\w+$/;\nclass SubRouteRefImpl {\n  constructor(id, path, parent, params) {\n    this.id = id;\n    this.path = path;\n    this.parent = parent;\n    this.params = params;\n    __publicField$2(this, _a$1, \"sub\");\n  }\n  toString() {\n    return `routeRef{type=sub,id=${this.id}}`;\n  }\n}\n_a$1 = routeRefType;\nfunction createSubRouteRef(config) {\n  const { id, path, parent } = config;\n  const pathParams = path.split(\"/\").filter((p) => p.startsWith(\":\")).map((p) => p.substring(1));\n  const params = [...parent.params, ...pathParams];\n  if (parent.params.some((p) => pathParams.includes(p))) {\n    throw new Error(\n      \"SubRouteRef may not have params that overlap with its parent\"\n    );\n  }\n  if (!path.startsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must start with '/', got '${path}'`);\n  }\n  if (path.endsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must not end with '/', got '${path}'`);\n  }\n  for (const param of pathParams) {\n    if (!PARAM_PATTERN.test(param)) {\n      throw new Error(`SubRouteRef path has invalid param, got '${param}'`);\n    }\n  }\n  const subRouteRef = new SubRouteRefImpl(\n    id,\n    path,\n    parent,\n    params\n  );\n  return subRouteRef;\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar _a;\nclass ExternalRouteRefImpl {\n  constructor(id, params, optional) {\n    this.id = id;\n    this.params = params;\n    this.optional = optional;\n    __publicField$1(this, _a, \"external\");\n  }\n  toString() {\n    return `routeRef{type=external,id=${this.id}}`;\n  }\n}\n_a = routeRefType;\nfunction createExternalRouteRef(options) {\n  var _a2;\n  return new ExternalRouteRefImpl(\n    options.id,\n    (_a2 = options.params) != null ? _a2 : [],\n    Boolean(options.optional)\n  );\n}\n\nfunction useRouteRef(routeRef) {\n  const { pathname } = useLocation();\n  const versionedContext = useVersionedContext(\n    \"routing-context\"\n  );\n  if (!versionedContext) {\n    throw new Error(\"Routing context is not available\");\n  }\n  const resolver = versionedContext.atVersion(1);\n  const routeFunc = useMemo(\n    () => resolver && resolver.resolve(routeRef, { pathname }),\n    [resolver, routeRef, pathname]\n  );\n  if (!versionedContext) {\n    throw new Error(\"useRouteRef used outside of routing context\");\n  }\n  if (!resolver) {\n    throw new Error(\"RoutingContext v1 not available\");\n  }\n  const isOptional = \"optional\" in routeRef && routeRef.optional;\n  if (!routeFunc && !isOptional) {\n    throw new Error(`No path for ${routeRef}`);\n  }\n  return routeFunc;\n}\n\nfunction useRouteRefParams(_routeRef) {\n  return useParams();\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass PluginErrorBoundary extends React.Component {\n  constructor() {\n    super(...arguments);\n    __publicField(this, \"state\", { error: void 0 });\n    __publicField(this, \"handleErrorReset\", () => {\n      this.setState({ error: void 0 });\n    });\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  render() {\n    const { error } = this.state;\n    const { app, plugin } = this.props;\n    const { ErrorBoundaryFallback } = app.getComponents();\n    if (error) {\n      return /* @__PURE__ */ React.createElement(\n        ErrorBoundaryFallback,\n        {\n          error,\n          resetError: this.handleErrorReset,\n          plugin\n        }\n      );\n    }\n    return this.props.children;\n  }\n}\n\nfunction createRoutableExtension(options) {\n  const { component, mountPoint, name } = options;\n  return createReactExtension({\n    component: {\n      lazy: () => component().then(\n        (InnerComponent) => {\n          const RoutableExtensionWrapper = (props) => {\n            const analytics = useAnalytics();\n            try {\n              useRouteRef(mountPoint);\n            } catch (error) {\n              if (typeof error === \"object\" && error !== null) {\n                const { message } = error;\n                if (typeof message === \"string\" && message.startsWith(\"No path for \")) {\n                  throw new Error(\n                    `Routable extension component with mount point ${mountPoint} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`\n                  );\n                }\n              }\n              throw error;\n            }\n            useEffect(() => {\n              analytics.captureEvent(routableExtensionRenderedEvent, \"\");\n            }, [analytics]);\n            return /* @__PURE__ */ React.createElement(InnerComponent, { ...props });\n          };\n          const componentName = name || InnerComponent.displayName || InnerComponent.name || \"LazyComponent\";\n          RoutableExtensionWrapper.displayName = `RoutableExtension(${componentName})`;\n          return RoutableExtensionWrapper;\n        },\n        (error) => {\n          const RoutableExtensionWrapper = (_) => {\n            const app = useApp();\n            const { BootErrorPage } = app.getComponents();\n            return /* @__PURE__ */ React.createElement(BootErrorPage, { step: \"load-chunk\", error });\n          };\n          return RoutableExtensionWrapper;\n        }\n      )\n    },\n    data: {\n      \"core.mountPoint\": mountPoint\n    },\n    name\n  });\n}\nfunction createComponentExtension(options) {\n  const { component, name } = options;\n  return createReactExtension({ component, name });\n}\nfunction createReactExtension(options) {\n  const { data = {}, name } = options;\n  if (!name) {\n    console.warn(\n      \"Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.\"\n    );\n  }\n  let Component;\n  if (\"lazy\" in options.component) {\n    const lazyLoader = options.component.lazy;\n    Component = lazy(\n      () => lazyLoader().then((component) => ({ default: component }))\n    );\n  } else {\n    Component = options.component.sync;\n  }\n  const componentName = name || Component.displayName || Component.name || \"Component\";\n  return {\n    expose(plugin) {\n      const Result = (props) => {\n        const app = useApp();\n        const { Progress } = app.getComponents();\n        const mountPoint = data == null ? void 0 : data[\"core.mountPoint\"];\n        return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(PluginErrorBoundary, { app, plugin }, /* @__PURE__ */ React.createElement(\n          AnalyticsContext,\n          {\n            attributes: {\n              pluginId: plugin.getId(),\n              ...name && { extension: name },\n              ...mountPoint && { routeRef: mountPoint.id }\n            }\n          },\n          /* @__PURE__ */ React.createElement(Component, { ...props })\n        )));\n      };\n      attachComponentData(Result, \"core.plugin\", plugin);\n      attachComponentData(Result, \"core.extensionName\", name);\n      for (const [key, value] of Object.entries(data)) {\n        attachComponentData(Result, key, value);\n      }\n      Result.displayName = `Extension(${componentName})`;\n      return Result;\n    }\n  };\n}\n\nfunction selectChildren(rootNode, featureFlagsApi, selector, strictError) {\n  return Children.toArray(rootNode).flatMap((node) => {\n    if (!isValidElement(node)) {\n      return [];\n    }\n    if (node.type === Fragment) {\n      return selectChildren(\n        node.props.children,\n        featureFlagsApi,\n        selector,\n        strictError\n      );\n    }\n    if (getComponentData(node, \"core.featureFlagged\")) {\n      const props = node.props;\n      const isEnabled = \"with\" in props ? featureFlagsApi.isActive(props.with) : !featureFlagsApi.isActive(props.without);\n      if (isEnabled) {\n        return selectChildren(\n          node.props.children,\n          featureFlagsApi,\n          selector,\n          strictError\n        );\n      }\n      return [];\n    }\n    if (selector === void 0 || selector(node)) {\n      return [node];\n    }\n    if (strictError) {\n      throw new Error(strictError);\n    }\n    return selectChildren(\n      node.props.children,\n      featureFlagsApi,\n      selector,\n      strictError\n    );\n  });\n}\nclass Collection {\n  constructor(node, featureFlagsApi) {\n    this.node = node;\n    this.featureFlagsApi = featureFlagsApi;\n  }\n  selectByComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      (node) => getComponentData(node, query.key) !== void 0,\n      query.withStrictError\n    );\n    return new Collection(selection, this.featureFlagsApi);\n  }\n  findComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      (node) => getComponentData(node, query.key) !== void 0\n    );\n    return selection.map((node) => getComponentData(node, query.key)).filter((data) => data !== void 0);\n  }\n  getElements() {\n    return selectChildren(this.node, this.featureFlagsApi);\n  }\n}\nfunction useElementFilter(node, filterFn, dependencies = []) {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const elements = new Collection(node, featureFlagsApi);\n  return useMemo(() => filterFn(elements), [node, ...dependencies]);\n}\n\nclass PluginImpl {\n  constructor(config) {\n    this.config = config;\n  }\n  getId() {\n    return this.config.id;\n  }\n  getApis() {\n    var _a;\n    return (_a = this.config.apis) != null ? _a : [];\n  }\n  getFeatureFlags() {\n    var _a, _b;\n    return (_b = (_a = this.config.featureFlags) == null ? void 0 : _a.slice()) != null ? _b : [];\n  }\n  get routes() {\n    var _a;\n    return (_a = this.config.routes) != null ? _a : {};\n  }\n  get externalRoutes() {\n    var _a;\n    return (_a = this.config.externalRoutes) != null ? _a : {};\n  }\n  provide(extension) {\n    return extension.expose(this);\n  }\n  toString() {\n    return `plugin{${this.config.id}}`;\n  }\n}\nfunction createPlugin(config) {\n  return new PluginImpl(config);\n}\n\nexport { AnalyticsContext, attachComponentData, createApiFactory, createComponentExtension, createExternalRouteRef, createPlugin, createReactExtension, createRoutableExtension, createRouteRef, createSubRouteRef, getComponentData, useAnalytics, useApp, useElementFilter, useRouteRef, useRouteRefParams };\n//# sourceMappingURL=index.esm.js.map\n","import { serializeError as serializeError$1, deserializeError as deserializeError$1 } from 'serialize-error';\n\nfunction isError(value) {\n  if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n    return false;\n  }\n  const maybe = value;\n  if (typeof maybe.name !== \"string\" || maybe.name === \"\") {\n    return false;\n  }\n  if (typeof maybe.message !== \"string\") {\n    return false;\n  }\n  return true;\n}\nfunction assertError(value) {\n  if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n    throw new Error(`Encountered invalid error, not an object, got '${value}'`);\n  }\n  const maybe = value;\n  if (typeof maybe.name !== \"string\" || maybe.name === \"\") {\n    throw new Error(`Encountered error object without a name, got '${value}'`);\n  }\n  if (typeof maybe.message !== \"string\") {\n    throw new Error(\n      `Encountered error object without a message, got '${value}'`\n    );\n  }\n}\n\nfunction serializeError(error, options) {\n  const serialized = serializeError$1(error);\n  const result = {\n    name: \"Unknown\",\n    message: \"<no reason given>\",\n    ...serialized\n  };\n  if (!(options == null ? void 0 : options.includeStack)) {\n    delete result.stack;\n  }\n  return result;\n}\nfunction deserializeError(data) {\n  const result = deserializeError$1(data);\n  if (!data.stack) {\n    result.stack = void 0;\n  }\n  return result;\n}\nfunction stringifyError(error) {\n  if (isError(error)) {\n    const str = String(error);\n    return str !== \"[object Object]\" ? str : `${error.name}: ${error.message}`;\n  }\n  return `unknown error '${error}'`;\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass CustomErrorBase extends Error {\n  constructor(message, cause) {\n    var _a;\n    let fullMessage = message;\n    if (cause !== void 0) {\n      const causeStr = stringifyError(cause);\n      if (fullMessage) {\n        fullMessage += `; caused by ${causeStr}`;\n      } else {\n        fullMessage = `caused by ${causeStr}`;\n      }\n    }\n    super(fullMessage);\n    /**\n     * An inner error that caused this error to be thrown, if any.\n     */\n    __publicField$2(this, \"cause\");\n    (_a = Error.captureStackTrace) == null ? void 0 : _a.call(Error, this, this.constructor);\n    if (!this.name || this.name === \"Error\") {\n      const baseName = this.constructor.name;\n      if (baseName !== \"Error\") {\n        this.name = this.constructor.name;\n      }\n    }\n    this.cause = isError(cause) ? cause : void 0;\n  }\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass InputError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"InputError\");\n  }\n}\nclass AuthenticationError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"AuthenticationError\");\n  }\n}\nclass NotAllowedError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"NotAllowedError\");\n  }\n}\nclass NotFoundError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"NotFoundError\");\n  }\n}\nclass ConflictError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"ConflictError\");\n  }\n}\nclass NotModifiedError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"NotModifiedError\");\n  }\n}\nclass NotImplementedError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"NotImplementedError\");\n  }\n}\nclass ServiceUnavailableError extends CustomErrorBase {\n}\nclass ForwardedError extends CustomErrorBase {\n  constructor(message, cause) {\n    super(message, cause);\n    this.name = isError(cause) ? cause.name : \"Error\";\n  }\n}\n\nasync function parseErrorResponseBody(response) {\n  var _a;\n  try {\n    const text = await response.text();\n    if (text) {\n      if ((_a = response.headers.get(\"content-type\")) == null ? void 0 : _a.startsWith(\"application/json\")) {\n        try {\n          const body = JSON.parse(text);\n          if (body.error && body.response) {\n            return body;\n          }\n        } catch {\n        }\n      }\n      return {\n        error: {\n          name: \"Error\",\n          message: `Request failed with status ${response.status} ${response.statusText}, ${text}`\n        },\n        response: {\n          statusCode: response.status\n        }\n      };\n    }\n  } catch {\n  }\n  return {\n    error: {\n      name: \"Error\",\n      message: `Request failed with status ${response.status} ${response.statusText}`\n    },\n    response: {\n      statusCode: response.status\n    }\n  };\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ResponseError extends Error {\n  constructor(props) {\n    super(props.message);\n    /**\n     * The actual response, as seen by the client.\n     *\n     * Note that the body of this response is always consumed. Its parsed form is\n     * in the `body` field.\n     */\n    __publicField(this, \"response\");\n    /**\n     * The parsed JSON error body, as sent by the server.\n     */\n    __publicField(this, \"body\");\n    /**\n     * The Error cause, as seen by the remote server. This is parsed out of the\n     * JSON error body.\n     *\n     * This error always has the plain Error constructor, however all\n     * serializable enumerable fields on the remote error including its name are\n     * preserved. Therefore, if you want to check the error type, use its name\n     * property rather than checking typeof or its constructor or prototype.\n     */\n    __publicField(this, \"cause\");\n    this.name = \"ResponseError\";\n    this.response = props.response;\n    this.body = props.data;\n    this.cause = props.cause;\n  }\n  /**\n   * Constructs a ResponseError based on a failed response.\n   *\n   * Assumes that the response has already been checked to be not ok. This\n   * function consumes the body of the response, and assumes that it hasn't\n   * been consumed before.\n   */\n  static async fromResponse(response) {\n    const data = await parseErrorResponseBody(response);\n    const status = data.response.statusCode || response.status;\n    const statusText = data.error.name || response.statusText;\n    const message = `Request failed with ${status} ${statusText}`;\n    const cause = deserializeError(data.error);\n    return new ResponseError({\n      message,\n      response,\n      data,\n      cause\n    });\n  }\n}\n\nexport { AuthenticationError, ConflictError, CustomErrorBase, ForwardedError, InputError, NotAllowedError, NotFoundError, NotImplementedError, NotModifiedError, ResponseError, ServiceUnavailableError, assertError, deserializeError, isError, parseErrorResponseBody, serializeError, stringifyError };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createApiFactory, githubAuthApiRef, gitlabAuthApiRef, microsoftAuthApiRef, bitbucketAuthApiRef, useApp } from '@backstage/core-plugin-api';\nimport { ScmIntegrations } from '@backstage/integration';\nimport CodeIcon from '@material-ui/icons/Code';\nimport React from 'react';\n\nconst scmAuthApiRef = createApiRef({\n  id: \"core.scmauth\"\n});\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _providers, _api, _host, _scopeMapping, _providerName;\nclass ScmAuthMux {\n  constructor(providers) {\n    __privateAdd(this, _providers, void 0);\n    __privateSet(this, _providers, providers);\n  }\n  async getCredentials(options) {\n    const url = new URL(options.url);\n    const provider = __privateGet(this, _providers).find((p) => p.isUrlSupported(url));\n    if (!provider) {\n      throw new Error(\n        `No auth provider available for '${options.url}', see https://backstage.io/link?scm-auth`\n      );\n    }\n    return provider.getCredentials(options);\n  }\n}\n_providers = new WeakMap();\nconst _ScmAuth = class _ScmAuth {\n  constructor(providerName, api, host, scopeMapping) {\n    __privateAdd(this, _api, void 0);\n    __privateAdd(this, _host, void 0);\n    __privateAdd(this, _scopeMapping, void 0);\n    __privateAdd(this, _providerName, void 0);\n    __privateSet(this, _api, api);\n    __privateSet(this, _host, host);\n    __privateSet(this, _scopeMapping, scopeMapping);\n    __privateSet(this, _providerName, providerName);\n  }\n  /**\n   * Creates an API factory that enables auth for each of the default SCM providers.\n   */\n  static createDefaultApiFactory() {\n    return createApiFactory({\n      api: scmAuthApiRef,\n      deps: {\n        github: githubAuthApiRef,\n        gitlab: gitlabAuthApiRef,\n        azure: microsoftAuthApiRef,\n        bitbucket: bitbucketAuthApiRef\n      },\n      factory: ({ github, gitlab, azure, bitbucket }) => _ScmAuth.merge(\n        _ScmAuth.forGithub(github),\n        _ScmAuth.forGitlab(gitlab),\n        _ScmAuth.forAzure(azure),\n        _ScmAuth.forBitbucket(bitbucket)\n      )\n    });\n  }\n  /**\n   * Creates a general purpose ScmAuth instance with a custom scope mapping.\n   */\n  static forAuthApi(authApi, options) {\n    return new _ScmAuth(\"generic\", authApi, options.host, options.scopeMapping);\n  }\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards GitHub.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `github.com`.\n   *\n   * The default scopes are:\n   *\n   * `repo read:org read:user`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `gist`\n   */\n  static forGithub(githubAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"github.com\";\n    return new _ScmAuth(\"github\", githubAuthApi, host, {\n      default: [\"repo\", \"read:org\", \"read:user\"],\n      repoWrite: [\"gist\"]\n    });\n  }\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards GitLab.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `gitlab.com`.\n   *\n   * The default scopes are:\n   *\n   * `read_user read_api read_repository`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `write_repository api`\n   */\n  static forGitlab(gitlabAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"gitlab.com\";\n    return new _ScmAuth(\"gitlab\", gitlabAuthApi, host, {\n      default: [\"read_user\", \"read_api\", \"read_repository\"],\n      repoWrite: [\"write_repository\", \"api\"]\n    });\n  }\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards Azure.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `dev.azure.com`.\n   *\n   * The default scopes are:\n   *\n   * `vso.build vso.code vso.graph vso.project vso.profile`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `vso.code_manage`\n   */\n  static forAzure(microsoftAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"dev.azure.com\";\n    return new _ScmAuth(\"azure\", microsoftAuthApi, host, {\n      default: [\n        \"vso.build\",\n        \"vso.code\",\n        \"vso.graph\",\n        \"vso.project\",\n        \"vso.profile\"\n      ],\n      repoWrite: [\"vso.code_manage\"]\n    });\n  }\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards Bitbucket.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `bitbucket.org`.\n   *\n   * The default scopes are:\n   *\n   * `account team pullrequest snippet issue`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `pullrequest:write snippet:write issue:write`\n   */\n  static forBitbucket(bitbucketAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"bitbucket.org\";\n    return new _ScmAuth(\"bitbucket\", bitbucketAuthApi, host, {\n      default: [\"account\", \"team\", \"pullrequest\", \"snippet\", \"issue\"],\n      repoWrite: [\"pullrequest:write\", \"snippet:write\", \"issue:write\"]\n    });\n  }\n  /**\n   * Merges together multiple ScmAuth instances into one that\n   * routes requests to the correct instance based on the URL.\n   */\n  static merge(...providers) {\n    return new ScmAuthMux(providers);\n  }\n  /**\n   * Checks whether the implementation is able to provide authentication for the given URL.\n   */\n  isUrlSupported(url) {\n    return url.host === __privateGet(this, _host);\n  }\n  getAdditionalScopesForProvider(additionalScopes) {\n    var _a, _b;\n    if (!(additionalScopes == null ? void 0 : additionalScopes.customScopes) || __privateGet(this, _providerName) === \"generic\") {\n      return [];\n    }\n    return (_b = (_a = additionalScopes.customScopes) == null ? void 0 : _a[__privateGet(this, _providerName)]) != null ? _b : [];\n  }\n  /**\n   * Fetches credentials for the given resource.\n   */\n  async getCredentials(options) {\n    const { url, additionalScope, ...restOptions } = options;\n    const scopes = __privateGet(this, _scopeMapping).default.slice();\n    if (additionalScope == null ? void 0 : additionalScope.repoWrite) {\n      scopes.push(...__privateGet(this, _scopeMapping).repoWrite);\n    }\n    const additionalScopes = this.getAdditionalScopesForProvider(additionalScope);\n    if (additionalScopes.length) {\n      scopes.push(...additionalScopes);\n    }\n    const uniqueScopes = [...new Set(scopes)];\n    const token = await __privateGet(this, _api).getAccessToken(uniqueScopes, restOptions);\n    return {\n      token,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n  }\n};\n_api = new WeakMap();\n_host = new WeakMap();\n_scopeMapping = new WeakMap();\n_providerName = new WeakMap();\nlet ScmAuth = _ScmAuth;\n\nclass ScmIntegrationsApi {\n  /**\n   * Instantiates an {@link @backstage/integration#ScmIntegrationRegistry}.\n   *\n   * @param config - The root of the config hierarchy.\n   */\n  static fromConfig(config) {\n    return ScmIntegrations.fromConfig(config);\n  }\n}\nconst scmIntegrationsApiRef = createApiRef({\n  id: \"integration.scmintegrations\"\n});\n\nconst ScmIntegrationIcon = (props) => {\n  var _a;\n  const { type } = props;\n  const app = useApp();\n  const DefaultIcon = CodeIcon;\n  const Icon = type ? (_a = app.getSystemIcon(type)) != null ? _a : DefaultIcon : DefaultIcon;\n  return /* @__PURE__ */ React.createElement(Icon, null);\n};\n\nexport { ScmAuth, ScmIntegrationIcon, ScmIntegrationsApi, scmAuthApiRef, scmIntegrationsApiRef };\n//# sourceMappingURL=index.esm.js.map\n","import parseGitUrl from 'git-url-parse';\nimport { trimEnd, trimStart } from 'lodash';\nimport { ManagedIdentityCredential, ClientSecretCredential, DefaultAzureCredential } from '@azure/identity';\nimport fetch from 'cross-fetch';\nimport { createAppAuth } from '@octokit/auth-app';\nimport { Octokit } from '@octokit/rest';\nimport { DateTime } from 'luxon';\n\nfunction isValidHost(host) {\n  const check = new URL(\"http://example.com\");\n  check.host = host;\n  return check.host === host;\n}\nfunction isValidUrl(url) {\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}\nfunction basicIntegrations(integrations, getHost) {\n  return {\n    list() {\n      return integrations;\n    },\n    byUrl(url) {\n      try {\n        const parsed = typeof url === \"string\" ? new URL(url) : url;\n        return integrations.find((i) => getHost(i) === parsed.host);\n      } catch {\n        return void 0;\n      }\n    },\n    byHost(host) {\n      return integrations.find((i) => getHost(i) === host);\n    }\n  };\n}\nfunction defaultScmResolveUrl(options) {\n  const { url, base, lineNumber } = options;\n  try {\n    new URL(url);\n    return url;\n  } catch {\n  }\n  let updated;\n  if (url.startsWith(\"/\")) {\n    const { filepath } = parseGitUrl(base);\n    updated = new URL(base);\n    const repoRootPath = trimEnd(\n      updated.pathname.substring(0, updated.pathname.length - filepath.length),\n      \"/\"\n    );\n    updated.pathname = `${repoRootPath}${url}`;\n  } else {\n    updated = new URL(url, base);\n  }\n  updated.search = new URL(base).search;\n  if (lineNumber) {\n    updated.hash = `L${lineNumber}`;\n  }\n  return updated.toString();\n}\n\nconst AMAZON_AWS_HOST = \"amazonaws.com\";\nfunction readAwsS3IntegrationConfig(config) {\n  var _a;\n  const endpoint = config.getOptionalString(\"endpoint\");\n  const s3ForcePathStyle = (_a = config.getOptionalBoolean(\"s3ForcePathStyle\")) != null ? _a : false;\n  let host;\n  let pathname;\n  if (endpoint) {\n    try {\n      const url = new URL(endpoint);\n      host = url.host;\n      pathname = url.pathname;\n    } catch {\n      throw new Error(\n        `invalid awsS3 integration config, endpoint '${endpoint}' is not a valid URL`\n      );\n    }\n    if (pathname !== \"/\") {\n      throw new Error(\n        `invalid awsS3 integration config, endpoints cannot contain path, got '${endpoint}'`\n      );\n    }\n  } else {\n    host = AMAZON_AWS_HOST;\n  }\n  const accessKeyId = config.getOptionalString(\"accessKeyId\");\n  const secretAccessKey = config.getOptionalString(\"secretAccessKey\");\n  const roleArn = config.getOptionalString(\"roleArn\");\n  const externalId = config.getOptionalString(\"externalId\");\n  return {\n    host,\n    endpoint,\n    s3ForcePathStyle,\n    accessKeyId,\n    secretAccessKey,\n    roleArn,\n    externalId\n  };\n}\nfunction readAwsS3IntegrationConfigs(configs) {\n  const result = configs.map(readAwsS3IntegrationConfig);\n  if (!result.some((c) => c.host === AMAZON_AWS_HOST)) {\n    result.push({\n      host: AMAZON_AWS_HOST\n    });\n  }\n  return result;\n}\n\nvar __defProp$d = Object.defineProperty;\nvar __defNormalProp$d = (obj, key, value) => key in obj ? __defProp$d(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$d = (obj, key, value) => {\n  __defNormalProp$d(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _AwsS3Integration = class _AwsS3Integration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"awsS3\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    return resolved;\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\n__publicField$d(_AwsS3Integration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readAwsS3IntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.awsS3\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _AwsS3Integration(c)),\n    (i) => i.config.host\n  );\n});\nlet AwsS3Integration = _AwsS3Integration;\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _origin, _owner, _project, _repo, _path, _ref, _baseUrl;\nconst VERSION_PREFIX_GIT_BRANCH = \"GB\";\nconst _AzureUrl = class _AzureUrl {\n  constructor(origin, owner, project, repo, path, ref) {\n    __privateAdd(this, _origin, void 0);\n    __privateAdd(this, _owner, void 0);\n    __privateAdd(this, _project, void 0);\n    __privateAdd(this, _repo, void 0);\n    __privateAdd(this, _path, void 0);\n    __privateAdd(this, _ref, void 0);\n    __privateAdd(this, _baseUrl, (...parts) => {\n      const url = new URL(__privateGet(this, _origin));\n      url.pathname = parts.map((part) => encodeURIComponent(part)).join(\"/\");\n      return url;\n    });\n    __privateSet(this, _origin, origin);\n    __privateSet(this, _owner, owner);\n    __privateSet(this, _project, project);\n    __privateSet(this, _repo, repo);\n    __privateSet(this, _path, path);\n    __privateSet(this, _ref, ref);\n  }\n  /**\n   * Parses an azure URL as copied from the browser address bar.\n   *\n   * Throws an error if the URL is not a valid azure repo URL.\n   */\n  static fromRepoUrl(repoUrl) {\n    var _a;\n    const url = new URL(repoUrl);\n    let owner;\n    let project;\n    let repo;\n    const parts = url.pathname.split(\"/\").map((part) => decodeURIComponent(part));\n    if (parts[2] === \"_git\") {\n      owner = parts[1];\n      project = repo = parts[3];\n    } else if (parts[3] === \"_git\") {\n      owner = parts[1];\n      project = parts[2];\n      repo = parts[4];\n    } else if (parts[4] === \"_git\") {\n      owner = `${parts[1]}/${parts[2]}`;\n      project = parts[3];\n      repo = parts[5];\n    }\n    if (!owner || !project || !repo) {\n      throw new Error(\"Azure URL must point to a git repository\");\n    }\n    const path = (_a = url.searchParams.get(\"path\")) != null ? _a : void 0;\n    let ref;\n    const version = url.searchParams.get(\"version\");\n    if (version) {\n      const prefix = version.slice(0, 2);\n      if (prefix !== \"GB\") {\n        throw new Error(\"Azure URL version must point to a git branch\");\n      }\n      ref = version.slice(2);\n    }\n    return new _AzureUrl(url.origin, owner, project, repo, path, ref);\n  }\n  /**\n   * Returns a repo URL that can be used to navigate to the resource in azure.\n   *\n   * Throws an error if the URL is not a valid azure repo URL.\n   */\n  toRepoUrl() {\n    let url;\n    if (__privateGet(this, _project) === __privateGet(this, _repo)) {\n      url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), \"_git\", __privateGet(this, _repo));\n    } else {\n      url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_git\", __privateGet(this, _repo));\n    }\n    if (__privateGet(this, _path)) {\n      url.searchParams.set(\"path\", __privateGet(this, _path));\n    }\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", VERSION_PREFIX_GIT_BRANCH + __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  /**\n   * Returns the file download URL for this azure resource.\n   *\n   * Throws an error if the URL does not point to a file.\n   */\n  toFileUrl() {\n    if (!__privateGet(this, _path)) {\n      throw new Error(\n        \"Azure URL must point to a specific path to be able to download a file\"\n      );\n    }\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"items\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    url.searchParams.set(\"path\", __privateGet(this, _path));\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  /**\n   * Returns the archive download URL for this azure resource.\n   *\n   * Throws an error if the URL does not point to a repo.\n   */\n  toArchiveUrl() {\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"items\");\n    url.searchParams.set(\"recursionLevel\", \"full\");\n    url.searchParams.set(\"download\", \"true\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    if (__privateGet(this, _path)) {\n      url.searchParams.set(\"scopePath\", __privateGet(this, _path));\n    }\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  /**\n   * Returns the API url for fetching commits from a branch for this azure resource.\n   *\n   * Throws an error if the URL does not point to a commit.\n   */\n  toCommitsUrl() {\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"commits\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"searchCriteria.itemVersion.version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  /**\n   * Returns the name of the owner, a user or an organization.\n   */\n  getOwner() {\n    return __privateGet(this, _owner);\n  }\n  /**\n   * Returns the name of the project.\n   */\n  getProject() {\n    return __privateGet(this, _project);\n  }\n  /**\n   * Returns the name of the repo.\n   */\n  getRepo() {\n    return __privateGet(this, _repo);\n  }\n  /**\n   * Returns the file path within the repo if the URL contains one.\n   */\n  getPath() {\n    return __privateGet(this, _path);\n  }\n  /**\n   * Returns the git ref in the repo if the URL contains one.\n   */\n  getRef() {\n    return __privateGet(this, _ref);\n  }\n};\n_origin = new WeakMap();\n_owner = new WeakMap();\n_project = new WeakMap();\n_repo = new WeakMap();\n_path = new WeakMap();\n_ref = new WeakMap();\n_baseUrl = new WeakMap();\nlet AzureUrl = _AzureUrl;\n\nconst AZURE_HOST = \"dev.azure.com\";\nconst AzureDevOpsCredentialFields = [\n  \"clientId\",\n  \"clientSecret\",\n  \"tenantId\",\n  \"personalAccessToken\"\n];\nconst AzureDevopsCredentialFieldMap = /* @__PURE__ */ new Map([\n  [\"ClientSecret\", [\"clientId\", \"clientSecret\", \"tenantId\"]],\n  [\"ManagedIdentity\", [\"clientId\"]],\n  [\"PersonalAccessToken\", [\"personalAccessToken\"]]\n]);\nfunction asAzureDevOpsCredential(credential) {\n  for (const entry of AzureDevopsCredentialFieldMap.entries()) {\n    const [kind, requiredFields] = entry;\n    const forbiddenFields = AzureDevOpsCredentialFields.filter(\n      (field) => !requiredFields.includes(field)\n    );\n    if (requiredFields.every((field) => credential[field] !== void 0) && forbiddenFields.every((field) => credential[field] === void 0)) {\n      return {\n        kind,\n        organizations: credential.organizations,\n        ...requiredFields.reduce((acc, field) => {\n          acc[field] = credential[field];\n          return acc;\n        }, {})\n      };\n    }\n  }\n  throw new Error(\"is not a valid credential\");\n}\nfunction readAzureIntegrationConfig(config) {\n  var _a, _b, _c, _d;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : AZURE_HOST;\n  let credentialConfigs = (_b = config.getOptionalConfigArray(\"credentials\")) == null ? void 0 : _b.map((credential) => {\n    const result = {\n      organizations: credential.getOptionalStringArray(\"organizations\"),\n      personalAccessToken: credential.getOptionalString(\n        \"personalAccessToken\"\n      ),\n      tenantId: credential.getOptionalString(\"tenantId\"),\n      clientId: credential.getOptionalString(\"clientId\"),\n      clientSecret: credential.getOptionalString(\"clientSecret\")\n    };\n    return result;\n  });\n  const token = config.getOptionalString(\"token\");\n  if (config.getOptional(\"credential\") !== void 0 && config.getOptional(\"credentials\") !== void 0) {\n    throw new Error(\n      `Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.`\n    );\n  }\n  if (config.getOptional(\"token\") !== void 0 && config.getOptional(\"credentials\") !== void 0) {\n    throw new Error(\n      `Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.`\n    );\n  }\n  if (token !== void 0) {\n    const mapped = [{ personalAccessToken: token }];\n    credentialConfigs = (_c = credentialConfigs == null ? void 0 : credentialConfigs.concat(mapped)) != null ? _c : mapped;\n  }\n  if (config.getOptional(\"credential\") !== void 0) {\n    const mapped = [\n      {\n        organizations: config.getOptionalStringArray(\n          \"credential.organizations\"\n        ),\n        token: config.getOptionalString(\"credential.token\"),\n        tenantId: config.getOptionalString(\"credential.tenantId\"),\n        clientId: config.getOptionalString(\"credential.clientId\"),\n        clientSecret: config.getOptionalString(\"credential.clientSecret\")\n      }\n    ];\n    credentialConfigs = (_d = credentialConfigs == null ? void 0 : credentialConfigs.concat(mapped)) != null ? _d : mapped;\n  }\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Azure integration config, '${host}' is not a valid host`\n    );\n  }\n  let credentials = void 0;\n  if (credentialConfigs !== void 0) {\n    const errors = credentialConfigs == null ? void 0 : credentialConfigs.reduce((acc, credentialConfig, index) => {\n      let error = void 0;\n      try {\n        asAzureDevOpsCredential(credentialConfig);\n      } catch (e) {\n        error = e.message;\n      }\n      if (error !== void 0) {\n        acc.push(`credential at position ${index + 1} ${error}`);\n      }\n      return acc;\n    }, Array.of()).concat(\n      Object.entries(\n        credentialConfigs.filter(\n          (credential) => credential.organizations !== void 0 && credential.organizations.length > 0\n        ).reduce((acc, credential, index) => {\n          var _a2;\n          (_a2 = credential.organizations) == null ? void 0 : _a2.forEach((organization) => {\n            if (!acc[organization]) {\n              acc[organization] = [];\n            }\n            acc[organization].push(index + 1);\n          });\n          return acc;\n        }, {})\n      ).filter(([_, indexes]) => indexes.length > 1).reduce((acc, [org, indexes]) => {\n        acc.push(\n          `organization ${org} is specified multiple times in credentials at positions ${indexes.slice(0, indexes.length - 1).join(\", \")} and ${indexes[indexes.length - 1]}`\n        );\n        return acc;\n      }, Array.of())\n    );\n    if ((errors == null ? void 0 : errors.length) > 0) {\n      throw new Error(\n        `Invalid Azure integration config for ${host}: ${errors.join(\"; \")}`\n      );\n    }\n    credentials = credentialConfigs.map(\n      (credentialConfig) => asAzureDevOpsCredential(credentialConfig)\n    );\n    if (credentials.some(\n      (credential) => credential.kind !== \"PersonalAccessToken\"\n    ) && host !== AZURE_HOST) {\n      throw new Error(\n        `Invalid Azure integration config for ${host}, only personal access tokens can be used with hosts other than ${AZURE_HOST}`\n      );\n    }\n    if (credentials.filter(\n      (credential) => credential.organizations === void 0 || credential.organizations.length === 0\n    ).length > 1) {\n      throw new Error(\n        `Invalid Azure integration config for ${host}, you cannot specify multiple credentials without organizations`\n      );\n    }\n  }\n  return {\n    host,\n    credentials\n  };\n}\nfunction readAzureIntegrationConfigs(configs) {\n  const result = configs.map(readAzureIntegrationConfig);\n  if (!result.some((c) => c.host === AZURE_HOST)) {\n    result.push({ host: AZURE_HOST });\n  }\n  return result;\n}\n\nvar __defProp$c = Object.defineProperty;\nvar __defNormalProp$c = (obj, key, value) => key in obj ? __defProp$c(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$c = (obj, key, value) => {\n  __defNormalProp$c(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _AzureIntegration = class _AzureIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"azure\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  /*\n   * Azure repo URLs on the form with a `path` query param are treated specially.\n   *\n   * Example base URL: https://dev.azure.com/organization/project/_git/repository?path=%2Fcatalog-info.yaml\n   */\n  resolveUrl(options) {\n    var _a;\n    const { url, base } = options;\n    if (isValidUrl(url)) {\n      return url;\n    }\n    try {\n      const azureUrl = AzureUrl.fromRepoUrl(base);\n      const newUrl = new URL(base);\n      const mockBaseUrl = new URL(`https://a.com${(_a = azureUrl.getPath()) != null ? _a : \"\"}`);\n      const updatedPath = new URL(url, mockBaseUrl).pathname;\n      newUrl.searchParams.set(\"path\", updatedPath);\n      if (options.lineNumber) {\n        newUrl.searchParams.set(\"line\", String(options.lineNumber));\n        newUrl.searchParams.set(\"lineEnd\", String(options.lineNumber + 1));\n        newUrl.searchParams.set(\"lineStartColumn\", \"1\");\n        newUrl.searchParams.set(\"lineEndColumn\", \"1\");\n      }\n      return newUrl.toString();\n    } catch {\n      return new URL(url, base).toString();\n    }\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\n__publicField$c(_AzureIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readAzureIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.azure\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _AzureIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet AzureIntegration = _AzureIntegration;\n\nfunction getAzureFileFetchUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toFileUrl();\n}\nfunction getAzureDownloadUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toArchiveUrl();\n}\nfunction getAzureCommitsUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toCommitsUrl();\n}\n\nvar __defProp$b = Object.defineProperty;\nvar __defNormalProp$b = (obj, key, value) => key in obj ? __defProp$b(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$b = (obj, key, value) => {\n  __defNormalProp$b(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst tenMinutes = 1e3 * 60 * 10;\nclass CachedAzureDevOpsCredentialsProvider {\n  constructor(credential) {\n    this.credential = credential;\n    __publicField$b(this, \"azureDevOpsScope\", \"499b84ac-1321-427f-aa17-267ca6975798/.default\");\n    __publicField$b(this, \"cached\");\n  }\n  static fromAzureDevOpsCredential(credential) {\n    switch (credential.kind) {\n      case \"PersonalAccessToken\":\n        return CachedAzureDevOpsCredentialsProvider.fromPersonalAccessTokenCredential(\n          credential\n        );\n      case \"ClientSecret\":\n        return CachedAzureDevOpsCredentialsProvider.fromTokenCredential(\n          new ClientSecretCredential(\n            credential.tenantId,\n            credential.clientId,\n            credential.clientSecret\n          )\n        );\n      case \"ManagedIdentity\":\n        return CachedAzureDevOpsCredentialsProvider.fromTokenCredential(\n          new ManagedIdentityCredential(credential.clientId)\n        );\n      default:\n        throw new Error(\n          `Credential kind '${credential.kind}' not supported`\n        );\n    }\n  }\n  static fromTokenCredential(credential) {\n    return new CachedAzureDevOpsCredentialsProvider(credential);\n  }\n  static fromPersonalAccessTokenCredential(credential) {\n    return new CachedAzureDevOpsCredentialsProvider(\n      credential.personalAccessToken\n    );\n  }\n  async getCredentials() {\n    if (this.cached === void 0 || this.cached.expiresAt !== void 0 && Date.now() > this.cached.expiresAt) {\n      if (typeof this.credential === \"string\") {\n        this.cached = {\n          headers: {\n            Authorization: `Basic ${btoa(`:${this.credential}`)}`\n          },\n          type: \"pat\",\n          token: this.credential\n        };\n      } else {\n        const accessToken = await this.credential.getToken(\n          this.azureDevOpsScope\n        );\n        if (!accessToken) {\n          throw new Error(\"Failed to retrieve access token\");\n        }\n        this.cached = {\n          expiresAt: accessToken.expiresOnTimestamp - tenMinutes,\n          headers: {\n            Authorization: `Bearer ${accessToken.token}`\n          },\n          type: \"bearer\",\n          token: accessToken.token\n        };\n      }\n    }\n    return this.cached;\n  }\n}\n\nclass DefaultAzureDevOpsCredentialsProvider {\n  constructor(providers) {\n    this.providers = providers;\n  }\n  static fromIntegrations(integrations) {\n    const providers = integrations.azure.list().reduce((acc, integration) => {\n      var _a;\n      (_a = integration.config.credentials) == null ? void 0 : _a.forEach((credential) => {\n        var _a2;\n        if (credential.organizations === void 0 || credential.organizations.length === 0) {\n          if (acc.get(integration.config.host) === void 0) {\n            acc.set(\n              integration.config.host,\n              CachedAzureDevOpsCredentialsProvider.fromAzureDevOpsCredential(\n                credential\n              )\n            );\n          }\n        } else {\n          const provider = CachedAzureDevOpsCredentialsProvider.fromAzureDevOpsCredential(\n            credential\n          );\n          (_a2 = credential.organizations) == null ? void 0 : _a2.forEach((organization) => {\n            acc.set(`${integration.config.host}/${organization}`, provider);\n          });\n        }\n      });\n      if (integration.config.host === \"dev.azure.com\" && acc.get(integration.config.host) === void 0) {\n        acc.set(\n          integration.config.host,\n          CachedAzureDevOpsCredentialsProvider.fromTokenCredential(\n            new DefaultAzureCredential()\n          )\n        );\n      }\n      return acc;\n    }, /* @__PURE__ */ new Map());\n    return new DefaultAzureDevOpsCredentialsProvider(providers);\n  }\n  forAzureDevOpsServerOrganization(url) {\n    const parts = url.pathname.split(\"/\").filter((part) => part !== \"\");\n    if (url.host !== \"dev.azure.com\" && parts.length > 0) {\n      if (parts[0] !== \"tfs\") {\n        return this.providers.get(`${url.host}/${parts[0]}`);\n      } else if (parts[0] === \"tfs\" && parts.length > 1) {\n        return this.providers.get(`${url.host}/${parts[1]}`);\n      }\n    }\n    return void 0;\n  }\n  forAzureDevOpsOrganization(url) {\n    const parts = url.pathname.split(\"/\").filter((part) => part !== \"\");\n    if (url.host === \"dev.azure.com\" && parts.length > 0) {\n      return this.providers.get(`${url.host}/${parts[0]}`);\n    }\n    return void 0;\n  }\n  forHost(url) {\n    return this.providers.get(url.host);\n  }\n  async getCredentials(opts) {\n    var _a, _b;\n    const url = new URL(opts.url);\n    const provider = (_b = (_a = this.forAzureDevOpsOrganization(url)) != null ? _a : this.forAzureDevOpsServerOrganization(url)) != null ? _b : this.forHost(url);\n    if (provider === void 0) {\n      return void 0;\n    }\n    return provider.getCredentials(opts);\n  }\n}\n\nasync function getAzureRequestOptions(config, additionalHeaders) {\n  var _a;\n  const headers = additionalHeaders ? { ...additionalHeaders } : {};\n  const credentialConfig = (_a = config.credentials) == null ? void 0 : _a.filter(\n    (credential) => credential.organizations === void 0 || credential.organizations.length === 0\n  )[0];\n  if (credentialConfig) {\n    const credentialsProvider = CachedAzureDevOpsCredentialsProvider.fromAzureDevOpsCredential(\n      credentialConfig\n    );\n    const credentials = await credentialsProvider.getCredentials();\n    return {\n      headers: {\n        ...credentials == null ? void 0 : credentials.headers,\n        ...headers\n      }\n    };\n  }\n  return { headers };\n}\n\nconst BITBUCKET_HOST = \"bitbucket.org\";\nconst BITBUCKET_API_BASE_URL = \"https://api.bitbucket.org/2.0\";\nfunction readBitbucketIntegrationConfig(config) {\n  var _a;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : BITBUCKET_HOST;\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  const username = config.getOptionalString(\"username\");\n  const appPassword = config.getOptionalString(\"appPassword\");\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Bitbucket integration config, '${host}' is not a valid host`\n    );\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === BITBUCKET_HOST) {\n    apiBaseUrl = BITBUCKET_API_BASE_URL;\n  } else {\n    apiBaseUrl = `https://${host}/rest/api/1.0`;\n  }\n  return {\n    host,\n    apiBaseUrl,\n    token,\n    username,\n    appPassword\n  };\n}\nfunction readBitbucketIntegrationConfigs(configs) {\n  const result = configs.map(readBitbucketIntegrationConfig);\n  if (!result.some((c) => c.host === BITBUCKET_HOST)) {\n    result.push({\n      host: BITBUCKET_HOST,\n      apiBaseUrl: BITBUCKET_API_BASE_URL\n    });\n  }\n  return result;\n}\n\nvar __defProp$a = Object.defineProperty;\nvar __defNormalProp$a = (obj, key, value) => key in obj ? __defProp$a(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$a = (obj, key, value) => {\n  __defNormalProp$a(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _BitbucketIntegration = class _BitbucketIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"bitbucket\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    if (!options.lineNumber) {\n      return resolved;\n    }\n    const url = new URL(resolved);\n    if (this.integrationConfig.host === \"bitbucket.org\") {\n      url.hash = `lines-${options.lineNumber}`;\n    } else {\n      url.hash = `${options.lineNumber}`;\n    }\n    return url.toString();\n  }\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n    editUrl.searchParams.set(\"mode\", \"edit\");\n    editUrl.searchParams.set(\"spa\", \"0\");\n    editUrl.searchParams.set(\"at\", urlData.ref);\n    return editUrl.toString();\n  }\n};\n__publicField$a(_BitbucketIntegration, \"factory\", ({\n  config\n}) => {\n  var _a, _b, _c;\n  const configs = readBitbucketIntegrationConfigs(\n    (_c = config.getOptionalConfigArray(\"integrations.bitbucket\")) != null ? _c : [\n      // if integrations.bitbucket was not used assume the use was migrated to the new configs\n      // and backport for the deprecated integration to be usable for other parts of the system\n      // until these got migrated\n      ...(_a = config.getOptionalConfigArray(\"integrations.bitbucketCloud\")) != null ? _a : [],\n      ...(_b = config.getOptionalConfigArray(\"integrations.bitbucketServer\")) != null ? _b : []\n    ]\n  );\n  return basicIntegrations(\n    configs.map((c) => new _BitbucketIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet BitbucketIntegration = _BitbucketIntegration;\n\nasync function getBitbucketDefaultBranch(url, config) {\n  const { name: repoName, owner: project, resource } = parseGitUrl(url);\n  const isHosted = resource === \"bitbucket.org\";\n  let branchUrl = isHosted ? `${config.apiBaseUrl}/repositories/${project}/${repoName}` : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/default-branch`;\n  let response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n  if (response.status === 404 && !isHosted) {\n    branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/branches/default`;\n    response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n  }\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n  let defaultBranch;\n  if (isHosted) {\n    const repoInfo = await response.json();\n    defaultBranch = repoInfo.mainbranch.name;\n  } else {\n    const { displayId } = await response.json();\n    defaultBranch = displayId;\n  }\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. Response ${response.status} ${response.json()}`\n    );\n  }\n  return defaultBranch;\n}\nasync function getBitbucketDownloadUrl(url, config) {\n  const {\n    name: repoName,\n    owner: project,\n    ref,\n    protocol,\n    resource,\n    filepath\n  } = parseGitUrl(url);\n  const isHosted = resource === \"bitbucket.org\";\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketDefaultBranch(url, config);\n  }\n  const path = filepath ? `&path=${encodeURIComponent(decodeURIComponent(filepath))}` : \"\";\n  const archiveUrl = isHosted ? `${protocol}://${resource}/${project}/${repoName}/get/${branch}.tar.gz` : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/archive?format=tgz&at=${branch}&prefix=${project}-${repoName}${path}`;\n  return archiveUrl;\n}\nfunction getBitbucketFileFetchUrl(url, config) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || filepathtype !== \"browse\" && filepathtype !== \"raw\" && filepathtype !== \"src\") {\n      throw new Error(\"Invalid Bitbucket URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (config.host === \"bitbucket.org\") {\n      if (!ref) {\n        throw new Error(\"Invalid Bitbucket URL or file path\");\n      }\n      return `${config.apiBaseUrl}/repositories/${owner}/${name}/src/${ref}/${pathWithoutSlash}`;\n    }\n    return `${config.apiBaseUrl}/projects/${owner}/repos/${name}/raw/${pathWithoutSlash}?at=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getBitbucketRequestOptions(config) {\n  const headers = {};\n  if (config.token) {\n    headers.Authorization = `Bearer ${config.token}`;\n  } else if (config.username && config.appPassword) {\n    const buffer = Buffer.from(\n      `${config.username}:${config.appPassword}`,\n      \"utf8\"\n    );\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return {\n    headers\n  };\n}\n\nconst BITBUCKET_CLOUD_HOST = \"bitbucket.org\";\nconst BITBUCKET_CLOUD_API_BASE_URL = \"https://api.bitbucket.org/2.0\";\nfunction readBitbucketCloudIntegrationConfig(config) {\n  const host = BITBUCKET_CLOUD_HOST;\n  const apiBaseUrl = BITBUCKET_CLOUD_API_BASE_URL;\n  const username = config.getString(\"username\");\n  const appPassword = config.getString(\"appPassword\");\n  return {\n    host,\n    apiBaseUrl,\n    username,\n    appPassword\n  };\n}\nfunction readBitbucketCloudIntegrationConfigs(configs) {\n  const result = configs.map(readBitbucketCloudIntegrationConfig);\n  if (result.length === 0) {\n    result.push({\n      host: BITBUCKET_CLOUD_HOST,\n      apiBaseUrl: BITBUCKET_CLOUD_API_BASE_URL\n    });\n  }\n  return result;\n}\n\nvar __defProp$9 = Object.defineProperty;\nvar __defNormalProp$9 = (obj, key, value) => key in obj ? __defProp$9(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$9 = (obj, key, value) => {\n  __defNormalProp$9(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _BitbucketCloudIntegration = class _BitbucketCloudIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"bitbucketCloud\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    if (options.lineNumber) {\n      const url = new URL(resolved);\n      url.hash = `lines-${options.lineNumber}`;\n      return url.toString();\n    }\n    return resolved;\n  }\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n    editUrl.searchParams.set(\"mode\", \"edit\");\n    editUrl.searchParams.set(\"at\", urlData.ref);\n    return editUrl.toString();\n  }\n};\n__publicField$9(_BitbucketCloudIntegration, \"factory\", ({\n  config\n}) => {\n  var _a;\n  const configs = readBitbucketCloudIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.bitbucketCloud\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _BitbucketCloudIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet BitbucketCloudIntegration = _BitbucketCloudIntegration;\n\nasync function getBitbucketCloudDefaultBranch(url, config) {\n  const { name: repoName, owner: project } = parseGitUrl(url);\n  const branchUrl = `${config.apiBaseUrl}/repositories/${project}/${repoName}`;\n  const response = await fetch(\n    branchUrl,\n    getBitbucketCloudRequestOptions(config)\n  );\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n  const repoInfo = await response.json();\n  const defaultBranch = repoInfo.mainbranch.name;\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. Response ${response.status} ${response.json()}`\n    );\n  }\n  return defaultBranch;\n}\nasync function getBitbucketCloudDownloadUrl(url, config) {\n  const {\n    name: repoName,\n    owner: project,\n    ref,\n    protocol,\n    resource\n  } = parseGitUrl(url);\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketCloudDefaultBranch(url, config);\n  }\n  return `${protocol}://${resource}/${project}/${repoName}/get/${branch}.tar.gz`;\n}\nfunction getBitbucketCloudFileFetchUrl(url, config) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || filepathtype !== \"src\" && filepathtype !== \"raw\") {\n      throw new Error(\"Invalid Bitbucket Cloud URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (!ref) {\n      throw new Error(\"Invalid Bitbucket Cloud URL or file path\");\n    }\n    return `${config.apiBaseUrl}/repositories/${owner}/${name}/src/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getBitbucketCloudRequestOptions(config) {\n  const headers = {};\n  if (config.username && config.appPassword) {\n    const buffer = Buffer.from(\n      `${config.username}:${config.appPassword}`,\n      \"utf8\"\n    );\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return {\n    headers\n  };\n}\n\nfunction readBitbucketServerIntegrationConfig(config) {\n  const host = config.getString(\"host\");\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  const username = config.getOptionalString(\"username\");\n  const password = config.getOptionalString(\"password\");\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Bitbucket Server integration config, '${host}' is not a valid host`\n    );\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else {\n    apiBaseUrl = `https://${host}/rest/api/1.0`;\n  }\n  return {\n    host,\n    apiBaseUrl,\n    token,\n    username,\n    password\n  };\n}\nfunction readBitbucketServerIntegrationConfigs(configs) {\n  return configs.map(readBitbucketServerIntegrationConfig);\n}\n\nvar __defProp$8 = Object.defineProperty;\nvar __defNormalProp$8 = (obj, key, value) => key in obj ? __defProp$8(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$8 = (obj, key, value) => {\n  __defNormalProp$8(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _BitbucketServerIntegration = class _BitbucketServerIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"bitbucketServer\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    if (options.lineNumber) {\n      const url = new URL(resolved);\n      url.hash = options.lineNumber.toString();\n      return url.toString();\n    }\n    return resolved;\n  }\n  resolveEditUrl(url) {\n    if (url.includes(\"?\")) {\n      return url.substring(0, url.indexOf(\"?\"));\n    }\n    return url;\n  }\n};\n__publicField$8(_BitbucketServerIntegration, \"factory\", ({\n  config\n}) => {\n  var _a;\n  const configs = readBitbucketServerIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.bitbucketServer\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _BitbucketServerIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet BitbucketServerIntegration = _BitbucketServerIntegration;\n\nasync function getBitbucketServerDefaultBranch(url, config) {\n  const { name: repoName, owner: project } = parseGitUrl(url);\n  let branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/default-branch`;\n  let response = await fetch(\n    branchUrl,\n    getBitbucketServerRequestOptions(config)\n  );\n  if (response.status === 404) {\n    branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/branches/default`;\n    response = await fetch(branchUrl, getBitbucketServerRequestOptions(config));\n  }\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n  const { displayId } = await response.json();\n  const defaultBranch = displayId;\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. Response ${response.status} ${response.json()}`\n    );\n  }\n  return defaultBranch;\n}\nasync function getBitbucketServerDownloadUrl(url, config) {\n  const { name: repoName, owner: project, ref, filepath } = parseGitUrl(url);\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketServerDefaultBranch(url, config);\n  }\n  const path = filepath ? `&path=${encodeURIComponent(decodeURIComponent(filepath))}` : \"\";\n  return `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/archive?format=tgz&at=${branch}&prefix=${project}-${repoName}${path}`;\n}\nfunction getBitbucketServerFileFetchUrl(url, config) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || filepathtype !== \"browse\" && filepathtype !== \"raw\" && filepathtype !== \"src\") {\n      throw new Error(\"Invalid Bitbucket Server URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    return `${config.apiBaseUrl}/projects/${owner}/repos/${name}/raw/${pathWithoutSlash}?at=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getBitbucketServerRequestOptions(config) {\n  const headers = {};\n  if (config.token) {\n    headers.Authorization = `Bearer ${config.token}`;\n  } else if (config.username && config.password) {\n    const buffer = Buffer.from(`${config.username}:${config.password}`, \"utf8\");\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return {\n    headers\n  };\n}\n\nfunction readGerritIntegrationConfig(config) {\n  const host = config.getString(\"host\");\n  let baseUrl = config.getOptionalString(\"baseUrl\");\n  let cloneUrl = config.getOptionalString(\"cloneUrl\");\n  let gitilesBaseUrl = config.getOptionalString(\"gitilesBaseUrl\");\n  const username = config.getOptionalString(\"username\");\n  const password = config.getOptionalString(\"password\");\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${host}' is not a valid host`\n    );\n  } else if (baseUrl && !isValidUrl(baseUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${baseUrl}' is not a valid baseUrl`\n    );\n  } else if (cloneUrl && !isValidUrl(cloneUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${cloneUrl}' is not a valid cloneUrl`\n    );\n  } else if (gitilesBaseUrl && !isValidUrl(gitilesBaseUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${gitilesBaseUrl}' is not a valid gitilesBaseUrl`\n    );\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, \"/\");\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  if (gitilesBaseUrl) {\n    gitilesBaseUrl = trimEnd(gitilesBaseUrl, \"/\");\n  } else {\n    gitilesBaseUrl = `https://${host}`;\n  }\n  if (cloneUrl) {\n    cloneUrl = trimEnd(cloneUrl, \"/\");\n  } else {\n    cloneUrl = baseUrl;\n  }\n  return {\n    host,\n    baseUrl,\n    cloneUrl,\n    gitilesBaseUrl,\n    username,\n    password\n  };\n}\nfunction readGerritIntegrationConfigs(configs) {\n  return configs.map(readGerritIntegrationConfig);\n}\n\nconst GERRIT_BODY_PREFIX = \")]}'\";\nfunction parseGerritGitilesUrl(config, url) {\n  const baseUrlParse = new URL(config.gitilesBaseUrl);\n  const urlParse = new URL(url);\n  const urlPath = urlParse.pathname.substring(urlParse.pathname.startsWith(\"/a/\") ? 2 : 0).replace(baseUrlParse.pathname, \"\");\n  const parts = urlPath.split(\"/\").filter((p) => !!p);\n  const projectEndIndex = parts.indexOf(\"+\");\n  if (projectEndIndex <= 0) {\n    throw new Error(`Unable to parse project from url: ${url}`);\n  }\n  const project = trimStart(parts.slice(0, projectEndIndex).join(\"/\"), \"/\");\n  const branchIndex = parts.indexOf(\"heads\");\n  if (branchIndex <= 0) {\n    throw new Error(`Unable to parse branch from url: ${url}`);\n  }\n  const branch = parts[branchIndex + 1];\n  const filePath = parts.slice(branchIndex + 2).join(\"/\");\n  return {\n    branch,\n    filePath: filePath === \"\" ? \"/\" : filePath,\n    project\n  };\n}\nfunction buildGerritGitilesUrl(config, project, branch, filePath) {\n  return `${config.gitilesBaseUrl}/${project}/+/refs/heads/${branch}/${trimStart(filePath, \"/\")}`;\n}\nfunction buildGerritGitilesArchiveUrl(config, project, branch, filePath) {\n  const archiveName = filePath === \"/\" || filePath === \"\" ? \".tar.gz\" : `/${filePath}.tar.gz`;\n  return `${getGitilesAuthenticationUrl(\n    config\n  )}/${project}/+archive/refs/heads/${branch}${archiveName}`;\n}\nfunction getAuthenticationPrefix(config) {\n  return config.password ? \"/a/\" : \"/\";\n}\nfunction getGitilesAuthenticationUrl(config) {\n  if (!config.baseUrl || !config.gitilesBaseUrl) {\n    throw new Error(\n      \"Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.\"\n    );\n  }\n  if (config.gitilesBaseUrl.startsWith(config.baseUrl)) {\n    return config.gitilesBaseUrl.replace(\n      config.baseUrl.concat(\"/\"),\n      config.baseUrl.concat(getAuthenticationPrefix(config))\n    );\n  }\n  if (config.password) {\n    throw new Error(\n      \"Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.\"\n    );\n  }\n  return config.gitilesBaseUrl;\n}\nfunction getGerritBranchApiUrl(config, url) {\n  const { branch, project } = parseGerritGitilesUrl(config, url);\n  return `${config.baseUrl}${getAuthenticationPrefix(\n    config\n  )}projects/${encodeURIComponent(project)}/branches/${branch}`;\n}\nfunction getGerritCloneRepoUrl(config, url) {\n  const { project } = parseGerritGitilesUrl(config, url);\n  return `${config.cloneUrl}${getAuthenticationPrefix(config)}${project}`;\n}\nfunction getGerritFileContentsApiUrl(config, url) {\n  const { branch, filePath, project } = parseGerritGitilesUrl(config, url);\n  return `${config.baseUrl}${getAuthenticationPrefix(\n    config\n  )}projects/${encodeURIComponent(\n    project\n  )}/branches/${branch}/files/${encodeURIComponent(filePath)}/content`;\n}\nfunction getGerritProjectsApiUrl(config) {\n  return `${config.baseUrl}${getAuthenticationPrefix(config)}projects/`;\n}\nfunction getGerritRequestOptions(config) {\n  const headers = {};\n  if (!config.password) {\n    return headers;\n  }\n  const buffer = Buffer.from(`${config.username}:${config.password}`, \"utf8\");\n  headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  return {\n    headers\n  };\n}\nasync function parseGerritJsonResponse(response) {\n  const responseBody = await response.text();\n  if (responseBody.startsWith(GERRIT_BODY_PREFIX)) {\n    try {\n      return JSON.parse(responseBody.slice(GERRIT_BODY_PREFIX.length));\n    } catch (ex) {\n      throw new Error(\n        `Invalid response from Gerrit: ${responseBody.slice(0, 10)} - ${ex}`\n      );\n    }\n  }\n  throw new Error(\n    `Gerrit JSON body prefix missing. Found: ${responseBody.slice(0, 10)}`\n  );\n}\n\nvar __defProp$7 = Object.defineProperty;\nvar __defNormalProp$7 = (obj, key, value) => key in obj ? __defProp$7(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$7 = (obj, key, value) => {\n  __defNormalProp$7(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GerritIntegration = class _GerritIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"gerrit\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const { url, base, lineNumber } = options;\n    let updated;\n    if (url.startsWith(\"/\")) {\n      const { branch, project } = parseGerritGitilesUrl(this.config, base);\n      return buildGerritGitilesUrl(this.config, project, branch, url);\n    }\n    if (url) {\n      updated = new URL(url, base);\n    } else {\n      updated = new URL(base);\n    }\n    if (lineNumber) {\n      updated.hash = lineNumber.toString();\n    }\n    return updated.toString();\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\n__publicField$7(_GerritIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readGerritIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.gerrit\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _GerritIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet GerritIntegration = _GerritIntegration;\n\nfunction readGiteaConfig(config) {\n  const host = config.getString(\"host\");\n  let baseUrl = config.getOptionalString(\"baseUrl\");\n  const username = config.getOptionalString(\"username\");\n  const password = config.getOptionalString(\"password\");\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Gitea integration config, '${host}' is not a valid host`\n    );\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, \"/\");\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  return {\n    host,\n    baseUrl,\n    username,\n    password\n  };\n}\n\nfunction getGiteaEditContentsUrl(config, url) {\n  var _a;\n  try {\n    const baseUrl = (_a = config.baseUrl) != null ? _a : `https://${config.host}`;\n    const [_blank, owner, name, _src, _branch, ref, ...path] = url.replace(baseUrl, \"\").split(\"/\");\n    const pathWithoutSlash = path.join(\"/\").replace(/^\\//, \"\");\n    return `${baseUrl}/${owner}/${name}/_edit/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getGiteaFileContentsUrl(config, url) {\n  var _a;\n  try {\n    const baseUrl = (_a = config.baseUrl) != null ? _a : `https://${config.host}`;\n    const [_blank, owner, name, _src, _branch, ref, ...path] = url.replace(baseUrl, \"\").split(\"/\");\n    const pathWithoutSlash = path.join(\"/\").replace(/^\\//, \"\");\n    return `${baseUrl}/api/v1/repos/${owner}/${name}/contents/${pathWithoutSlash}?ref=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getGiteaRequestOptions(config) {\n  const headers = {};\n  const { username, password } = config;\n  if (!password) {\n    return headers;\n  }\n  if (username) {\n    headers.Authorization = `basic ${Buffer.from(\n      `${username}:${password}`\n    ).toString(\"base64\")}`;\n  } else {\n    headers.Authorization = `token ${password}`;\n  }\n  return {\n    headers\n  };\n}\n\nvar __defProp$6 = Object.defineProperty;\nvar __defNormalProp$6 = (obj, key, value) => key in obj ? __defProp$6(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$6 = (obj, key, value) => {\n  __defNormalProp$6(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GiteaIntegration = class _GiteaIntegration {\n  constructor(config) {\n    this.config = config;\n  }\n  get type() {\n    return \"gitea\";\n  }\n  get title() {\n    return this.config.host;\n  }\n  resolveUrl(options) {\n    return defaultScmResolveUrl(options);\n  }\n  resolveEditUrl(url) {\n    return getGiteaEditContentsUrl(this.config, url);\n  }\n};\n__publicField$6(_GiteaIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = (_a = config.getOptionalConfigArray(\"integrations.gitea\")) != null ? _a : [];\n  const giteaConfigs = configs.map((c) => readGiteaConfig(c));\n  return basicIntegrations(\n    giteaConfigs.map((c) => new _GiteaIntegration(c)),\n    (gitea) => gitea.config.host\n  );\n});\nlet GiteaIntegration = _GiteaIntegration;\n\nconst GITHUB_HOST = \"github.com\";\nconst GITHUB_API_BASE_URL = \"https://api.github.com\";\nconst GITHUB_RAW_BASE_URL = \"https://raw.githubusercontent.com\";\nfunction readGithubIntegrationConfig(config) {\n  var _a, _b;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : GITHUB_HOST;\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  let rawBaseUrl = config.getOptionalString(\"rawBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  const apps = (_b = config.getOptionalConfigArray(\"apps\")) == null ? void 0 : _b.map((c) => ({\n    appId: c.getNumber(\"appId\"),\n    clientId: c.getString(\"clientId\"),\n    clientSecret: c.getString(\"clientSecret\"),\n    webhookSecret: c.getString(\"webhookSecret\"),\n    privateKey: c.getString(\"privateKey\"),\n    allowedInstallationOwners: c.getOptionalStringArray(\n      \"allowedInstallationOwners\"\n    )\n  }));\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid GitHub integration config, '${host}' is not a valid host`\n    );\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === GITHUB_HOST) {\n    apiBaseUrl = GITHUB_API_BASE_URL;\n  }\n  if (rawBaseUrl) {\n    rawBaseUrl = trimEnd(rawBaseUrl, \"/\");\n  } else if (host === GITHUB_HOST) {\n    rawBaseUrl = GITHUB_RAW_BASE_URL;\n  }\n  return { host, apiBaseUrl, rawBaseUrl, token, apps };\n}\nfunction readGithubIntegrationConfigs(configs) {\n  const result = configs.map(readGithubIntegrationConfig);\n  if (!result.some((c) => c.host === GITHUB_HOST)) {\n    result.push({\n      host: GITHUB_HOST,\n      apiBaseUrl: GITHUB_API_BASE_URL,\n      rawBaseUrl: GITHUB_RAW_BASE_URL\n    });\n  }\n  return result;\n}\n\nfunction getGithubFileFetchUrl(url, config, credentials) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || !ref || // GitHub is automatically redirecting tree urls to blob urls so it's\n    // fine to pass a tree url.\n    filepathtype !== \"blob\" && filepathtype !== \"raw\" && filepathtype !== \"tree\") {\n      throw new Error(\"Invalid GitHub URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (chooseEndpoint(config, credentials) === \"api\") {\n      return `${config.apiBaseUrl}/repos/${owner}/${name}/contents/${pathWithoutSlash}?ref=${ref}`;\n    }\n    return `${config.rawBaseUrl}/${owner}/${name}/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getGitHubRequestOptions(config, credentials) {\n  const headers = {};\n  if (chooseEndpoint(config, credentials) === \"api\") {\n    headers.Accept = \"application/vnd.github.v3.raw\";\n  }\n  if (credentials.token) {\n    headers.Authorization = `token ${credentials.token}`;\n  }\n  return { headers };\n}\nfunction chooseEndpoint(config, credentials) {\n  if (config.apiBaseUrl && (credentials.token || !config.rawBaseUrl)) {\n    return \"api\";\n  }\n  return \"raw\";\n}\n\nvar __defProp$5 = Object.defineProperty;\nvar __defNormalProp$5 = (obj, key, value) => key in obj ? __defProp$5(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$5 = (obj, key, value) => {\n  __defNormalProp$5(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass Cache {\n  constructor() {\n    __publicField$5(this, \"tokenCache\", /* @__PURE__ */ new Map());\n    __publicField$5(this, \"isExpired\", (date) => DateTime.local() > date);\n  }\n  async getOrCreateToken(owner, repo, supplier) {\n    let existingInstallationData = this.tokenCache.get(owner);\n    if (!existingInstallationData || this.isExpired(existingInstallationData.expiresAt)) {\n      existingInstallationData = await supplier();\n      existingInstallationData.expiresAt = existingInstallationData.expiresAt.minus({ minutes: 10 });\n      this.tokenCache.set(owner, existingInstallationData);\n    }\n    if (!this.appliesToRepo(existingInstallationData, repo)) {\n      throw new Error(\n        `The Backstage GitHub application used in the ${owner} organization does not have access to a repository with the name ${repo}`\n      );\n    }\n    return { accessToken: existingInstallationData.token };\n  }\n  appliesToRepo(tokenData, repo) {\n    if (repo === void 0) {\n      return true;\n    }\n    if (tokenData.repositories !== void 0) {\n      return tokenData.repositories.includes(repo);\n    }\n    return true;\n  }\n}\nconst HEADERS = {\n  Accept: \"application/vnd.github.machine-man-preview+json\"\n};\nclass GithubAppManager {\n  // undefined allows all installations\n  constructor(config, baseUrl) {\n    __publicField$5(this, \"appClient\");\n    __publicField$5(this, \"baseUrl\");\n    __publicField$5(this, \"baseAuthConfig\");\n    __publicField$5(this, \"cache\", new Cache());\n    __publicField$5(this, \"allowedInstallationOwners\");\n    this.allowedInstallationOwners = config.allowedInstallationOwners;\n    this.baseUrl = baseUrl;\n    this.baseAuthConfig = {\n      appId: config.appId,\n      privateKey: config.privateKey.replace(/\\\\n/gm, \"\\n\")\n    };\n    this.appClient = new Octokit({\n      baseUrl,\n      headers: HEADERS,\n      authStrategy: createAppAuth,\n      auth: this.baseAuthConfig\n    });\n  }\n  async getInstallationCredentials(owner, repo) {\n    var _a;\n    if (this.allowedInstallationOwners) {\n      if (!((_a = this.allowedInstallationOwners) == null ? void 0 : _a.includes(owner))) {\n        return { accessToken: void 0 };\n      }\n    }\n    return this.cache.getOrCreateToken(owner, repo, async () => {\n      var _a2;\n      const { installationId, suspended } = await this.getInstallationData(\n        owner\n      );\n      if (suspended) {\n        throw new Error(`The GitHub application for ${owner} is suspended`);\n      }\n      const result = await this.appClient.apps.createInstallationAccessToken({\n        installation_id: installationId,\n        headers: HEADERS\n      });\n      let repositoryNames;\n      if (result.data.repository_selection === \"selected\") {\n        const installationClient = new Octokit({\n          baseUrl: this.baseUrl,\n          auth: result.data.token\n        });\n        const repos = await installationClient.paginate(\n          installationClient.apps.listReposAccessibleToInstallation\n        );\n        const repositories = (_a2 = repos.repositories) != null ? _a2 : repos;\n        repositoryNames = repositories.map((repository) => repository.name);\n      }\n      return {\n        token: result.data.token,\n        expiresAt: DateTime.fromISO(result.data.expires_at),\n        repositories: repositoryNames\n      };\n    });\n  }\n  getInstallations() {\n    return this.appClient.paginate(this.appClient.apps.listInstallations);\n  }\n  async getInstallationData(owner) {\n    const allInstallations = await this.getInstallations();\n    const installation = allInstallations.find(\n      (inst) => {\n        var _a;\n        return inst.account && \"login\" in inst.account && ((_a = inst.account.login) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\")) === owner.toLocaleLowerCase(\"en-US\");\n      }\n    );\n    if (installation) {\n      return {\n        installationId: installation.id,\n        suspended: Boolean(installation.suspended_by)\n      };\n    }\n    const notFoundError = new Error(\n      `No app installation found for ${owner} in ${this.baseAuthConfig.appId}`\n    );\n    notFoundError.name = \"NotFoundError\";\n    throw notFoundError;\n  }\n}\nclass GithubAppCredentialsMux {\n  constructor(config) {\n    __publicField$5(this, \"apps\");\n    var _a, _b;\n    this.apps = (_b = (_a = config.apps) == null ? void 0 : _a.map((ac) => new GithubAppManager(ac, config.apiBaseUrl))) != null ? _b : [];\n  }\n  async getAllInstallations() {\n    if (!this.apps.length) {\n      return [];\n    }\n    const installs = await Promise.all(\n      this.apps.map((app) => app.getInstallations())\n    );\n    return installs.flat();\n  }\n  async getAppToken(owner, repo) {\n    if (this.apps.length === 0) {\n      return void 0;\n    }\n    const results = await Promise.all(\n      this.apps.map(\n        (app) => app.getInstallationCredentials(owner, repo).then(\n          (credentials) => ({ credentials, error: void 0 }),\n          (error) => ({ credentials: void 0, error })\n        )\n      )\n    );\n    const result = results.find(\n      (resultItem) => {\n        var _a;\n        return (_a = resultItem.credentials) == null ? void 0 : _a.accessToken;\n      }\n    );\n    if (result) {\n      return result.credentials.accessToken;\n    }\n    const errors = results.map((r) => r.error);\n    const notNotFoundError = errors.find((err) => (err == null ? void 0 : err.name) !== \"NotFoundError\");\n    if (notNotFoundError) {\n      throw notNotFoundError;\n    }\n    return void 0;\n  }\n}\nconst _SingleInstanceGithubCredentialsProvider = class _SingleInstanceGithubCredentialsProvider {\n  constructor(githubAppCredentialsMux, token) {\n    this.githubAppCredentialsMux = githubAppCredentialsMux;\n    this.token = token;\n  }\n  /**\n   * Returns {@link GithubCredentials} for a given URL.\n   *\n   * @remarks\n   *\n   * Consecutive calls to this method with the same URL will return cached\n   * credentials.\n   *\n   * The shortest lifetime for a token returned is 10 minutes.\n   *\n   * @example\n   * ```ts\n   * const { token, headers } = await getCredentials({\n   *   url: 'github.com/backstage/foobar'\n   * })\n   * ```\n   *\n   * @param opts - The organization or repository URL\n   * @returns A promise of {@link GithubCredentials}.\n   */\n  async getCredentials(opts) {\n    const parsed = parseGitUrl(opts.url);\n    const owner = parsed.owner || parsed.name;\n    const repo = parsed.owner ? parsed.name : void 0;\n    let type = \"app\";\n    let token = await this.githubAppCredentialsMux.getAppToken(owner, repo);\n    if (!token) {\n      type = \"token\";\n      token = this.token;\n    }\n    return {\n      headers: token ? { Authorization: `Bearer ${token}` } : void 0,\n      token,\n      type\n    };\n  }\n};\n__publicField$5(_SingleInstanceGithubCredentialsProvider, \"create\", (config) => {\n  return new _SingleInstanceGithubCredentialsProvider(\n    new GithubAppCredentialsMux(config),\n    config.token\n  );\n});\nlet SingleInstanceGithubCredentialsProvider = _SingleInstanceGithubCredentialsProvider;\n\nclass DefaultGithubCredentialsProvider {\n  constructor(providers) {\n    this.providers = providers;\n  }\n  static fromIntegrations(integrations) {\n    const credentialsProviders = /* @__PURE__ */ new Map();\n    integrations.github.list().forEach((integration) => {\n      const credentialsProvider = SingleInstanceGithubCredentialsProvider.create(integration.config);\n      credentialsProviders.set(integration.config.host, credentialsProvider);\n    });\n    return new DefaultGithubCredentialsProvider(credentialsProviders);\n  }\n  /**\n   * Returns {@link GithubCredentials} for a given URL.\n   *\n   * @remarks\n   *\n   * Consecutive calls to this method with the same URL will return cached\n   * credentials.\n   *\n   * The shortest lifetime for a token returned is 10 minutes.\n   *\n   * @example\n   * ```ts\n   * const { token, headers } = await getCredentials({\n   *   url: 'https://github.com/backstage/foobar'\n   * })\n   *\n   * const { token, headers } = await getCredentials({\n   *   url: 'https://github.com/backstage'\n   * })\n   * ```\n   *\n   * @param opts - The organization or repository URL\n   * @returns A promise of {@link GithubCredentials}.\n   */\n  async getCredentials(opts) {\n    const parsed = new URL(opts.url);\n    const provider = this.providers.get(parsed.host);\n    if (!provider) {\n      throw new Error(\n        `There is no GitHub integration that matches ${opts.url}. Please add a configuration for an integration.`\n      );\n    }\n    return provider.getCredentials(opts);\n  }\n}\n\nvar __defProp$4 = Object.defineProperty;\nvar __defNormalProp$4 = (obj, key, value) => key in obj ? __defProp$4(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$4 = (obj, key, value) => {\n  __defNormalProp$4(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GithubIntegration = class _GithubIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"github\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    return replaceGithubUrlType(defaultScmResolveUrl(options), \"tree\");\n  }\n  resolveEditUrl(url) {\n    return replaceGithubUrlType(url, \"edit\");\n  }\n};\n__publicField$4(_GithubIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readGithubIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _GithubIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet GithubIntegration = _GithubIntegration;\nfunction replaceGithubUrlType(url, type) {\n  return url.replace(\n    /\\/\\/([^/]+)\\/([^/]+)\\/([^/]+)\\/(blob|tree|edit)\\//,\n    (_, host, owner, repo) => {\n      return `//${host}/${owner}/${repo}/${type}/`;\n    }\n  );\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst getGitHubFileFetchUrl = getGithubFileFetchUrl;\nclass GitHubIntegration extends GithubIntegration {\n  constructor(integrationConfig) {\n    super(integrationConfig);\n  }\n  get config() {\n    return super.config;\n  }\n}\n__publicField$3(GitHubIntegration, \"factory\", GithubIntegration.factory);\nconst readGitHubIntegrationConfig = readGithubIntegrationConfig;\nconst readGitHubIntegrationConfigs = readGithubIntegrationConfigs;\nconst replaceGitHubUrlType = replaceGithubUrlType;\n\nconst GITLAB_HOST = \"gitlab.com\";\nconst GITLAB_API_BASE_URL = \"https://gitlab.com/api/v4\";\nfunction readGitLabIntegrationConfig(config) {\n  const host = config.getString(\"host\");\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  let baseUrl = config.getOptionalString(\"baseUrl\");\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === GITLAB_HOST) {\n    apiBaseUrl = GITLAB_API_BASE_URL;\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, \"/\");\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${host}' is not a valid host`\n    );\n  } else if (!apiBaseUrl || !isValidUrl(apiBaseUrl)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${apiBaseUrl}' is not a valid apiBaseUrl`\n    );\n  } else if (!isValidUrl(baseUrl)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${baseUrl}' is not a valid baseUrl`\n    );\n  }\n  return { host, token, apiBaseUrl, baseUrl };\n}\nfunction readGitLabIntegrationConfigs(configs) {\n  const result = configs.map(readGitLabIntegrationConfig);\n  if (!result.some((c) => c.host === GITLAB_HOST)) {\n    result.push({\n      host: GITLAB_HOST,\n      apiBaseUrl: GITLAB_API_BASE_URL,\n      baseUrl: `https://${GITLAB_HOST}`\n    });\n  }\n  return result;\n}\nfunction getGitLabIntegrationRelativePath(config) {\n  let relativePath = \"\";\n  if (config.host !== GITLAB_HOST) {\n    relativePath = new URL(config.baseUrl).pathname;\n  }\n  return trimEnd(relativePath, \"/\");\n}\n\nasync function getGitLabFileFetchUrl(url, config) {\n  const projectID = await getProjectId(url, config);\n  return buildProjectUrl(url, projectID, config).toString();\n}\nfunction getGitLabRequestOptions(config) {\n  const { token = \"\" } = config;\n  return {\n    headers: {\n      \"PRIVATE-TOKEN\": token\n    }\n  };\n}\nfunction buildProjectUrl(target, projectID, config) {\n  try {\n    const url = new URL(target);\n    const branchAndFilePath = url.pathname.split(\"/blob/\").slice(1).join(\"/blob/\");\n    const [branch, ...filePath] = branchAndFilePath.split(\"/\");\n    const relativePath = getGitLabIntegrationRelativePath(config);\n    url.pathname = [\n      ...relativePath ? [relativePath] : [],\n      \"api/v4/projects\",\n      projectID,\n      \"repository/files\",\n      encodeURIComponent(decodeURIComponent(filePath.join(\"/\"))),\n      \"raw\"\n    ].join(\"/\");\n    url.search = `?ref=${branch}`;\n    return url;\n  } catch (e) {\n    throw new Error(`Incorrect url: ${target}, ${e}`);\n  }\n}\nasync function getProjectId(target, config) {\n  const url = new URL(target);\n  if (!url.pathname.includes(\"/blob/\")) {\n    throw new Error(\"Please provide full path to yaml file from GitLab\");\n  }\n  try {\n    let repo = url.pathname.split(\"/-/blob/\")[0].split(\"/blob/\")[0];\n    const relativePath = getGitLabIntegrationRelativePath(config);\n    if (relativePath) {\n      repo = repo.replace(relativePath, \"\");\n    }\n    const repoIDLookup = new URL(\n      `${url.origin}${relativePath}/api/v4/projects/${encodeURIComponent(\n        repo.replace(/^\\//, \"\")\n      )}`\n    );\n    const response = await fetch(\n      repoIDLookup.toString(),\n      getGitLabRequestOptions(config)\n    );\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(\n        `GitLab Error '${data.error}', ${data.error_description}`\n      );\n    }\n    return Number(data.id);\n  } catch (e) {\n    throw new Error(`Could not get GitLab project ID for: ${target}, ${e}`);\n  }\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GitLabIntegration = class _GitLabIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"gitlab\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    return defaultScmResolveUrl(options);\n  }\n  resolveEditUrl(url) {\n    return replaceGitLabUrlType(url, \"edit\");\n  }\n};\n__publicField$2(_GitLabIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readGitLabIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.gitlab\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _GitLabIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet GitLabIntegration = _GitLabIntegration;\nfunction replaceGitLabUrlType(url, type) {\n  return url.replace(/\\/\\-\\/(blob|tree|edit)\\//, `/-/${type}/`);\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _SingleInstanceGitlabCredentialsProvider = class _SingleInstanceGitlabCredentialsProvider {\n  constructor(token) {\n    this.token = token;\n  }\n  async getCredentials(_opts) {\n    if (!this.token) {\n      return {};\n    }\n    return {\n      headers: {\n        Authorization: `Bearer ${this.token}`\n      },\n      token: this.token\n    };\n  }\n};\n__publicField$1(_SingleInstanceGitlabCredentialsProvider, \"create\", (config) => {\n  return new _SingleInstanceGitlabCredentialsProvider(config.token);\n});\nlet SingleInstanceGitlabCredentialsProvider = _SingleInstanceGitlabCredentialsProvider;\n\nclass DefaultGitlabCredentialsProvider {\n  constructor(providers) {\n    this.providers = providers;\n  }\n  static fromIntegrations(integrations) {\n    const credentialsProviders = /* @__PURE__ */ new Map();\n    integrations.gitlab.list().forEach((integration) => {\n      const credentialsProvider = SingleInstanceGitlabCredentialsProvider.create(integration.config);\n      credentialsProviders.set(integration.config.host, credentialsProvider);\n    });\n    return new DefaultGitlabCredentialsProvider(credentialsProviders);\n  }\n  async getCredentials(opts) {\n    const parsed = new URL(opts.url);\n    const provider = this.providers.get(parsed.host);\n    if (!provider) {\n      throw new Error(\n        `There is no GitLab integration that matches ${opts.url}. Please add a configuration for an integration.`\n      );\n    }\n    return provider.getCredentials(opts);\n  }\n}\n\nfunction readGoogleGcsIntegrationConfig(config) {\n  if (!config) {\n    return {};\n  }\n  if (!config.has(\"clientEmail\") && !config.has(\"privateKey\")) {\n    return {};\n  }\n  const privateKey = config.getString(\"privateKey\").split(\"\\\\n\").join(\"\\n\");\n  const clientEmail = config.getString(\"clientEmail\");\n  return { clientEmail, privateKey };\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ScmIntegrations {\n  constructor(integrationsByType) {\n    __publicField(this, \"byType\");\n    this.byType = integrationsByType;\n  }\n  static fromConfig(config) {\n    return new ScmIntegrations({\n      awsS3: AwsS3Integration.factory({ config }),\n      azure: AzureIntegration.factory({ config }),\n      bitbucket: BitbucketIntegration.factory({ config }),\n      bitbucketCloud: BitbucketCloudIntegration.factory({ config }),\n      bitbucketServer: BitbucketServerIntegration.factory({ config }),\n      gerrit: GerritIntegration.factory({ config }),\n      github: GithubIntegration.factory({ config }),\n      gitlab: GitLabIntegration.factory({ config }),\n      gitea: GiteaIntegration.factory({ config })\n    });\n  }\n  get awsS3() {\n    return this.byType.awsS3;\n  }\n  get azure() {\n    return this.byType.azure;\n  }\n  /**\n   * @deprecated in favor of `bitbucketCloud()` and `bitbucketServer()`\n   */\n  get bitbucket() {\n    return this.byType.bitbucket;\n  }\n  get bitbucketCloud() {\n    return this.byType.bitbucketCloud;\n  }\n  get bitbucketServer() {\n    return this.byType.bitbucketServer;\n  }\n  get gerrit() {\n    return this.byType.gerrit;\n  }\n  get github() {\n    return this.byType.github;\n  }\n  get gitlab() {\n    return this.byType.gitlab;\n  }\n  get gitea() {\n    return this.byType.gitea;\n  }\n  list() {\n    return Object.values(this.byType).flatMap(\n      (i) => i.list()\n    );\n  }\n  byUrl(url) {\n    let candidates = Object.values(this.byType).map((i) => i.byUrl(url)).filter(Boolean);\n    if (candidates.length > 1) {\n      const filteredCandidates = candidates.filter(\n        (x) => !(x instanceof BitbucketIntegration)\n      );\n      if (filteredCandidates.length !== 0) {\n        candidates = filteredCandidates;\n      }\n    }\n    return candidates[0];\n  }\n  byHost(host) {\n    return Object.values(this.byType).map((i) => i.byHost(host)).find(Boolean);\n  }\n  resolveUrl(options) {\n    const integration = this.byUrl(options.base);\n    if (!integration) {\n      return defaultScmResolveUrl(options);\n    }\n    return integration.resolveUrl(options);\n  }\n  resolveEditUrl(url) {\n    const integration = this.byUrl(url);\n    if (!integration) {\n      return url;\n    }\n    return integration.resolveEditUrl(url);\n  }\n}\n\nexport { AwsS3Integration, AzureIntegration, BitbucketCloudIntegration, BitbucketIntegration, BitbucketServerIntegration, DefaultAzureDevOpsCredentialsProvider, DefaultGithubCredentialsProvider, DefaultGitlabCredentialsProvider, GerritIntegration, GitHubIntegration, GitLabIntegration, GiteaIntegration, GithubAppCredentialsMux, GithubIntegration, ScmIntegrations, SingleInstanceGithubCredentialsProvider, buildGerritGitilesArchiveUrl, defaultScmResolveUrl, getAzureCommitsUrl, getAzureDownloadUrl, getAzureFileFetchUrl, getAzureRequestOptions, getBitbucketCloudDefaultBranch, getBitbucketCloudDownloadUrl, getBitbucketCloudFileFetchUrl, getBitbucketCloudRequestOptions, getBitbucketDefaultBranch, getBitbucketDownloadUrl, getBitbucketFileFetchUrl, getBitbucketRequestOptions, getBitbucketServerDefaultBranch, getBitbucketServerDownloadUrl, getBitbucketServerFileFetchUrl, getBitbucketServerRequestOptions, getGerritBranchApiUrl, getGerritCloneRepoUrl, getGerritFileContentsApiUrl, getGerritProjectsApiUrl, getGerritRequestOptions, getGitHubFileFetchUrl, getGitHubRequestOptions, getGitLabFileFetchUrl, getGitLabIntegrationRelativePath, getGitLabRequestOptions, getGiteaFileContentsUrl, getGiteaRequestOptions, getGithubFileFetchUrl, parseGerritGitilesUrl, parseGerritJsonResponse, readAwsS3IntegrationConfig, readAwsS3IntegrationConfigs, readAzureIntegrationConfig, readAzureIntegrationConfigs, readBitbucketCloudIntegrationConfig, readBitbucketCloudIntegrationConfigs, readBitbucketIntegrationConfig, readBitbucketIntegrationConfigs, readBitbucketServerIntegrationConfig, readBitbucketServerIntegrationConfigs, readGerritIntegrationConfig, readGerritIntegrationConfigs, readGitHubIntegrationConfig, readGitHubIntegrationConfigs, readGitLabIntegrationConfig, readGitLabIntegrationConfigs, readGiteaConfig, readGithubIntegrationConfig, readGithubIntegrationConfigs, readGoogleGcsIntegrationConfig, replaceGitHubUrlType, replaceGitLabUrlType, replaceGithubUrlType };\n//# sourceMappingURL=index.esm.js.map\n","import React, { Suspense, useEffect, useState } from 'react';\nimport { useOutlet } from 'react-router-dom';\nimport { PageWithHeader, Content, ContentHeader, CreateButton, SupportButton, CodeSnippet, TabbedCard, CardTab, Progress, InfoCard, WarningPanel, Link } from '@backstage/core-components';\nimport { createRouteRef, createExternalRouteRef, useApi, configApiRef, useRouteRef, createApiRef, createPlugin, createApiFactory, createRoutableExtension, createComponentExtension } from '@backstage/core-plugin-api';\nimport { CatalogTable } from '@backstage/plugin-catalog';\nimport { EntityListProvider, CatalogFilterLayout, EntityKindPicker, EntityTypePicker, UserListPicker, EntityOwnerPicker, EntityLifecyclePicker, EntityTagPicker, useEntity, EntityTable, useRelatedEntities } from '@backstage/plugin-catalog-react';\nimport { Alert, ToggleButton } from '@material-ui/lab';\nimport { useTheme } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles, Dialog, DialogTitle, Typography as Typography$1, DialogContent, Tabs, Tab, DialogActions, Button, Box } from '@material-ui/core';\nimport { RELATION_CONSUMES_API, RELATION_HAS_PART, RELATION_PROVIDES_API, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY } from '@backstage/catalog-model';\nimport ExtensionIcon from '@material-ui/icons/Extension';\n\nconst rootRoute = createRouteRef({\n  id: \"api-docs\"\n});\nconst registerComponentRouteRef = createExternalRouteRef({\n  id: \"register-component\",\n  optional: true\n});\n\nconst defaultColumns = [\n  CatalogTable.columns.createTitleColumn({ hidden: true }),\n  CatalogTable.columns.createNameColumn({ defaultKind: \"API\" }),\n  CatalogTable.columns.createSystemColumn(),\n  CatalogTable.columns.createOwnerColumn(),\n  CatalogTable.columns.createSpecTypeColumn(),\n  CatalogTable.columns.createSpecLifecycleColumn(),\n  CatalogTable.columns.createMetadataDescriptionColumn(),\n  CatalogTable.columns.createTagsColumn()\n];\nconst DefaultApiExplorerPage = (props) => {\n  var _a;\n  const { initiallySelectedFilter = \"all\", columns, actions } = props;\n  const configApi = useApi(configApiRef);\n  const generatedSubtitle = `${(_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Backstage\"} API Explorer`;\n  const registerComponentLink = useRouteRef(registerComponentRouteRef);\n  return /* @__PURE__ */ React.createElement(\n    PageWithHeader,\n    {\n      themeId: \"apis\",\n      title: \"APIs\",\n      subtitle: generatedSubtitle,\n      pageTitleOverride: \"APIs\"\n    },\n    /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ContentHeader, { title: \"\" }, /* @__PURE__ */ React.createElement(\n      CreateButton,\n      {\n        title: \"Register Existing API\",\n        to: registerComponentLink == null ? void 0 : registerComponentLink()\n      }\n    ), /* @__PURE__ */ React.createElement(SupportButton, null, \"All your APIs\")), /* @__PURE__ */ React.createElement(EntityListProvider, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout.Filters, null, /* @__PURE__ */ React.createElement(EntityKindPicker, { initialFilter: \"api\", hidden: true }), /* @__PURE__ */ React.createElement(EntityTypePicker, null), /* @__PURE__ */ React.createElement(UserListPicker, { initialFilter: initiallySelectedFilter }), /* @__PURE__ */ React.createElement(EntityOwnerPicker, null), /* @__PURE__ */ React.createElement(EntityLifecyclePicker, null), /* @__PURE__ */ React.createElement(EntityTagPicker, null)), /* @__PURE__ */ React.createElement(CatalogFilterLayout.Content, null, /* @__PURE__ */ React.createElement(\n      CatalogTable,\n      {\n        columns: columns || defaultColumns,\n        actions\n      }\n    )))))\n  );\n};\n\nconst ApiExplorerPage$1 = (props) => {\n  const outlet = useOutlet();\n  return outlet || /* @__PURE__ */ React.createElement(DefaultApiExplorerPage, { ...props });\n};\n\nconst apiDocsConfigRef = createApiRef({\n  id: \"plugin.api-docs.config\"\n});\n\nconst PlainApiDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      text: props.definition,\n      language: props.language,\n      showCopyCodeButton: true\n    }\n  );\n};\n\nconst ApiDefinitionCard = () => {\n  var _a;\n  const { entity } = useEntity();\n  const config = useApi(apiDocsConfigRef);\n  const { getApiDefinitionWidget } = config;\n  if (!entity) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, \"Could not fetch the API\");\n  }\n  const definitionWidget = getApiDefinitionWidget(entity);\n  const entityTitle = (_a = entity.metadata.title) != null ? _a : entity.metadata.name;\n  if (definitionWidget) {\n    return /* @__PURE__ */ React.createElement(TabbedCard, { title: entityTitle }, /* @__PURE__ */ React.createElement(CardTab, { label: definitionWidget.title, key: \"widget\" }, definitionWidget.component(entity.spec.definition)), /* @__PURE__ */ React.createElement(CardTab, { label: \"Raw\", key: \"raw\" }, /* @__PURE__ */ React.createElement(\n      PlainApiDefinitionWidget,\n      {\n        definition: entity.spec.definition,\n        language: definitionWidget.rawLanguage || entity.spec.type\n      }\n    )));\n  }\n  return /* @__PURE__ */ React.createElement(\n    TabbedCard,\n    {\n      title: entityTitle,\n      children: [\n        // Has to be an array, otherwise typescript doesn't like that this has only a single child\n        /* @__PURE__ */ React.createElement(CardTab, { label: entity.spec.type, key: \"raw\" }, /* @__PURE__ */ React.createElement(\n          PlainApiDefinitionWidget,\n          {\n            definition: entity.spec.definition,\n            language: entity.spec.type\n          }\n        ))\n      ]\n    }\n  );\n};\n\nconst LazyAsyncApiDefinition = React.lazy(\n  () => import('./esm/AsyncApiDefinition-ed6a859d.esm.js').then((m) => ({\n    default: m.AsyncApiDefinition\n  }))\n);\nconst AsyncApiDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(LazyAsyncApiDefinition, { ...props }));\n};\n\nconst LazyGraphQlDefinition = React.lazy(\n  () => import('./esm/GraphQlDefinition-575f34a3.esm.js').then((m) => ({\n    default: m.GraphQlDefinition\n  }))\n);\nconst GraphQlDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(LazyGraphQlDefinition, { ...props }));\n};\n\nconst LazyOpenApiDefinition = React.lazy(\n  () => import('./esm/OpenApiDefinition-20ae2e8c.esm.js').then((m) => ({\n    default: m.OpenApiDefinition\n  }))\n);\nconst OpenApiDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(LazyOpenApiDefinition, { ...props }));\n};\n\nconst GrpcApiDefinitionWidget = (props) => {\n  const theme = useTheme();\n  return /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      customStyle: { backgroundColor: theme.palette.background.default },\n      text: props.definition,\n      language: \"protobuf\",\n      showCopyCodeButton: true\n    }\n  );\n};\n\nconst TrpcApiDefinitionWidget = (props) => {\n  const { definition } = props;\n  const theme = useTheme();\n  return /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      customStyle: { backgroundColor: theme.palette.background.default },\n      text: definition,\n      language: \"typescript\",\n      showCopyCodeButton: true\n    }\n  );\n};\n\nfunction defaultDefinitionWidgets() {\n  return [\n    {\n      type: \"openapi\",\n      title: \"OpenAPI\",\n      rawLanguage: \"yaml\",\n      component: (definition) => /* @__PURE__ */ React.createElement(OpenApiDefinitionWidget, { definition })\n    },\n    {\n      type: \"asyncapi\",\n      title: \"AsyncAPI\",\n      rawLanguage: \"yaml\",\n      component: (definition) => /* @__PURE__ */ React.createElement(AsyncApiDefinitionWidget, { definition })\n    },\n    {\n      type: \"graphql\",\n      title: \"GraphQL\",\n      rawLanguage: \"graphql\",\n      component: (definition) => /* @__PURE__ */ React.createElement(GraphQlDefinitionWidget, { definition })\n    },\n    {\n      type: \"grpc\",\n      title: \"gRPC\",\n      component: (definition) => /* @__PURE__ */ React.createElement(GrpcApiDefinitionWidget, { definition })\n    },\n    {\n      type: \"trpc\",\n      title: \"tRPC\",\n      component: (definition) => /* @__PURE__ */ React.createElement(TrpcApiDefinitionWidget, { definition })\n    }\n  ];\n}\n\nconst ApiTypeTitle = (props) => {\n  const { apiEntity } = props;\n  const config = useApi(apiDocsConfigRef);\n  const definition = config.getApiDefinitionWidget(apiEntity);\n  const type = definition ? definition.title : apiEntity.spec.type;\n  return /* @__PURE__ */ React.createElement(Typography, { component: \"span\" }, type);\n};\n\nconst useStyles = makeStyles((theme) => ({\n  fullHeightDialog: {\n    height: \"calc(100% - 64px)\"\n  },\n  root: {\n    display: \"flex\",\n    flexGrow: 1,\n    width: \"100%\",\n    height: \"100%\"\n  },\n  tabs: {\n    borderRight: `1px solid ${theme.palette.divider}`,\n    flexShrink: 0\n  },\n  tabContents: {\n    flexGrow: 1,\n    overflowX: \"auto\"\n  },\n  title: {\n    color: theme.palette.text.primary,\n    wordBreak: \"break-word\",\n    fontSize: theme.typography.h3.fontSize,\n    marginBottom: 0\n  },\n  type: {\n    textTransform: \"uppercase\",\n    fontSize: 11,\n    opacity: 0.8,\n    marginBottom: theme.spacing(1),\n    color: theme.palette.text.primary\n  }\n}));\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      role: \"tabpanel\",\n      hidden: value !== index,\n      id: `vertical-tabpanel-${index}`,\n      \"aria-labelledby\": `vertical-tab-${index}`,\n      className: classes.tabContents,\n      ...other\n    },\n    value === index && /* @__PURE__ */ React.createElement(Box, { pl: 3, pr: 3 }, children)\n  );\n}\nfunction a11yProps(index) {\n  return {\n    id: `vertical-tab-${index}`,\n    \"aria-controls\": `vertical-tabpanel-${index}`\n  };\n}\nfunction ApiDefinitionDialog(props) {\n  var _a, _b, _c;\n  const { open, entity, onClose } = props;\n  const [activeTab, setActiveTab] = React.useState(0);\n  const classes = useStyles();\n  useEffect(() => {\n    setActiveTab(0);\n  }, [open]);\n  const config = useApi(apiDocsConfigRef);\n  const definitionWidget = config.getApiDefinitionWidget(entity);\n  let tabIndex = 0;\n  let tabPanelIndex = 0;\n  return /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      fullWidth: true,\n      maxWidth: \"xl\",\n      open,\n      onClose,\n      \"aria-labelledby\": \"api-definition-dialog-title\",\n      PaperProps: { className: classes.fullHeightDialog }\n    },\n    /* @__PURE__ */ React.createElement(DialogTitle, { id: \"api-definition-dialog-title\", disableTypography: true }, /* @__PURE__ */ React.createElement(Typography$1, { className: classes.type }, \"API - \", (_a = definitionWidget == null ? void 0 : definitionWidget.title) != null ? _a : \"Raw\"), /* @__PURE__ */ React.createElement(Typography$1, { className: classes.title, variant: \"h1\" }, (_b = entity.metadata.title) != null ? _b : entity.metadata.name)),\n    /* @__PURE__ */ React.createElement(DialogContent, { dividers: true, className: classes.root }, /* @__PURE__ */ React.createElement(\n      Tabs,\n      {\n        orientation: \"vertical\",\n        variant: \"scrollable\",\n        value: activeTab,\n        onChange: (_, newValue) => setActiveTab(newValue),\n        \"aria-label\": \"API definition options\",\n        className: classes.tabs\n      },\n      definitionWidget ? /* @__PURE__ */ React.createElement(Tab, { label: definitionWidget.title, ...a11yProps(tabIndex++) }) : null,\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Raw\", ...a11yProps(tabIndex++) })\n    ), definitionWidget ? /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: tabPanelIndex++ }, definitionWidget.component(entity.spec.definition)) : null, /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: tabPanelIndex++ }, /* @__PURE__ */ React.createElement(\n      PlainApiDefinitionWidget,\n      {\n        definition: entity.spec.definition,\n        language: (_c = definitionWidget == null ? void 0 : definitionWidget.rawLanguage) != null ? _c : entity.spec.type\n      }\n    ))),\n    /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, { onClick: onClose, color: \"primary\" }, \"Close\"))\n  );\n}\n\nfunction createSpecApiTypeColumn() {\n  return {\n    title: \"Type\",\n    field: \"spec.type\",\n    render: (entity) => /* @__PURE__ */ React.createElement(ApiTypeTitle, { apiEntity: entity })\n  };\n}\nconst ApiDefinitionButton = ({ apiEntity }) => {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    ToggleButton,\n    {\n      \"aria-label\": \"Toggle API Definition Dialog\",\n      onClick: () => setDialogOpen(!dialogOpen)\n    },\n    /* @__PURE__ */ React.createElement(ExtensionIcon, null)\n  ), /* @__PURE__ */ React.createElement(\n    ApiDefinitionDialog,\n    {\n      entity: apiEntity,\n      open: dialogOpen,\n      onClose: () => setDialogOpen(false)\n    }\n  ));\n};\nfunction createApiDefinitionColumn() {\n  return {\n    title: \"API Definition\",\n    render: (entity) => /* @__PURE__ */ React.createElement(ApiDefinitionButton, { apiEntity: entity })\n  };\n}\nconst apiEntityColumns = [\n  EntityTable.columns.createEntityRefColumn({ defaultKind: \"API\" }),\n  EntityTable.columns.createSystemColumn(),\n  EntityTable.columns.createOwnerColumn(),\n  createSpecApiTypeColumn(),\n  EntityTable.columns.createSpecLifecycleColumn(),\n  EntityTable.columns.createMetadataDescriptionColumn(),\n  createApiDefinitionColumn()\n];\n\nconst ConsumedApisCard = (props) => {\n  const { variant = \"gridItem\", columns = apiEntityColumns } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_CONSUMES_API\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Consumed APIs\" }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Consumed APIs\" }, /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load APIs\",\n        message: /* @__PURE__ */ React.createElement(CodeSnippet, { text: `${error}`, language: \"text\" })\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    EntityTable,\n    {\n      title: \"Consumed APIs\",\n      variant,\n      emptyContent: /* @__PURE__ */ React.createElement(\"div\", { style: { textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body1\" }, \"This \", entity.kind.toLocaleLowerCase(\"en-US\"), \" does not consume any APIs.\"), /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body2\" }, /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional\" }, \"Learn how to change this.\"))),\n      columns,\n      entities\n    }\n  );\n};\n\nconst presetColumns = [\n  EntityTable.columns.createEntityRefColumn({ defaultKind: \"API\" }),\n  EntityTable.columns.createOwnerColumn(),\n  createSpecApiTypeColumn(),\n  EntityTable.columns.createSpecLifecycleColumn(),\n  EntityTable.columns.createMetadataDescriptionColumn()\n];\nconst HasApisCard = (props) => {\n  const { variant = \"gridItem\", columns = presetColumns } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_HAS_PART,\n    kind: \"API\"\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"APIs\" }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"APIs\" }, /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load APIs\",\n        message: /* @__PURE__ */ React.createElement(CodeSnippet, { text: `${error}`, language: \"text\" })\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    EntityTable,\n    {\n      title: \"APIs\",\n      variant,\n      emptyContent: /* @__PURE__ */ React.createElement(\"div\", { style: { textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body1\" }, \"This \", entity.kind.toLocaleLowerCase(\"en-US\"), \" does not contain any APIs.\"), /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body2\" }, /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api\" }, \"Learn how to change this.\"))),\n      columns,\n      entities\n    }\n  );\n};\n\nconst ProvidedApisCard = (props) => {\n  const { variant = \"gridItem\", columns = apiEntityColumns } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_PROVIDES_API\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Provided APIs\" }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Provided APIs\" }, /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load APIs\",\n        message: /* @__PURE__ */ React.createElement(CodeSnippet, { text: `${error}`, language: \"text\" })\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    EntityTable,\n    {\n      title: \"Provided APIs\",\n      variant,\n      emptyContent: /* @__PURE__ */ React.createElement(\"div\", { style: { textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body1\" }, \"This \", entity.kind.toLocaleLowerCase(\"en-US\"), \" does not provide any APIs.\"), /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body2\" }, /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional\" }, \"Learn how to change this.\"))),\n      columns,\n      entities\n    }\n  );\n};\n\nconst ConsumingComponentsCard = (props) => {\n  const { variant = \"gridItem\" } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_API_CONSUMED_BY\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Consumers\" }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Consumers\" }, /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load components\",\n        message: /* @__PURE__ */ React.createElement(CodeSnippet, { text: `${error}`, language: \"text\" })\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    EntityTable,\n    {\n      title: \"Consumers\",\n      variant,\n      emptyContent: /* @__PURE__ */ React.createElement(\"div\", { style: { textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body1\" }, \"No component consumes this API.\"), /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body2\" }, /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional\" }, \"Learn how to change this.\"))),\n      columns: EntityTable.componentEntityColumns,\n      entities\n    }\n  );\n};\n\nconst ProvidingComponentsCard = (props) => {\n  const { variant = \"gridItem\" } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_API_PROVIDED_BY\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Providers\" }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Providers\" }, /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load components\",\n        message: /* @__PURE__ */ React.createElement(CodeSnippet, { text: `${error}`, language: \"text\" })\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    EntityTable,\n    {\n      title: \"Providers\",\n      variant,\n      emptyContent: /* @__PURE__ */ React.createElement(\"div\", { style: { textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body1\" }, \"No component provides this API.\"), /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body2\" }, /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional\" }, \"Learn how to change this.\"))),\n      columns: EntityTable.componentEntityColumns,\n      entities\n    }\n  );\n};\n\nconst apiDocsPlugin = createPlugin({\n  id: \"api-docs\",\n  routes: {\n    root: rootRoute\n  },\n  apis: [\n    createApiFactory({\n      api: apiDocsConfigRef,\n      deps: {},\n      factory: () => {\n        const definitionWidgets = defaultDefinitionWidgets();\n        return {\n          getApiDefinitionWidget: (apiEntity) => {\n            return definitionWidgets.find((d) => d.type === apiEntity.spec.type);\n          }\n        };\n      }\n    })\n  ],\n  externalRoutes: {\n    registerApi: registerComponentRouteRef\n  }\n});\nconst ApiExplorerPage = apiDocsPlugin.provide(\n  createRoutableExtension({\n    name: \"ApiExplorerPage\",\n    component: () => import('./esm/index-a4ca4887.esm.js').then((m) => m.ApiExplorerIndexPage),\n    mountPoint: rootRoute\n  })\n);\nconst EntityApiDefinitionCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityApiDefinitionCard\",\n    component: {\n      lazy: () => import('./esm/index-3a37145c.esm.js').then((m) => m.ApiDefinitionCard)\n    }\n  })\n);\nconst EntityConsumedApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityConsumedApisCard\",\n    component: {\n      lazy: () => import('./esm/index-9c21a15c.esm.js').then((m) => m.ConsumedApisCard)\n    }\n  })\n);\nconst EntityConsumingComponentsCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityConsumingComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-49159f3b.esm.js').then(\n        (m) => m.ConsumingComponentsCard\n      )\n    }\n  })\n);\nconst EntityProvidedApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityProvidedApisCard\",\n    component: {\n      lazy: () => import('./esm/index-9c21a15c.esm.js').then((m) => m.ProvidedApisCard)\n    }\n  })\n);\nconst EntityProvidingComponentsCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityProvidingComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-49159f3b.esm.js').then(\n        (m) => m.ProvidingComponentsCard\n      )\n    }\n  })\n);\nconst EntityHasApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasApisCard\",\n    component: {\n      lazy: () => import('./esm/index-9c21a15c.esm.js').then((m) => m.HasApisCard)\n    }\n  })\n);\n\nexport { ApiDefinitionCard, ApiDefinitionDialog, ApiExplorerPage$1 as ApiExplorerIndexPage, ApiExplorerPage, ApiTypeTitle, AsyncApiDefinitionWidget, ConsumedApisCard, ConsumingComponentsCard, DefaultApiExplorerPage, EntityApiDefinitionCard, EntityConsumedApisCard, EntityConsumingComponentsCard, EntityHasApisCard, EntityProvidedApisCard, EntityProvidingComponentsCard, GraphQlDefinitionWidget, HasApisCard, OpenApiDefinitionWidget, PlainApiDefinitionWidget, ProvidedApisCard, ProvidingComponentsCard, TrpcApiDefinitionWidget, apiDocsConfigRef, apiDocsPlugin, defaultDefinitionWidgets, apiDocsPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createPermission } from '@backstage/plugin-permission-common';\n\nconst RESOURCE_TYPE_CATALOG_ENTITY = \"catalog-entity\";\nconst catalogEntityReadPermission = createPermission({\n  name: \"catalog.entity.read\",\n  attributes: {\n    action: \"read\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogEntityCreatePermission = createPermission({\n  name: \"catalog.entity.create\",\n  attributes: {\n    action: \"create\"\n  }\n});\nconst catalogEntityDeletePermission = createPermission({\n  name: \"catalog.entity.delete\",\n  attributes: {\n    action: \"delete\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogEntityRefreshPermission = createPermission({\n  name: \"catalog.entity.refresh\",\n  attributes: {\n    action: \"update\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogLocationReadPermission = createPermission({\n  name: \"catalog.location.read\",\n  attributes: {\n    action: \"read\"\n  }\n});\nconst catalogLocationCreatePermission = createPermission({\n  name: \"catalog.location.create\",\n  attributes: {\n    action: \"create\"\n  }\n});\nconst catalogLocationDeletePermission = createPermission({\n  name: \"catalog.location.delete\",\n  attributes: {\n    action: \"delete\"\n  }\n});\nconst catalogPermissions = [\n  catalogEntityReadPermission,\n  catalogEntityCreatePermission,\n  catalogEntityDeletePermission,\n  catalogEntityRefreshPermission,\n  catalogLocationReadPermission,\n  catalogLocationCreatePermission,\n  catalogLocationDeletePermission\n];\n\nexport { RESOURCE_TYPE_CATALOG_ENTITY, catalogEntityCreatePermission, catalogEntityDeletePermission, catalogEntityReadPermission, catalogEntityRefreshPermission, catalogLocationCreatePermission, catalogLocationDeletePermission, catalogLocationReadPermission, catalogPermissions };\n//# sourceMappingURL=alpha.esm.js.map\n","import { DEFAULT_NAMESPACE, RELATION_OWNER_OF, RELATION_OWNED_BY, RELATION_CONSUMES_API, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY, RELATION_PROVIDES_API, RELATION_HAS_PART, RELATION_PART_OF, RELATION_PARENT_OF, RELATION_CHILD_OF, RELATION_HAS_MEMBER, RELATION_MEMBER_OF, RELATION_DEPENDS_ON, RELATION_DEPENDENCY_OF, stringifyEntityRef } from '@backstage/catalog-model';\nimport { DependencyGraph, DependencyGraphTypes } from '@backstage/core-components';\nimport { useApp, useApi, errorApiRef, createRouteRef, createExternalRouteRef, createPlugin, createComponentExtension, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { makeStyles as makeStyles$2, useTheme, CircularProgress } from '@material-ui/core';\nimport classNames from 'classnames';\nimport React, { useState, useRef, useLayoutEffect, useCallback, useEffect, useMemo } from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { humanizeEntityRef, catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles as makeStyles$1 } from '@material-ui/core/styles';\nimport WorkIcon from '@material-ui/icons/Work';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport limiterFactory from 'p-limit';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\n\nconst useStyles$2 = makeStyles(\n  (theme) => ({\n    text: {\n      fill: theme.palette.textContrast\n    },\n    secondary: {\n      fill: theme.palette.textSubtle\n    }\n  }),\n  { name: \"PluginCatalogGraphCustomLabel\" }\n);\nfunction DefaultRenderLabel({\n  edge: { relations }\n}) {\n  const classes = useStyles$2();\n  return /* @__PURE__ */ React.createElement(\"text\", { className: classes.text, textAnchor: \"middle\" }, relations.map((r, i) => /* @__PURE__ */ React.createElement(\"tspan\", { key: r, className: classNames(i > 0 && classes.secondary) }, i > 0 && /* @__PURE__ */ React.createElement(\"tspan\", null, \" / \"), r)));\n}\n\nfunction EntityKindIcon({\n  kind,\n  ...props\n}) {\n  var _a;\n  const app = useApp();\n  const Icon = (_a = app.getSystemIcon(`kind:${kind.toLocaleLowerCase(\"en-US\")}`)) != null ? _a : WorkIcon;\n  return /* @__PURE__ */ React.createElement(Icon, { ...props });\n}\n\nconst useStyles$1 = makeStyles$1(\n  (theme) => ({\n    node: {\n      fill: theme.palette.grey[300],\n      stroke: theme.palette.grey[300],\n      \"&.primary\": {\n        fill: theme.palette.primary.light,\n        stroke: theme.palette.primary.light\n      },\n      \"&.secondary\": {\n        fill: theme.palette.secondary.light,\n        stroke: theme.palette.secondary.light\n      }\n    },\n    text: {\n      fill: theme.palette.getContrastText(theme.palette.grey[300]),\n      \"&.primary\": {\n        fill: theme.palette.primary.contrastText\n      },\n      \"&.secondary\": {\n        fill: theme.palette.secondary.contrastText\n      },\n      \"&.focused\": {\n        fontWeight: \"bold\"\n      }\n    },\n    clickable: {\n      cursor: \"pointer\"\n    }\n  }),\n  { name: \"PluginCatalogGraphCustomNode\" }\n);\nfunction DefaultRenderNode({\n  node: { id, entity, color = \"default\", focused, onClick }\n}) {\n  const classes = useStyles$1();\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const idRef = useRef(null);\n  useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const {\n    kind,\n    metadata: { name, namespace = DEFAULT_NAMESPACE, title }\n  } = entity;\n  const padding = 10;\n  const iconSize = height;\n  const paddedIconWidth = kind ? iconSize + padding : 0;\n  const paddedWidth = paddedIconWidth + width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  const displayTitle = title != null ? title : kind && name && namespace ? humanizeEntityRef({ kind, name, namespace }) : id;\n  return /* @__PURE__ */ React.createElement(\"g\", { onClick, className: classNames(onClick && classes.clickable) }, /* @__PURE__ */ React.createElement(\n    \"rect\",\n    {\n      className: classNames(\n        classes.node,\n        color === \"primary\" && \"primary\",\n        color === \"secondary\" && \"secondary\"\n      ),\n      width: paddedWidth,\n      height: paddedHeight,\n      rx: 10\n    }\n  ), kind && /* @__PURE__ */ React.createElement(\n    EntityKindIcon,\n    {\n      kind,\n      y: padding,\n      x: padding,\n      width: iconSize,\n      height: iconSize,\n      className: classNames(\n        classes.text,\n        focused && \"focused\",\n        color === \"primary\" && \"primary\",\n        color === \"secondary\" && \"secondary\"\n      )\n    }\n  ), /* @__PURE__ */ React.createElement(\n    \"text\",\n    {\n      ref: idRef,\n      className: classNames(\n        classes.text,\n        focused && \"focused\",\n        color === \"primary\" && \"primary\",\n        color === \"secondary\" && \"secondary\"\n      ),\n      y: paddedHeight / 2,\n      x: paddedIconWidth + (width + padding * 2) / 2,\n      textAnchor: \"middle\",\n      alignmentBaseline: \"middle\"\n    },\n    displayTitle\n  ));\n}\n\nconst ALL_RELATION_PAIRS = [\n  [RELATION_OWNER_OF, RELATION_OWNED_BY],\n  [RELATION_CONSUMES_API, RELATION_API_CONSUMED_BY],\n  [RELATION_API_PROVIDED_BY, RELATION_PROVIDES_API],\n  [RELATION_HAS_PART, RELATION_PART_OF],\n  [RELATION_PARENT_OF, RELATION_CHILD_OF],\n  [RELATION_HAS_MEMBER, RELATION_MEMBER_OF],\n  [RELATION_DEPENDS_ON, RELATION_DEPENDENCY_OF]\n];\n\nvar Direction = /* @__PURE__ */ ((Direction2) => {\n  Direction2[\"TOP_BOTTOM\"] = \"TB\";\n  Direction2[\"BOTTOM_TOP\"] = \"BT\";\n  Direction2[\"LEFT_RIGHT\"] = \"LR\";\n  Direction2[\"RIGHT_LEFT\"] = \"RL\";\n  return Direction2;\n})(Direction || {});\n\nconst limiter = limiterFactory(10);\nfunction useEntityStore() {\n  const catalogClient = useApi(catalogApiRef);\n  const state = useRef({\n    requestedEntities: /* @__PURE__ */ new Set(),\n    outstandingEntities: /* @__PURE__ */ new Map(),\n    cachedEntities: /* @__PURE__ */ new Map()\n  });\n  const [entities, setEntities] = useState({});\n  const updateEntities = useCallback(() => {\n    const { cachedEntities, requestedEntities } = state.current;\n    const filteredEntities = {};\n    requestedEntities.forEach((entityRef) => {\n      const entity = cachedEntities.get(entityRef);\n      if (entity) {\n        filteredEntities[entityRef] = entity;\n      }\n    });\n    setEntities(filteredEntities);\n  }, [state, setEntities]);\n  const [asyncState, fetch] = useAsyncFn(async () => {\n    const { requestedEntities, outstandingEntities, cachedEntities } = state.current;\n    await Promise.all(\n      Array.from(requestedEntities).map(\n        (entityRef) => limiter(async () => {\n          if (cachedEntities.has(entityRef)) {\n            return;\n          }\n          if (outstandingEntities.has(entityRef)) {\n            await outstandingEntities.get(entityRef);\n            return;\n          }\n          const promise = catalogClient.getEntityByRef(entityRef);\n          outstandingEntities.set(entityRef, promise);\n          try {\n            const entity = await promise;\n            if (entity) {\n              cachedEntities.set(entityRef, entity);\n              updateEntities();\n            }\n          } finally {\n            outstandingEntities.delete(entityRef);\n          }\n        })\n      )\n    );\n  }, [state, updateEntities]);\n  const { loading, error } = asyncState;\n  const requestEntities = useCallback(\n    (entityRefs) => {\n      const n = new Set(entityRefs);\n      const { requestedEntities } = state.current;\n      if (n.size !== requestedEntities.size || Array.from(n).some((e) => !requestedEntities.has(e))) {\n        state.current.requestedEntities = n;\n        fetch();\n        updateEntities();\n      }\n    },\n    [state, fetch, updateEntities]\n  );\n  return {\n    entities,\n    loading,\n    error,\n    requestEntities\n  };\n}\n\nfunction useEntityRelationGraph({\n  rootEntityRefs,\n  filter: { maxDepth = Number.POSITIVE_INFINITY, relations, kinds } = {}\n}) {\n  const { entities, loading, error, requestEntities } = useEntityStore();\n  useEffect(() => {\n    const expectedEntities = /* @__PURE__ */ new Set([...rootEntityRefs]);\n    const processedEntityRefs = /* @__PURE__ */ new Set();\n    let nextDepthRefQueue = [...rootEntityRefs];\n    let depth = 0;\n    while (nextDepthRefQueue.length > 0 && (!isFinite(maxDepth) || depth < maxDepth)) {\n      const entityRefQueue = nextDepthRefQueue;\n      nextDepthRefQueue = [];\n      while (entityRefQueue.length > 0) {\n        const entityRef = entityRefQueue.shift();\n        const entity = entities[entityRef];\n        processedEntityRefs.add(entityRef);\n        if (entity && entity.relations) {\n          for (const rel of entity.relations) {\n            if ((!relations || relations.includes(rel.type)) && (!kinds || kinds.some(\n              (kind) => rel.targetRef.startsWith(\n                `${kind.toLocaleLowerCase(\"en-US\")}:`\n              )\n            ))) {\n              if (!processedEntityRefs.has(rel.targetRef)) {\n                nextDepthRefQueue.push(rel.targetRef);\n                expectedEntities.add(rel.targetRef);\n              }\n            }\n          }\n        }\n      }\n      ++depth;\n    }\n    requestEntities([...expectedEntities]);\n  }, [entities, rootEntityRefs, maxDepth, relations, kinds, requestEntities]);\n  return {\n    entities,\n    loading,\n    error\n  };\n}\n\nfunction useEntityRelationNodesAndEdges({\n  rootEntityRefs,\n  maxDepth = Number.POSITIVE_INFINITY,\n  unidirectional = true,\n  mergeRelations = true,\n  kinds,\n  relations,\n  onNodeClick,\n  relationPairs = ALL_RELATION_PAIRS\n}) {\n  const [nodesAndEdges, setNodesAndEdges] = useState({});\n  const { entities, loading, error } = useEntityRelationGraph({\n    rootEntityRefs,\n    filter: {\n      maxDepth,\n      kinds,\n      relations\n    }\n  });\n  useDebounce(\n    () => {\n      var _a;\n      if (!entities || Object.keys(entities).length === 0) {\n        setNodesAndEdges({});\n        return;\n      }\n      const nodes = Object.entries(entities).map(([entityRef, entity]) => {\n        const focused = rootEntityRefs.includes(entityRef);\n        const node = {\n          id: entityRef,\n          entity,\n          focused,\n          color: focused ? \"secondary\" : \"primary\",\n          // @deprecated\n          kind: entity.kind,\n          name: entity.metadata.name,\n          namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n          title: entity.metadata.title,\n          spec: entity.spec\n        };\n        if (onNodeClick) {\n          node.onClick = (event) => onNodeClick(node, event);\n        }\n        return node;\n      });\n      const edges = [];\n      const visitedNodes = /* @__PURE__ */ new Set();\n      const nodeQueue = [...rootEntityRefs];\n      while (nodeQueue.length > 0) {\n        const entityRef = nodeQueue.pop();\n        const entity = entities[entityRef];\n        visitedNodes.add(entityRef);\n        if (entity) {\n          (_a = entity == null ? void 0 : entity.relations) == null ? void 0 : _a.forEach((rel) => {\n            var _a2;\n            if (!entities[rel.targetRef]) {\n              return;\n            }\n            if (relations && !relations.includes(rel.type)) {\n              return;\n            }\n            if (kinds && !kinds.some(\n              (kind) => rel.targetRef.startsWith(`${kind.toLocaleLowerCase(\"en-US\")}:`)\n            )) {\n              return;\n            }\n            if (!unidirectional || !visitedNodes.has(rel.targetRef)) {\n              if (mergeRelations) {\n                const pair = (_a2 = relationPairs.find(\n                  ([l, r]) => l === rel.type || r === rel.type\n                )) != null ? _a2 : [rel.type];\n                const [left] = pair;\n                edges.push({\n                  from: left === rel.type ? entityRef : rel.targetRef,\n                  to: left === rel.type ? rel.targetRef : entityRef,\n                  relations: pair,\n                  label: \"visible\"\n                });\n              } else {\n                edges.push({\n                  from: entityRef,\n                  to: rel.targetRef,\n                  relations: [rel.type],\n                  label: \"visible\"\n                });\n              }\n            }\n            if (!visitedNodes.has(rel.targetRef)) {\n              nodeQueue.push(rel.targetRef);\n              visitedNodes.add(rel.targetRef);\n            }\n          });\n        }\n      }\n      setNodesAndEdges({ nodes, edges });\n    },\n    100,\n    [\n      entities,\n      rootEntityRefs,\n      kinds,\n      relations,\n      unidirectional,\n      mergeRelations,\n      onNodeClick,\n      relationPairs\n    ]\n  );\n  return {\n    loading,\n    error,\n    ...nodesAndEdges\n  };\n}\n\nconst useStyles = makeStyles$2(\n  (theme) => ({\n    progress: {\n      position: \"absolute\",\n      left: \"50%\",\n      top: \"50%\",\n      marginLeft: \"-20px\",\n      marginTop: \"-20px\"\n    },\n    container: {\n      position: \"relative\",\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    graph: {\n      width: \"100%\",\n      flex: 1,\n      // Right now there is no good way to style edges between nodes, we have to\n      // fall back to these hacks:\n      \"& path[marker-end]\": {\n        transition: \"filter 0.1s ease-in-out\"\n      },\n      \"& path[marker-end]:hover\": {\n        filter: `drop-shadow(2px 2px 4px ${theme.palette.primary.dark});`\n      },\n      \"& g[data-testid=label]\": {\n        transition: \"transform 0s\"\n      }\n    }\n  }),\n  { name: \"PluginCatalogGraphEntityRelationsGraph\" }\n);\nconst EntityRelationsGraph = (props) => {\n  const {\n    rootEntityNames,\n    maxDepth = 2,\n    unidirectional = true,\n    mergeRelations = true,\n    kinds,\n    relations,\n    direction = Direction.LEFT_RIGHT,\n    onNodeClick,\n    relationPairs = ALL_RELATION_PAIRS,\n    className,\n    zoom = \"enabled\",\n    renderNode,\n    renderLabel,\n    curve\n  } = props;\n  const theme = useTheme();\n  const classes = useStyles();\n  const rootEntityRefs = useMemo(\n    () => (Array.isArray(rootEntityNames) ? rootEntityNames : [rootEntityNames]).map((e) => stringifyEntityRef(e)),\n    [rootEntityNames]\n  );\n  const errorApi = useApi(errorApiRef);\n  const { loading, error, nodes, edges } = useEntityRelationNodesAndEdges({\n    rootEntityRefs,\n    maxDepth,\n    unidirectional,\n    mergeRelations,\n    kinds,\n    relations,\n    onNodeClick,\n    relationPairs\n  });\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [errorApi, error]);\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classNames(classes.container, className) }, loading && /* @__PURE__ */ React.createElement(CircularProgress, { className: classes.progress }), nodes && edges && /* @__PURE__ */ React.createElement(\n    DependencyGraph,\n    {\n      nodes,\n      edges,\n      renderNode: renderNode || DefaultRenderNode,\n      renderLabel: renderLabel || DefaultRenderLabel,\n      direction,\n      className: classes.graph,\n      paddingX: theme.spacing(4),\n      paddingY: theme.spacing(4),\n      labelPosition: DependencyGraphTypes.LabelPosition.RIGHT,\n      labelOffset: theme.spacing(1),\n      zoom,\n      curve\n    }\n  ));\n};\n\nconst catalogGraphRouteRef = createRouteRef({\n  id: \"catalog-graph\"\n});\nconst catalogEntityRouteRef = createExternalRouteRef({\n  id: \"catalog-entity\",\n  params: [\"namespace\", \"kind\", \"name\"],\n  optional: true\n});\n\nconst catalogGraphPlugin = createPlugin({\n  id: \"catalog-graph\",\n  routes: {\n    catalogGraph: catalogGraphRouteRef\n  },\n  externalRoutes: {\n    catalogEntity: catalogEntityRouteRef\n  }\n});\n\nconst EntityCatalogGraphCard = catalogGraphPlugin.provide(\n  createComponentExtension({\n    name: \"EntityCatalogGraphCard\",\n    component: {\n      lazy: () => import('./esm/index-7de551c2.esm.js').then((m) => m.CatalogGraphCard)\n    }\n  })\n);\nconst CatalogGraphPage = catalogGraphPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogGraphPage\",\n    component: () => import('./esm/index-28d6fd72.esm.js').then((m) => m.CatalogGraphPage),\n    mountPoint: catalogGraphRouteRef\n  })\n);\n\nexport { ALL_RELATION_PAIRS, CatalogGraphPage, Direction, EntityCatalogGraphCard, EntityRelationsGraph, catalogGraphPlugin, catalogGraphRouteRef };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createRouteRef, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, configApiRef, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { scmAuthApiRef, scmIntegrationsApiRef } from '@backstage/integration-react';\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { Octokit } from '@octokit/rest';\nimport { Base64 } from 'js-base64';\nimport parseGitUrl from 'git-url-parse';\n\nconst catalogImportApiRef = createApiRef({\n  id: \"plugin.catalog-import.service\"\n});\n\nconst getGithubIntegrationConfig = (scmIntegrationsApi, location) => {\n  const integration = scmIntegrationsApi.github.byUrl(location);\n  if (!integration) {\n    return void 0;\n  }\n  const { name: repo, owner } = parseGitUrl(location);\n  return {\n    repo,\n    owner,\n    githubIntegrationConfig: integration.config\n  };\n};\n\nfunction asInputRef(renderResult) {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest\n  };\n}\nfunction getCatalogFilename(config) {\n  var _a;\n  return (_a = config.getOptionalString(\"catalog.import.entityFilename\")) != null ? _a : \"catalog-info.yaml\";\n}\nfunction getBranchName(config) {\n  var _a;\n  return (_a = config.getOptionalString(\"catalog.import.pullRequestBranchName\")) != null ? _a : \"backstage-integration\";\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass CatalogImportClient {\n  constructor(options) {\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"identityApi\");\n    __publicField(this, \"scmAuthApi\");\n    __publicField(this, \"scmIntegrationsApi\");\n    __publicField(this, \"catalogApi\");\n    __publicField(this, \"configApi\");\n    this.discoveryApi = options.discoveryApi;\n    this.scmAuthApi = options.scmAuthApi;\n    this.identityApi = options.identityApi;\n    this.scmIntegrationsApi = options.scmIntegrationsApi;\n    this.catalogApi = options.catalogApi;\n    this.configApi = options.configApi;\n  }\n  async analyzeUrl(url) {\n    var _a;\n    if (new URL(url).pathname.match(/\\.ya?ml$/) || ((_a = new URL(url).searchParams.get(\"path\")) == null ? void 0 : _a.match(/.ya?ml$/))) {\n      const location = await this.catalogApi.addLocation({\n        type: \"url\",\n        target: url,\n        dryRun: true\n      });\n      return {\n        type: \"locations\",\n        locations: [\n          {\n            exists: location.exists,\n            target: location.location.target,\n            entities: location.entities.map((e) => {\n              var _a2;\n              return {\n                kind: e.kind,\n                namespace: (_a2 = e.metadata.namespace) != null ? _a2 : \"default\",\n                name: e.metadata.name\n              };\n            })\n          }\n        ]\n      };\n    }\n    const ghConfig = getGithubIntegrationConfig(this.scmIntegrationsApi, url);\n    if (!ghConfig) {\n      const other = this.scmIntegrationsApi.byUrl(url);\n      const catalogFilename = getCatalogFilename(this.configApi);\n      if (other) {\n        throw new Error(\n          `The ${other.title} integration only supports full URLs to ${catalogFilename} files. Did you try to pass in the URL of a directory instead?`\n        );\n      }\n      throw new Error(\n        `This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${catalogFilename} file instead.`\n      );\n    }\n    const analyzation = await this.analyzeLocation({\n      repo: url\n    });\n    if (analyzation.existingEntityFiles.length > 0) {\n      const locations = analyzation.existingEntityFiles.reduce((state, curr) => {\n        var _a2;\n        state[curr.location.target] = {\n          target: curr.location.target,\n          exists: curr.isRegistered,\n          entities: [\n            ...curr.location.target in state ? state[curr.location.target].entities : [],\n            {\n              name: curr.entity.metadata.name,\n              namespace: (_a2 = curr.entity.metadata.namespace) != null ? _a2 : \"default\",\n              kind: curr.entity.kind\n            }\n          ]\n        };\n        return state;\n      }, {});\n      return {\n        type: \"locations\",\n        locations: Object.values(locations)\n      };\n    }\n    return {\n      type: \"repository\",\n      integrationType: \"github\",\n      url,\n      generatedEntities: analyzation.generateEntities.map((x) => x.entity)\n    };\n  }\n  async preparePullRequest() {\n    var _a;\n    const appTitle = (_a = this.configApi.getOptionalString(\"app.title\")) != null ? _a : \"Backstage\";\n    const appBaseUrl = this.configApi.getString(\"app.baseUrl\");\n    const catalogFilename = getCatalogFilename(this.configApi);\n    return {\n      title: `Add ${catalogFilename} config file`,\n      body: `This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${appTitle} software catalog](${appBaseUrl}).\n\nAfter this pull request is merged, the component will become available.\n\nFor more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`\n    };\n  }\n  async submitPullRequest(options) {\n    const { repositoryUrl, fileContent, title, body } = options;\n    const ghConfig = getGithubIntegrationConfig(\n      this.scmIntegrationsApi,\n      repositoryUrl\n    );\n    if (ghConfig) {\n      return await this.submitGitHubPrToRepo({\n        ...ghConfig,\n        repositoryUrl,\n        fileContent,\n        title,\n        body\n      });\n    }\n    throw new Error(\"unimplemented!\");\n  }\n  // TODO: this could be part of the catalog api\n  async analyzeLocation(options) {\n    const { token } = await this.identityApi.getCredentials();\n    const response = await fetch(\n      `${await this.discoveryApi.getBaseUrl(\"catalog\")}/analyze-location`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...token && { Authorization: `Bearer ${token}` }\n        },\n        method: \"POST\",\n        body: JSON.stringify({\n          location: { type: \"url\", target: options.repo },\n          ...this.configApi.getOptionalString(\n            \"catalog.import.entityFilename\"\n          ) && {\n            catalogFilename: this.configApi.getOptionalString(\n              \"catalog.import.entityFilename\"\n            )\n          }\n        })\n      }\n    ).catch((e) => {\n      throw new Error(`Failed to generate entity definitions, ${e.message}`);\n    });\n    if (!response.ok) {\n      throw new Error(\n        `Failed to generate entity definitions. Received http response ${response.status}: ${response.statusText}`\n      );\n    }\n    const payload = await response.json();\n    return payload;\n  }\n  // TODO: extract this function and implement for non-github\n  async submitGitHubPrToRepo(options) {\n    const {\n      owner,\n      repo,\n      title,\n      body,\n      fileContent,\n      repositoryUrl,\n      githubIntegrationConfig\n    } = options;\n    const { token } = await this.scmAuthApi.getCredentials({\n      url: repositoryUrl,\n      additionalScope: {\n        repoWrite: true\n      }\n    });\n    const octo = new Octokit({\n      auth: token,\n      baseUrl: githubIntegrationConfig.apiBaseUrl\n    });\n    const branchName = getBranchName(this.configApi);\n    const fileName = getCatalogFilename(this.configApi);\n    const repoData = await octo.repos.get({\n      owner,\n      repo\n    }).catch((e) => {\n      throw new Error(formatHttpErrorMessage(\"Couldn't fetch repo data\", e));\n    });\n    const parentRef = await octo.git.getRef({\n      owner,\n      repo,\n      ref: `heads/${repoData.data.default_branch}`\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\"Couldn't fetch default branch data\", e)\n      );\n    });\n    await octo.git.createRef({\n      owner,\n      repo,\n      ref: `refs/heads/${branchName}`,\n      sha: parentRef.data.object.sha\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\n          `Couldn't create a new branch with name '${branchName}'`,\n          e\n        )\n      );\n    });\n    await octo.repos.createOrUpdateFileContents({\n      owner,\n      repo,\n      path: fileName,\n      message: title,\n      content: Base64.encode(fileContent),\n      branch: branchName\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\n          `Couldn't create a commit with ${fileName} file added`,\n          e\n        )\n      );\n    });\n    const pullRequestResponse = await octo.pulls.create({\n      owner,\n      repo,\n      title,\n      head: branchName,\n      body,\n      base: repoData.data.default_branch\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\n          `Couldn't create a pull request for ${branchName} branch`,\n          e\n        )\n      );\n    });\n    return {\n      link: pullRequestResponse.data.html_url,\n      location: `https://${githubIntegrationConfig.host}/${owner}/${repo}/blob/${repoData.data.default_branch}/${fileName}`\n    };\n  }\n}\nfunction formatHttpErrorMessage(message, error) {\n  return `${message}, received http response status code ${error.status}: ${error.message}`;\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"catalog-import\"\n});\nconst catalogImportPlugin = createPlugin({\n  id: \"catalog-import\",\n  apis: [\n    createApiFactory({\n      api: catalogImportApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        scmAuthApi: scmAuthApiRef,\n        identityApi: identityApiRef,\n        scmIntegrationsApi: scmIntegrationsApiRef,\n        catalogApi: catalogApiRef,\n        configApi: configApiRef\n      },\n      factory: ({\n        discoveryApi,\n        scmAuthApi,\n        identityApi,\n        scmIntegrationsApi,\n        catalogApi,\n        configApi\n      }) => new CatalogImportClient({\n        discoveryApi,\n        scmAuthApi,\n        scmIntegrationsApi,\n        identityApi,\n        catalogApi,\n        configApi\n      })\n    })\n  ],\n  routes: {\n    importPage: rootRouteRef\n  }\n});\nconst CatalogImportPage = catalogImportPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogImportPage\",\n    component: () => import('./index-c3f2eabe.esm.js').then((m) => m.ImportPage),\n    mountPoint: rootRouteRef\n  })\n);\n\nexport { CatalogImportPage as C, catalogImportApiRef as a, CatalogImportClient as b, catalogImportPlugin as c, asInputRef as d, getCatalogFilename as g, rootRouteRef as r };\n//# sourceMappingURL=plugin-014562a4.esm.js.map\n","import { parseEntityRef, stringifyEntityRef } from '@backstage/catalog-model';\nimport { AnalyticsContext } from '@backstage/core-plugin-api';\nimport { createVersionedContext, createVersionedValueMap, useVersionedContext } from '@backstage/version-bridge';\nimport React from 'react';\n\nfunction getEntityRelations(entity, relationType, filter) {\n  var _a;\n  let entityNames = ((_a = entity == null ? void 0 : entity.relations) == null ? void 0 : _a.filter((r) => r.type === relationType).map((r) => parseEntityRef(r.targetRef))) || [];\n  if (filter == null ? void 0 : filter.kind) {\n    entityNames = entityNames.filter(\n      (e) => e.kind.toLocaleLowerCase(\"en-US\") === filter.kind.toLocaleLowerCase(\"en-US\")\n    );\n  }\n  return entityNames;\n}\n\nconst NewEntityContext = createVersionedContext(\n  \"entity-context\"\n);\nconst AsyncEntityProvider = (props) => {\n  const { children, entity, loading, error, refresh } = props;\n  const value = { entity, loading, error, refresh };\n  return /* @__PURE__ */ React.createElement(NewEntityContext.Provider, { value: createVersionedValueMap({ 1: value }) }, /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: {\n        ...entity ? { entityRef: stringifyEntityRef(entity) } : void 0\n      }\n    },\n    children\n  ));\n};\nconst EntityProvider = (props) => /* @__PURE__ */ React.createElement(\n  AsyncEntityProvider,\n  {\n    entity: props.entity,\n    loading: !Boolean(props.entity),\n    error: void 0,\n    refresh: void 0,\n    children: props.children\n  }\n);\nfunction useEntity() {\n  const versionedHolder = useVersionedContext(\n    \"entity-context\"\n  );\n  if (!versionedHolder) {\n    throw new Error(\"Entity context is not available\");\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error(\"EntityContext v1 not available\");\n  }\n  if (!value.entity) {\n    throw new Error(\n      \"useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.\"\n    );\n  }\n  return { entity: value.entity };\n}\nfunction useAsyncEntity() {\n  const versionedHolder = useVersionedContext(\n    \"entity-context\"\n  );\n  if (!versionedHolder) {\n    throw new Error(\"Entity context is not available\");\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error(\"EntityContext v1 not available\");\n  }\n  const { entity, loading, error, refresh } = value;\n  return { entity, loading, error, refresh };\n}\n\nexport { AsyncEntityProvider as A, EntityProvider as E, useAsyncEntity as a, getEntityRelations as g, useEntity as u };\n//# sourceMappingURL=useEntity-de64059a.esm.js.map\n","import { useEffect } from 'react';\n/**\n * Run effect only when component is first mounted.\n *\n * @param effect Effector to run on mount\n */\nexport function useMountEffect(effect) {\n    useEffect(() => {\n        effect();\n    }, []);\n}\n","import { useMemo, useRef } from 'react';\n/**\n * Like `useRef`, but it returns immutable ref that contains actual value.\n *\n * @param value\n */\nexport function useSyncedRef(value) {\n    const ref = useRef(value);\n    ref.current = value;\n    return useMemo(() => Object.freeze({\n        get current() {\n            return ref.current;\n        },\n    }), []);\n}\n","import { useEffect } from 'react';\nimport { useSyncedRef } from '../useSyncedRef';\n/**\n * Run effect only when component is unmounted.\n *\n * @param effect Effector to run on unmount\n */\nexport function useUnmountEffect(effect) {\n    const effectRef = useSyncedRef(effect);\n    useEffect(() => () => {\n        effectRef.current();\n    }, []);\n}\n","import { useMemo, useRef } from 'react';\nimport { useUnmountEffect } from '../useUnmountEffect';\n/**\n * Makes passed function debounced, otherwise acts like `useCallback`.\n *\n * @param callback Function that will be debounced.\n * @param deps Dependencies list when to update callback.\n * @param delay Debounce delay.\n * @param maxWait The maximum time `callback` is allowed to be delayed before\n * it's invoked. 0 means no max wait.\n */\nexport function useDebouncedCallback(callback, deps, delay, maxWait = 0) {\n    const timeout = useRef();\n    const waitTimeout = useRef();\n    const lastCall = useRef();\n    const clear = () => {\n        if (timeout.current) {\n            clearTimeout(timeout.current);\n            timeout.current = undefined;\n        }\n        if (waitTimeout.current) {\n            clearTimeout(waitTimeout.current);\n            waitTimeout.current = undefined;\n        }\n    };\n    // Cancel scheduled execution on unmount\n    useUnmountEffect(clear);\n    return useMemo(() => {\n        const execute = () => {\n            // Barely possible to test this line\n            /* istanbul ignore next */\n            if (!lastCall.current)\n                return;\n            const context = lastCall.current;\n            lastCall.current = undefined;\n            callback.apply(context.this, context.args);\n            clear();\n        };\n        const wrapped = function (...args) {\n            if (timeout.current) {\n                clearTimeout(timeout.current);\n            }\n            lastCall.current = { args, this: this };\n            // Plan regular execution\n            timeout.current = setTimeout(execute, delay);\n            // Plan maxWait execution if required\n            if (maxWait > 0 && !waitTimeout.current) {\n                waitTimeout.current = setTimeout(execute, maxWait);\n            }\n        };\n        Object.defineProperties(wrapped, {\n            length: { value: callback.length },\n            name: { value: `${callback.name || 'anonymous'}__debounced__${delay}` },\n        });\n        return wrapped;\n    }, [delay, maxWait, ...deps]);\n}\n","import { useEffect } from 'react';\nimport { useDebouncedCallback } from '../useDebouncedCallback';\n/**\n * Like `useEffect`, but the passed function is debounced.\n *\n * @param callback Callback like for `useEffect`, but without ability to return\n * a cleanup function.\n * @param deps Dependency list like the one passed to `useEffect`.\n * @param delay Debounce delay (in milliseconds).\n * @param maxWait The maximum time `callback` is allowed to be delayed\n * before it's invoked. `0` means no max wait.\n */\nexport function useDebouncedEffect(callback, deps, delay, maxWait = 0) {\n    useEffect(useDebouncedCallback(callback, deps, delay, maxWait), deps);\n}\n","export { CATALOG_FILTER_EXISTS } from '@backstage/catalog-client';\nimport { createApiRef, useApiHolder, useApi, identityApiRef, alertApiRef, createRouteRef, useRouteRef, useApp, configApiRef } from '@backstage/core-plugin-api';\nimport { stringifyEntityRef, DEFAULT_NAMESPACE, ANNOTATION_SOURCE_LOCATION, parseLocationRef, parseEntityRef, RELATION_OWNED_BY, getCompoundEntityRef, isUserEntity, isGroupEntity, RELATION_PART_OF, ANNOTATION_LOCATION, ANNOTATION_ORIGIN_LOCATION } from '@backstage/catalog-model';\nimport ApartmentIcon from '@material-ui/icons/Apartment';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport ExtensionIcon from '@material-ui/icons/Extension';\nimport HelpIcon$1 from '@material-ui/icons/Help';\nimport LibraryAddIcon from '@material-ui/icons/LibraryAdd';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport MemoryIcon from '@material-ui/icons/Memory';\nimport PeopleIcon from '@material-ui/icons/People';\nimport PersonIcon from '@material-ui/icons/Person';\nimport get from 'lodash/get';\nimport React, { useState, useEffect, useMemo, createContext, useCallback, useContext, useRef, memo, forwardRef, useLayoutEffect, Fragment } from 'react';\nimport ObservableImpl from 'zen-observable';\nimport { Grid, useMediaQuery, useTheme, Button, Drawer, Box, Typography, FormControlLabel, Checkbox, makeStyles, TextField, Tooltip, IconButton, Card, CardContent, Chip, CardActions, Toolbar, FormControl, Input, InputAdornment, withStyles, DialogContentText, ListItemText as ListItemText$1, ListSubheader as ListSubheader$1, ListItem, ListItemIcon, List, ListItemSecondaryAction, Dialog, DialogTitle, DialogContent, Tabs, Tab, DialogActions, Divider, MenuItem } from '@material-ui/core';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { Select, Link, ResponseErrorPanel, Progress, OverflowTooltip, Table, DependencyGraph, DependencyGraphTypes, CodeSnippet, CopyTextButton, EmptyState } from '@backstage/core-components';\nimport { g as getEntityRelations, u as useEntity } from './esm/useEntity-de64059a.esm.js';\nexport { A as AsyncEntityProvider, E as EntityProvider, g as getEntityRelations, a as useAsyncEntity, u as useEntity } from './esm/useEntity-de64059a.esm.js';\nimport { compact, isEqual, debounce, intersection } from 'lodash';\nimport qs from 'qs';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport useMountedState from 'react-use/lib/useMountedState';\nimport useAsync from 'react-use/lib/useAsync';\nimport isEqual$1 from 'lodash/isEqual';\nimport sortBy from 'lodash/sortBy';\nimport useObservable from 'react-use/lib/useObservable';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete, Alert } from '@material-ui/lab';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport classNames from 'classnames';\nimport { useMountEffect, useDebouncedEffect } from '@react-hookz/web';\nimport GroupIcon from '@material-ui/icons/Group';\nimport { getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport HoverPopover from 'material-ui-popup-state/HoverPopover';\nimport { usePopupState, bindHover, bindPopover } from 'material-ui-popup-state/hooks';\nimport InfoIcon from '@material-ui/icons/Info';\nimport EmailIcon from '@material-ui/icons/Email';\nimport Clear from '@material-ui/icons/Clear';\nimport Search from '@material-ui/icons/Search';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport WorkIcon from '@material-ui/icons/Work';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport groupBy from 'lodash/groupBy';\nimport DialogContentText$1 from '@material-ui/core/DialogContentText';\nimport YAML from 'yaml';\nimport Alert$1 from '@material-ui/lab/Alert';\nimport { assertError } from '@backstage/errors';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport Box$1 from '@material-ui/core/Box';\nimport Button$1 from '@material-ui/core/Button';\nimport { makeStyles as makeStyles$1 } from '@material-ui/core/styles';\nimport Typography$1 from '@material-ui/core/Typography';\n\nconst catalogApiRef = createApiRef({\n  id: \"plugin.catalog.service\"\n});\n\nconst entityPresentationApiRef = createApiRef({\n  id: \"plugin.catalog.entity-presentation\"\n});\n\nconst UNKNOWN_KIND_ICON = HelpIcon$1;\nconst DEFAULT_ICONS = {\n  api: ExtensionIcon,\n  component: MemoryIcon,\n  system: BusinessIcon,\n  domain: ApartmentIcon,\n  location: LocationOnIcon,\n  user: PersonIcon,\n  group: PeopleIcon,\n  template: LibraryAddIcon\n};\nfunction defaultEntityPresentation(entityOrRef, context) {\n  const { kind, namespace, name, title, description, displayName, type } = getParts(entityOrRef);\n  const Icon = kind && DEFAULT_ICONS[kind.toLocaleLowerCase(\"en-US\")] || UNKNOWN_KIND_ICON;\n  const entityRef = stringifyEntityRef({\n    kind: kind || \"unknown\",\n    namespace: namespace || DEFAULT_NAMESPACE,\n    name: name || \"unknown\"\n  });\n  const shortRef = getShortRef({ kind, namespace, name, context });\n  const primary = [displayName, title, shortRef].find(\n    (candidate) => candidate && typeof candidate === \"string\"\n  );\n  const secondary = [\n    primary !== entityRef ? entityRef : void 0,\n    type,\n    description\n  ].filter((candidate) => candidate && typeof candidate === \"string\").join(\" | \");\n  return {\n    entityRef,\n    primaryTitle: primary,\n    secondaryTitle: secondary || void 0,\n    Icon\n  };\n}\nfunction getParts(entityOrRef) {\n  if (typeof entityOrRef === \"string\") {\n    let colonI = entityOrRef.indexOf(\":\");\n    const slashI = entityOrRef.indexOf(\"/\");\n    if (slashI !== -1 && slashI < colonI) {\n      colonI = -1;\n    }\n    const kind = colonI === -1 ? void 0 : entityOrRef.slice(0, colonI);\n    const namespace = slashI === -1 ? void 0 : entityOrRef.slice(colonI + 1, slashI);\n    const name = entityOrRef.slice(Math.max(colonI + 1, slashI + 1));\n    return { kind, namespace, name };\n  }\n  if (typeof entityOrRef === \"object\" && entityOrRef !== null) {\n    const kind = [get(entityOrRef, \"kind\")].find(\n      (candidate) => candidate && typeof candidate === \"string\"\n    );\n    const namespace = [\n      get(entityOrRef, \"metadata.namespace\"),\n      get(entityOrRef, \"namespace\")\n    ].find((candidate) => candidate && typeof candidate === \"string\");\n    const name = [\n      get(entityOrRef, \"metadata.name\"),\n      get(entityOrRef, \"name\")\n    ].find((candidate) => candidate && typeof candidate === \"string\");\n    const title = [get(entityOrRef, \"metadata.title\")].find(\n      (candidate) => candidate && typeof candidate === \"string\"\n    );\n    const description = [get(entityOrRef, \"metadata.description\")].find(\n      (candidate) => candidate && typeof candidate === \"string\"\n    );\n    const displayName = [get(entityOrRef, \"spec.profile.displayName\")].find(\n      (candidate) => candidate && typeof candidate === \"string\"\n    );\n    const type = [get(entityOrRef, \"spec.type\")].find(\n      (candidate) => candidate && typeof candidate === \"string\"\n    );\n    return { kind, namespace, name, title, description, displayName, type };\n  }\n  return {};\n}\nfunction getShortRef(options) {\n  var _a, _b, _c, _d, _e;\n  const kind = ((_a = options.kind) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\")) || \"unknown\";\n  const namespace = options.namespace || DEFAULT_NAMESPACE;\n  const name = options.name || \"unknown\";\n  const defaultKindLower = (_c = (_b = options.context) == null ? void 0 : _b.defaultKind) == null ? void 0 : _c.toLocaleLowerCase(\"en-US\");\n  const defaultNamespaceLower = (_e = (_d = options.context) == null ? void 0 : _d.defaultNamespace) == null ? void 0 : _e.toLocaleLowerCase(\"en-US\");\n  let result = name;\n  if (defaultNamespaceLower && namespace.toLocaleLowerCase(\"en-US\") !== defaultNamespaceLower || namespace !== DEFAULT_NAMESPACE) {\n    result = `${namespace}/${result}`;\n  }\n  if (defaultKindLower && kind.toLocaleLowerCase(\"en-US\") !== defaultKindLower) {\n    result = `${kind}:${result}`;\n  }\n  return result;\n}\n\nfunction useUpdatingObservable(value, observable, deps) {\n  const [snapshot, setSnapshot] = useState(value);\n  useEffect(() => {\n    setSnapshot(value);\n    const subscription = observable == null ? void 0 : observable.subscribe({\n      next: (updatedValue) => {\n        setSnapshot(updatedValue);\n      },\n      complete: () => {\n        subscription == null ? void 0 : subscription.unsubscribe();\n      }\n    });\n    return () => {\n      subscription == null ? void 0 : subscription.unsubscribe();\n    };\n  }, deps);\n  return snapshot;\n}\n\nfunction useEntityPresentation(entityOrRef, context) {\n  const apis = useApiHolder();\n  const entityPresentationApi = apis.get(entityPresentationApiRef);\n  const deps = [\n    entityPresentationApi,\n    JSON.stringify(entityOrRef),\n    JSON.stringify(context || null)\n  ];\n  const presentation = useMemo(\n    () => {\n      if (!entityPresentationApi) {\n        return { snapshot: defaultEntityPresentation(entityOrRef, context) };\n      }\n      return entityPresentationApi.forEntity(\n        typeof entityOrRef === \"string\" || \"metadata\" in entityOrRef ? entityOrRef : stringifyEntityRef(entityOrRef),\n        context\n      );\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    deps\n  );\n  return useUpdatingObservable(presentation.snapshot, presentation.update$, [\n    presentation\n  ]);\n}\n\nconst starredEntitiesApiRef = createApiRef({\n  id: \"catalog-react.starred-entities\"\n});\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass MockStarredEntitiesApi {\n  constructor() {\n    __publicField$1(this, \"starredEntities\", /* @__PURE__ */ new Set());\n    __publicField$1(this, \"subscribers\", /* @__PURE__ */ new Set());\n    __publicField$1(this, \"observable\", new ObservableImpl((subscriber) => {\n      subscriber.next(new Set(this.starredEntities));\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n  }\n  async toggleStarred(entityRef) {\n    if (!this.starredEntities.delete(entityRef)) {\n      this.starredEntities.add(entityRef);\n    }\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n  starredEntitie$() {\n    return this.observable;\n  }\n}\n\nconst Filters = (props) => {\n  var _a, _b;\n  const isScreenSmallerThanBreakpoint = useMediaQuery(\n    (theme2) => {\n      var _a2, _b2;\n      return theme2.breakpoints.down((_b2 = (_a2 = props.options) == null ? void 0 : _a2.drawerBreakpoint) != null ? _b2 : \"md\");\n    }\n  );\n  const theme = useTheme();\n  const [filterDrawerOpen, setFilterDrawerOpen] = useState(false);\n  return isScreenSmallerThanBreakpoint ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      style: { marginTop: theme.spacing(1), marginLeft: theme.spacing(1) },\n      onClick: () => setFilterDrawerOpen(true),\n      startIcon: /* @__PURE__ */ React.createElement(FilterListIcon, null)\n    },\n    \"Filters\"\n  ), /* @__PURE__ */ React.createElement(\n    Drawer,\n    {\n      open: filterDrawerOpen,\n      onClose: () => setFilterDrawerOpen(false),\n      anchor: (_b = (_a = props.options) == null ? void 0 : _a.drawerAnchor) != null ? _b : \"left\",\n      disableAutoFocus: true,\n      keepMounted: true,\n      variant: \"temporary\"\n    },\n    /* @__PURE__ */ React.createElement(Box, { m: 2 }, /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"h6\",\n        component: \"h2\",\n        style: { marginBottom: theme.spacing(1) }\n      },\n      \"Filters\"\n    ), props.children)\n  )) : /* @__PURE__ */ React.createElement(Grid, { item: true, lg: 2 }, props.children);\n};\nconst Content = (props) => {\n  return /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, lg: 10 }, props.children);\n};\nconst CatalogFilterLayout = (props) => {\n  return /* @__PURE__ */ React.createElement(Grid, { container: true, style: { position: \"relative\" } }, props.children);\n};\nCatalogFilterLayout.Filters = Filters;\nCatalogFilterLayout.Content = Content;\n\nfunction reduceCatalogFilters(filters) {\n  return filters.reduce((compoundFilter, filter) => {\n    return {\n      ...compoundFilter,\n      ...filter.getCatalogFilters ? filter.getCatalogFilters() : {}\n    };\n  }, {});\n}\nfunction reduceBackendCatalogFilters(filters) {\n  const backendCatalogFilters = {};\n  filters.forEach((filter) => {\n    var _a;\n    if (filter instanceof EntityTagFilter || filter instanceof EntityOwnerFilter || filter instanceof EntityLifecycleFilter || filter instanceof EntityNamespaceFilter || filter instanceof EntityUserFilter || filter instanceof EntityOrphanFilter || filter instanceof EntityTextFilter || filter instanceof UserListFilter) {\n      return;\n    }\n    Object.assign(backendCatalogFilters, ((_a = filter.getCatalogFilters) == null ? void 0 : _a.call(filter)) || {});\n  });\n  return backendCatalogFilters;\n}\nfunction reduceEntityFilters(filters) {\n  return (entity) => filters.every(\n    (filter) => !filter.filterEntity || filter.filterEntity(entity)\n  );\n}\n\nfunction getEntitySourceLocation(entity, scmIntegrationsApi) {\n  var _a;\n  const sourceLocation = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_SOURCE_LOCATION];\n  if (!sourceLocation) {\n    return void 0;\n  }\n  try {\n    const sourceLocationRef = parseLocationRef(sourceLocation);\n    const integration = scmIntegrationsApi.byUrl(sourceLocationRef.target);\n    return {\n      locationTargetUrl: sourceLocationRef.target,\n      integrationType: integration == null ? void 0 : integration.type\n    };\n  } catch {\n    return void 0;\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass EntityKindFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  getCatalogFilters() {\n    return { kind: this.value };\n  }\n  toQueryValue() {\n    return this.value;\n  }\n}\nclass EntityTypeFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  // Simplify `string | string[]` for consumers, always returns an array\n  getTypes() {\n    return Array.isArray(this.value) ? this.value : [this.value];\n  }\n  getCatalogFilters() {\n    return { \"spec.type\": this.getTypes() };\n  }\n  toQueryValue() {\n    return this.getTypes();\n  }\n}\nclass EntityTagFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  filterEntity(entity) {\n    return this.values.every((v) => {\n      var _a;\n      return ((_a = entity.metadata.tags) != null ? _a : []).includes(v);\n    });\n  }\n  getCatalogFilters() {\n    return { \"metadata.tags\": this.values };\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityTextFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  filterEntity(entity) {\n    const words = this.toUpperArray(this.value.split(/\\s/));\n    const exactMatch = this.toUpperArray([entity.metadata.tags]);\n    const partialMatch = this.toUpperArray([\n      entity.metadata.name,\n      entity.metadata.title\n    ]);\n    for (const word of words) {\n      if (exactMatch.every((m) => m !== word) && partialMatch.every((m) => !m.includes(word))) {\n        return false;\n      }\n    }\n    return true;\n  }\n  toUpperArray(value) {\n    return value.flat().filter((m) => Boolean(m)).map((m) => m.toLocaleUpperCase(\"en-US\"));\n  }\n}\nclass EntityOwnerFilter {\n  constructor(values) {\n    __publicField(this, \"values\");\n    this.values = values.reduce((fullRefs, ref) => {\n      try {\n        fullRefs.push(\n          stringifyEntityRef(parseEntityRef(ref, { defaultKind: \"Group\" }))\n        );\n        return fullRefs;\n      } catch (err) {\n        return fullRefs;\n      }\n    }, []);\n  }\n  getCatalogFilters() {\n    return { \"relations.ownedBy\": this.values };\n  }\n  filterEntity(entity) {\n    return this.values.some(\n      (v) => getEntityRelations(entity, RELATION_OWNED_BY).some(\n        (o) => stringifyEntityRef(o) === v\n      )\n    );\n  }\n  /**\n   * Get the URL query parameter value. May be a mix of full and humanized entity refs.\n   * @returns list of entity refs.\n   */\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityLifecycleFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  getCatalogFilters() {\n    return { \"spec.lifecycle\": this.values };\n  }\n  filterEntity(entity) {\n    return this.values.some((v) => {\n      var _a;\n      return ((_a = entity.spec) == null ? void 0 : _a.lifecycle) === v;\n    });\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityNamespaceFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  getCatalogFilters() {\n    return { \"metadata.namespace\": this.values };\n  }\n  filterEntity(entity) {\n    return this.values.some((v) => entity.metadata.namespace === v);\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityUserFilter {\n  constructor(value, refs) {\n    this.value = value;\n    this.refs = refs;\n  }\n  static owned(ownershipEntityRefs) {\n    return new EntityUserFilter(\"owned\", ownershipEntityRefs);\n  }\n  static all() {\n    return new EntityUserFilter(\"all\");\n  }\n  static starred(starredEntityRefs) {\n    return new EntityUserFilter(\"starred\", starredEntityRefs);\n  }\n  getCatalogFilters() {\n    var _a, _b, _c;\n    if (this.value === \"owned\") {\n      return { \"relations.ownedBy\": (_a = this.refs) != null ? _a : [] };\n    }\n    if (this.value === \"starred\") {\n      return {\n        \"metadata.name\": (_c = (_b = this.refs) == null ? void 0 : _b.map((e) => parseEntityRef(e).name)) != null ? _c : []\n      };\n    }\n    return {};\n  }\n  filterEntity(entity) {\n    var _a, _b, _c, _d;\n    if (this.value === \"starred\") {\n      return (_b = (_a = this.refs) == null ? void 0 : _a.includes(stringifyEntityRef(entity))) != null ? _b : true;\n    }\n    if (this.value === \"owned\") {\n      const relations = getEntityRelations(entity, RELATION_OWNED_BY);\n      return (_d = (_c = this.refs) == null ? void 0 : _c.some(\n        (v) => relations.some((o) => stringifyEntityRef(o) === v)\n      )) != null ? _d : false;\n    }\n    return true;\n  }\n  toQueryValue() {\n    return this.value;\n  }\n}\nclass UserListFilter {\n  constructor(value, isOwnedEntity, isStarredEntity) {\n    this.value = value;\n    this.isOwnedEntity = isOwnedEntity;\n    this.isStarredEntity = isStarredEntity;\n  }\n  filterEntity(entity) {\n    switch (this.value) {\n      case \"owned\":\n        return this.isOwnedEntity(entity);\n      case \"starred\":\n        return this.isStarredEntity(entity);\n      default:\n        return true;\n    }\n  }\n  toQueryValue() {\n    return this.value;\n  }\n}\nclass EntityOrphanFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  getCatalogFilters() {\n    if (this.value) {\n      return { \"metadata.annotations.backstage.io/orphan\": String(this.value) };\n    }\n    return {};\n  }\n  filterEntity(entity) {\n    var _a;\n    const orphan = (_a = entity.metadata.annotations) == null ? void 0 : _a[\"backstage.io/orphan\"];\n    return orphan !== void 0 && this.value.toString() === orphan;\n  }\n}\nclass EntityErrorFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  filterEntity(entity) {\n    var _a, _b;\n    const error = ((_b = (_a = entity == null ? void 0 : entity.status) == null ? void 0 : _a.items) == null ? void 0 : _b.length) > 0;\n    return error !== void 0 && this.value === error;\n  }\n}\n\nconst EntityListContext = createContext(void 0);\nconst EntityListProvider = (props) => {\n  const isMounted = useMountedState();\n  const catalogApi = useApi(catalogApiRef);\n  const [requestedFilters, setRequestedFilters] = useState(\n    {}\n  );\n  const location = useLocation();\n  const queryParameters = useMemo(\n    () => {\n      var _a;\n      return (_a = qs.parse(location.search, {\n        ignoreQueryPrefix: true\n      }).filters) != null ? _a : {};\n    },\n    [location]\n  );\n  const [outputState, setOutputState] = useState(\n    () => {\n      return {\n        appliedFilters: {},\n        entities: [],\n        backendEntities: []\n      };\n    }\n  );\n  const [{ loading, error }, refresh] = useAsyncFn(\n    async () => {\n      var _a;\n      const compacted = compact(Object.values(requestedFilters));\n      const entityFilter = reduceEntityFilters(compacted);\n      const backendFilter = reduceBackendCatalogFilters(compacted);\n      const previousBackendFilter = reduceBackendCatalogFilters(\n        compact(Object.values(outputState.appliedFilters))\n      );\n      const queryParams = Object.keys(requestedFilters).reduce(\n        (params, key) => {\n          const filter = requestedFilters[key];\n          if (filter == null ? void 0 : filter.toQueryValue) {\n            params[key] = filter.toQueryValue();\n          }\n          return params;\n        },\n        {}\n      );\n      if (!isEqual(previousBackendFilter, backendFilter)) {\n        const response = await catalogApi.getEntities({\n          filter: backendFilter\n        });\n        setOutputState({\n          appliedFilters: requestedFilters,\n          backendEntities: response.items,\n          entities: response.items.filter(entityFilter)\n        });\n      } else {\n        setOutputState({\n          appliedFilters: requestedFilters,\n          backendEntities: outputState.backendEntities,\n          entities: outputState.backendEntities.filter(entityFilter)\n        });\n      }\n      if (isMounted()) {\n        const oldParams = qs.parse(location.search, {\n          ignoreQueryPrefix: true\n        });\n        const newParams = qs.stringify(\n          { ...oldParams, filters: queryParams },\n          { addQueryPrefix: true, arrayFormat: \"repeat\" }\n        );\n        const newUrl = `${window.location.pathname}${newParams}`;\n        (_a = window.history) == null ? void 0 : _a.replaceState(null, document.title, newUrl);\n      }\n    },\n    [catalogApi, queryParameters, requestedFilters, outputState],\n    { loading: true }\n  );\n  useDebounce(refresh, 10, [requestedFilters]);\n  const updateFilters = useCallback(\n    (update) => {\n      setRequestedFilters((prevFilters) => {\n        const newFilters = typeof update === \"function\" ? update(prevFilters) : update;\n        return { ...prevFilters, ...newFilters };\n      });\n    },\n    []\n  );\n  const value = useMemo(\n    () => ({\n      filters: outputState.appliedFilters,\n      entities: outputState.entities,\n      backendEntities: outputState.backendEntities,\n      updateFilters,\n      queryParameters,\n      loading,\n      error\n    }),\n    [outputState, updateFilters, queryParameters, loading, error]\n  );\n  return /* @__PURE__ */ React.createElement(EntityListContext.Provider, { value }, props.children);\n};\nfunction useEntityList() {\n  const context = useContext(EntityListContext);\n  if (!context)\n    throw new Error(\"useEntityList must be used within EntityListProvider\");\n  return context;\n}\n\nfunction useEntityTypeFilter() {\n  var _a;\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    filters: { kind: kindFilter, type: typeFilter },\n    queryParameters: { type: typeParameter },\n    updateFilters\n  } = useEntityList();\n  const flattenedQueryTypes = useMemo(\n    () => [typeParameter].flat().filter(Boolean),\n    [typeParameter]\n  );\n  const [selectedTypes, setSelectedTypes] = useState(\n    flattenedQueryTypes.length ? flattenedQueryTypes : (_a = typeFilter == null ? void 0 : typeFilter.getTypes()) != null ? _a : []\n  );\n  useEffect(() => {\n    if (flattenedQueryTypes.length) {\n      setSelectedTypes(flattenedQueryTypes);\n    }\n  }, [flattenedQueryTypes]);\n  const [availableTypes, setAvailableTypes] = useState([]);\n  const kind = useMemo(() => kindFilter == null ? void 0 : kindFilter.value, [kindFilter]);\n  const {\n    error,\n    loading,\n    value: facets\n  } = useAsync(async () => {\n    if (kind) {\n      const items = await catalogApi.getEntityFacets({\n        filter: { kind },\n        facets: [\"spec.type\"]\n      }).then((response) => response.facets[\"spec.type\"] || []);\n      return items;\n    }\n    return [];\n  }, [kind, catalogApi]);\n  const facetsRef = useRef(facets);\n  useEffect(() => {\n    const oldFacets = facetsRef.current;\n    facetsRef.current = facets;\n    if (loading || !kind || oldFacets === facets || !facets) {\n      return;\n    }\n    const newTypes = [\n      ...new Set(\n        sortBy(facets, (f) => -f.count).map(\n          (f) => f.value.toLocaleLowerCase(\"en-US\")\n        )\n      )\n    ];\n    setAvailableTypes(newTypes);\n    const stillValidTypes = selectedTypes.filter(\n      (value) => newTypes.includes(value)\n    );\n    if (!isEqual$1(selectedTypes, stillValidTypes)) {\n      setSelectedTypes(stillValidTypes);\n    }\n  }, [loading, kind, selectedTypes, setSelectedTypes, facets]);\n  useEffect(() => {\n    updateFilters({\n      type: selectedTypes.length ? new EntityTypeFilter(selectedTypes) : void 0\n    });\n  }, [selectedTypes, updateFilters]);\n  return {\n    loading,\n    error,\n    availableTypes,\n    selectedTypes,\n    setSelectedTypes\n  };\n}\n\nfunction useRelatedEntities(entity, relationFilter) {\n  var _a, _b;\n  const filterByTypeLower = (_a = relationFilter == null ? void 0 : relationFilter.type) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\");\n  const filterByKindLower = (_b = relationFilter == null ? void 0 : relationFilter.kind) == null ? void 0 : _b.toLocaleLowerCase(\"en-US\");\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    loading,\n    value: entities,\n    error\n  } = useAsync(async () => {\n    var _a2;\n    const relations = (_a2 = entity.relations) == null ? void 0 : _a2.filter(\n      (r) => (!filterByTypeLower || r.type.toLocaleLowerCase(\"en-US\") === filterByTypeLower) && (!filterByKindLower || parseEntityRef(r.targetRef).kind === filterByKindLower)\n    );\n    if (!(relations == null ? void 0 : relations.length)) {\n      return [];\n    }\n    const { items } = await catalogApi.getEntitiesByRefs({\n      entityRefs: relations.map((r) => r.targetRef)\n    });\n    return items.filter((x) => Boolean(x));\n  }, [entity, filterByTypeLower, filterByKindLower]);\n  return {\n    entities,\n    loading,\n    error\n  };\n}\n\nfunction getEntityRef$1(entityOrRef) {\n  return typeof entityOrRef === \"string\" ? entityOrRef : stringifyEntityRef(entityOrRef);\n}\nfunction useStarredEntities() {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n  const starredEntities = useObservable(\n    useMemo(() => starredEntitiesApi.starredEntitie$(), [starredEntitiesApi]),\n    /* @__PURE__ */ new Set()\n  );\n  const isStarredEntity = useCallback(\n    (entityOrRef) => starredEntities.has(getEntityRef$1(entityOrRef)),\n    [starredEntities]\n  );\n  const toggleStarredEntity = useCallback(\n    (entityOrRef) => starredEntitiesApi.toggleStarred(getEntityRef$1(entityOrRef)).then(),\n    [starredEntitiesApi]\n  );\n  return {\n    starredEntities,\n    toggleStarredEntity,\n    isStarredEntity\n  };\n}\n\nfunction getEntityRef(entityOrRef) {\n  return typeof entityOrRef === \"string\" ? entityOrRef : stringifyEntityRef(entityOrRef);\n}\nfunction useStarredEntity(entityOrRef) {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n  const [isStarredEntity, setIsStarredEntity] = useState(false);\n  useEffect(() => {\n    const subscription = starredEntitiesApi.starredEntitie$().subscribe({\n      next(starredEntities) {\n        setIsStarredEntity(starredEntities.has(getEntityRef(entityOrRef)));\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [entityOrRef, starredEntitiesApi]);\n  const toggleStarredEntity = useCallback(\n    () => starredEntitiesApi.toggleStarred(getEntityRef(entityOrRef)).then(),\n    [entityOrRef, starredEntitiesApi]\n  );\n  return {\n    toggleStarredEntity,\n    isStarredEntity\n  };\n}\n\nfunction useEntityOwnership() {\n  const identityApi = useApi(identityApiRef);\n  const { loading, value: refs } = useAsync(\n    async () => {\n      const { ownershipEntityRefs } = await identityApi.getBackstageIdentity();\n      return ownershipEntityRefs;\n    },\n    // load only on mount\n    []\n  );\n  const isOwnedEntity = useMemo(() => {\n    const myOwnerRefs = new Set(refs != null ? refs : []);\n    return (entity) => {\n      const entityOwnerRefs = getEntityRelations(entity, RELATION_OWNED_BY).map(\n        stringifyEntityRef\n      );\n      for (const ref of entityOwnerRefs) {\n        if (myOwnerRefs.has(ref)) {\n          return true;\n        }\n      }\n      return false;\n    };\n  }, [refs]);\n  return { loading, isOwnedEntity };\n}\n\nfunction useAllKinds() {\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    error,\n    loading,\n    value: allKinds\n  } = useAsync(async () => {\n    const items = await catalogApi.getEntityFacets({ facets: [\"kind\"] }).then((response) => {\n      var _a;\n      return ((_a = response.facets.kind) == null ? void 0 : _a.map((f) => f.value).sort()) || [];\n    });\n    return items;\n  }, [catalogApi]);\n  return { loading, error, allKinds: allKinds != null ? allKinds : [] };\n}\nfunction filterKinds(allKinds, allowedKinds, forcedKinds) {\n  let availableKinds = allKinds;\n  if (allowedKinds) {\n    availableKinds = availableKinds.filter(\n      (k) => allowedKinds.some(\n        (a) => a.toLocaleLowerCase(\"en-US\") === k.toLocaleLowerCase(\"en-US\")\n      )\n    );\n  }\n  if (forcedKinds && !allKinds.some(\n    (a) => a.toLocaleLowerCase(\"en-US\") === forcedKinds.toLocaleLowerCase(\"en-US\")\n  )) {\n    availableKinds = availableKinds.concat([forcedKinds]);\n  }\n  const kindsMap = availableKinds.sort().reduce((acc, kind) => {\n    acc[kind.toLocaleLowerCase(\"en-US\")] = kind;\n    return acc;\n  }, {});\n  return kindsMap;\n}\n\nfunction useEntityKindFilter(opts) {\n  var _a, _b;\n  const {\n    filters,\n    queryParameters: { kind: kindParameter },\n    updateFilters\n  } = useEntityList();\n  const queryParamKind = useMemo(\n    () => [kindParameter].flat()[0],\n    [kindParameter]\n  );\n  const [selectedKind, setSelectedKind] = useState(\n    (_b = queryParamKind != null ? queryParamKind : (_a = filters.kind) == null ? void 0 : _a.value) != null ? _b : opts.initialFilter\n  );\n  useEffect(() => {\n    if (queryParamKind) {\n      setSelectedKind(queryParamKind);\n    }\n  }, [queryParamKind]);\n  useEffect(() => {\n    var _a2, _b2;\n    if ((_a2 = filters.kind) == null ? void 0 : _a2.value) {\n      setSelectedKind((_b2 = filters.kind) == null ? void 0 : _b2.value);\n    }\n  }, [filters.kind]);\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : void 0\n    });\n  }, [selectedKind, updateFilters]);\n  const { allKinds, loading, error } = useAllKinds();\n  return {\n    loading,\n    error,\n    allKinds: allKinds != null ? allKinds : [],\n    selectedKind,\n    setSelectedKind\n  };\n}\nconst EntityKindPicker = (props) => {\n  const { allowedKinds, hidden, initialFilter = \"component\" } = props;\n  const alertApi = useApi(alertApiRef);\n  const { error, allKinds, selectedKind, setSelectedKind } = useEntityKindFilter({\n    initialFilter\n  });\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load entity kinds`,\n        severity: \"error\"\n      });\n    }\n  }, [error, alertApi]);\n  if (error)\n    return null;\n  const options = filterKinds(allKinds, allowedKinds, selectedKind);\n  const items = Object.keys(options).map((key) => ({\n    value: key,\n    label: options[key]\n  }));\n  return hidden ? null : /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      label: \"Kind\",\n      items,\n      selected: selectedKind.toLocaleLowerCase(\"en-US\"),\n      onChange: (value) => setSelectedKind(String(value))\n    }\n  ));\n};\n\nconst icon$2 = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon$2 = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nfunction OptionCheckbox({ selected }) {\n  return /* @__PURE__ */ React.createElement(Checkbox, { icon: icon$2, checkedIcon: checkedIcon$2, checked: selected });\n}\nconst EntityAutocompletePickerOption = memo((props) => {\n  const { selected, value, availableOptions, showCounts } = props;\n  const label = showCounts ? `${value} (${availableOptions == null ? void 0 : availableOptions[value]})` : value;\n  return /* @__PURE__ */ React.createElement(\n    FormControlLabel,\n    {\n      control: /* @__PURE__ */ React.createElement(OptionCheckbox, { selected }),\n      label,\n      onClick: (event) => event.preventDefault()\n    }\n  );\n});\n\nconst useStyles$h = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityAutocompletePickerInput\"\n  }\n);\nfunction EntityAutocompletePickerInput(params) {\n  const classes = useStyles$h();\n  return /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      variant: \"outlined\",\n      ...params,\n      className: classNames(classes.input, params.className)\n    }\n  );\n}\n\nfunction EntityAutocompletePicker(props) {\n  var _a, _b;\n  const {\n    label,\n    name,\n    path,\n    showCounts,\n    Filter,\n    InputProps,\n    initialSelectedOptions = []\n  } = props;\n  const {\n    updateFilters,\n    filters,\n    queryParameters: { [name]: queryParameter }\n  } = useEntityList();\n  const catalogApi = useApi(catalogApiRef);\n  const { value: availableValues } = useAsync(async () => {\n    var _a2;\n    const facet = path;\n    const { facets } = await catalogApi.getEntityFacets({\n      facets: [facet],\n      filter: (_a2 = filters.kind) == null ? void 0 : _a2.getCatalogFilters()\n    });\n    return Object.fromEntries(\n      facets[facet].map(({ value, count }) => [value, count])\n    );\n  }, [filters.kind]);\n  const queryParameters = useMemo(\n    () => [queryParameter].flat().filter(Boolean),\n    [queryParameter]\n  );\n  const [selectedOptions, setSelectedOptions] = useState(\n    queryParameters.length ? queryParameters : (_b = (_a = filters[name]) == null ? void 0 : _a.values) != null ? _b : initialSelectedOptions\n  );\n  useEffect(() => {\n    if (queryParameters.length) {\n      setSelectedOptions(queryParameters);\n    }\n  }, [queryParameters]);\n  const availableOptions = Object.keys(availableValues != null ? availableValues : {});\n  const shouldAddFilter = selectedOptions.length && availableOptions.length;\n  useEffect(() => {\n    updateFilters({\n      [name]: shouldAddFilter ? new Filter(selectedOptions) : void 0\n    });\n  }, [name, shouldAddFilter, selectedOptions, Filter, updateFilters]);\n  const filter = filters[name];\n  if (filter && typeof filter === \"object\" && !(\"values\" in filter) || !availableOptions.length) {\n    return null;\n  }\n  if (availableOptions.length <= 1)\n    return null;\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"button\", component: \"label\" }, label, /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      multiple: true,\n      disableCloseOnSelect: true,\n      options: availableOptions,\n      value: selectedOptions,\n      onChange: (_event, options) => setSelectedOptions(options),\n      renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(\n        EntityAutocompletePickerOption,\n        {\n          selected,\n          value: option,\n          availableOptions: availableValues,\n          showCounts: !!showCounts\n        }\n      ),\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { \"data-testid\": `${String(name)}-picker-expand` }),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(EntityAutocompletePickerInput, { ...params, ...InputProps })\n    }\n  )));\n}\n\nconst useStyles$g = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityLifecyclePicker\"\n  }\n);\nconst EntityLifecyclePicker = (props) => {\n  const { initialFilter = [] } = props;\n  const classes = useStyles$g();\n  return /* @__PURE__ */ React.createElement(\n    EntityAutocompletePicker,\n    {\n      label: \"Lifecycle\",\n      name: \"lifecycles\",\n      path: \"spec.lifecycle\",\n      Filter: EntityLifecycleFilter,\n      InputProps: { className: classes.input },\n      initialSelectedOptions: initialFilter\n    }\n  );\n};\n\nfunction humanizeEntityRef(entityRef, opts) {\n  const defaultKind = opts == null ? void 0 : opts.defaultKind;\n  let kind;\n  let namespace;\n  let name;\n  if (\"metadata\" in entityRef) {\n    kind = entityRef.kind;\n    namespace = entityRef.metadata.namespace;\n    name = entityRef.metadata.name;\n  } else {\n    kind = entityRef.kind;\n    namespace = entityRef.namespace;\n    name = entityRef.name;\n  }\n  if (namespace === void 0 || namespace === \"\") {\n    namespace = DEFAULT_NAMESPACE;\n  }\n  if ((opts == null ? void 0 : opts.defaultNamespace) !== void 0) {\n    if ((opts == null ? void 0 : opts.defaultNamespace) === namespace) {\n      namespace = void 0;\n    }\n  } else if (namespace === DEFAULT_NAMESPACE) {\n    namespace = void 0;\n  }\n  kind = kind.toLocaleLowerCase(\"en-US\");\n  kind = defaultKind && defaultKind.toLocaleLowerCase(\"en-US\") === kind ? void 0 : kind;\n  return `${kind ? `${kind}:` : \"\"}${namespace ? `${namespace}/` : \"\"}${name}`;\n}\nfunction humanizeEntity(entity, defaultName) {\n  for (const path of [\"spec.profile.displayName\", \"metadata.title\"]) {\n    const value = get(entity, path);\n    if (value && typeof value === \"string\") {\n      return value;\n    }\n  }\n  return defaultName;\n}\n\nfunction useFacetsEntities({ enabled }) {\n  const catalogApi = useApi(catalogApiRef);\n  const [facetsPromise] = useState(async () => {\n    if (!enabled) {\n      return [];\n    }\n    const facet = \"relations.ownedBy\";\n    return catalogApi.getEntityFacets({ facets: [facet] }).then(\n      (response) => response.facets[facet].map((e) => e.value).map((ref) => {\n        const { kind, name, namespace } = parseEntityRef(ref);\n        return {\n          apiVersion: \"backstage.io/v1beta1\",\n          kind,\n          metadata: { name, namespace }\n        };\n      }).sort(\n        (a, b) => (a.metadata.namespace || \"\").localeCompare(\n          b.metadata.namespace || \"\",\n          \"en-US\"\n        ) || a.metadata.name.localeCompare(b.metadata.name, \"en-US\") || a.kind.localeCompare(b.kind, \"en-US\")\n      )\n    ).catch(() => []);\n  });\n  return useAsyncFn(\n    async (request, options) => {\n      var _a;\n      const facets = await facetsPromise;\n      if (!facets) {\n        return {\n          items: []\n        };\n      }\n      const limit = (_a = options == null ? void 0 : options.limit) != null ? _a : 20;\n      const { text, start } = decodeCursor(request);\n      const filteredRefs = facets.filter((e) => filterEntity(text, e));\n      const end = start + limit;\n      return {\n        items: filteredRefs.slice(0, end),\n        ...encodeCursor({\n          entities: filteredRefs,\n          limit: end,\n          payload: {\n            text,\n            start: end\n          }\n        })\n      };\n    },\n    [facetsPromise],\n    { loading: true, value: { items: [] } }\n  );\n}\nfunction decodeCursor(request) {\n  if (isFacetsResponse(request) && request.cursor) {\n    return JSON.parse(atob(request.cursor));\n  }\n  return {\n    text: request.text || \"\",\n    start: 0\n  };\n}\nfunction isFacetsResponse(request) {\n  return !!request.cursor;\n}\nfunction encodeCursor({\n  entities,\n  limit,\n  payload\n}) {\n  if (entities.length > limit) {\n    return { cursor: btoa(JSON.stringify(payload)) };\n  }\n  return {};\n}\nfunction filterEntity(text, entity) {\n  var _a;\n  const normalizedText = text.trim();\n  return entity.kind.includes(normalizedText) || ((_a = entity.metadata.namespace) == null ? void 0 : _a.includes(normalizedText)) || entity.metadata.name.includes(normalizedText);\n}\n\nfunction useQueryEntities() {\n  const catalogApi = useApi(catalogApiRef);\n  return useAsyncFn(\n    async (request, options) => {\n      var _a;\n      const initialRequest = request;\n      const cursorRequest = request;\n      const limit = (_a = options == null ? void 0 : options.limit) != null ? _a : 20;\n      if (cursorRequest.cursor) {\n        const response2 = await catalogApi.queryEntities({\n          cursor: cursorRequest.cursor,\n          limit\n        });\n        return {\n          cursor: response2.pageInfo.nextCursor,\n          items: [...cursorRequest.items, ...response2.items]\n        };\n      }\n      const response = await catalogApi.queryEntities({\n        fullTextFilter: {\n          term: initialRequest.text || \"\",\n          fields: [\n            \"metadata.name\",\n            \"kind\",\n            \"spec.profile.displayname\",\n            \"metadata.title\"\n          ]\n        },\n        filter: { kind: [\"User\", \"Group\"] },\n        orderFields: [{ field: \"metadata.name\", order: \"asc\" }],\n        limit\n      });\n      return {\n        cursor: response.pageInfo.nextCursor,\n        items: response.items\n      };\n    },\n    [],\n    { loading: true }\n  );\n}\n\nfunction useFetchEntities({\n  mode,\n  initialSelectedOwnersRefs\n}) {\n  const isOwnersOnlyMode = mode === \"owners-only\";\n  const queryEntitiesResponse = useQueryEntities();\n  const facetsEntitiesResponse = useFacetsEntities({\n    enabled: isOwnersOnlyMode\n  });\n  const [state, handleFetch] = isOwnersOnlyMode ? facetsEntitiesResponse : queryEntitiesResponse;\n  return [\n    state,\n    handleFetch,\n    useSelectedOwners({\n      enabled: !isOwnersOnlyMode,\n      initialSelectedOwnersRefs\n    })\n  ];\n}\nfunction useSelectedOwners({\n  enabled,\n  initialSelectedOwnersRefs\n}) {\n  const allEntities = useRef({});\n  const catalogApi = useApi(catalogApiRef);\n  const [, handleFetch] = useAsyncFn(async () => {\n    const initialSelectedEntities = await catalogApi.getEntitiesByRefs({\n      entityRefs: initialSelectedOwnersRefs\n    });\n    initialSelectedEntities.items.forEach((e) => {\n      if (e) {\n        allEntities.current[stringifyEntityRef(e)] = e;\n      }\n    });\n  }, []);\n  useMountEffect(() => {\n    if (enabled && initialSelectedOwnersRefs.length > 0) {\n      handleFetch();\n    }\n  });\n  return {\n    getEntity: (entityRef) => allEntities.current[entityRef],\n    setEntity: (entity) => {\n      allEntities.current[stringifyEntityRef(entity)] = entity;\n    }\n  };\n}\n\nconst useStyles$f = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityOwnerPicker\"\n  }\n);\nconst icon$1 = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon$1 = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nconst EntityOwnerPicker = (props) => {\n  var _a, _b, _c;\n  const classes = useStyles$f();\n  const { mode = \"owners-only\" } = props || {};\n  const {\n    updateFilters,\n    filters,\n    queryParameters: { owners: ownersParameter }\n  } = useEntityList();\n  const [text, setText] = useState(\"\");\n  const queryParamOwners = useMemo(\n    () => [ownersParameter].flat().filter(Boolean),\n    [ownersParameter]\n  );\n  const [selectedOwners, setSelectedOwners] = useState(\n    queryParamOwners.length ? queryParamOwners : (_b = (_a = filters.owners) == null ? void 0 : _a.values) != null ? _b : []\n  );\n  const [{ value, loading }, handleFetch, cache] = useFetchEntities({\n    mode,\n    initialSelectedOwnersRefs: selectedOwners\n  });\n  useDebouncedEffect(() => handleFetch({ text }), [text, handleFetch], 250);\n  const availableOwners = (value == null ? void 0 : value.items) || [];\n  useEffect(() => {\n    if (queryParamOwners.length) {\n      const filter = new EntityOwnerFilter(queryParamOwners);\n      setSelectedOwners(filter.values);\n    }\n  }, [queryParamOwners]);\n  useEffect(() => {\n    updateFilters({\n      owners: selectedOwners.length ? new EntityOwnerFilter(selectedOwners) : void 0\n    });\n  }, [selectedOwners, updateFilters]);\n  if ([\"user\", \"group\"].includes(\n    ((_c = filters.kind) == null ? void 0 : _c.value.toLocaleLowerCase(\"en-US\")) || \"\"\n  )) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"button\", component: \"label\" }, \"Owner\", /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      multiple: true,\n      disableCloseOnSelect: true,\n      loading,\n      options: availableOwners,\n      value: selectedOwners,\n      getOptionSelected: (o, v) => {\n        if (typeof v === \"string\") {\n          return stringifyEntityRef(o) === v;\n        }\n        return o === v;\n      },\n      getOptionLabel: (o) => {\n        const entity = typeof o === \"string\" ? cache.getEntity(o) || parseEntityRef(o, {\n          defaultKind: \"group\",\n          defaultNamespace: \"default\"\n        }) : o;\n        return humanizeEntity(entity, humanizeEntityRef(entity));\n      },\n      onChange: (_, owners) => {\n        setText(\"\");\n        setSelectedOwners(\n          owners.map((e) => {\n            const entityRef = typeof e === \"string\" ? e : stringifyEntityRef(e);\n            if (typeof e !== \"string\") {\n              cache.setEntity(e);\n            }\n            return entityRef;\n          })\n        );\n      },\n      filterOptions: (x) => x,\n      renderOption: (entity, { selected }) => {\n        const isGroup = entity.kind.toLocaleLowerCase(\"en-US\") === \"group\";\n        return /* @__PURE__ */ React.createElement(\n          FormControlLabel,\n          {\n            control: /* @__PURE__ */ React.createElement(\n              Checkbox,\n              {\n                icon: icon$1,\n                checkedIcon: checkedIcon$1,\n                checked: selected\n              }\n            ),\n            onClick: (event) => event.preventDefault(),\n            label: /* @__PURE__ */ React.createElement(Box, { display: \"flex\", flexWrap: \"wrap\", alignItems: \"center\" }, isGroup ? /* @__PURE__ */ React.createElement(GroupIcon, { fontSize: \"small\" }) : /* @__PURE__ */ React.createElement(PersonIcon, { fontSize: \"small\" }), \"\\xA0\", humanizeEntity(\n              entity,\n              humanizeEntityRef(entity, { defaultKind: entity.kind })\n            ))\n          }\n        );\n      },\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { \"data-testid\": \"owner-picker-expand\" }),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(\n        TextField,\n        {\n          ...params,\n          className: classes.input,\n          onChange: (e) => {\n            setText(e.currentTarget.value);\n          },\n          variant: \"outlined\"\n        }\n      ),\n      ListboxProps: {\n        onScroll: (e) => {\n          const element = e.currentTarget;\n          const hasReachedEnd = Math.abs(\n            element.scrollHeight - element.clientHeight - element.scrollTop\n          ) < 1;\n          if (hasReachedEnd && (value == null ? void 0 : value.cursor)) {\n            handleFetch({ items: value.items, cursor: value.cursor });\n          }\n        },\n        \"data-testid\": \"owner-picker-listbox\"\n      }\n    }\n  )));\n};\n\nconst useStyles$e = makeStyles(\n  (theme) => ({\n    root: {\n      display: \"inline-flex\",\n      alignItems: \"center\"\n    },\n    icon: {\n      marginRight: theme.spacing(0.5),\n      color: theme.palette.text.secondary,\n      lineHeight: 0\n    }\n  }),\n  { name: \"CatalogReactEntityDisplayName\" }\n);\nconst EntityDisplayName = (props) => {\n  const { entityRef, hideIcon, disableTooltip, defaultKind, defaultNamespace } = props;\n  const classes = useStyles$e();\n  const { primaryTitle, secondaryTitle, Icon } = useEntityPresentation(\n    entityRef,\n    { defaultKind, defaultNamespace }\n  );\n  let content = /* @__PURE__ */ React.createElement(React.Fragment, null, primaryTitle);\n  content = /* @__PURE__ */ React.createElement(Box, { component: \"span\", className: classes.root }, Icon && !hideIcon ? /* @__PURE__ */ React.createElement(Box, { component: \"span\", className: classes.icon }, /* @__PURE__ */ React.createElement(Icon, { fontSize: \"inherit\" })) : null, content);\n  if (secondaryTitle && !disableTooltip) {\n    content = /* @__PURE__ */ React.createElement(Tooltip, { enterDelay: 1500, title: secondaryTitle }, content);\n  }\n  return content;\n};\n\nconst entityRouteRef = getOrCreateGlobalSingleton(\n  \"catalog:entity-route-ref\",\n  () => createRouteRef({\n    id: \"catalog:entity\",\n    params: [\"namespace\", \"kind\", \"name\"]\n  })\n);\nfunction entityRouteParams(entity) {\n  var _a, _b;\n  return {\n    kind: entity.kind.toLocaleLowerCase(\"en-US\"),\n    namespace: (_b = (_a = entity.metadata.namespace) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\")) != null ? _b : DEFAULT_NAMESPACE,\n    name: entity.metadata.name\n  };\n}\n\nconst EntityRefLink = forwardRef(\n  (props, ref) => {\n    var _a;\n    const {\n      entityRef,\n      defaultKind,\n      defaultNamespace,\n      title,\n      children,\n      hideIcon,\n      ...linkProps\n    } = props;\n    const entityRoute = useEntityRoute(props.entityRef);\n    const content = (_a = children != null ? children : title) != null ? _a : /* @__PURE__ */ React.createElement(\n      EntityDisplayName,\n      {\n        entityRef,\n        defaultKind,\n        defaultNamespace,\n        hideIcon\n      }\n    );\n    return /* @__PURE__ */ React.createElement(Link, { ...linkProps, ref, to: entityRoute }, content);\n  }\n);\nfunction useEntityRoute(entityRef) {\n  var _a;\n  const entityRoute = useRouteRef(entityRouteRef);\n  let kind;\n  let namespace;\n  let name;\n  if (typeof entityRef === \"string\") {\n    const parsed = parseEntityRef(entityRef);\n    kind = parsed.kind;\n    namespace = parsed.namespace;\n    name = parsed.name;\n  } else if (\"metadata\" in entityRef) {\n    kind = entityRef.kind;\n    namespace = entityRef.metadata.namespace;\n    name = entityRef.metadata.name;\n  } else {\n    kind = entityRef.kind;\n    namespace = entityRef.namespace;\n    name = entityRef.name;\n  }\n  kind = kind.toLocaleLowerCase(\"en-US\");\n  namespace = (_a = namespace == null ? void 0 : namespace.toLocaleLowerCase(\"en-US\")) != null ? _a : DEFAULT_NAMESPACE;\n  const routeParams = {\n    kind: encodeURIComponent(kind),\n    namespace: encodeURIComponent(namespace),\n    name: encodeURIComponent(name)\n  };\n  return entityRoute(routeParams);\n}\n\nfunction EntityRefLinks(props) {\n  const { entityRefs, hideIcons, ...linkProps } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, entityRefs.map((r, i) => {\n    const entityRefString = typeof r === \"string\" ? r : stringifyEntityRef(r);\n    return /* @__PURE__ */ React.createElement(React.Fragment, { key: `${i}.${entityRefString}` }, i > 0 && \", \", /* @__PURE__ */ React.createElement(EntityRefLink, { ...linkProps, entityRef: r, hideIcon: hideIcons }));\n  }));\n}\n\nconst EntityCardActions = (props) => {\n  const entityRoute = useRouteRef(entityRouteRef);\n  return /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      component: Link,\n      \"aria-label\": \"Show\",\n      title: \"Show details\",\n      to: entityRoute(getCompoundEntityRef(props.entity))\n    },\n    /* @__PURE__ */ React.createElement(InfoIcon, null)\n  );\n};\n\nconst EmailCardAction = (props) => {\n  return /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      component: Link,\n      \"aria-label\": \"Email\",\n      title: `Email ${props.email}`,\n      to: `mailto:${props.email}`\n    },\n    /* @__PURE__ */ React.createElement(EmailIcon, null)\n  );\n};\n\nconst GroupCardActions = (props) => {\n  var _a;\n  const email = (_a = props.entity.spec.profile) == null ? void 0 : _a.email;\n  return email ? /* @__PURE__ */ React.createElement(EmailCardAction, { email }) : null;\n};\n\nconst UserCardActions = (props) => {\n  var _a;\n  const email = (_a = props.entity.spec.profile) == null ? void 0 : _a.email;\n  return email ? /* @__PURE__ */ React.createElement(EmailCardAction, { email }) : null;\n};\n\nconst useStyles$d = makeStyles(() => {\n  return {\n    popoverPaper: {\n      width: \"30em\"\n    },\n    descriptionTypography: {\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      display: \"-webkit-box\",\n      WebkitLineClamp: 2,\n      WebkitBoxOrient: \"vertical\"\n    }\n  };\n});\nconst maxTagChips = 4;\nconst EntityPeekAheadPopover = (props) => {\n  var _a, _b, _c, _d;\n  const { entityRef, children, delayTime = 500 } = props;\n  const classes = useStyles$d();\n  const apiHolder = useApiHolder();\n  const popupState = usePopupState({\n    variant: \"popover\",\n    popupId: \"entity-peek-ahead\"\n  });\n  const [isHovered, setIsHovered] = useState(false);\n  const debouncedHandleMouseEnter = useMemo(\n    () => debounce(() => setIsHovered(true), delayTime),\n    [delayTime]\n  );\n  const [{ loading, error, value: entity }, load] = useAsyncFn(async () => {\n    const catalogApi = apiHolder.get(catalogApiRef);\n    if (catalogApi) {\n      const retrievedEntity = await catalogApi.getEntityByRef(entityRef);\n      if (!retrievedEntity) {\n        throw new Error(`${entityRef} not found`);\n      }\n      return retrievedEntity;\n    }\n    return void 0;\n  }, [apiHolder, entityRef]);\n  const handleOnMouseLeave = () => {\n    setIsHovered(false);\n    debouncedHandleMouseEnter.cancel();\n  };\n  useEffect(() => {\n    if (popupState.isOpen && !entity && !error && !loading) {\n      load();\n    }\n  }, [popupState.isOpen, load, entity, error, loading]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { component: \"span\", onMouseEnter: debouncedHandleMouseEnter }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      \"data-testid\": \"trigger\",\n      ...bindHover(popupState)\n    },\n    children\n  )), isHovered && /* @__PURE__ */ React.createElement(\n    HoverPopover,\n    {\n      PaperProps: {\n        className: classes.popoverPaper\n      },\n      ...bindPopover(popupState),\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"center\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"center\"\n      },\n      onMouseLeave: handleOnMouseLeave\n    },\n    /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardContent, null, error && /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error }), loading && /* @__PURE__ */ React.createElement(Progress, null), entity && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { color: \"textSecondary\" }, entity.metadata.namespace), /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", component: \"div\" }, entity.metadata.name), /* @__PURE__ */ React.createElement(Typography, { color: \"textSecondary\", gutterBottom: true }, entity.kind), entity.metadata.description && /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        className: classes.descriptionTypography,\n        paragraph: true\n      },\n      entity.metadata.description\n    ), /* @__PURE__ */ React.createElement(Typography, null, (_b = (_a = entity.spec) == null ? void 0 : _a.type) == null ? void 0 : _b.toString()), /* @__PURE__ */ React.createElement(Box, { marginTop: \"0.5em\" }, (entity.metadata.tags || []).slice(0, maxTagChips).map((tag) => {\n      return /* @__PURE__ */ React.createElement(Chip, { key: tag, size: \"small\", label: tag });\n    }), ((_c = entity.metadata.tags) == null ? void 0 : _c.length) && ((_d = entity.metadata.tags) == null ? void 0 : _d.length) > maxTagChips && /* @__PURE__ */ React.createElement(Tooltip, { title: \"Drill into the entity to see all of the tags.\" }, /* @__PURE__ */ React.createElement(Chip, { key: \"other-tags\", size: \"small\", label: \"...\" }))))), !error && entity && /* @__PURE__ */ React.createElement(CardActions, null, /* @__PURE__ */ React.createElement(React.Fragment, null, isUserEntity(entity) && /* @__PURE__ */ React.createElement(UserCardActions, { entity }), isGroupEntity(entity) && /* @__PURE__ */ React.createElement(GroupCardActions, { entity }), /* @__PURE__ */ React.createElement(EntityCardActions, { entity }))))\n  ));\n};\n\nconst useStyles$c = makeStyles(\n  (_theme) => ({\n    searchToolbar: {\n      paddingLeft: 0,\n      paddingRight: 0\n    },\n    input: {}\n  }),\n  {\n    name: \"CatalogReactEntitySearchBar\"\n  }\n);\nconst EntitySearchBar = () => {\n  var _a, _b;\n  const classes = useStyles$c();\n  const { filters, updateFilters } = useEntityList();\n  const [search, setSearch] = useState((_b = (_a = filters.text) == null ? void 0 : _a.value) != null ? _b : \"\");\n  useDebounce(\n    () => {\n      updateFilters({\n        text: search.length ? new EntityTextFilter(search) : void 0\n      });\n    },\n    250,\n    [search, updateFilters]\n  );\n  return /* @__PURE__ */ React.createElement(Toolbar, { className: classes.searchToolbar }, /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(\n    Input,\n    {\n      \"aria-label\": \"search\",\n      id: \"input-with-icon-adornment\",\n      className: classes.input,\n      placeholder: \"Search\",\n      autoComplete: \"off\",\n      onChange: (event) => setSearch(event.target.value),\n      value: search,\n      startAdornment: /* @__PURE__ */ React.createElement(InputAdornment, { position: \"start\" }, /* @__PURE__ */ React.createElement(Search, null)),\n      endAdornment: /* @__PURE__ */ React.createElement(InputAdornment, { position: \"end\" }, /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          \"aria-label\": \"clear search\",\n          onClick: () => setSearch(\"\"),\n          edge: \"end\",\n          disabled: search.length === 0\n        },\n        /* @__PURE__ */ React.createElement(Clear, null)\n      ))\n    }\n  )));\n};\n\nconst columnFactories = Object.freeze({\n  createEntityRefColumn(options) {\n    const { defaultKind } = options;\n    function formatContent(entity) {\n      var _a;\n      return ((_a = entity.metadata) == null ? void 0 : _a.title) || humanizeEntityRef(entity, {\n        defaultKind\n      });\n    }\n    return {\n      title: \"Name\",\n      highlight: true,\n      customFilterAndSearch(filter, entity) {\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: (entity) => {\n        var _a;\n        return /* @__PURE__ */ React.createElement(\n          EntityRefLink,\n          {\n            entityRef: entity,\n            defaultKind,\n            title: (_a = entity.metadata) == null ? void 0 : _a.title\n          }\n        );\n      }\n    };\n  },\n  createEntityRelationColumn(options) {\n    const { title, relation, defaultKind, filter: entityFilter } = options;\n    function getRelations(entity) {\n      return getEntityRelations(entity, relation, entityFilter);\n    }\n    function formatContent(entity) {\n      return getRelations(entity).map((r) => humanizeEntityRef(r, { defaultKind })).join(\", \");\n    }\n    return {\n      title,\n      customFilterAndSearch(filter, entity) {\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: (entity) => {\n        return /* @__PURE__ */ React.createElement(\n          EntityRefLinks,\n          {\n            entityRefs: getRelations(entity),\n            defaultKind\n          }\n        );\n      }\n    };\n  },\n  createOwnerColumn() {\n    return this.createEntityRelationColumn({\n      title: \"Owner\",\n      relation: RELATION_OWNED_BY,\n      defaultKind: \"group\"\n    });\n  },\n  createDomainColumn() {\n    return this.createEntityRelationColumn({\n      title: \"Domain\",\n      relation: RELATION_PART_OF,\n      defaultKind: \"domain\",\n      filter: {\n        kind: \"domain\"\n      }\n    });\n  },\n  createSystemColumn() {\n    return this.createEntityRelationColumn({\n      title: \"System\",\n      relation: RELATION_PART_OF,\n      defaultKind: \"system\",\n      filter: {\n        kind: \"system\"\n      }\n    });\n  },\n  createMetadataDescriptionColumn() {\n    return {\n      title: \"Description\",\n      field: \"metadata.description\",\n      render: (entity) => /* @__PURE__ */ React.createElement(\n        OverflowTooltip,\n        {\n          text: entity.metadata.description,\n          placement: \"bottom-start\",\n          line: 2\n        }\n      )\n    };\n  },\n  createSpecLifecycleColumn() {\n    return {\n      title: \"Lifecycle\",\n      field: \"spec.lifecycle\"\n    };\n  },\n  createSpecTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"spec.type\"\n    };\n  }\n});\n\nconst systemEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: \"system\" }),\n  columnFactories.createDomainColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createMetadataDescriptionColumn()\n];\nconst componentEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: \"component\" }),\n  columnFactories.createSystemColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createSpecTypeColumn(),\n  columnFactories.createSpecLifecycleColumn(),\n  columnFactories.createMetadataDescriptionColumn()\n];\n\nconst useStyles$b = makeStyles((theme) => ({\n  empty: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    justifyContent: \"center\"\n  }\n}));\nconst EntityTable = (props) => {\n  const {\n    entities,\n    title,\n    emptyContent,\n    variant = \"gridItem\",\n    columns,\n    tableOptions = {}\n  } = props;\n  const classes = useStyles$b();\n  const tableStyle = {\n    minWidth: \"0\",\n    width: \"100%\"\n  };\n  if (variant === \"gridItem\") {\n    tableStyle.height = \"calc(100% - 10px)\";\n  }\n  return /* @__PURE__ */ React.createElement(\n    Table,\n    {\n      columns,\n      title,\n      style: tableStyle,\n      emptyContent: emptyContent && /* @__PURE__ */ React.createElement(\"div\", { className: classes.empty }, emptyContent),\n      options: {\n        // TODO: Toolbar padding if off compared to other cards, should be: padding: 16px 24px;\n        search: false,\n        paging: false,\n        actionsColumnIndex: -1,\n        padding: \"dense\",\n        draggable: false,\n        ...tableOptions\n      },\n      data: entities\n    }\n  );\n};\nEntityTable.columns = columnFactories;\nEntityTable.systemEntityColumns = systemEntityColumns;\nEntityTable.componentEntityColumns = componentEntityColumns;\n\nconst useStyles$a = makeStyles(\n  { input: {} },\n  { name: \"CatalogReactEntityTagPicker\" }\n);\nconst EntityTagPicker = (props) => {\n  const classes = useStyles$a();\n  return /* @__PURE__ */ React.createElement(\n    EntityAutocompletePicker,\n    {\n      label: \"Tags\",\n      name: \"tags\",\n      path: \"metadata.tags\",\n      Filter: EntityTagFilter,\n      showCounts: props.showCounts,\n      InputProps: { className: classes.input }\n    }\n  );\n};\n\nconst EntityTypePicker = (props) => {\n  var _a;\n  const { hidden, initialFilter } = props;\n  const alertApi = useApi(alertApiRef);\n  const { error, availableTypes, selectedTypes, setSelectedTypes } = useEntityTypeFilter();\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load entity types`,\n        severity: \"error\"\n      });\n    }\n    if (initialFilter) {\n      setSelectedTypes([initialFilter]);\n    }\n  }, [error, alertApi, initialFilter, setSelectedTypes]);\n  if (availableTypes.length === 0 || error)\n    return null;\n  const items = [\n    { value: \"all\", label: \"all\" },\n    ...availableTypes.map((type) => ({\n      value: type,\n      label: type\n    }))\n  ];\n  return hidden ? null : /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      label: \"Type\",\n      items,\n      selected: (_a = items.length > 1 ? selectedTypes[0] : void 0) != null ? _a : \"all\",\n      onChange: (value) => setSelectedTypes(value === \"all\" ? [] : [String(value)])\n    }\n  ));\n};\n\nconst YellowStar = withStyles({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst FavoriteEntity = (props) => {\n  const { toggleStarredEntity, isStarredEntity } = useStarredEntity(\n    props.entity\n  );\n  return /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"aria-label\": \"favorite\",\n      color: \"inherit\",\n      ...props,\n      onClick: () => toggleStarredEntity()\n    },\n    /* @__PURE__ */ React.createElement(\n      Tooltip,\n      {\n        title: isStarredEntity ? \"Remove from favorites\" : \"Add to favorites\"\n      },\n      isStarredEntity ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null)\n    )\n  );\n};\n\nconst DEFAULT_ICON = WorkIcon;\nfunction getKind(kind, entityRef) {\n  if (kind) {\n    return kind.toLocaleLowerCase(\"en-US\");\n  }\n  if (entityRef) {\n    try {\n      return parseEntityRef(entityRef).kind.toLocaleLowerCase(\"en-US\");\n    } catch {\n      return void 0;\n    }\n  }\n  return void 0;\n}\nfunction useIcon(kind, entityRef) {\n  const app = useApp();\n  const actualKind = getKind(kind, entityRef);\n  if (!actualKind) {\n    return DEFAULT_ICON;\n  }\n  const icon = app.getSystemIcon(`kind:${actualKind}`);\n  return icon || DEFAULT_ICON;\n}\nfunction EntityKindIcon(props) {\n  const { kind, entityRef, ...otherProps } = props;\n  const Icon = useIcon(kind, entityRef);\n  return /* @__PURE__ */ React.createElement(Icon, { ...otherProps });\n}\n\nconst useStyles$9 = makeStyles((theme) => ({\n  node: {\n    fill: theme.palette.grey[300],\n    stroke: theme.palette.grey[300],\n    \"&.primary\": {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.light,\n      stroke: theme.palette.secondary.light\n    }\n  },\n  text: {\n    fill: theme.palette.getContrastText(theme.palette.grey[300]),\n    \"&.primary\": {\n      fill: theme.palette.primary.contrastText\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.contrastText\n    },\n    \"&.focused\": {\n      fontWeight: \"bold\"\n    }\n  },\n  clickable: {\n    cursor: \"pointer\"\n  }\n}));\nfunction useAncestry(root) {\n  const catalogClient = useApi(catalogApiRef);\n  const entityRef = stringifyEntityRef(root);\n  const { loading, error, value } = useAsync(async () => {\n    const response = await catalogClient.getEntityAncestors({ entityRef });\n    const nodes = new Array();\n    const edges = new Array();\n    for (const current of response.items) {\n      const currentRef = stringifyEntityRef(current.entity);\n      const isRootNode = currentRef === response.rootEntityRef;\n      nodes.push({ id: currentRef, root: isRootNode, ...current.entity });\n      for (const parentRef of current.parentEntityRefs) {\n        edges.push({ from: currentRef, to: parentRef });\n      }\n    }\n    return { nodes, edges };\n  }, [entityRef]);\n  return {\n    loading,\n    error,\n    nodes: (value == null ? void 0 : value.nodes) || [],\n    edges: (value == null ? void 0 : value.edges) || []\n  };\n}\nfunction CustomNode({ node }) {\n  const classes = useStyles$9();\n  const navigate = useNavigate();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const idRef = useRef(null);\n  useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const padding = 10;\n  const iconSize = height;\n  const paddedIconWidth = iconSize + padding;\n  const paddedWidth = paddedIconWidth + width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  const displayTitle = node.metadata.title || (node.kind && node.metadata.name && node.metadata.namespace ? humanizeEntityRef({\n    kind: node.kind,\n    name: node.metadata.name,\n    namespace: node.metadata.namespace || \"\"\n  }) : node.id);\n  const onClick = () => {\n    navigate(\n      entityRoute({\n        kind: node.kind,\n        namespace: node.metadata.namespace || DEFAULT_NAMESPACE,\n        name: node.metadata.name\n      })\n    );\n  };\n  return /* @__PURE__ */ React.createElement(\"g\", { onClick, className: classes.clickable }, /* @__PURE__ */ React.createElement(\n    \"rect\",\n    {\n      className: classNames(\n        classes.node,\n        node.root ? \"secondary\" : \"primary\"\n      ),\n      width: paddedWidth,\n      height: paddedHeight,\n      rx: 10\n    }\n  ), /* @__PURE__ */ React.createElement(\n    EntityKindIcon,\n    {\n      kind: node.kind,\n      y: padding,\n      x: padding,\n      width: iconSize,\n      height: iconSize,\n      className: classNames(\n        classes.text,\n        node.root ? \"secondary\" : \"primary\"\n      )\n    }\n  ), /* @__PURE__ */ React.createElement(\n    \"text\",\n    {\n      ref: idRef,\n      className: classNames(\n        classes.text,\n        node.root ? \"secondary\" : \"primary\"\n      ),\n      y: paddedHeight / 2,\n      x: paddedIconWidth + (width + padding * 2) / 2,\n      textAnchor: \"middle\",\n      alignmentBaseline: \"middle\"\n    },\n    displayTitle\n  ));\n}\nfunction AncestryPage(props) {\n  const { loading, error, nodes, edges } = useAncestry(props.entity);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error });\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, { variant: \"h2\" }, \"Ancestry\"), /* @__PURE__ */ React.createElement(DialogContentText, { gutterBottom: true }, \"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where\", \" \", /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/life-of-an-entity\" }, \"processors emitted\"), \" \", \"child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations.\"), /* @__PURE__ */ React.createElement(Box, { mt: 4 }, /* @__PURE__ */ React.createElement(\n    DependencyGraph,\n    {\n      nodes,\n      edges,\n      renderNode: CustomNode,\n      direction: DependencyGraphTypes.Direction.BOTTOM_TOP,\n      zoom: \"enable-on-click\"\n    }\n  )));\n}\n\nconst useStyles$8 = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  marginTop: {\n    marginTop: theme.spacing(2)\n  },\n  helpIcon: {\n    marginLeft: theme.spacing(1),\n    color: theme.palette.text.disabled\n  },\n  monospace: {\n    fontFamily: \"monospace\"\n  }\n}));\nfunction ListItemText(props) {\n  const classes = useStyles$8();\n  return /* @__PURE__ */ React.createElement(\n    ListItemText$1,\n    {\n      ...props,\n      primaryTypographyProps: { className: classes.monospace },\n      secondaryTypographyProps: { className: classes.monospace }\n    }\n  );\n}\nfunction ListSubheader(props) {\n  const classes = useStyles$8();\n  return /* @__PURE__ */ React.createElement(ListSubheader$1, { className: classes.monospace }, props.children);\n}\nfunction Container(props) {\n  return /* @__PURE__ */ React.createElement(Box, { mt: 2 }, /* @__PURE__ */ React.createElement(Card, { variant: \"outlined\" }, /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", gutterBottom: true }, props.title, props.helpLink && /* @__PURE__ */ React.createElement(HelpIcon, { to: props.helpLink })), props.children)));\n}\nfunction findLink(value) {\n  if (value.match(/^url:https?:\\/\\//)) {\n    return value.slice(\"url:\".length);\n  }\n  if (value.match(/^https?:\\/\\//)) {\n    return value;\n  }\n  return void 0;\n}\nfunction KeyValueListItem(props) {\n  const [key, value] = props.entry;\n  const link = findLink(value);\n  return /* @__PURE__ */ React.createElement(ListItem, null, props.indent && /* @__PURE__ */ React.createElement(ListItemIcon, null), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: key,\n      secondary: link ? /* @__PURE__ */ React.createElement(Link, { to: link }, value) : value\n    }\n  ));\n}\nfunction HelpIcon(props) {\n  const classes = useStyles$8();\n  return /* @__PURE__ */ React.createElement(Link, { to: props.to, className: classes.helpIcon }, /* @__PURE__ */ React.createElement(HelpOutlineIcon, { fontSize: \"inherit\" }));\n}\n\nconst useStyles$7 = makeStyles({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  }\n});\nfunction useColocated(entity) {\n  var _a, _b;\n  const catalogApi = useApi(catalogApiRef);\n  const currentEntityRef = stringifyEntityRef(entity);\n  const location = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_LOCATION];\n  const origin = (_b = entity.metadata.annotations) == null ? void 0 : _b[ANNOTATION_ORIGIN_LOCATION];\n  const { loading, error, value } = useAsync(async () => {\n    if (!location && !origin) {\n      return [];\n    }\n    const response = await catalogApi.getEntities({\n      filter: [\n        ...location ? [{ [`metadata.annotations.${ANNOTATION_LOCATION}`]: location }] : [],\n        ...origin ? [{ [`metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`]: origin }] : []\n      ]\n    });\n    return response.items;\n  }, [location, origin]);\n  return {\n    loading,\n    error,\n    location,\n    originLocation: origin,\n    colocatedEntities: value == null ? void 0 : value.filter(\n      (colocated) => stringifyEntityRef(colocated) !== currentEntityRef\n    )\n  };\n}\nfunction EntityList(props) {\n  return /* @__PURE__ */ React.createElement(List, { dense: true }, props.header && /* @__PURE__ */ React.createElement(KeyValueListItem, { key: \"header\", entry: props.header }), props.entities.map((entity) => /* @__PURE__ */ React.createElement(ListItem, { key: stringifyEntityRef(entity) }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(EntityKindIcon, { kind: entity.kind })), /* @__PURE__ */ React.createElement(ListItemText, { primary: /* @__PURE__ */ React.createElement(EntityRefLink, { entityRef: entity }) }))));\n}\nfunction Contents$1(props) {\n  const { entity } = props;\n  const { loading, error, location, originLocation, colocatedEntities } = useColocated(entity);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error });\n  }\n  if (!location && !originLocation) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"warning\" }, \"Entity had no location information.\");\n  } else if (!(colocatedEntities == null ? void 0 : colocatedEntities.length)) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"info\" }, \"There were no other entities on this location.\");\n  }\n  if (location === originLocation) {\n    return /* @__PURE__ */ React.createElement(EntityList, { entities: colocatedEntities });\n  }\n  const atLocation = colocatedEntities.filter(\n    (e) => {\n      var _a;\n      return ((_a = e.metadata.annotations) == null ? void 0 : _a[ANNOTATION_LOCATION]) === location;\n    }\n  );\n  const atOrigin = colocatedEntities.filter(\n    (e) => {\n      var _a;\n      return ((_a = e.metadata.annotations) == null ? void 0 : _a[ANNOTATION_ORIGIN_LOCATION]) === originLocation;\n    }\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, atLocation.length > 0 && /* @__PURE__ */ React.createElement(\n    EntityList,\n    {\n      entities: atLocation,\n      header: [\"At the same location\", location]\n    }\n  ), atOrigin.length > 0 && /* @__PURE__ */ React.createElement(\n    EntityList,\n    {\n      entities: atOrigin,\n      header: [\"At the same origin\", originLocation]\n    }\n  ));\n}\nfunction ColocatedPage(props) {\n  const classes = useStyles$7();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, { variant: \"h2\" }, \"Colocated\"), /* @__PURE__ */ React.createElement(DialogContentText, null, \"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL).\"), /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(Contents$1, { entity: props.entity })));\n}\n\nfunction sortKeys(data) {\n  return Object.fromEntries(\n    [...Object.entries(data)].sort((a, b) => a[0] < b[0] ? -1 : 1)\n  );\n}\n\nfunction JsonPage(props) {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, { variant: \"h2\" }, \"Entity as JSON\"), /* @__PURE__ */ React.createElement(DialogContentText, null, \"This is the raw entity data as received from the catalog, on JSON form.\"), /* @__PURE__ */ React.createElement(DialogContentText, null, /* @__PURE__ */ React.createElement(\"div\", { style: { fontSize: \"75%\" }, \"data-testid\": \"code-snippet\" }, /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      text: JSON.stringify(sortKeys(props.entity), void 0, 2),\n      language: \"json\",\n      showCopyCodeButton: true\n    }\n  ))));\n}\n\nconst useStyles$6 = makeStyles({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  }\n});\nfunction OverviewPage(props) {\n  var _a, _b, _c;\n  const classes = useStyles$6();\n  const {\n    apiVersion,\n    kind,\n    metadata,\n    spec,\n    relations = [],\n    status = {}\n  } = props.entity;\n  const groupedRelations = groupBy(\n    sortBy(relations, (r) => r.targetRef),\n    \"type\"\n  );\n  const entityRef = stringifyEntityRef(props.entity);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, { variant: \"h2\" }, \"Overview\"), /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(Container, { title: \"Identity\" }, /* @__PURE__ */ React.createElement(List, { dense: true }, /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"apiVersion\", secondary: apiVersion })), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"kind\", secondary: kind })), (spec == null ? void 0 : spec.type) && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: \"spec.type\",\n      secondary: (_a = spec.type) == null ? void 0 : _a.toString()\n    }\n  )), metadata.uid && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"uid\", secondary: metadata.uid }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(CopyTextButton, { text: metadata.uid }))), metadata.etag && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"etag\", secondary: metadata.etag }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(CopyTextButton, { text: metadata.etag }))), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"entityRef\", secondary: entityRef }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(CopyTextButton, { text: entityRef }))))), /* @__PURE__ */ React.createElement(Container, { title: \"Metadata\" }, !!Object.keys(metadata.annotations || {}).length && /* @__PURE__ */ React.createElement(\n    List,\n    {\n      dense: true,\n      subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Annotations\", /* @__PURE__ */ React.createElement(HelpIcon, { to: \"https://backstage.io/docs/features/software-catalog/well-known-annotations\" }))\n    },\n    Object.entries(metadata.annotations).map((entry) => /* @__PURE__ */ React.createElement(KeyValueListItem, { key: entry[0], indent: true, entry }))\n  ), !!Object.keys(metadata.labels || {}).length && /* @__PURE__ */ React.createElement(List, { dense: true, subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Labels\") }, Object.entries(metadata.labels).map((entry) => /* @__PURE__ */ React.createElement(KeyValueListItem, { key: entry[0], indent: true, entry }))), !!((_b = metadata.tags) == null ? void 0 : _b.length) && /* @__PURE__ */ React.createElement(List, { dense: true, subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Tags\") }, metadata.tags.map((tag, index) => /* @__PURE__ */ React.createElement(ListItem, { key: `${tag}-${index}` }, /* @__PURE__ */ React.createElement(ListItemIcon, null), /* @__PURE__ */ React.createElement(ListItemText, { primary: tag }))))), !!relations.length && /* @__PURE__ */ React.createElement(\n    Container,\n    {\n      title: \"Relations\",\n      helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-relations\"\n    },\n    Object.entries(groupedRelations).map(\n      ([type, groupRelations], index) => /* @__PURE__ */ React.createElement(\"div\", { key: index }, /* @__PURE__ */ React.createElement(List, { dense: true, subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, type) }, groupRelations.map((group) => /* @__PURE__ */ React.createElement(ListItem, { key: group.targetRef }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(EntityKindIcon, { entityRef: group.targetRef })), /* @__PURE__ */ React.createElement(\n        ListItemText,\n        {\n          primary: /* @__PURE__ */ React.createElement(EntityRefLink, { entityRef: group.targetRef })\n        }\n      )))))\n    )\n  ), !!((_c = status.items) == null ? void 0 : _c.length) && /* @__PURE__ */ React.createElement(\n    Container,\n    {\n      title: \"Status\",\n      helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-statuses\"\n    },\n    status.items.map((item, index) => /* @__PURE__ */ React.createElement(\"div\", { key: index }, /* @__PURE__ */ React.createElement(Typography, null, item.level, \": \", item.type), /* @__PURE__ */ React.createElement(Box, { ml: 2 }, item.message)))\n  )));\n}\n\nfunction YamlPage(props) {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText$1, { variant: \"h2\" }, \"Entity as YAML\"), /* @__PURE__ */ React.createElement(DialogContentText$1, null, \"This is the raw entity data as received from the catalog, on YAML form.\"), /* @__PURE__ */ React.createElement(DialogContentText$1, null, /* @__PURE__ */ React.createElement(\"div\", { style: { fontSize: \"75%\" }, \"data-testid\": \"code-snippet\" }, /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      text: YAML.stringify(sortKeys(props.entity)),\n      language: \"yaml\",\n      showCopyCodeButton: true\n    }\n  ))));\n}\n\nconst useStyles$5 = makeStyles((theme) => ({\n  fullHeightDialog: {\n    height: \"calc(100% - 64px)\"\n  },\n  root: {\n    display: \"flex\",\n    flexGrow: 1,\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper\n  },\n  tabs: {\n    borderRight: `1px solid ${theme.palette.divider}`,\n    flexShrink: 0\n  },\n  tabContents: {\n    flexGrow: 1,\n    overflowX: \"auto\"\n  }\n}));\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n  const classes = useStyles$5();\n  return /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      role: \"tabpanel\",\n      hidden: value !== index,\n      id: `vertical-tabpanel-${index}`,\n      \"aria-labelledby\": `vertical-tab-${index}`,\n      className: classes.tabContents,\n      ...other\n    },\n    value === index && /* @__PURE__ */ React.createElement(Box, { pl: 3, pr: 3 }, children)\n  );\n}\nfunction a11yProps(index) {\n  return {\n    id: `vertical-tab-${index}`,\n    \"aria-controls\": `vertical-tabpanel-${index}`\n  };\n}\nfunction InspectEntityDialog(props) {\n  const classes = useStyles$5();\n  const [activeTab, setActiveTab] = React.useState(0);\n  useEffect(() => {\n    setActiveTab(0);\n  }, [props.open]);\n  if (!props.entity) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      fullWidth: true,\n      maxWidth: \"xl\",\n      open: props.open,\n      onClose: props.onClose,\n      \"aria-labelledby\": \"entity-inspector-dialog-title\",\n      PaperProps: { className: classes.fullHeightDialog }\n    },\n    /* @__PURE__ */ React.createElement(DialogTitle, { id: \"entity-inspector-dialog-title\" }, \"Entity Inspector\"),\n    /* @__PURE__ */ React.createElement(DialogContent, { dividers: true }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(\n      Tabs,\n      {\n        orientation: \"vertical\",\n        variant: \"scrollable\",\n        value: activeTab,\n        onChange: (_, newValue) => setActiveTab(newValue),\n        \"aria-label\": \"Inspector options\",\n        className: classes.tabs\n      },\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Overview\", ...a11yProps(0) }),\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Ancestry\", ...a11yProps(1) }),\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Colocated\", ...a11yProps(2) }),\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Raw JSON\", ...a11yProps(3) }),\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Raw YAML\", ...a11yProps(4) })\n    ), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 0 }, /* @__PURE__ */ React.createElement(OverviewPage, { entity: props.entity })), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 1 }, /* @__PURE__ */ React.createElement(AncestryPage, { entity: props.entity })), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 2 }, /* @__PURE__ */ React.createElement(ColocatedPage, { entity: props.entity })), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 3 }, /* @__PURE__ */ React.createElement(JsonPage, { entity: props.entity })), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 4 }, /* @__PURE__ */ React.createElement(YamlPage, { entity: props.entity })))),\n    /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, { onClick: props.onClose, color: \"primary\" }, \"Close\"))\n  );\n}\n\nfunction useUnregisterEntityDialogState(entity) {\n  var _a;\n  const catalogApi = useApi(catalogApiRef);\n  const locationRef = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_ORIGIN_LOCATION];\n  const uid = entity.metadata.uid;\n  const isBootstrap = locationRef === \"bootstrap:bootstrap\";\n  const prerequisites = useAsync(async () => {\n    const locationPromise = catalogApi.getLocationByRef(locationRef);\n    let colocatedEntitiesPromise;\n    if (!locationRef) {\n      colocatedEntitiesPromise = Promise.resolve([]);\n    } else {\n      const locationAnnotationFilter = `metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`;\n      colocatedEntitiesPromise = catalogApi.getEntities({\n        filter: { [locationAnnotationFilter]: locationRef },\n        fields: [\n          \"kind\",\n          \"metadata.uid\",\n          \"metadata.name\",\n          \"metadata.namespace\"\n        ]\n      }).then((response) => response.items);\n    }\n    return Promise.all([locationPromise, colocatedEntitiesPromise]).then(\n      ([location2, colocatedEntities2]) => ({\n        location: location2,\n        colocatedEntities: colocatedEntities2\n      })\n    );\n  }, [catalogApi, entity]);\n  const unregisterLocation = useCallback(\n    async function unregisterLocationFn() {\n      const { location: location2 } = prerequisites.value;\n      await catalogApi.removeLocationById(location2.id);\n    },\n    [catalogApi, prerequisites]\n  );\n  const deleteEntity = useCallback(\n    async function deleteEntityFn() {\n      await catalogApi.removeEntityByUid(uid);\n    },\n    [catalogApi, uid]\n  );\n  if (isBootstrap) {\n    return { type: \"bootstrap\", location: locationRef, deleteEntity };\n  }\n  const { loading, error, value } = prerequisites;\n  if (loading) {\n    return { type: \"loading\" };\n  } else if (error) {\n    return { type: \"error\", error };\n  }\n  const { location, colocatedEntities } = value;\n  if (!location) {\n    return { type: \"only-delete\", deleteEntity };\n  }\n  return {\n    type: \"unregister\",\n    location: locationRef,\n    colocatedEntities: colocatedEntities.map(getCompoundEntityRef),\n    unregisterLocation,\n    deleteEntity\n  };\n}\n\nconst useStyles$4 = makeStyles({\n  advancedButton: {\n    fontSize: \"0.7em\"\n  },\n  dialogActions: {\n    display: \"inline-block\"\n  }\n});\nconst Contents = ({\n  entity,\n  onConfirm,\n  onClose\n}) => {\n  var _a;\n  const alertApi = useApi(alertApiRef);\n  const configApi = useApi(configApiRef);\n  const classes = useStyles$4();\n  const state = useUnregisterEntityDialogState(entity);\n  const [showDelete, setShowDelete] = useState(false);\n  const [busy, setBusy] = useState(false);\n  const appTitle = (_a = configApi.getOptionalString(\"app.title\")) != null ? _a : \"Backstage\";\n  const onUnregister = useCallback(\n    async function onUnregisterFn() {\n      if (\"unregisterLocation\" in state) {\n        setBusy(true);\n        try {\n          await state.unregisterLocation();\n          onConfirm();\n        } catch (err) {\n          assertError(err);\n          alertApi.post({ message: err.message });\n        } finally {\n          setBusy(false);\n        }\n      }\n    },\n    [alertApi, onConfirm, state]\n  );\n  const onDelete = useCallback(\n    async function onDeleteFn() {\n      var _a2;\n      if (\"deleteEntity\" in state) {\n        setBusy(true);\n        try {\n          await state.deleteEntity();\n          const entityName = (_a2 = entity.metadata.title) != null ? _a2 : entity.metadata.name;\n          onConfirm();\n          alertApi.post({\n            message: `Removed entity ${entityName}`,\n            severity: \"success\",\n            display: \"transient\"\n          });\n        } catch (err) {\n          assertError(err);\n          alertApi.post({ message: err.message });\n        } finally {\n          setBusy(false);\n        }\n      }\n    },\n    [alertApi, onConfirm, state, entity]\n  );\n  const DialogActionsPanel = () => /* @__PURE__ */ React.createElement(DialogActions, { className: classes.dialogActions }, /* @__PURE__ */ React.createElement(Button, { onClick: onClose, color: \"primary\" }, \"Cancel\"));\n  if (state.type === \"loading\") {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (state.type === \"error\") {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error: state.error });\n  }\n  if (state.type === \"bootstrap\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Alert$1, { severity: \"info\" }, 'You cannot unregister this entity, since it originates from a protected Backstage configuration (location \"', state.location, '\"). If you believe this is in error, please contact the ', appTitle, \" \", \"integrator.\"), /* @__PURE__ */ React.createElement(Box, { marginTop: 2 }, !showDelete && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"text\",\n        size: \"small\",\n        color: \"primary\",\n        className: classes.advancedButton,\n        onClick: () => setShowDelete(true)\n      },\n      \"Advanced Options\"\n    ), /* @__PURE__ */ React.createElement(DialogActionsPanel, null)), showDelete && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"secondary\",\n        disabled: busy,\n        onClick: onDelete\n      },\n      \"Delete Entity\"\n    ), /* @__PURE__ */ React.createElement(DialogActionsPanel, null))));\n  }\n  if (state.type === \"only-delete\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog.\"), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"secondary\",\n        disabled: busy,\n        onClick: onDelete\n      },\n      \"Delete Entity\"\n    ), /* @__PURE__ */ React.createElement(DialogActionsPanel, null));\n  }\n  if (state.type === \"unregister\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"This action will unregister the following entities:\"), /* @__PURE__ */ React.createElement(DialogContentText, { component: \"ul\" }, state.colocatedEntities.map((e) => /* @__PURE__ */ React.createElement(\"li\", { key: `${e.kind}:${e.namespace}/${e.name}` }, /* @__PURE__ */ React.createElement(EntityRefLink, { entityRef: e })))), /* @__PURE__ */ React.createElement(DialogContentText, null, \"Located at the following location:\"), /* @__PURE__ */ React.createElement(DialogContentText, { component: \"ul\" }, /* @__PURE__ */ React.createElement(\"li\", null, state.location)), /* @__PURE__ */ React.createElement(DialogContentText, null, \"To undo, just re-register the entity in \", appTitle, \".\"), /* @__PURE__ */ React.createElement(Box, { marginTop: 2 }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"secondary\",\n        disabled: busy,\n        onClick: onUnregister\n      },\n      \"Unregister Location\"\n    ), !showDelete && /* @__PURE__ */ React.createElement(Box, { component: \"span\", marginLeft: 2 }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"text\",\n        size: \"small\",\n        color: \"primary\",\n        className: classes.advancedButton,\n        onClick: () => setShowDelete(true)\n      },\n      \"Advanced Options\"\n    ))), showDelete && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { paddingTop: 4, paddingBottom: 4 }, /* @__PURE__ */ React.createElement(Divider, null)), /* @__PURE__ */ React.createElement(DialogContentText, null, \"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"secondary\",\n        disabled: busy,\n        onClick: onDelete\n      },\n      \"Delete Entity\"\n    )));\n  }\n  return /* @__PURE__ */ React.createElement(Alert$1, { severity: \"error\" }, \"Internal error: Unknown state\");\n};\nconst UnregisterEntityDialog = (props) => {\n  const { open, onConfirm, onClose, entity } = props;\n  return /* @__PURE__ */ React.createElement(Dialog, { open, onClose }, /* @__PURE__ */ React.createElement(DialogTitle, { id: \"responsive-dialog-title\" }, \"Are you sure you want to unregister this entity?\"), /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(Contents, { entity, onConfirm, onClose })));\n};\n\nfunction useOwnedEntitiesCount() {\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const { filters } = useEntityList();\n  const { value: ownershipEntityRefs, loading: loadingEntityRefs } = useAsync(\n    async () => (await identityApi.getBackstageIdentity()).ownershipEntityRefs,\n    // load only on mount\n    []\n  );\n  const prevRequest = useRef();\n  const request = useMemo(() => {\n    const { user, owners, ...allFilters } = filters;\n    const compacted = compact(Object.values(allFilters));\n    const allFilter = reduceCatalogFilters(compacted);\n    const { [\"metadata.name\"]: metadata, ...filter2 } = allFilter;\n    const countFilter = getOwnedCountClaims(owners, ownershipEntityRefs);\n    if ((ownershipEntityRefs == null ? void 0 : ownershipEntityRefs.length) === 0 || countFilter === void 0 || Object.keys(filter2).length === 0) {\n      prevRequest.current = void 0;\n      return void 0;\n    }\n    const newRequest = {\n      filter: {\n        ...filter2,\n        \"relations.ownedBy\": countFilter\n      },\n      limit: 0\n    };\n    if (isEqual(newRequest, prevRequest.current)) {\n      return prevRequest.current;\n    }\n    prevRequest.current = newRequest;\n    return newRequest;\n  }, [filters, ownershipEntityRefs]);\n  const [{ value: count, loading: loadingEntityOwnership }, fetchEntities] = useAsyncFn(\n    async (req, ownershipEntityRefsParam) => {\n      if (ownershipEntityRefsParam && !req) {\n        return 0;\n      }\n      const { totalItems } = await catalogApi.queryEntities(req);\n      return totalItems;\n    },\n    [],\n    { loading: true }\n  );\n  useEffect(() => {\n    if (ownershipEntityRefs) {\n      if (request && Object.keys(request).length === 0) {\n        return;\n      }\n      fetchEntities(request, ownershipEntityRefs);\n    }\n  }, [fetchEntities, request, ownershipEntityRefs]);\n  const loading = loadingEntityRefs || loadingEntityOwnership;\n  const filter = useMemo(\n    () => EntityUserFilter.owned(ownershipEntityRefs != null ? ownershipEntityRefs : []),\n    [ownershipEntityRefs]\n  );\n  return {\n    count,\n    loading,\n    filter,\n    ownershipEntityRefs\n  };\n}\nfunction getOwnedCountClaims(owners, ownershipEntityRefs) {\n  var _a;\n  if (ownershipEntityRefs === void 0) {\n    return void 0;\n  }\n  const ownersRefs = (_a = owners == null ? void 0 : owners.values) != null ? _a : [];\n  if (ownersRefs.length) {\n    const commonOwnedBy = intersection(ownersRefs, ownershipEntityRefs);\n    if (commonOwnedBy.length === 0) {\n      return void 0;\n    }\n    return commonOwnedBy;\n  }\n  return ownershipEntityRefs;\n}\n\nfunction useAllEntitiesCount() {\n  const catalogApi = useApi(catalogApiRef);\n  const { filters } = useEntityList();\n  const prevRequest = useRef();\n  const request = useMemo(() => {\n    const { user, ...allFilters } = filters;\n    const compacted = compact(Object.values(allFilters));\n    const filter = reduceCatalogFilters(compacted);\n    const newRequest = {\n      filter,\n      limit: 0\n    };\n    if (Object.keys(filter).length === 0) {\n      prevRequest.current = void 0;\n      return prevRequest.current;\n    }\n    if (isEqual(newRequest, prevRequest.current)) {\n      return prevRequest.current;\n    }\n    prevRequest.current = newRequest;\n    return newRequest;\n  }, [filters]);\n  const { value: count, loading } = useAsync(async () => {\n    if (request === void 0) {\n      return 0;\n    }\n    const { totalItems } = await catalogApi.queryEntities(request);\n    return totalItems;\n  }, [request]);\n  return { count, loading };\n}\n\nfunction useStarredEntitiesCount() {\n  const catalogApi = useApi(catalogApiRef);\n  const { filters } = useEntityList();\n  const { starredEntities } = useStarredEntities();\n  const prevRequest = useRef();\n  const request = useMemo(() => {\n    const { user, ...allFilters } = filters;\n    const compacted = compact(Object.values(allFilters));\n    const filter2 = reduceCatalogFilters(compacted);\n    const facet = \"metadata.name\";\n    const newRequest = {\n      filter: {\n        ...filter2,\n        /**\n         * here we are filtering entities by `name`. Given this filter,\n         * the response might contain more entities than expected, in case multiple entities\n         * of different kind or namespace share the same name. Those extra entities are filtered out\n         * client side by `EntityUserFilter`, so they won't be visible to the user.\n         */\n        [facet]: Array.from(starredEntities).map((e) => parseEntityRef(e).name)\n      },\n      /**\n       * limit is set to a high value as we are not expecting many starred entities\n       */\n      limit: 1e3\n    };\n    if (isEqual(newRequest, prevRequest.current)) {\n      return prevRequest.current;\n    }\n    prevRequest.current = newRequest;\n    return newRequest;\n  }, [filters, starredEntities]);\n  const { value: count, loading } = useAsync(async () => {\n    if (!starredEntities.size) {\n      return 0;\n    }\n    const response = await catalogApi.queryEntities(request);\n    return response.items.map(\n      (e) => stringifyEntityRef({\n        kind: e.kind,\n        namespace: e.metadata.namespace,\n        name: e.metadata.name\n      })\n    ).filter((e) => starredEntities.has(e)).length;\n  }, [request, starredEntities]);\n  const filter = useMemo(\n    () => EntityUserFilter.starred(Array.from(starredEntities)),\n    [starredEntities]\n  );\n  return { count, loading, filter };\n}\n\nconst useStyles$3 = makeStyles(\n  (theme) => ({\n    root: {\n      backgroundColor: \"rgba(0, 0, 0, .11)\",\n      boxShadow: \"none\",\n      margin: theme.spacing(1, 0, 1, 0)\n    },\n    title: {\n      margin: theme.spacing(1, 0, 0, 1),\n      textTransform: \"uppercase\",\n      fontSize: 12,\n      fontWeight: \"bold\"\n    },\n    listIcon: {\n      minWidth: 30,\n      color: theme.palette.text.primary\n    },\n    menuItem: {\n      minHeight: theme.spacing(6)\n    },\n    groupWrapper: {\n      margin: theme.spacing(1, 1, 2, 1)\n    }\n  }),\n  {\n    name: \"CatalogReactUserListPicker\"\n  }\n);\nfunction getFilterGroups(orgName) {\n  return [\n    {\n      name: \"Personal\",\n      items: [\n        {\n          id: \"owned\",\n          label: \"Owned\",\n          icon: SettingsIcon\n        },\n        {\n          id: \"starred\",\n          label: \"Starred\",\n          icon: Star\n        }\n      ]\n    },\n    {\n      name: orgName != null ? orgName : \"Company\",\n      items: [\n        {\n          id: \"all\",\n          label: \"All\"\n        }\n      ]\n    }\n  ];\n}\nconst UserListPicker = (props) => {\n  var _a;\n  const { initialFilter, availableFilters } = props;\n  const classes = useStyles$3();\n  const configApi = useApi(configApiRef);\n  const orgName = (_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Company\";\n  const {\n    filters,\n    updateFilters,\n    queryParameters: { kind: kindParameter, user: userParameter }\n  } = useEntityList();\n  const userAndGroupFilterIds = [\"starred\", \"all\"];\n  const filterGroups = getFilterGroups(orgName).map((filterGroup) => ({\n    ...filterGroup,\n    items: filterGroup.items.filter(\n      ({ id }) => (\n        // TODO: avoid hardcoding kinds here\n        [\"group\", \"user\"].some((kind) => kind === kindParameter) ? userAndGroupFilterIds.includes(id) : !availableFilters || availableFilters.includes(id)\n      )\n    )\n  })).filter(({ items }) => !!items.length);\n  const {\n    count: ownedEntitiesCount,\n    loading: loadingOwnedEntities,\n    filter: ownedEntitiesFilter\n  } = useOwnedEntitiesCount();\n  const { count: allCount } = useAllEntitiesCount();\n  const {\n    count: starredEntitiesCount,\n    filter: starredEntitiesFilter,\n    loading: loadingStarredEntities\n  } = useStarredEntitiesCount();\n  const queryParamUserFilter = useMemo(\n    () => [userParameter].flat()[0],\n    [userParameter]\n  );\n  const [selectedUserFilter, setSelectedUserFilter] = useState(\n    queryParamUserFilter != null ? queryParamUserFilter : initialFilter\n  );\n  const filterCounts = useMemo(() => {\n    return {\n      all: allCount,\n      starred: starredEntitiesCount,\n      owned: ownedEntitiesCount\n    };\n  }, [starredEntitiesCount, ownedEntitiesCount, allCount]);\n  useEffect(() => {\n    if (queryParamUserFilter) {\n      setSelectedUserFilter(queryParamUserFilter);\n    }\n  }, [queryParamUserFilter]);\n  const loading = loadingOwnedEntities || loadingStarredEntities;\n  useEffect(() => {\n    if (!loading && !!selectedUserFilter && selectedUserFilter !== \"all\" && filterCounts[selectedUserFilter] === 0) {\n      setSelectedUserFilter(\"all\");\n    }\n  }, [loading, filterCounts, selectedUserFilter, setSelectedUserFilter]);\n  useEffect(() => {\n    if (!selectedUserFilter) {\n      return;\n    }\n    if (loading) {\n      return;\n    }\n    const getFilter = () => {\n      if (selectedUserFilter === \"owned\") {\n        return ownedEntitiesFilter;\n      }\n      if (selectedUserFilter === \"starred\") {\n        return starredEntitiesFilter;\n      }\n      return EntityUserFilter.all();\n    };\n    updateFilters({ user: getFilter() });\n  }, [\n    selectedUserFilter,\n    starredEntitiesFilter,\n    ownedEntitiesFilter,\n    updateFilters,\n    loading\n  ]);\n  return /* @__PURE__ */ React.createElement(Card, { className: classes.root }, filterGroups.map((group) => /* @__PURE__ */ React.createElement(Fragment, { key: group.name }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      variant: \"subtitle2\",\n      component: \"span\",\n      className: classes.title\n    },\n    group.name\n  ), /* @__PURE__ */ React.createElement(Card, { className: classes.groupWrapper }, /* @__PURE__ */ React.createElement(List, { disablePadding: true, dense: true, role: \"menu\", \"aria-label\": group.name }, group.items.map((item) => {\n    var _a2, _b;\n    return /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        role: \"none presentation\",\n        key: item.id,\n        divider: true,\n        onClick: () => setSelectedUserFilter(item.id),\n        selected: item.id === ((_a2 = filters.user) == null ? void 0 : _a2.value),\n        className: classes.menuItem,\n        disabled: filterCounts[item.id] === 0,\n        \"data-testid\": `user-picker-${item.id}`,\n        tabIndex: 0,\n        ContainerProps: { role: \"menuitem\" }\n      },\n      item.icon && /* @__PURE__ */ React.createElement(ListItemIcon, { className: classes.listIcon }, /* @__PURE__ */ React.createElement(item.icon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText$1, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, item.label, \" \")),\n      /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, (_b = filterCounts[item.id]) != null ? _b : \"-\")\n    );\n  }))))));\n};\n\nconst useStyles$2 = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityProcessingStatusPickerPicker\"\n  }\n);\nconst icon = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nconst EntityProcessingStatusPicker = () => {\n  const classes = useStyles$2();\n  const { updateFilters } = useEntityList();\n  const [selectedAdvancedItems, setSelectedAdvancedItems] = useState(\n    []\n  );\n  function orphanChange(value) {\n    updateFilters({\n      orphan: value ? new EntityOrphanFilter(value) : void 0\n    });\n  }\n  function errorChange(value) {\n    updateFilters({\n      error: value ? new EntityErrorFilter(value) : void 0\n    });\n  }\n  const availableAdvancedItems = [\"Is Orphan\", \"Has Error\"];\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"button\", component: \"label\" }, \"Processing Status\", /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      multiple: true,\n      disableCloseOnSelect: true,\n      options: availableAdvancedItems,\n      value: selectedAdvancedItems,\n      onChange: (_, value) => {\n        setSelectedAdvancedItems(value);\n        orphanChange(value.includes(\"Is Orphan\"));\n        errorChange(value.includes(\"Has Error\"));\n      },\n      renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(\n        FormControlLabel,\n        {\n          control: /* @__PURE__ */ React.createElement(\n            Checkbox,\n            {\n              icon,\n              checkedIcon,\n              checked: selected\n            }\n          ),\n          onClick: (event) => event.preventDefault(),\n          label: option\n        }\n      ),\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { \"data-testid\": \"processing-status-picker-expand\" }),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(\n        TextField,\n        {\n          ...params,\n          className: classes.input,\n          variant: \"outlined\"\n        }\n      )\n    }\n  )));\n};\n\nconst useStyles$1 = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityNamespacePicker\"\n  }\n);\nconst EntityNamespacePicker = () => {\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(\n    EntityAutocompletePicker,\n    {\n      label: \"Namespace\",\n      name: \"namespace\",\n      path: \"metadata.namespace\",\n      Filter: EntityNamespaceFilter,\n      InputProps: { className: classes.input }\n    }\n  );\n};\n\nconst useStyles = makeStyles$1(\n  (theme) => ({\n    code: {\n      borderRadius: 6,\n      margin: theme.spacing(2, 0),\n      background: theme.palette.type === \"dark\" ? \"#444\" : theme.palette.common.white\n    }\n  }),\n  { name: \"BackstageMissingAnnotationEmptyState\" }\n);\nfunction generateYamlExample(annotations, entity) {\n  var _a, _b;\n  const kind = (entity == null ? void 0 : entity.kind) || \"Component\";\n  const name = (entity == null ? void 0 : entity.metadata.name) || \"example\";\n  const type = ((_a = entity == null ? void 0 : entity.spec) == null ? void 0 : _a.type) || \"website\";\n  const owner = ((_b = entity == null ? void 0 : entity.spec) == null ? void 0 : _b.owner) || \"user:default/guest\";\n  const yamlText = `apiVersion: backstage.io/v1alpha1\nkind: ${kind}\nmetadata:\n  name: ${name}\n  annotations:${annotations.map((ann) => `\n    ${ann}: value`).join(\"\")}\nspec:\n  type: ${type}\n  owner: ${owner}`;\n  let line = 6;\n  const lineNumbers = [];\n  annotations.forEach(() => {\n    lineNumbers.push(line);\n    line++;\n  });\n  return {\n    yamlText,\n    lineNumbers\n  };\n}\nfunction generateDescription(annotations, entityKind = \"Component\") {\n  const isSingular = annotations.length <= 1;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, \"The \", isSingular ? \"annotation\" : \"annotations\", \" \", annotations.map((ann) => /* @__PURE__ */ React.createElement(\"code\", null, ann)).reduce((prev, curr) => /* @__PURE__ */ React.createElement(React.Fragment, null, prev, \", \", curr)), \" \", isSingular ? \"is\" : \"are\", \" missing. You need to add the\", \" \", isSingular ? \"annotation\" : \"annotations\", \" to your \", entityKind, \" if you want to enable this tool.\");\n}\nfunction MissingAnnotationEmptyState(props) {\n  let entity;\n  try {\n    const entityContext = useEntity();\n    entity = entityContext.entity;\n  } catch (err) {\n  }\n  const { annotation, readMoreUrl } = props;\n  const annotations = Array.isArray(annotation) ? annotation : [annotation];\n  const url = readMoreUrl || \"https://backstage.io/docs/features/software-catalog/well-known-annotations\";\n  const classes = useStyles();\n  const entityKind = (entity == null ? void 0 : entity.kind) || \"Component\";\n  const { yamlText, lineNumbers } = generateYamlExample(annotations, entity);\n  return /* @__PURE__ */ React.createElement(\n    EmptyState,\n    {\n      missing: \"field\",\n      title: \"Missing Annotation\",\n      description: generateDescription(annotations, entityKind),\n      action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body1\" }, \"Add the annotation to your \", entityKind, \" YAML as shown in the highlighted example below:\"), /* @__PURE__ */ React.createElement(Box$1, { className: classes.code }, /* @__PURE__ */ React.createElement(\n        CodeSnippet,\n        {\n          text: yamlText,\n          language: \"yaml\",\n          showLineNumbers: true,\n          highlightedNumbers: lineNumbers,\n          customStyle: { background: \"inherit\", fontSize: \"115%\" }\n        }\n      )), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", component: Link, to: url }, \"Read more\"))\n    }\n  );\n}\n\nfunction MockEntityListContextProvider(props) {\n  var _a;\n  const { children, value } = props;\n  const [filters, setFilters] = useState((_a = value == null ? void 0 : value.filters) != null ? _a : {});\n  const updateFilters = useCallback(\n    (update) => {\n      setFilters((prevFilters) => {\n        const newFilters = typeof update === \"function\" ? update(prevFilters) : update;\n        return { ...prevFilters, ...newFilters };\n      });\n    },\n    []\n  );\n  const defaultValues = useMemo(\n    () => ({\n      entities: [],\n      backendEntities: [],\n      queryParameters: {}\n    }),\n    []\n  );\n  const resolvedValue = useMemo(\n    () => {\n      var _a2, _b, _c, _d, _e;\n      return {\n        entities: (_a2 = value == null ? void 0 : value.entities) != null ? _a2 : defaultValues.entities,\n        backendEntities: (_b = value == null ? void 0 : value.backendEntities) != null ? _b : defaultValues.backendEntities,\n        updateFilters: (_c = value == null ? void 0 : value.updateFilters) != null ? _c : updateFilters,\n        filters,\n        loading: (_d = value == null ? void 0 : value.loading) != null ? _d : false,\n        queryParameters: (_e = value == null ? void 0 : value.queryParameters) != null ? _e : defaultValues.queryParameters,\n        error: value == null ? void 0 : value.error\n      };\n    },\n    [value, defaultValues, filters, updateFilters]\n  );\n  return /* @__PURE__ */ React.createElement(EntityListContext.Provider, { value: resolvedValue }, children);\n}\n\nexport { CatalogFilterLayout, EntityAutocompletePicker, EntityDisplayName, EntityErrorFilter, EntityKindFilter, EntityKindPicker, EntityLifecycleFilter, EntityLifecyclePicker, EntityListContext, EntityListProvider, EntityNamespaceFilter, EntityNamespacePicker, EntityOrphanFilter, EntityOwnerFilter, EntityOwnerPicker, EntityPeekAheadPopover, EntityProcessingStatusPicker, EntityRefLink, EntityRefLinks, EntitySearchBar, EntityTable, EntityTagFilter, EntityTagPicker, EntityTextFilter, EntityTypeFilter, EntityTypePicker, EntityUserFilter, FavoriteEntity, InspectEntityDialog, MissingAnnotationEmptyState, MockEntityListContextProvider, MockStarredEntitiesApi, UnregisterEntityDialog, UserListFilter, UserListPicker, catalogApiRef, columnFactories, defaultEntityPresentation, entityPresentationApiRef, entityRouteParams, entityRouteRef, getEntitySourceLocation, humanizeEntityRef, starredEntitiesApiRef, useEntityList, useEntityOwnership, useEntityPresentation, useEntityTypeFilter, useRelatedEntities, useStarredEntities, useStarredEntity };\n//# sourceMappingURL=index.esm.js.map\n","import { RELATION_PART_OF, RELATION_OWNED_BY, stringifyEntityRef, ANNOTATION_VIEW_URL, ANNOTATION_EDIT_URL } from '@backstage/catalog-model';\nimport { OverflowTooltip, WarningPanel, CodeSnippet, Table } from '@backstage/core-components';\nimport { EntityRefLink, EntityRefLinks, humanizeEntityRef, useStarredEntities, useEntityList, getEntityRelations } from '@backstage/plugin-catalog-react';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\nimport { visuallyHidden } from '@mui/utils';\nimport EditIcon from '@material-ui/icons/Edit';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport { capitalize } from 'lodash';\nimport pluralize from 'pluralize';\nimport React, { useMemo } from 'react';\nimport { Chip } from '@material-ui/core';\n\nconst columnFactories = Object.freeze({\n  createNameColumn(options) {\n    function formatContent(entity) {\n      var _a;\n      return ((_a = entity.metadata) == null ? void 0 : _a.title) || humanizeEntityRef(entity, {\n        defaultKind: options == null ? void 0 : options.defaultKind\n      });\n    }\n    return {\n      title: \"Name\",\n      field: \"resolved.entityRef\",\n      highlight: true,\n      customSort({ entity: entity1 }, { entity: entity2 }) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: ({ entity }) => /* @__PURE__ */ React.createElement(\n        EntityRefLink,\n        {\n          entityRef: entity,\n          defaultKind: (options == null ? void 0 : options.defaultKind) || \"Component\"\n        }\n      )\n    };\n  },\n  createSystemColumn() {\n    return {\n      title: \"System\",\n      field: \"resolved.partOfSystemRelationTitle\",\n      render: ({ resolved }) => /* @__PURE__ */ React.createElement(\n        EntityRefLinks,\n        {\n          entityRefs: resolved.partOfSystemRelations,\n          defaultKind: \"system\"\n        }\n      )\n    };\n  },\n  createOwnerColumn() {\n    return {\n      title: \"Owner\",\n      field: \"resolved.ownedByRelationsTitle\",\n      render: ({ resolved }) => /* @__PURE__ */ React.createElement(\n        EntityRefLinks,\n        {\n          entityRefs: resolved.ownedByRelations,\n          defaultKind: \"group\"\n        }\n      )\n    };\n  },\n  createSpecTargetsColumn() {\n    return {\n      title: \"Targets\",\n      field: \"entity.spec.targets\",\n      render: ({ entity }) => {\n        var _a, _b;\n        return /* @__PURE__ */ React.createElement(React.Fragment, null, (((_a = entity == null ? void 0 : entity.spec) == null ? void 0 : _a.targets) || ((_b = entity == null ? void 0 : entity.spec) == null ? void 0 : _b.target)) && /* @__PURE__ */ React.createElement(\n          OverflowTooltip,\n          {\n            text: (entity.spec.targets || [entity.spec.target]).join(\", \"),\n            placement: \"bottom-start\"\n          }\n        ));\n      }\n    };\n  },\n  createSpecTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"entity.spec.type\",\n      hidden: true,\n      width: \"auto\"\n    };\n  },\n  createSpecLifecycleColumn() {\n    return {\n      title: \"Lifecycle\",\n      field: \"entity.spec.lifecycle\"\n    };\n  },\n  createMetadataDescriptionColumn() {\n    return {\n      title: \"Description\",\n      field: \"entity.metadata.description\",\n      render: ({ entity }) => /* @__PURE__ */ React.createElement(\n        OverflowTooltip,\n        {\n          text: entity.metadata.description,\n          placement: \"bottom-start\"\n        }\n      ),\n      width: \"auto\"\n    };\n  },\n  createTagsColumn() {\n    return {\n      title: \"Tags\",\n      field: \"entity.metadata.tags\",\n      cellStyle: {\n        padding: \"0px 16px 0px 20px\"\n      },\n      render: ({ entity }) => /* @__PURE__ */ React.createElement(React.Fragment, null, entity.metadata.tags && entity.metadata.tags.map((t) => /* @__PURE__ */ React.createElement(\n        Chip,\n        {\n          key: t,\n          label: t,\n          size: \"small\",\n          variant: \"outlined\",\n          style: { marginBottom: \"0px\" }\n        }\n      ))),\n      width: \"auto\"\n    };\n  },\n  createTitleColumn(options) {\n    return {\n      title: \"Title\",\n      field: \"entity.metadata.title\",\n      hidden: options == null ? void 0 : options.hidden,\n      searchable: true\n    };\n  },\n  createLabelColumn(key, options) {\n    return {\n      title: (options == null ? void 0 : options.title) || \"Label\",\n      field: \"entity.metadata.labels\",\n      cellStyle: {\n        padding: \"0px 16px 0px 20px\"\n      },\n      render: ({ entity }) => {\n        var _a;\n        const labels = (_a = entity.metadata) == null ? void 0 : _a.labels;\n        const specifiedLabelValue = labels && labels[key] || (options == null ? void 0 : options.defaultValue);\n        return /* @__PURE__ */ React.createElement(React.Fragment, null, specifiedLabelValue && /* @__PURE__ */ React.createElement(\n          Chip,\n          {\n            key: specifiedLabelValue,\n            label: specifiedLabelValue,\n            size: \"small\",\n            variant: \"outlined\"\n          }\n        ));\n      },\n      width: \"auto\"\n    };\n  },\n  createNamespaceColumn() {\n    return {\n      title: \"Namespace\",\n      field: \"entity.metadata.namespace\",\n      width: \"auto\"\n    };\n  }\n});\n\nconst YellowStar = withStyles({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst refCompare = (a, b) => {\n  const toRef = (entity) => entity.metadata.title || humanizeEntityRef(entity, {\n    defaultKind: \"Component\"\n  });\n  return toRef(a).localeCompare(toRef(b));\n};\nconst CatalogTable = (props) => {\n  var _a, _b, _c, _d, _e;\n  const { columns, actions, tableOptions, subtitle, emptyContent } = props;\n  const { isStarredEntity, toggleStarredEntity } = useStarredEntities();\n  const { loading, error, entities, filters } = useEntityList();\n  const defaultColumns = useMemo(() => {\n    var _a2;\n    return [\n      columnFactories.createTitleColumn({ hidden: true }),\n      columnFactories.createNameColumn({ defaultKind: (_a2 = filters.kind) == null ? void 0 : _a2.value }),\n      ...createEntitySpecificColumns(),\n      columnFactories.createMetadataDescriptionColumn(),\n      columnFactories.createTagsColumn()\n    ];\n    function createEntitySpecificColumns() {\n      var _a3;\n      const baseColumns = [\n        columnFactories.createSystemColumn(),\n        columnFactories.createOwnerColumn(),\n        columnFactories.createSpecTypeColumn(),\n        columnFactories.createSpecLifecycleColumn()\n      ];\n      switch ((_a3 = filters.kind) == null ? void 0 : _a3.value) {\n        case \"user\":\n          return [];\n        case \"domain\":\n        case \"system\":\n          return [columnFactories.createOwnerColumn()];\n        case \"group\":\n        case \"template\":\n          return [columnFactories.createSpecTypeColumn()];\n        case \"location\":\n          return [\n            columnFactories.createSpecTypeColumn(),\n            columnFactories.createSpecTargetsColumn()\n          ];\n        default:\n          return entities.every(\n            (entity) => entity.metadata.namespace === \"default\"\n          ) ? baseColumns : [...baseColumns, columnFactories.createNamespaceColumn()];\n      }\n    }\n  }, [(_a = filters.kind) == null ? void 0 : _a.value, entities]);\n  const showTypeColumn = filters.type === void 0;\n  const titlePreamble = capitalize((_c = (_b = filters.user) == null ? void 0 : _b.value) != null ? _c : \"all\");\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not fetch catalog entities.\"\n      },\n      /* @__PURE__ */ React.createElement(CodeSnippet, { language: \"text\", text: error.toString() })\n    ));\n  }\n  const defaultActions = [\n    ({ entity }) => {\n      var _a2;\n      const url = (_a2 = entity.metadata.annotations) == null ? void 0 : _a2[ANNOTATION_VIEW_URL];\n      const title = \"View\";\n      return {\n        icon: () => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { style: visuallyHidden }, title), /* @__PURE__ */ React.createElement(OpenInNew, { fontSize: \"small\" })),\n        tooltip: title,\n        disabled: !url,\n        onClick: () => {\n          if (!url)\n            return;\n          window.open(url, \"_blank\");\n        }\n      };\n    },\n    ({ entity }) => {\n      var _a2;\n      const url = (_a2 = entity.metadata.annotations) == null ? void 0 : _a2[ANNOTATION_EDIT_URL];\n      const title = \"Edit\";\n      return {\n        icon: () => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { style: visuallyHidden }, title), /* @__PURE__ */ React.createElement(EditIcon, { fontSize: \"small\" })),\n        tooltip: title,\n        disabled: !url,\n        onClick: () => {\n          if (!url)\n            return;\n          window.open(url, \"_blank\");\n        }\n      };\n    },\n    ({ entity }) => {\n      const isStarred = isStarredEntity(entity);\n      const title = isStarred ? \"Remove from favorites\" : \"Add to favorites\";\n      return {\n        cellStyle: { paddingLeft: \"1em\" },\n        icon: () => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { style: visuallyHidden }, title), isStarred ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null)),\n        tooltip: title,\n        onClick: () => toggleStarredEntity(entity)\n      };\n    }\n  ];\n  const rows = entities.sort(refCompare).map((entity) => {\n    const partOfSystemRelations = getEntityRelations(entity, RELATION_PART_OF, {\n      kind: \"system\"\n    });\n    const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n    return {\n      entity,\n      resolved: {\n        // This name is here for backwards compatibility mostly; the\n        // presentation of refs in the table should in general be handled with\n        // EntityRefLink / EntityName components\n        name: humanizeEntityRef(entity, {\n          defaultKind: \"Component\"\n        }),\n        entityRef: stringifyEntityRef(entity),\n        ownedByRelationsTitle: ownedByRelations.map((r) => humanizeEntityRef(r, { defaultKind: \"group\" })).join(\", \"),\n        ownedByRelations,\n        partOfSystemRelationTitle: partOfSystemRelations.map(\n          (r) => humanizeEntityRef(r, {\n            defaultKind: \"system\"\n          })\n        ).join(\", \"),\n        partOfSystemRelations\n      }\n    };\n  });\n  const typeColumn = (columns || defaultColumns).find((c) => c.title === \"Type\");\n  if (typeColumn) {\n    typeColumn.hidden = !showTypeColumn;\n  }\n  const showPagination = rows.length > 20;\n  const currentKind = ((_d = filters.kind) == null ? void 0 : _d.value) || \"\";\n  const currentType = ((_e = filters.type) == null ? void 0 : _e.value) || \"\";\n  const titleDisplay = [titlePreamble, currentType, pluralize(currentKind)].filter((s) => s).join(\" \");\n  return /* @__PURE__ */ React.createElement(\n    Table,\n    {\n      isLoading: loading,\n      columns: columns || defaultColumns,\n      options: {\n        paging: showPagination,\n        pageSize: 20,\n        actionsColumnIndex: -1,\n        loadingType: \"linear\",\n        showEmptyDataSourceMessage: !loading,\n        padding: \"dense\",\n        pageSizeOptions: [20, 50, 100],\n        ...tableOptions\n      },\n      title: `${titleDisplay} (${entities.length})`,\n      data: rows,\n      actions: actions || defaultActions,\n      subtitle,\n      emptyContent\n    }\n  );\n};\nCatalogTable.columns = columnFactories;\n\nexport { CatalogTable as C };\n//# sourceMappingURL=CatalogTable-e4b8aedd.esm.js.map\n","import { createApiRef, useApp, AnalyticsContext, useAnalytics } from '@backstage/core-plugin-api';\nimport React, { Component, Suspense, useEffect, lazy, useMemo } from 'react';\nimport { Button } from '@material-ui/core';\nimport { ErrorPanel } from '@backstage/core-components';\nimport { getOrCreateGlobalSingleton, useVersionedContext } from '@backstage/version-bridge';\nimport { z } from 'zod';\nimport zodToJsonSchema from 'zod-to-json-schema';\nimport { useLocation, useParams } from 'react-router-dom';\n\nconst appTreeApiRef = createApiRef({ id: \"core.app-tree\" });\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst DefaultErrorBoundaryFallback = ({\n  plugin,\n  error,\n  resetError\n}) => {\n  const title = `Error in ${plugin == null ? void 0 : plugin.id}`;\n  return /* @__PURE__ */ React.createElement(ErrorPanel, { title, error, defaultExpanded: true }, /* @__PURE__ */ React.createElement(Button, { variant: \"outlined\", onClick: resetError }, \"Retry\"));\n};\nclass ErrorBoundary extends Component {\n  constructor() {\n    super(...arguments);\n    __publicField$3(this, \"state\", { error: void 0 });\n    __publicField$3(this, \"handleErrorReset\", () => {\n      this.setState({ error: void 0 });\n    });\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  render() {\n    const { error } = this.state;\n    const { plugin, children } = this.props;\n    if (error) {\n      return /* @__PURE__ */ React.createElement(\n        DefaultErrorBoundaryFallback,\n        {\n          plugin,\n          error,\n          resetError: this.handleErrorReset\n        }\n      );\n    }\n    return children;\n  }\n}\n\nfunction ExtensionSuspense(props) {\n  const { children } = props;\n  const app = useApp();\n  const { Progress } = app.getComponents();\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, children);\n}\n\ngetOrCreateGlobalSingleton(\n  \"core-plugin-api:analytics-tracker-events\",\n  () => ({\n    mostRecentGatheredNavigation: void 0,\n    mostRecentRoutableExtensionRender: void 0,\n    beforeUnloadRegistered: false\n  })\n);\nconst routableExtensionRenderedEvent = \"_ROUTABLE-EXTENSION-RENDERED\";\n\nconst RouteTracker = (props) => {\n  const { disableTracking, children } = props;\n  const analytics = useAnalytics();\n  useEffect(() => {\n    if (disableTracking)\n      return;\n    analytics.captureEvent(routableExtensionRenderedEvent, \"\");\n  }, [analytics, disableTracking]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\nfunction ExtensionBoundary(props) {\n  const { id, source, routable, children } = props;\n  const attributes = {\n    extension: id,\n    pluginId: source == null ? void 0 : source.id\n  };\n  return /* @__PURE__ */ React.createElement(ExtensionSuspense, null, /* @__PURE__ */ React.createElement(ErrorBoundary, { plugin: source }, /* @__PURE__ */ React.createElement(AnalyticsContext, { attributes }, /* @__PURE__ */ React.createElement(RouteTracker, { disableTracking: !routable }, children))));\n}\n\nfunction createExtensionDataRef(id) {\n  return {\n    id,\n    $$type: \"@backstage/ExtensionDataRef\",\n    config: {},\n    optional() {\n      return { ...this, config: { ...this.config, optional: true } };\n    }\n  };\n}\n\nconst coreExtensionData = {\n  reactElement: createExtensionDataRef(\"core.reactElement\"),\n  routePath: createExtensionDataRef(\"core.routing.path\"),\n  apiFactory: createExtensionDataRef(\"core.api.factory\"),\n  routeRef: createExtensionDataRef(\"core.routing.ref\"),\n  navTarget: createExtensionDataRef(\"core.nav.target\"),\n  theme: createExtensionDataRef(\"core.theme\")\n};\n\nfunction createExtension(options) {\n  var _a, _b;\n  return {\n    ...options,\n    disabled: (_a = options.disabled) != null ? _a : false,\n    $$type: \"@backstage/Extension\",\n    inputs: (_b = options.inputs) != null ? _b : {},\n    factory({ inputs, ...rest }) {\n      return options.factory({\n        inputs,\n        ...rest\n      });\n    }\n  };\n}\n\nfunction createExtensionInput(extensionData, config) {\n  return {\n    $$type: \"@backstage/ExtensionInput\",\n    extensionData,\n    config: {\n      singleton: Boolean(config == null ? void 0 : config.singleton),\n      optional: Boolean(config == null ? void 0 : config.optional)\n    }\n  };\n}\n\nfunction createPlugin(options) {\n  var _a, _b, _c;\n  return {\n    ...options,\n    routes: (_a = options.routes) != null ? _a : {},\n    externalRoutes: (_b = options.externalRoutes) != null ? _b : {},\n    extensions: (_c = options.extensions) != null ? _c : [],\n    $$type: \"@backstage/BackstagePlugin\"\n  };\n}\n\nfunction createExtensionOverrides(options) {\n  return {\n    $$type: \"@backstage/ExtensionOverrides\",\n    version: \"v1\",\n    extensions: options.extensions\n  };\n}\n\nfunction createApiExtension(options) {\n  const { factory, configSchema, inputs: extensionInputs } = options;\n  const apiRef = \"api\" in options ? options.api : factory.api;\n  return createExtension({\n    id: `apis.${apiRef.id}`,\n    attachTo: { id: \"core\", input: \"apis\" },\n    inputs: extensionInputs,\n    configSchema,\n    output: {\n      api: coreExtensionData.apiFactory\n    },\n    factory({ config, inputs }) {\n      if (typeof factory === \"function\") {\n        return { api: factory({ config, inputs }) };\n      }\n      return { api: factory };\n    }\n  });\n}\n\nfunction createSchemaFromZod(schemaCreator) {\n  const schema = schemaCreator(z);\n  return {\n    // TODO: Types allow z.array etc here but it will break stuff\n    parse: (input) => {\n      const result = schema.safeParse(input);\n      if (result.success) {\n        return result.data;\n      }\n      throw new Error(result.error.issues.map(formatIssue).join(\"; \"));\n    },\n    // TODO: Verify why we are not compatible with the latest zodToJsonSchema.\n    schema: zodToJsonSchema(schema)\n  };\n}\nfunction formatIssue(issue) {\n  if (issue.code === \"invalid_union\") {\n    return formatIssue(issue.unionErrors[0].issues[0]);\n  }\n  let message = issue.message;\n  if (message === \"Required\") {\n    message = `Missing required value`;\n  }\n  if (issue.path.length) {\n    message += ` at '${issue.path.join(\".\")}'`;\n  }\n  return message;\n}\n\nfunction createPageExtension(options) {\n  var _a;\n  const { id } = options;\n  const configSchema = \"configSchema\" in options ? options.configSchema : createSchemaFromZod(\n    (z) => z.object({ path: z.string().default(options.defaultPath) })\n  );\n  return createExtension({\n    id,\n    attachTo: (_a = options.attachTo) != null ? _a : { id: \"core.routes\", input: \"routes\" },\n    configSchema,\n    inputs: options.inputs,\n    disabled: options.disabled,\n    output: {\n      element: coreExtensionData.reactElement,\n      path: coreExtensionData.routePath,\n      routeRef: coreExtensionData.routeRef.optional()\n    },\n    factory({ config, inputs, source }) {\n      const ExtensionComponent = lazy(\n        () => options.loader({ config, inputs }).then((element) => ({ default: () => element }))\n      );\n      return {\n        path: config.path,\n        routeRef: options.routeRef,\n        element: /* @__PURE__ */ React.createElement(ExtensionBoundary, { id, source, routable: true }, /* @__PURE__ */ React.createElement(ExtensionComponent, null))\n      };\n    }\n  });\n}\n\nfunction createNavItemExtension(options) {\n  const { id, routeRef, title, icon } = options;\n  return createExtension({\n    id,\n    attachTo: { id: \"core.nav\", input: \"items\" },\n    configSchema: createSchemaFromZod(\n      (z) => z.object({\n        title: z.string().default(title)\n      })\n    ),\n    output: {\n      navTarget: coreExtensionData.navTarget\n    },\n    factory: ({ config }) => ({\n      navTarget: {\n        title: config.title,\n        icon,\n        routeRef\n      }\n    })\n  });\n}\n\nfunction createThemeExtension(theme) {\n  return createExtension({\n    id: `themes.${theme.id}`,\n    attachTo: { id: \"core\", input: \"themes\" },\n    output: {\n      theme: coreExtensionData.theme\n    },\n    factory: () => ({ theme })\n  });\n}\n\nconst MESSAGE_MARKER = \"eHgtF5hmbrXyiEvo\";\nfunction describeParentCallSite(ErrorConstructor = Error) {\n  const { stack } = new ErrorConstructor(MESSAGE_MARKER);\n  if (!stack) {\n    return \"<unknown>\";\n  }\n  const startIndex = stack.includes(MESSAGE_MARKER) ? stack.indexOf(\"\\n\") + 1 : 0;\n  const secondEntryStart = stack.indexOf(\"\\n\", stack.indexOf(\"\\n\", startIndex) + 1) + 1;\n  const secondEntryEnd = stack.indexOf(\"\\n\", secondEntryStart);\n  const line = stack.substring(secondEntryStart, secondEntryEnd).trim();\n  if (!line) {\n    return \"unknown\";\n  }\n  if (line.includes(\"(\")) {\n    return line.substring(line.indexOf(\"(\") + 1, line.indexOf(\")\"));\n  }\n  if (line.includes(\"@\")) {\n    return line.substring(line.indexOf(\"@\") + 1);\n  }\n  return line;\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck$1 = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet$1 = (obj, member, getter) => {\n  __accessCheck$1(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd$1 = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet$1 = (obj, member, value, setter) => {\n  __accessCheck$1(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _id, _params$1, _creationSite, _name, name_get;\nfunction toInternalRouteRef(resource) {\n  const r = resource;\n  if (r.$$type !== \"@backstage/RouteRef\") {\n    throw new Error(`Invalid RouteRef, bad type '${r.$$type}'`);\n  }\n  return r;\n}\nclass RouteRefImpl {\n  constructor(params = [], creationSite) {\n    this.params = params;\n    __privateAdd$1(this, _name);\n    __publicField$2(this, \"$$type\", \"@backstage/RouteRef\");\n    __publicField$2(this, \"version\", \"v1\");\n    __privateAdd$1(this, _id, void 0);\n    __privateAdd$1(this, _params$1, void 0);\n    __privateAdd$1(this, _creationSite, void 0);\n    __privateSet$1(this, _params$1, params);\n    __privateSet$1(this, _creationSite, creationSite);\n  }\n  getParams() {\n    return __privateGet$1(this, _params$1);\n  }\n  getDescription() {\n    if (__privateGet$1(this, _id)) {\n      return __privateGet$1(this, _id);\n    }\n    return `created at '${__privateGet$1(this, _creationSite)}'`;\n  }\n  setId(id) {\n    if (!id) {\n      throw new Error(`${__privateGet$1(this, _name, name_get)} id must be a non-empty string`);\n    }\n    if (__privateGet$1(this, _id)) {\n      throw new Error(\n        `${__privateGet$1(this, _name, name_get)} was referenced twice as both '${__privateGet$1(this, _id)}' and '${id}'`\n      );\n    }\n    __privateSet$1(this, _id, id);\n  }\n  toString() {\n    return `${__privateGet$1(this, _name, name_get)}{${this.getDescription()}}`;\n  }\n}\n_id = new WeakMap();\n_params$1 = new WeakMap();\n_creationSite = new WeakMap();\n_name = new WeakSet();\nname_get = function() {\n  return this.$$type.slice(\"@backstage/\".length);\n};\nfunction createRouteRef(config) {\n  return new RouteRefImpl(\n    config == null ? void 0 : config.params,\n    describeParentCallSite()\n  );\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _params, _parent;\nconst PARAM_PATTERN = /^\\w+$/;\nclass SubRouteRefImpl {\n  constructor(path, params, parent) {\n    this.path = path;\n    __publicField$1(this, \"$$type\", \"@backstage/SubRouteRef\");\n    __publicField$1(this, \"version\", \"v1\");\n    __privateAdd(this, _params, void 0);\n    __privateAdd(this, _parent, void 0);\n    __privateSet(this, _params, params);\n    __privateSet(this, _parent, parent);\n  }\n  getParams() {\n    return __privateGet(this, _params);\n  }\n  getParent() {\n    return __privateGet(this, _parent);\n  }\n  getDescription() {\n    const parent = toInternalRouteRef(__privateGet(this, _parent));\n    return `at ${this.path} with parent ${parent.getDescription()}`;\n  }\n  toString() {\n    return `SubRouteRef{${this.getDescription()}}`;\n  }\n}\n_params = new WeakMap();\n_parent = new WeakMap();\nfunction createSubRouteRef(config) {\n  const { path, parent } = config;\n  const internalParent = toInternalRouteRef(parent);\n  const parentParams = internalParent.getParams();\n  const pathParams = path.split(\"/\").filter((p) => p.startsWith(\":\")).map((p) => p.substring(1));\n  const params = [...parentParams, ...pathParams];\n  if (parentParams.some((p) => pathParams.includes(p))) {\n    throw new Error(\n      \"SubRouteRef may not have params that overlap with its parent\"\n    );\n  }\n  if (!path.startsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must start with '/', got '${path}'`);\n  }\n  if (path.endsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must not end with '/', got '${path}'`);\n  }\n  for (const param of pathParams) {\n    if (!PARAM_PATTERN.test(param)) {\n      throw new Error(`SubRouteRef path has invalid param, got '${param}'`);\n    }\n  }\n  const subRouteRef = new SubRouteRefImpl(\n    path,\n    params,\n    parent\n  );\n  return subRouteRef;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ExternalRouteRefImpl extends RouteRefImpl {\n  constructor(optional, params = [], creationSite) {\n    super(params, creationSite);\n    this.optional = optional;\n    this.params = params;\n    __publicField(this, \"$$type\", \"@backstage/ExternalRouteRef\");\n  }\n}\nfunction createExternalRouteRef(options) {\n  return new ExternalRouteRefImpl(\n    Boolean(options == null ? void 0 : options.optional),\n    options == null ? void 0 : options.params,\n    describeParentCallSite()\n  );\n}\n\nfunction useRouteRef(routeRef) {\n  const { pathname } = useLocation();\n  const versionedContext = useVersionedContext(\n    \"routing-context\"\n  );\n  if (!versionedContext) {\n    throw new Error(\"Routing context is not available\");\n  }\n  const resolver = versionedContext.atVersion(1);\n  const routeFunc = useMemo(\n    () => resolver && resolver.resolve(routeRef, { pathname }),\n    [resolver, routeRef, pathname]\n  );\n  if (!versionedContext) {\n    throw new Error(\"useRouteRef used outside of routing context\");\n  }\n  if (!resolver) {\n    throw new Error(\"RoutingContext v1 not available\");\n  }\n  const isOptional = \"optional\" in routeRef && routeRef.optional;\n  if (!routeFunc && !isOptional) {\n    throw new Error(`No path for ${routeRef}`);\n  }\n  return routeFunc;\n}\n\nfunction useRouteRefParams(_routeRef) {\n  return useParams();\n}\n\nexport { ExtensionBoundary, appTreeApiRef, coreExtensionData, createApiExtension, createExtension, createExtensionDataRef, createExtensionInput, createExtensionOverrides, createExternalRouteRef, createNavItemExtension, createPageExtension, createPlugin, createRouteRef, createSchemaFromZod, createSubRouteRef, createThemeExtension, useRouteRef, useRouteRefParams };\n//# sourceMappingURL=index.esm.js.map\n","import React, { lazy } from 'react';\nimport { createExtensionDataRef, createExtension, coreExtensionData, createSchemaFromZod, ExtensionBoundary } from '@backstage/frontend-plugin-api';\nimport { RELATION_MEMBER_OF, getCompoundEntityRef, stringifyEntityRef, RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { g as getEntityRelations, a as useAsyncEntity } from './esm/useEntity-de64059a.esm.js';\nimport { usePermission } from '@backstage/plugin-permission-react';\nimport '@backstage/core-plugin-api';\nimport '@backstage/version-bridge';\n\nfunction isOwnerOf(owner, entity) {\n  const possibleOwners = new Set(\n    [\n      ...getEntityRelations(owner, RELATION_MEMBER_OF, { kind: \"group\" }),\n      ...owner ? [getCompoundEntityRef(owner)] : []\n    ].map(stringifyEntityRef)\n  );\n  const owners = getEntityRelations(entity, RELATION_OWNED_BY).map(\n    stringifyEntityRef\n  );\n  for (const ownerItem of owners) {\n    if (possibleOwners.has(ownerItem)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction useEntityPermission(permission) {\n  const {\n    entity,\n    loading: loadingEntity,\n    error: entityError\n  } = useAsyncEntity();\n  const {\n    allowed,\n    loading: loadingPermission,\n    error: permissionError\n  } = usePermission({\n    permission,\n    resourceRef: entity ? stringifyEntityRef(entity) : void 0\n  });\n  if (loadingEntity || loadingPermission) {\n    return { loading: true, allowed: false };\n  }\n  if (entityError) {\n    return { loading: false, allowed: false, error: entityError };\n  }\n  return { loading: false, allowed, error: permissionError };\n}\n\nconst entityContentTitleExtensionDataRef = createExtensionDataRef(\"plugin.catalog.entity.content.title\");\nconst entityFilterExtensionDataRef = createExtensionDataRef(\"plugin.catalog.entity.filter\");\nfunction applyFilter(a, b) {\n  if (!a) {\n    return true;\n  }\n  return a.toLocaleLowerCase(\"en-US\") === (b == null ? void 0 : b.toLocaleLowerCase(\"en-US\"));\n}\nfunction buildFilter(config, filterFunc) {\n  return (ctx) => {\n    var _a;\n    const configuredFilterMatch = (_a = config.filter) == null ? void 0 : _a.some((filter) => {\n      var _a2, _b;\n      const kindMatch = applyFilter(filter.isKind, ctx.entity.kind);\n      const typeMatch = applyFilter(\n        filter.isType,\n        (_b = (_a2 = ctx.entity.spec) == null ? void 0 : _a2.type) == null ? void 0 : _b.toString()\n      );\n      return kindMatch && typeMatch;\n    });\n    if (configuredFilterMatch) {\n      return true;\n    }\n    if (filterFunc) {\n      return filterFunc(ctx);\n    }\n    return true;\n  };\n}\nfunction createEntityCardExtension(options) {\n  var _a, _b;\n  const id = `entity.cards.${options.id}`;\n  return createExtension({\n    id,\n    attachTo: (_a = options.attachTo) != null ? _a : {\n      id: \"entity.content.overview\",\n      input: \"cards\"\n    },\n    disabled: (_b = options.disabled) != null ? _b : true,\n    output: {\n      element: coreExtensionData.reactElement,\n      filter: entityFilterExtensionDataRef\n    },\n    inputs: options.inputs,\n    configSchema: createSchemaFromZod(\n      (z) => z.object({\n        filter: z.array(\n          z.object({\n            isKind: z.string().optional(),\n            isType: z.string().optional()\n          })\n        ).optional()\n      })\n    ),\n    factory({ config, inputs, source }) {\n      const ExtensionComponent = lazy(\n        () => options.loader({ inputs }).then((element) => ({ default: () => element }))\n      );\n      return {\n        element: /* @__PURE__ */ React.createElement(ExtensionBoundary, { id, source }, /* @__PURE__ */ React.createElement(ExtensionComponent, null)),\n        filter: buildFilter(config, options.filter)\n      };\n    }\n  });\n}\nfunction createEntityContentExtension(options) {\n  var _a, _b;\n  const id = `entity.content.${options.id}`;\n  return createExtension({\n    id,\n    attachTo: (_a = options.attachTo) != null ? _a : {\n      id: \"plugin.catalog.page.entity\",\n      input: \"contents\"\n    },\n    disabled: (_b = options.disabled) != null ? _b : true,\n    output: {\n      element: coreExtensionData.reactElement,\n      path: coreExtensionData.routePath,\n      routeRef: coreExtensionData.routeRef.optional(),\n      title: entityContentTitleExtensionDataRef,\n      filter: entityFilterExtensionDataRef\n    },\n    inputs: options.inputs,\n    configSchema: createSchemaFromZod(\n      (z) => z.object({\n        path: z.string().default(options.defaultPath),\n        title: z.string().default(options.defaultTitle),\n        filter: z.array(\n          z.object({\n            isKind: z.string().optional(),\n            isType: z.string().optional()\n          })\n        ).optional()\n      })\n    ),\n    factory({ config, inputs, source }) {\n      const ExtensionComponent = lazy(\n        () => options.loader({ inputs }).then((element) => ({ default: () => element }))\n      );\n      return {\n        path: config.path,\n        title: config.title,\n        routeRef: options.routeRef,\n        element: /* @__PURE__ */ React.createElement(ExtensionBoundary, { id, source, routable: true }, /* @__PURE__ */ React.createElement(ExtensionComponent, null)),\n        filter: buildFilter(config, options.filter)\n      };\n    }\n  });\n}\n\nexport { createEntityCardExtension, createEntityContentExtension, entityContentTitleExtensionDataRef, entityFilterExtensionDataRef, isOwnerOf, useEntityPermission };\n//# sourceMappingURL=alpha.esm.js.map\n","import { DEFAULT_NAMESPACE, RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { Page, Header, Progress, RoutedTabs, Content, WarningPanel, Link, HeaderLabel } from '@backstage/core-components';\nimport { useApi, alertApiRef, attachComponentData, useRouteRefParams, useElementFilter } from '@backstage/core-plugin-api';\nimport { entityRouteRef, useAsyncEntity, UnregisterEntityDialog, InspectEntityDialog, EntityDisplayName, FavoriteEntity, getEntityRelations, EntityRefLinks } from '@backstage/plugin-catalog-react';\nimport { MenuItem, ListItemIcon, ListItemText, Divider, Tooltip, IconButton, Popover, MenuList, Box } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport FileCopyTwoToneIcon from '@material-ui/icons/FileCopyTwoTone';\nimport { useEntityPermission } from '@backstage/plugin-catalog-react/alpha';\nimport { catalogEntityDeletePermission } from '@backstage/plugin-catalog-common/alpha';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nfunction UnregisterEntity(props) {\n  var _a;\n  const {\n    unregisterEntityOptions,\n    isUnregisterAllowed,\n    onUnregisterEntity,\n    onClose\n  } = props;\n  const isBoolean = typeof (unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) === \"boolean\";\n  const isDisabled = (_a = !isUnregisterAllowed || (isBoolean ? !!(unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) : (unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) === \"disable\")) != null ? _a : false;\n  let unregisterButton = /* @__PURE__ */ React.createElement(React.Fragment, null);\n  if ((unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) !== \"hidden\") {\n    unregisterButton = /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        onClick: () => {\n          onClose();\n          onUnregisterEntity();\n        },\n        disabled: isDisabled\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(CancelIcon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Unregister entity\" })\n    );\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, unregisterButton);\n}\n\nconst useStyles = makeStyles(\n  (theme) => {\n    return {\n      button: {\n        color: theme.page.fontColor\n      }\n    };\n  },\n  { name: \"PluginCatalogEntityContextMenu\" }\n);\nfunction EntityContextMenu(props) {\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    onUnregisterEntity,\n    onInspectEntity\n  } = props;\n  const [anchorEl, setAnchorEl] = useState();\n  const classes = useStyles();\n  const unregisterPermission = useEntityPermission(\n    catalogEntityDeletePermission\n  );\n  const isAllowed = unregisterPermission.allowed;\n  const onOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const onClose = () => {\n    setAnchorEl(void 0);\n  };\n  const alertApi = useApi(alertApiRef);\n  const copyToClipboard = useCallback(() => {\n    window.navigator.clipboard.writeText(window.location.toString()).then(\n      () => alertApi.post({\n        message: \"Copied!\",\n        severity: \"info\",\n        display: \"transient\"\n      })\n    );\n  }, [alertApi]);\n  const extraItems = UNSTABLE_extraContextMenuItems && [\n    ...UNSTABLE_extraContextMenuItems.map((item) => /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        key: item.title,\n        onClick: () => {\n          onClose();\n          item.onClick();\n        }\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(item.Icon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: item.title })\n    )),\n    /* @__PURE__ */ React.createElement(Divider, { key: \"the divider is here!\" })\n  ];\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"More\", arrow: true }, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"aria-label\": \"more\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-haspopup\": \"true\",\n      \"aria-expanded\": !!anchorEl,\n      role: \"button\",\n      onClick: onOpen,\n      \"data-testid\": \"menu-button\",\n      className: classes.button,\n      id: \"long-menu\"\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  )), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open: Boolean(anchorEl),\n      onClose,\n      anchorEl,\n      anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n      transformOrigin: { vertical: \"top\", horizontal: \"right\" },\n      \"aria-labelledby\": \"long-menu\"\n    },\n    /* @__PURE__ */ React.createElement(MenuList, { autoFocusItem: Boolean(anchorEl) }, extraItems, /* @__PURE__ */ React.createElement(\n      UnregisterEntity,\n      {\n        unregisterEntityOptions: UNSTABLE_contextMenuOptions,\n        isUnregisterAllowed: isAllowed,\n        onUnregisterEntity,\n        onClose\n      }\n    ), /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        onClick: () => {\n          onClose();\n          onInspectEntity();\n        }\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(BugReportIcon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Inspect entity\" })\n    ), /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        onClick: () => {\n          onClose();\n          copyToClipboard();\n        }\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(FileCopyTwoToneIcon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Copy entity URL\" })\n    ))\n  ));\n}\n\nconst dataKey = \"plugin.catalog.entityLayoutRoute\";\nconst Route = () => null;\nattachComponentData(Route, dataKey, true);\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nfunction EntityLayoutTitle(props) {\n  const { entity, title } = props;\n  return /* @__PURE__ */ React.createElement(Box, { display: \"inline-flex\", alignItems: \"center\", height: \"1em\", maxWidth: \"100%\" }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      component: \"span\",\n      textOverflow: \"ellipsis\",\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\"\n    },\n    entity ? /* @__PURE__ */ React.createElement(EntityDisplayName, { entityRef: entity, hideIcon: true }) : title\n  ), entity && /* @__PURE__ */ React.createElement(FavoriteEntity, { entity }));\n}\nfunction headerProps(paramKind, paramNamespace, paramName, entity) {\n  var _a, _b, _c, _d, _e;\n  const kind = (_a = paramKind != null ? paramKind : entity == null ? void 0 : entity.kind) != null ? _a : \"\";\n  const namespace = (_b = paramNamespace != null ? paramNamespace : entity == null ? void 0 : entity.metadata.namespace) != null ? _b : \"\";\n  const name = (_e = (_d = (_c = entity == null ? void 0 : entity.metadata.title) != null ? _c : paramName) != null ? _d : entity == null ? void 0 : entity.metadata.name) != null ? _e : \"\";\n  return {\n    headerTitle: `${name}${namespace && namespace !== DEFAULT_NAMESPACE ? ` in ${namespace}` : \"\"}`,\n    headerType: (() => {\n      let t = kind.toLocaleLowerCase(\"en-US\");\n      if (entity && entity.spec && \"type\" in entity.spec) {\n        t += \" \\u2014 \";\n        t += entity.spec.type.toLocaleLowerCase(\"en-US\");\n      }\n      return t;\n    })()\n  };\n}\nfunction EntityLabels(props) {\n  var _a, _b;\n  const { entity } = props;\n  const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: \"Owner\",\n      contentTypograpyRootComponent: \"p\",\n      value: /* @__PURE__ */ React.createElement(\n        EntityRefLinks,\n        {\n          entityRefs: ownedByRelations,\n          defaultKind: \"Group\",\n          color: \"inherit\"\n        }\n      )\n    }\n  ), ((_a = entity.spec) == null ? void 0 : _a.lifecycle) && /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: \"Lifecycle\",\n      value: (_b = entity.spec.lifecycle) == null ? void 0 : _b.toString()\n    }\n  ));\n}\nconst EntityLayout = (props) => {\n  var _a, _b, _c;\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    children,\n    NotFoundComponent\n  } = props;\n  const { kind, namespace, name } = useRouteRefParams(entityRouteRef);\n  const { entity, loading, error } = useAsyncEntity();\n  const location = useLocation();\n  const routes = useElementFilter(\n    children,\n    (elements) => elements.selectByComponentData({\n      key: dataKey,\n      withStrictError: \"Child of EntityLayout must be an EntityLayout.Route\"\n    }).getElements().flatMap(({ props: elementProps }) => {\n      if (!entity) {\n        return [];\n      } else if (elementProps.if && !elementProps.if(entity)) {\n        return [];\n      }\n      return [\n        {\n          path: elementProps.path,\n          title: elementProps.title,\n          children: elementProps.children,\n          tabProps: elementProps.tabProps\n        }\n      ];\n    }),\n    [entity]\n  );\n  const { headerTitle, headerType } = headerProps(\n    kind,\n    namespace,\n    name,\n    entity\n  );\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const [inspectionDialogOpen, setInspectionDialogOpen] = useState(false);\n  const navigate = useNavigate();\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n    navigate(\"/\");\n  };\n  useEffect(() => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n  }, [location.pathname]);\n  return /* @__PURE__ */ React.createElement(Page, { themeId: (_c = (_b = (_a = entity == null ? void 0 : entity.spec) == null ? void 0 : _a.type) == null ? void 0 : _b.toString()) != null ? _c : \"home\" }, /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      title: /* @__PURE__ */ React.createElement(EntityLayoutTitle, { title: headerTitle, entity }),\n      pageTitleOverride: headerTitle,\n      type: headerType\n    },\n    entity && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(EntityLabels, { entity }), /* @__PURE__ */ React.createElement(\n      EntityContextMenu,\n      {\n        UNSTABLE_extraContextMenuItems,\n        UNSTABLE_contextMenuOptions,\n        onUnregisterEntity: () => setConfirmationDialogOpen(true),\n        onInspectEntity: () => setInspectionDialogOpen(true)\n      }\n    ))\n  ), loading && /* @__PURE__ */ React.createElement(Progress, null), entity && /* @__PURE__ */ React.createElement(RoutedTabs, { routes }), error && /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, error.toString())), !loading && !error && !entity && /* @__PURE__ */ React.createElement(Content, null, NotFoundComponent ? NotFoundComponent : /* @__PURE__ */ React.createElement(WarningPanel, { title: \"Entity not found\" }, \"There is no \", kind, \" with the requested\", \" \", /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/references\" }, \"kind, namespace, and name\"), \".\")), /* @__PURE__ */ React.createElement(\n    UnregisterEntityDialog,\n    {\n      open: confirmationDialogOpen,\n      entity,\n      onConfirm: cleanUpAfterRemoval,\n      onClose: () => setConfirmationDialogOpen(false)\n    }\n  ), /* @__PURE__ */ React.createElement(\n    InspectEntityDialog,\n    {\n      open: inspectionDialogOpen,\n      entity,\n      onClose: () => setInspectionDialogOpen(false)\n    }\n  ));\n};\nEntityLayout.Route = Route;\n\nexport { EntityLayout as E };\n//# sourceMappingURL=EntityLayout-d224d43b.esm.js.map\n","function durationToMilliseconds(duration) {\n  const {\n    years = 0,\n    months = 0,\n    weeks = 0,\n    days = 0,\n    hours = 0,\n    minutes = 0,\n    seconds = 0,\n    milliseconds = 0\n  } = duration;\n  const totalDays = years * 365 + months * 30 + weeks * 7 + days;\n  const totalHours = totalDays * 24 + hours;\n  const totalMinutes = totalHours * 60 + minutes;\n  const totalSeconds = totalMinutes * 60 + seconds;\n  const totalMilliseconds = totalSeconds * 1e3 + milliseconds;\n  return totalMilliseconds;\n}\n\nexport { durationToMilliseconds };\n//# sourceMappingURL=index.esm.js.map\n","import { stringifyEntityRef, parseEntityRef } from '@backstage/catalog-model';\nimport { durationToMilliseconds } from '@backstage/types';\nimport DataLoader from 'dataloader';\nimport ExpiryMap from 'expiry-map';\nimport ObservableImpl from 'zen-observable';\nimport { defaultEntityPresentation } from '@backstage/plugin-catalog-react';\nimport ApartmentIcon from '@material-ui/icons/Apartment';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport ExtensionIcon from '@material-ui/icons/Extension';\nimport '@material-ui/icons/Help';\nimport LibraryAddIcon from '@material-ui/icons/LibraryAdd';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport MemoryIcon from '@material-ui/icons/Memory';\nimport PeopleIcon from '@material-ui/icons/People';\nimport PersonIcon from '@material-ui/icons/Person';\nimport { isArray, isString } from 'lodash';\nimport { createExternalRouteRef, createRouteRef } from '@backstage/core-plugin-api';\n\nconst DEFAULT_CACHE_TTL = { seconds: 10 };\nconst DEFAULT_BATCH_DELAY = { milliseconds: 50 };\nconst DEFAULT_ICONS = {\n  api: ExtensionIcon,\n  component: MemoryIcon,\n  system: BusinessIcon,\n  domain: ApartmentIcon,\n  location: LocationOnIcon,\n  user: PersonIcon,\n  group: PeopleIcon,\n  template: LibraryAddIcon\n};\nfunction createDefaultRenderer(options) {\n  return {\n    async: options.async,\n    render: ({ entityRef, entity, context }) => {\n      const presentation = defaultEntityPresentation(\n        entity || entityRef,\n        context\n      );\n      return {\n        snapshot: presentation,\n        loadEntity: options.async\n      };\n    }\n  };\n}\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\nvar _cache, _cacheTtlMs, _loader, _kindIcons, _renderer, _getEntityForInitialRender, getEntityForInitialRender_fn, _createLoader, createLoader_fn, _maybeFallbackIcon, maybeFallbackIcon_fn;\nconst _DefaultEntityPresentationApi = class _DefaultEntityPresentationApi {\n  constructor(options) {\n    __privateAdd(this, _getEntityForInitialRender);\n    __privateAdd(this, _createLoader);\n    __privateAdd(this, _maybeFallbackIcon);\n    // This cache holds on to all entity data ever loaded, no matter how old. Each\n    // entry is tagged with a timestamp of when it was inserted. We use this map\n    // to be able to always render SOME data even though the information is old.\n    // Entities change very rarely, so it's likely that the rendered information\n    // was perfectly fine in the first place.\n    __privateAdd(this, _cache, void 0);\n    __privateAdd(this, _cacheTtlMs, void 0);\n    __privateAdd(this, _loader, void 0);\n    __privateAdd(this, _kindIcons, void 0);\n    // lowercased kinds\n    __privateAdd(this, _renderer, void 0);\n    var _a, _b, _c, _d;\n    const cacheTtl = (_a = options.cacheTtl) != null ? _a : DEFAULT_CACHE_TTL;\n    const batchDelay = (_b = options.batchDelay) != null ? _b : DEFAULT_BATCH_DELAY;\n    const renderer = (_c = options.renderer) != null ? _c : createDefaultRenderer({ async: true });\n    const kindIcons = {};\n    Object.entries((_d = options.kindIcons) != null ? _d : DEFAULT_ICONS).forEach(\n      ([kind, icon]) => {\n        kindIcons[kind.toLocaleLowerCase(\"en-US\")] = icon;\n      }\n    );\n    if (renderer.async) {\n      if (!options.catalogApi) {\n        throw new TypeError(`Asynchronous rendering requires a catalog API`);\n      }\n      __privateSet(this, _loader, __privateMethod(this, _createLoader, createLoader_fn).call(this, {\n        cacheTtl,\n        batchDelay,\n        renderer,\n        catalogApi: options.catalogApi\n      }));\n    }\n    __privateSet(this, _cacheTtlMs, durationToMilliseconds(cacheTtl));\n    __privateSet(this, _cache, /* @__PURE__ */ new Map());\n    __privateSet(this, _kindIcons, kindIcons);\n    __privateSet(this, _renderer, renderer);\n  }\n  /**\n   * Creates a new presentation API that does not reach out to the catalog.\n   */\n  static createLocal() {\n    return new _DefaultEntityPresentationApi({\n      renderer: createDefaultRenderer({ async: false })\n    });\n  }\n  /**\n   * Creates a new presentation API that calls out to the catalog as needed to\n   * get additional information about entities.\n   */\n  static create(options) {\n    return new _DefaultEntityPresentationApi(options);\n  }\n  /** {@inheritdoc @backstage/plugin-catalog-react#EntityPresentationApi.forEntity} */\n  forEntity(entityOrRef, context) {\n    const { entityRef, kind, entity, needsLoad } = __privateMethod(this, _getEntityForInitialRender, getEntityForInitialRender_fn).call(this, entityOrRef);\n    const render = (options) => {\n      const { snapshot } = __privateGet(this, _renderer).render({\n        entityRef,\n        loading: options.loading,\n        entity: options.entity,\n        context: context || {}\n      });\n      return {\n        ...snapshot,\n        entityRef,\n        Icon: __privateMethod(this, _maybeFallbackIcon, maybeFallbackIcon_fn).call(this, snapshot.Icon, kind)\n      };\n    };\n    let initialSnapshot;\n    try {\n      initialSnapshot = render({\n        loading: needsLoad,\n        entity\n      });\n    } catch {\n      initialSnapshot = {\n        primaryTitle: entityRef,\n        entityRef\n      };\n    }\n    const observable = !needsLoad ? void 0 : new ObservableImpl((subscriber) => {\n      let aborted = false;\n      Promise.resolve().then(() => {\n        var _a;\n        return (_a = __privateGet(this, _loader)) == null ? void 0 : _a.load(entityRef);\n      }).then((newEntity) => {\n        if (!aborted && newEntity && newEntity.metadata.etag !== (entity == null ? void 0 : entity.metadata.etag)) {\n          const updatedSnapshot = render({\n            loading: false,\n            entity: newEntity\n          });\n          subscriber.next(updatedSnapshot);\n        }\n      }).catch(() => {\n      }).finally(() => {\n        if (!aborted) {\n          subscriber.complete();\n        }\n      });\n      return () => {\n        aborted = true;\n      };\n    });\n    return {\n      snapshot: initialSnapshot,\n      update$: observable\n    };\n  }\n};\n_cache = new WeakMap();\n_cacheTtlMs = new WeakMap();\n_loader = new WeakMap();\n_kindIcons = new WeakMap();\n_renderer = new WeakMap();\n_getEntityForInitialRender = new WeakSet();\ngetEntityForInitialRender_fn = function(entityOrRef) {\n  if (typeof entityOrRef !== \"string\") {\n    return {\n      entity: entityOrRef,\n      kind: entityOrRef.kind,\n      entityRef: stringifyEntityRef(entityOrRef),\n      needsLoad: false\n    };\n  }\n  const cached = __privateGet(this, _cache).get(entityOrRef);\n  const cachedEntity = cached == null ? void 0 : cached.entity;\n  const cacheNeedsUpdate = !cached || Date.now() - cached.updatedAt > __privateGet(this, _cacheTtlMs);\n  const needsLoad = cacheNeedsUpdate && __privateGet(this, _renderer).async !== false && __privateGet(this, _loader) !== void 0;\n  return {\n    entity: cachedEntity,\n    kind: parseEntityRef(entityOrRef).kind,\n    entityRef: entityOrRef,\n    needsLoad\n  };\n};\n_createLoader = new WeakSet();\ncreateLoader_fn = function(options) {\n  const cacheTtlMs = durationToMilliseconds(options.cacheTtl);\n  const batchDelayMs = durationToMilliseconds(options.batchDelay);\n  return new DataLoader(\n    async (entityRefs) => {\n      const { items } = await options.catalogApi.getEntitiesByRefs({\n        entityRefs\n      });\n      const now = Date.now();\n      entityRefs.forEach((entityRef, index) => {\n        __privateGet(this, _cache).set(entityRef, {\n          updatedAt: now,\n          entity: items[index]\n        });\n      });\n      return items;\n    },\n    {\n      name: \"DefaultEntityPresentationApi\",\n      // This cache is the one that the data loader uses internally for\n      // memoizing requests; essentially what it achieves is that multiple\n      // requests for the same entity ref will be batched up into a single\n      // request and then the resulting promises are held on to. We put an\n      // expiring map here, which makes it so that it re-fetches data with the\n      // expiry cadence of that map. Otherwise it would only fetch a given ref\n      // once and then never try again. This cache does therefore not fulfill\n      // the same purpose as the one that is in the root of the class.\n      cacheMap: new ExpiryMap(cacheTtlMs),\n      maxBatchSize: 100,\n      batchScheduleFn: batchDelayMs ? (cb) => setTimeout(cb, batchDelayMs) : void 0\n    }\n  );\n};\n_maybeFallbackIcon = new WeakSet();\nmaybeFallbackIcon_fn = function(renderedIcon, kind) {\n  if (renderedIcon) {\n    return renderedIcon;\n  } else if (renderedIcon === false) {\n    return false;\n  }\n  return __privateGet(this, _kindIcons)[kind.toLocaleLowerCase(\"en-US\")];\n};\nlet DefaultEntityPresentationApi = _DefaultEntityPresentationApi;\n\nasync function performMigrationToTheNewBucket({\n  storageApi\n}) {\n  var _a;\n  const source = storageApi.forBucket(\"settings\");\n  const target = storageApi.forBucket(\"starredEntities\");\n  const oldStarredEntities = source.snapshot(\"starredEntities\").value;\n  if (!isArray(oldStarredEntities)) {\n    return;\n  }\n  const targetEntities = new Set(\n    (_a = target.snapshot(\"entityRefs\").value) != null ? _a : []\n  );\n  oldStarredEntities.filter(isString).map((old) => old.split(\":\")).filter((split) => split.length === 4 && split[0] === \"entity\").map(\n    ([_, kind, namespace, name]) => stringifyEntityRef({ kind, namespace, name })\n  ).forEach((e) => targetEntities.add(e));\n  await target.set(\"entityRefs\", Array.from(targetEntities));\n  await source.remove(\"starredEntities\");\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass DefaultStarredEntitiesApi {\n  constructor(opts) {\n    __publicField(this, \"settingsStore\");\n    __publicField(this, \"starredEntities\");\n    __publicField(this, \"subscribers\", /* @__PURE__ */ new Set());\n    __publicField(this, \"observable\", new ObservableImpl((subscriber) => {\n      subscriber.next(new Set(this.starredEntities));\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n    var _a;\n    performMigrationToTheNewBucket(opts).then();\n    this.settingsStore = opts.storageApi.forBucket(\"starredEntities\");\n    this.starredEntities = new Set(\n      (_a = this.settingsStore.snapshot(\"entityRefs\").value) != null ? _a : []\n    );\n    this.settingsStore.observe$(\"entityRefs\").subscribe({\n      next: (next) => {\n        var _a2;\n        this.starredEntities = new Set((_a2 = next.value) != null ? _a2 : []);\n        this.notifyChanges();\n      }\n    });\n  }\n  async toggleStarred(entityRef) {\n    if (this.starredEntities.has(entityRef)) {\n      this.starredEntities.delete(entityRef);\n    } else {\n      this.starredEntities.add(entityRef);\n    }\n    await this.settingsStore.set(\n      \"entityRefs\",\n      Array.from(this.starredEntities)\n    );\n  }\n  starredEntitie$() {\n    return this.observable;\n  }\n  notifyChanges() {\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n}\n\nconst createComponentRouteRef = createExternalRouteRef({\n  id: \"create-component\",\n  optional: true\n});\nconst viewTechDocRouteRef = createExternalRouteRef({\n  id: \"view-techdoc\",\n  optional: true,\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst createFromTemplateRouteRef = createExternalRouteRef({\n  id: \"create-from-template\",\n  optional: true,\n  params: [\"namespace\", \"templateName\"]\n});\nconst rootRouteRef = createRouteRef({\n  id: \"catalog\"\n});\n\nexport { DefaultStarredEntitiesApi as D, DefaultEntityPresentationApi as a, createFromTemplateRouteRef as b, createComponentRouteRef as c, rootRouteRef as r, viewTechDocRouteRef as v };\n//# sourceMappingURL=routes-45cc523b.esm.js.map\n","import { r as rootRouteRef, D as DefaultStarredEntitiesApi, a as DefaultEntityPresentationApi, c as createComponentRouteRef, v as viewTechDocRouteRef, b as createFromTemplateRouteRef } from './esm/routes-45cc523b.esm.js';\nexport { a as DefaultEntityPresentationApi, D as DefaultStarredEntitiesApi } from './esm/routes-45cc523b.esm.js';\nexport { A as AboutContent, a as AboutField } from './esm/AboutCard-a9ed76bc.esm.js';\nimport React, { useMemo, useState, useEffect } from 'react';\nimport { makeStyles, createStyles, Select, InputBase, MenuItem, Dialog, DialogTitle, DialogActions, Button, Box } from '@material-ui/core';\nimport { catalogApiRef, useEntityList, EntityKindFilter, useEntity, EntityRefLink, useAsyncEntity, CatalogFilterLayout, starredEntitiesApiRef, entityPresentationApiRef, entityRouteRef } from '@backstage/plugin-catalog-react';\nimport pluralize from 'pluralize';\nimport { useApi, alertApiRef, useRouteRef, attachComponentData, useApiHolder, useElementFilter, createPlugin, createApiFactory, discoveryApiRef, fetchApiRef, storageApiRef, createRoutableExtension, createComponentExtension } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nexport { C as CatalogTable } from './esm/CatalogTable-e4b8aedd.esm.js';\nexport { E as EntityLayout } from './esm/EntityLayout-d224d43b.esm.js';\nimport { Alert } from '@material-ui/lab';\nimport { useNavigate } from 'react-router-dom';\nimport { assertError } from '@backstage/errors';\nimport { ResponseErrorPanel } from '@backstage/core-components';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { ENTITY_STATUS_CATALOG_PROCESSING_TYPE, CatalogClient } from '@backstage/catalog-client';\nexport { h as hasLabels } from './esm/conditions-7e166d27.esm.js';\nimport { createSearchResultListItemExtension } from '@backstage/plugin-search-react';\nimport '@backstage/types';\nimport 'dataloader';\nimport 'expiry-map';\nimport 'zen-observable';\nimport '@material-ui/icons/Apartment';\nimport '@material-ui/icons/Business';\nimport '@material-ui/icons/Extension';\nimport '@material-ui/icons/Help';\nimport '@material-ui/icons/LibraryAdd';\nimport '@material-ui/icons/LocationOn';\nimport '@material-ui/icons/Memory';\nimport '@material-ui/icons/People';\nimport '@material-ui/icons/Person';\nimport 'lodash';\nimport '@backstage/integration-react';\nimport './esm/LinksGridList-c9dd074c.esm.js';\nimport '@material-ui/icons/Language';\nimport '@material-ui/icons/Cached';\nimport '@material-ui/icons/AddCircleOutline';\nimport '@material-ui/icons/Description';\nimport '@material-ui/icons/Edit';\nimport '@backstage/plugin-scaffolder-common';\nimport '@material-ui/core/Typography';\nimport '@material-ui/core/styles';\nimport '@mui/utils';\nimport '@material-ui/icons/OpenInNew';\nimport '@material-ui/icons/Star';\nimport '@material-ui/icons/StarBorder';\nimport '@material-ui/icons/BugReport';\nimport '@material-ui/icons/MoreVert';\nimport '@material-ui/icons/FileCopyTwoTone';\nimport '@backstage/plugin-catalog-react/alpha';\nimport '@backstage/plugin-catalog-common/alpha';\nimport '@material-ui/icons/Cancel';\n\nfunction useAllKinds() {\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    error,\n    loading,\n    value: allKinds\n  } = useAsync(async () => {\n    const items = await catalogApi.getEntityFacets({ facets: [\"kind\"] }).then((response) => {\n      var _a;\n      return ((_a = response.facets.kind) == null ? void 0 : _a.map((f) => f.value).sort()) || [];\n    });\n    return items;\n  }, [catalogApi]);\n  return { loading, error, allKinds: allKinds != null ? allKinds : [] };\n}\nfunction filterKinds(allKinds, allowedKinds, forcedKinds) {\n  let availableKinds = allKinds;\n  if (allowedKinds) {\n    availableKinds = availableKinds.filter(\n      (k) => allowedKinds.some(\n        (a) => a.toLocaleLowerCase(\"en-US\") === k.toLocaleLowerCase(\"en-US\")\n      )\n    );\n  }\n  if (forcedKinds && !allKinds.some(\n    (a) => a.toLocaleLowerCase(\"en-US\") === forcedKinds.toLocaleLowerCase(\"en-US\")\n  )) {\n    availableKinds = availableKinds.concat([forcedKinds]);\n  }\n  const kindsMap = availableKinds.sort().reduce((acc, kind) => {\n    acc[kind.toLocaleLowerCase(\"en-US\")] = kind;\n    return acc;\n  }, {});\n  return kindsMap;\n}\n\nconst useStyles = makeStyles(\n  (theme) => createStyles({\n    root: {\n      ...theme.typography.h4\n    }\n  })\n);\nfunction CatalogKindHeader(props) {\n  var _a, _b;\n  const { initialFilter = \"component\", allowedKinds } = props;\n  const classes = useStyles();\n  const { allKinds } = useAllKinds();\n  const {\n    filters,\n    updateFilters,\n    queryParameters: { kind: kindParameter }\n  } = useEntityList();\n  const queryParamKind = useMemo(\n    () => [kindParameter].flat()[0],\n    [kindParameter]\n  );\n  const [selectedKind, setSelectedKind] = useState(\n    (_b = queryParamKind != null ? queryParamKind : (_a = filters.kind) == null ? void 0 : _a.value) != null ? _b : initialFilter\n  );\n  useEffect(() => {\n    if (queryParamKind) {\n      setSelectedKind(queryParamKind);\n    }\n  }, [queryParamKind]);\n  useEffect(() => {\n    var _a2, _b2;\n    if ((_a2 = filters.kind) == null ? void 0 : _a2.value) {\n      setSelectedKind((_b2 = filters.kind) == null ? void 0 : _b2.value);\n    }\n  }, [filters.kind]);\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : void 0\n    });\n  }, [selectedKind, updateFilters]);\n  const options = filterKinds(allKinds, allowedKinds, selectedKind);\n  return /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      input: /* @__PURE__ */ React.createElement(InputBase, null),\n      value: selectedKind.toLocaleLowerCase(\"en-US\"),\n      onChange: (e) => setSelectedKind(e.target.value),\n      classes\n    },\n    Object.keys(options).map((kind) => /* @__PURE__ */ React.createElement(MenuItem, { value: kind, key: kind }, `${pluralize(options[kind])}`))\n  );\n}\n\nfunction DeleteEntityDialog(props) {\n  const { open, onClose, onConfirm, entity } = props;\n  const [busy, setBusy] = useState(false);\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const onDelete = async () => {\n    setBusy(true);\n    try {\n      const uid = entity.metadata.uid;\n      await catalogApi.removeEntityByUid(uid);\n      onConfirm();\n    } catch (err) {\n      assertError(err);\n      alertApi.post({ message: err.message });\n    } finally {\n      setBusy(false);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(Dialog, { open, onClose }, /* @__PURE__ */ React.createElement(DialogTitle, { id: \"responsive-dialog-title\" }, \"Are you sure you want to delete this entity?\"), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      color: \"secondary\",\n      disabled: busy,\n      onClick: onDelete\n    },\n    \"Delete\"\n  ), /* @__PURE__ */ React.createElement(Button, { onClick: onClose, color: \"primary\" }, \"Cancel\")));\n}\n\nfunction isOrphan(entity) {\n  var _a, _b;\n  return ((_b = (_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[\"backstage.io/orphan\"]) === \"true\";\n}\nfunction EntityOrphanWarning() {\n  const navigate = useNavigate();\n  const catalogLink = useRouteRef(rootRouteRef);\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const { entity } = useEntity();\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    navigate(catalogLink());\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Alert, { severity: \"warning\", onClick: () => setConfirmationDialogOpen(true) }, \"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete.\"), /* @__PURE__ */ React.createElement(\n    DeleteEntityDialog,\n    {\n      open: confirmationDialogOpen,\n      entity,\n      onConfirm: cleanUpAfterRemoval,\n      onClose: () => setConfirmationDialogOpen(false)\n    }\n  ));\n}\n\nasync function getRelationWarnings(entity, catalogApi) {\n  var _a;\n  const entityRefRelations = (_a = entity.relations) == null ? void 0 : _a.map(\n    (relation) => relation.targetRef\n  );\n  if (!entityRefRelations || (entityRefRelations == null ? void 0 : entityRefRelations.length) < 1 || entityRefRelations.length > 1e3) {\n    return [];\n  }\n  const relatedEntities = await catalogApi.getEntitiesByRefs({\n    entityRefs: entityRefRelations,\n    fields: [\"kind\", \"metadata.name\", \"metadata.namespace\"]\n  });\n  return entityRefRelations.filter(\n    (_, index) => relatedEntities.items[index] === void 0\n  );\n}\nasync function hasRelationWarnings(entity, context) {\n  const catalogApi = context.apis.get(catalogApiRef);\n  if (!catalogApi) {\n    throw new Error(`No implementation available for ${catalogApiRef}`);\n  }\n  const relatedEntitiesMissing = await getRelationWarnings(entity, catalogApi);\n  return relatedEntitiesMissing.length > 0;\n}\nfunction EntityRelationWarning() {\n  const { entity } = useEntity();\n  const catalogApi = useApi(catalogApiRef);\n  const { loading, error, value } = useAsync(async () => {\n    return getRelationWarnings(entity, catalogApi);\n  }, [entity, catalogApi]);\n  if (error) {\n    return /* @__PURE__ */ React.createElement(Box, { mb: 1 }, /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error }));\n  }\n  if (loading || !value || value.length === 0) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Alert, { severity: \"warning\" }, \"This entity has relations to other entities, which can't be found in the catalog. \", /* @__PURE__ */ React.createElement(\"br\", null), \"Entities not found are: \", value.join(\", \")));\n}\n\nconst errorFilter = (i) => i.error && i.level === \"error\" && i.type === ENTITY_STATUS_CATALOG_PROCESSING_TYPE;\nasync function getOwnAndAncestorsErrors(entityRef, catalogApi) {\n  const ancestors = await catalogApi.getEntityAncestors({ entityRef });\n  const items = ancestors.items.map((item) => {\n    var _a, _b;\n    const statuses = (_b = (_a = item.entity.status) == null ? void 0 : _a.items) != null ? _b : [];\n    const errors = statuses.filter(errorFilter).map((e) => e.error).filter((e) => Boolean(e));\n    return { errors, entity: item.entity };\n  }).filter((item) => item.errors.length > 0);\n  return { items };\n}\nasync function hasCatalogProcessingErrors(entity, context) {\n  const catalogApi = context.apis.get(catalogApiRef);\n  if (!catalogApi) {\n    throw new Error(`No implementation available for ${catalogApiRef}`);\n  }\n  const errors = await getOwnAndAncestorsErrors(\n    stringifyEntityRef(entity),\n    catalogApi\n  );\n  return errors.items.length > 0;\n}\nfunction EntityProcessingErrorsPanel() {\n  const { entity } = useEntity();\n  const entityRef = stringifyEntityRef(entity);\n  const catalogApi = useApi(catalogApiRef);\n  const { loading, error, value } = useAsync(async () => {\n    return getOwnAndAncestorsErrors(entityRef, catalogApi);\n  }, [entityRef, catalogApi]);\n  if (error) {\n    return /* @__PURE__ */ React.createElement(Box, { mb: 1 }, /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error }));\n  }\n  if (loading || !value) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, value.items.map((ancestorError, index) => /* @__PURE__ */ React.createElement(Box, { key: index, mb: 1 }, stringifyEntityRef(entity) !== stringifyEntityRef(ancestorError.entity) && /* @__PURE__ */ React.createElement(Box, { p: 1 }, \"The error below originates from\", \" \", /* @__PURE__ */ React.createElement(EntityRefLink, { entityRef: ancestorError.entity })), ancestorError.errors.map((e, i) => /* @__PURE__ */ React.createElement(ResponseErrorPanel, { key: i, error: e })))));\n}\n\nconst ENTITY_SWITCH_KEY = \"core.backstage.entitySwitch\";\nconst EntitySwitchCaseComponent = (_props) => null;\nattachComponentData(EntitySwitchCaseComponent, ENTITY_SWITCH_KEY, true);\nconst EntitySwitch = (props) => {\n  var _a, _b;\n  const { entity, loading } = useAsyncEntity();\n  const apis = useApiHolder();\n  const results = useElementFilter(\n    props.children,\n    (collection) => collection.selectByComponentData({\n      key: ENTITY_SWITCH_KEY,\n      withStrictError: \"Child of EntitySwitch is not an EntitySwitch.Case\"\n    }).getElements().flatMap((element) => {\n      if (loading && !entity) {\n        return [];\n      }\n      const { if: condition, children: elementsChildren } = element.props;\n      if (!entity) {\n        return [\n          {\n            if: condition === void 0,\n            children: elementsChildren\n          }\n        ];\n      }\n      return [\n        {\n          if: condition == null ? void 0 : condition(entity, { apis }),\n          children: elementsChildren\n        }\n      ];\n    }),\n    [apis, entity, loading]\n  );\n  const hasAsyncCases = results.some(\n    (r) => typeof r.if === \"object\" && \"then\" in r.if\n  );\n  if (hasAsyncCases) {\n    return /* @__PURE__ */ React.createElement(\n      AsyncEntitySwitch,\n      {\n        results,\n        renderMultipleMatches: props.renderMultipleMatches\n      }\n    );\n  }\n  if (props.renderMultipleMatches === \"all\") {\n    const children = results.filter((r) => r.if).map((r) => r.children);\n    if (children.length === 0) {\n      return getDefaultChildren(results);\n    }\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return (_b = (_a = results.find((r) => r.if)) == null ? void 0 : _a.children) != null ? _b : getDefaultChildren(results);\n};\nfunction AsyncEntitySwitch({\n  results,\n  renderMultipleMatches\n}) {\n  const { loading, value } = useAsync(async () => {\n    var _a;\n    const promises = results.map(\n      async ({ if: condition, children: output }) => {\n        try {\n          if (await condition) {\n            return output;\n          }\n        } catch {\n        }\n        return null;\n      }\n    );\n    if (renderMultipleMatches === \"all\") {\n      const children = (await Promise.all(promises)).filter(Boolean);\n      if (children.length === 0) {\n        return getDefaultChildren(results);\n      }\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n    }\n    return (_a = (await Promise.all(promises)).find(Boolean)) != null ? _a : getDefaultChildren(results);\n  }, [results]);\n  if (loading || !value) {\n    return null;\n  }\n  return value;\n}\nfunction getDefaultChildren(results) {\n  var _a, _b;\n  return (_b = (_a = results.filter((r) => r.if === void 0)[0]) == null ? void 0 : _a.children) != null ? _b : null;\n}\nEntitySwitch.Case = EntitySwitchCaseComponent;\n\nfunction strCmp(a, b) {\n  return Boolean(\n    a && typeof a === \"string\" && (a == null ? void 0 : a.toLocaleLowerCase(\"en-US\")) === (b == null ? void 0 : b.toLocaleLowerCase(\"en-US\"))\n  );\n}\nfunction strCmpAll(value, cmpValues) {\n  return typeof cmpValues === \"string\" ? strCmp(value, cmpValues) : cmpValues.length === 0 || cmpValues.some((cmpVal) => strCmp(value, cmpVal));\n}\nfunction isKind(kinds) {\n  return isEntityWith({ kind: kinds });\n}\nfunction isComponentType(types) {\n  return isEntityWith({ kind: \"component\", type: types });\n}\nfunction isResourceType(types) {\n  return isEntityWith({ kind: \"resource\", type: types });\n}\nfunction isEntityWith(predicate) {\n  return (entity) => {\n    var _a;\n    if (predicate.kind && !strCmpAll(entity.kind, predicate.kind)) {\n      return false;\n    }\n    if (predicate.type && !strCmpAll((_a = entity.spec) == null ? void 0 : _a.type, predicate.type)) {\n      return false;\n    }\n    return true;\n  };\n}\nfunction isNamespace(namespaces) {\n  return (entity) => {\n    var _a;\n    return strCmpAll((_a = entity.metadata) == null ? void 0 : _a.namespace, namespaces);\n  };\n}\n\nconst FilteredEntityLayout = CatalogFilterLayout;\nconst FilterContainer = CatalogFilterLayout.Filters;\nconst EntityListContainer = CatalogFilterLayout.Content;\n\nconst catalogPlugin = createPlugin({\n  id: \"catalog\",\n  apis: [\n    createApiFactory({\n      api: catalogApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ discoveryApi, fetchApi }) => new CatalogClient({ discoveryApi, fetchApi })\n    }),\n    createApiFactory({\n      api: starredEntitiesApiRef,\n      deps: { storageApi: storageApiRef },\n      factory: ({ storageApi }) => new DefaultStarredEntitiesApi({ storageApi })\n    }),\n    createApiFactory({\n      api: entityPresentationApiRef,\n      deps: { catalogApi: catalogApiRef },\n      factory: ({ catalogApi }) => DefaultEntityPresentationApi.create({ catalogApi })\n    })\n  ],\n  routes: {\n    catalogIndex: rootRouteRef,\n    catalogEntity: entityRouteRef\n  },\n  externalRoutes: {\n    createComponent: createComponentRouteRef,\n    viewTechDoc: viewTechDocRouteRef,\n    createFromTemplate: createFromTemplateRouteRef\n  }\n});\nconst CatalogIndexPage = catalogPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogIndexPage\",\n    component: () => import('./esm/index-ebe1d18e.esm.js').then((m) => m.CatalogPage),\n    mountPoint: rootRouteRef\n  })\n);\nconst CatalogEntityPage = catalogPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogEntityPage\",\n    component: () => import('./esm/index-1fe355f9.esm.js').then((m) => m.CatalogEntityPage),\n    mountPoint: entityRouteRef\n  })\n);\nconst EntityAboutCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityAboutCard\",\n    component: {\n      lazy: () => import('./esm/index-b005db1b.esm.js').then((m) => m.AboutCard)\n    }\n  })\n);\nconst EntityLinksCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLinksCard\",\n    component: {\n      lazy: () => import('./esm/index-a2f43c63.esm.js').then((m) => m.EntityLinksCard)\n    }\n  })\n);\nconst EntityLabelsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLabelsCard\",\n    component: {\n      lazy: () => import('./esm/index-1819df86.esm.js').then((m) => m.EntityLabelsCard)\n    }\n  })\n);\nconst EntityHasSystemsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasSystemsCard\",\n    component: {\n      lazy: () => import('./esm/index-b87e664e.esm.js').then((m) => m.HasSystemsCard)\n    }\n  })\n);\nconst EntityHasComponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-151a7b53.esm.js').then((m) => m.HasComponentsCard)\n    }\n  })\n);\nconst EntityHasSubcomponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasSubcomponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-df2397a2.esm.js').then(\n        (m) => m.HasSubcomponentsCard\n      )\n    }\n  })\n);\nconst EntityHasResourcesCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasResourcesCard\",\n    component: {\n      lazy: () => import('./esm/index-457f1bef.esm.js').then((m) => m.HasResourcesCard)\n    }\n  })\n);\nconst EntityDependsOnComponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityDependsOnComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-5d579387.esm.js').then(\n        (m) => m.DependsOnComponentsCard\n      )\n    }\n  })\n);\nconst EntityDependencyOfComponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityDependencyOfComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-226f1855.esm.js').then(\n        (m) => m.DependencyOfComponentsCard\n      )\n    }\n  })\n);\nconst EntityDependsOnResourcesCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityDependsOnResourcesCard\",\n    component: {\n      lazy: () => import('./esm/index-2ae6a112.esm.js').then(\n        (m) => m.DependsOnResourcesCard\n      )\n    }\n  })\n);\nconst RelatedEntitiesCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"RelatedEntitiesCard\",\n    component: {\n      lazy: () => import('./esm/index-87a68cf7.esm.js').then(\n        (m) => m.RelatedEntitiesCard\n      )\n    }\n  })\n);\nconst CatalogSearchResultListItem = catalogPlugin.provide(\n  createSearchResultListItemExtension({\n    name: \"CatalogSearchResultListItem\",\n    component: () => import('./esm/index-3524e4e8.esm.js').then(\n      (m) => m.CatalogSearchResultListItem\n    ),\n    predicate: (result) => result.type === \"software-catalog\"\n  })\n);\n\nexport { CatalogEntityPage, CatalogIndexPage, CatalogKindHeader, CatalogSearchResultListItem, EntityAboutCard, EntityDependencyOfComponentsCard, EntityDependsOnComponentsCard, EntityDependsOnResourcesCard, EntityHasComponentsCard, EntityHasResourcesCard, EntityHasSubcomponentsCard, EntityHasSystemsCard, EntityLabelsCard, EntityLinksCard, EntityListContainer, EntityOrphanWarning, EntityProcessingErrorsPanel, EntityRelationWarning, EntitySwitch, FilterContainer, FilteredEntityLayout, RelatedEntitiesCard, catalogPlugin, hasCatalogProcessingErrors, hasRelationWarnings, isComponentType, isEntityWith, isKind, isNamespace, isOrphan, isResourceType };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createRouteRef, createSubRouteRef, createPlugin, createApiFactory, configApiRef, createRoutableExtension, createComponentExtension, useApi, useRouteRefParams, errorApiRef, useRouteRef } from '@backstage/core-plugin-api';\nimport { readGithubIntegrationConfigs } from '@backstage/integration';\nimport { Octokit } from '@octokit/rest';\nimport { scmAuthApiRef } from '@backstage/integration-react';\nimport React, { useState, useEffect } from 'react';\nimport { useEntity, MissingAnnotationEmptyState } from '@backstage/plugin-catalog-react';\nimport { Link as Link$1, Routes, Route } from 'react-router-dom';\nimport { makeStyles, Accordion, AccordionSummary, Typography, CircularProgress, Tooltip, Zoom, Modal, Fade, LinearProgress, Box, TableContainer, Paper, Table, TableBody, TableRow, TableCell, AccordionDetails, ListItemText, Button, IconButton } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport { DateTime } from 'luxon';\nimport { StatusPending, StatusOK, StatusError, StatusWarning, StatusAborted, StatusRunning, LogViewer, Breadcrumbs, Link, EmptyState, Table as Table$1, InfoCard, StructuredMetadataTable, ErrorPanel } from '@backstage/core-components';\nimport useAsync from 'react-use/lib/useAsync';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport { ANNOTATION_SOURCE_LOCATION, ANNOTATION_LOCATION } from '@backstage/catalog-model';\nimport gitUrlParse from 'git-url-parse';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport SyncIcon from '@material-ui/icons/Sync';\n\nconst githubActionsApiRef = createApiRef({\n  id: \"plugin.githubactions.service\"\n});\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass GithubActionsClient {\n  constructor(options) {\n    __publicField(this, \"configApi\");\n    __publicField(this, \"scmAuthApi\");\n    this.configApi = options.configApi;\n    this.scmAuthApi = options.scmAuthApi;\n  }\n  async getOctokit(hostname = \"github.com\") {\n    var _a;\n    const { token } = await this.scmAuthApi.getCredentials({\n      url: `https://${hostname}/`,\n      additionalScope: {\n        customScopes: {\n          github: [\"repo\"]\n        }\n      }\n    });\n    const configs = readGithubIntegrationConfigs(\n      (_a = this.configApi.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []\n    );\n    const githubIntegrationConfig = configs.find((v) => v.host === hostname);\n    const baseUrl = githubIntegrationConfig == null ? void 0 : githubIntegrationConfig.apiBaseUrl;\n    return new Octokit({ auth: token, baseUrl });\n  }\n  async reRunWorkflow(options) {\n    const { hostname, owner, repo, runId } = options;\n    const octokit = await this.getOctokit(hostname);\n    return octokit.actions.reRunWorkflow({\n      owner,\n      repo,\n      run_id: runId\n    });\n  }\n  async listWorkflowRuns(options) {\n    const { hostname, owner, repo, pageSize = 100, page = 0, branch } = options;\n    const octokit = await this.getOctokit(hostname);\n    const workflowRuns = await octokit.actions.listWorkflowRunsForRepo({\n      owner,\n      repo,\n      per_page: pageSize,\n      page,\n      ...branch ? { branch } : {}\n    });\n    return workflowRuns.data;\n  }\n  async getWorkflow(options) {\n    const { hostname, owner, repo, id } = options;\n    const octokit = await this.getOctokit(hostname);\n    const workflow = await octokit.actions.getWorkflow({\n      owner,\n      repo,\n      workflow_id: id\n    });\n    return workflow.data;\n  }\n  async getWorkflowRun(options) {\n    const { hostname, owner, repo, id } = options;\n    const octokit = await this.getOctokit(hostname);\n    const run = await octokit.actions.getWorkflowRun({\n      owner,\n      repo,\n      run_id: id\n    });\n    return run.data;\n  }\n  async listJobsForWorkflowRun(options) {\n    const { hostname, owner, repo, id, pageSize = 100, page = 0 } = options;\n    const octokit = await this.getOctokit(hostname);\n    const jobs = await octokit.actions.listJobsForWorkflowRun({\n      owner,\n      repo,\n      run_id: id,\n      per_page: pageSize,\n      page\n    });\n    return jobs.data;\n  }\n  async downloadJobLogsForWorkflowRun(options) {\n    const { hostname, owner, repo, runId } = options;\n    const octokit = await this.getOctokit(hostname);\n    const workflow = await octokit.actions.downloadJobLogsForWorkflowRun({\n      owner,\n      repo,\n      job_id: runId\n    });\n    return workflow.data;\n  }\n}\n\nvar BuildStatus = /* @__PURE__ */ ((BuildStatus2) => {\n  BuildStatus2[BuildStatus2[\"success\"] = 0] = \"success\";\n  BuildStatus2[BuildStatus2[\"failure\"] = 1] = \"failure\";\n  BuildStatus2[BuildStatus2[\"pending\"] = 2] = \"pending\";\n  BuildStatus2[BuildStatus2[\"running\"] = 3] = \"running\";\n  return BuildStatus2;\n})(BuildStatus || {});\n\nconst rootRouteRef = createRouteRef({\n  id: \"github-actions\"\n});\nconst buildRouteRef = createSubRouteRef({\n  id: \"github-actions/build\",\n  path: \"/:id\",\n  parent: rootRouteRef\n});\n\nconst githubActionsPlugin = createPlugin({\n  id: \"github-actions\",\n  apis: [\n    createApiFactory({\n      api: githubActionsApiRef,\n      deps: { configApi: configApiRef, scmAuthApi: scmAuthApiRef },\n      factory: ({ configApi, scmAuthApi }) => new GithubActionsClient({ configApi, scmAuthApi })\n    })\n  ],\n  routes: {\n    entityContent: rootRouteRef\n  }\n});\nconst EntityGithubActionsContent = githubActionsPlugin.provide(\n  createRoutableExtension({\n    name: \"EntityGithubActionsContent\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.Router),\n    mountPoint: rootRouteRef\n  })\n);\nconst EntityLatestGithubActionRunCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLatestGithubActionRunCard\",\n    component: {\n      lazy: () => import('./esm/index-85d5c558.esm.js').then((m) => m.LatestWorkflowRunCard)\n    }\n  })\n);\nconst EntityLatestGithubActionsForBranchCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLatestGithubActionsForBranchCard\",\n    component: {\n      lazy: () => import('./esm/index-85d5c558.esm.js').then(\n        (m) => m.LatestWorkflowsForBranchCard\n      )\n    }\n  })\n);\nconst EntityRecentGithubActionsRunsCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityRecentGithubActionsRunsCard\",\n    component: {\n      lazy: () => import('./esm/index-85d5c558.esm.js').then((m) => m.RecentWorkflowRunsCard)\n    }\n  })\n);\n\nconst GITHUB_ACTIONS_ANNOTATION = \"github.com/project-slug\";\nconst getProjectNameFromEntity = (entity) => {\n  var _a, _b;\n  return (_b = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]) != null ? _b : \"\";\n};\n\nconst WorkflowRunStatus = (props) => {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(WorkflowIcon, { ...props }), getStatusDescription(props));\n};\nfunction WorkflowIcon({\n  status,\n  conclusion\n}) {\n  if (status === void 0)\n    return null;\n  switch (status.toLocaleLowerCase(\"en-US\")) {\n    case \"queued\":\n      return /* @__PURE__ */ React.createElement(StatusPending, null);\n    case \"in_progress\":\n      return /* @__PURE__ */ React.createElement(StatusRunning, null);\n    case \"completed\":\n      switch (conclusion == null ? void 0 : conclusion.toLocaleLowerCase(\"en-US\")) {\n        case \"skipped\":\n          return /* @__PURE__ */ React.createElement(StatusAborted, null);\n        case \"timed_out\":\n          return /* @__PURE__ */ React.createElement(StatusWarning, null);\n        case \"failure\":\n          return /* @__PURE__ */ React.createElement(StatusError, null);\n        default:\n          return /* @__PURE__ */ React.createElement(StatusOK, null);\n      }\n    default:\n      return /* @__PURE__ */ React.createElement(StatusPending, null);\n  }\n}\nfunction getStatusDescription({\n  status,\n  conclusion\n}) {\n  if (status === void 0)\n    return \"\";\n  switch (status.toLocaleLowerCase(\"en-US\")) {\n    case \"queued\":\n      return \"Queued\";\n    case \"in_progress\":\n      return \"In progress\";\n    case \"completed\":\n      switch (conclusion == null ? void 0 : conclusion.toLocaleLowerCase(\"en-US\")) {\n        case \"skipped\":\n          return \"Aborted\";\n        case \"timed_out\":\n          return \"Timed out\";\n        case \"failure\":\n          return \"Error\";\n        default:\n          return \"Completed\";\n      }\n    default:\n      return \"Pending\";\n  }\n}\n\nconst useWorkflowRunJobs = ({\n  hostname,\n  owner,\n  repo\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const { id } = useRouteRefParams(buildRouteRef);\n  return useAsync(async () => {\n    if (!repo || !owner) {\n      throw new Error(\"No repo/owner provided\");\n    }\n    const jobs = await api.listJobsForWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      id: parseInt(id, 10)\n    });\n    return {\n      total_count: jobs.total_count,\n      jobs: jobs.jobs.map((job) => {\n        var _a, _b, _c, _d;\n        return {\n          html_url: (_a = job.html_url) != null ? _a : void 0,\n          status: job.status,\n          conclusion: (_b = job.conclusion) != null ? _b : void 0,\n          started_at: job.started_at,\n          completed_at: (_c = job.completed_at) != null ? _c : void 0,\n          id: job.id,\n          name: job.name,\n          steps: (_d = job.steps) == null ? void 0 : _d.map((step) => {\n            var _a2, _b2, _c2;\n            return {\n              name: step.name,\n              status: step.status,\n              conclusion: (_a2 = step.conclusion) != null ? _a2 : void 0,\n              number: step.number,\n              started_at: (_b2 = step.started_at) != null ? _b2 : void 0,\n              completed_at: (_c2 = step.completed_at) != null ? _c2 : void 0\n            };\n          })\n        };\n      })\n    };\n  }, [repo, owner, id]);\n};\n\nconst useWorkflowRunsDetails = ({\n  hostname,\n  owner,\n  repo\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const { id } = useRouteRefParams(buildRouteRef);\n  const details = useAsync(async () => {\n    return repo && owner ? api.getWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      id: parseInt(id, 10)\n    }) : Promise.reject(new Error(\"No repo/owner provided\"));\n  }, [repo, owner, id]);\n  return details;\n};\n\nconst useDownloadWorkflowRunLogs = ({\n  hostname,\n  owner,\n  repo,\n  id\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const details = useAsync(async () => {\n    return repo && owner ? api.downloadJobLogsForWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      runId: id\n    }) : Promise.reject(\"No repo/owner provided\");\n  }, [repo, owner, id]);\n  return details;\n};\n\nconst getHostnameFromEntity = (entity) => {\n  var _a, _b, _c;\n  const location = (_c = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_SOURCE_LOCATION]) != null ? _c : (_b = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _b[ANNOTATION_LOCATION];\n  return (location == null ? void 0 : location.startsWith(\"url:\")) ? gitUrlParse(location.slice(4)).resource : void 0;\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: \"-20px\"\n  },\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    width: \"85%\",\n    height: \"85%\",\n    justifyContent: \"center\",\n    margin: \"auto\"\n  },\n  normalLogContainer: {\n    height: \"75vh\",\n    width: \"100%\"\n  },\n  modalLogContainer: {\n    height: \"100%\",\n    width: \"100%\"\n  },\n  log: {\n    background: theme.palette.background.default\n  }\n}));\nconst WorkflowRunLogs = ({\n  entity,\n  runId,\n  inProgress\n}) => {\n  const classes = useStyles$2();\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = projectName && projectName.split(\"/\") || [];\n  const jobLogs = useDownloadWorkflowRunLogs({\n    hostname,\n    owner,\n    repo,\n    id: runId\n  });\n  const logText = jobLogs.value ? String(jobLogs.value) : void 0;\n  const [open, setOpen] = React.useState(false);\n  const handleOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(Accordion, { TransitionProps: { unmountOnExit: true }, disabled: inProgress }, /* @__PURE__ */ React.createElement(\n    AccordionSummary,\n    {\n      expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n      IconButtonProps: {\n        className: classes.button\n      }\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"button\" }, jobLogs.loading ? /* @__PURE__ */ React.createElement(CircularProgress, null) : \"Job Log\"),\n    /* @__PURE__ */ React.createElement(Tooltip, { title: \"Open Log\", TransitionComponent: Zoom, arrow: true }, /* @__PURE__ */ React.createElement(\n      DescriptionIcon,\n      {\n        onClick: (event) => {\n          event.stopPropagation();\n          handleOpen();\n        },\n        style: { marginLeft: \"auto\" }\n      }\n    )),\n    /* @__PURE__ */ React.createElement(\n      Modal,\n      {\n        className: classes.modal,\n        onClick: (event) => event.stopPropagation(),\n        open,\n        onClose: handleClose\n      },\n      /* @__PURE__ */ React.createElement(Fade, { in: open }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.modalLogContainer }, /* @__PURE__ */ React.createElement(\n        LogViewer,\n        {\n          text: logText != null ? logText : \"No Values Found\",\n          classes: { root: classes.log }\n        }\n      )))\n    )\n  ), logText && /* @__PURE__ */ React.createElement(\"div\", { className: classes.normalLogContainer }, /* @__PURE__ */ React.createElement(LogViewer, { text: logText, classes: { root: classes.log } })));\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  root: {\n    maxWidth: 720,\n    margin: theme.spacing(2)\n  },\n  title: {\n    padding: theme.spacing(1, 0, 2, 0)\n  },\n  table: {\n    padding: theme.spacing(1)\n  },\n  accordionDetails: {\n    padding: 0\n  },\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: \"-20px\"\n  },\n  externalLinkIcon: {\n    fontSize: \"inherit\",\n    verticalAlign: \"bottom\"\n  }\n}));\nconst getElapsedTime = (start, end) => {\n  if (!start || !end) {\n    return \"\";\n  }\n  const startDate = DateTime.fromISO(start);\n  const endDate = end ? DateTime.fromISO(end) : DateTime.now();\n  const diff = endDate.diff(startDate);\n  const timeElapsed = diff.toFormat(`m 'minutes' s 'seconds'`);\n  return timeElapsed;\n};\nconst StepView = ({ step }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: step.name,\n      secondary: getElapsedTime(step.started_at, step.completed_at)\n    }\n  )), /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(\n    WorkflowRunStatus,\n    {\n      status: step.status.toLocaleUpperCase(\"en-US\"),\n      conclusion: (_a = step.conclusion) == null ? void 0 : _a.toLocaleUpperCase(\"en-US\")\n    }\n  )));\n};\nconst JobListItem = ({\n  job,\n  className,\n  entity\n}) => {\n  var _a;\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(Accordion, { TransitionProps: { unmountOnExit: true }, className }, /* @__PURE__ */ React.createElement(\n    AccordionSummary,\n    {\n      expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n      IconButtonProps: {\n        className: classes.button\n      }\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"button\" }, job.name, \" (\", getElapsedTime(job.started_at, job.completed_at), \")\")\n  ), /* @__PURE__ */ React.createElement(AccordionDetails, { className: classes.accordionDetails }, /* @__PURE__ */ React.createElement(TableContainer, null, /* @__PURE__ */ React.createElement(Table, null, (_a = job.steps) == null ? void 0 : _a.map((step) => /* @__PURE__ */ React.createElement(StepView, { key: step.number, step }))))), job.status === \"queued\" || job.status === \"in_progress\" ? /* @__PURE__ */ React.createElement(WorkflowRunLogs, { runId: job.id, inProgress: true, entity }) : /* @__PURE__ */ React.createElement(WorkflowRunLogs, { runId: job.id, inProgress: false, entity }));\n};\nconst JobsList = ({ jobs, entity }) => {\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(Box, null, jobs && jobs.total_count > 0 && jobs.jobs.map((job) => /* @__PURE__ */ React.createElement(\n    JobListItem,\n    {\n      key: job.id,\n      job,\n      className: job.status !== \"success\" ? classes.failed : classes.success,\n      entity\n    }\n  )));\n};\nconst WorkflowRunDetails = ({ entity }) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o;\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = projectName && projectName.split(\"/\") || [];\n  const details = useWorkflowRunsDetails({ hostname, owner, repo });\n  const jobs = useWorkflowRunJobs({ hostname, owner, repo });\n  const classes = useStyles$1();\n  if (details.error && details.error.message) {\n    return /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", color: \"error\" }, \"Failed to load build, \", details.error.message);\n  } else if (details.loading) {\n    return /* @__PURE__ */ React.createElement(LinearProgress, null);\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(Box, { mb: 3 }, /* @__PURE__ */ React.createElement(Breadcrumbs, { \"aria-label\": \"breadcrumb\" }, /* @__PURE__ */ React.createElement(Link, { to: \"..\" }, \"Workflow runs\"), /* @__PURE__ */ React.createElement(Typography, null, \"Workflow run details\"))), /* @__PURE__ */ React.createElement(TableContainer, { component: Paper, className: classes.table }, /* @__PURE__ */ React.createElement(Table, null, /* @__PURE__ */ React.createElement(TableBody, null, /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Branch\")), /* @__PURE__ */ React.createElement(TableCell, null, (_a = details.value) == null ? void 0 : _a.head_branch)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Message\")), /* @__PURE__ */ React.createElement(TableCell, null, (_c = (_b = details.value) == null ? void 0 : _b.head_commit) == null ? void 0 : _c.message)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Commit ID\")), /* @__PURE__ */ React.createElement(TableCell, null, (_e = (_d = details.value) == null ? void 0 : _d.head_commit) == null ? void 0 : _e.id)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Workflow\")), /* @__PURE__ */ React.createElement(TableCell, null, (_f = details.value) == null ? void 0 : _f.name)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Status\")), /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(\n    WorkflowRunStatus,\n    {\n      status: ((_g = details.value) == null ? void 0 : _g.status) || void 0,\n      conclusion: ((_h = details.value) == null ? void 0 : _h.conclusion) || void 0\n    }\n  ))), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Author\")), /* @__PURE__ */ React.createElement(TableCell, null, `${(_k = (_j = (_i = details.value) == null ? void 0 : _i.head_commit) == null ? void 0 : _j.author) == null ? void 0 : _k.name} (${(_n = (_m = (_l = details.value) == null ? void 0 : _l.head_commit) == null ? void 0 : _m.author) == null ? void 0 : _n.email})`)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Links\")), /* @__PURE__ */ React.createElement(TableCell, null, ((_o = details.value) == null ? void 0 : _o.html_url) && /* @__PURE__ */ React.createElement(Link, { to: details.value.html_url }, \"Workflow runs on GitHub\", \" \", /* @__PURE__ */ React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon })))), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, { colSpan: 2 }, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Jobs\"), jobs.loading ? /* @__PURE__ */ React.createElement(CircularProgress, null) : /* @__PURE__ */ React.createElement(JobsList, { jobs: jobs.value, entity })))))));\n};\n\nfunction useWorkflowRuns({\n  hostname,\n  owner,\n  repo,\n  branch,\n  initialPageSize = 5\n}) {\n  const api = useApi(githubActionsApiRef);\n  const errorApi = useApi(errorApiRef);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(initialPageSize);\n  const {\n    loading,\n    value: runs,\n    retry,\n    error\n  } = useAsyncRetry(async () => {\n    const workflowRunsData = await api.listWorkflowRuns({\n      hostname,\n      owner,\n      repo,\n      pageSize,\n      page: page + 1,\n      branch\n    });\n    setTotal(workflowRunsData.total_count);\n    return workflowRunsData.workflow_runs.map((run) => {\n      var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n      return {\n        workflowName: (_a = run.name) != null ? _a : void 0,\n        message: (_b = run.head_commit) == null ? void 0 : _b.message,\n        id: `${run.id}`,\n        onReRunClick: async () => {\n          try {\n            await api.reRunWorkflow({\n              hostname,\n              owner,\n              repo,\n              runId: run.id\n            });\n          } catch (e) {\n            errorApi.post(\n              new Error(`Failed to rerun the workflow: ${e.message}`)\n            );\n          }\n        },\n        source: {\n          branchName: (_c = run.head_branch) != null ? _c : void 0,\n          commit: {\n            hash: (_d = run.head_commit) == null ? void 0 : _d.id,\n            url: (_g = (_e = run.head_repository) == null ? void 0 : _e.branches_url) == null ? void 0 : _g.replace(\n              \"{/branch}\",\n              (_f = run.head_branch) != null ? _f : \"\"\n            )\n          }\n        },\n        status: (_h = run.status) != null ? _h : void 0,\n        conclusion: (_i = run.conclusion) != null ? _i : void 0,\n        url: run.url,\n        githubUrl: run.html_url\n      };\n    });\n  }, [page, pageSize, repo, owner]);\n  return [\n    {\n      page,\n      pageSize,\n      loading,\n      runs,\n      projectName: `${owner}/${repo}`,\n      total,\n      error\n    },\n    {\n      runs,\n      setPage,\n      setPageSize,\n      retry\n    }\n  ];\n}\n\nconst generatedColumns = [\n  {\n    title: \"ID\",\n    field: \"id\",\n    type: \"numeric\",\n    width: \"150px\"\n  },\n  {\n    title: \"Message\",\n    field: \"message\",\n    highlight: true,\n    render: (row) => {\n      const LinkWrapper = () => {\n        const routeLink = useRouteRef(buildRouteRef);\n        return /* @__PURE__ */ React.createElement(Link, { component: Link$1, to: routeLink({ id: row.id }) }, row.message);\n      };\n      return /* @__PURE__ */ React.createElement(LinkWrapper, null);\n    }\n  },\n  {\n    title: \"Source\",\n    render: (row) => {\n      var _a, _b;\n      return /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", noWrap: true }, /* @__PURE__ */ React.createElement(Typography, { paragraph: true, variant: \"body2\" }, (_a = row.source) == null ? void 0 : _a.branchName), /* @__PURE__ */ React.createElement(Typography, { paragraph: true, variant: \"body2\" }, (_b = row.source) == null ? void 0 : _b.commit.hash));\n    }\n  },\n  {\n    title: \"Workflow\",\n    field: \"workflowName\"\n  },\n  {\n    title: \"Status\",\n    customSort: (d1, d2) => {\n      return getStatusDescription(d1).localeCompare(getStatusDescription(d2));\n    },\n    render: (row) => /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(WorkflowRunStatus, { status: row.status, conclusion: row.conclusion }))\n  },\n  {\n    title: \"Actions\",\n    render: (row) => /* @__PURE__ */ React.createElement(Tooltip, { title: \"Rerun workflow\" }, /* @__PURE__ */ React.createElement(IconButton, { onClick: row.onReRunClick }, /* @__PURE__ */ React.createElement(RetryIcon, null))),\n    width: \"10%\"\n  }\n];\nconst WorkflowRunsTableView = ({\n  projectName,\n  loading,\n  pageSize,\n  page,\n  retry,\n  runs,\n  onChangePage,\n  onChangePageSize,\n  total\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    Table$1,\n    {\n      isLoading: loading,\n      options: { paging: true, pageSize, padding: \"dense\" },\n      totalCount: total,\n      page,\n      actions: [\n        {\n          icon: () => /* @__PURE__ */ React.createElement(SyncIcon, null),\n          tooltip: \"Reload workflow runs\",\n          isFreeAction: true,\n          onClick: () => retry()\n        }\n      ],\n      data: runs != null ? runs : [],\n      onPageChange: onChangePage,\n      onRowsPerPageChange: onChangePageSize,\n      style: { width: \"100%\" },\n      title: /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(GitHubIcon, null), /* @__PURE__ */ React.createElement(Box, { mr: 1 }), /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, projectName)),\n      columns: generatedColumns\n    }\n  );\n};\nconst WorkflowRunsTable = ({\n  entity,\n  branch\n}) => {\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = (projectName != null ? projectName : \"/\").split(\"/\");\n  const [{ runs, ...tableProps }, { retry, setPage, setPageSize }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch\n  });\n  const githubHost = hostname || \"github.com\";\n  const hasNoRuns = !tableProps.loading && !runs;\n  return hasNoRuns ? /* @__PURE__ */ React.createElement(\n    EmptyState,\n    {\n      missing: \"data\",\n      title: \"No Workflow Data\",\n      description: \"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.\",\n      action: /* @__PURE__ */ React.createElement(\n        Button,\n        {\n          variant: \"contained\",\n          color: \"primary\",\n          href: `https://${githubHost}/${projectName}/actions/new`\n        },\n        \"Create new Workflow\"\n      )\n    }\n  ) : /* @__PURE__ */ React.createElement(\n    WorkflowRunsTableView,\n    {\n      ...tableProps,\n      runs,\n      loading: tableProps.loading,\n      retry,\n      onChangePageSize: setPageSize,\n      onChangePage: setPage\n    }\n  );\n};\n\nconst isGithubActionsAvailable = (entity) => {\n  var _a;\n  return Boolean((_a = entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]);\n};\nconst Router = () => {\n  const { entity } = useEntity();\n  if (!isGithubActionsAvailable(entity)) {\n    return /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, { annotation: GITHUB_ACTIONS_ANNOTATION });\n  }\n  return /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: \"/\", element: /* @__PURE__ */ React.createElement(WorkflowRunsTable, { entity }) }), /* @__PURE__ */ React.createElement(\n    Route,\n    {\n      path: `${buildRouteRef.path}`,\n      element: /* @__PURE__ */ React.createElement(WorkflowRunDetails, { entity })\n    }\n  ), \")\");\n};\n\nvar Router$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isGithubActionsAvailable: isGithubActionsAvailable,\n  Router: Router\n});\n\nconst useStyles = makeStyles({\n  externalLinkIcon: {\n    fontSize: \"inherit\",\n    verticalAlign: \"bottom\"\n  }\n});\nconst WidgetContent = (props) => {\n  var _a;\n  const { error, loading, lastRun, branch } = props;\n  const classes = useStyles();\n  if (error)\n    return /* @__PURE__ */ React.createElement(Typography, null, \"Couldn't fetch latest \", branch, \" run\");\n  if (loading)\n    return /* @__PURE__ */ React.createElement(LinearProgress, null);\n  return /* @__PURE__ */ React.createElement(\n    StructuredMetadataTable,\n    {\n      metadata: {\n        status: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n          WorkflowRunStatus,\n          {\n            status: lastRun.status,\n            conclusion: lastRun.conclusion\n          }\n        )),\n        message: lastRun.message,\n        url: /* @__PURE__ */ React.createElement(Link, { to: (_a = lastRun.githubUrl) != null ? _a : \"\" }, \"See more on GitHub\", \" \", /* @__PURE__ */ React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon }))\n      }\n    }\n  );\n};\nconst LatestWorkflowRunCard = (props) => {\n  var _a, _b, _c;\n  const { branch = \"master\", variant } = props;\n  const { entity } = useEntity();\n  const errorApi = useApi(errorApiRef);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = ((_b = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]) != null ? _b : \"/\").split(\"/\");\n  const [{ runs, loading, error }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch\n  });\n  const lastRun = (_c = runs == null ? void 0 : runs[0]) != null ? _c : {};\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: `Last ${branch} build`, variant }, /* @__PURE__ */ React.createElement(\n    WidgetContent,\n    {\n      error,\n      loading,\n      branch,\n      lastRun\n    }\n  ));\n};\nconst LatestWorkflowsForBranchCard = (props) => {\n  const { branch = \"master\", variant } = props;\n  const { entity } = useEntity();\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: `Last ${branch} build`, variant }, /* @__PURE__ */ React.createElement(WorkflowRunsTable, { branch, entity }));\n};\n\nconst firstLine = (message) => message.split(\"\\n\")[0];\nconst RecentWorkflowRunsCard = (props) => {\n  var _a, _b;\n  const { branch, dense = false, limit = 5, variant } = props;\n  const { entity } = useEntity();\n  const errorApi = useApi(errorApiRef);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = ((_b = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]) != null ? _b : \"/\").split(\"/\");\n  const [{ runs = [], loading, error }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch,\n    initialPageSize: limit\n  });\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  const githubHost = hostname || \"github.com\";\n  const routeLink = useRouteRef(buildRouteRef);\n  if (error) {\n    return /* @__PURE__ */ React.createElement(ErrorPanel, { title: error.message, error });\n  }\n  return /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: \"Recent Workflow Runs\",\n      subheader: branch ? `Branch: ${branch}` : \"All Branches\",\n      noPadding: true,\n      variant\n    },\n    !runs.length ? /* @__PURE__ */ React.createElement(\"div\", { style: { textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"This component has GitHub Actions enabled, but no workflows were found.\"), /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\" }, /* @__PURE__ */ React.createElement(Link, { to: `https://${githubHost}/${owner}/${repo}/actions/new` }, \"Create a new workflow\"))) : /* @__PURE__ */ React.createElement(\n      Table$1,\n      {\n        isLoading: loading,\n        options: {\n          search: false,\n          paging: false,\n          padding: dense ? \"dense\" : \"default\",\n          toolbar: false\n        },\n        columns: [\n          {\n            title: \"Commit Message\",\n            field: \"message\",\n            render: (data) => {\n              var _a2;\n              return /* @__PURE__ */ React.createElement(Link, { component: Link$1, to: routeLink({ id: data.id }) }, firstLine((_a2 = data.message) != null ? _a2 : \"\"));\n            }\n          },\n          { title: \"Branch\", field: \"source.branchName\" },\n          { title: \"Status\", field: \"status\", render: WorkflowRunStatus }\n        ],\n        data: runs\n      }\n    )\n  );\n};\n\nexport { BuildStatus, EntityGithubActionsContent, EntityLatestGithubActionRunCard, EntityLatestGithubActionsForBranchCard, EntityRecentGithubActionsRunsCard, GITHUB_ACTIONS_ANNOTATION, GithubActionsClient, LatestWorkflowRunCard, LatestWorkflowsForBranchCard, RecentWorkflowRunsCard, Router, githubActionsApiRef, githubActionsPlugin, isGithubActionsAvailable, isGithubActionsAvailable as isPluginApplicableToEntity, githubActionsPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createExternalRouteRef, createPlugin, createComponentExtension, useApi, useApp, alertApiRef, useRouteRef, identityApiRef } from '@backstage/core-plugin-api';\nimport { stringifyEntityRef, DEFAULT_NAMESPACE, RELATION_PARENT_OF, RELATION_CHILD_OF, ANNOTATION_LOCATION, ANNOTATION_EDIT_URL, RELATION_MEMBER_OF, parseEntityRef, getCompoundEntityRef } from '@backstage/catalog-model';\nimport { getEntityRelations, useEntity, catalogApiRef, EntityRefLink, EntityRefLinks, humanizeEntityRef, entityRouteRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles, createStyles, Grid, Switch, Box, Typography, Divider, ListItem, ListItemIcon, ListItemText, IconButton, List, Tooltip, ListItemSecondaryAction } from '@material-ui/core';\nimport Pagination from '@material-ui/lab/Pagination';\nimport React, { useState, useCallback, useEffect } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { Progress, ResponseErrorPanel, InfoCard, Avatar, Link, OverflowTooltip, SidebarItem, SidebarSubmenu, SidebarSubmenuItem } from '@backstage/core-components';\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\nimport Alert from '@material-ui/lab/Alert';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport EditIcon from '@material-ui/icons/Edit';\nimport EmailIcon from '@material-ui/icons/Email';\nimport GroupIcon from '@material-ui/icons/Group';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport PersonIcon from '@material-ui/icons/Person';\nimport pluralize from 'pluralize';\nimport limiterFactory from 'p-limit';\nimport qs from 'qs';\nimport { uniq } from 'lodash';\n\nconst catalogIndexRouteRef = createExternalRouteRef({\n  id: \"catalog-index\"\n});\n\nconst orgPlugin = createPlugin({\n  id: \"org\",\n  externalRoutes: {\n    catalogIndex: catalogIndexRouteRef\n  }\n});\nconst EntityGroupProfileCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityGroupProfileCard\",\n    component: {\n      lazy: () => import('./esm/index-1921baab.esm.js').then((m) => m.GroupProfileCard)\n    }\n  })\n);\nconst EntityMembersListCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityMembersListCard\",\n    component: {\n      lazy: () => import('./esm/index-1921baab.esm.js').then((m) => m.MembersListCard)\n    }\n  })\n);\nconst EntityOwnershipCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityOwnershipCard\",\n    component: {\n      lazy: () => import('./esm/index-1921baab.esm.js').then((m) => m.OwnershipCard)\n    }\n  })\n);\nconst EntityUserProfileCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityUserProfileCard\",\n    component: {\n      lazy: () => import('./esm/index-1921baab.esm.js').then((m) => m.UserProfileCard)\n    }\n  })\n);\n\nconst getMembersFromGroups = async (groups, catalogApi) => {\n  const membersList = groups.length === 0 ? { items: [] } : await catalogApi.getEntities({\n    filter: {\n      kind: \"User\",\n      \"relations.memberof\": groups.map(\n        (group) => stringifyEntityRef({\n          kind: \"group\",\n          namespace: group.namespace.toLocaleLowerCase(\"en-US\"),\n          name: group.name.toLocaleLowerCase(\"en-US\")\n        })\n      )\n    }\n  });\n  return membersList.items;\n};\nconst getDescendantGroupsFromGroup = async (group, catalogApi) => {\n  var _a;\n  const alreadyQueuedOrExpandedGroupNames = /* @__PURE__ */ new Map();\n  const groupRef = {\n    kind: group.kind,\n    namespace: (_a = group.metadata.namespace) != null ? _a : DEFAULT_NAMESPACE,\n    name: group.metadata.name\n  };\n  const groupQueue = [groupRef];\n  const resultantGroupRefs = [];\n  while (groupQueue.length > 0) {\n    const activeGroupRef = groupQueue.shift();\n    const activeGroup = await catalogApi.getEntityByRef(activeGroupRef);\n    alreadyQueuedOrExpandedGroupNames.set(\n      stringifyEntityRef(activeGroupRef),\n      true\n    );\n    const childGroups = getEntityRelations(activeGroup, RELATION_PARENT_OF, {\n      kind: \"Group\"\n    }).filter(\n      (currentGroup) => !alreadyQueuedOrExpandedGroupNames.has(\n        stringifyEntityRef(currentGroup)\n      )\n    );\n    childGroups.forEach(\n      (childGroup) => alreadyQueuedOrExpandedGroupNames.set(\n        stringifyEntityRef(childGroup),\n        true\n      )\n    );\n    groupQueue.push(...childGroups);\n    resultantGroupRefs.push(...childGroups);\n  }\n  return resultantGroupRefs;\n};\nconst getAllDesendantMembersForGroupEntity = async (groupEntity, catalogApi) => getMembersFromGroups(\n  await getDescendantGroupsFromGroup(groupEntity, catalogApi),\n  catalogApi\n);\nconst removeDuplicateEntitiesFrom = (entityArray) => {\n  const seenEntities = /* @__PURE__ */ new Map();\n  return entityArray.filter((entity) => {\n    const stringifiedEntity = stringifyEntityRef(entity);\n    const isDuplicate = seenEntities.has(stringifiedEntity);\n    seenEntities.set(stringifiedEntity, true);\n    return !isDuplicate;\n  });\n};\n\nconst useStyles$2 = makeStyles(\n  (theme) => createStyles({\n    card: {\n      border: `1px solid ${theme.palette.divider}`,\n      boxShadow: theme.shadows[2],\n      borderRadius: \"4px\",\n      overflow: \"visible\",\n      position: \"relative\",\n      margin: theme.spacing(4, 1, 1),\n      flex: \"1\",\n      minWidth: \"0px\"\n    }\n  })\n);\nconst MemberComponent = (props) => {\n  var _a;\n  const classes = useStyles$2();\n  const {\n    metadata: { name: metaName, description },\n    spec: { profile }\n  } = props.member;\n  const displayName = (_a = profile == null ? void 0 : profile.displayName) != null ? _a : metaName;\n  return /* @__PURE__ */ React.createElement(Grid, { item: true, container: true, xs: 12, sm: 6, md: 4, xl: 2 }, /* @__PURE__ */ React.createElement(Box, { className: classes.card }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      display: \"flex\",\n      flexDirection: \"column\",\n      m: 3,\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    /* @__PURE__ */ React.createElement(\n      Avatar,\n      {\n        displayName,\n        picture: profile == null ? void 0 : profile.picture,\n        customStyles: {\n          position: \"absolute\",\n          top: \"-2rem\"\n        }\n      }\n    ),\n    /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        pt: 2,\n        sx: {\n          width: \"100%\"\n        },\n        textAlign: \"center\"\n      },\n      /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, /* @__PURE__ */ React.createElement(\n        EntityRefLink,\n        {\n          \"data-testid\": \"user-link\",\n          entityRef: props.member,\n          title: displayName\n        }\n      )),\n      (profile == null ? void 0 : profile.email) && /* @__PURE__ */ React.createElement(Link, { to: `mailto:${profile.email}` }, /* @__PURE__ */ React.createElement(OverflowTooltip, { text: profile.email })),\n      description && /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\" }, description)\n    )\n  )));\n};\nconst MembersListCard = (props) => {\n  var _a;\n  const {\n    memberDisplayTitle = \"Members\",\n    pageSize = 50,\n    showAggregateMembersToggle\n  } = props;\n  const { entity: groupEntity } = useEntity();\n  const {\n    metadata: { name: groupName, namespace: grpNamespace },\n    spec: { profile }\n  } = groupEntity;\n  const catalogApi = useApi(catalogApiRef);\n  const displayName = (_a = profile == null ? void 0 : profile.displayName) != null ? _a : groupName;\n  const groupNamespace = grpNamespace || DEFAULT_NAMESPACE;\n  const [page, setPage] = React.useState(1);\n  const pageChange = (_, pageIndex) => {\n    setPage(pageIndex);\n  };\n  const [showAggregateMembers, setShowAggregateMembers] = useState(false);\n  const { loading: loadingDescendantMembers, value: descendantMembers } = useAsync(async () => {\n    if (!showAggregateMembersToggle) {\n      return [];\n    }\n    return await getAllDesendantMembersForGroupEntity(\n      groupEntity,\n      catalogApi\n    );\n  }, [catalogApi, groupEntity, showAggregateMembersToggle]);\n  const {\n    loading,\n    error,\n    value: directMembers\n  } = useAsync(async () => {\n    const membersList = await catalogApi.getEntities({\n      filter: {\n        kind: \"User\",\n        \"relations.memberof\": [\n          stringifyEntityRef({\n            kind: \"group\",\n            namespace: groupNamespace.toLocaleLowerCase(\"en-US\"),\n            name: groupName.toLocaleLowerCase(\"en-US\")\n          })\n        ]\n      }\n    });\n    return membersList.items;\n  }, [catalogApi, groupEntity]);\n  const members = removeDuplicateEntitiesFrom(\n    [\n      ...directMembers != null ? directMembers : [],\n      ...descendantMembers && showAggregateMembers ? descendantMembers : []\n    ].sort(\n      (a, b) => stringifyEntityRef(a).localeCompare(stringifyEntityRef(b))\n    )\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error });\n  }\n  const nbPages = Math.ceil(((members == null ? void 0 : members.length) || 0) / pageSize);\n  const paginationLabel = nbPages < 2 ? \"\" : `, page ${page} of ${nbPages}`;\n  const pagination = /* @__PURE__ */ React.createElement(\n    Pagination,\n    {\n      count: nbPages,\n      page,\n      onChange: pageChange,\n      showFirstButton: true,\n      showLastButton: true\n    }\n  );\n  return /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: `${memberDisplayTitle} (${(members == null ? void 0 : members.length) || 0}${paginationLabel})`,\n      subheader: `of ${displayName}`,\n      ...nbPages <= 1 ? {} : { actions: pagination }\n    },\n    showAggregateMembersToggle && /* @__PURE__ */ React.createElement(React.Fragment, null, \"Direct Members\", /* @__PURE__ */ React.createElement(\n      Switch,\n      {\n        color: \"primary\",\n        checked: showAggregateMembers,\n        onChange: () => {\n          setShowAggregateMembers(!showAggregateMembers);\n        },\n        inputProps: { \"aria-label\": \"Users Type Switch\" }\n      }\n    ), \"Aggregated Members\"),\n    showAggregateMembers && loadingDescendantMembers ? /* @__PURE__ */ React.createElement(Progress, null) : /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 3 }, members && members.length > 0 ? members.slice(pageSize * (page - 1), pageSize * page).map((member) => /* @__PURE__ */ React.createElement(MemberComponent, { member, key: member.metadata.uid })) : /* @__PURE__ */ React.createElement(Box, { p: 2 }, /* @__PURE__ */ React.createElement(Typography, null, \"This group has no \", memberDisplayTitle.toLocaleLowerCase(), \".\")))\n  ));\n};\n\nconst WebLink = ({\n  href,\n  Icon,\n  text\n}) => /* @__PURE__ */ React.createElement(ListItem, { key: href }, /* @__PURE__ */ React.createElement(ListItemIcon, null, Icon ? /* @__PURE__ */ React.createElement(Icon, null) : /* @__PURE__ */ React.createElement(LanguageIcon, null)), /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(Link, { to: href }, text)));\nconst LinksGroup = ({ links }) => {\n  const app = useApp();\n  const iconResolver = (key) => {\n    var _a;\n    return key ? (_a = app.getSystemIcon(key)) != null ? _a : LanguageIcon : LanguageIcon;\n  };\n  if (links === void 0) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Divider, null), links.map((link) => {\n    return /* @__PURE__ */ React.createElement(\n      WebLink,\n      {\n        key: link.url,\n        href: link.url,\n        text: link.title,\n        Icon: iconResolver(link.icon)\n      }\n    );\n  }));\n};\n\nconst CardTitle$1 = (props) => /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(GroupIcon, { fontSize: \"inherit\" }), /* @__PURE__ */ React.createElement(Box, { ml: 1 }, props.title));\nconst GroupProfileCard = (props) => {\n  var _a, _b, _c;\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const { entity: group } = useEntity();\n  const refreshEntity = useCallback(async () => {\n    await catalogApi.refreshEntity(stringifyEntityRef(group));\n    alertApi.post({\n      message: \"Refresh scheduled\",\n      severity: \"info\",\n      display: \"transient\"\n    });\n  }, [catalogApi, alertApi, group]);\n  if (!group) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, \"Group not found\");\n  }\n  const {\n    metadata: { name, description, title, annotations, links },\n    spec: { profile }\n  } = group;\n  const childRelations = getEntityRelations(group, RELATION_PARENT_OF, {\n    kind: \"Group\"\n  });\n  const parentRelations = getEntityRelations(group, RELATION_CHILD_OF, {\n    kind: \"group\"\n  });\n  const entityLocation = annotations == null ? void 0 : annotations[ANNOTATION_LOCATION];\n  const allowRefresh = (entityLocation == null ? void 0 : entityLocation.startsWith(\"url:\")) || (entityLocation == null ? void 0 : entityLocation.startsWith(\"file:\"));\n  const entityMetadataEditUrl = (_a = group.metadata.annotations) == null ? void 0 : _a[ANNOTATION_EDIT_URL];\n  const displayName = (_c = (_b = profile == null ? void 0 : profile.displayName) != null ? _b : title) != null ? _c : name;\n  const emailHref = (profile == null ? void 0 : profile.email) ? `mailto:${profile.email}` : \"#\";\n  const infoCardAction = entityMetadataEditUrl ? /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"aria-label\": \"Edit\",\n      title: \"Edit Metadata\",\n      component: Link,\n      to: entityMetadataEditUrl\n    },\n    /* @__PURE__ */ React.createElement(EditIcon, null)\n  ) : /* @__PURE__ */ React.createElement(IconButton, { \"aria-label\": \"Edit\", disabled: true, title: \"Edit Metadata\" }, /* @__PURE__ */ React.createElement(EditIcon, null));\n  return /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: /* @__PURE__ */ React.createElement(CardTitle$1, { title: displayName }),\n      subheader: description,\n      variant: props.variant,\n      action: /* @__PURE__ */ React.createElement(React.Fragment, null, allowRefresh && /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          \"aria-label\": \"Refresh\",\n          title: \"Schedule entity refresh\",\n          onClick: refreshEntity\n        },\n        /* @__PURE__ */ React.createElement(CachedIcon, null)\n      ), infoCardAction)\n    },\n    /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 3 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: 2, xl: 1 }, /* @__PURE__ */ React.createElement(Avatar, { displayName, picture: profile == null ? void 0 : profile.picture })), /* @__PURE__ */ React.createElement(Grid, { item: true, md: 10, xl: 11 }, /* @__PURE__ */ React.createElement(List, null, (profile == null ? void 0 : profile.email) && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Email\" }, /* @__PURE__ */ React.createElement(EmailIcon, null))), /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        primary: /* @__PURE__ */ React.createElement(Link, { to: emailHref }, profile.email),\n        secondary: \"Email\"\n      }\n    )), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Parent Group\" }, /* @__PURE__ */ React.createElement(AccountTreeIcon, null))), /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        primary: parentRelations.length ? /* @__PURE__ */ React.createElement(\n          EntityRefLinks,\n          {\n            entityRefs: parentRelations,\n            defaultKind: \"Group\"\n          }\n        ) : \"N/A\",\n        secondary: \"Parent Group\"\n      }\n    )), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Child Groups\" }, /* @__PURE__ */ React.createElement(GroupIcon, null))), /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        primary: childRelations.length ? /* @__PURE__ */ React.createElement(\n          EntityRefLinks,\n          {\n            entityRefs: childRelations,\n            defaultKind: \"Group\"\n          }\n        ) : \"N/A\",\n        secondary: \"Child Groups\"\n      }\n    )), (props == null ? void 0 : props.showLinks) && /* @__PURE__ */ React.createElement(LinksGroup, { links }))))\n  );\n};\n\nconst CardTitle = (props) => props.title ? /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(PersonIcon, { fontSize: \"inherit\" }), /* @__PURE__ */ React.createElement(Box, { ml: 1 }, props.title)) : null;\nconst UserProfileCard = (props) => {\n  var _a, _b;\n  const { entity: user } = useEntity();\n  if (!user) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, \"User not found\");\n  }\n  const entityMetadataEditUrl = (_a = user.metadata.annotations) == null ? void 0 : _a[ANNOTATION_EDIT_URL];\n  const {\n    metadata: { name: metaName, description, links },\n    spec: { profile }\n  } = user;\n  const displayName = (_b = profile == null ? void 0 : profile.displayName) != null ? _b : metaName;\n  const emailHref = (profile == null ? void 0 : profile.email) ? `mailto:${profile.email}` : void 0;\n  const memberOfRelations = getEntityRelations(user, RELATION_MEMBER_OF, {\n    kind: \"Group\"\n  });\n  return /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: /* @__PURE__ */ React.createElement(CardTitle, { title: displayName }),\n      subheader: description,\n      variant: props.variant,\n      action: /* @__PURE__ */ React.createElement(React.Fragment, null, entityMetadataEditUrl && /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          \"aria-label\": \"Edit\",\n          title: \"Edit Metadata\",\n          component: Link,\n          to: entityMetadataEditUrl\n        },\n        /* @__PURE__ */ React.createElement(EditIcon, null)\n      ))\n    },\n    /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 3, alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: 2, xl: 1 }, /* @__PURE__ */ React.createElement(Avatar, { displayName, picture: profile == null ? void 0 : profile.picture })), /* @__PURE__ */ React.createElement(Grid, { item: true, md: 10, xl: 11 }, /* @__PURE__ */ React.createElement(List, null, (profile == null ? void 0 : profile.email) && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Email\" }, /* @__PURE__ */ React.createElement(EmailIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(Link, { to: emailHref != null ? emailHref : \"\" }, profile.email))), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Member of\" }, /* @__PURE__ */ React.createElement(GroupIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(\n      EntityRefLinks,\n      {\n        entityRefs: memberOfRelations,\n        defaultKind: \"Group\"\n      }\n    ))), (props == null ? void 0 : props.showLinks) && /* @__PURE__ */ React.createElement(LinksGroup, { links }))))\n  );\n};\n\nconst limiter = limiterFactory(10);\nconst getQueryParams = (ownersEntityRef, selectedEntity) => {\n  const { kind, type } = selectedEntity;\n  const owners = ownersEntityRef.map(\n    (owner) => humanizeEntityRef(parseEntityRef(owner), { defaultKind: \"group\" })\n  );\n  const filters = {\n    kind: kind.toLocaleLowerCase(\"en-US\"),\n    type,\n    owners,\n    user: \"all\"\n  };\n  return qs.stringify({ filters }, { arrayFormat: \"repeat\" });\n};\nconst getMemberOfEntityRefs = (owner) => {\n  const parentGroups = getEntityRelations(owner, RELATION_MEMBER_OF, {\n    kind: \"Group\"\n  });\n  const ownerGroupsNames = parentGroups.map(\n    ({ kind, namespace, name }) => stringifyEntityRef({\n      kind,\n      namespace,\n      name\n    })\n  );\n  return [...ownerGroupsNames, stringifyEntityRef(owner)];\n};\nconst isEntity = (entity) => entity !== void 0;\nconst getChildOwnershipEntityRefs = async (entity, catalogApi, alreadyRetrievedParentRefs = []) => {\n  const childGroups = getEntityRelations(entity, RELATION_PARENT_OF, {\n    kind: \"Group\"\n  });\n  const hasChildGroups = childGroups.length > 0;\n  const entityRef = stringifyEntityRef(entity);\n  if (hasChildGroups) {\n    const entityRefs = childGroups.map((r) => stringifyEntityRef(r));\n    const childGroupResponse = await catalogApi.getEntitiesByRefs({\n      fields: [\"kind\", \"metadata.namespace\", \"metadata.name\", \"relations\"],\n      entityRefs\n    });\n    const childGroupEntities = childGroupResponse.items.filter(isEntity);\n    const unknownChildren = childGroupEntities.filter(\n      (childGroupEntity) => !alreadyRetrievedParentRefs.includes(\n        stringifyEntityRef(childGroupEntity)\n      )\n    );\n    const childrenRefs = (await Promise.all(\n      unknownChildren.map(\n        (childGroupEntity) => limiter(\n          () => getChildOwnershipEntityRefs(childGroupEntity, catalogApi, [\n            ...alreadyRetrievedParentRefs,\n            entityRef\n          ])\n        )\n      )\n    )).flatMap((aggregated) => aggregated);\n    return uniq([...childrenRefs, entityRef]);\n  }\n  return [entityRef];\n};\nconst getOwners = async (entity, relations, catalogApi) => {\n  const isGroup = entity.kind === \"Group\";\n  const isAggregated = relations === \"aggregated\";\n  const isUserEntity = entity.kind === \"User\";\n  if (isAggregated && isGroup) {\n    return getChildOwnershipEntityRefs(entity, catalogApi);\n  }\n  if (isAggregated && isUserEntity) {\n    return getMemberOfEntityRefs(entity);\n  }\n  return [stringifyEntityRef(entity)];\n};\nconst getOwnedEntitiesByOwners = (owners, kinds, catalogApi) => catalogApi.getEntities({\n  filter: [\n    {\n      kind: kinds,\n      \"relations.ownedBy\": owners\n    }\n  ],\n  fields: [\n    \"kind\",\n    \"metadata.name\",\n    \"metadata.namespace\",\n    \"spec.type\",\n    \"relations\"\n  ]\n});\nfunction useGetEntities(entity, relations, entityFilterKind, entityLimit = 6) {\n  const catalogApi = useApi(catalogApiRef);\n  const kinds = entityFilterKind != null ? entityFilterKind : [\"Component\", \"API\", \"System\"];\n  const {\n    loading,\n    error,\n    value: componentsWithCounters\n  } = useAsync(async () => {\n    const owners = await getOwners(entity, relations, catalogApi);\n    const ownedEntitiesList = await getOwnedEntitiesByOwners(\n      owners,\n      kinds,\n      catalogApi\n    );\n    const counts = ownedEntitiesList.items.reduce(\n      (acc, ownedEntity) => {\n        var _a, _b;\n        const match = acc.find(\n          (x) => {\n            var _a2;\n            return x.kind === ownedEntity.kind && x.type === ((_a2 = ownedEntity.spec) == null ? void 0 : _a2.type);\n          }\n        );\n        if (match) {\n          match.count += 1;\n        } else {\n          acc.push({\n            kind: ownedEntity.kind,\n            type: (_b = (_a = ownedEntity.spec) == null ? void 0 : _a.type) == null ? void 0 : _b.toString(),\n            count: 1\n          });\n        }\n        return acc;\n      },\n      []\n    );\n    const topN = counts.sort((a, b) => b.count - a.count).slice(0, entityLimit);\n    return topN.map((topOwnedEntity) => ({\n      counter: topOwnedEntity.count,\n      type: topOwnedEntity.type,\n      kind: topOwnedEntity.kind,\n      queryParams: getQueryParams(owners, topOwnedEntity)\n    }));\n  }, [catalogApi, entity, relations]);\n  return {\n    componentsWithCounters,\n    loading,\n    error\n  };\n}\n\nconst useStyles$1 = makeStyles(\n  (theme) => createStyles({\n    card: {\n      border: `1px solid ${theme.palette.divider}`,\n      boxShadow: theme.shadows[2],\n      borderRadius: \"4px\",\n      padding: theme.spacing(2),\n      transition: `${theme.transitions.duration.standard}ms`,\n      \"&:hover\": {\n        boxShadow: theme.shadows[4]\n      },\n      height: \"100%\"\n    },\n    bold: {\n      fontWeight: theme.typography.fontWeightBold\n    },\n    smallFont: {\n      fontSize: theme.typography.body2.fontSize\n    },\n    entityTypeBox: {\n      background: (props) => theme.getPageTheme({ themeId: props.type }).backgroundImage,\n      color: (props) => theme.getPageTheme({ themeId: props.type }).fontColor\n    }\n  })\n);\nconst EntityCountTile = ({\n  counter,\n  type,\n  kind,\n  url\n}) => {\n  const classes = useStyles$1({ type: type != null ? type : kind });\n  const rawTitle = type != null ? type : kind;\n  const isLongText = rawTitle.length > 10;\n  return /* @__PURE__ */ React.createElement(Link, { to: url, variant: \"body2\" }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: `${classes.card} ${classes.entityTypeBox}`,\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\"\n    },\n    /* @__PURE__ */ React.createElement(Typography, { className: classes.bold, variant: \"h6\" }, counter),\n    /* @__PURE__ */ React.createElement(Box, { sx: { width: \"100%\", textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        className: `${classes.bold} ${isLongText && classes.smallFont}`,\n        variant: \"h6\"\n      },\n      /* @__PURE__ */ React.createElement(\n        OverflowTooltip,\n        {\n          text: pluralize(rawTitle.toLocaleUpperCase(\"en-US\"), counter)\n        }\n      )\n    )),\n    type && /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\" }, kind)\n  ));\n};\nconst ComponentsGrid = ({\n  entity,\n  relationsType,\n  entityFilterKind,\n  entityLimit = 6\n}) => {\n  const catalogLink = useRouteRef(catalogIndexRouteRef);\n  const { componentsWithCounters, loading, error } = useGetEntities(\n    entity,\n    relationsType,\n    entityFilterKind,\n    entityLimit\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error });\n  }\n  return /* @__PURE__ */ React.createElement(Grid, { container: true }, componentsWithCounters == null ? void 0 : componentsWithCounters.map((c) => {\n    var _a;\n    return /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 6, md: 6, lg: 4, key: (_a = c.type) != null ? _a : c.kind }, /* @__PURE__ */ React.createElement(\n      EntityCountTile,\n      {\n        counter: c.counter,\n        kind: c.kind,\n        type: c.type,\n        url: `${catalogLink()}/?${c.queryParams}`\n      }\n    ));\n  }));\n};\n\nconst useStyles = makeStyles((theme) => ({\n  list: {\n    [theme.breakpoints.down(\"xs\")]: {\n      padding: `0 0 12px`\n    }\n  },\n  listItemText: {\n    [theme.breakpoints.down(\"xs\")]: {\n      paddingRight: 0,\n      paddingLeft: 0\n    }\n  },\n  listItemSecondaryAction: {\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100%\",\n      top: \"auto\",\n      right: \"auto\",\n      position: \"relative\",\n      transform: \"unset\"\n    }\n  }\n}));\nconst OwnershipCard = (props) => {\n  const {\n    variant,\n    entityFilterKind,\n    hideRelationsToggle,\n    relationsType,\n    entityLimit = 6\n  } = props;\n  const relationsToggle = hideRelationsToggle === void 0 ? false : hideRelationsToggle;\n  const classes = useStyles();\n  const { entity } = useEntity();\n  const defaultRelationsType = entity.kind === \"User\" ? \"aggregated\" : \"direct\";\n  const [getRelationsType, setRelationsType] = useState(\n    relationsType != null ? relationsType : defaultRelationsType\n  );\n  useEffect(() => {\n    if (!relationsType) {\n      setRelationsType(defaultRelationsType);\n    }\n  }, [setRelationsType, defaultRelationsType, relationsType]);\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: \"Ownership\", variant }, !relationsToggle && /* @__PURE__ */ React.createElement(List, { dense: true }, /* @__PURE__ */ React.createElement(ListItem, { className: classes.list }, /* @__PURE__ */ React.createElement(ListItemText, { className: classes.listItemText }), /* @__PURE__ */ React.createElement(\n    ListItemSecondaryAction,\n    {\n      className: classes.listItemSecondaryAction\n    },\n    \"Direct Relations\",\n    /* @__PURE__ */ React.createElement(\n      Tooltip,\n      {\n        placement: \"top\",\n        arrow: true,\n        title: `${getRelationsType === \"direct\" ? \"Direct\" : \"Aggregated\"} Relations`\n      },\n      /* @__PURE__ */ React.createElement(\n        Switch,\n        {\n          color: \"primary\",\n          checked: getRelationsType !== \"direct\",\n          onChange: () => {\n            const updatedRelationsType = getRelationsType === \"direct\" ? \"aggregated\" : \"direct\";\n            setRelationsType(updatedRelationsType);\n          },\n          name: \"pin\",\n          inputProps: { \"aria-label\": \"Ownership Type Switch\" }\n        }\n      )\n    ),\n    \"Aggregated Relations\"\n  ))), /* @__PURE__ */ React.createElement(\n    ComponentsGrid,\n    {\n      entity,\n      entityLimit,\n      relationsType: getRelationsType,\n      entityFilterKind\n    }\n  ));\n};\n\nconst MyGroupsSidebarItem = (props) => {\n  const { singularTitle, pluralTitle, icon, filter } = props;\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n  const { value: groups } = useAsync(async () => {\n    const profile = await identityApi.getBackstageIdentity();\n    const response = await catalogApi.getEntities({\n      filter: [\n        {\n          kind: \"group\",\n          \"relations.hasMember\": profile.userEntityRef,\n          ...filter != null ? filter : {}\n        }\n      ],\n      fields: [\"metadata\", \"kind\"]\n    });\n    return response.items;\n  }, []);\n  if (!(groups == null ? void 0 : groups.length)) {\n    return null;\n  }\n  if (groups.length === 1) {\n    const group = groups[0];\n    return /* @__PURE__ */ React.createElement(\n      SidebarItem,\n      {\n        text: singularTitle,\n        to: catalogEntityRoute(getCompoundEntityRef(group)),\n        icon\n      }\n    );\n  }\n  return /* @__PURE__ */ React.createElement(SidebarItem, { icon, text: pluralTitle }, /* @__PURE__ */ React.createElement(SidebarSubmenu, { title: pluralTitle }, groups == null ? void 0 : groups.map(function groupsMap(group) {\n    return /* @__PURE__ */ React.createElement(\n      SidebarSubmenuItem,\n      {\n        title: group.metadata.title || group.metadata.name,\n        subtitle: group.metadata.namespace !== DEFAULT_NAMESPACE ? group.metadata.namespace : void 0,\n        to: catalogEntityRoute(getCompoundEntityRef(group)),\n        icon,\n        key: stringifyEntityRef(group)\n      }\n    );\n  })));\n};\n\nexport { EntityGroupProfileCard, EntityMembersListCard, EntityOwnershipCard, EntityUserProfileCard, GroupProfileCard, MembersListCard, MyGroupsSidebarItem, OwnershipCard, UserProfileCard, orgPlugin, orgPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { ResponseError } from '@backstage/errors';\nimport fetch from 'cross-fetch';\nimport * as uuid from 'uuid';\nimport { z } from 'zod';\n\nvar AuthorizeResult = /* @__PURE__ */ ((AuthorizeResult2) => {\n  AuthorizeResult2[\"DENY\"] = \"DENY\";\n  AuthorizeResult2[\"ALLOW\"] = \"ALLOW\";\n  AuthorizeResult2[\"CONDITIONAL\"] = \"CONDITIONAL\";\n  return AuthorizeResult2;\n})(AuthorizeResult || {});\n\nfunction isPermission(permission, comparedPermission) {\n  return permission.name === comparedPermission.name;\n}\nfunction isResourcePermission(permission, resourceType) {\n  if (!(\"resourceType\" in permission)) {\n    return false;\n  }\n  return !resourceType || permission.resourceType === resourceType;\n}\nfunction isCreatePermission(permission) {\n  return permission.attributes.action === \"create\";\n}\nfunction isReadPermission(permission) {\n  return permission.attributes.action === \"read\";\n}\nfunction isUpdatePermission(permission) {\n  return permission.attributes.action === \"update\";\n}\nfunction isDeletePermission(permission) {\n  return permission.attributes.action === \"delete\";\n}\nfunction toPermissionEvaluator(permissionAuthorizer) {\n  return {\n    authorize: async (requests, options) => {\n      const response = await permissionAuthorizer.authorize(requests, options);\n      return response;\n    },\n    authorizeConditional(requests, options) {\n      const parsedRequests = requests;\n      return permissionAuthorizer.authorize(parsedRequests, options);\n    }\n  };\n}\n\nfunction createPermission({\n  name,\n  attributes,\n  resourceType\n}) {\n  if (resourceType) {\n    return {\n      type: \"resource\",\n      name,\n      attributes,\n      resourceType\n    };\n  }\n  return {\n    type: \"basic\",\n    name,\n    attributes\n  };\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst permissionCriteriaSchema = z.lazy(\n  () => z.object({\n    rule: z.string(),\n    resourceType: z.string(),\n    params: z.record(z.any()).optional()\n  }).or(z.object({ anyOf: z.array(permissionCriteriaSchema).nonempty() })).or(z.object({ allOf: z.array(permissionCriteriaSchema).nonempty() })).or(z.object({ not: permissionCriteriaSchema }))\n);\nconst authorizePermissionResponseSchema = z.object({\n  result: z.literal(AuthorizeResult.ALLOW).or(z.literal(AuthorizeResult.DENY))\n});\nconst queryPermissionResponseSchema = z.union([\n  z.object({\n    result: z.literal(AuthorizeResult.ALLOW).or(z.literal(AuthorizeResult.DENY))\n  }),\n  z.object({\n    result: z.literal(AuthorizeResult.CONDITIONAL),\n    pluginId: z.string(),\n    resourceType: z.string(),\n    conditions: permissionCriteriaSchema\n  })\n]);\nconst responseSchema = (itemSchema, ids) => z.object({\n  items: z.array(\n    z.intersection(\n      z.object({\n        id: z.string()\n      }),\n      itemSchema\n    )\n  ).refine(\n    (items) => items.length === ids.size && items.every(({ id }) => ids.has(id)),\n    {\n      message: \"Items in response do not match request\"\n    }\n  )\n});\nclass PermissionClient {\n  constructor(options) {\n    __publicField(this, \"enabled\");\n    __publicField(this, \"discovery\");\n    var _a;\n    this.discovery = options.discovery;\n    this.enabled = (_a = options.config.getOptionalBoolean(\"permission.enabled\")) != null ? _a : false;\n  }\n  /**\n   * {@inheritdoc PermissionEvaluator.authorize}\n   */\n  async authorize(requests, options) {\n    return this.makeRequest(\n      requests,\n      authorizePermissionResponseSchema,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc PermissionEvaluator.authorizeConditional}\n   */\n  async authorizeConditional(queries, options) {\n    return this.makeRequest(queries, queryPermissionResponseSchema, options);\n  }\n  async makeRequest(queries, itemSchema, options) {\n    if (!this.enabled) {\n      return queries.map((_) => ({ result: AuthorizeResult.ALLOW }));\n    }\n    const request = {\n      items: queries.map((query) => ({\n        id: uuid.v4(),\n        ...query\n      }))\n    };\n    const permissionApi = await this.discovery.getBaseUrl(\"permission\");\n    const response = await fetch(`${permissionApi}/authorize`, {\n      method: \"POST\",\n      body: JSON.stringify(request),\n      headers: {\n        ...this.getAuthorizationHeader(options == null ? void 0 : options.token),\n        \"content-type\": \"application/json\"\n      }\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const responseBody = await response.json();\n    const parsedResponse = responseSchema(\n      itemSchema,\n      new Set(request.items.map(({ id }) => id))\n    ).parse(responseBody);\n    const responsesById = parsedResponse.items.reduce((acc, r) => {\n      acc[r.id] = r;\n      return acc;\n    }, {});\n    return request.items.map((query) => responsesById[query.id]);\n  }\n  getAuthorizationHeader(token) {\n    return token ? { Authorization: `Bearer ${token}` } : {};\n  }\n}\n\nexport { AuthorizeResult, PermissionClient, createPermission, isCreatePermission, isDeletePermission, isPermission, isReadPermission, isResourcePermission, isUpdatePermission, toPermissionEvaluator };\n//# sourceMappingURL=index.esm.js.map\n","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport { createApiRef, useApi, useApp } from '@backstage/core-plugin-api';\nimport { PermissionClient, isResourcePermission, AuthorizeResult } from '@backstage/plugin-permission-common';\nimport useSWR from 'swr';\n\nconst permissionApiRef = createApiRef({\n  id: \"plugin.permission.api\"\n});\n\nclass IdentityPermissionApi {\n  constructor(permissionClient, identityApi) {\n    this.permissionClient = permissionClient;\n    this.identityApi = identityApi;\n  }\n  static create(options) {\n    const { config, discovery, identity } = options;\n    const permissionClient = new PermissionClient({ discovery, config });\n    return new IdentityPermissionApi(permissionClient, identity);\n  }\n  async authorize(request) {\n    const response = await this.permissionClient.authorize(\n      [request],\n      await this.identityApi.getCredentials()\n    );\n    return response[0];\n  }\n}\n\nfunction usePermission(input) {\n  const permissionApi = useApi(permissionApiRef);\n  const { data, error } = useSWR(input, async (args) => {\n    if (isResourcePermission(args.permission) && !args.resourceRef) {\n      return AuthorizeResult.DENY;\n    }\n    const { result } = await permissionApi.authorize(args);\n    return result;\n  });\n  if (error) {\n    return { error, loading: false, allowed: false };\n  }\n  if (data === void 0) {\n    return { loading: true, allowed: false };\n  }\n  return { loading: false, allowed: data === AuthorizeResult.ALLOW };\n}\n\nconst PermissionedRoute = (props) => {\n  const { permission, resourceRef, errorComponent, ...otherProps } = props;\n  const permissionResult = usePermission(\n    isResourcePermission(permission) ? { permission, resourceRef } : { permission }\n  );\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  let shownElement = errorComponent === void 0 ? /* @__PURE__ */ React.createElement(NotFoundErrorPage, null) : errorComponent;\n  if (permissionResult.loading) {\n    shownElement = null;\n  } else if (permissionResult.allowed) {\n    shownElement = props.element;\n  }\n  return /* @__PURE__ */ React.createElement(Route, { ...otherProps, element: shownElement });\n};\n\nfunction RequirePermission(props) {\n  const { permission, resourceRef } = props;\n  const permissionResult = usePermission(\n    isResourcePermission(permission) ? { permission, resourceRef } : { permission }\n  );\n  const app = useApp();\n  if (permissionResult.loading) {\n    return null;\n  } else if (permissionResult.allowed) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, props.children);\n  }\n  if (props.errorPage) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, props.errorPage);\n  }\n  const { NotFoundErrorPage } = app.getComponents();\n  return /* @__PURE__ */ React.createElement(NotFoundErrorPage, null);\n}\n\nexport { IdentityPermissionApi, PermissionedRoute, RequirePermission, permissionApiRef, usePermission };\n//# sourceMappingURL=index.esm.js.map\n","import { entityKindSchemaValidator } from '@backstage/catalog-model';\n\nvar $schema = \"http://json-schema.org/draft-07/schema\";\nvar $id = \"TemplateV1beta3\";\nvar description = \"A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.\";\nvar examples = [\n\t{\n\t\tapiVersion: \"scaffolder.backstage.io/v1beta3\",\n\t\tkind: \"Template\",\n\t\tmetadata: {\n\t\t\tname: \"react-ssr-template\",\n\t\t\ttitle: \"React SSR Template\",\n\t\t\tdescription: \"Next.js application skeleton for creating isomorphic web applications.\",\n\t\t\ttags: [\n\t\t\t\t\"recommended\",\n\t\t\t\t\"react\"\n\t\t\t]\n\t\t},\n\t\tspec: {\n\t\t\towner: \"artist-relations-team\",\n\t\t\ttype: \"website\",\n\t\t\tparameters: {\n\t\t\t\trequired: [\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"description\",\n\t\t\t\t\t\"repoUrl\"\n\t\t\t\t],\n\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\ttags: [\n\t\t\t\t\t\t\"one\",\n\t\t\t\t\t\t\"two\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tproperties: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttitle: \"Name\",\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Unique name of the component\"\n\t\t\t\t\t},\n\t\t\t\t\tdescription: {\n\t\t\t\t\t\ttitle: \"Description\",\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Description of the component\"\n\t\t\t\t\t},\n\t\t\t\t\trepoUrl: {\n\t\t\t\t\t\ttitle: \"Pick a repository\",\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\"ui:field\": \"RepoUrlPicker\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tsteps: [\n\t\t\t\t{\n\t\t\t\t\tid: \"fetch\",\n\t\t\t\t\tname: \"Fetch\",\n\t\t\t\t\taction: \"fetch:plain\",\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\turl: \"./template\"\n\t\t\t\t\t},\n\t\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\t\ttags: [\n\t\t\t\t\t\t\t\"one\",\n\t\t\t\t\t\t\t\"two\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"publish\",\n\t\t\t\t\tname: \"Publish to GitHub\",\n\t\t\t\t\taction: \"publish:github\",\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\trepoUrl: \"${{ parameters.repoUrl }}\"\n\t\t\t\t\t},\n\t\t\t\t\t\"if\": \"${{ parameters.repoUrl }}\"\n\t\t\t\t}\n\t\t\t],\n\t\t\toutput: {\n\t\t\t\tcatalogInfoUrl: \"${{ steps.publish.output.catalogInfoUrl }}\"\n\t\t\t}\n\t\t}\n\t}\n];\nvar allOf = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"scaffolder.backstage.io/v1beta3\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Template\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"steps\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"service\",\n\t\t\t\t\t\t\t\"website\",\n\t\t\t\t\t\t\t\"library\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The user (or group) owner of the template\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\toneOf: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tdescription: \"The JSONSchema describing the inputs for the template.\",\n\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"Object used for authorizing the parameter\",\n\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\ttags: {\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"string\"\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\tdescription: \"A list of separate forms to collect parameters.\",\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tdescription: \"The JSONSchema describing the inputs for the template.\",\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Object used for authorizing the parameter\",\n\t\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\t\ttags: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"string\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\tsteps: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"A list of steps to execute.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tdescription: \"A description of the step to execute.\",\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"action\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"The ID of the step, which can be used to refer to its outputs.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"The name of the step, which will be displayed in the UI during the scaffolding process.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"The name of the action to execute.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tinput: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tdescription: \"A templated object describing the inputs to the action.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"if\": {\n\t\t\t\t\t\t\t\t\ttype: [\n\t\t\t\t\t\t\t\t\t\t\"string\",\n\t\t\t\t\t\t\t\t\t\t\"boolean\"\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tdescription: \"A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `\\\"\\\"`, `0`, or `[]`.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tdescription: \"Object used for authorizing the step\",\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\ttags: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"string\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\toutput: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"A templated object describing the outputs of the scaffolding task.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlinks: {\n\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\tdescription: \"A list of external hyperlinks, typically pointing to resources created or updated by the template\",\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\turl: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A url in a standard uri format.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"https://github.com/my-org/my-new-repo\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tentityRef: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"An entity reference to an entity in the catalog.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"Component:default/my-app\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A user friendly display name for the link.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"View new repo\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A key representing a visual icon to be displayed in the UI.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttext: {\n\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\tdescription: \"A list of Markdown text blobs, like output data from the template.\",\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A user friendly display name for the text.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"Output Content\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A key representing a visual icon to be displayed in the UI.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"The text blob to display in the UI, rendered as Markdown.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"**hey** _I'm_ Markdown\"\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tadditionalProperties: {\n\t\t\t\t\t\t\ttype: \"string\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema = {\n\t$schema: $schema,\n\t$id: $id,\n\tdescription: description,\n\texamples: examples,\n\tallOf: allOf\n};\n\nconst validator = entityKindSchemaValidator(schema);\nconst templateEntityV1beta3Validator = {\n  // TODO(freben): Emulate the old KindValidator until we fix that type\n  async check(data) {\n    return validator(data) === data;\n  }\n};\nconst isTemplateEntityV1beta3 = (entity) => entity.apiVersion === \"scaffolder.backstage.io/v1beta3\" && entity.kind === \"Template\";\n\nexport { isTemplateEntityV1beta3, templateEntityV1beta3Validator };\n//# sourceMappingURL=index.esm.js.map\n","import { useApi, featureFlagsApiRef, useAnalytics, useApiHolder, useApp, errorApiRef, useRouteRef, alertApiRef, attachComponentData } from '@backstage/core-plugin-api';\nimport { makeStyles, FormControl, Typography, LinearProgress, Stepper as Stepper$1, Step, StepLabel, Button, useTheme, Card, CardContent, Grid, Box, Divider, Chip, CardActions, Paper, CircularProgress, StepButton, FormControlLabel, Checkbox, TextField } from '@material-ui/core';\nimport React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport { Draft07 } from 'json-schema-library';\nimport { StructuredMetadataTable, MarkdownContent, ItemCardHeader, Link, UserIcon, Content, ItemCardGrid, ContentHeader, Progress, InfoCard, LogViewer } from '@backstage/core-components';\nimport validator from '@rjsf/validator-ajv8';\nimport qs from 'qs';\nimport useAsync from 'react-use/lib/useAsync';\nimport { s as scaffolderApiRef, S as SecretsContextProvider, a as FIELD_EXTENSION_KEY } from './esm/ref-6fdfc121.esm.js';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { withTheme } from '@rjsf/core';\nimport { getUiOptions, getTemplate } from '@rjsf/utils';\nimport { Theme } from '@rjsf/material-ui';\nimport { RELATION_OWNED_BY, stringifyEntityRef, parseEntityRef } from '@backstage/catalog-model';\nimport { FavoriteEntity, getEntityRelations, EntityRefLinks, useEntityList, entityRouteRef, useEntityTypeFilter } from '@backstage/plugin-catalog-react';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport { isTemplateEntityV1beta3 } from '@backstage/plugin-scaffolder-common';\nimport WebIcon from '@material-ui/icons/Web';\nimport RemoveCircleOutline from '@material-ui/icons/RemoveCircleOutline';\nimport PanoramaFishEyeIcon from '@material-ui/icons/PanoramaFishEye';\nimport classNames from 'classnames';\nimport CheckCircleOutline from '@material-ui/icons/CheckCircleOutline';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport useInterval from 'react-use/lib/useInterval';\nimport { DateTime, Interval } from 'luxon';\nimport humanizeDuration from 'humanize-duration';\nimport { useMountEffect } from '@react-hookz/web';\nimport { makeStyles as makeStyles$1 } from '@material-ui/core/styles';\nimport capitalize from 'lodash/capitalize';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete } from '@material-ui/lab';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Popover from '@material-ui/core/Popover';\nimport Description from '@material-ui/icons/Description';\nimport Edit from '@material-ui/icons/Edit';\nimport List from '@material-ui/icons/List';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport '@backstage/version-bridge';\n\nfunction isObject$1(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\nfunction extractUiSchema(schema, uiSchema) {\n  if (!isObject$1(schema)) {\n    return;\n  }\n  const {\n    properties,\n    items,\n    anyOf,\n    oneOf,\n    allOf,\n    dependencies,\n    then,\n    else: _else\n  } = schema;\n  for (const propName in schema) {\n    if (!schema.hasOwnProperty(propName)) {\n      continue;\n    }\n    if (propName.startsWith(\"ui:\")) {\n      uiSchema[propName] = schema[propName];\n      delete schema[propName];\n    }\n  }\n  if (isObject$1(properties)) {\n    for (const propName in properties) {\n      if (!properties.hasOwnProperty(propName)) {\n        continue;\n      }\n      const schemaNode = properties[propName];\n      if (!isObject$1(schemaNode)) {\n        continue;\n      }\n      const innerUiSchema = {};\n      uiSchema[propName] = innerUiSchema;\n      extractUiSchema(schemaNode, innerUiSchema);\n    }\n  }\n  if (isObject$1(items)) {\n    const innerUiSchema = {};\n    uiSchema.items = innerUiSchema;\n    extractUiSchema(items, innerUiSchema);\n  }\n  if (Array.isArray(anyOf)) {\n    for (const schemaNode of anyOf) {\n      if (!isObject$1(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n  if (Array.isArray(oneOf)) {\n    for (const schemaNode of oneOf) {\n      if (!isObject$1(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n  if (Array.isArray(allOf)) {\n    for (const schemaNode of allOf) {\n      if (!isObject$1(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n  if (isObject$1(dependencies)) {\n    for (const depName of Object.keys(dependencies)) {\n      const schemaNode = dependencies[depName];\n      if (!isObject$1(schemaNode)) {\n        continue;\n      }\n      extractUiSchema(schemaNode, uiSchema);\n    }\n  }\n  if (isObject$1(then)) {\n    extractUiSchema(then, uiSchema);\n  }\n  if (isObject$1(_else)) {\n    extractUiSchema(_else, uiSchema);\n  }\n}\nconst extractSchemaFromStep = (inputStep) => {\n  const uiSchema = {};\n  const returnSchema = JSON.parse(JSON.stringify(inputStep));\n  extractUiSchema(returnSchema, uiSchema);\n  return { uiSchema, schema: returnSchema };\n};\nconst createFieldValidation = () => {\n  const fieldValidation = {\n    __errors: [],\n    addError: (message) => {\n      var _a;\n      (_a = fieldValidation.__errors) == null ? void 0 : _a.push(message);\n    }\n  };\n  return fieldValidation;\n};\n\nfunction isFieldValidation(error) {\n  return !!error && \"__errors\" in error;\n}\nfunction hasErrors(errors) {\n  var _a;\n  if (!errors) {\n    return false;\n  }\n  for (const error of Object.values(errors)) {\n    if (isFieldValidation(error)) {\n      if (((_a = error.__errors) != null ? _a : []).length > 0) {\n        return true;\n      }\n      continue;\n    }\n    if (hasErrors(error)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction isObject(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\n\nconst createAsyncValidators = (rootSchema, validators, context) => {\n  async function validate(formData, pathPrefix = \"#\", current = formData) {\n    var _a, _b;\n    const parsedSchema = new Draft07(rootSchema);\n    const formValidation = {};\n    const validateForm = async (validatorName, key, value, schema, uiSchema) => {\n      const validator = validators[validatorName];\n      if (validator) {\n        const fieldValidation = createFieldValidation();\n        try {\n          await validator(value, fieldValidation, {\n            ...context,\n            formData,\n            schema,\n            uiSchema\n          });\n        } catch (ex) {\n          fieldValidation.addError(ex.message);\n        }\n        formValidation[key] = fieldValidation;\n      }\n    };\n    for (const [key, value] of Object.entries(current)) {\n      const path = `${pathPrefix}/${key}`;\n      const definitionInSchema = parsedSchema.getSchema(path, formData);\n      const { schema, uiSchema } = extractSchemaFromStep(definitionInSchema);\n      const hasItems = definitionInSchema && definitionInSchema.items;\n      const doValidateItem = async (propValue, itemSchema, itemUiSchema) => {\n        await validateForm(\n          propValue[\"ui:field\"],\n          key,\n          value,\n          itemSchema,\n          itemUiSchema\n        );\n      };\n      const doValidate = async (propValue) => {\n        if (\"ui:field\" in propValue) {\n          const { schema: itemsSchema, uiSchema: itemsUiSchema } = extractSchemaFromStep(definitionInSchema.items);\n          await doValidateItem(propValue, itemsSchema, itemsUiSchema);\n        }\n      };\n      if (definitionInSchema && \"ui:field\" in definitionInSchema) {\n        await doValidateItem(definitionInSchema, schema, uiSchema);\n      } else if (hasItems && \"ui:field\" in definitionInSchema.items) {\n        await doValidate(definitionInSchema.items);\n      } else if (hasItems && definitionInSchema.items.type === \"object\") {\n        const properties = (_b = (_a = definitionInSchema.items) == null ? void 0 : _a.properties) != null ? _b : [];\n        for (const [, propValue] of Object.entries(properties)) {\n          await doValidate(propValue);\n        }\n      } else if (isObject(value)) {\n        formValidation[key] = await validate(formData, path, value);\n      }\n    }\n    return formValidation;\n  }\n  return async (formData) => {\n    return await validate(formData);\n  };\n};\n\nconst ReviewState = (props) => {\n  const reviewData = Object.fromEntries(\n    Object.entries(props.formState).map(([key, value]) => {\n      var _a;\n      for (const step of props.schemas) {\n        const parsedSchema = new Draft07(step.mergedSchema);\n        const definitionInSchema = parsedSchema.getSchema(\n          `#/${key}`,\n          props.formState\n        );\n        if (definitionInSchema) {\n          const backstageReviewOptions = (_a = definitionInSchema[\"ui:backstage\"]) == null ? void 0 : _a.review;\n          if (backstageReviewOptions) {\n            if (backstageReviewOptions.mask) {\n              return [key, backstageReviewOptions.mask];\n            }\n            if (backstageReviewOptions.show === false) {\n              return [];\n            }\n          }\n          if (definitionInSchema[\"ui:widget\"] === \"password\") {\n            return [key, \"******\"];\n          }\n        }\n      }\n      return [key, value];\n    })\n  );\n  return /* @__PURE__ */ React.createElement(StructuredMetadataTable, { metadata: reviewData });\n};\n\nconst useTemplateSchema = (manifest) => {\n  const featureFlags = useApi(featureFlagsApiRef);\n  const steps = manifest.steps.map(({ title, description, schema }) => ({\n    title,\n    description,\n    mergedSchema: schema,\n    ...extractSchemaFromStep(schema)\n  }));\n  const returningSteps = steps.filter((step) => {\n    var _a;\n    const stepFeatureFlag = (_a = step.uiSchema[\"ui:backstage\"]) == null ? void 0 : _a.featureFlag;\n    return stepFeatureFlag ? featureFlags.isActive(stepFeatureFlag) : true;\n  }).map((step) => {\n    var _a, _b;\n    return {\n      ...step,\n      schema: {\n        ...step.schema,\n        // Title is rendered at the top of the page, so let's ignore this from jsonschemaform\n        title: void 0,\n        properties: Object.fromEntries(\n          Object.entries((_b = (_a = step.schema) == null ? void 0 : _a.properties) != null ? _b : []).filter(\n            ([key]) => {\n              var _a2, _b2;\n              const stepFeatureFlag = (_b2 = (_a2 = step.uiSchema[key]) == null ? void 0 : _a2[\"ui:backstage\"]) == null ? void 0 : _b2.featureFlag;\n              return stepFeatureFlag ? featureFlags.isActive(stepFeatureFlag) : true;\n            }\n          )\n        )\n      }\n    };\n  });\n  return {\n    presentation: manifest.presentation,\n    steps: returningSteps\n  };\n};\n\nconst useFormDataFromQuery = (initialState) => {\n  return useState(() => {\n    if (initialState) {\n      return initialState;\n    }\n    const query = qs.parse(window.location.search, {\n      ignoreQueryPrefix: true\n    });\n    try {\n      return JSON.parse(query.formData);\n    } catch (e) {\n      return {};\n    }\n  });\n};\n\nconst useTemplateParameterSchema = (templateRef) => {\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const { value, loading, error } = useAsync(\n    () => scaffolderApi.getTemplateParameterSchema(templateRef),\n    [scaffolderApi, templateRef]\n  );\n  return {\n    manifest: value,\n    loading,\n    error\n  };\n};\n\nconst useFilteredSchemaProperties = (manifest) => {\n  const featureFlagKey = \"backstage:featureFlag\";\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  if (!manifest) {\n    return void 0;\n  }\n  const filteredSteps = manifest == null ? void 0 : manifest.steps.filter((step) => {\n    const featureFlag = step.schema[featureFlagKey];\n    return typeof featureFlag !== \"string\" || featureFlagApi.isActive(featureFlag);\n  }).map((step) => {\n    var _a;\n    const filteredStep = cloneDeep(step);\n    const removedPropertyKeys = [];\n    if (filteredStep.schema.properties) {\n      filteredStep.schema.properties = Object.fromEntries(\n        Object.entries(filteredStep.schema.properties).filter(\n          ([key, value]) => {\n            if (value[featureFlagKey]) {\n              if (featureFlagApi.isActive(value[featureFlagKey])) {\n                return true;\n              }\n              removedPropertyKeys.push(key);\n              return false;\n            }\n            return true;\n          }\n        )\n      );\n      filteredStep.schema.required = Array.isArray(\n        filteredStep.schema.required\n      ) ? (_a = filteredStep.schema.required) == null ? void 0 : _a.filter(\n        (r) => !removedPropertyKeys.includes(r)\n      ) : filteredStep.schema.required;\n    }\n    return filteredStep;\n  });\n  return { ...manifest, steps: filteredSteps };\n};\n\nconst useTransformSchemaToProps = (step, options = {}) => {\n  var _a;\n  const { layouts = [] } = options;\n  const objectFieldTemplate = step == null ? void 0 : step.uiSchema[\"ui:ObjectFieldTemplate\"];\n  if (typeof objectFieldTemplate !== \"string\") {\n    return step;\n  }\n  const Layout = (_a = layouts.find(\n    (layout) => layout.name === objectFieldTemplate\n  )) == null ? void 0 : _a.component;\n  if (!Layout) {\n    return step;\n  }\n  return {\n    ...step,\n    uiSchema: {\n      ...step.uiSchema,\n      [\"ui:ObjectFieldTemplate\"]: Layout\n    }\n  };\n};\n\nconst DescriptionField = ({ description }) => description && /* @__PURE__ */ React.createElement(MarkdownContent, { content: description, linkTarget: \"_blank\" });\n\nvar FieldOverrides = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  DescriptionField: DescriptionField\n});\n\nconst useStyles$a = makeStyles((theme) => ({\n  markdownDescription: {\n    fontSize: theme.typography.caption.fontSize,\n    margin: 0,\n    color: theme.palette.text.secondary,\n    \"& :first-child\": {\n      margin: 0,\n      marginTop: \"3px\"\n      // to keep the standard browser padding\n    }\n  }\n}));\nconst ScaffolderField = (props) => {\n  const {\n    children,\n    displayLabel = true,\n    rawErrors = [],\n    errors,\n    help,\n    rawDescription,\n    required,\n    disabled\n  } = props;\n  const classes = useStyles$a();\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      fullWidth: true,\n      error: rawErrors.length ? true : false,\n      required,\n      disabled\n    },\n    children,\n    displayLabel && rawDescription ? /* @__PURE__ */ React.createElement(\n      MarkdownContent,\n      {\n        content: rawDescription,\n        className: classes.markdownDescription\n      }\n    ) : null,\n    errors,\n    help\n  );\n};\n\nconst FieldTemplate = (props) => {\n  const {\n    id,\n    children,\n    classNames,\n    style,\n    disabled,\n    displayLabel,\n    hidden,\n    label,\n    onDropPropertyClick,\n    onKeyChange,\n    readonly,\n    required,\n    rawErrors = [],\n    errors,\n    help,\n    rawDescription,\n    schema,\n    uiSchema,\n    registry\n  } = props;\n  const uiOptions = getUiOptions(uiSchema);\n  const WrapIfAdditionalTemplate = getTemplate(\"WrapIfAdditionalTemplate\", registry, uiOptions);\n  if (hidden) {\n    return /* @__PURE__ */ React.createElement(\"div\", { style: { display: \"none\" } }, children);\n  }\n  return /* @__PURE__ */ React.createElement(\n    WrapIfAdditionalTemplate,\n    {\n      classNames,\n      style,\n      disabled,\n      id,\n      label,\n      onDropPropertyClick,\n      onKeyChange,\n      readonly,\n      required,\n      schema,\n      uiSchema,\n      registry\n    },\n    /* @__PURE__ */ React.createElement(\n      ScaffolderField,\n      {\n        displayLabel,\n        rawErrors,\n        help,\n        disabled,\n        rawDescription,\n        errors,\n        required\n      },\n      children\n    )\n  );\n};\n\nconst useStyles$9 = makeStyles((theme) => ({\n  markdownDescription: {\n    fontSize: theme.typography.caption.fontSize,\n    margin: 0,\n    color: theme.palette.text.secondary,\n    \"& :first-child\": {\n      margin: 0,\n      marginTop: \"3px\"\n      // to keep the standard browser padding\n    }\n  }\n}));\nconst DescriptionFieldTemplate = (props) => {\n  const { id, description } = props;\n  const classes = useStyles$9();\n  if (description) {\n    if (typeof description === \"string\") {\n      return /* @__PURE__ */ React.createElement(\n        MarkdownContent,\n        {\n          content: description,\n          className: classes.markdownDescription\n        }\n      );\n    }\n    return /* @__PURE__ */ React.createElement(Typography, { id, variant: \"subtitle2\", style: { marginTop: \"5px\" } }, description);\n  }\n  return null;\n};\n\nconst WrappedForm = withTheme(Theme);\nconst Form = (props) => {\n  const wrappedFields = React.useMemo(\n    () => {\n      var _a;\n      return Object.fromEntries(\n        Object.entries((_a = props.fields) != null ? _a : {}).map(([key, Component]) => [\n          key,\n          (wrapperProps) => {\n            var _a2, _b;\n            return /* @__PURE__ */ React.createElement(\n              Component,\n              {\n                ...wrapperProps,\n                uiSchema: (_a2 = wrapperProps.uiSchema) != null ? _a2 : {},\n                formData: wrapperProps.formData,\n                rawErrors: (_b = wrapperProps.rawErrors) != null ? _b : []\n              }\n            );\n          }\n        ])\n      );\n    },\n    [props.fields]\n  );\n  const templates = React.useMemo(\n    () => ({\n      FieldTemplate,\n      DescriptionFieldTemplate,\n      ...props.templates\n    }),\n    [props.templates]\n  );\n  return /* @__PURE__ */ React.createElement(WrappedForm, { ...props, templates, fields: wrappedFields });\n};\n\nconst useStyles$8 = makeStyles((theme) => ({\n  backButton: {\n    marginRight: theme.spacing(1)\n  },\n  footer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"right\",\n    marginTop: theme.spacing(2)\n  },\n  formWrapper: {\n    padding: theme.spacing(2)\n  }\n}));\nconst Stepper = (stepperProps) => {\n  var _a, _b, _c, _d, _e, _f, _g;\n  const { layouts = [], components = {}, ...props } = stepperProps;\n  const {\n    ReviewStateComponent = ReviewState,\n    ReviewStepComponent,\n    backButtonText = \"Back\",\n    createButtonText = \"Create\",\n    reviewButtonText = \"Review\"\n  } = components;\n  const analytics = useAnalytics();\n  const { presentation, steps } = useTemplateSchema(props.manifest);\n  const apiHolder = useApiHolder();\n  const [activeStep, setActiveStep] = useState(0);\n  const [isValidating, setIsValidating] = useState(false);\n  const [formState, setFormState] = useFormDataFromQuery(props.initialState);\n  const [errors, setErrors] = useState();\n  const styles = useStyles$8();\n  const extensions = useMemo(() => {\n    return Object.fromEntries(\n      props.extensions.map(({ name, component }) => [name, component])\n    );\n  }, [props.extensions]);\n  const fields = useMemo(\n    () => ({ ...FieldOverrides, ...extensions }),\n    [extensions]\n  );\n  const validators = useMemo(() => {\n    return Object.fromEntries(\n      props.extensions.map(({ name, validation: validation2 }) => [name, validation2])\n    );\n  }, [props.extensions]);\n  const validation = useMemo(() => {\n    var _a2;\n    return createAsyncValidators((_a2 = steps[activeStep]) == null ? void 0 : _a2.mergedSchema, validators, {\n      apiHolder\n    });\n  }, [steps, activeStep, validators, apiHolder]);\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n  const handleChange = useCallback(\n    (e) => setFormState((current) => ({ ...current, ...e.formData })),\n    [setFormState]\n  );\n  const handleCreate = useCallback(() => {\n    var _a2;\n    props.onCreate(formState);\n    const name = typeof formState.name === \"string\" ? formState.name : void 0;\n    analytics.captureEvent(\"create\", (_a2 = name != null ? name : props.templateName) != null ? _a2 : \"unknown\");\n  }, [props, formState, analytics]);\n  const currentStep = useTransformSchemaToProps(steps[activeStep], { layouts });\n  const handleNext = async ({\n    formData = {}\n  }) => {\n    setErrors(void 0);\n    setIsValidating(true);\n    const returnedValidation = await validation(formData);\n    setIsValidating(false);\n    if (hasErrors(returnedValidation)) {\n      setErrors(returnedValidation);\n    } else {\n      setErrors(void 0);\n      setActiveStep((prevActiveStep) => {\n        const stepNum = prevActiveStep + 1;\n        analytics.captureEvent(\"click\", `Next Step (${stepNum})`);\n        return stepNum;\n      });\n    }\n    setFormState((current) => ({ ...current, ...formData }));\n  };\n  const backLabel = (_b = (_a = presentation == null ? void 0 : presentation.buttonLabels) == null ? void 0 : _a.backButtonText) != null ? _b : backButtonText;\n  const createLabel = (_d = (_c = presentation == null ? void 0 : presentation.buttonLabels) == null ? void 0 : _c.createButtonText) != null ? _d : createButtonText;\n  const reviewLabel = (_f = (_e = presentation == null ? void 0 : presentation.buttonLabels) == null ? void 0 : _e.reviewButtonText) != null ? _f : reviewButtonText;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, isValidating && /* @__PURE__ */ React.createElement(LinearProgress, { variant: \"indeterminate\" }), /* @__PURE__ */ React.createElement(Stepper$1, { activeStep, alternativeLabel: true, variant: \"elevation\" }, steps.map((step, index) => /* @__PURE__ */ React.createElement(Step, { key: index }, /* @__PURE__ */ React.createElement(StepLabel, null, step.title))), /* @__PURE__ */ React.createElement(Step, null, /* @__PURE__ */ React.createElement(StepLabel, null, \"Review\"))), /* @__PURE__ */ React.createElement(\"div\", { className: styles.formWrapper }, activeStep < steps.length ? /* @__PURE__ */ React.createElement(\n    Form,\n    {\n      validator,\n      extraErrors: errors,\n      formData: formState,\n      formContext: { formData: formState },\n      schema: currentStep.schema,\n      uiSchema: currentStep.uiSchema,\n      onSubmit: handleNext,\n      fields,\n      showErrorList: false,\n      onChange: handleChange,\n      ...(_g = props.formProps) != null ? _g : {}\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: styles.footer }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        onClick: handleBack,\n        className: styles.backButton,\n        disabled: activeStep < 1 || isValidating\n      },\n      backLabel\n    ), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"primary\",\n        type: \"submit\",\n        disabled: isValidating\n      },\n      activeStep === steps.length - 1 ? reviewLabel : \"Next\"\n    ))\n  ) : (\n    // TODO: potentially move away from this pattern, deprecate?\n    ReviewStepComponent ? /* @__PURE__ */ React.createElement(\n      ReviewStepComponent,\n      {\n        disableButtons: isValidating,\n        formData: formState,\n        handleBack,\n        handleReset: () => {\n        },\n        steps,\n        handleCreate\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ReviewStateComponent, { formState, schemas: steps }), /* @__PURE__ */ React.createElement(\"div\", { className: styles.footer }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        onClick: handleBack,\n        className: styles.backButton,\n        disabled: activeStep < 1\n      },\n      \"Back\"\n    ), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: handleCreate\n      },\n      createLabel\n    )))\n  )));\n};\n\nconst useStyles$7 = makeStyles(() => ({\n  header: {\n    backgroundImage: ({ cardBackgroundImage }) => cardBackgroundImage,\n    color: ({ cardFontColor }) => cardFontColor\n  },\n  subtitleWrapper: {\n    display: \"flex\",\n    justifyContent: \"space-between\"\n  }\n}));\nconst CardHeader = (props) => {\n  const {\n    template: {\n      metadata: { title, name },\n      spec: { type }\n    }\n  } = props;\n  const { getPageTheme } = useTheme();\n  const themeForType = getPageTheme({ themeId: type });\n  const styles = useStyles$7({\n    cardFontColor: themeForType.fontColor,\n    cardBackgroundImage: themeForType.backgroundImage\n  });\n  const SubtitleComponent = /* @__PURE__ */ React.createElement(\"div\", { className: styles.subtitleWrapper }, /* @__PURE__ */ React.createElement(\"div\", null, type), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(FavoriteEntity, { entity: props.template, style: { padding: 0 } })));\n  return /* @__PURE__ */ React.createElement(\n    ItemCardHeader,\n    {\n      title: title != null ? title : name,\n      subtitle: SubtitleComponent,\n      classes: { root: styles.header }\n    }\n  );\n};\n\nconst useStyles$6 = makeStyles(() => ({\n  linkText: {\n    display: \"inline-flex\",\n    alignItems: \"center\"\n  }\n}));\nconst CardLink = ({ icon: Icon, text, url }) => {\n  const styles = useStyles$6();\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.linkText }, /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }), /* @__PURE__ */ React.createElement(Link, { style: { marginLeft: \"8px\" }, to: url }, text || url));\n};\n\nconst useStyles$5 = makeStyles((theme) => ({\n  box: {\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    display: \"-webkit-box\",\n    \"-webkit-line-clamp\": 10,\n    \"-webkit-box-orient\": \"vertical\"\n  },\n  markdown: {\n    /** to make the styles for React Markdown not leak into the description */\n    \"& :first-child\": {\n      margin: 0\n    }\n  },\n  label: {\n    color: theme.palette.text.secondary,\n    textTransform: \"uppercase\",\n    fontWeight: \"bold\",\n    letterSpacing: 0.5,\n    lineHeight: 1,\n    fontSize: \"0.75rem\"\n  },\n  footer: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    flex: 1,\n    alignItems: \"center\"\n  },\n  ownedBy: {\n    display: \"flex\",\n    alignItems: \"center\",\n    flex: 1,\n    color: theme.palette.link\n  }\n}));\nconst TemplateCard = (props) => {\n  var _a, _b, _c, _d, _e, _f, _g;\n  const { template } = props;\n  const styles = useStyles$5();\n  const ownedByRelations = getEntityRelations(template, RELATION_OWNED_BY);\n  const app = useApp();\n  const iconResolver = (key) => {\n    var _a2;\n    return key ? (_a2 = app.getSystemIcon(key)) != null ? _a2 : LanguageIcon : LanguageIcon;\n  };\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardHeader, { template }), /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 2 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Box, { className: styles.box }, /* @__PURE__ */ React.createElement(\n    MarkdownContent,\n    {\n      className: styles.markdown,\n      content: (_a = template.metadata.description) != null ? _a : \"No description\"\n    }\n  ))), ((_c = (_b = template.metadata.tags) == null ? void 0 : _b.length) != null ? _c : 0) > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Divider, null)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 2 }, (_d = template.metadata.tags) == null ? void 0 : _d.map((tag) => /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(\n    Chip,\n    {\n      style: { margin: 0 },\n      size: \"small\",\n      label: tag,\n      key: tag\n    }\n  )))))), (props.additionalLinks || ((_e = template.metadata.links) == null ? void 0 : _e.length)) && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Divider, null)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 2 }, (_f = props.additionalLinks) == null ? void 0 : _f.map(({ icon, text, url }, index) => /* @__PURE__ */ React.createElement(Grid, { className: styles.linkText, item: true, xs: 6, key: index }, /* @__PURE__ */ React.createElement(CardLink, { icon, text, url }))), (_g = template.metadata.links) == null ? void 0 : _g.map(\n    ({ url, icon, title }, index) => /* @__PURE__ */ React.createElement(Grid, { className: styles.linkText, item: true, xs: 6, key: index }, /* @__PURE__ */ React.createElement(\n      CardLink,\n      {\n        icon: iconResolver(icon),\n        text: title || url,\n        url\n      }\n    ))\n  )))))), /* @__PURE__ */ React.createElement(CardActions, { style: { padding: \"16px\", flex: 1, alignItems: \"flex-end\" } }, /* @__PURE__ */ React.createElement(\"div\", { className: styles.footer }, /* @__PURE__ */ React.createElement(\"div\", { className: styles.ownedBy }, ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(UserIcon, { fontSize: \"small\" }), /* @__PURE__ */ React.createElement(\n    EntityRefLinks,\n    {\n      style: { marginLeft: \"8px\" },\n      entityRefs: ownedByRelations,\n      defaultKind: \"Group\",\n      hideIcons: true\n    }\n  ))), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      size: \"small\",\n      variant: \"outlined\",\n      color: \"primary\",\n      onClick: () => {\n        var _a2;\n        return (_a2 = props.onSelected) == null ? void 0 : _a2.call(props, template);\n      }\n    },\n    \"Choose\"\n  ))));\n};\n\nconst TemplateGroup = (props) => {\n  const {\n    templates,\n    title,\n    components: { CardComponent } = {},\n    onSelected\n  } = props;\n  const titleComponent = typeof title === \"string\" ? /* @__PURE__ */ React.createElement(ContentHeader, { title }) : title;\n  if (templates.length === 0) {\n    return null;\n  }\n  const Card = CardComponent || TemplateCard;\n  return /* @__PURE__ */ React.createElement(Content, null, titleComponent, /* @__PURE__ */ React.createElement(ItemCardGrid, null, templates.map(({ template, additionalLinks }) => /* @__PURE__ */ React.createElement(\n    Card,\n    {\n      key: stringifyEntityRef(template),\n      additionalLinks,\n      template,\n      onSelected\n    }\n  ))));\n};\n\nconst TemplateGroups = (props) => {\n  const { loading, error, entities } = useEntityList();\n  const { groups, templateFilter, TemplateCardComponent, onTemplateSelected } = props;\n  const errorApi = useApi(errorApiRef);\n  const onSelected = useCallback(\n    (template) => {\n      onTemplateSelected == null ? void 0 : onTemplateSelected(template);\n    },\n    [onTemplateSelected]\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    errorApi.post(error);\n    return null;\n  }\n  if (!entities || !entities.length) {\n    return /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\" }, \"No templates found that match your filter. Learn more about\", \" \", /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-templates/adding-templates\" }, \"adding templates\"), \".\");\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, groups.map(({ title, filter }, index) => {\n    const templates = entities.filter(isTemplateEntityV1beta3).filter((e) => templateFilter ? templateFilter(e) : true).filter(filter).map((template) => {\n      var _a, _b;\n      const additionalLinks = (_b = (_a = props.additionalLinksForEntity) == null ? void 0 : _a.call(props, template)) != null ? _b : [];\n      return {\n        template,\n        additionalLinks\n      };\n    });\n    return /* @__PURE__ */ React.createElement(\n      TemplateGroup,\n      {\n        key: index,\n        templates,\n        title,\n        components: { CardComponent: TemplateCardComponent },\n        onSelected\n      }\n    );\n  }));\n};\n\nconst useStyles$4 = makeStyles(() => ({\n  markdown: {\n    /** to make the styles for React Markdown not leak into the description */\n    \"& :first-child\": {\n      marginTop: 0\n    },\n    \"& :last-child\": {\n      marginBottom: 0\n    }\n  }\n}));\nconst Workflow = (workflowProps) => {\n  var _a;\n  const { title, description, namespace, templateName, ...props } = workflowProps;\n  const styles = useStyles$4();\n  const templateRef = stringifyEntityRef({\n    kind: \"Template\",\n    namespace,\n    name: templateName\n  });\n  const errorApi = useApi(errorApiRef);\n  const { loading, manifest, error } = useTemplateParameterSchema(templateRef);\n  const sortedManifest = useFilteredSchemaProperties(manifest);\n  useEffect(() => {\n    if (error) {\n      errorApi.post(new Error(`Failed to load template, ${error}`));\n    }\n  }, [error, errorApi]);\n  if (error) {\n    return props.onError(error);\n  }\n  return /* @__PURE__ */ React.createElement(Content, null, loading && /* @__PURE__ */ React.createElement(Progress, null), sortedManifest && /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: title != null ? title : sortedManifest.title,\n      subheader: /* @__PURE__ */ React.createElement(\n        MarkdownContent,\n        {\n          className: styles.markdown,\n          content: (_a = description != null ? description : sortedManifest.description) != null ? _a : \"No description\"\n        }\n      ),\n      noPadding: true,\n      titleTypographyProps: { component: \"h2\" }\n    },\n    /* @__PURE__ */ React.createElement(\n      Stepper,\n      {\n        manifest: sortedManifest,\n        templateName,\n        ...props\n      }\n    )\n  ));\n};\nconst EmbeddableWorkflow = (props) => /* @__PURE__ */ React.createElement(SecretsContextProvider, null, /* @__PURE__ */ React.createElement(Workflow, { ...props }));\n\nconst useStyles$3 = makeStyles({\n  root: {\n    \"&:hover\": {\n      textDecoration: \"none\"\n    }\n  }\n});\nconst LinkOutputs = (props) => {\n  const { links = [] } = props.output;\n  const classes = useStyles$3();\n  const app = useApp();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const iconResolver = (key) => {\n    var _a;\n    return (_a = app.getSystemIcon(key)) != null ? _a : WebIcon;\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, links.filter(({ url, entityRef }) => url || entityRef).map(({ url, entityRef, title, icon }) => {\n    if (entityRef) {\n      const entityName = parseEntityRef(entityRef);\n      const target = entityRoute(entityName);\n      return { title, icon, url: target };\n    }\n    return { title, icon, url };\n  }).map(({ url, title, icon }, i) => {\n    const Icon = iconResolver(icon);\n    return /* @__PURE__ */ React.createElement(Link, { to: url, key: i, classes: { root: classes.root } }, /* @__PURE__ */ React.createElement(Button, { startIcon: /* @__PURE__ */ React.createElement(Icon, null), component: \"div\", color: \"primary\" }, title));\n  }));\n};\n\nconst TextOutputs = (props) => {\n  const {\n    output: { text = [] },\n    index,\n    setIndex\n  } = props;\n  const app = useApp();\n  const iconResolver = (key) => {\n    var _a;\n    return (_a = app.getSystemIcon(key)) != null ? _a : WebIcon;\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, text.filter(({ content }) => content !== void 0).map(({ title, icon }, i) => {\n    const Icon = iconResolver(icon);\n    return /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        key: i,\n        startIcon: /* @__PURE__ */ React.createElement(Icon, null),\n        component: \"div\",\n        color: \"primary\",\n        onClick: () => setIndex == null ? void 0 : setIndex(index !== i ? i : void 0),\n        variant: index === i ? \"outlined\" : void 0\n      },\n      title\n    );\n  }));\n};\n\nconst DefaultTemplateOutputs = (props) => {\n  var _a, _b;\n  const [textOutputIndex, setTextOutputIndex] = useState();\n  const textOutput = useMemo(\n    () => {\n      var _a2, _b2;\n      return textOutputIndex !== void 0 ? (_b2 = (_a2 = props.output) == null ? void 0 : _a2.text) == null ? void 0 : _b2[textOutputIndex] : null;\n    },\n    [props.output, textOutputIndex]\n  );\n  if (!props.output) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2 }, /* @__PURE__ */ React.createElement(Paper, null, /* @__PURE__ */ React.createElement(Box, { padding: 2, justifyContent: \"center\", display: \"flex\", gridGap: 16 }, /* @__PURE__ */ React.createElement(\n    TextOutputs,\n    {\n      output: props.output,\n      index: textOutputIndex,\n      setIndex: setTextOutputIndex\n    }\n  ), /* @__PURE__ */ React.createElement(LinkOutputs, { output: props.output })))), textOutput ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2 }, /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: (_a = textOutput.title) != null ? _a : \"Text Output\",\n      noPadding: true,\n      titleTypographyProps: { component: \"h2\" }\n    },\n    /* @__PURE__ */ React.createElement(Box, { padding: 2, height: \"100%\" }, /* @__PURE__ */ React.createElement(MarkdownContent, { content: (_b = textOutput.content) != null ? _b : \"\" }))\n  )) : null);\n};\n\nconst useStepIconStyles = makeStyles((theme) => ({\n  root: {\n    color: theme.palette.text.disabled\n  },\n  completed: {\n    color: theme.palette.status.ok\n  },\n  error: {\n    color: theme.palette.status.error\n  }\n}));\nconst StepIcon = (props) => {\n  const classes = useStepIconStyles();\n  const { active, completed, error, skipped } = props;\n  const getMiddle = () => {\n    if (active) {\n      return /* @__PURE__ */ React.createElement(CircularProgress, { size: \"20px\" });\n    }\n    if (completed) {\n      return /* @__PURE__ */ React.createElement(CheckCircleOutline, null);\n    }\n    if (error) {\n      return /* @__PURE__ */ React.createElement(ErrorOutline, null);\n    }\n    if (skipped) {\n      return /* @__PURE__ */ React.createElement(RemoveCircleOutline, null);\n    }\n    return /* @__PURE__ */ React.createElement(PanoramaFishEyeIcon, null);\n  };\n  return /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      className: classNames(classes.root, {\n        [classes.completed]: completed,\n        [classes.error]: error\n      })\n    },\n    getMiddle()\n  );\n};\n\nconst StepTime = (props) => {\n  const [time, setTime] = useState(\"\");\n  const { step } = props;\n  const getDelay = () => {\n    if (step.startedAt && step.endedAt && time) {\n      return null;\n    }\n    if (step.startedAt && step.endedAt) {\n      return 1;\n    }\n    return 1e3;\n  };\n  const calculate = useCallback(() => {\n    if (!step.startedAt) {\n      setTime(\"\");\n      return;\n    }\n    const end = step.endedAt ? DateTime.fromISO(step.endedAt) : DateTime.local();\n    const startedAt = DateTime.fromISO(step.startedAt);\n    const formatted = Interval.fromDateTimes(startedAt, end).toDuration().valueOf();\n    setTime(humanizeDuration(formatted, { round: true }));\n  }, [step.endedAt, step.startedAt]);\n  useMountEffect(calculate);\n  useInterval(calculate, getDelay());\n  return /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\" }, time);\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  failed: {\n    backgroundColor: theme.palette.error.main\n  },\n  success: {\n    backgroundColor: theme.palette.success.main\n  }\n}));\nconst TaskBorder = (props) => {\n  const styles = useStyles$2();\n  if (!props.isComplete) {\n    return /* @__PURE__ */ React.createElement(LinearProgress, { variant: \"indeterminate\" });\n  }\n  return /* @__PURE__ */ React.createElement(\n    LinearProgress,\n    {\n      variant: \"determinate\",\n      classes: { bar: props.isError ? styles.failed : styles.success },\n      value: 100\n    }\n  );\n};\n\nconst TaskSteps = (props) => {\n  var _a, _b;\n  return /* @__PURE__ */ React.createElement(Paper, { style: { position: \"relative\", overflow: \"hidden\" } }, /* @__PURE__ */ React.createElement(\n    TaskBorder,\n    {\n      isComplete: (_a = props.isComplete) != null ? _a : false,\n      isError: (_b = props.isError) != null ? _b : false\n    }\n  ), /* @__PURE__ */ React.createElement(Box, { padding: 2 }, /* @__PURE__ */ React.createElement(\n    Stepper$1,\n    {\n      activeStep: props.activeStep,\n      alternativeLabel: true,\n      variant: \"elevation\"\n    },\n    props.steps.map((step) => {\n      const isCompleted = step.status === \"completed\";\n      const isFailed = step.status === \"failed\";\n      const isActive = step.status === \"processing\";\n      const isSkipped = step.status === \"skipped\";\n      const stepIconProps = {\n        completed: isCompleted,\n        error: isFailed,\n        active: isActive,\n        skipped: isSkipped\n      };\n      return /* @__PURE__ */ React.createElement(Step, { key: step.id }, /* @__PURE__ */ React.createElement(StepButton, null, /* @__PURE__ */ React.createElement(\n        StepLabel,\n        {\n          StepIconProps: stepIconProps,\n          StepIconComponent: StepIcon,\n          \"data-testid\": \"step-label\"\n        },\n        /* @__PURE__ */ React.createElement(Box, null, step.name),\n        !isSkipped && /* @__PURE__ */ React.createElement(StepTime, { step })\n      )));\n    })\n  )));\n};\n\nconst useStyles$1 = makeStyles$1({\n  root: {\n    width: \"100%\",\n    height: \"100%\",\n    position: \"relative\"\n  }\n});\nconst TaskLogStream = (props) => {\n  const styles = useStyles$1();\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.root }, /* @__PURE__ */ React.createElement(\n    LogViewer,\n    {\n      text: Object.values(props.logs).map((l) => l.join(\"\\n\")).filter(Boolean).join(\"\\n\")\n    }\n  ));\n};\n\nconst icon = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nconst TemplateCategoryPicker = () => {\n  const alertApi = useApi(alertApiRef);\n  const { error, loading, availableTypes, selectedTypes, setSelectedTypes } = useEntityTypeFilter();\n  if (loading)\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  if (error) {\n    alertApi.post({\n      message: `Failed to load entity types with error: ${error}`,\n      severity: \"error\"\n    });\n    return null;\n  }\n  if (!availableTypes)\n    return null;\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      variant: \"button\",\n      component: \"label\",\n      htmlFor: \"categories-picker\"\n    },\n    \"Categories\"\n  ), /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      multiple: true,\n      id: \"categories-picker\",\n      options: availableTypes,\n      value: selectedTypes,\n      onChange: (_, value) => setSelectedTypes(value),\n      renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(\n        FormControlLabel,\n        {\n          control: /* @__PURE__ */ React.createElement(\n            Checkbox,\n            {\n              icon,\n              checkedIcon,\n              checked: selected\n            }\n          ),\n          label: capitalize(option)\n        }\n      ),\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, { ...params, variant: \"outlined\" })\n    }\n  ));\n};\n\nconst useStyles = makeStyles$1((theme) => ({\n  button: {\n    color: theme.page.fontColor\n  }\n}));\nfunction ScaffolderPageContextMenu(props) {\n  const { onEditorClicked, onActionsClicked, onTasksClicked } = props;\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState();\n  if (!onEditorClicked && !onActionsClicked) {\n    return null;\n  }\n  const onOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const onClose = () => {\n    setAnchorEl(void 0);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      id: \"long-menu\",\n      \"aria-label\": \"more\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-expanded\": !!anchorEl,\n      \"aria-haspopup\": \"true\",\n      role: \"button\",\n      onClick: onOpen,\n      \"data-testid\": \"menu-button\",\n      color: \"inherit\",\n      className: classes.button\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  ), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      \"aria-labelledby\": \"long-menu\",\n      open: Boolean(anchorEl),\n      onClose,\n      anchorEl,\n      anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n      transformOrigin: { vertical: \"top\", horizontal: \"right\" }\n    },\n    /* @__PURE__ */ React.createElement(MenuList, null, onEditorClicked && /* @__PURE__ */ React.createElement(MenuItem, { onClick: onEditorClicked }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Edit, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Template Editor\" })), onActionsClicked && /* @__PURE__ */ React.createElement(MenuItem, { onClick: onActionsClicked }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Description, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Installed Actions\" })), onTasksClicked && /* @__PURE__ */ React.createElement(MenuItem, { onClick: onTasksClicked }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(List, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Task List\" })))\n  ));\n}\n\nfunction createLegacyScaffolderFieldExtension(options) {\n  return {\n    expose() {\n      const FieldExtensionDataHolder = () => null;\n      attachComponentData(\n        FieldExtensionDataHolder,\n        FIELD_EXTENSION_KEY,\n        options\n      );\n      return FieldExtensionDataHolder;\n    }\n  };\n}\n\nexport { DefaultTemplateOutputs, EmbeddableWorkflow, Form, ReviewState, ScaffolderField, ScaffolderPageContextMenu, Stepper, TaskLogStream, TaskSteps, TemplateCard, TemplateCategoryPicker, TemplateGroup, TemplateGroups, Workflow, createAsyncValidators, createFieldValidation, createLegacyScaffolderFieldExtension, extractSchemaFromStep, useFilteredSchemaProperties, useFormDataFromQuery, useTemplateParameterSchema, useTemplateSchema };\n//# sourceMappingURL=alpha.esm.js.map\n","import { createVersionedContext, createVersionedValueMap, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport React, { useState, useContext, useCallback } from 'react';\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nconst FIELD_EXTENSION_WRAPPER_KEY = \"scaffolder.extensions.wrapper.v1\";\nconst FIELD_EXTENSION_KEY = \"scaffolder.extensions.field.v1\";\n\nconst SecretsContext = createVersionedContext(\"secrets-context\");\nconst SecretsContextProvider = (props) => {\n  const [secrets, setSecrets] = useState({});\n  return /* @__PURE__ */ React.createElement(\n    SecretsContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: { secrets, setSecrets } })\n    },\n    props.children\n  );\n};\nconst useTemplateSecrets = () => {\n  var _a;\n  const value = (_a = useContext(SecretsContext)) == null ? void 0 : _a.atVersion(1);\n  if (!value) {\n    throw new Error(\n      \"useTemplateSecrets must be used within a SecretsContextProvider\"\n    );\n  }\n  const { setSecrets: updateSecrets, secrets = {} } = value;\n  const setSecrets = useCallback(\n    (input) => {\n      updateSecrets((currentSecrets) => ({ ...currentSecrets, ...input }));\n    },\n    [updateSecrets]\n  );\n  return { setSecrets, secrets };\n};\n\nconst scaffolderApiRef = getOrCreateGlobalSingleton(\n  \"scaffolder:scaffolder-api-ref\",\n  () => createApiRef({\n    id: \"plugin.scaffolder.service\"\n  })\n);\n\nexport { FIELD_EXTENSION_WRAPPER_KEY as F, SecretsContextProvider as S, FIELD_EXTENSION_KEY as a, scaffolderApiRef as s, useTemplateSecrets as u };\n//# sourceMappingURL=ref-6fdfc121.esm.js.map\n","import { attachComponentData, useElementFilter, useApi } from '@backstage/core-plugin-api';\nimport { F as FIELD_EXTENSION_WRAPPER_KEY, a as FIELD_EXTENSION_KEY, s as scaffolderApiRef } from './esm/ref-6fdfc121.esm.js';\nexport { S as SecretsContextProvider, s as scaffolderApiRef, u as useTemplateSecrets } from './esm/ref-6fdfc121.esm.js';\nimport { useImmerReducer } from 'use-immer';\nimport { useEffect } from 'react';\nimport '@backstage/version-bridge';\n\nfunction createScaffolderFieldExtension(options) {\n  return {\n    expose() {\n      const FieldExtensionDataHolder = () => null;\n      attachComponentData(\n        FieldExtensionDataHolder,\n        FIELD_EXTENSION_KEY,\n        options\n      );\n      return FieldExtensionDataHolder;\n    }\n  };\n}\nconst ScaffolderFieldExtensions = () => null;\nattachComponentData(\n  ScaffolderFieldExtensions,\n  FIELD_EXTENSION_WRAPPER_KEY,\n  true\n);\n\nconst useCustomFieldExtensions = (outlet) => {\n  return useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: FIELD_EXTENSION_WRAPPER_KEY\n    }).findComponentData({\n      key: FIELD_EXTENSION_KEY\n    })\n  );\n};\n\nconst LAYOUTS_KEY = \"scaffolder.layout.v1\";\nconst LAYOUTS_WRAPPER_KEY = \"scaffolder.layouts.wrapper.v1\";\n\nconst useCustomLayouts = (outlet) => {\n  return useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: LAYOUTS_WRAPPER_KEY\n    }).findComponentData({\n      key: LAYOUTS_KEY\n    })\n  );\n};\n\nfunction reducer(draft, action) {\n  var _a, _b, _c;\n  switch (action.type) {\n    case \"INIT\": {\n      draft.steps = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = { status: \"open\", id: next.id };\n        return current;\n      }, {});\n      draft.stepLogs = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = [];\n        return current;\n      }, {});\n      draft.loading = false;\n      draft.error = void 0;\n      draft.completed = false;\n      draft.task = action.data;\n      return;\n    }\n    case \"LOGS\": {\n      const entries = action.data;\n      for (const entry of entries) {\n        const logLine = `${entry.createdAt} ${entry.body.message}`;\n        if (!entry.body.stepId || !((_a = draft.steps) == null ? void 0 : _a[entry.body.stepId])) {\n          continue;\n        }\n        const currentStepLog = (_b = draft.stepLogs) == null ? void 0 : _b[entry.body.stepId];\n        const currentStep = (_c = draft.steps) == null ? void 0 : _c[entry.body.stepId];\n        if (entry.body.status && entry.body.status !== currentStep.status) {\n          currentStep.status = entry.body.status;\n          if (currentStep.status === \"processing\") {\n            currentStep.startedAt = entry.createdAt;\n          }\n          if ([\"cancelled\", \"completed\", \"failed\"].includes(currentStep.status)) {\n            currentStep.endedAt = entry.createdAt;\n          }\n        }\n        currentStepLog == null ? void 0 : currentStepLog.push(logLine);\n      }\n      return;\n    }\n    case \"COMPLETED\": {\n      draft.completed = true;\n      draft.output = action.data.body.output;\n      draft.error = action.data.body.error;\n      return;\n    }\n    case \"CANCELLED\": {\n      draft.cancelled = true;\n      return;\n    }\n    case \"ERROR\": {\n      draft.error = action.data;\n      draft.loading = false;\n      draft.completed = true;\n      return;\n    }\n    default:\n      return;\n  }\n}\nconst useTaskEventStream = (taskId) => {\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const [state, dispatch] = useImmerReducer(reducer, {\n    cancelled: false,\n    loading: true,\n    completed: false,\n    stepLogs: {},\n    steps: {}\n  });\n  useEffect(() => {\n    let didCancel = false;\n    let subscription;\n    let logPusher;\n    let retryCount = 1;\n    const startStreamLogProcess = () => scaffolderApi.getTask(taskId).then(\n      (task) => {\n        if (didCancel) {\n          return;\n        }\n        dispatch({ type: \"INIT\", data: task });\n        const observable = scaffolderApi.streamLogs({ taskId });\n        const collectedLogEvents = new Array();\n        function emitLogs() {\n          if (collectedLogEvents.length) {\n            const logs = collectedLogEvents.splice(\n              0,\n              collectedLogEvents.length\n            );\n            dispatch({ type: \"LOGS\", data: logs });\n          }\n        }\n        logPusher = setInterval(emitLogs, 500);\n        subscription = observable.subscribe({\n          next: (event) => {\n            switch (event.type) {\n              case \"log\":\n                return collectedLogEvents.push(event);\n              case \"cancelled\":\n                dispatch({ type: \"CANCELLED\" });\n                return void 0;\n              case \"completion\":\n                emitLogs();\n                dispatch({ type: \"COMPLETED\", data: event });\n                return void 0;\n              default:\n                throw new Error(\n                  `Unhandled event type ${event.type} in observer`\n                );\n            }\n          },\n          error: (error) => {\n            emitLogs();\n            if (!error.message) {\n              error.message = `We cannot connect at the moment, trying again in some seconds... Retrying (${retryCount}/3 retries)`;\n            }\n            if (retryCount <= 3) {\n              setTimeout(() => {\n                retryCount += 1;\n                startStreamLogProcess();\n              }, 15e3);\n            }\n            dispatch({ type: \"ERROR\", data: error });\n          }\n        });\n      },\n      (error) => {\n        if (!didCancel) {\n          dispatch({ type: \"ERROR\", data: error });\n        }\n      }\n    );\n    startStreamLogProcess();\n    return () => {\n      didCancel = true;\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n      if (logPusher) {\n        clearInterval(logPusher);\n      }\n    };\n  }, [scaffolderApi, dispatch, taskId]);\n  return state;\n};\n\nfunction createScaffolderLayout(options) {\n  return {\n    expose() {\n      const LayoutDataHolder = () => null;\n      attachComponentData(LayoutDataHolder, LAYOUTS_KEY, options);\n      return LayoutDataHolder;\n    }\n  };\n}\nconst ScaffolderLayouts = () => null;\nattachComponentData(ScaffolderLayouts, LAYOUTS_WRAPPER_KEY, true);\n\nexport { ScaffolderFieldExtensions, ScaffolderLayouts, createScaffolderFieldExtension, createScaffolderLayout, useCustomFieldExtensions, useCustomLayouts, useTaskEventStream };\n//# sourceMappingURL=index.esm.js.map\n","import { scmIntegrationsApiRef, scmAuthApiRef } from '@backstage/integration-react';\nimport { scaffolderApiRef, useTemplateSecrets, createScaffolderFieldExtension, useTaskEventStream } from '@backstage/plugin-scaffolder-react';\nimport { parseEntityRef, stringifyEntityRef, KubernetesValidatorFunctions, RELATION_OWNED_BY, makeValidator } from '@backstage/catalog-model';\nimport { ResponseError, NotFoundError } from '@backstage/errors';\nimport qs from 'qs';\nimport ObservableImpl from 'zen-observable';\nimport { EventSourcePolyfill } from 'event-source-polyfill';\nimport { CATALOG_FILTER_EXISTS } from '@backstage/catalog-client';\nimport { useApi, identityApiRef, createExternalRouteRef, createRouteRef, createSubRouteRef, errorApiRef, createPlugin, createApiFactory, discoveryApiRef, fetchApiRef, createRoutableExtension, alertApiRef, useRouteRef } from '@backstage/core-plugin-api';\nimport { catalogApiRef, humanizeEntityRef, useEntityTypeFilter } from '@backstage/plugin-catalog-react';\nimport { TextField, Box, Typography, Divider, FormControl as FormControl$1, FormControlLabel, Checkbox, makeStyles, useTheme, IconButton, Popover, MenuList, MenuItem, ListItemIcon, ListItemText, Paper, Button } from '@material-ui/core';\nimport FormControl from '@material-ui/core/FormControl';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport React, { useCallback, useEffect, useState, useMemo } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { z } from 'zod';\nimport zodToJsonSchema from 'zod-to-json-schema';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { Select, Progress, Page, Header, Content, ErrorPanel } from '@backstage/core-components';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport useEffectOnce from 'react-use/lib/useEffectOnce';\nimport { Autocomplete as Autocomplete$1 } from '@material-ui/lab';\nimport capitalize from 'lodash/capitalize';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAsync as useAsync$1 } from '@react-hookz/web';\nimport Cancel from '@material-ui/icons/Cancel';\nimport Retry from '@material-ui/icons/Repeat';\nimport Toc from '@material-ui/icons/Toc';\nimport ControlPointIcon from '@material-ui/icons/ControlPoint';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport { DefaultTemplateOutputs, TaskSteps, TaskLogStream } from '@backstage/plugin-scaffolder-react/alpha';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ScaffolderClient {\n  constructor(options) {\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"scmIntegrationsApi\");\n    __publicField(this, \"fetchApi\");\n    __publicField(this, \"identityApi\");\n    __publicField(this, \"useLongPollingLogs\");\n    var _a, _b;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = (_a = options.fetchApi) != null ? _a : { fetch };\n    this.scmIntegrationsApi = options.scmIntegrationsApi;\n    this.useLongPollingLogs = (_b = options.useLongPollingLogs) != null ? _b : false;\n    this.identityApi = options.identityApi;\n  }\n  async listTasks(options) {\n    if (!this.identityApi) {\n      throw new Error(\n        \"IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method\"\n      );\n    }\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const { userEntityRef } = await this.identityApi.getBackstageIdentity();\n    const query = qs.stringify(\n      options.filterByOwnership === \"owned\" ? { createdBy: userEntityRef } : {}\n    );\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/tasks?${query}`);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  async getIntegrationsList(options) {\n    const integrations = [\n      ...this.scmIntegrationsApi.azure.list(),\n      ...this.scmIntegrationsApi.bitbucket.list().filter(\n        (item) => !this.scmIntegrationsApi.bitbucketCloud.byHost(item.config.host) && !this.scmIntegrationsApi.bitbucketServer.byHost(item.config.host)\n      ),\n      ...this.scmIntegrationsApi.bitbucketCloud.list(),\n      ...this.scmIntegrationsApi.bitbucketServer.list(),\n      ...this.scmIntegrationsApi.gerrit.list(),\n      ...this.scmIntegrationsApi.github.list(),\n      ...this.scmIntegrationsApi.gitlab.list()\n    ].map((c) => ({ type: c.type, title: c.title, host: c.config.host })).filter((c) => options.allowedHosts.includes(c.host));\n    return {\n      integrations\n    };\n  }\n  async getTemplateParameterSchema(templateRef) {\n    const { namespace, kind, name } = parseEntityRef(templateRef, {\n      defaultKind: \"template\"\n    });\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const templatePath = [namespace, kind, name].map((s) => encodeURIComponent(s)).join(\"/\");\n    const url = `${baseUrl}/v2/templates/${templatePath}/parameter-schema`;\n    const response = await this.fetchApi.fetch(url);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const schema = await response.json();\n    return schema;\n  }\n  async scaffold(options) {\n    const { templateRef, values, secrets = {} } = options;\n    const url = `${await this.discoveryApi.getBaseUrl(\"scaffolder\")}/v2/tasks`;\n    const response = await this.fetchApi.fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        templateRef,\n        values: { ...values },\n        secrets\n      })\n    });\n    if (response.status !== 201) {\n      const status = `${response.status} ${response.statusText}`;\n      const body = await response.text();\n      throw new Error(`Backend request failed, ${status} ${body.trim()}`);\n    }\n    const { id } = await response.json();\n    return { taskId: id };\n  }\n  async getTask(taskId) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const url = `${baseUrl}/v2/tasks/${encodeURIComponent(taskId)}`;\n    const response = await this.fetchApi.fetch(url);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  streamLogs(options) {\n    if (this.useLongPollingLogs) {\n      return this.streamLogsPolling(options);\n    }\n    return this.streamLogsEventStream(options);\n  }\n  async dryRun(options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/dry-run`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        template: options.template,\n        values: options.values,\n        secrets: options.secrets,\n        directoryContents: options.directoryContents\n      })\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return response.json();\n  }\n  streamLogsEventStream({\n    taskId,\n    after\n  }) {\n    return new ObservableImpl((subscriber) => {\n      var _a;\n      const params = new URLSearchParams();\n      if (after !== void 0) {\n        params.set(\"after\", String(Number(after)));\n      }\n      Promise.all([\n        this.discoveryApi.getBaseUrl(\"scaffolder\"),\n        (_a = this.identityApi) == null ? void 0 : _a.getCredentials()\n      ]).then(\n        ([baseUrl, credentials]) => {\n          const url = `${baseUrl}/v2/tasks/${encodeURIComponent(\n            taskId\n          )}/eventstream`;\n          const processEvent = (event) => {\n            if (event.data) {\n              try {\n                subscriber.next(JSON.parse(event.data));\n              } catch (ex) {\n                subscriber.error(ex);\n              }\n            }\n          };\n          const eventSource = new EventSourcePolyfill(url, {\n            withCredentials: true,\n            headers: (credentials == null ? void 0 : credentials.token) ? { Authorization: `Bearer ${credentials.token}` } : {}\n          });\n          eventSource.addEventListener(\"log\", processEvent);\n          eventSource.addEventListener(\"cancelled\", processEvent);\n          eventSource.addEventListener(\"completion\", (event) => {\n            processEvent(event);\n            eventSource.close();\n            subscriber.complete();\n          });\n          eventSource.addEventListener(\"error\", (event) => {\n            subscriber.error(event);\n          });\n        },\n        (error) => {\n          subscriber.error(error);\n        }\n      );\n    });\n  }\n  streamLogsPolling({\n    taskId,\n    after: inputAfter\n  }) {\n    let after = inputAfter;\n    return new ObservableImpl((subscriber) => {\n      this.discoveryApi.getBaseUrl(\"scaffolder\").then(async (baseUrl) => {\n        while (!subscriber.closed) {\n          const url = `${baseUrl}/v2/tasks/${encodeURIComponent(\n            taskId\n          )}/events?${qs.stringify({ after })}`;\n          const response = await this.fetchApi.fetch(url);\n          if (!response.ok) {\n            await new Promise((resolve) => setTimeout(resolve, 1e3));\n            continue;\n          }\n          const logs = await response.json();\n          for (const event of logs) {\n            after = Number(event.id);\n            subscriber.next(event);\n            if (event.type === \"completion\") {\n              subscriber.complete();\n              return;\n            }\n          }\n        }\n      });\n    });\n  }\n  async listActions() {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/actions`);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  async cancelTask(taskId) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const url = `${baseUrl}/v2/tasks/${encodeURIComponent(taskId)}/cancel`;\n    const response = await this.fetchApi.fetch(url, {\n      method: \"POST\"\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n}\n\nfunction makeFieldSchemaFromZod(returnSchema, uiOptionsSchema) {\n  return {\n    schema: {\n      returnValue: zodToJsonSchema(returnSchema),\n      uiOptions: uiOptionsSchema ? zodToJsonSchema(uiOptionsSchema) : void 0\n    },\n    type: null,\n    uiOptionsType: null\n  };\n}\n\nconst entityQueryFilterExpressionSchema = z.record(\n  z.string().or(z.object({ exists: z.boolean().optional() })).or(z.array(z.string()))\n);\nconst EntityPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    /**\n     * @deprecated Use `catalogFilter` instead.\n     */\n    allowedKinds: z.array(z.string()).optional().describe(\n      \"DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from\"\n    ),\n    defaultKind: z.string().optional().describe(\n      \"The default entity kind. Options of this kind will not be prefixed.\"\n    ),\n    allowArbitraryValues: z.boolean().optional().describe(\"Whether to allow arbitrary user input. Defaults to true\"),\n    defaultNamespace: z.union([z.string(), z.literal(false)]).optional().describe(\n      \"The default namespace. Options with this namespace will not be prefixed.\"\n    ),\n    catalogFilter: z.array(entityQueryFilterExpressionSchema).or(entityQueryFilterExpressionSchema).optional().describe(\"List of key-value filter expression for entities\")\n  })\n);\nconst EntityPickerSchema = EntityPickerFieldSchema.schema;\n\nconst EntityPicker = (props) => {\n  var _a, _b, _c, _d, _e;\n  const {\n    onChange,\n    schema: { title = \"Entity\", description = \"An entity from the catalog\" },\n    required,\n    uiSchema,\n    rawErrors,\n    formData,\n    idSchema\n  } = props;\n  const catalogFilter = buildCatalogFilter(uiSchema);\n  const defaultKind = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.defaultKind;\n  const defaultNamespace = ((_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.defaultNamespace) || void 0;\n  const catalogApi = useApi(catalogApiRef);\n  const { value: entities, loading } = useAsync(async () => {\n    const { items } = await catalogApi.getEntities(\n      catalogFilter ? { filter: catalogFilter } : void 0\n    );\n    return items;\n  });\n  const allowArbitraryValues = (_d = (_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.allowArbitraryValues) != null ? _d : true;\n  const getLabel = useCallback(\n    (ref) => {\n      try {\n        return humanizeEntityRef(\n          parseEntityRef(ref, { defaultKind, defaultNamespace }),\n          {\n            defaultKind,\n            defaultNamespace\n          }\n        );\n      } catch (err) {\n        return ref;\n      }\n    },\n    [defaultKind, defaultNamespace]\n  );\n  const onSelect = useCallback(\n    (_, ref, reason) => {\n      if (typeof ref !== \"string\") {\n        onChange(ref ? stringifyEntityRef(ref) : void 0);\n      } else {\n        if (reason === \"blur\" || reason === \"create-option\") {\n          let entityRef = ref;\n          try {\n            entityRef = stringifyEntityRef(\n              parseEntityRef(ref, {\n                defaultKind,\n                defaultNamespace\n              })\n            );\n          } catch (err) {\n          }\n          if (formData !== ref || allowArbitraryValues) {\n            onChange(entityRef);\n          }\n        }\n      }\n    },\n    [onChange, formData, defaultKind, defaultNamespace, allowArbitraryValues]\n  );\n  const selectedEntity = (_e = entities == null ? void 0 : entities.find((e) => stringifyEntityRef(e) === formData)) != null ? _e : allowArbitraryValues && formData ? getLabel(formData) : \"\";\n  useEffect(() => {\n    if ((entities == null ? void 0 : entities.length) === 1 && selectedEntity === \"\") {\n      onChange(stringifyEntityRef(entities[0]));\n    }\n  }, [entities, onChange, selectedEntity]);\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !formData\n    },\n    /* @__PURE__ */ React.createElement(\n      Autocomplete,\n      {\n        disabled: (entities == null ? void 0 : entities.length) === 1,\n        id: idSchema == null ? void 0 : idSchema.$id,\n        value: selectedEntity,\n        loading,\n        onChange: onSelect,\n        options: entities || [],\n        getOptionLabel: (option) => (\n          // option can be a string due to freeSolo.\n          typeof option === \"string\" ? option : humanizeEntityRef(option, { defaultKind, defaultNamespace })\n        ),\n        autoSelect: true,\n        freeSolo: allowArbitraryValues,\n        renderInput: (params) => /* @__PURE__ */ React.createElement(\n          TextField,\n          {\n            ...params,\n            label: title,\n            margin: \"dense\",\n            helperText: description,\n            FormHelperTextProps: { margin: \"dense\", style: { marginLeft: 0 } },\n            variant: \"outlined\",\n            required,\n            InputProps: params.InputProps\n          }\n        )\n      }\n    )\n  );\n};\nfunction convertOpsValues(value) {\n  if (typeof value === \"object\" && value.exists) {\n    return CATALOG_FILTER_EXISTS;\n  }\n  return value == null ? void 0 : value.toString();\n}\nfunction convertSchemaFiltersToQuery(schemaFilters) {\n  const query = {};\n  for (const [key, value] of Object.entries(schemaFilters)) {\n    if (Array.isArray(value)) {\n      query[key] = value;\n    } else {\n      query[key] = convertOpsValues(value);\n    }\n  }\n  return query;\n}\nfunction buildCatalogFilter(uiSchema) {\n  var _a, _b;\n  const allowedKinds = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.allowedKinds;\n  const catalogFilter = ((_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.catalogFilter) || allowedKinds && { kind: allowedKinds };\n  if (!catalogFilter) {\n    return void 0;\n  }\n  if (Array.isArray(catalogFilter)) {\n    return catalogFilter.map(convertSchemaFiltersToQuery);\n  }\n  return convertSchemaFiltersToQuery(catalogFilter);\n}\n\nconst entityNamePickerValidation = (value, validation) => {\n  if (!KubernetesValidatorFunctions.isValidObjectName(value)) {\n    validation.addError(\n      \"Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.\"\n    );\n  }\n};\n\nconst EntityNamePickerFieldSchema = makeFieldSchemaFromZod(z.string());\nconst EntityNamePickerSchema = EntityNamePickerFieldSchema.schema;\n\nconst EntityNamePicker = (props) => {\n  const {\n    onChange,\n    required,\n    schema: { title = \"Name\", description = \"Unique name of the component\" },\n    rawErrors,\n    formData,\n    uiSchema: { \"ui:autofocus\": autoFocus },\n    idSchema,\n    placeholder\n  } = props;\n  return /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      id: idSchema == null ? void 0 : idSchema.$id,\n      label: title,\n      placeholder,\n      helperText: description,\n      required,\n      value: formData != null ? formData : \"\",\n      onChange: ({ target: { value } }) => onChange(value),\n      margin: \"normal\",\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !formData,\n      inputProps: { autoFocus }\n    }\n  );\n};\n\nconst OwnerPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    /**\n     * @deprecated Use `catalogFilter` instead.\n     */\n    allowedKinds: z.array(z.string()).default([\"Group\", \"User\"]).optional().describe(\n      \"DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User\"\n    ),\n    allowArbitraryValues: z.boolean().optional().describe(\"Whether to allow arbitrary user input. Defaults to true\"),\n    defaultNamespace: z.union([z.string(), z.literal(false)]).optional().describe(\n      \"The default namespace. Options with this namespace will not be prefixed.\"\n    ),\n    catalogFilter: z.array(entityQueryFilterExpressionSchema).or(entityQueryFilterExpressionSchema).optional().describe(\"List of key-value filter expression for entities\")\n  })\n);\nconst OwnerPickerSchema = OwnerPickerFieldSchema.schema;\n\nconst OwnerPicker = (props) => {\n  var _a, _b, _c, _d, _e;\n  const {\n    schema: { title = \"Owner\", description = \"The owner of the component\" },\n    uiSchema,\n    ...restProps\n  } = props;\n  const defaultNamespace = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.defaultNamespace;\n  const allowedKinds = (_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.allowedKinds;\n  const catalogFilter = ((_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.catalogFilter) || {\n    kind: allowedKinds || [\"Group\", \"User\"]\n  };\n  const ownerUiSchema = {\n    ...uiSchema,\n    \"ui:options\": {\n      catalogFilter,\n      defaultKind: \"Group\",\n      allowArbitraryValues: (_e = (_d = uiSchema[\"ui:options\"]) == null ? void 0 : _d.allowArbitraryValues) != null ? _e : true,\n      ...defaultNamespace !== void 0 ? { defaultNamespace } : {}\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    EntityPicker,\n    {\n      ...restProps,\n      schema: { title, description },\n      uiSchema: ownerUiSchema\n    }\n  );\n};\n\nconst RepoUrlPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    allowedHosts: z.array(z.string()).optional().describe(\"List of allowed SCM platform hosts\"),\n    allowedOrganizations: z.array(z.string()).optional().describe(\"List of allowed organizations in the given SCM platform\"),\n    allowedOwners: z.array(z.string()).optional().describe(\"List of allowed owners in the given SCM platform\"),\n    allowedProjects: z.array(z.string()).optional().describe(\"List of allowed projects in the given SCM platform\"),\n    allowedRepos: z.array(z.string()).optional().describe(\"List of allowed repos in the given SCM platform\"),\n    requestUserCredentials: z.object({\n      secretsKey: z.string().describe(\n        \"Key used within the template secrets context to store the credential\"\n      ),\n      additionalScopes: z.object({\n        gerrit: z.array(z.string()).optional().describe(\"Additional Gerrit scopes to request\"),\n        github: z.array(z.string()).optional().describe(\"Additional GitHub scopes to request\"),\n        gitlab: z.array(z.string()).optional().describe(\"Additional GitLab scopes to request\"),\n        bitbucket: z.array(z.string()).optional().describe(\"Additional BitBucket scopes to request\"),\n        azure: z.array(z.string()).optional().describe(\"Additional Azure scopes to request\")\n      }).optional().describe(\"Additional permission scopes to request\")\n    }).optional().describe(\n      \"If defined will request user credentials to auth against the given SCM platform\"\n    )\n  })\n);\nconst RepoUrlPickerSchema = RepoUrlPickerFieldSchema.schema;\n\nconst repoPickerValidation = (value, validation, context) => {\n  var _a, _b;\n  try {\n    const { host, searchParams } = new URL(`https://${value}`);\n    const integrationApi = context.apiHolder.get(scmIntegrationsApiRef);\n    if (!host) {\n      validation.addError(\n        \"Incomplete repository location provided, host not provided\"\n      );\n    } else {\n      if (((_a = integrationApi == null ? void 0 : integrationApi.byHost(host)) == null ? void 0 : _a.type) === \"bitbucket\") {\n        if (host === \"bitbucket.org\" && !searchParams.get(\"workspace\")) {\n          validation.addError(\n            \"Incomplete repository location provided, workspace not provided\"\n          );\n        }\n        if (!searchParams.get(\"project\")) {\n          validation.addError(\n            \"Incomplete repository location provided, project not provided\"\n          );\n        }\n      } else if (((_b = integrationApi == null ? void 0 : integrationApi.byHost(host)) == null ? void 0 : _b.type) !== \"gerrit\") {\n        if (!searchParams.get(\"owner\")) {\n          validation.addError(\n            \"Incomplete repository location provided, owner not provided\"\n          );\n        }\n      }\n      if (!searchParams.get(\"repo\")) {\n        validation.addError(\n          \"Incomplete repository location provided, repo not provided\"\n        );\n      }\n    }\n  } catch {\n    validation.addError(\"Unable to parse the Repository URL\");\n  }\n};\n\nconst GithubRepoPicker = (props) => {\n  const { allowedOwners = [], rawErrors, state, onChange } = props;\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n    },\n    (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Owner Available\",\n        onChange: (s) => onChange({ owner: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedOwners.length === 1,\n        selected: owner,\n        items: ownerItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"ownerInput\" }, \"Owner\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"ownerInput\",\n        onChange: (e) => onChange({ owner: e.target.value }),\n        value: owner\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The organization, user or project that this repo will belong to\")\n  ));\n};\n\nconst GitlabRepoPicker = (props) => {\n  const { allowedOwners = [], state, onChange, rawErrors } = props;\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n    },\n    (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Owner Available\",\n        onChange: (selected) => onChange({\n          owner: String(Array.isArray(selected) ? selected[0] : selected)\n        }),\n        disabled: allowedOwners.length === 1,\n        selected: owner,\n        items: ownerItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"ownerInput\" }, \"Owner\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"ownerInput\",\n        onChange: (e) => onChange({ owner: e.target.value }),\n        value: owner\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.\")\n  ));\n};\n\nconst AzureRepoPicker = (props) => {\n  const {\n    allowedOrganizations = [],\n    allowedOwners = [],\n    rawErrors,\n    state,\n    onChange\n  } = props;\n  const organizationItems = allowedOrganizations ? allowedOrganizations.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { organization, owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !organization\n    },\n    (allowedOrganizations == null ? void 0 : allowedOrganizations.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Organization\",\n        onChange: (s) => onChange({ organization: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedOrganizations.length === 1,\n        selected: organization,\n        items: organizationItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"orgInput\" }, \"Organization\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"orgInput\",\n        onChange: (e) => onChange({ organization: e.target.value }),\n        value: organization\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Organization that this repo will belong to\")\n  ), /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n    },\n    (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Owner\",\n        onChange: (s) => onChange({ owner: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedOwners.length === 1,\n        selected: owner,\n        items: ownerItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"ownerInput\" }, \"Project\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"ownerInput\",\n        onChange: (e) => onChange({ owner: e.target.value }),\n        value: owner\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Project that this repo will belong to\")\n  ));\n};\n\nconst BitbucketRepoPicker = (props) => {\n  const {\n    allowedOwners = [],\n    allowedProjects = [],\n    onChange,\n    rawErrors,\n    state\n  } = props;\n  const { host, workspace, project } = state;\n  const ownerItems = allowedOwners ? allowedOwners == null ? void 0 : allowedOwners.map((i) => ({ label: i, value: i })) : [];\n  const projectItems = allowedProjects ? allowedProjects == null ? void 0 : allowedProjects.map((i) => ({ label: i, value: i })) : [];\n  useEffect(() => {\n    if (host === \"bitbucket.org\" && allowedOwners.length) {\n      onChange({ workspace: allowedOwners[0] });\n    }\n  }, [allowedOwners, host, onChange]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, host === \"bitbucket.org\" && /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !workspace\n    },\n    (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Allowed Workspaces\",\n        onChange: (s) => onChange({ workspace: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedOwners.length === 1,\n        selected: workspace,\n        items: ownerItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"workspaceInput\" }, \"Workspace\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"workspaceInput\",\n        onChange: (e) => onChange({ workspace: e.target.value }),\n        value: workspace\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Workspace that this repo will belong to\")\n  ), /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !project\n    },\n    (allowedProjects == null ? void 0 : allowedProjects.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Allowed Projects\",\n        onChange: (s) => onChange({ project: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedProjects.length === 1,\n        selected: project,\n        items: projectItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"projectInput\" }, \"Project\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"projectInput\",\n        onChange: (e) => onChange({ project: e.target.value }),\n        value: project\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Project that this repo will belong to\")\n  ));\n};\n\nconst GerritRepoPicker = (props) => {\n  const { onChange, rawErrors, state } = props;\n  const { workspace, owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(FormControl, { margin: \"normal\", error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !workspace }, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"ownerInput\" }, \"Owner\"), /* @__PURE__ */ React.createElement(\n    Input,\n    {\n      id: \"ownerInput\",\n      onChange: (e) => onChange({ owner: e.target.value }),\n      value: owner\n    }\n  ), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The owner of the project (optional)\")), /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !workspace\n    },\n    /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"parentInput\" }, \"Parent\"),\n    /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"parentInput\",\n        onChange: (e) => onChange({ workspace: e.target.value }),\n        value: workspace\n      }\n    ),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The project parent that the repo will belong to\")\n  ));\n};\n\nconst RepoUrlPickerHost = (props) => {\n  const { host, hosts, onChange, rawErrors } = props;\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const { value: { integrations } = { integrations: [] }, loading } = useAsync(\n    async () => {\n      return await scaffolderApi.getIntegrationsList({\n        allowedHosts: hosts != null ? hosts : []\n      });\n    }\n  );\n  useEffect(() => {\n    if (!host) {\n      if (hosts == null ? void 0 : hosts.length) {\n        onChange(hosts[0]);\n      } else if (integrations == null ? void 0 : integrations.length) {\n        onChange(integrations[0].host);\n      }\n    }\n  }, [hosts, host, onChange, integrations]);\n  const hostsOptions = integrations ? integrations.filter((i) => (hosts == null ? void 0 : hosts.length) ? hosts == null ? void 0 : hosts.includes(i.host) : true).map((i) => ({ label: i.title, value: i.host })) : [{ label: \"Loading...\", value: \"loading\" }];\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !host\n    },\n    /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        disabled: (hosts == null ? void 0 : hosts.length) === 1,\n        label: \"Host\",\n        onChange: (s) => onChange(String(Array.isArray(s) ? s[0] : s)),\n        selected: host,\n        items: hostsOptions,\n        \"data-testid\": \"host-select\"\n      }\n    ),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The host where the repository will be created\")\n  ));\n};\n\nconst RepoUrlPickerRepoName = (props) => {\n  const { repoName, allowedRepos, onChange, rawErrors } = props;\n  useEffect(() => {\n    if (!repoName) {\n      if (allowedRepos == null ? void 0 : allowedRepos.length) {\n        onChange(allowedRepos[0]);\n      }\n    }\n  }, [allowedRepos, repoName, onChange]);\n  const repoItems = allowedRepos ? allowedRepos.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !repoName\n    },\n    (allowedRepos == null ? void 0 : allowedRepos.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Repositories Available\",\n        onChange: (selected) => onChange(String(Array.isArray(selected) ? selected[0] : selected)),\n        disabled: allowedRepos.length === 1,\n        selected: repoName,\n        items: repoItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"repoNameInput\" }, \"Repository\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"repoNameInput\",\n        onChange: (e) => onChange(String(e.target.value)),\n        value: repoName\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The name of the repository\")\n  ));\n};\n\nfunction serializeRepoPickerUrl(data) {\n  if (!data.host) {\n    return void 0;\n  }\n  const params = new URLSearchParams();\n  if (data.owner) {\n    params.set(\"owner\", data.owner);\n  }\n  if (data.repoName) {\n    params.set(\"repo\", data.repoName);\n  }\n  if (data.organization) {\n    params.set(\"organization\", data.organization);\n  }\n  if (data.workspace) {\n    params.set(\"workspace\", data.workspace);\n  }\n  if (data.project) {\n    params.set(\"project\", data.project);\n  }\n  return `${data.host}?${params.toString()}`;\n}\nfunction parseRepoPickerUrl(url) {\n  let host = \"\";\n  let owner = \"\";\n  let repoName = \"\";\n  let organization = \"\";\n  let workspace = \"\";\n  let project = \"\";\n  try {\n    if (url) {\n      const parsed = new URL(`https://${url}`);\n      host = parsed.host;\n      owner = parsed.searchParams.get(\"owner\") || \"\";\n      repoName = parsed.searchParams.get(\"repo\") || \"\";\n      organization = parsed.searchParams.get(\"organization\") || \"\";\n      workspace = parsed.searchParams.get(\"workspace\") || \"\";\n      project = parsed.searchParams.get(\"project\") || \"\";\n    }\n  } catch {\n  }\n  return { host, owner, repoName, organization, workspace, project };\n}\n\nconst RepoUrlPicker = (props) => {\n  var _a, _b;\n  const { uiSchema, onChange, rawErrors, formData, schema } = props;\n  const [state, setState] = useState(\n    parseRepoPickerUrl(formData)\n  );\n  const integrationApi = useApi(scmIntegrationsApiRef);\n  const scmAuthApi = useApi(scmAuthApiRef);\n  const { setSecrets } = useTemplateSecrets();\n  const allowedHosts = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedHosts) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedOrganizations = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedOrganizations) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedOwners = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedOwners) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedProjects = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedProjects) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedRepos = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedRepos) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const { owner, organization, project, repoName } = state;\n  useEffect(() => {\n    onChange(serializeRepoPickerUrl(state));\n  }, [state, onChange]);\n  useEffect(() => {\n    if (allowedOrganizations.length > 0 && !organization) {\n      setState((prevState) => ({\n        ...prevState,\n        organization: allowedOrganizations[0]\n      }));\n    }\n  }, [setState, allowedOrganizations, organization]);\n  useEffect(() => {\n    if (allowedOwners.length > 0 && !owner) {\n      setState((prevState) => ({\n        ...prevState,\n        owner: allowedOwners[0]\n      }));\n    }\n  }, [setState, allowedOwners, owner]);\n  useEffect(() => {\n    if (allowedProjects.length > 0 && !project) {\n      setState((prevState) => ({\n        ...prevState,\n        project: allowedProjects[0]\n      }));\n    }\n  }, [setState, allowedProjects, project]);\n  useEffect(() => {\n    if (allowedRepos.length > 0 && !repoName) {\n      setState((prevState) => ({ ...prevState, repoName: allowedRepos[0] }));\n    }\n  }, [setState, allowedRepos, repoName]);\n  const updateLocalState = useCallback(\n    (newState) => {\n      setState((prevState) => ({ ...prevState, ...newState }));\n    },\n    [setState]\n  );\n  useDebounce(\n    async () => {\n      var _a2;\n      const { requestUserCredentials } = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) != null ? _a2 : {};\n      const workspace = state.owner ? state.owner : state.project;\n      if (!requestUserCredentials || !(state.host && workspace && state.repoName)) {\n        return;\n      }\n      const [encodedHost, encodedRepoName] = [state.host, state.repoName].map(\n        encodeURIComponent\n      );\n      const { token } = await scmAuthApi.getCredentials({\n        url: `https://${encodedHost}/${workspace}/${encodedRepoName}`,\n        additionalScope: {\n          repoWrite: true,\n          customScopes: requestUserCredentials.additionalScopes\n        }\n      });\n      setSecrets({ [requestUserCredentials.secretsKey]: token });\n    },\n    500,\n    [state, uiSchema]\n  );\n  const hostType = (_b = state.host && ((_a = integrationApi.byHost(state.host)) == null ? void 0 : _a.type)) != null ? _b : null;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, schema.title && /* @__PURE__ */ React.createElement(Box, { my: 1 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\" }, schema.title), /* @__PURE__ */ React.createElement(Divider, null)), schema.description && /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, schema.description), /* @__PURE__ */ React.createElement(\n    RepoUrlPickerHost,\n    {\n      host: state.host,\n      hosts: allowedHosts,\n      onChange: (host) => setState((prevState) => ({ ...prevState, host })),\n      rawErrors\n    }\n  ), hostType === \"github\" && /* @__PURE__ */ React.createElement(\n    GithubRepoPicker,\n    {\n      allowedOwners,\n      onChange: updateLocalState,\n      rawErrors,\n      state\n    }\n  ), hostType === \"gitlab\" && /* @__PURE__ */ React.createElement(\n    GitlabRepoPicker,\n    {\n      allowedOwners,\n      rawErrors,\n      state,\n      onChange: updateLocalState\n    }\n  ), hostType === \"bitbucket\" && /* @__PURE__ */ React.createElement(\n    BitbucketRepoPicker,\n    {\n      allowedOwners,\n      allowedProjects,\n      rawErrors,\n      state,\n      onChange: updateLocalState\n    }\n  ), hostType === \"azure\" && /* @__PURE__ */ React.createElement(\n    AzureRepoPicker,\n    {\n      allowedOrganizations,\n      allowedOwners,\n      rawErrors,\n      state,\n      onChange: updateLocalState\n    }\n  ), hostType === \"gerrit\" && /* @__PURE__ */ React.createElement(\n    GerritRepoPicker,\n    {\n      rawErrors,\n      state,\n      onChange: updateLocalState\n    }\n  ), /* @__PURE__ */ React.createElement(\n    RepoUrlPickerRepoName,\n    {\n      repoName: state.repoName,\n      allowedRepos,\n      onChange: (repo) => setState((prevState) => ({ ...prevState, repoName: repo })),\n      rawErrors\n    }\n  ));\n};\n\nconst OwnedEntityPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    allowedKinds: z.array(z.string()).optional().describe(\n      \"DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from\"\n    ),\n    defaultKind: z.string().optional().describe(\n      \"The default entity kind. Options of this kind will not be prefixed.\"\n    ),\n    allowArbitraryValues: z.boolean().optional().describe(\"Whether to allow arbitrary user input. Defaults to true\"),\n    defaultNamespace: z.union([z.string(), z.literal(false)]).optional().describe(\n      \"The default namespace. Options with this namespace will not be prefixed.\"\n    ),\n    catalogFilter: z.array(entityQueryFilterExpressionSchema).or(entityQueryFilterExpressionSchema).optional().describe(\"List of key-value filter expression for entities\")\n  })\n);\nconst OwnedEntityPickerSchema = OwnedEntityPickerFieldSchema.schema;\n\nconst OwnedEntityPicker = (props) => {\n  const {\n    schema: { title = \"Entity\", description = \"An entity from the catalog\" },\n    uiSchema,\n    required\n  } = props;\n  const identityApi = useApi(identityApiRef);\n  const { loading, value: identityRefs } = useAsync(async () => {\n    const identity = await identityApi.getBackstageIdentity();\n    return identity.ownershipEntityRefs;\n  });\n  if (loading)\n    return /* @__PURE__ */ React.createElement(\n      Autocomplete,\n      {\n        loading,\n        renderInput: (params) => /* @__PURE__ */ React.createElement(\n          TextField,\n          {\n            ...params,\n            label: title,\n            margin: \"dense\",\n            helperText: description,\n            FormHelperTextProps: { margin: \"dense\", style: { marginLeft: 0 } },\n            variant: \"outlined\",\n            required,\n            InputProps: params.InputProps\n          }\n        ),\n        options: []\n      }\n    );\n  const entityPickerUISchema = buildEntityPickerUISchema(\n    uiSchema,\n    identityRefs\n  );\n  return /* @__PURE__ */ React.createElement(EntityPicker, { ...props, uiSchema: entityPickerUISchema });\n};\nfunction buildEntityPickerUISchema(uiSchema, identityRefs) {\n  const uiOptions = (uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) || {};\n  const allowedKinds = uiOptions.allowedKinds;\n  const catalogFilter = {\n    ...uiOptions.catalogFilter,\n    ...allowedKinds ? {\n      kind: allowedKinds,\n      [`relations.${RELATION_OWNED_BY}`]: identityRefs || []\n    } : {\n      [`relations.${RELATION_OWNED_BY}`]: identityRefs || []\n    }\n  };\n  return {\n    \"ui:options\": {\n      catalogFilter\n    }\n  };\n}\n\nconst EntityTagsPickerFieldSchema = makeFieldSchemaFromZod(\n  z.array(z.string()),\n  z.object({\n    kinds: z.array(z.string()).optional().describe(\"List of kinds of entities to derive tags from\"),\n    showCounts: z.boolean().optional().describe(\"Whether to show usage counts per tag\"),\n    helperText: z.string().optional().describe(\"Helper text to display\")\n  })\n);\nconst EntityTagsPickerSchema = EntityTagsPickerFieldSchema.schema;\n\nconst EntityTagsPicker = (props) => {\n  var _a, _b, _c;\n  const { formData, onChange, uiSchema } = props;\n  const catalogApi = useApi(catalogApiRef);\n  const [tagOptions, setTagOptions] = useState([]);\n  const [inputValue, setInputValue] = useState(\"\");\n  const [inputError, setInputError] = useState(false);\n  const tagValidator = makeValidator().isValidTag;\n  const kinds = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.kinds;\n  const showCounts = (_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.showCounts;\n  const helperText = (_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.helperText;\n  const { loading, value: existingTags } = useAsync(async () => {\n    const facet = \"metadata.tags\";\n    const tagsRequest = { facets: [facet] };\n    if (kinds) {\n      tagsRequest.filter = { kind: kinds };\n    }\n    const { facets } = await catalogApi.getEntityFacets(tagsRequest);\n    const tagFacets = Object.fromEntries(\n      facets[facet].map(({ value, count }) => [value, count])\n    );\n    setTagOptions(\n      Object.keys(tagFacets).sort(\n        (a, b) => showCounts ? tagFacets[b] - tagFacets[a] : a.localeCompare(b)\n      )\n    );\n    return tagFacets;\n  });\n  const setTags = (_, values) => {\n    let hasError = false;\n    let addDuplicate = false;\n    const currentTags = formData || [];\n    if ((values == null ? void 0 : values.length) && currentTags.length < values.length) {\n      const newTag = values[values.length - 1] = values[values.length - 1].toLocaleLowerCase(\"en-US\").trim();\n      hasError = !tagValidator(newTag);\n      addDuplicate = currentTags.indexOf(newTag) !== -1;\n    }\n    setInputError(hasError);\n    setInputValue(!hasError ? \"\" : inputValue);\n    if (!hasError && !addDuplicate) {\n      onChange(values || []);\n    }\n  };\n  useEffectOnce(() => onChange(formData || []));\n  return /* @__PURE__ */ React.createElement(FormControl$1, { margin: \"normal\" }, /* @__PURE__ */ React.createElement(\n    Autocomplete$1,\n    {\n      multiple: true,\n      freeSolo: true,\n      filterSelectedOptions: true,\n      onChange: setTags,\n      value: formData || [],\n      inputValue,\n      loading,\n      options: tagOptions,\n      ChipProps: { size: \"small\" },\n      renderOption: (option) => showCounts ? `${option} (${existingTags == null ? void 0 : existingTags[option]})` : option,\n      renderInput: (params) => /* @__PURE__ */ React.createElement(\n        TextField,\n        {\n          ...params,\n          label: \"Tags\",\n          onChange: (e) => setInputValue(e.target.value),\n          error: inputError,\n          helperText: helperText != null ? helperText : \"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters\"\n        }\n      )\n    }\n  ));\n};\n\nconst registerComponentRouteRef = createExternalRouteRef({\n  id: \"register-component\",\n  optional: true\n});\nconst viewTechDocRouteRef = createExternalRouteRef({\n  id: \"view-techdoc\",\n  optional: true,\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst rootRouteRef = createRouteRef({\n  id: \"scaffolder\"\n});\nconst legacySelectedTemplateRouteRef = createSubRouteRef({\n  id: \"scaffolder/legacy/selected-template\",\n  parent: rootRouteRef,\n  path: \"/templates/:templateName\"\n});\nconst selectedTemplateRouteRef = createSubRouteRef({\n  id: \"scaffolder/selected-template\",\n  parent: rootRouteRef,\n  path: \"/templates/:namespace/:templateName\"\n});\nconst scaffolderTaskRouteRef = createSubRouteRef({\n  id: \"scaffolder/task\",\n  parent: rootRouteRef,\n  path: \"/tasks/:taskId\"\n});\nconst scaffolderListTaskRouteRef = createSubRouteRef({\n  id: \"scaffolder/list-tasks\",\n  parent: rootRouteRef,\n  path: \"/tasks\"\n});\nconst actionsRouteRef = createSubRouteRef({\n  id: \"scaffolder/actions\",\n  parent: rootRouteRef,\n  path: \"/actions\"\n});\nconst editRouteRef = createSubRouteRef({\n  id: \"scaffolder/edit\",\n  parent: rootRouteRef,\n  path: \"/edit\"\n});\n\nconst MyGroupsPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    title: z.string().default(\"Group\").describe(\"Group\"),\n    description: z.string().default(\"A group you are part of\").describe(\"The group to which the entity belongs\")\n  })\n);\nconst MyGroupsPickerSchema = MyGroupsPickerFieldSchema.schema;\n\nconst MyGroupsPicker = (props) => {\n  const {\n    schema: { title, description },\n    required,\n    rawErrors,\n    onChange\n  } = props;\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const errorApi = useApi(errorApiRef);\n  const [groups, setGroups] = useState([]);\n  const [selectedGroup, setSelectedGroup] = useState(null);\n  useAsync(async () => {\n    const { userEntityRef } = await identityApi.getBackstageIdentity();\n    if (!userEntityRef) {\n      errorApi.post(new NotFoundError(\"No user entity ref found\"));\n      return;\n    }\n    const { items } = await catalogApi.getEntities({\n      filter: {\n        kind: \"Group\",\n        [\"relations.hasMember\"]: [userEntityRef]\n      }\n    });\n    const groupValues = items.filter((e) => Boolean(e)).map((item) => {\n      var _a;\n      return {\n        label: (_a = item.metadata.title) != null ? _a : item.metadata.name,\n        ref: stringifyEntityRef(item)\n      };\n    });\n    setGroups(groupValues);\n  });\n  const updateChange = (_, value) => {\n    var _a;\n    setSelectedGroup(value);\n    onChange((_a = value == null ? void 0 : value.ref) != null ? _a : \"\");\n  };\n  return /* @__PURE__ */ React.createElement(\n    FormControl$1,\n    {\n      margin: \"normal\",\n      required,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0\n    },\n    /* @__PURE__ */ React.createElement(\n      Autocomplete$1,\n      {\n        id: \"OwnershipEntityRefPicker-dropdown\",\n        options: groups || [],\n        value: selectedGroup,\n        onChange: updateChange,\n        getOptionLabel: (group) => group.label,\n        renderInput: (params) => /* @__PURE__ */ React.createElement(\n          TextField,\n          {\n            ...params,\n            label: title,\n            margin: \"dense\",\n            helperText: description,\n            FormHelperTextProps: { margin: \"dense\", style: { marginLeft: 0 } },\n            variant: \"outlined\",\n            required\n          }\n        )\n      }\n    )\n  );\n};\n\nconst scaffolderPlugin = createPlugin({\n  id: \"scaffolder\",\n  apis: [\n    createApiFactory({\n      api: scaffolderApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        scmIntegrationsApi: scmIntegrationsApiRef,\n        fetchApi: fetchApiRef,\n        identityApi: identityApiRef\n      },\n      factory: ({ discoveryApi, scmIntegrationsApi, fetchApi, identityApi }) => new ScaffolderClient({\n        discoveryApi,\n        scmIntegrationsApi,\n        fetchApi,\n        identityApi\n      })\n    })\n  ],\n  routes: {\n    root: rootRouteRef,\n    selectedTemplate: selectedTemplateRouteRef,\n    ongoingTask: scaffolderTaskRouteRef,\n    actions: actionsRouteRef,\n    listTasks: scaffolderListTaskRouteRef,\n    edit: editRouteRef\n  },\n  externalRoutes: {\n    registerComponent: registerComponentRouteRef,\n    viewTechDoc: viewTechDocRouteRef\n  }\n});\nconst EntityPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: EntityPicker,\n    name: \"EntityPicker\",\n    schema: EntityPickerSchema\n  })\n);\nconst EntityNamePickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: EntityNamePicker,\n    name: \"EntityNamePicker\",\n    validation: entityNamePickerValidation,\n    schema: EntityNamePickerSchema\n  })\n);\nconst RepoUrlPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: RepoUrlPicker,\n    name: \"RepoUrlPicker\",\n    validation: repoPickerValidation,\n    schema: RepoUrlPickerSchema\n  })\n);\nconst OwnerPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: OwnerPicker,\n    name: \"OwnerPicker\",\n    schema: OwnerPickerSchema\n  })\n);\nconst MyGroupsPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: MyGroupsPicker,\n    name: \"MyGroupsPicker\",\n    schema: MyGroupsPickerSchema\n  })\n);\nconst ScaffolderPage = scaffolderPlugin.provide(\n  createRoutableExtension({\n    name: \"ScaffolderPage\",\n    component: () => import('./index-d04ace27.esm.js').then((m) => m.Router),\n    mountPoint: rootRouteRef\n  })\n);\nconst OwnedEntityPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: OwnedEntityPicker,\n    name: \"OwnedEntityPicker\",\n    schema: OwnedEntityPickerSchema\n  })\n);\nconst EntityTagsPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: EntityTagsPicker,\n    name: \"EntityTagsPicker\",\n    schema: EntityTagsPickerSchema\n  })\n);\nconst LegacyScaffolderPage = scaffolderPlugin.provide(\n  createRoutableExtension({\n    name: \"LegacyScaffolderPage\",\n    component: () => import('./Router-71bed7d3.esm.js').then((m) => m.LegacyRouter),\n    mountPoint: rootRouteRef\n  })\n);\n\nconst icon = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nconst TemplateTypePicker = () => {\n  const alertApi = useApi(alertApiRef);\n  const { error, loading, availableTypes, selectedTypes, setSelectedTypes } = useEntityTypeFilter();\n  if (loading)\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  if (!availableTypes)\n    return null;\n  if (error) {\n    alertApi.post({\n      message: `Failed to load entity types`,\n      severity: \"error\"\n    });\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      variant: \"button\",\n      component: \"label\",\n      htmlFor: \"categories-picker\"\n    },\n    \"Categories\"\n  ), /* @__PURE__ */ React.createElement(\n    Autocomplete$1,\n    {\n      id: \"categories-picker\",\n      multiple: true,\n      options: availableTypes,\n      value: selectedTypes,\n      onChange: (_, value) => setSelectedTypes(value),\n      renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(\n        FormControlLabel,\n        {\n          control: /* @__PURE__ */ React.createElement(\n            Checkbox,\n            {\n              icon,\n              checkedIcon,\n              checked: selected\n            }\n          ),\n          label: capitalize(option)\n        }\n      ),\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { \"data-testid\": \"categories-picker-expand\" }),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, { ...params, variant: \"outlined\" })\n    }\n  ));\n};\n\nconst useStyles$1 = makeStyles(() => ({\n  button: {\n    color: ({ fontColor }) => fontColor\n  }\n}));\nconst ContextMenu = (props) => {\n  const {\n    cancelEnabled,\n    logsVisible,\n    buttonBarVisible,\n    onStartOver,\n    onToggleLogs,\n    onToggleButtonBar,\n    taskId\n  } = props;\n  const { getPageTheme } = useTheme();\n  const pageTheme = getPageTheme({ themeId: \"website\" });\n  const classes = useStyles$1({ fontColor: pageTheme.fontColor });\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const [anchorEl, setAnchorEl] = useState();\n  const [{ status: cancelStatus }, { execute: cancel }] = useAsync$1(async () => {\n    if (taskId) {\n      await scaffolderApi.cancelTask(taskId);\n    }\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"aria-label\": \"more\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-haspopup\": \"true\",\n      onClick: (event) => {\n        setAnchorEl(event.currentTarget);\n      },\n      \"data-testid\": \"menu-button\",\n      className: classes.button\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  ), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open: Boolean(anchorEl),\n      onClose: () => setAnchorEl(void 0),\n      anchorEl,\n      anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n      transformOrigin: { vertical: \"top\", horizontal: \"right\" }\n    },\n    /* @__PURE__ */ React.createElement(MenuList, null, /* @__PURE__ */ React.createElement(MenuItem, { onClick: () => onToggleLogs == null ? void 0 : onToggleLogs(!logsVisible) }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Toc, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText, { primary: logsVisible ? \"Hide Logs\" : \"Show Logs\" })), /* @__PURE__ */ React.createElement(MenuItem, { onClick: () => onToggleButtonBar == null ? void 0 : onToggleButtonBar(!buttonBarVisible) }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(ControlPointIcon, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        primary: buttonBarVisible ? \"Hide Button Bar\" : \"Show Button Bar\"\n      }\n    )), /* @__PURE__ */ React.createElement(MenuItem, { onClick: onStartOver }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Retry, { fontSize: \"small\" })), /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Start Over\" })), /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        onClick: cancel,\n        disabled: !cancelEnabled || cancelStatus !== \"not-executed\",\n        \"data-testid\": \"cancel-task\"\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Cancel, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Cancel\" })\n    ))\n  ));\n};\n\nconst useStyles = makeStyles((theme) => ({\n  contentWrapper: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  buttonBar: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"right\"\n  },\n  cancelButton: {\n    marginRight: theme.spacing(1)\n  },\n  logsVisibilityButton: {\n    marginRight: theme.spacing(1)\n  }\n}));\nconst OngoingTask = (props) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n  const { taskId } = useParams();\n  const templateRouteRef = useRouteRef(selectedTemplateRouteRef);\n  const navigate = useNavigate();\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const taskStream = useTaskEventStream(taskId);\n  const classes = useStyles();\n  const steps = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = taskStream.task) == null ? void 0 : _a2.spec.steps.map((step) => {\n        var _a3;\n        return {\n          ...step,\n          ...(_a3 = taskStream == null ? void 0 : taskStream.steps) == null ? void 0 : _a3[step.id]\n        };\n      })) != null ? _b2 : [];\n    },\n    [taskStream]\n  );\n  const [logsVisible, setLogVisibleState] = useState(false);\n  const [buttonBarVisible, setButtonBarVisibleState] = useState(true);\n  useEffect(() => {\n    if (taskStream.error) {\n      setLogVisibleState(true);\n    }\n  }, [taskStream.error]);\n  useEffect(() => {\n    if (taskStream.completed && !taskStream.error) {\n      setButtonBarVisibleState(false);\n    }\n  }, [taskStream.error, taskStream.completed]);\n  const activeStep = useMemo(() => {\n    for (let i = steps.length - 1; i >= 0; i--) {\n      if (steps[i].status !== \"open\") {\n        return i;\n      }\n    }\n    return 0;\n  }, [steps]);\n  const startOver = useCallback(() => {\n    var _a2, _b2, _c2, _d2, _e2, _f2;\n    const { namespace, name } = (_d2 = (_c2 = (_b2 = (_a2 = taskStream.task) == null ? void 0 : _a2.spec.templateInfo) == null ? void 0 : _b2.entity) == null ? void 0 : _c2.metadata) != null ? _d2 : {};\n    const formData = (_f2 = (_e2 = taskStream.task) == null ? void 0 : _e2.spec.parameters) != null ? _f2 : {};\n    if (!namespace || !name) {\n      return;\n    }\n    navigate({\n      pathname: templateRouteRef({\n        namespace,\n        templateName: name\n      }),\n      search: `?${qs.stringify({ formData: JSON.stringify(formData) })}`\n    });\n  }, [\n    navigate,\n    (_a = taskStream.task) == null ? void 0 : _a.spec.parameters,\n    (_d = (_c = (_b = taskStream.task) == null ? void 0 : _b.spec.templateInfo) == null ? void 0 : _c.entity) == null ? void 0 : _d.metadata,\n    templateRouteRef\n  ]);\n  const [{ status: cancelStatus }, { execute: triggerCancel }] = useAsync$1(\n    async () => {\n      if (taskId) {\n        await scaffolderApi.cancelTask(taskId);\n      }\n    }\n  );\n  const Outputs = (_e = props.TemplateOutputsComponent) != null ? _e : DefaultTemplateOutputs;\n  const templateName = (_h = (_g = (_f = taskStream.task) == null ? void 0 : _f.spec.templateInfo) == null ? void 0 : _g.entity) == null ? void 0 : _h.metadata.name;\n  const cancelEnabled = !(taskStream.cancelled || taskStream.completed);\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"website\" }, /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      pageTitleOverride: `Run of ${templateName}`,\n      title: /* @__PURE__ */ React.createElement(\"div\", null, \"Run of \", /* @__PURE__ */ React.createElement(\"code\", null, templateName)),\n      subtitle: `Task ${taskId}`\n    },\n    /* @__PURE__ */ React.createElement(\n      ContextMenu,\n      {\n        cancelEnabled,\n        logsVisible,\n        buttonBarVisible,\n        onStartOver: startOver,\n        onToggleLogs: setLogVisibleState,\n        onToggleButtonBar: setButtonBarVisibleState,\n        taskId\n      }\n    )\n  ), /* @__PURE__ */ React.createElement(Content, { className: classes.contentWrapper }, taskStream.error ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2 }, /* @__PURE__ */ React.createElement(\n    ErrorPanel,\n    {\n      error: taskStream.error,\n      titleFormat: \"markdown\",\n      title: taskStream.error.message\n    }\n  )) : null, /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2 }, /* @__PURE__ */ React.createElement(\n    TaskSteps,\n    {\n      steps,\n      activeStep,\n      isComplete: taskStream.completed,\n      isError: Boolean(taskStream.error)\n    }\n  )), /* @__PURE__ */ React.createElement(Outputs, { output: taskStream.output }), buttonBarVisible ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2 }, /* @__PURE__ */ React.createElement(Paper, null, /* @__PURE__ */ React.createElement(Box, { padding: 2 }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.buttonBar }, /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      className: classes.cancelButton,\n      disabled: !cancelEnabled || cancelStatus !== \"not-executed\",\n      onClick: triggerCancel,\n      \"data-testid\": \"cancel-button\"\n    },\n    \"Cancel\"\n  ), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      className: classes.logsVisibilityButton,\n      color: \"primary\",\n      variant: \"outlined\",\n      onClick: () => setLogVisibleState(!logsVisible)\n    },\n    logsVisible ? \"Hide Logs\" : \"Show Logs\"\n  ), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      color: \"primary\",\n      disabled: cancelEnabled,\n      onClick: startOver\n    },\n    \"Start Over\"\n  ))))) : null, logsVisible ? /* @__PURE__ */ React.createElement(Box, { paddingBottom: 2, height: \"100%\" }, /* @__PURE__ */ React.createElement(Paper, { style: { height: \"100%\" } }, /* @__PURE__ */ React.createElement(Box, { padding: 2, height: \"100%\" }, /* @__PURE__ */ React.createElement(TaskLogStream, { logs: taskStream.stepLogs })))) : null));\n};\n\nexport { EntityNamePicker as A, entityNamePickerValidation as B, EntityNamePickerSchema as C, EntityTagsPicker as D, EntityPickerFieldExtension as E, EntityTagsPickerSchema as F, RepoUrlPicker as G, RepoUrlPickerSchema as H, OwnerPicker as I, OwnerPickerSchema as J, OwnedEntityPicker as K, LegacyScaffolderPage as L, MyGroupsPickerFieldExtension as M, OwnedEntityPickerSchema as N, OwnerPickerFieldExtension as O, MyGroupsPicker as P, RepoUrlPickerFieldExtension as R, ScaffolderClient as S, TemplateTypePicker as T, EntityNamePickerFieldExtension as a, EntityTagsPickerFieldExtension as b, OwnedEntityPickerFieldExtension as c, ScaffolderPage as d, OngoingTask as e, EntityPickerFieldSchema as f, OwnerPickerFieldSchema as g, RepoUrlPickerFieldSchema as h, repoPickerValidation as i, OwnedEntityPickerFieldSchema as j, EntityTagsPickerFieldSchema as k, MyGroupsPickerSchema as l, makeFieldSchemaFromZod as m, MyGroupsPickerFieldSchema as n, selectedTemplateRouteRef as o, editRouteRef as p, actionsRouteRef as q, rootRouteRef as r, scaffolderPlugin as s, scaffolderListTaskRouteRef as t, registerComponentRouteRef as u, viewTechDocRouteRef as v, scaffolderTaskRouteRef as w, legacySelectedTemplateRouteRef as x, EntityPicker as y, EntityPickerSchema as z };\n//# sourceMappingURL=OngoingTask-377f1a3a.esm.js.map\n","/** @license\r\n * eventsource.js\r\n * Available under MIT License (MIT)\r\n * https://github.com/Yaffle/EventSource/\r\n */\r\n\r\n/*jslint indent: 2, vars: true, plusplus: true */\r\n/*global setTimeout, clearTimeout */\r\n\r\n(function (global) {\r\n  \"use strict\";\r\n\r\n  var setTimeout = global.setTimeout;\r\n  var clearTimeout = global.clearTimeout;\r\n  var XMLHttpRequest = global.XMLHttpRequest;\r\n  var XDomainRequest = global.XDomainRequest;\r\n  var ActiveXObject = global.ActiveXObject;\r\n  var NativeEventSource = global.EventSource;\r\n\r\n  var document = global.document;\r\n  var Promise = global.Promise;\r\n  var fetch = global.fetch;\r\n  var Response = global.Response;\r\n  var TextDecoder = global.TextDecoder;\r\n  var TextEncoder = global.TextEncoder;\r\n  var AbortController = global.AbortController;\r\n\r\n  if (typeof window !== \"undefined\" && typeof document !== \"undefined\" && !(\"readyState\" in document) && document.body == null) { // Firefox 2\r\n    document.readyState = \"loading\";\r\n    window.addEventListener(\"load\", function (event) {\r\n      document.readyState = \"complete\";\r\n    }, false);\r\n  }\r\n\r\n  if (XMLHttpRequest == null && ActiveXObject != null) { // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest_in_IE6\r\n    XMLHttpRequest = function () {\r\n      return new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    };\r\n  }\r\n\r\n  if (Object.create == undefined) {\r\n    Object.create = function (C) {\r\n      function F(){}\r\n      F.prototype = C;\r\n      return new F();\r\n    };\r\n  }\r\n\r\n  if (!Date.now) {\r\n    Date.now = function now() {\r\n      return new Date().getTime();\r\n    };\r\n  }\r\n\r\n  // see #118 (Promise#finally with polyfilled Promise)\r\n  // see #123 (data URLs crash Edge)\r\n  // see #125 (CSP violations)\r\n  // see pull/#138\r\n  // => No way to polyfill Promise#finally\r\n\r\n  if (AbortController == undefined) {\r\n    var originalFetch2 = fetch;\r\n    fetch = function (url, options) {\r\n      var signal = options.signal;\r\n      return originalFetch2(url, {headers: options.headers, credentials: options.credentials, cache: options.cache}).then(function (response) {\r\n        var reader = response.body.getReader();\r\n        signal._reader = reader;\r\n        if (signal._aborted) {\r\n          signal._reader.cancel();\r\n        }\r\n        return {\r\n          status: response.status,\r\n          statusText: response.statusText,\r\n          headers: response.headers,\r\n          body: {\r\n            getReader: function () {\r\n              return reader;\r\n            }\r\n          }\r\n        };\r\n      });\r\n    };\r\n    AbortController = function () {\r\n      this.signal = {\r\n        _reader: null,\r\n        _aborted: false\r\n      };\r\n      this.abort = function () {\r\n        if (this.signal._reader != null) {\r\n          this.signal._reader.cancel();\r\n        }\r\n        this.signal._aborted = true;\r\n      };\r\n    };\r\n  }\r\n\r\n  function TextDecoderPolyfill() {\r\n    this.bitsNeeded = 0;\r\n    this.codePoint = 0;\r\n  }\r\n\r\n  TextDecoderPolyfill.prototype.decode = function (octets) {\r\n    function valid(codePoint, shift, octetsCount) {\r\n      if (octetsCount === 1) {\r\n        return codePoint >= 0x0080 >> shift && codePoint << shift <= 0x07FF;\r\n      }\r\n      if (octetsCount === 2) {\r\n        return codePoint >= 0x0800 >> shift && codePoint << shift <= 0xD7FF || codePoint >= 0xE000 >> shift && codePoint << shift <= 0xFFFF;\r\n      }\r\n      if (octetsCount === 3) {\r\n        return codePoint >= 0x010000 >> shift && codePoint << shift <= 0x10FFFF;\r\n      }\r\n      throw new Error();\r\n    }\r\n    function octetsCount(bitsNeeded, codePoint) {\r\n      if (bitsNeeded === 6 * 1) {\r\n        return codePoint >> 6 > 15 ? 3 : codePoint > 31 ? 2 : 1;\r\n      }\r\n      if (bitsNeeded === 6 * 2) {\r\n        return codePoint > 15 ? 3 : 2;\r\n      }\r\n      if (bitsNeeded === 6 * 3) {\r\n        return 3;\r\n      }\r\n      throw new Error();\r\n    }\r\n    var REPLACER = 0xFFFD;\r\n    var string = \"\";\r\n    var bitsNeeded = this.bitsNeeded;\r\n    var codePoint = this.codePoint;\r\n    for (var i = 0; i < octets.length; i += 1) {\r\n      var octet = octets[i];\r\n      if (bitsNeeded !== 0) {\r\n        if (octet < 128 || octet > 191 || !valid(codePoint << 6 | octet & 63, bitsNeeded - 6, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n          string += String.fromCharCode(codePoint);\r\n        }\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (octet >= 0 && octet <= 127) {\r\n          bitsNeeded = 0;\r\n          codePoint = octet;\r\n        } else if (octet >= 192 && octet <= 223) {\r\n          bitsNeeded = 6 * 1;\r\n          codePoint = octet & 31;\r\n        } else if (octet >= 224 && octet <= 239) {\r\n          bitsNeeded = 6 * 2;\r\n          codePoint = octet & 15;\r\n        } else if (octet >= 240 && octet <= 247) {\r\n          bitsNeeded = 6 * 3;\r\n          codePoint = octet & 7;\r\n        } else {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n        if (bitsNeeded !== 0 && !valid(codePoint, bitsNeeded, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n      } else {\r\n        bitsNeeded -= 6;\r\n        codePoint = codePoint << 6 | octet & 63;\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (codePoint <= 0xFFFF) {\r\n          string += String.fromCharCode(codePoint);\r\n        } else {\r\n          string += String.fromCharCode(0xD800 + (codePoint - 0xFFFF - 1 >> 10));\r\n          string += String.fromCharCode(0xDC00 + (codePoint - 0xFFFF - 1 & 0x3FF));\r\n        }\r\n      }\r\n    }\r\n    this.bitsNeeded = bitsNeeded;\r\n    this.codePoint = codePoint;\r\n    return string;\r\n  };\r\n\r\n  // Firefox < 38 throws an error with stream option\r\n  var supportsStreamOption = function () {\r\n    try {\r\n      return new TextDecoder().decode(new TextEncoder().encode(\"test\"), {stream: true}) === \"test\";\r\n    } catch (error) {\r\n      console.debug(\"TextDecoder does not support streaming option. Using polyfill instead: \" + error);\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // IE, Edge\r\n  if (TextDecoder == undefined || TextEncoder == undefined || !supportsStreamOption()) {\r\n    TextDecoder = TextDecoderPolyfill;\r\n  }\r\n\r\n  var k = function () {\r\n  };\r\n\r\n  function XHRWrapper(xhr) {\r\n    this.withCredentials = false;\r\n    this.readyState = 0;\r\n    this.status = 0;\r\n    this.statusText = \"\";\r\n    this.responseText = \"\";\r\n    this.onprogress = k;\r\n    this.onload = k;\r\n    this.onerror = k;\r\n    this.onreadystatechange = k;\r\n    this._contentType = \"\";\r\n    this._xhr = xhr;\r\n    this._sendTimeout = 0;\r\n    this._abort = k;\r\n  }\r\n\r\n  XHRWrapper.prototype.open = function (method, url) {\r\n    this._abort(true);\r\n\r\n    var that = this;\r\n    var xhr = this._xhr;\r\n    var state = 1;\r\n    var timeout = 0;\r\n\r\n    this._abort = function (silent) {\r\n      if (that._sendTimeout !== 0) {\r\n        clearTimeout(that._sendTimeout);\r\n        that._sendTimeout = 0;\r\n      }\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        xhr.onload = k;\r\n        xhr.onerror = k;\r\n        xhr.onabort = k;\r\n        xhr.onprogress = k;\r\n        xhr.onreadystatechange = k;\r\n        // IE 8 - 9: XDomainRequest#abort() does not fire any event\r\n        // Opera < 10: XMLHttpRequest#abort() does not fire any event\r\n        xhr.abort();\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        if (!silent) {\r\n          that.readyState = 4;\r\n          that.onabort(null);\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n      state = 0;\r\n    };\r\n\r\n    var onStart = function () {\r\n      if (state === 1) {\r\n        //state = 2;\r\n        var status = 0;\r\n        var statusText = \"\";\r\n        var contentType = undefined;\r\n        if (!(\"contentType\" in xhr)) {\r\n          try {\r\n            status = xhr.status;\r\n            statusText = xhr.statusText;\r\n            contentType = xhr.getResponseHeader(\"Content-Type\");\r\n          } catch (error) {\r\n            // IE < 10 throws exception for `xhr.status` when xhr.readyState === 2 || xhr.readyState === 3\r\n            // Opera < 11 throws exception for `xhr.status` when xhr.readyState === 2\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29121\r\n            status = 0;\r\n            statusText = \"\";\r\n            contentType = undefined;\r\n            // Firefox < 14, Chrome ?, Safari ?\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29658\r\n            // https://bugs.webkit.org/show_bug.cgi?id=77854\r\n          }\r\n        } else {\r\n          status = 200;\r\n          statusText = \"OK\";\r\n          contentType = xhr.contentType;\r\n        }\r\n        if (status !== 0) {\r\n          state = 2;\r\n          that.readyState = 2;\r\n          that.status = status;\r\n          that.statusText = statusText;\r\n          that._contentType = contentType;\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n    };\r\n    var onProgress = function () {\r\n      onStart();\r\n      if (state === 2 || state === 3) {\r\n        state = 3;\r\n        var responseText = \"\";\r\n        try {\r\n          responseText = xhr.responseText;\r\n        } catch (error) {\r\n          // IE 8 - 9 with XMLHttpRequest\r\n        }\r\n        that.readyState = 3;\r\n        that.responseText = responseText;\r\n        that.onprogress();\r\n      }\r\n    };\r\n    var onFinish = function (type, event) {\r\n      if (event == null || event.preventDefault == null) {\r\n        event = {\r\n          preventDefault: k\r\n        };\r\n      }\r\n      // Firefox 52 fires \"readystatechange\" (xhr.readyState === 4) without final \"readystatechange\" (xhr.readyState === 3)\r\n      // IE 8 fires \"onload\" without \"onprogress\"\r\n      onProgress();\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        that.readyState = 4;\r\n        if (type === \"load\") {\r\n          that.onload(event);\r\n        } else if (type === \"error\") {\r\n          that.onerror(event);\r\n        } else if (type === \"abort\") {\r\n          that.onabort(event);\r\n        } else {\r\n          throw new TypeError();\r\n        }\r\n        that.onreadystatechange();\r\n      }\r\n    };\r\n    var onReadyStateChange = function (event) {\r\n      if (xhr != undefined) { // Opera 12\r\n        if (xhr.readyState === 4) {\r\n          if (!(\"onload\" in xhr) || !(\"onerror\" in xhr) || !(\"onabort\" in xhr)) {\r\n            onFinish(xhr.responseText === \"\" ? \"error\" : \"load\", event);\r\n          }\r\n        } else if (xhr.readyState === 3) {\r\n          if (!(\"onprogress\" in xhr)) { // testing XMLHttpRequest#responseText too many times is too slow in IE 11\r\n            // and in Firefox 3.6\r\n            onProgress();\r\n          }\r\n        } else if (xhr.readyState === 2) {\r\n          onStart();\r\n        }\r\n      }\r\n    };\r\n    var onTimeout = function () {\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 500);\r\n      if (xhr.readyState === 3) {\r\n        onProgress();\r\n      }\r\n    };\r\n\r\n    // XDomainRequest#abort removes onprogress, onerror, onload\r\n    if (\"onload\" in xhr) {\r\n      xhr.onload = function (event) {\r\n        onFinish(\"load\", event);\r\n      };\r\n    }\r\n    if (\"onerror\" in xhr) {\r\n      xhr.onerror = function (event) {\r\n        onFinish(\"error\", event);\r\n      };\r\n    }\r\n    // improper fix to match Firefox behaviour, but it is better than just ignore abort\r\n    // see https://bugzilla.mozilla.org/show_bug.cgi?id=768596\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=880200\r\n    // https://code.google.com/p/chromium/issues/detail?id=153570\r\n    // IE 8 fires \"onload\" without \"onprogress\r\n    if (\"onabort\" in xhr) {\r\n      xhr.onabort = function (event) {\r\n        onFinish(\"abort\", event);\r\n      };\r\n    }\r\n\r\n    if (\"onprogress\" in xhr) {\r\n      xhr.onprogress = onProgress;\r\n    }\r\n\r\n    // IE 8 - 9 (XMLHTTPRequest)\r\n    // Opera < 12\r\n    // Firefox < 3.5\r\n    // Firefox 3.5 - 3.6 - ? < 9.0\r\n    // onprogress is not fired sometimes or delayed\r\n    // see also #64 (significant lag in IE 11)\r\n    if (\"onreadystatechange\" in xhr) {\r\n      xhr.onreadystatechange = function (event) {\r\n        onReadyStateChange(event);\r\n      };\r\n    }\r\n\r\n    if (\"contentType\" in xhr || !(\"ontimeout\" in XMLHttpRequest.prototype)) {\r\n      url += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + \"padding=true\";\r\n    }\r\n    xhr.open(method, url, true);\r\n\r\n    if (\"readyState\" in xhr) {\r\n      // workaround for Opera 12 issue with \"progress\" events\r\n      // #91 (XMLHttpRequest onprogress not fired for streaming response in Edge 14-15-?)\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 0);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.abort = function () {\r\n    this._abort(false);\r\n  };\r\n  XHRWrapper.prototype.getResponseHeader = function (name) {\r\n    return this._contentType;\r\n  };\r\n  XHRWrapper.prototype.setRequestHeader = function (name, value) {\r\n    var xhr = this._xhr;\r\n    if (\"setRequestHeader\" in xhr) {\r\n      xhr.setRequestHeader(name, value);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.getAllResponseHeaders = function () {\r\n    // XMLHttpRequest#getAllResponseHeaders returns null for CORS requests in Firefox 3.6.28\r\n    return this._xhr.getAllResponseHeaders != undefined ? this._xhr.getAllResponseHeaders() || \"\" : \"\";\r\n  };\r\n  XHRWrapper.prototype.send = function () {\r\n    // loading indicator in Safari < ? (6), Chrome < 14, Firefox\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=736723\r\n    if ((!(\"ontimeout\" in XMLHttpRequest.prototype) || (!(\"sendAsBinary\" in XMLHttpRequest.prototype) && !(\"mozAnon\" in XMLHttpRequest.prototype))) &&\r\n        document != undefined &&\r\n        document.readyState != undefined &&\r\n        document.readyState !== \"complete\") {\r\n      var that = this;\r\n      that._sendTimeout = setTimeout(function () {\r\n        that._sendTimeout = 0;\r\n        that.send();\r\n      }, 4);\r\n      return;\r\n    }\r\n\r\n    var xhr = this._xhr;\r\n    // withCredentials should be set after \"open\" for Safari and Chrome (< 19 ?)\r\n    if (\"withCredentials\" in xhr) {\r\n      xhr.withCredentials = this.withCredentials;\r\n    }\r\n    try {\r\n      // xhr.send(); throws \"Not enough arguments\" in Firefox 3.0\r\n      xhr.send(undefined);\r\n    } catch (error1) {\r\n      // Safari 5.1.7, Opera 12\r\n      throw error1;\r\n    }\r\n  };\r\n\r\n  function toLowerCase(name) {\r\n    return name.replace(/[A-Z]/g, function (c) {\r\n      return String.fromCharCode(c.charCodeAt(0) + 0x20);\r\n    });\r\n  }\r\n\r\n  function HeadersPolyfill(all) {\r\n    // Get headers: implemented according to mozilla's example code: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\r\n    var map = Object.create(null);\r\n    var array = all.split(\"\\r\\n\");\r\n    for (var i = 0; i < array.length; i += 1) {\r\n      var line = array[i];\r\n      var parts = line.split(\": \");\r\n      var name = parts.shift();\r\n      var value = parts.join(\": \");\r\n      map[toLowerCase(name)] = value;\r\n    }\r\n    this._map = map;\r\n  }\r\n  HeadersPolyfill.prototype.get = function (name) {\r\n    return this._map[toLowerCase(name)];\r\n  };\r\n\r\n  if (XMLHttpRequest != null && XMLHttpRequest.HEADERS_RECEIVED == null) { // IE < 9, Firefox 3.6\r\n    XMLHttpRequest.HEADERS_RECEIVED = 2;\r\n  }\r\n\r\n  function XHRTransport() {\r\n  }\r\n\r\n  XHRTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    xhr.open(\"GET\", url);\r\n    var offset = 0;\r\n    xhr.onprogress = function () {\r\n      var responseText = xhr.responseText;\r\n      var chunk = responseText.slice(offset);\r\n      offset += chunk.length;\r\n      onProgressCallback(chunk);\r\n    };\r\n    xhr.onerror = function (event) {\r\n      event.preventDefault();\r\n      onFinishCallback(new Error(\"NetworkError\"));\r\n    };\r\n    xhr.onload = function () {\r\n      onFinishCallback(null);\r\n    };\r\n    xhr.onabort = function () {\r\n      onFinishCallback(null);\r\n    };\r\n    xhr.onreadystatechange = function () {\r\n      if (xhr.readyState === XMLHttpRequest.HEADERS_RECEIVED) {\r\n        var status = xhr.status;\r\n        var statusText = xhr.statusText;\r\n        var contentType = xhr.getResponseHeader(\"Content-Type\");\r\n        var headers = xhr.getAllResponseHeaders();\r\n        onStartCallback(status, statusText, contentType, new HeadersPolyfill(headers));\r\n      }\r\n    };\r\n    xhr.withCredentials = withCredentials;\r\n    for (var name in headers) {\r\n      if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n        xhr.setRequestHeader(name, headers[name]);\r\n      }\r\n    }\r\n    xhr.send();\r\n    return xhr;\r\n  };\r\n\r\n  function HeadersWrapper(headers) {\r\n    this._headers = headers;\r\n  }\r\n  HeadersWrapper.prototype.get = function (name) {\r\n    return this._headers.get(name);\r\n  };\r\n\r\n  function FetchTransport() {\r\n  }\r\n\r\n  FetchTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    var reader = null;\r\n    var controller = new AbortController();\r\n    var signal = controller.signal;\r\n    var textDecoder = new TextDecoder();\r\n    fetch(url, {\r\n      headers: headers,\r\n      credentials: withCredentials ? \"include\" : \"same-origin\",\r\n      signal: signal,\r\n      cache: \"no-store\"\r\n    }).then(function (response) {\r\n      reader = response.body.getReader();\r\n      onStartCallback(response.status, response.statusText, response.headers.get(\"Content-Type\"), new HeadersWrapper(response.headers));\r\n      // see https://github.com/promises-aplus/promises-spec/issues/179\r\n      return new Promise(function (resolve, reject) {\r\n        var readNextChunk = function () {\r\n          reader.read().then(function (result) {\r\n            if (result.done) {\r\n              //Note: bytes in textDecoder are ignored\r\n              resolve(undefined);\r\n            } else {\r\n              var chunk = textDecoder.decode(result.value, {stream: true});\r\n              onProgressCallback(chunk);\r\n              readNextChunk();\r\n            }\r\n          })[\"catch\"](function (error) {\r\n            reject(error);\r\n          });\r\n        };\r\n        readNextChunk();\r\n      });\r\n    })[\"catch\"](function (error) {\r\n      if (error.name === \"AbortError\") {\r\n        return undefined;\r\n      } else {\r\n        return error;\r\n      }\r\n    }).then(function (error) {\r\n      onFinishCallback(error);\r\n    });\r\n    return {\r\n      abort: function () {\r\n        if (reader != null) {\r\n          reader.cancel(); // https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\r\n        }\r\n        controller.abort();\r\n      }\r\n    };\r\n  };\r\n\r\n  function EventTarget() {\r\n    this._listeners = Object.create(null);\r\n  }\r\n\r\n  function throwError(e) {\r\n    setTimeout(function () {\r\n      throw e;\r\n    }, 0);\r\n  }\r\n\r\n  EventTarget.prototype.dispatchEvent = function (event) {\r\n    event.target = this;\r\n    var typeListeners = this._listeners[event.type];\r\n    if (typeListeners != undefined) {\r\n      var length = typeListeners.length;\r\n      for (var i = 0; i < length; i += 1) {\r\n        var listener = typeListeners[i];\r\n        try {\r\n          if (typeof listener.handleEvent === \"function\") {\r\n            listener.handleEvent(event);\r\n          } else {\r\n            listener.call(this, event);\r\n          }\r\n        } catch (e) {\r\n          throwError(e);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  EventTarget.prototype.addEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners == undefined) {\r\n      typeListeners = [];\r\n      listeners[type] = typeListeners;\r\n    }\r\n    var found = false;\r\n    for (var i = 0; i < typeListeners.length; i += 1) {\r\n      if (typeListeners[i] === listener) {\r\n        found = true;\r\n      }\r\n    }\r\n    if (!found) {\r\n      typeListeners.push(listener);\r\n    }\r\n  };\r\n  EventTarget.prototype.removeEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners != undefined) {\r\n      var filtered = [];\r\n      for (var i = 0; i < typeListeners.length; i += 1) {\r\n        if (typeListeners[i] !== listener) {\r\n          filtered.push(typeListeners[i]);\r\n        }\r\n      }\r\n      if (filtered.length === 0) {\r\n        delete listeners[type];\r\n      } else {\r\n        listeners[type] = filtered;\r\n      }\r\n    }\r\n  };\r\n\r\n  function Event(type) {\r\n    this.type = type;\r\n    this.target = undefined;\r\n  }\r\n\r\n  function MessageEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.data = options.data;\r\n    this.lastEventId = options.lastEventId;\r\n  }\r\n\r\n  MessageEvent.prototype = Object.create(Event.prototype);\r\n\r\n  function ConnectionEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.status = options.status;\r\n    this.statusText = options.statusText;\r\n    this.headers = options.headers;\r\n  }\r\n\r\n  ConnectionEvent.prototype = Object.create(Event.prototype);\r\n\r\n  function ErrorEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.error = options.error;\r\n  }\r\n\r\n  ErrorEvent.prototype = Object.create(Event.prototype);\r\n\r\n  var WAITING = -1;\r\n  var CONNECTING = 0;\r\n  var OPEN = 1;\r\n  var CLOSED = 2;\r\n\r\n  var AFTER_CR = -1;\r\n  var FIELD_START = 0;\r\n  var FIELD = 1;\r\n  var VALUE_START = 2;\r\n  var VALUE = 3;\r\n\r\n  var contentTypeRegExp = /^text\\/event\\-stream(;.*)?$/i;\r\n\r\n  var MINIMUM_DURATION = 1000;\r\n  var MAXIMUM_DURATION = 18000000;\r\n\r\n  var parseDuration = function (value, def) {\r\n    var n = value == null ? def : parseInt(value, 10);\r\n    if (n !== n) {\r\n      n = def;\r\n    }\r\n    return clampDuration(n);\r\n  };\r\n  var clampDuration = function (n) {\r\n    return Math.min(Math.max(n, MINIMUM_DURATION), MAXIMUM_DURATION);\r\n  };\r\n\r\n  var fire = function (that, f, event) {\r\n    try {\r\n      if (typeof f === \"function\") {\r\n        f.call(that, event);\r\n      }\r\n    } catch (e) {\r\n      throwError(e);\r\n    }\r\n  };\r\n\r\n  function EventSourcePolyfill(url, options) {\r\n    EventTarget.call(this);\r\n    options = options || {};\r\n\r\n    this.onopen = undefined;\r\n    this.onmessage = undefined;\r\n    this.onerror = undefined;\r\n\r\n    this.url = undefined;\r\n    this.readyState = undefined;\r\n    this.withCredentials = undefined;\r\n    this.headers = undefined;\r\n\r\n    this._close = undefined;\r\n\r\n    start(this, url, options);\r\n  }\r\n\r\n  function getBestXHRTransport() {\r\n    return (XMLHttpRequest != undefined && (\"withCredentials\" in XMLHttpRequest.prototype)) || XDomainRequest == undefined\r\n        ? new XMLHttpRequest()\r\n        : new XDomainRequest();\r\n  }\r\n\r\n  var isFetchSupported = fetch != undefined && Response != undefined && \"body\" in Response.prototype;\r\n\r\n  function start(es, url, options) {\r\n    url = String(url);\r\n    var withCredentials = Boolean(options.withCredentials);\r\n    var lastEventIdQueryParameterName = options.lastEventIdQueryParameterName || \"lastEventId\";\r\n\r\n    var initialRetry = clampDuration(1000);\r\n    var heartbeatTimeout = parseDuration(options.heartbeatTimeout, 45000);\r\n\r\n    var lastEventId = \"\";\r\n    var retry = initialRetry;\r\n    var wasActivity = false;\r\n    var textLength = 0;\r\n    var headers = options.headers || {};\r\n    var TransportOption = options.Transport;\r\n    var xhr = isFetchSupported && TransportOption == undefined ? undefined : new XHRWrapper(TransportOption != undefined ? new TransportOption() : getBestXHRTransport());\r\n    var transport = TransportOption != null && typeof TransportOption !== \"string\" ? new TransportOption() : (xhr == undefined ? new FetchTransport() : new XHRTransport());\r\n    var abortController = undefined;\r\n    var timeout = 0;\r\n    var currentState = WAITING;\r\n    var dataBuffer = \"\";\r\n    var lastEventIdBuffer = \"\";\r\n    var eventTypeBuffer = \"\";\r\n\r\n    var textBuffer = \"\";\r\n    var state = FIELD_START;\r\n    var fieldStart = 0;\r\n    var valueStart = 0;\r\n\r\n    var onStart = function (status, statusText, contentType, headers) {\r\n      if (currentState === CONNECTING) {\r\n        if (status === 200 && contentType != undefined && contentTypeRegExp.test(contentType)) {\r\n          currentState = OPEN;\r\n          wasActivity = Date.now();\r\n          retry = initialRetry;\r\n          es.readyState = OPEN;\r\n          var event = new ConnectionEvent(\"open\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onopen, event);\r\n        } else {\r\n          var message = \"\";\r\n          if (status !== 200) {\r\n            if (statusText) {\r\n              statusText = statusText.replace(/\\s+/g, \" \");\r\n            }\r\n            message = \"EventSource's response has a status \" + status + \" \" + statusText + \" that is not 200. Aborting the connection.\";\r\n          } else {\r\n            message = \"EventSource's response has a Content-Type specifying an unsupported type: \" + (contentType == undefined ? \"-\" : contentType.replace(/\\s+/g, \" \")) + \". Aborting the connection.\";\r\n          }\r\n          close();\r\n          var event = new ConnectionEvent(\"error\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onerror, event);\r\n          console.error(message);\r\n        }\r\n      }\r\n    };\r\n\r\n    var onProgress = function (textChunk) {\r\n      if (currentState === OPEN) {\r\n        var n = -1;\r\n        for (var i = 0; i < textChunk.length; i += 1) {\r\n          var c = textChunk.charCodeAt(i);\r\n          if (c === \"\\n\".charCodeAt(0) || c === \"\\r\".charCodeAt(0)) {\r\n            n = i;\r\n          }\r\n        }\r\n        var chunk = (n !== -1 ? textBuffer : \"\") + textChunk.slice(0, n + 1);\r\n        textBuffer = (n === -1 ? textBuffer : \"\") + textChunk.slice(n + 1);\r\n        if (textChunk !== \"\") {\r\n          wasActivity = Date.now();\r\n          textLength += textChunk.length;\r\n        }\r\n        for (var position = 0; position < chunk.length; position += 1) {\r\n          var c = chunk.charCodeAt(position);\r\n          if (state === AFTER_CR && c === \"\\n\".charCodeAt(0)) {\r\n            state = FIELD_START;\r\n          } else {\r\n            if (state === AFTER_CR) {\r\n              state = FIELD_START;\r\n            }\r\n            if (c === \"\\r\".charCodeAt(0) || c === \"\\n\".charCodeAt(0)) {\r\n              if (state !== FIELD_START) {\r\n                if (state === FIELD) {\r\n                  valueStart = position + 1;\r\n                }\r\n                var field = chunk.slice(fieldStart, valueStart - 1);\r\n                var value = chunk.slice(valueStart + (valueStart < position && chunk.charCodeAt(valueStart) === \" \".charCodeAt(0) ? 1 : 0), position);\r\n                if (field === \"data\") {\r\n                  dataBuffer += \"\\n\";\r\n                  dataBuffer += value;\r\n                } else if (field === \"id\") {\r\n                  lastEventIdBuffer = value;\r\n                } else if (field === \"event\") {\r\n                  eventTypeBuffer = value;\r\n                } else if (field === \"retry\") {\r\n                  initialRetry = parseDuration(value, initialRetry);\r\n                  retry = initialRetry;\r\n                } else if (field === \"heartbeatTimeout\") {\r\n                  heartbeatTimeout = parseDuration(value, heartbeatTimeout);\r\n                  if (timeout !== 0) {\r\n                    clearTimeout(timeout);\r\n                    timeout = setTimeout(function () {\r\n                      onTimeout();\r\n                    }, heartbeatTimeout);\r\n                  }\r\n                }\r\n              }\r\n              if (state === FIELD_START) {\r\n                if (dataBuffer !== \"\") {\r\n                  lastEventId = lastEventIdBuffer;\r\n                  if (eventTypeBuffer === \"\") {\r\n                    eventTypeBuffer = \"message\";\r\n                  }\r\n                  var event = new MessageEvent(eventTypeBuffer, {\r\n                    data: dataBuffer.slice(1),\r\n                    lastEventId: lastEventIdBuffer\r\n                  });\r\n                  es.dispatchEvent(event);\r\n                  if (eventTypeBuffer === \"open\") {\r\n                    fire(es, es.onopen, event);\r\n                  } else if (eventTypeBuffer === \"message\") {\r\n                    fire(es, es.onmessage, event);\r\n                  } else if (eventTypeBuffer === \"error\") {\r\n                    fire(es, es.onerror, event);\r\n                  }\r\n                  if (currentState === CLOSED) {\r\n                    return;\r\n                  }\r\n                }\r\n                dataBuffer = \"\";\r\n                eventTypeBuffer = \"\";\r\n              }\r\n              state = c === \"\\r\".charCodeAt(0) ? AFTER_CR : FIELD_START;\r\n            } else {\r\n              if (state === FIELD_START) {\r\n                fieldStart = position;\r\n                state = FIELD;\r\n              }\r\n              if (state === FIELD) {\r\n                if (c === \":\".charCodeAt(0)) {\r\n                  valueStart = position + 1;\r\n                  state = VALUE_START;\r\n                }\r\n              } else if (state === VALUE_START) {\r\n                state = VALUE;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    var onFinish = function (error) {\r\n      if (currentState === OPEN || currentState === CONNECTING) {\r\n        currentState = WAITING;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        timeout = setTimeout(function () {\r\n          onTimeout();\r\n        }, retry);\r\n        retry = clampDuration(Math.min(initialRetry * 16, retry * 2));\r\n\r\n        es.readyState = CONNECTING;\r\n        var event = new ErrorEvent(\"error\", {error: error});\r\n        es.dispatchEvent(event);\r\n        fire(es, es.onerror, event);\r\n        if (error != undefined) {\r\n          console.error(error);\r\n        }\r\n      }\r\n    };\r\n\r\n    var close = function () {\r\n      currentState = CLOSED;\r\n      if (abortController != undefined) {\r\n        abortController.abort();\r\n        abortController = undefined;\r\n      }\r\n      if (timeout !== 0) {\r\n        clearTimeout(timeout);\r\n        timeout = 0;\r\n      }\r\n      es.readyState = CLOSED;\r\n    };\r\n\r\n    var onTimeout = function () {\r\n      timeout = 0;\r\n\r\n      if (currentState !== WAITING) {\r\n        if (!wasActivity && abortController != undefined) {\r\n          onFinish(new Error(\"No activity within \" + heartbeatTimeout + \" milliseconds.\" + \" \" + (currentState === CONNECTING ? \"No response received.\" : textLength + \" chars received.\") + \" \" + \"Reconnecting.\"));\r\n          if (abortController != undefined) {\r\n            abortController.abort();\r\n            abortController = undefined;\r\n          }\r\n        } else {\r\n          var nextHeartbeat = Math.max((wasActivity || Date.now()) + heartbeatTimeout - Date.now(), 1);\r\n          wasActivity = false;\r\n          timeout = setTimeout(function () {\r\n            onTimeout();\r\n          }, nextHeartbeat);\r\n        }\r\n        return;\r\n      }\r\n\r\n      wasActivity = false;\r\n      textLength = 0;\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, heartbeatTimeout);\r\n\r\n      currentState = CONNECTING;\r\n      dataBuffer = \"\";\r\n      eventTypeBuffer = \"\";\r\n      lastEventIdBuffer = lastEventId;\r\n      textBuffer = \"\";\r\n      fieldStart = 0;\r\n      valueStart = 0;\r\n      state = FIELD_START;\r\n\r\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=428916\r\n      // Request header field Last-Event-ID is not allowed by Access-Control-Allow-Headers.\r\n      var requestURL = url;\r\n      if (url.slice(0, 5) !== \"data:\" && url.slice(0, 5) !== \"blob:\") {\r\n        if (lastEventId !== \"\") {\r\n          // Remove the lastEventId parameter if it's already part of the request URL.\r\n          var i = url.indexOf(\"?\");\r\n          requestURL = i === -1 ? url : url.slice(0, i + 1) + url.slice(i + 1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g, function (p, paramName) {\r\n            return paramName === lastEventIdQueryParameterName ? '' : p;\r\n          });\r\n          // Append the current lastEventId to the request URL.\r\n          requestURL += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + lastEventIdQueryParameterName +\"=\" + encodeURIComponent(lastEventId);\r\n        }\r\n      }\r\n      var withCredentials = es.withCredentials;\r\n      var requestHeaders = {};\r\n      requestHeaders[\"Accept\"] = \"text/event-stream\";\r\n      var headers = es.headers;\r\n      if (headers != undefined) {\r\n        for (var name in headers) {\r\n          if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n            requestHeaders[name] = headers[name];\r\n          }\r\n        }\r\n      }\r\n      try {\r\n        abortController = transport.open(xhr, onStart, onProgress, onFinish, requestURL, withCredentials, requestHeaders);\r\n      } catch (error) {\r\n        close();\r\n        throw error;\r\n      }\r\n    };\r\n\r\n    es.url = url;\r\n    es.readyState = CONNECTING;\r\n    es.withCredentials = withCredentials;\r\n    es.headers = headers;\r\n    es._close = close;\r\n\r\n    onTimeout();\r\n  }\r\n\r\n  EventSourcePolyfill.prototype = Object.create(EventTarget.prototype);\r\n  EventSourcePolyfill.prototype.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.prototype.OPEN = OPEN;\r\n  EventSourcePolyfill.prototype.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.close = function () {\r\n    this._close();\r\n  };\r\n\r\n  EventSourcePolyfill.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.OPEN = OPEN;\r\n  EventSourcePolyfill.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.withCredentials = undefined;\r\n\r\n  var R = NativeEventSource\r\n  if (XMLHttpRequest != undefined && (NativeEventSource == undefined || !(\"withCredentials\" in NativeEventSource.prototype))) {\r\n    // Why replace a native EventSource ?\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=444328\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=831392\r\n    // https://code.google.com/p/chromium/issues/detail?id=260144\r\n    // https://code.google.com/p/chromium/issues/detail?id=225654\r\n    // ...\r\n    R = EventSourcePolyfill;\r\n  }\r\n\r\n  (function (factory) {\r\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n      var v = factory(exports);\r\n      if (v !== undefined) module.exports = v;\r\n    }\r\n    else if (typeof define === \"function\" && define.amd) {\r\n      define([\"exports\"], factory);\r\n    }\r\n    else {\r\n      factory(global);\r\n    }\r\n  })(function (exports) {\r\n    exports.EventSourcePolyfill = EventSourcePolyfill;\r\n    exports.NativeEventSource = NativeEventSource;\r\n    exports.EventSource = R;\r\n  });\r\n}(typeof globalThis === 'undefined' ? (typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : this) : globalThis));\r\n","import React, { useMemo, useCallback, createElement, Fragment, isValidElement, cloneElement } from 'react';\nimport { AnalyticsContext, useAnalytics, createReactExtension, useElementFilter, getComponentData } from '@backstage/core-plugin-api';\nimport { makeStyles, ListItemIcon, ListItemText, Box, ListItem, List } from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from '@backstage/core-components';\n\nconst useStyles = makeStyles(\n  () => ({\n    highlight: {}\n  }),\n  { name: \"BackstageHighlightedSearchResultText\" }\n);\nconst HighlightedSearchResultText = (props) => {\n  const { text, preTag, postTag } = props;\n  const classes = useStyles();\n  const terms = useMemo(\n    () => text.split(new RegExp(`(${preTag}.+?${postTag})`)),\n    [postTag, preTag, text]\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, terms.map(\n    (t, idx) => t.includes(preTag) ? /* @__PURE__ */ React.createElement(\"mark\", { className: classes.highlight, key: idx }, t.replace(new RegExp(`${preTag}|${postTag}`, \"g\"), \"\")) : t\n  ));\n};\n\nconst DefaultResultListItemComponent = ({\n  result,\n  highlight,\n  icon,\n  secondaryAction,\n  lineClamp = 5\n}) => {\n  if (!result)\n    return null;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, icon), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primaryTypographyProps: { variant: \"h6\" },\n      primary: /* @__PURE__ */ React.createElement(Link, { noTrack: true, to: result.location }, (highlight == null ? void 0 : highlight.fields.title) ? /* @__PURE__ */ React.createElement(\n        HighlightedSearchResultText,\n        {\n          text: (highlight == null ? void 0 : highlight.fields.title) || \"\",\n          preTag: (highlight == null ? void 0 : highlight.preTag) || \"\",\n          postTag: (highlight == null ? void 0 : highlight.postTag) || \"\"\n        }\n      ) : result.title),\n      secondary: /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          component: \"span\",\n          style: {\n            display: \"-webkit-box\",\n            WebkitBoxOrient: \"vertical\",\n            WebkitLineClamp: lineClamp,\n            overflow: \"hidden\"\n          },\n          color: \"textSecondary\",\n          variant: \"body2\"\n        },\n        (highlight == null ? void 0 : highlight.fields.text) ? /* @__PURE__ */ React.createElement(\n          HighlightedSearchResultText,\n          {\n            text: highlight.fields.text,\n            preTag: highlight.preTag,\n            postTag: highlight.postTag\n          }\n        ) : result.text\n      )\n    }\n  ), secondaryAction && /* @__PURE__ */ React.createElement(Box, { alignItems: \"flex-end\" }, secondaryAction));\n};\nconst HigherOrderDefaultResultListItem = (props) => {\n  return /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: {\n        pluginId: \"search\",\n        extension: \"DefaultResultListItem\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(DefaultResultListItemComponent, { ...props })\n  );\n};\n\nconst SEARCH_RESULT_LIST_ITEM_EXTENSION = \"search.results.list.items.extensions.v1\";\nconst findSearchResultListItemExtensionElement = (elements, result) => {\n  for (const element of elements) {\n    if (!isValidElement(element))\n      continue;\n    const predicate = getComponentData(\n      element,\n      SEARCH_RESULT_LIST_ITEM_EXTENSION\n    );\n    if (!(predicate == null ? void 0 : predicate(result)))\n      continue;\n    return cloneElement(element, {\n      rank: result.rank,\n      highlight: result.highlight,\n      result: result.document,\n      // Use props in situations where a consumer is manually rendering the extension\n      ...element.props\n    });\n  }\n  return null;\n};\nconst SearchResultListItemExtension = (props) => {\n  const {\n    rank,\n    result,\n    noTrack,\n    children,\n    alignItems = \"flex-start\",\n    ...rest\n  } = props;\n  const analytics = useAnalytics();\n  const handleClickCapture = useCallback(() => {\n    if (noTrack)\n      return;\n    if (!result)\n      return;\n    analytics.captureEvent(\"discover\", result.title, {\n      attributes: { to: result.location },\n      value: rank\n    });\n  }, [rank, result, noTrack, analytics]);\n  return /* @__PURE__ */ React.createElement(\n    ListItem,\n    {\n      divider: true,\n      alignItems,\n      onClickCapture: handleClickCapture,\n      ...rest\n    },\n    children\n  );\n};\nconst createSearchResultListItemExtension = (options) => {\n  const { name, component, predicate = () => true } = options;\n  return createReactExtension({\n    name,\n    component: {\n      lazy: () => component().then(\n        (type) => (props) => /* @__PURE__ */ React.createElement(\n          SearchResultListItemExtension,\n          {\n            rank: props.rank,\n            result: props.result,\n            noTrack: props.noTrack\n          },\n          createElement(type, props)\n        )\n      )\n    },\n    data: {\n      [SEARCH_RESULT_LIST_ITEM_EXTENSION]: predicate\n    }\n  });\n};\nconst useSearchResultListItemExtensions = (children) => {\n  const elements = useElementFilter(\n    children,\n    (collection) => {\n      return collection.selectByComponentData({\n        key: SEARCH_RESULT_LIST_ITEM_EXTENSION\n      }).getElements();\n    },\n    [children]\n  );\n  return useCallback(\n    (result, key) => {\n      const element = findSearchResultListItemExtensionElement(\n        elements,\n        result\n      );\n      return /* @__PURE__ */ React.createElement(Fragment, { key }, element != null ? element : /* @__PURE__ */ React.createElement(\n        SearchResultListItemExtension,\n        {\n          rank: result.rank,\n          result: result.document\n        },\n        /* @__PURE__ */ React.createElement(\n          HigherOrderDefaultResultListItem,\n          {\n            rank: result.rank,\n            highlight: result.highlight,\n            result: result.document\n          }\n        )\n      ));\n    },\n    [elements]\n  );\n};\nconst SearchResultListItemExtensions = (props) => {\n  const { results, children, ...rest } = props;\n  const render = useSearchResultListItemExtensions(children);\n  return /* @__PURE__ */ React.createElement(List, { ...rest }, results.map(render));\n};\n\nexport { HigherOrderDefaultResultListItem as H, SearchResultListItemExtensions as S, SearchResultListItemExtension as a, HighlightedSearchResultText as b, createSearchResultListItemExtension as c, useSearchResultListItemExtensions as u };\n//# sourceMappingURL=extensions-c878c532.esm.js.map\n","import { createApiRef, useApi, configApiRef, AnalyticsContext, useAnalytics } from '@backstage/core-plugin-api';\nimport { S as SearchResultListItemExtensions, u as useSearchResultListItemExtensions, H as HigherOrderDefaultResultListItem } from './esm/extensions-c878c532.esm.js';\nexport { H as DefaultResultListItem, b as HighlightedSearchResultText, a as SearchResultListItemExtension, S as SearchResultListItemExtensions, c as createSearchResultListItemExtension, u as useSearchResultListItemExtensions } from './esm/extensions-c878c532.esm.js';\nimport { TextField, InputAdornment, IconButton, makeStyles, CircularProgress, ListItemIcon, ListItemText, Chip, FormControl, FormLabel, FormControlLabel, Checkbox, InputLabel, Select, MenuItem, Typography, TablePagination, List, InputBase, ListSubheader, Menu, Button as Button$1 } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport SearchIcon from '@material-ui/icons/Search';\nimport React, { useContext, useState, useCallback, useEffect, forwardRef, useRef, useMemo } from 'react';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { isEqual, isFunction } from 'lodash';\nimport useAsync from 'react-use/lib/useAsync';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport { Autocomplete } from '@material-ui/lab';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { Progress, ResponseErrorPanel, EmptyState, Link } from '@backstage/core-components';\nimport qs from 'qs';\nimport AddIcon from '@material-ui/icons/Add';\nimport ArrowRightIcon from '@material-ui/icons/ArrowForwardIos';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport '@material-ui/core/Typography';\n\nconst searchApiRef = createApiRef({\n  id: \"plugin.search.queryservice\"\n});\nclass MockSearchApi {\n  constructor(mockedResults) {\n    this.mockedResults = mockedResults;\n  }\n  query() {\n    return Promise.resolve(this.mockedResults || { results: [] });\n  }\n}\n\nconst SearchContext = createVersionedContext(\"search-context\");\nconst useSearch = () => {\n  const context = useContext(SearchContext);\n  if (!context) {\n    throw new Error(\"useSearch must be used within a SearchContextProvider\");\n  }\n  const value = context.atVersion(1);\n  if (!value) {\n    throw new Error(\"No SearchContext v1 found\");\n  }\n  return value;\n};\nconst useSearchContextCheck = () => {\n  const context = useContext(SearchContext);\n  return context !== void 0;\n};\nconst defaultInitialSearchState = {\n  term: \"\",\n  types: [],\n  filters: {},\n  pageLimit: void 0,\n  pageCursor: void 0\n};\nconst useSearchContextValue = (initialValue = defaultInitialSearchState) => {\n  var _a, _b, _c, _d;\n  const searchApi = useApi(searchApiRef);\n  const analytics = useAnalytics();\n  const [term, setTerm] = useState(initialValue.term);\n  const [types, setTypes] = useState(initialValue.types);\n  const [filters, setFilters] = useState(initialValue.filters);\n  const [pageLimit, setPageLimit] = useState(\n    initialValue.pageLimit\n  );\n  const [pageCursor, setPageCursor] = useState(\n    initialValue.pageCursor\n  );\n  const prevTerm = usePrevious(term);\n  const prevFilters = usePrevious(filters);\n  const result = useAsync(async () => {\n    const resultSet = await searchApi.query({\n      term,\n      types,\n      filters,\n      pageLimit,\n      pageCursor\n    });\n    if (term && resultSet.numberOfResults !== void 0) {\n      analytics.captureEvent(\"search\", term, {\n        value: resultSet.numberOfResults\n      });\n    }\n    return resultSet;\n  }, [term, types, filters, pageLimit, pageCursor]);\n  const hasNextPage = !result.loading && !result.error && ((_a = result.value) == null ? void 0 : _a.nextPageCursor);\n  const hasPreviousPage = !result.loading && !result.error && ((_b = result.value) == null ? void 0 : _b.previousPageCursor);\n  const fetchNextPage = useCallback(() => {\n    var _a2;\n    setPageCursor((_a2 = result.value) == null ? void 0 : _a2.nextPageCursor);\n  }, [(_c = result.value) == null ? void 0 : _c.nextPageCursor]);\n  const fetchPreviousPage = useCallback(() => {\n    var _a2;\n    setPageCursor((_a2 = result.value) == null ? void 0 : _a2.previousPageCursor);\n  }, [(_d = result.value) == null ? void 0 : _d.previousPageCursor]);\n  useEffect(() => {\n    if (prevTerm !== void 0 && term !== prevTerm) {\n      setPageCursor(void 0);\n    }\n  }, [term, prevTerm, setPageCursor]);\n  useEffect(() => {\n    if (prevFilters !== void 0 && !isEqual(filters, prevFilters)) {\n      setPageCursor(void 0);\n    }\n  }, [filters, prevFilters, setPageCursor]);\n  const value = {\n    result,\n    term,\n    setTerm,\n    types,\n    setTypes,\n    filters,\n    setFilters,\n    pageLimit,\n    setPageLimit,\n    pageCursor,\n    setPageCursor,\n    fetchNextPage: hasNextPage ? fetchNextPage : void 0,\n    fetchPreviousPage: hasPreviousPage ? fetchPreviousPage : void 0\n  };\n  return value;\n};\nconst LocalSearchContext = (props) => {\n  const { initialState, children } = props;\n  const value = useSearchContextValue(initialState);\n  return /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: { searchTypes: value.types.sort().join(\",\") }\n    },\n    /* @__PURE__ */ React.createElement(SearchContext.Provider, { value: createVersionedValueMap({ 1: value }) }, children)\n  );\n};\nconst SearchContextProvider = (props) => {\n  const { initialState, inheritParentContextIfAvailable, children } = props;\n  const hasParentContext = useSearchContextCheck();\n  const configApi = useApi(configApiRef);\n  const propsInitialSearchState = initialState != null ? initialState : {};\n  const configInitialSearchState = configApi.has(\"search.query.pageLimit\") ? { pageLimit: configApi.getNumber(\"search.query.pageLimit\") } : {};\n  const searchContextInitialState = {\n    ...defaultInitialSearchState,\n    ...propsInitialSearchState,\n    ...configInitialSearchState\n  };\n  return hasParentContext && inheritParentContextIfAvailable ? /* @__PURE__ */ React.createElement(React.Fragment, null, children) : /* @__PURE__ */ React.createElement(LocalSearchContext, { initialState: searchContextInitialState }, children);\n};\n\nfunction withContext$1(Component) {\n  return forwardRef((props, ref) => /* @__PURE__ */ React.createElement(SearchContextProvider, { inheritParentContextIfAvailable: true }, /* @__PURE__ */ React.createElement(Component, { ...props, ref })));\n}\nconst SearchBarBase = withContext$1(\n  forwardRef((props, ref) => {\n    const {\n      onChange,\n      onKeyDown = () => {\n      },\n      onClear = () => {\n      },\n      onSubmit = () => {\n      },\n      debounceTime = 200,\n      clearButton = true,\n      fullWidth = true,\n      value: defaultValue,\n      label,\n      placeholder,\n      inputProps = {},\n      InputProps = {},\n      endAdornment,\n      ...rest\n    } = props;\n    const configApi = useApi(configApiRef);\n    const [value, setValue] = useState(\"\");\n    const forwardedValueRef = useRef(\"\");\n    useEffect(() => {\n      setValue((prevValue) => {\n        if (prevValue === forwardedValueRef.current) {\n          return String(defaultValue);\n        }\n        return prevValue;\n      });\n    }, [defaultValue, forwardedValueRef]);\n    useDebounce(\n      () => {\n        forwardedValueRef.current = value;\n        onChange(value);\n      },\n      debounceTime,\n      [value]\n    );\n    const handleChange = useCallback(\n      (e) => {\n        setValue(e.target.value);\n      },\n      [setValue]\n    );\n    const handleKeyDown = useCallback(\n      (e) => {\n        if (onKeyDown)\n          onKeyDown(e);\n        if (onSubmit && e.key === \"Enter\") {\n          onSubmit();\n        }\n      },\n      [onKeyDown, onSubmit]\n    );\n    const handleClear = useCallback(() => {\n      forwardedValueRef.current = \"\";\n      onChange(\"\");\n      setValue(\"\");\n      if (onClear) {\n        onClear();\n      }\n    }, [onChange, onClear]);\n    const ariaLabel = label ? void 0 : \"Search\";\n    const inputPlaceholder = placeholder != null ? placeholder : `Search in ${configApi.getOptionalString(\"app.title\") || \"Backstage\"}`;\n    const startAdornment = /* @__PURE__ */ React.createElement(InputAdornment, { position: \"start\" }, /* @__PURE__ */ React.createElement(IconButton, { \"aria-label\": \"Query\", size: \"small\", disabled: true }, /* @__PURE__ */ React.createElement(SearchIcon, null)));\n    const clearButtonEndAdornment = /* @__PURE__ */ React.createElement(InputAdornment, { position: \"end\" }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        \"aria-label\": \"Clear\",\n        size: \"small\",\n        onClick: handleClear,\n        onKeyDown: (event) => {\n          if (event.key === \"Enter\") {\n            event.stopPropagation();\n          }\n        }\n      },\n      \"Clear\"\n    ));\n    return /* @__PURE__ */ React.createElement(\n      TextField,\n      {\n        id: \"search-bar-text-field\",\n        \"data-testid\": \"search-bar-next\",\n        variant: \"outlined\",\n        margin: \"normal\",\n        inputRef: ref,\n        value,\n        label,\n        placeholder: inputPlaceholder,\n        InputProps: {\n          startAdornment,\n          endAdornment: clearButton ? clearButtonEndAdornment : endAdornment,\n          ...InputProps\n        },\n        inputProps: {\n          \"aria-label\": ariaLabel,\n          ...inputProps\n        },\n        fullWidth,\n        onChange: handleChange,\n        onKeyDown: handleKeyDown,\n        ...rest\n      }\n    );\n  })\n);\nconst SearchBar = withContext$1(\n  forwardRef((props, ref) => {\n    const { value: initialValue = \"\", onChange, ...rest } = props;\n    const { term, setTerm } = useSearch();\n    useEffect(() => {\n      if (initialValue) {\n        setTerm(String(initialValue));\n      }\n    }, [initialValue, setTerm]);\n    const handleChange = useCallback(\n      (newValue) => {\n        if (onChange) {\n          onChange(newValue);\n        } else {\n          setTerm(newValue);\n        }\n      },\n      [onChange, setTerm]\n    );\n    return /* @__PURE__ */ React.createElement(\n      AnalyticsContext,\n      {\n        attributes: { pluginId: \"search\", extension: \"SearchBar\" }\n      },\n      /* @__PURE__ */ React.createElement(\n        SearchBarBase,\n        {\n          ...rest,\n          ref,\n          value: term,\n          onChange: handleChange\n        }\n      )\n    );\n  })\n);\n\nconst useStyles$3 = makeStyles((theme) => ({\n  loading: {\n    right: theme.spacing(1),\n    position: \"absolute\"\n  }\n}));\nconst withContext = (Component) => {\n  return (props) => /* @__PURE__ */ React.createElement(SearchContextProvider, { inheritParentContextIfAvailable: true }, /* @__PURE__ */ React.createElement(Component, { ...props }));\n};\nconst SearchAutocompleteLoadingAdornment = () => {\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(\n    CircularProgress,\n    {\n      className: classes.loading,\n      \"data-testid\": \"search-autocomplete-progressbar\",\n      color: \"inherit\",\n      size: 20\n    }\n  );\n};\nconst SearchAutocomplete = withContext(\n  function SearchAutocompleteComponent(props) {\n    const {\n      loading,\n      value,\n      onChange = () => {\n      },\n      options = [],\n      getOptionLabel = (option) => String(option),\n      inputPlaceholder,\n      inputDebounceTime,\n      freeSolo = true,\n      fullWidth = true,\n      clearOnBlur = false,\n      \"data-testid\": dataTestId = \"search-autocomplete\",\n      ...rest\n    } = props;\n    const { setTerm } = useSearch();\n    const getInputValue = useCallback(\n      (option) => {\n        if (!option)\n          return \"\";\n        if (typeof option === \"string\")\n          return option;\n        return getOptionLabel(option);\n      },\n      [getOptionLabel]\n    );\n    const inputValue = useMemo(\n      () => getInputValue(value),\n      [value, getInputValue]\n    );\n    const handleChange = useCallback(\n      (event, option, reason, details) => {\n        setTerm(getInputValue(option));\n        onChange(event, option, reason, details);\n      },\n      [getInputValue, setTerm, onChange]\n    );\n    const renderInput = useCallback(\n      ({\n        InputProps: { ref, className, endAdornment },\n        InputLabelProps,\n        ...params\n      }) => /* @__PURE__ */ React.createElement(\n        SearchBar,\n        {\n          ...params,\n          ref,\n          clearButton: false,\n          value: inputValue,\n          placeholder: inputPlaceholder,\n          debounceTime: inputDebounceTime,\n          endAdornment: loading ? /* @__PURE__ */ React.createElement(SearchAutocompleteLoadingAdornment, null) : endAdornment,\n          InputProps: { className }\n        }\n      ),\n      [loading, inputValue, inputPlaceholder, inputDebounceTime]\n    );\n    return /* @__PURE__ */ React.createElement(\n      Autocomplete,\n      {\n        ...rest,\n        \"data-testid\": dataTestId,\n        value,\n        onChange: handleChange,\n        options,\n        getOptionLabel,\n        renderInput,\n        freeSolo,\n        fullWidth,\n        clearOnBlur\n      }\n    );\n  }\n);\n\nconst SearchAutocompleteDefaultOption = (props) => {\n  const {\n    icon,\n    primaryText,\n    primaryTextTypographyProps,\n    secondaryText,\n    secondaryTextTypographyProps,\n    disableTextTypography\n  } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, icon ? /* @__PURE__ */ React.createElement(ListItemIcon, null, icon) : null, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: primaryText,\n      primaryTypographyProps: primaryTextTypographyProps,\n      secondary: secondaryText,\n      secondaryTypographyProps: secondaryTextTypographyProps,\n      disableTypography: disableTextTypography\n    }\n  ));\n};\n\nconst useAsyncFilterValues = (fn, inputValue, defaultValues = [], debounce = 250) => {\n  const valuesMemo = useRef({});\n  const definiteFn = fn || (() => Promise.resolve([]));\n  const [state, callback] = useAsyncFn(definiteFn, [inputValue], {\n    loading: true\n  });\n  useDebounce(\n    () => {\n      if (valuesMemo.current[inputValue] === void 0) {\n        valuesMemo.current[inputValue] = callback(inputValue).then((values) => {\n          valuesMemo.current[inputValue] = values;\n          return values;\n        });\n      }\n    },\n    debounce,\n    [callback, inputValue]\n  );\n  if (defaultValues.length) {\n    return {\n      loading: false,\n      value: defaultValues\n    };\n  }\n  const possibleValue = valuesMemo.current[inputValue];\n  if (Array.isArray(possibleValue)) {\n    return {\n      loading: false,\n      value: possibleValue\n    };\n  }\n  return state;\n};\nconst useDefaultFilterValue = (name, defaultValue) => {\n  const { setFilters } = useSearch();\n  useEffect(() => {\n    if (defaultValue && [defaultValue].flat().length > 0) {\n      setFilters((prevFilters) => ({\n        ...prevFilters,\n        [name]: defaultValue\n      }));\n    }\n  }, []);\n};\n\nconst AutocompleteFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    name,\n    values: givenValues,\n    valuesDebounceMs,\n    label,\n    filterSelectedOptions,\n    limitTags,\n    multiple\n  } = props;\n  const [inputValue, setInputValue] = useState(\"\");\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values, loading } = useAsyncFilterValues(\n    asyncValues,\n    inputValue,\n    defaultValues,\n    valuesDebounceMs\n  );\n  const { filters, setFilters } = useSearch();\n  const filterValue = filters[name] || (multiple ? [] : null);\n  const handleChange = (_, newValue) => {\n    setFilters((prevState) => {\n      const { [name]: filter, ...others } = prevState;\n      if (newValue) {\n        return { ...others, [name]: newValue };\n      }\n      return { ...others };\n    });\n  };\n  const renderInput = (params) => /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      ...params,\n      name: \"search\",\n      variant: \"outlined\",\n      label,\n      fullWidth: true\n    }\n  );\n  const renderTags = (tagValue, getTagProps) => tagValue.map((option, index) => /* @__PURE__ */ React.createElement(Chip, { label: option, color: \"primary\", ...getTagProps({ index }) }));\n  return /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      filterSelectedOptions,\n      limitTags,\n      multiple,\n      className,\n      id: `${multiple ? \"multi-\" : \"\"}select-filter-${name}--select`,\n      options: values || [],\n      loading,\n      value: filterValue,\n      onChange: handleChange,\n      onInputChange: (_, newValue) => setInputValue(newValue),\n      renderInput,\n      renderTags\n    }\n  );\n};\n\nconst useStyles$2 = makeStyles({\n  label: {\n    textTransform: \"capitalize\"\n  },\n  checkboxWrapper: {\n    display: \"flex\",\n    alignItems: \"center\",\n    width: \"100%\"\n  },\n  textWrapper: {\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    whiteSpace: \"nowrap\"\n  }\n});\nconst CheckboxFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues = [],\n    valuesDebounceMs\n  } = props;\n  const classes = useStyles$2();\n  const { filters, setFilters } = useSearch();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(\n    asyncValues,\n    \"\",\n    defaultValues,\n    valuesDebounceMs\n  );\n  const handleChange = (e) => {\n    const {\n      target: { value, checked }\n    } = e;\n    setFilters((prevFilters) => {\n      const { [name]: filter, ...others } = prevFilters;\n      const rest = (filter || []).filter((i) => i !== value);\n      const items = checked ? [...rest, value] : rest;\n      return items.length ? { ...others, [name]: items } : others;\n    });\n  };\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      className,\n      disabled: loading,\n      fullWidth: true,\n      \"data-testid\": \"search-checkboxfilter-next\"\n    },\n    label ? /* @__PURE__ */ React.createElement(FormLabel, { className: classes.label }, label) : null,\n    values.map((value) => {\n      var _a;\n      return /* @__PURE__ */ React.createElement(\n        FormControlLabel,\n        {\n          key: value,\n          classes: {\n            root: classes.checkboxWrapper,\n            label: classes.textWrapper\n          },\n          label: value,\n          control: /* @__PURE__ */ React.createElement(\n            Checkbox,\n            {\n              color: \"primary\",\n              inputProps: { \"aria-labelledby\": value },\n              value,\n              name: value,\n              onChange: handleChange,\n              checked: ((_a = filters[name]) != null ? _a : []).includes(value)\n            }\n          )\n        }\n      );\n    })\n  );\n};\nconst SelectFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues,\n    valuesDebounceMs\n  } = props;\n  const classes = useStyles$2();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(\n    asyncValues,\n    \"\",\n    defaultValues,\n    valuesDebounceMs\n  );\n  const { filters, setFilters } = useSearch();\n  const handleChange = (e) => {\n    const {\n      target: { value }\n    } = e;\n    setFilters((prevFilters) => {\n      const { [name]: filter, ...others } = prevFilters;\n      return value ? { ...others, [name]: value } : others;\n    });\n  };\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      disabled: loading,\n      className,\n      variant: \"filled\",\n      fullWidth: true,\n      \"data-testid\": \"search-selectfilter-next\"\n    },\n    label ? /* @__PURE__ */ React.createElement(InputLabel, { className: classes.label, margin: \"dense\" }, label) : null,\n    /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        variant: \"outlined\",\n        value: filters[name] || \"\",\n        onChange: handleChange\n      },\n      /* @__PURE__ */ React.createElement(MenuItem, { value: \"\" }, /* @__PURE__ */ React.createElement(\"em\", null, \"All\")),\n      values.map((value) => /* @__PURE__ */ React.createElement(MenuItem, { key: value, value }, /* @__PURE__ */ React.createElement(Typography, { variant: \"inherit\", noWrap: true }, value)))\n    )\n  );\n};\nconst SearchFilter = (props) => {\n  const { component: Element, ...elementProps } = props;\n  return /* @__PURE__ */ React.createElement(Element, { ...elementProps });\n};\nSearchFilter.Checkbox = (props) => /* @__PURE__ */ React.createElement(SearchFilter, { ...props, component: CheckboxFilter });\nSearchFilter.Select = (props) => /* @__PURE__ */ React.createElement(SearchFilter, { ...props, component: SelectFilter });\nSearchFilter.Autocomplete = (props) => /* @__PURE__ */ React.createElement(SearchFilter, { ...props, component: AutocompleteFilter });\n\nconst encodePageCursor = (pageCursor) => {\n  return Buffer.from(pageCursor.toString(), \"utf-8\").toString(\"base64\");\n};\nconst decodePageCursor = (pageCursor) => {\n  if (!pageCursor)\n    return 0;\n  return Number(Buffer.from(pageCursor, \"base64\").toString(\"utf-8\"));\n};\nconst SearchPaginationBase = (props) => {\n  const {\n    total: count = -1,\n    cursor: pageCursor,\n    hasNextPage,\n    onCursorChange: onPageCursorChange,\n    limit: rowsPerPage = 25,\n    limitLabel: labelRowsPerPage = \"Results per page:\",\n    limitText: labelDisplayedRows = ({ from, to }) => count > 0 ? `of ${count}` : `${from}-${to}`,\n    limitOptions: rowsPerPageOptions,\n    onLimitChange: onPageLimitChange,\n    ...rest\n  } = props;\n  const page = useMemo(() => decodePageCursor(pageCursor), [pageCursor]);\n  const handlePageChange = useCallback(\n    (_, newValue) => {\n      onPageCursorChange == null ? void 0 : onPageCursorChange(encodePageCursor(newValue));\n    },\n    [onPageCursorChange]\n  );\n  const handleRowsPerPageChange = useCallback(\n    (e) => {\n      const newValue = e.target.value;\n      onPageLimitChange == null ? void 0 : onPageLimitChange(parseInt(newValue, 10));\n    },\n    [onPageLimitChange]\n  );\n  return /* @__PURE__ */ React.createElement(\n    TablePagination,\n    {\n      ...rest,\n      component: \"div\",\n      count,\n      page,\n      nextIconButtonProps: {\n        ...hasNextPage !== void 0 && { disabled: !hasNextPage }\n      },\n      onPageChange: handlePageChange,\n      rowsPerPage,\n      labelRowsPerPage,\n      labelDisplayedRows,\n      rowsPerPageOptions,\n      onRowsPerPageChange: handleRowsPerPageChange\n    }\n  );\n};\nconst SearchPagination = (props) => {\n  const { pageLimit, setPageLimit, pageCursor, setPageCursor, fetchNextPage } = useSearch();\n  const handlePageLimitChange = useCallback(\n    (newPageLimit) => {\n      setPageLimit(newPageLimit);\n      setPageCursor(void 0);\n    },\n    [setPageLimit, setPageCursor]\n  );\n  return /* @__PURE__ */ React.createElement(\n    SearchPaginationBase,\n    {\n      ...props,\n      hasNextPage: !!fetchNextPage,\n      limit: pageLimit,\n      onLimitChange: handlePageLimitChange,\n      cursor: pageCursor,\n      onCursorChange: setPageCursor\n    }\n  );\n};\n\nconst SearchResultContext = (props) => {\n  const { children } = props;\n  const context = useSearch();\n  const { result: state, ...query } = context;\n  return children(state, query);\n};\nconst SearchResultApi = (props) => {\n  const { query, children } = props;\n  const searchApi = useApi(searchApiRef);\n  const state = useAsync(() => {\n    const { term = \"\", types = [], filters = {}, ...rest } = query;\n    return searchApi.query({ ...rest, term, types, filters });\n  }, [query]);\n  return children(state, query);\n};\nconst SearchResultState = (props) => {\n  const { query, children } = props;\n  return query ? /* @__PURE__ */ React.createElement(SearchResultApi, { query }, children) : /* @__PURE__ */ React.createElement(SearchResultContext, null, children);\n};\nconst SearchResultComponent = (props) => {\n  const {\n    query,\n    children,\n    noResultsComponent = /* @__PURE__ */ React.createElement(EmptyState, { missing: \"data\", title: \"Sorry, no results were found\" }),\n    ...rest\n  } = props;\n  return /* @__PURE__ */ React.createElement(SearchResultState, { query }, ({ loading, error, value }) => {\n    if (loading) {\n      return /* @__PURE__ */ React.createElement(Progress, null);\n    }\n    if (error) {\n      return /* @__PURE__ */ React.createElement(\n        ResponseErrorPanel,\n        {\n          title: \"Error encountered while fetching search results\",\n          error\n        }\n      );\n    }\n    if (!(value == null ? void 0 : value.results.length)) {\n      return noResultsComponent;\n    }\n    if (isFunction(children)) {\n      return children(value);\n    }\n    return /* @__PURE__ */ React.createElement(SearchResultListItemExtensions, { ...rest, results: value.results }, children);\n  });\n};\nconst SearchResult = (props) => /* @__PURE__ */ React.createElement(\n  AnalyticsContext,\n  {\n    attributes: {\n      pluginId: \"search\",\n      extension: \"SearchResult\"\n    }\n  },\n  /* @__PURE__ */ React.createElement(SearchResultComponent, { ...props })\n);\n\nconst SearchResultListLayout = (props) => {\n  const {\n    error,\n    loading,\n    resultItems,\n    renderResultItem = (resultItem) => /* @__PURE__ */ React.createElement(\n      HigherOrderDefaultResultListItem,\n      {\n        key: resultItem.document.location,\n        result: resultItem.document\n      }\n    ),\n    disableRenderingWithNoResults,\n    noResultsComponent = disableRenderingWithNoResults ? null : /* @__PURE__ */ React.createElement(EmptyState, { missing: \"data\", title: \"Sorry, no results were found\" }),\n    ...rest\n  } = props;\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\n      ResponseErrorPanel,\n      {\n        title: \"Error encountered while fetching search results\",\n        error\n      }\n    );\n  }\n  if (!(resultItems == null ? void 0 : resultItems.length)) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, noResultsComponent);\n  }\n  return /* @__PURE__ */ React.createElement(List, { ...rest }, resultItems.map(renderResultItem));\n};\nconst SearchResultList = (props) => {\n  const { query, renderResultItem, children, ...rest } = props;\n  const defaultRenderResultItem = useSearchResultListItemExtensions(children);\n  return /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: {\n        pluginId: \"search\",\n        extension: \"SearchResultList\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(SearchResultState, { query }, ({ loading, error, value }) => /* @__PURE__ */ React.createElement(\n      SearchResultListLayout,\n      {\n        ...rest,\n        error,\n        loading,\n        resultItems: value == null ? void 0 : value.results,\n        renderResultItem: renderResultItem != null ? renderResultItem : defaultRenderResultItem\n      }\n    ))\n  );\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  listSubheader: {\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  listSubheaderName: {\n    marginLeft: theme.spacing(1),\n    textTransform: \"uppercase\"\n  },\n  listSubheaderChip: {\n    color: theme.palette.text.secondary,\n    margin: theme.spacing(0, 0, 0, 1.5)\n  },\n  listSubheaderFilter: {\n    display: \"flex\",\n    color: theme.palette.text.secondary,\n    margin: theme.spacing(0, 0, 0, 1.5)\n  },\n  listSubheaderLink: {\n    marginLeft: \"auto\",\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  listSubheaderLinkIcon: {\n    fontSize: \"inherit\",\n    marginLeft: theme.spacing(0.5)\n  }\n}));\nconst SearchResultGroupFilterFieldLayout = (props) => {\n  const classes = useStyles$1();\n  const { label, children, ...rest } = props;\n  return /* @__PURE__ */ React.createElement(\n    Chip,\n    {\n      ...rest,\n      className: classes.listSubheaderFilter,\n      variant: \"outlined\",\n      label: /* @__PURE__ */ React.createElement(React.Fragment, null, label, \": \", children)\n    }\n  );\n};\nconst NullIcon = () => null;\nconst useSearchResultGroupTextFilterStyles = makeStyles((theme) => ({\n  root: {\n    fontSize: \"inherit\",\n    \"&:focus\": {\n      outline: \"none\",\n      background: theme.palette.common.white\n    },\n    \"&:not(:focus)\": {\n      cursor: \"pointer\",\n      color: theme.palette.primary.main,\n      \"&:hover\": {\n        textDecoration: \"underline\"\n      }\n    }\n  }\n}));\nconst SearchResultGroupTextFilterField = (props) => {\n  const classes = useSearchResultGroupTextFilterStyles();\n  const { label, value = \"None\", onChange, onDelete } = props;\n  const handleChange = useCallback(\n    (e) => {\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n  return /* @__PURE__ */ React.createElement(SearchResultGroupFilterFieldLayout, { label, onDelete }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      role: \"textbox\",\n      component: \"span\",\n      className: classes.root,\n      onChange: handleChange,\n      contentEditable: true,\n      suppressContentEditableWarning: true\n    },\n    value == null ? void 0 : value.toString()\n  ));\n};\nconst useSearchResultGroupSelectFilterStyles = makeStyles((theme) => ({\n  root: {\n    fontSize: \"inherit\",\n    \"&:not(:focus)\": {\n      cursor: \"pointer\",\n      color: theme.palette.primary.main,\n      \"&:hover\": {\n        textDecoration: \"underline\"\n      }\n    },\n    \"&:focus\": {\n      outline: \"none\"\n    },\n    \"&>div:first-child\": {\n      padding: 0\n    }\n  }\n}));\nconst SearchResultGroupSelectFilterField = (props) => {\n  const classes = useSearchResultGroupSelectFilterStyles();\n  const { label, value = \"none\", onChange, onDelete, children } = props;\n  const handleChange = useCallback(\n    (e) => {\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n  return /* @__PURE__ */ React.createElement(SearchResultGroupFilterFieldLayout, { label, onDelete }, /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      className: classes.root,\n      value,\n      onChange: handleChange,\n      input: /* @__PURE__ */ React.createElement(InputBase, null),\n      IconComponent: NullIcon\n    },\n    /* @__PURE__ */ React.createElement(MenuItem, { value: \"none\" }, \"None\"),\n    children\n  ));\n};\nfunction SearchResultGroupLayout(props) {\n  const classes = useStyles$1();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const {\n    error,\n    loading,\n    icon,\n    title,\n    titleProps = {},\n    link = /* @__PURE__ */ React.createElement(React.Fragment, null, \"See all\", /* @__PURE__ */ React.createElement(ArrowRightIcon, { className: classes.listSubheaderLinkIcon })),\n    linkProps = {},\n    filterOptions,\n    renderFilterOption = (filterOption) => /* @__PURE__ */ React.createElement(MenuItem, { key: String(filterOption), value: String(filterOption) }, String(filterOption)),\n    filterFields,\n    renderFilterField,\n    resultItems,\n    renderResultItem = (resultItem) => /* @__PURE__ */ React.createElement(\n      HigherOrderDefaultResultListItem,\n      {\n        key: resultItem.document.location,\n        result: resultItem.document\n      }\n    ),\n    disableRenderingWithNoResults,\n    noResultsComponent = disableRenderingWithNoResults ? null : /* @__PURE__ */ React.createElement(EmptyState, { missing: \"data\", title: \"Sorry, no results were found\" }),\n    ...rest\n  } = props;\n  const handleClick = useCallback((e) => {\n    setAnchorEl(e.currentTarget);\n  }, []);\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\n      ResponseErrorPanel,\n      {\n        title: \"Error encountered while fetching search results\",\n        error\n      }\n    );\n  }\n  if (!(resultItems == null ? void 0 : resultItems.length)) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, noResultsComponent);\n  }\n  return /* @__PURE__ */ React.createElement(List, { ...rest }, /* @__PURE__ */ React.createElement(ListSubheader, { className: classes.listSubheader }, icon, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      className: classes.listSubheaderName,\n      component: \"strong\",\n      ...titleProps\n    },\n    title\n  ), filterOptions ? /* @__PURE__ */ React.createElement(\n    Chip,\n    {\n      className: classes.listSubheaderChip,\n      component: \"button\",\n      icon: /* @__PURE__ */ React.createElement(AddIcon, null),\n      variant: \"outlined\",\n      label: \"Add filter\",\n      \"aria-controls\": \"filters-menu\",\n      \"aria-haspopup\": \"true\",\n      onClick: handleClick\n    }\n  ) : null, filterOptions ? /* @__PURE__ */ React.createElement(\n    Menu,\n    {\n      id: \"filters-menu\",\n      anchorEl,\n      open: Boolean(anchorEl),\n      onClose: handleClose,\n      onClick: handleClose,\n      keepMounted: true\n    },\n    filterOptions.map(renderFilterOption)\n  ) : null, filterFields == null ? void 0 : filterFields.map(\n    (filterField) => {\n      var _a;\n      return (_a = renderFilterField == null ? void 0 : renderFilterField(filterField)) != null ? _a : null;\n    }\n  ), /* @__PURE__ */ React.createElement(Link, { className: classes.listSubheaderLink, to: \"/search\", ...linkProps }, link)), resultItems.map(renderResultItem));\n}\nfunction SearchResultGroup(props) {\n  const { query, children, renderResultItem, linkProps = {}, ...rest } = props;\n  const defaultRenderResultItem = useSearchResultListItemExtensions(children);\n  return /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: {\n        pluginId: \"search\",\n        extension: \"SearchResultGroup\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(SearchResultState, { query }, ({ loading, error, value }, { term, types, pageCursor, filters = {} }) => {\n      const to = `/search?${qs.stringify(\n        { term, types, filters, pageCursor, query: term },\n        { arrayFormat: \"brackets\" }\n      )}`;\n      return /* @__PURE__ */ React.createElement(\n        SearchResultGroupLayout,\n        {\n          ...rest,\n          error,\n          loading,\n          linkProps: { to, ...linkProps },\n          filterFields: Object.keys(filters),\n          resultItems: value == null ? void 0 : value.results,\n          renderResultItem: renderResultItem != null ? renderResultItem : defaultRenderResultItem\n        }\n      );\n    })\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    gap: theme.spacing(2),\n    margin: theme.spacing(2, 0)\n  }\n}));\nconst SearchResultPager = () => {\n  const { fetchNextPage, fetchPreviousPage } = useSearch();\n  const classes = useStyles();\n  if (!fetchNextPage && !fetchPreviousPage) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null);\n  }\n  return /* @__PURE__ */ React.createElement(\"nav\", { \"aria-label\": \"pagination navigation\", className: classes.root }, /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      \"aria-label\": \"previous page\",\n      disabled: !fetchPreviousPage,\n      onClick: fetchPreviousPage,\n      startIcon: /* @__PURE__ */ React.createElement(ArrowBackIosIcon, null)\n    },\n    \"Previous\"\n  ), /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      \"aria-label\": \"next page\",\n      disabled: !fetchNextPage,\n      onClick: fetchNextPage,\n      endIcon: /* @__PURE__ */ React.createElement(ArrowRightIcon, null)\n    },\n    \"Next\"\n  ));\n};\n\nexport { AutocompleteFilter, CheckboxFilter, MockSearchApi, SearchAutocomplete, SearchAutocompleteDefaultOption, SearchBar, SearchBarBase, SearchContextProvider, SearchFilter, SearchPagination, SearchPaginationBase, SearchResult, SearchResultApi, SearchResultComponent, SearchResultContext, SearchResultGroup, SearchResultGroupFilterFieldLayout, SearchResultGroupLayout, SearchResultGroupSelectFilterField, SearchResultGroupTextFilterField, SearchResultList, SearchResultListLayout, SearchResultPager, SearchResultState, SelectFilter, searchApiRef, useSearch, useSearchContextCheck };\n//# sourceMappingURL=index.esm.js.map\n","import { ResponseError } from '@backstage/errors';\nimport qs from 'qs';\nimport { searchApiRef, SearchContextProvider, useSearch } from '@backstage/plugin-search-react';\nimport { createRouteRef, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, createRoutableExtension, createComponentExtension, useApi } from '@backstage/core-plugin-api';\nimport React, { useEffect, useState, Fragment, cloneElement } from 'react';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport { useOutlet, useLocation } from 'react-router-dom';\nimport { makeStyles, Card, CardHeader, CardContent, Accordion, AccordionSummary, AccordionDetails, List, Divider, ListItem, ListItemIcon, ListItemText, Tabs, Tab, FormControl, InputLabel, Select, Chip, MenuItem, Checkbox } from '@material-ui/core';\nimport useEffectOnce from 'react-use/lib/useEffectOnce';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport AllIcon from '@material-ui/icons/FontDownload';\nimport useAsync from 'react-use/lib/useAsync';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass SearchClient {\n  constructor(options) {\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"identityApi\");\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n  async query(query) {\n    const { token } = await this.identityApi.getCredentials();\n    const queryString = qs.stringify(query);\n    const url = `${await this.discoveryApi.getBaseUrl(\n      \"search\"\n    )}/query?${queryString}`;\n    const response = await fetch(url, {\n      headers: token ? { Authorization: `Bearer ${token}` } : {}\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return response.json();\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"search\"\n});\nconst searchPlugin = createPlugin({\n  id: \"search\",\n  apis: [\n    createApiFactory({\n      api: searchApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) => {\n        return new SearchClient({ discoveryApi, identityApi });\n      }\n    })\n  ],\n  routes: {\n    root: rootRouteRef\n  }\n});\nconst SearchPage$1 = searchPlugin.provide(\n  createRoutableExtension({\n    name: \"SearchPage\",\n    component: () => import('./index-104a35c3.esm.js').then((m) => m.SearchPage),\n    mountPoint: rootRouteRef\n  })\n);\nconst SidebarSearchModal = searchPlugin.provide(\n  createComponentExtension({\n    name: \"SidebarSearchModal\",\n    component: {\n      lazy: () => import('./index-eb06eaf0.esm.js').then(\n        (m) => m.SidebarSearchModal\n      )\n    }\n  })\n);\nconst HomePageSearchBar = searchPlugin.provide(\n  createComponentExtension({\n    name: \"HomePageSearchBar\",\n    component: {\n      lazy: () => import('./index-790c65a5.esm.js').then((m) => m.HomePageSearchBar)\n    }\n  })\n);\n\nconst UrlUpdater = () => {\n  const location = useLocation();\n  const {\n    term,\n    setTerm,\n    types,\n    setTypes,\n    pageCursor,\n    setPageCursor,\n    filters,\n    setFilters\n  } = useSearch();\n  const prevQueryParams = usePrevious(location.search);\n  useEffect(() => {\n    if (location.search === prevQueryParams) {\n      return;\n    }\n    const query = qs.parse(location.search.substring(1), { arrayLimit: 0 }) || {};\n    if (query.filters) {\n      setFilters(query.filters);\n    }\n    if (query.query) {\n      setTerm(query.query);\n    }\n    if (query.pageCursor) {\n      setPageCursor(query.pageCursor);\n    }\n    if (query.types) {\n      setTypes(query.types);\n    }\n  }, [prevQueryParams, location, setTerm, setTypes, setPageCursor, setFilters]);\n  useEffect(() => {\n    const newParams = qs.stringify(\n      {\n        query: term,\n        types,\n        pageCursor,\n        filters\n      },\n      { arrayFormat: \"brackets\" }\n    );\n    const newUrl = `${window.location.pathname}?${newParams}`;\n    window.history.replaceState(null, document.title, newUrl);\n  }, [term, types, pageCursor, filters]);\n  return null;\n};\nconst SearchPage = () => {\n  const outlet = useOutlet();\n  return /* @__PURE__ */ React.createElement(SearchContextProvider, null, /* @__PURE__ */ React.createElement(UrlUpdater, null), outlet);\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  card: {\n    backgroundColor: \"rgba(0, 0, 0, .11)\"\n  },\n  cardContent: {\n    paddingTop: theme.spacing(1)\n  },\n  icon: {\n    color: theme.palette.common.black\n  },\n  list: {\n    width: \"100%\"\n  },\n  listItemIcon: {\n    width: \"24px\",\n    height: \"24px\"\n  },\n  accordion: {\n    backgroundColor: theme.palette.background.paper\n  },\n  accordionSummary: {\n    minHeight: \"auto\",\n    \"&.Mui-expanded\": {\n      minHeight: \"auto\"\n    }\n  },\n  accordionSummaryContent: {\n    margin: theme.spacing(2, 0),\n    \"&.Mui-expanded\": {\n      margin: theme.spacing(2, 0)\n    }\n  },\n  accordionDetails: {\n    padding: theme.spacing(0, 0, 1)\n  }\n}));\nconst SearchTypeAccordion = (props) => {\n  const classes = useStyles$2();\n  const { filters, setPageCursor, setTypes, term, types } = useSearch();\n  const searchApi = useApi(searchApiRef);\n  const [expanded, setExpanded] = useState(true);\n  const { defaultValue, name, showCounts, types: givenTypes } = props;\n  const toggleExpanded = () => setExpanded((prevState) => !prevState);\n  const handleClick = (type) => {\n    return () => {\n      setTypes(type !== \"\" ? [type] : []);\n      setPageCursor(void 0);\n      setExpanded(false);\n    };\n  };\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n  }, []);\n  const definedTypes = [\n    {\n      value: \"\",\n      name: \"All\",\n      icon: /* @__PURE__ */ React.createElement(AllIcon, null)\n    },\n    ...givenTypes\n  ];\n  const selected = types[0] || \"\";\n  const { value: resultCounts } = useAsync(async () => {\n    if (!showCounts) {\n      return {};\n    }\n    const counts = await Promise.all(\n      definedTypes.map((t) => t.value).map(async (type) => {\n        const { numberOfResults } = await searchApi.query({\n          term,\n          types: type ? [type] : [],\n          filters: types.includes(type) || !types.length && !type ? filters : {},\n          pageLimit: 0\n        });\n        return [\n          type,\n          numberOfResults !== void 0 ? `${numberOfResults >= 1e4 ? `>10000` : numberOfResults} results` : \" -- \"\n        ];\n      })\n    );\n    return Object.fromEntries(counts);\n  }, [filters, showCounts, term, types]);\n  return /* @__PURE__ */ React.createElement(Card, { className: classes.card }, /* @__PURE__ */ React.createElement(CardHeader, { title: name, titleTypographyProps: { variant: \"overline\" } }), /* @__PURE__ */ React.createElement(CardContent, { className: classes.cardContent }, /* @__PURE__ */ React.createElement(\n    Accordion,\n    {\n      className: classes.accordion,\n      expanded,\n      onChange: toggleExpanded\n    },\n    /* @__PURE__ */ React.createElement(\n      AccordionSummary,\n      {\n        classes: {\n          root: classes.accordionSummary,\n          content: classes.accordionSummaryContent\n        },\n        expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { className: classes.icon }),\n        IconButtonProps: { size: \"small\" }\n      },\n      expanded ? \"Collapse\" : definedTypes.filter((t) => t.value === selected)[0].name\n    ),\n    /* @__PURE__ */ React.createElement(AccordionDetails, { classes: { root: classes.accordionDetails } }, /* @__PURE__ */ React.createElement(\n      List,\n      {\n        className: classes.list,\n        component: \"nav\",\n        \"aria-label\": \"filter by type\",\n        disablePadding: true,\n        dense: true\n      },\n      definedTypes.map((type) => /* @__PURE__ */ React.createElement(Fragment, { key: type.value }, /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(\n        ListItem,\n        {\n          selected: types[0] === type.value || types.length === 0 && type.value === \"\",\n          onClick: handleClick(type.value),\n          button: true\n        },\n        /* @__PURE__ */ React.createElement(ListItemIcon, null, cloneElement(type.icon, {\n          className: classes.listItemIcon\n        })),\n        /* @__PURE__ */ React.createElement(\n          ListItemText,\n          {\n            primary: type.name,\n            secondary: resultCounts && resultCounts[type.value]\n          }\n        )\n      )))\n    ))\n  )));\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  tabs: {\n    borderBottom: `1px solid ${theme.palette.textVerySubtle}`\n  },\n  tab: {\n    height: \"50px\",\n    fontWeight: theme.typography.fontWeightBold,\n    fontSize: theme.typography.pxToRem(13),\n    color: theme.palette.text.primary,\n    minWidth: \"130px\"\n  }\n}));\nconst SearchTypeTabs = (props) => {\n  const classes = useStyles$1();\n  const { setPageCursor, setTypes, types } = useSearch();\n  const { defaultValue, types: givenTypes } = props;\n  const changeTab = (_, newType) => {\n    setTypes(newType !== \"\" ? [newType] : []);\n    setPageCursor(void 0);\n  };\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n  }, []);\n  const definedTypes = [\n    {\n      value: \"\",\n      name: \"All\"\n    },\n    ...givenTypes\n  ];\n  return /* @__PURE__ */ React.createElement(\n    Tabs,\n    {\n      \"aria-label\": \"List of search types tabs\",\n      className: classes.tabs,\n      indicatorColor: \"primary\",\n      value: types.length === 0 ? \"\" : types[0],\n      onChange: changeTab\n    },\n    definedTypes.map((type, idx) => /* @__PURE__ */ React.createElement(\n      Tab,\n      {\n        key: idx,\n        className: classes.tab,\n        label: type.name,\n        value: type.value\n      }\n    ))\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  label: {\n    textTransform: \"capitalize\"\n  },\n  chips: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    marginTop: theme.spacing(1)\n  },\n  chip: {\n    margin: 2\n  }\n}));\nconst SearchType = (props) => {\n  const { className, defaultValue, name, values = [] } = props;\n  const classes = useStyles();\n  const { types, setTypes } = useSearch();\n  useEffectOnce(() => {\n    if (!types.length) {\n      if (defaultValue && Array.isArray(defaultValue)) {\n        setTypes(defaultValue);\n      } else if (defaultValue) {\n        setTypes([defaultValue]);\n      }\n    }\n  });\n  const handleChange = (e) => {\n    const value = e.target.value;\n    setTypes(value);\n  };\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      className,\n      variant: \"filled\",\n      fullWidth: true,\n      \"data-testid\": \"search-typefilter-next\"\n    },\n    /* @__PURE__ */ React.createElement(InputLabel, { className: classes.label, margin: \"dense\" }, name),\n    /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        multiple: true,\n        variant: \"outlined\",\n        value: types,\n        onChange: handleChange,\n        placeholder: \"All Results\",\n        renderValue: (selected) => /* @__PURE__ */ React.createElement(\"div\", { className: classes.chips }, selected.map((value) => /* @__PURE__ */ React.createElement(\n          Chip,\n          {\n            key: value,\n            label: value,\n            className: classes.chip,\n            size: \"small\"\n          }\n        )))\n      },\n      values.map((value) => /* @__PURE__ */ React.createElement(MenuItem, { key: value, value }, /* @__PURE__ */ React.createElement(Checkbox, { checked: types.indexOf(value) > -1 }), /* @__PURE__ */ React.createElement(ListItemText, { primary: value })))\n    )\n  );\n};\nSearchType.Accordion = (props) => {\n  return /* @__PURE__ */ React.createElement(SearchTypeAccordion, { ...props });\n};\nSearchType.Tabs = (props) => {\n  return /* @__PURE__ */ React.createElement(SearchTypeTabs, { ...props });\n};\n\nexport { HomePageSearchBar as H, SearchPage as S, UrlUpdater as U, SearchType as a, SearchPage$1 as b, SidebarSearchModal as c, SearchClient as d, rootRouteRef as r, searchPlugin as s };\n//# sourceMappingURL=SearchType-a8f79021.esm.js.map\n","import { createApiRef, createRouteRef, createPlugin, createApiFactory, createRoutableExtension } from '@backstage/core-plugin-api';\n\nconst techRadarApiRef = createApiRef(\n  {\n    id: \"plugin.techradar.service\"\n  }\n);\nvar MovedState = /* @__PURE__ */ ((MovedState2) => {\n  MovedState2[MovedState2[\"Down\"] = -1] = \"Down\";\n  MovedState2[MovedState2[\"NoChange\"] = 0] = \"NoChange\";\n  MovedState2[MovedState2[\"Up\"] = 1] = \"Up\";\n  return MovedState2;\n})(MovedState || {});\n\nconst rings = new Array();\nrings.push({\n  id: \"adopt\",\n  name: \"ADOPT\",\n  color: \"#5BA300\",\n  description: \"Commodi accusantium culpa sed itaque excepturi rem eum nulla possimus.\"\n});\nrings.push({\n  id: \"trial\",\n  name: \"TRIAL\",\n  color: \"#009EB0\",\n  description: \"Recusandae possimus ipsum dolores.\"\n});\nrings.push({\n  id: \"assess\",\n  name: \"ASSESS\",\n  color: \"#C7BA00\",\n  description: \"In asperiores repellat error recusandae et adipisci laborum porro.\"\n});\nrings.push({\n  id: \"hold\",\n  name: \"HOLD\",\n  color: \"#E09B96\",\n  description: \"Esse mollitia in.\"\n});\nconst quadrants = new Array();\nquadrants.push({ id: \"infrastructure\", name: \"Infrastructure\" });\nquadrants.push({ id: \"frameworks\", name: \"Frameworks\" });\nquadrants.push({ id: \"languages\", name: \"Languages\" });\nquadrants.push({ id: \"process\", name: \"Process\" });\nconst entries = new Array();\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua\"\n    }\n  ],\n  key: \"javascript\",\n  id: \"javascript\",\n  title: \"JavaScript\",\n  quadrant: \"languages\",\n  links: [\n    {\n      url: \"https://www.javascript.com/\",\n      title: \"Learn more\"\n    },\n    {\n      url: \"https://www.typescriptlang.org/\",\n      title: \"TypeScript\"\n    }\n  ],\n  description: 'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\\n\\n```ts\\nconst x = \"3\";\\n```\\n'\n});\nentries.push({\n  timeline: [\n    {\n      moved: -1,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat\"\n    }\n  ],\n  key: \"typescript\",\n  id: \"typescript\",\n  title: \"TypeScript\",\n  quadrant: \"languages\",\n  description: \"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 1,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur\"\n    }\n  ],\n  links: [\n    {\n      url: \"https://webpack.js.org/\",\n      title: \"Learn more\"\n    }\n  ],\n  key: \"webpack\",\n  id: \"webpack\",\n  title: \"Webpack\",\n  quadrant: \"frameworks\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  links: [\n    {\n      url: \"https://reactjs.org/\",\n      title: \"Learn more\"\n    }\n  ],\n  key: \"react\",\n  id: \"react\",\n  title: \"React\",\n  quadrant: \"frameworks\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"code-reviews\",\n  id: \"code-reviews\",\n  title: \"Code Reviews\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"assess\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"mob-programming\",\n  id: \"mob-programming\",\n  title: \"Mob Programming\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"docs-like-code\",\n  id: \"docs-like-code\",\n  title: \"Docs-like-code\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      ringId: \"hold\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"force-push\",\n  id: \"force-push\",\n  title: \"Force push to master\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"long description\"\n    },\n    {\n      ringId: \"trial\",\n      date: /* @__PURE__ */ new Date(\"2020-07-05\"),\n      description: \"long description\"\n    }\n  ],\n  links: [\n    {\n      url: \"https://github.com\",\n      title: \"Learn more\"\n    }\n  ],\n  key: \"github-actions\",\n  id: \"github-actions\",\n  title: \"GitHub Actions\",\n  quadrant: \"infrastructure\"\n});\nconst mock = {\n  entries,\n  quadrants,\n  rings\n};\nclass SampleTechRadarApi {\n  async load() {\n    return mock;\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"tech-radar\"\n});\nconst techRadarPlugin = createPlugin({\n  id: \"tech-radar\",\n  routes: {\n    root: rootRouteRef\n  },\n  apis: [createApiFactory(techRadarApiRef, new SampleTechRadarApi())]\n});\nconst TechRadarPage = techRadarPlugin.provide(\n  createRoutableExtension({\n    name: \"TechRadarPage\",\n    component: () => import('./RadarPage-bd00b800.esm.js').then(function (n) { return n.b; }).then((m) => m.RadarPage),\n    mountPoint: rootRouteRef\n  })\n);\n\nexport { MovedState as M, SampleTechRadarApi as S, TechRadarPage as T, techRadarApiRef as a, rootRouteRef as r, techRadarPlugin as t };\n//# sourceMappingURL=plugin-76dae734.esm.js.map\n","import { useApi, configApiRef, createPlugin } from '@backstage/core-plugin-api';\nimport { useShadowRootElements, useShadowRootSelection, createTechDocsAddonExtension, TechDocsAddonLocations } from '@backstage/plugin-techdocs-react';\nimport React, { useState, useCallback, useEffect, useMemo } from 'react';\nimport { useLocalStorageValue } from '@react-hookz/web';\nimport { withStyles, Button, makeStyles, Portal, Paper, Slider, useTheme, MenuItem, ListItemText, Typography, Box, IconButton } from '@material-ui/core';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport parseGitUrl from 'git-url-parse';\nimport { replaceGithubUrlType, replaceGitLabUrlType } from '@backstage/integration';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport { Link, GitHubIcon } from '@backstage/core-components';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport PhotoSwipeLightbox from 'photoswipe/lightbox';\nimport PhotoSwipe from 'photoswipe';\nimport 'photoswipe/style.css';\n\nconst NESTED_LIST_TOGGLE = \".md-nav__item--nested .md-toggle\";\nconst EXPANDABLE_NAVIGATION_LOCAL_STORAGE = \"@backstage/techdocs-addons/nav-expanded\";\nconst StyledButton = withStyles({\n  root: {\n    position: \"absolute\",\n    left: \"220px\",\n    top: \"19px\",\n    padding: 0,\n    minWidth: 0\n  }\n})(Button);\nconst CollapsedIcon = withStyles({\n  root: {\n    height: \"20px\",\n    width: \"20px\"\n  }\n})(ChevronRightIcon);\nconst ExpandedIcon = withStyles({\n  root: {\n    height: \"20px\",\n    width: \"20px\"\n  }\n})(ExpandMoreIcon);\nconst ExpandableNavigationAddon = () => {\n  const defaultValue = { expandAllNestedNavs: false };\n  const { value: expanded, set: setExpanded } = useLocalStorageValue(\n    EXPANDABLE_NAVIGATION_LOCAL_STORAGE,\n    { defaultValue }\n  );\n  const [hasNavSubLevels, setHasNavSubLevels] = useState(false);\n  const [...checkboxToggles] = useShadowRootElements([\n    NESTED_LIST_TOGGLE\n  ]);\n  const shouldToggle = useCallback(\n    (item) => {\n      const isExpanded = item.checked;\n      const shouldExpand = expanded == null ? void 0 : expanded.expandAllNestedNavs;\n      if (shouldExpand && !isExpanded) {\n        return true;\n      }\n      if (!shouldExpand && isExpanded) {\n        return true;\n      }\n      return false;\n    },\n    [expanded]\n  );\n  useEffect(() => {\n    if (!(checkboxToggles == null ? void 0 : checkboxToggles.length))\n      return;\n    setHasNavSubLevels(true);\n    checkboxToggles.forEach((item) => {\n      if (shouldToggle(item))\n        item.click();\n    });\n  }, [expanded, shouldToggle, checkboxToggles]);\n  const handleState = () => {\n    setExpanded((prevState) => ({\n      expandAllNestedNavs: !(prevState == null ? void 0 : prevState.expandAllNestedNavs)\n    }));\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, hasNavSubLevels ? /* @__PURE__ */ React.createElement(\n    StyledButton,\n    {\n      size: \"small\",\n      onClick: handleState,\n      \"aria-label\": (expanded == null ? void 0 : expanded.expandAllNestedNavs) ? \"collapse-nav\" : \"expand-nav\"\n    },\n    (expanded == null ? void 0 : expanded.expandAllNestedNavs) ? /* @__PURE__ */ React.createElement(ExpandedIcon, null) : /* @__PURE__ */ React.createElement(CollapsedIcon, null)\n  ) : null);\n};\n\nconst ADDON_FEEDBACK_CONTAINER_ID = \"techdocs-report-issue\";\nconst ADDON_FEEDBACK_CONTAINER_SELECTOR = `#${ADDON_FEEDBACK_CONTAINER_ID}`;\nconst PAGE_EDIT_LINK_SELECTOR = '[title^=\"Edit this page\"]';\nconst PAGE_FEEDBACK_LINK_SELECTOR = '[title^=\"Leave feedback for\"]';\nconst PAGE_MAIN_CONTENT_SELECTOR = '[data-md-component=\"main\"] .md-content';\n\nconst resolveBlobUrl = (url, type) => {\n  if (type === \"github\") {\n    return replaceGithubUrlType(url, \"blob\");\n  } else if (type === \"gitlab\") {\n    return replaceGitLabUrlType(url, \"blob\");\n  }\n  console.error(\n    `Invalid SCM type ${type} found in ReportIssue addon for URL ${url}!`\n  );\n  return url;\n};\nconst getTitle = (selection) => {\n  const text = selection.toString().substring(0, 70);\n  const ellipsis = text.length === 70 ? \"...\" : \"\";\n  return `Documentation feedback: ${text}${ellipsis}`;\n};\nconst getBody = (selection, markdownUrl, appTitle) => {\n  const title = \"## Documentation Feedback \\u{1F4DD}\";\n  const subheading = \"#### The highlighted text:\";\n  const commentHeading = \"#### The comment on the text:\";\n  const commentPlaceholder = \"_>replace this line with your comment<_\";\n  const highlightedTextAsQuote = selection.toString().trim().split(\"\\n\").map((line) => `> ${line.trim()}`).join(\"\\n\");\n  const facts = [\n    `${appTitle} URL: <${window.location.href}> \nMarkdown URL: <${markdownUrl}>`\n  ];\n  return `${title}\n\n ${subheading} \n\n ${highlightedTextAsQuote}\n\n ${commentHeading} \n ${commentPlaceholder}\n\n ___\n${facts}`;\n};\nconst useGitTemplate = (debounceTime) => {\n  var _a, _b;\n  const initialTemplate = { title: \"\", body: \"\" };\n  const selection = useShadowRootSelection(debounceTime);\n  const [editLink] = useShadowRootElements([PAGE_EDIT_LINK_SELECTOR]);\n  const url = (_a = editLink == null ? void 0 : editLink.href) != null ? _a : \"\";\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptionalString(\"app.title\") || \"Backstage\";\n  if (!selection || !url)\n    return initialTemplate;\n  const type = (_b = scmIntegrationsApi.byUrl(url)) == null ? void 0 : _b.type;\n  if (!type)\n    return initialTemplate;\n  return {\n    title: getTitle(selection),\n    body: getBody(selection, resolveBlobUrl(url, type), appTitle)\n  };\n};\nconst useGitRepository = () => {\n  var _a, _b;\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const [editLink] = useShadowRootElements([PAGE_EDIT_LINK_SELECTOR]);\n  const url = (_a = editLink == null ? void 0 : editLink.href) != null ? _a : \"\";\n  if (!url)\n    return null;\n  const type = (_b = scmIntegrationsApi.byUrl(url)) == null ? void 0 : _b.type;\n  if (!type)\n    return null;\n  return { ...parseGitUrl(resolveBlobUrl(url, type)), type };\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  root: {\n    display: \"grid\",\n    gridGap: theme.spacing(1),\n    gridAutoFlow: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    color: theme.palette.common.black,\n    fontSize: theme.typography.button.fontSize\n  }\n}));\nconst getIcon = ({ type }) => {\n  if (type === \"github\") {\n    return GitHubIcon;\n  }\n  return BugReportIcon;\n};\nconst getName = ({ type }) => {\n  if (type === \"github\") {\n    return \"Github\";\n  }\n  return \"Gitlab\";\n};\nconst getUrl = (repository, template) => {\n  const { title, body } = template;\n  const encodedTitle = encodeURIComponent(title);\n  const encodedBody = encodeURIComponent(body);\n  const { protocol, resource, owner, name, type } = repository;\n  const url = `${protocol}://${resource}/${owner}/${name}`;\n  const encodedUrl = encodeURI(url);\n  if (type === \"github\") {\n    return `${encodedUrl}/issues/new?title=${encodedTitle}&body=${encodedBody}`;\n  }\n  return `${encodedUrl}/issues/new?issue[title]=${encodedTitle}&issue[description]=${encodedBody}`;\n};\nconst IssueLink = ({ template, repository }) => {\n  const classes = useStyles$2();\n  const Icon = getIcon(repository);\n  const url = getUrl(repository, template);\n  return /* @__PURE__ */ React.createElement(Link, { className: classes.root, to: url, target: \"_blank\" }, /* @__PURE__ */ React.createElement(Icon, null), \" Open new \", getName(repository), \" issue\");\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  root: {\n    transform: \"translate(-100%, -100%)\",\n    position: \"absolute\",\n    padding: theme.spacing(1),\n    zIndex: theme.zIndex.tooltip,\n    background: theme.palette.common.white\n  }\n}));\nconst ReportIssueAddon = ({\n  debounceTime = 500,\n  templateBuilder: buildTemplate\n}) => {\n  const classes = useStyles$1();\n  const [style, setStyle] = useState();\n  const repository = useGitRepository();\n  const defaultTemplate = useGitTemplate(debounceTime);\n  const selection = useShadowRootSelection(debounceTime);\n  const [mainContent, feedbackLink] = useShadowRootElements([\n    PAGE_MAIN_CONTENT_SELECTOR,\n    PAGE_FEEDBACK_LINK_SELECTOR\n  ]);\n  let [feedbackContainer] = useShadowRootElements([\n    ADDON_FEEDBACK_CONTAINER_SELECTOR\n  ]);\n  if (feedbackLink) {\n    feedbackLink.style.display = \"none\";\n  }\n  useEffect(() => {\n    if (\n      // todo(backstage/techdocs-core) handle non-repo rendering\n      !repository || !selection || !selection.containsNode(mainContent, true) || (selection == null ? void 0 : selection.containsNode(feedbackContainer, true))\n    ) {\n      return;\n    }\n    const mainContentPosition = mainContent.getBoundingClientRect();\n    const selectionPosition = selection.getRangeAt(0).getBoundingClientRect();\n    setStyle({\n      top: `${selectionPosition.top - mainContentPosition.top - 16}px`,\n      left: `${selectionPosition.left + selectionPosition.width / 2}px`\n    });\n  }, [selection, mainContent, feedbackContainer]);\n  if (!selection || !repository || ![\"github\", \"gitlab\"].includes(repository.type))\n    return null;\n  if (!feedbackContainer) {\n    feedbackContainer = document.createElement(\"div\");\n    feedbackContainer.setAttribute(\"id\", ADDON_FEEDBACK_CONTAINER_ID);\n    mainContent.prepend(feedbackContainer);\n  }\n  return /* @__PURE__ */ React.createElement(Portal, { container: feedbackContainer }, /* @__PURE__ */ React.createElement(\n    Paper,\n    {\n      \"data-testid\": \"report-issue-addon\",\n      className: classes.root,\n      style\n    },\n    /* @__PURE__ */ React.createElement(\n      IssueLink,\n      {\n        repository,\n        template: buildTemplate ? buildTemplate({ selection }) : defaultTemplate\n      }\n    )\n  ));\n};\n\nconst boxShadow = \"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)\";\nconst StyledSlider = withStyles((theme) => ({\n  root: {\n    height: 2,\n    padding: \"15px 0\"\n  },\n  thumb: {\n    height: 18,\n    width: 18,\n    backgroundColor: theme.palette.common.white,\n    boxShadow,\n    marginTop: -9,\n    marginLeft: -9,\n    \"&:focus, &:hover, &$active\": {\n      boxShadow: \"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)\",\n      // Reset on touch devices, it doesn't add specificity\n      \"@media (hover: none)\": {\n        boxShadow\n      }\n    }\n  },\n  active: {},\n  valueLabel: {\n    top: \"100%\",\n    left: \"50%\",\n    transform: \"scale(1) translate(-50%, -5px) !important\",\n    \"& *\": {\n      color: theme.palette.common.black,\n      fontSize: theme.typography.caption.fontSize,\n      background: \"transparent\"\n    }\n  },\n  track: {\n    height: 2\n  },\n  rail: {\n    height: 2,\n    opacity: 0.5\n  },\n  mark: {\n    height: 10,\n    width: 1,\n    marginTop: -4\n  },\n  markActive: {\n    opacity: 1,\n    backgroundColor: \"currentColor\"\n  }\n}))(Slider);\nconst settings = {\n  key: \"techdocs.addons.settings.textsize\",\n  defaultValue: 100\n};\nconst marks = [\n  {\n    value: 90\n  },\n  {\n    value: 100\n  },\n  {\n    value: 115\n  },\n  {\n    value: 130\n  },\n  {\n    value: 150\n  }\n];\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    color: theme.palette.textSubtle,\n    display: \"flex\",\n    alignItems: \"center\",\n    margin: 0,\n    minWidth: 200\n  },\n  menuItem: {\n    \"&:hover\": {\n      background: \"transparent\"\n    }\n  },\n  decreaseButton: {\n    marginRight: theme.spacing(1)\n  },\n  increaseButton: {\n    marginLeft: theme.spacing(1)\n  }\n}));\nconst TextSizeAddon = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [body] = useShadowRootElements([\"body\"]);\n  const [value, setValue] = useState(() => {\n    const initialValue = localStorage == null ? void 0 : localStorage.getItem(settings.key);\n    return initialValue ? parseInt(initialValue, 10) : settings.defaultValue;\n  });\n  const values = useMemo(() => marks.map((mark) => mark.value), []);\n  const index = useMemo(() => values.indexOf(value), [values, value]);\n  const min = useMemo(() => values[0], [values]);\n  const max = useMemo(() => values[values.length - 1], [values]);\n  const getValueText = useCallback(() => `${value}%`, [value]);\n  const handleChangeCommitted = useCallback(\n    (_event, newValue) => {\n      if (!Array.isArray(newValue)) {\n        setValue(newValue);\n        localStorage == null ? void 0 : localStorage.setItem(settings.key, String(newValue));\n      }\n    },\n    [setValue]\n  );\n  const handleDecreaseClick = useCallback(\n    (event) => {\n      handleChangeCommitted(event, values[index - 1]);\n    },\n    [index, values, handleChangeCommitted]\n  );\n  const handleIncreaseClick = useCallback(\n    (event) => {\n      handleChangeCommitted(event, values[index + 1]);\n    },\n    [index, values, handleChangeCommitted]\n  );\n  useEffect(() => {\n    var _a, _b;\n    if (!body)\n      return;\n    const htmlFontSize = (_b = (_a = theme.typography) == null ? void 0 : _a.htmlFontSize) != null ? _b : 16;\n    body.style.setProperty(\n      \"--md-typeset-font-size\",\n      `${htmlFontSize * (value / 100)}px`\n    );\n  }, [body, value, theme]);\n  return /* @__PURE__ */ React.createElement(MenuItem, { className: classes.menuItem, button: true, disableRipple: true }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\", color: \"textPrimary\" }, \"Text size\"),\n      secondary: /* @__PURE__ */ React.createElement(Box, { className: classes.container }, /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          className: classes.decreaseButton,\n          size: \"small\",\n          edge: \"start\",\n          disabled: value === min,\n          onClick: handleDecreaseClick,\n          \"aria-label\": \"Decrease text size\"\n        },\n        /* @__PURE__ */ React.createElement(RemoveIcon, null)\n      ), /* @__PURE__ */ React.createElement(\n        StyledSlider,\n        {\n          value,\n          \"aria-labelledby\": \"text-size-slider\",\n          getAriaValueText: getValueText,\n          valueLabelDisplay: \"on\",\n          valueLabelFormat: getValueText,\n          marks,\n          step: null,\n          min,\n          max,\n          onChangeCommitted: handleChangeCommitted\n        }\n      ), /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          className: classes.increaseButton,\n          size: \"small\",\n          edge: \"end\",\n          disabled: value === max,\n          onClick: handleIncreaseClick,\n          \"aria-label\": \"Increase text size\"\n        },\n        /* @__PURE__ */ React.createElement(AddIcon, null)\n      )),\n      disableTypography: true\n    }\n  ));\n};\n\nconst LightBoxAddon = () => {\n  const images = useShadowRootElements([\"img\"]);\n  useEffect(() => {\n    let dataSourceImages = null;\n    let lightbox = new PhotoSwipeLightbox({\n      pswpModule: PhotoSwipe,\n      initialZoomLevel: 1,\n      secondaryZoomLevel: (zoomLevelObject) => {\n        const imageWidth = zoomLevelObject.elementSize.x;\n        const imageHeight = zoomLevelObject.elementSize.y;\n        const viewportWidth = zoomLevelObject.panAreaSize.x;\n        const viewportHeight = zoomLevelObject.panAreaSize.y;\n        const widthScale = viewportWidth / imageWidth;\n        const heightScale = viewportHeight / imageHeight;\n        const scaleFactor = Math.min(widthScale, heightScale);\n        return scaleFactor;\n      },\n      wheelToZoom: true,\n      arrowPrevSVG: '<svg class=\"MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"ArrowBackIosIcon\" aria-label=\"fontSize large\"><path d=\"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z\"></path></svg>',\n      arrowNextSVG: '<svg class=\"MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"ArrowForwardIosIcon\" aria-label=\"fontSize large\"><path d=\"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z\"></path></svg>',\n      closeSVG: '<svg class=\"MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"CloseIcon\" aria-label=\"fontSize large\"><path d=\"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path></svg>',\n      zoomSVG: `<svg class=\"MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"ZoomIcon\" aria-label=\"fontSize large\">\n          <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"></path><path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\" id=\"photoswipe-zoom-icon-zoomin-path\"></path><path d=\"M12 10H 7 V 9 H 12 Z\" id=\"photoswipe-zoom-icon-zoomout-path\">\n        </svg>`\n    });\n    images.forEach((image, index) => {\n      image.onclick = () => {\n        if (dataSourceImages === null) {\n          dataSourceImages = images.map((dataSourceImage) => {\n            return {\n              element: dataSourceImage,\n              src: dataSourceImage.src,\n              msrc: dataSourceImage.src,\n              alt: dataSourceImage.alt,\n              width: dataSourceImage.clientWidth,\n              height: dataSourceImage.clientHeight\n            };\n          });\n        }\n        lightbox.loadAndOpen(index, dataSourceImages);\n        return false;\n      };\n    });\n    lightbox.init();\n    return () => {\n      lightbox.destroy();\n      lightbox = null;\n    };\n  }, [images]);\n  return null;\n};\n\nconst techdocsModuleAddonsContribPlugin = createPlugin({\n  id: \"techdocsModuleAddonsContrib\"\n});\nconst ExpandableNavigation = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"ExpandableNavigation\",\n    location: TechDocsAddonLocations.PrimarySidebar,\n    component: ExpandableNavigationAddon\n  })\n);\nconst ReportIssue = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"ReportIssue\",\n    location: TechDocsAddonLocations.Content,\n    component: ReportIssueAddon\n  })\n);\nconst TextSize = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"TextSize\",\n    location: TechDocsAddonLocations.Settings,\n    component: TextSizeAddon\n  })\n);\nconst LightBox = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"LightBox\",\n    location: TechDocsAddonLocations.Content,\n    component: LightBoxAddon\n  })\n);\n\nexport { ExpandableNavigation, LightBox, ReportIssue, TextSize, techdocsModuleAddonsContribPlugin };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useCallback, memo, useState, useEffect, useContext, useMemo } from 'react';\nimport { useOutlet } from 'react-router-dom';\nimport { attachComponentData, createReactExtension, useElementFilter, createApiRef, useApi, configApiRef, AnalyticsContext } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport { create } from 'jss';\nimport { jssPreset, StylesProvider } from '@material-ui/styles';\nimport { Progress } from '@backstage/core-components';\nimport debounce from 'lodash/debounce';\n\nconst TECHDOCS_ADDONS_KEY = \"techdocs.addons.addon.v1\";\nconst TECHDOCS_ADDONS_WRAPPER_KEY = \"techdocs.addons.wrapper.v1\";\nconst TechDocsAddons = () => null;\nattachComponentData(TechDocsAddons, TECHDOCS_ADDONS_WRAPPER_KEY, true);\nconst getDataKeyByName = (name) => {\n  return `${TECHDOCS_ADDONS_KEY}.${name.toLocaleLowerCase(\"en-US\")}`;\n};\nfunction createTechDocsAddonExtension(options) {\n  const { name, component: TechDocsAddon } = options;\n  return createReactExtension({\n    name,\n    component: {\n      sync: (props) => /* @__PURE__ */ React.createElement(TechDocsAddon, { ...props })\n    },\n    data: {\n      [TECHDOCS_ADDONS_KEY]: options,\n      [getDataKeyByName(name)]: true\n    }\n  });\n}\nconst getTechDocsAddonByName = (collection, key) => {\n  return collection.selectByComponentData({ key }).getElements()[0];\n};\nconst getAllTechDocsAddons = (collection) => {\n  return collection.selectByComponentData({\n    key: TECHDOCS_ADDONS_WRAPPER_KEY\n  }).selectByComponentData({\n    key: TECHDOCS_ADDONS_KEY\n  });\n};\nconst getAllTechDocsAddonsData = (collection) => {\n  return collection.selectByComponentData({\n    key: TECHDOCS_ADDONS_WRAPPER_KEY\n  }).findComponentData({\n    key: TECHDOCS_ADDONS_KEY\n  });\n};\nconst useTechDocsAddons = () => {\n  const node = useOutlet();\n  const collection = useElementFilter(node, getAllTechDocsAddons);\n  const options = useElementFilter(node, getAllTechDocsAddonsData);\n  const findAddonByData = useCallback(\n    (data) => {\n      var _a;\n      if (!collection || !data)\n        return null;\n      const nameKey = getDataKeyByName(data.name);\n      return (_a = getTechDocsAddonByName(collection, nameKey)) != null ? _a : null;\n    },\n    [collection]\n  );\n  const renderComponentByName = useCallback(\n    (name) => {\n      const data = options.find((option) => option.name === name);\n      return data ? findAddonByData(data) : null;\n    },\n    [options, findAddonByData]\n  );\n  const renderComponentsByLocation = useCallback(\n    (location) => {\n      const data = options.filter((option) => option.location === location);\n      return data.length ? data.map(findAddonByData) : null;\n    },\n    [options, findAddonByData]\n  );\n  return { renderComponentByName, renderComponentsByLocation };\n};\n\nconst techdocsApiRef = createApiRef({\n  id: \"plugin.techdocs.service\"\n});\nconst techdocsStorageApiRef = createApiRef({\n  id: \"plugin.techdocs.storageservice\"\n});\n\nfunction toLowercaseEntityRefMaybe(entityRef, config) {\n  if (config.getOptionalBoolean(\"techdocs.legacyUseCaseSensitiveTripletPaths\"))\n    return entityRef;\n  entityRef.kind = entityRef.kind.toLocaleLowerCase();\n  entityRef.name = entityRef.name.toLocaleLowerCase();\n  entityRef.namespace = entityRef.namespace.toLocaleLowerCase();\n  return entityRef;\n}\n\nconst areEntityRefsEqual = (prevEntityRef, nextEntityRef) => {\n  return stringifyEntityRef(prevEntityRef) === stringifyEntityRef(nextEntityRef);\n};\nconst defaultTechDocsReaderPageValue = {\n  title: \"\",\n  subtitle: \"\",\n  setTitle: () => {\n  },\n  setSubtitle: () => {\n  },\n  setShadowRoot: () => {\n  },\n  metadata: { loading: true },\n  entityMetadata: { loading: true },\n  entityRef: { kind: \"\", name: \"\", namespace: \"\" }\n};\nconst TechDocsReaderPageContext = createVersionedContext(\"techdocs-reader-page-context\");\nconst TechDocsReaderPageProvider = memo(\n  (props) => {\n    const { entityRef, children } = props;\n    const techdocsApi = useApi(techdocsApiRef);\n    const config = useApi(configApiRef);\n    const entityMetadata = useAsync(async () => {\n      return techdocsApi.getEntityMetadata(entityRef);\n    }, [entityRef]);\n    const metadata = useAsyncRetry(async () => {\n      return techdocsApi.getTechDocsMetadata(entityRef);\n    }, [entityRef]);\n    const [title, setTitle] = useState(defaultTechDocsReaderPageValue.title);\n    const [subtitle, setSubtitle] = useState(\n      defaultTechDocsReaderPageValue.subtitle\n    );\n    const [shadowRoot, setShadowRoot] = useState(\n      defaultTechDocsReaderPageValue.shadowRoot\n    );\n    useEffect(() => {\n      if (shadowRoot && !metadata.value && !metadata.loading) {\n        metadata.retry();\n      }\n    }, [\n      metadata.value,\n      metadata.loading,\n      shadowRoot,\n      metadata.retry,\n      metadata\n    ]);\n    const value = {\n      metadata,\n      entityRef: toLowercaseEntityRefMaybe(entityRef, config),\n      entityMetadata,\n      shadowRoot,\n      setShadowRoot,\n      title,\n      setTitle,\n      subtitle,\n      setSubtitle\n    };\n    const versionedValue = createVersionedValueMap({ 1: value });\n    return /* @__PURE__ */ React.createElement(\n      AnalyticsContext,\n      {\n        attributes: { entityRef: stringifyEntityRef(entityRef) }\n      },\n      /* @__PURE__ */ React.createElement(TechDocsReaderPageContext.Provider, { value: versionedValue }, children instanceof Function ? children(value) : children)\n    );\n  },\n  (prevProps, nextProps) => {\n    return areEntityRefsEqual(prevProps.entityRef, nextProps.entityRef);\n  }\n);\nconst useTechDocsReaderPage = () => {\n  const versionedContext = useContext(TechDocsReaderPageContext);\n  if (versionedContext === void 0) {\n    return defaultTechDocsReaderPageValue;\n  }\n  const context = versionedContext.atVersion(1);\n  if (context === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return context;\n};\n\nconst TechDocsAddonLocations = Object.freeze({\n  /**\n   * These addons fill up the header from the right, on the same line as the\n   * title.\n   */\n  Header: \"Header\",\n  /**\n   * These addons appear below the header and above all content; tooling addons\n   * can be inserted for convenience.\n   */\n  Subheader: \"Subheader\",\n  /**\n   * These addons are items added to the settings menu list and are designed to make\n   * the reader experience customizable, for example accessibility options\n   */\n  Settings: \"Settings\",\n  /**\n   * These addons appear left of the content and above the navigation.\n   */\n  PrimarySidebar: \"PrimarySidebar\",\n  /**\n   * These addons appear right of the content and above the table of contents.\n   */\n  SecondarySidebar: \"SecondarySidebar\",\n  /**\n   * A virtual location which allows mutation of all content within the shadow\n   * root by transforming DOM nodes. These addons should return null on render.\n   */\n  Content: \"Content\"\n  /**\n   * todo(backstage/community): This is a proposed virtual location which would\n   * help implement a common addon pattern in which many instances of a given\n   * element in markdown would be dynamically replaced at render-time based on\n   * attributes provided on that element, for example:\n   *\n   * ```md\n   * ## For Fun\n   * <TechDocsAddon>CatGif</TechDocsAddon>\n   *\n   * ## Component Metadata\n   * <TechDocsAddon entityRef=\"default:component/some-component-name\">CatalogEntityCard</TechDocsAddon>\n   *\n   * ## System Metadata\n   * <TechDocsAddon entityRef=\"default:system/some-system-name\">CatalogEntityCard</TechDocsAddon>\n   * ```\n   *\n   * Could correspond to a TechDocs addon named `CatalogEntityCard` with\n   * location `TechDocsAddonLocations.COMPONENT`, whose `component` would be\n   * the react component that would be rendered in place of all instances of\n   * the markdown illustrated above.\n   *\n   * The `@backstage/plugin-techdocs-react` package would need to be updated to, in\n   * cases where such addons had been registered, find all instances of the\n   * the `<TechDocsAddon>` tag whose `textContent` corresponded with the name of the\n   * addon, then replace them with component instances of the addon component,\n   * passing any attributes from the tag as props to the component.\n   */\n  // Component: 'Component',\n});\n\nconst SHADOW_DOM_STYLE_LOAD_EVENT = \"TECH_DOCS_SHADOW_DOM_STYLE_LOAD\";\nconst useShadowDomStylesEvents = (element) => {\n  useEffect(() => {\n    var _a;\n    if (!element) {\n      return () => {\n      };\n    }\n    const styles = element.querySelectorAll(\n      'head > link[rel=\"stylesheet\"]'\n    );\n    let count = (_a = styles == null ? void 0 : styles.length) != null ? _a : 0;\n    const event = new CustomEvent(SHADOW_DOM_STYLE_LOAD_EVENT);\n    if (!count) {\n      element.dispatchEvent(event);\n      return () => {\n      };\n    }\n    const handleLoad = () => {\n      if (--count === 0) {\n        element.dispatchEvent(event);\n      }\n    };\n    styles == null ? void 0 : styles.forEach((style) => {\n      style.addEventListener(\"load\", handleLoad);\n    });\n    return () => {\n      styles == null ? void 0 : styles.forEach((style) => {\n        style.removeEventListener(\"load\", handleLoad);\n      });\n    };\n  }, [element]);\n};\nconst useShadowDomStylesLoading = (element) => {\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (!element)\n      return () => {\n      };\n    setLoading(true);\n    const style = element.style;\n    style.setProperty(\"opacity\", \"0\");\n    const handleLoad = () => {\n      setLoading(false);\n      style.setProperty(\"opacity\", \"1\");\n    };\n    element.addEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, handleLoad);\n    return () => {\n      element.removeEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, handleLoad);\n    };\n  }, [element]);\n  return loading;\n};\nconst TechDocsShadowDom = (props) => {\n  const { element, onAppend, children } = props;\n  const [jss, setJss] = useState(\n    create({\n      ...jssPreset(),\n      insertionPoint: void 0\n    })\n  );\n  useShadowDomStylesEvents(element);\n  const loading = useShadowDomStylesLoading(element);\n  const ref = useCallback(\n    (shadowHost) => {\n      if (!element || !shadowHost)\n        return;\n      setJss(\n        create({\n          ...jssPreset(),\n          insertionPoint: element.querySelector(\"head\") || void 0\n        })\n      );\n      let shadowRoot = shadowHost.shadowRoot;\n      if (!shadowRoot) {\n        shadowRoot = shadowHost.attachShadow({ mode: \"open\" });\n      }\n      shadowRoot.replaceChildren(element);\n      if (typeof onAppend === \"function\") {\n        onAppend(shadowRoot);\n      }\n    },\n    [element, onAppend]\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading && /* @__PURE__ */ React.createElement(Progress, null), /* @__PURE__ */ React.createElement(StylesProvider, { jss, sheetsManager: /* @__PURE__ */ new Map() }, /* @__PURE__ */ React.createElement(\"div\", { ref, \"data-testid\": \"techdocs-native-shadowroot\" }), children));\n};\n\nconst useShadowRoot = () => {\n  const { shadowRoot } = useTechDocsReaderPage();\n  return shadowRoot;\n};\nconst useShadowRootElements = (selectors) => {\n  const shadowRoot = useShadowRoot();\n  if (!shadowRoot)\n    return [];\n  return selectors.map((selector) => shadowRoot == null ? void 0 : shadowRoot.querySelectorAll(selector)).filter((nodeList) => nodeList.length).map((nodeList) => Array.from(nodeList)).flat();\n};\nconst isValidSelection = (newSelection) => {\n  return newSelection.toString() && newSelection.rangeCount && newSelection.getRangeAt(0).getBoundingClientRect().top;\n};\nconst useShadowRootSelection = (waitMillis = 0) => {\n  const shadowRoot = useShadowRoot();\n  const [selection, setSelection] = useState(null);\n  const handleSelectionChange = useMemo(\n    () => debounce(() => {\n      const shadowDocument = shadowRoot;\n      const newSelection = shadowDocument.getSelection ? shadowDocument.getSelection() : document.getSelection();\n      if (newSelection && isValidSelection(newSelection)) {\n        setSelection(newSelection);\n      } else {\n        setSelection(null);\n      }\n    }, waitMillis),\n    [shadowRoot, setSelection, waitMillis]\n  );\n  useEffect(() => {\n    window.document.addEventListener(\"selectionchange\", handleSelectionChange);\n    return () => {\n      handleSelectionChange.cancel();\n      window.document.removeEventListener(\n        \"selectionchange\",\n        handleSelectionChange\n      );\n    };\n  }, [handleSelectionChange]);\n  return selection;\n};\n\nexport { SHADOW_DOM_STYLE_LOAD_EVENT, TECHDOCS_ADDONS_KEY, TECHDOCS_ADDONS_WRAPPER_KEY, TechDocsAddonLocations, TechDocsAddons, TechDocsReaderPageProvider, TechDocsShadowDom, createTechDocsAddonExtension, techdocsApiRef, techdocsStorageApiRef, toLowercaseEntityRefMaybe, useShadowDomStylesLoading, useShadowRoot, useShadowRootElements, useShadowRootSelection, useTechDocsAddons, useTechDocsReaderPage };\n//# sourceMappingURL=index.esm.js.map\n","import React from 'react';\nimport { Routes, Route, useRoutes } from 'react-router-dom';\nimport { getCompoundEntityRef, parseEntityRef } from '@backstage/catalog-model';\nimport { techdocsStorageApiRef, techdocsApiRef } from '@backstage/plugin-techdocs-react';\nimport { a as TechDocsStorageClient, T as TechDocsClient, r as rootRouteRef, b as rootDocsRouteRef, c as rootCatalogDocsRouteRef } from './routes-691e552c.esm.js';\nimport { createPlugin, createApiFactory, configApiRef, discoveryApiRef, identityApiRef, fetchApiRef, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { createSearchResultListItemExtension } from '@backstage/plugin-search-react';\nimport { d as TechDocsReaderPageSubheader, c as TechDocsReaderPageContent, f as TechDocsReaderPage$1 } from './TechDocsReaderPage-cbdbc148.esm.js';\nimport { c as TechDocsIndexPage$1 } from './TechDocsIndexPage-a43a1a1c.esm.js';\nimport { useEntity, MissingAnnotationEmptyState } from '@backstage/plugin-catalog-react';\n\nconst techdocsPlugin = createPlugin({\n  id: \"techdocs\",\n  apis: [\n    createApiFactory({\n      api: techdocsStorageApiRef,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        identityApi: identityApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ configApi, discoveryApi, identityApi, fetchApi }) => new TechDocsStorageClient({\n        configApi,\n        discoveryApi,\n        identityApi,\n        fetchApi\n      })\n    }),\n    createApiFactory({\n      api: techdocsApiRef,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ configApi, discoveryApi, fetchApi }) => new TechDocsClient({\n        configApi,\n        discoveryApi,\n        fetchApi\n      })\n    })\n  ],\n  routes: {\n    root: rootRouteRef,\n    docRoot: rootDocsRouteRef,\n    entityContent: rootCatalogDocsRouteRef\n  }\n});\nconst TechdocsPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechdocsPage\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.Router),\n    mountPoint: rootRouteRef\n  })\n);\nconst EntityTechdocsContent = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"EntityTechdocsContent\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.EmbeddedDocsRouter),\n    mountPoint: rootCatalogDocsRouteRef\n  })\n);\nconst TechDocsCustomHome = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechDocsCustomHome\",\n    component: () => import('./TechDocsCustomHome-114f3198.esm.js').then(\n      (m) => m.TechDocsCustomHome\n    ),\n    mountPoint: rootRouteRef\n  })\n);\nconst TechDocsIndexPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechDocsIndexPage\",\n    component: () => import('./TechDocsIndexPage-a43a1a1c.esm.js').then(function (n) { return n.d; }).then(\n      (m) => m.TechDocsIndexPage\n    ),\n    mountPoint: rootRouteRef\n  })\n);\nconst TechDocsReaderPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechDocsReaderPage\",\n    component: () => import('./index-25c38d4b.esm.js').then(\n      (m) => m.TechDocsReaderPage\n    ),\n    mountPoint: rootDocsRouteRef\n  })\n);\nconst TechDocsSearchResultListItem = techdocsPlugin.provide(\n  createSearchResultListItemExtension({\n    name: \"TechDocsSearchResultListItem\",\n    component: () => import('./TechDocsSearchResultListItem-4736f829.esm.js').then(\n      (m) => m.TechDocsSearchResultListItem\n    ),\n    predicate: (result) => result.type === \"techdocs\"\n  })\n);\n\nconst TECHDOCS_EXTERNAL_ANNOTATION$1 = \"backstage.io/techdocs-entity\";\nconst EntityPageDocs = ({ entity }) => {\n  var _a, _b;\n  let entityRef = getCompoundEntityRef(entity);\n  if ((_a = entity.metadata.annotations) == null ? void 0 : _a[TECHDOCS_EXTERNAL_ANNOTATION$1]) {\n    try {\n      entityRef = parseEntityRef(\n        (_b = entity.metadata.annotations) == null ? void 0 : _b[TECHDOCS_EXTERNAL_ANNOTATION$1]\n      );\n    } catch {\n    }\n  }\n  return /* @__PURE__ */ React.createElement(TechDocsReaderPage, { entityRef }, /* @__PURE__ */ React.createElement(TechDocsReaderPageSubheader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageContent, { withSearch: false }));\n};\n\nconst TECHDOCS_ANNOTATION = \"backstage.io/techdocs-ref\";\nconst TECHDOCS_EXTERNAL_ANNOTATION = \"backstage.io/techdocs-entity\";\nconst isTechDocsAvailable = (entity) => {\n  var _a, _b, _c, _d;\n  return Boolean((_b = (_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[TECHDOCS_ANNOTATION]) || Boolean((_d = (_c = entity == null ? void 0 : entity.metadata) == null ? void 0 : _c.annotations) == null ? void 0 : _d[TECHDOCS_EXTERNAL_ANNOTATION]);\n};\nconst Router = () => {\n  return /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: \"/\", element: /* @__PURE__ */ React.createElement(TechDocsIndexPage$1, null) }), /* @__PURE__ */ React.createElement(\n    Route,\n    {\n      path: \"/:namespace/:kind/:name/*\",\n      element: /* @__PURE__ */ React.createElement(TechDocsReaderPage$1, null)\n    }\n  ));\n};\nconst EmbeddedDocsRouter = (props) => {\n  var _a, _b;\n  const { children } = props;\n  const { entity } = useEntity();\n  const element = useRoutes([\n    {\n      path: \"/*\",\n      element: /* @__PURE__ */ React.createElement(EntityPageDocs, { entity }),\n      children: [\n        {\n          path: \"*\",\n          element: children\n        }\n      ]\n    }\n  ]);\n  const projectId = ((_a = entity.metadata.annotations) == null ? void 0 : _a[TECHDOCS_ANNOTATION]) || ((_b = entity.metadata.annotations) == null ? void 0 : _b[TECHDOCS_EXTERNAL_ANNOTATION]);\n  if (!projectId) {\n    return /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, { annotation: [TECHDOCS_ANNOTATION] });\n  }\n  return element;\n};\n\nvar Router$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isTechDocsAvailable: isTechDocsAvailable,\n  Router: Router,\n  EmbeddedDocsRouter: EmbeddedDocsRouter\n});\n\nexport { EntityTechdocsContent as E, Router as R, TechDocsCustomHome as T, TechDocsIndexPage as a, TechdocsPage as b, TechDocsReaderPage as c, TechDocsSearchResultListItem as d, EmbeddedDocsRouter as e, Router$1 as f, isTechDocsAvailable as i, techdocsPlugin as t };\n//# sourceMappingURL=Router-4dd3c907.esm.js.map\n","import React, { useEffect } from 'react';\nimport { useOutlet } from 'react-router-dom';\nimport { SubvalueCell, Link, Table, EmptyState, LinkButton, WarningPanel, CodeSnippet, PageWithHeader, Content, ContentHeader, SupportButton } from '@backstage/core-components';\nimport { EntityRefLinks, getEntityRelations, humanizeEntityRef, useEntityList, useStarredEntities, CATALOG_FILTER_EXISTS, EntityListProvider, CatalogFilterLayout, UserListPicker, EntityOwnerPicker, EntityTagPicker } from '@backstage/plugin-catalog-react';\nimport { useRouteRef, useApi, configApiRef } from '@backstage/core-plugin-api';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport { capitalize } from 'lodash';\nimport { RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { b as rootDocsRouteRef } from './routes-691e552c.esm.js';\nimport ShareIcon from '@material-ui/icons/Share';\nimport { withStyles } from '@material-ui/styles';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\n\nfunction toLowerMaybe(str, config) {\n  return config.getOptionalBoolean(\n    \"techdocs.legacyUseCaseSensitiveTripletPaths\"\n  ) ? str : str.toLocaleLowerCase(\"en-US\");\n}\n\nconst YellowStar = withStyles({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst actionFactories = {\n  createCopyDocsUrlAction(copyToClipboard) {\n    return (row) => {\n      return {\n        icon: () => /* @__PURE__ */ React.createElement(ShareIcon, { fontSize: \"small\" }),\n        tooltip: \"Click to copy documentation link to clipboard\",\n        onClick: () => copyToClipboard(`${window.location.origin}${row.resolved.docsUrl}`)\n      };\n    };\n  },\n  createStarEntityAction(isStarredEntity, toggleStarredEntity) {\n    return (row) => {\n      const entity = row.entity;\n      const isStarred = isStarredEntity(entity);\n      return {\n        cellStyle: { paddingLeft: \"1em\" },\n        icon: () => isStarred ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null),\n        tooltip: isStarred ? \"Remove from favorites\" : \"Add to favorites\",\n        onClick: () => toggleStarredEntity(entity)\n      };\n    };\n  }\n};\n\nfunction customTitle(entity) {\n  return entity.metadata.title || entity.metadata.name;\n}\nconst columnFactories = {\n  createNameColumn() {\n    return {\n      title: \"Document\",\n      field: \"entity.metadata.name\",\n      highlight: true,\n      render: (row) => /* @__PURE__ */ React.createElement(\n        SubvalueCell,\n        {\n          value: /* @__PURE__ */ React.createElement(Link, { to: row.resolved.docsUrl }, customTitle(row.entity)),\n          subvalue: row.entity.metadata.description\n        }\n      )\n    };\n  },\n  createOwnerColumn() {\n    return {\n      title: \"Owner\",\n      field: \"resolved.ownedByRelationsTitle\",\n      render: ({ resolved }) => /* @__PURE__ */ React.createElement(\n        EntityRefLinks,\n        {\n          entityRefs: resolved.ownedByRelations,\n          defaultKind: \"group\"\n        }\n      )\n    };\n  },\n  createKindColumn() {\n    return {\n      title: \"Kind\",\n      field: \"entity.kind\"\n    };\n  },\n  createTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"entity.spec.type\"\n    };\n  }\n};\n\nconst DocsTable = (props) => {\n  const { entities, title, loading, columns, actions, options } = props;\n  const [, copyToClipboard] = useCopyToClipboard();\n  const getRouteToReaderPageFor = useRouteRef(rootDocsRouteRef);\n  const config = useApi(configApiRef);\n  if (!entities)\n    return null;\n  const documents = entities.map((entity) => {\n    var _a;\n    const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n    return {\n      entity,\n      resolved: {\n        docsUrl: getRouteToReaderPageFor({\n          namespace: toLowerMaybe(\n            (_a = entity.metadata.namespace) != null ? _a : \"default\",\n            config\n          ),\n          kind: toLowerMaybe(entity.kind, config),\n          name: toLowerMaybe(entity.metadata.name, config)\n        }),\n        ownedByRelations,\n        ownedByRelationsTitle: ownedByRelations.map((r) => humanizeEntityRef(r, { defaultKind: \"group\" })).join(\", \")\n      }\n    };\n  });\n  const defaultColumns = [\n    columnFactories.createNameColumn(),\n    columnFactories.createOwnerColumn(),\n    columnFactories.createKindColumn(),\n    columnFactories.createTypeColumn()\n  ];\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard)\n  ];\n  const pageSize = 20;\n  const paging = documents && documents.length > pageSize;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading || documents && documents.length > 0 ? /* @__PURE__ */ React.createElement(\n    Table,\n    {\n      isLoading: loading,\n      options: {\n        paging,\n        pageSize,\n        search: true,\n        actionsColumnIndex: -1,\n        ...options\n      },\n      data: documents,\n      columns: columns || defaultColumns,\n      actions: actions || defaultActions,\n      title: title ? `${title} (${documents.length})` : `All (${documents.length})`\n    }\n  ) : /* @__PURE__ */ React.createElement(\n    EmptyState,\n    {\n      missing: \"data\",\n      title: \"No documents to show\",\n      description: \"Create your own document. Check out our Getting Started Information\",\n      action: /* @__PURE__ */ React.createElement(\n        LinkButton,\n        {\n          color: \"primary\",\n          to: \"https://backstage.io/docs/features/techdocs/getting-started\",\n          variant: \"contained\"\n        },\n        \"DOCS\"\n      )\n    }\n  ));\n};\nDocsTable.columns = columnFactories;\nDocsTable.actions = actionFactories;\n\nconst EntityListDocsTable = (props) => {\n  var _a, _b;\n  const { columns, actions, options } = props;\n  const { loading, error, entities, filters } = useEntityList();\n  const { isStarredEntity, toggleStarredEntity } = useStarredEntities();\n  const [, copyToClipboard] = useCopyToClipboard();\n  const title = capitalize((_b = (_a = filters.user) == null ? void 0 : _a.value) != null ? _b : \"all\");\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard),\n    actionFactories.createStarEntityAction(\n      isStarredEntity,\n      toggleStarredEntity\n    )\n  ];\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load available documentation.\"\n      },\n      /* @__PURE__ */ React.createElement(CodeSnippet, { language: \"text\", text: error.toString() })\n    );\n  }\n  return /* @__PURE__ */ React.createElement(\n    DocsTable,\n    {\n      title,\n      entities,\n      loading,\n      actions: actions || defaultActions,\n      columns,\n      options\n    }\n  );\n};\nEntityListDocsTable.columns = columnFactories;\nEntityListDocsTable.actions = actionFactories;\n\nconst TechDocsPageWrapper = (props) => {\n  var _a;\n  const { children } = props;\n  const configApi = useApi(configApiRef);\n  const generatedSubtitle = `Documentation available in ${(_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Backstage\"}`;\n  return /* @__PURE__ */ React.createElement(\n    PageWithHeader,\n    {\n      title: \"Documentation\",\n      subtitle: generatedSubtitle,\n      themeId: \"documentation\"\n    },\n    children\n  );\n};\n\nclass TechDocsFilter {\n  getCatalogFilters() {\n    return {\n      \"metadata.annotations.backstage.io/techdocs-ref\": CATALOG_FILTER_EXISTS\n    };\n  }\n}\nconst TechDocsPicker = () => {\n  const { updateFilters } = useEntityList();\n  useEffect(() => {\n    updateFilters({\n      techdocs: new TechDocsFilter()\n    });\n  }, [updateFilters]);\n  return null;\n};\n\nconst DefaultTechDocsHome = (props) => {\n  const { initialFilter = \"owned\", columns, actions } = props;\n  return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ContentHeader, { title: \"\" }, /* @__PURE__ */ React.createElement(SupportButton, null, \"Discover documentation in your ecosystem.\")), /* @__PURE__ */ React.createElement(EntityListProvider, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout.Filters, null, /* @__PURE__ */ React.createElement(TechDocsPicker, null), /* @__PURE__ */ React.createElement(UserListPicker, { initialFilter }), /* @__PURE__ */ React.createElement(EntityOwnerPicker, null), /* @__PURE__ */ React.createElement(EntityTagPicker, null)), /* @__PURE__ */ React.createElement(CatalogFilterLayout.Content, null, /* @__PURE__ */ React.createElement(EntityListDocsTable, { actions, columns }))))));\n};\n\nconst TechDocsIndexPage = (props) => {\n  const outlet = useOutlet();\n  return outlet || /* @__PURE__ */ React.createElement(DefaultTechDocsHome, { ...props });\n};\n\nvar TechDocsIndexPage$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  TechDocsIndexPage: TechDocsIndexPage\n});\n\nexport { DocsTable as D, EntityListDocsTable as E, TechDocsPageWrapper as T, DefaultTechDocsHome as a, TechDocsPicker as b, TechDocsIndexPage as c, TechDocsIndexPage$1 as d, toLowerMaybe as t };\n//# sourceMappingURL=TechDocsIndexPage-a43a1a1c.esm.js.map\n","import React, { useReducer, useRef, useMemo, createContext, useContext, useState, useEffect, useCallback, Children } from 'react';\nimport { useParams, useNavigate, useLocation, useOutlet } from 'react-router-dom';\nimport { LogViewer, ErrorPage, useSidebarPinState, Content, HeaderLabel, Header, Page } from '@backstage/core-components';\nimport { techdocsStorageApiRef, useTechDocsReaderPage, SHADOW_DOM_STYLE_LOAD_EVENT, useShadowDomStylesLoading, useTechDocsAddons, TechDocsAddonLocations, useShadowRootElements, TechDocsShadowDom, TECHDOCS_ADDONS_WRAPPER_KEY, TECHDOCS_ADDONS_KEY, TechDocsReaderPageProvider } from '@backstage/plugin-techdocs-react';\nimport { makeStyles, createStyles, Button, Drawer, Grid, Typography, IconButton, CircularProgress, lighten, alpha, useTheme, withStyles, Tooltip, ThemeProvider, SvgIcon, useMediaQuery, Portal, Toolbar, Box, Menu } from '@material-ui/core';\nimport { SearchContextProvider, useSearch, SearchAutocomplete } from '@backstage/plugin-search-react';\nimport { TechDocsSearchResultListItem } from './TechDocsSearchResultListItem-4736f829.esm.js';\nimport { Alert, Skeleton } from '@material-ui/lab';\nimport Close from '@material-ui/icons/Close';\nimport { useApi, configApiRef, useAnalytics, useRouteRef, useRouteRefParams, getComponentData } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\nimport DOMPurify from 'dompurify';\nimport { replaceGithubUrlType } from '@backstage/integration';\nimport FeedbackOutlinedIcon from '@material-ui/icons/FeedbackOutlined';\nimport parseGitUrl from 'git-url-parse';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport IconButton$1 from '@material-ui/core/IconButton';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport Helmet from 'react-helmet';\nimport { useTheme as useTheme$1 } from '@material-ui/core/styles';\nimport CodeIcon from '@material-ui/icons/Code';\nimport { getEntityRelations, EntityRefLink, EntityRefLinks } from '@backstage/plugin-catalog-react';\nimport { RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { capitalize } from 'lodash';\nimport { r as rootRouteRef, b as rootDocsRouteRef } from './routes-691e552c.esm.js';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nfunction calculateDisplayState({\n  contentLoading,\n  content,\n  activeSyncState\n}) {\n  if (contentLoading) {\n    return \"CHECKING\";\n  }\n  if (activeSyncState === \"BUILD_READY_RELOAD\") {\n    return \"CHECKING\";\n  }\n  if (!content && activeSyncState === \"CHECKING\") {\n    return \"CHECKING\";\n  }\n  if (!content && activeSyncState === \"BUILDING\") {\n    return \"INITIAL_BUILD\";\n  }\n  if (!content) {\n    return \"CONTENT_NOT_FOUND\";\n  }\n  if (activeSyncState === \"BUILDING\") {\n    return \"CONTENT_STALE_REFRESHING\";\n  }\n  if (activeSyncState === \"BUILD_READY\") {\n    return \"CONTENT_STALE_READY\";\n  }\n  if (activeSyncState === \"ERROR\") {\n    return \"CONTENT_STALE_ERROR\";\n  }\n  return \"CONTENT_FRESH\";\n}\nfunction reducer(oldState, action) {\n  const newState = { ...oldState };\n  switch (action.type) {\n    case \"sync\":\n      if (action.state === \"CHECKING\") {\n        newState.buildLog = [];\n      }\n      newState.activeSyncState = action.state;\n      newState.syncError = action.syncError;\n      break;\n    case \"contentLoading\":\n      newState.contentLoading = true;\n      newState.contentError = void 0;\n      break;\n    case \"content\":\n      if (typeof action.path === \"string\") {\n        newState.path = action.path;\n      }\n      newState.contentLoading = false;\n      newState.content = action.content;\n      newState.contentError = action.contentError;\n      break;\n    case \"buildLog\":\n      newState.buildLog = newState.buildLog.concat(action.log);\n      break;\n    default:\n      throw new Error();\n  }\n  if ([\"BUILD_READY\", \"BUILD_READY_RELOAD\"].includes(newState.activeSyncState) && [\"contentLoading\", \"content\"].includes(action.type)) {\n    newState.activeSyncState = \"UP_TO_DATE\";\n    newState.buildLog = [];\n  }\n  return newState;\n}\nfunction useReaderState(kind, namespace, name, path) {\n  var _a, _b;\n  const [state, dispatch] = useReducer(reducer, {\n    activeSyncState: \"CHECKING\",\n    path,\n    contentLoading: true,\n    buildLog: []\n  });\n  const techdocsStorageApi = useApi(techdocsStorageApiRef);\n  const { retry: contentReload } = useAsyncRetry(async () => {\n    dispatch({ type: \"contentLoading\" });\n    try {\n      const entityDocs = await techdocsStorageApi.getEntityDocs(\n        { kind, namespace, name },\n        path\n      );\n      dispatch({ type: \"content\", content: entityDocs, path });\n      return entityDocs;\n    } catch (e) {\n      dispatch({ type: \"content\", contentError: e, path });\n    }\n    return void 0;\n  }, [techdocsStorageApi, kind, namespace, name, path]);\n  const contentRef = useRef({\n    content: void 0,\n    reload: () => {\n    }\n  });\n  contentRef.current = { content: state.content, reload: contentReload };\n  useAsync(async () => {\n    dispatch({ type: \"sync\", state: \"CHECKING\" });\n    const buildingTimeout = setTimeout(() => {\n      dispatch({ type: \"sync\", state: \"BUILDING\" });\n    }, 1e3);\n    try {\n      const result = await techdocsStorageApi.syncEntityDocs(\n        {\n          kind,\n          namespace,\n          name\n        },\n        (log) => {\n          dispatch({ type: \"buildLog\", log });\n        }\n      );\n      switch (result) {\n        case \"updated\":\n          if (!contentRef.current.content) {\n            contentRef.current.reload();\n            dispatch({ type: \"sync\", state: \"BUILD_READY_RELOAD\" });\n          } else {\n            dispatch({ type: \"sync\", state: \"BUILD_READY\" });\n          }\n          break;\n        case \"cached\":\n          dispatch({ type: \"sync\", state: \"UP_TO_DATE\" });\n          break;\n        default:\n          dispatch({\n            type: \"sync\",\n            state: \"ERROR\",\n            syncError: new Error(\"Unexpected return state\")\n          });\n          break;\n      }\n    } catch (e) {\n      dispatch({ type: \"sync\", state: \"ERROR\", syncError: e });\n    } finally {\n      clearTimeout(buildingTimeout);\n    }\n  }, [kind, name, namespace, techdocsStorageApi, dispatch, contentRef]);\n  const displayState = useMemo(\n    () => calculateDisplayState({\n      activeSyncState: state.activeSyncState,\n      contentLoading: state.contentLoading,\n      content: state.content\n    }),\n    [state.activeSyncState, state.content, state.contentLoading]\n  );\n  return {\n    state: displayState,\n    contentReload,\n    path: state.path,\n    content: state.content,\n    contentErrorMessage: (_a = state.contentError) == null ? void 0 : _a.toString(),\n    syncErrorMessage: (_b = state.syncError) == null ? void 0 : _b.toString(),\n    buildLog: state.buildLog\n  };\n}\n\nconst TechDocsReaderContext = createContext({});\nconst useTechDocsReader = () => useContext(TechDocsReaderContext);\nconst TechDocsReaderProvider = (props) => {\n  const { children } = props;\n  const { \"*\": path = \"\" } = useParams();\n  const { entityRef } = useTechDocsReaderPage();\n  const { kind, namespace, name } = entityRef;\n  const value = useReaderState(kind, namespace, name, path);\n  return /* @__PURE__ */ React.createElement(TechDocsReaderContext.Provider, { value }, children instanceof Function ? children(value) : children);\n};\nconst withTechDocsReaderProvider = (Component) => (props) => /* @__PURE__ */ React.createElement(TechDocsReaderProvider, null, /* @__PURE__ */ React.createElement(Component, { ...props }));\n\nconst isTechDocsSearchResult = (option) => {\n  return option == null ? void 0 : option.document;\n};\nconst TechDocsSearchBar = (props) => {\n  const { entityId, entityTitle, debounceTime = 150 } = props;\n  const [open, setOpen] = useState(false);\n  const navigate = useNavigate();\n  const {\n    setFilters,\n    result: { loading, value: searchVal }\n  } = useSearch();\n  const [options, setOptions] = useState([]);\n  useEffect(() => {\n    let mounted = true;\n    if (mounted && searchVal) {\n      const searchResults = searchVal.results.slice(0, 10);\n      setOptions(searchResults);\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [loading, searchVal]);\n  const { kind, name, namespace } = entityId;\n  useEffect(() => {\n    setFilters((prevFilters) => {\n      return {\n        ...prevFilters,\n        kind,\n        namespace,\n        name\n      };\n    });\n  }, [kind, namespace, name, setFilters]);\n  const handleSelection = (_, selection) => {\n    if (isTechDocsSearchResult(selection)) {\n      const { location } = selection.document;\n      navigate(location);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    SearchAutocomplete,\n    {\n      \"data-testid\": \"techdocs-search-bar\",\n      size: \"small\",\n      open,\n      getOptionLabel: () => \"\",\n      filterOptions: (x) => {\n        return x;\n      },\n      onClose: () => {\n        setOpen(false);\n      },\n      onFocus: () => {\n        setOpen(true);\n      },\n      onChange: handleSelection,\n      blurOnSelect: true,\n      noOptionsText: \"No results found\",\n      value: null,\n      options,\n      renderOption: ({ document, highlight }) => /* @__PURE__ */ React.createElement(\n        TechDocsSearchResultListItem,\n        {\n          result: document,\n          lineClamp: 3,\n          asListItem: false,\n          asLink: false,\n          title: document.title,\n          highlight\n        }\n      ),\n      loading,\n      inputDebounceTime: debounceTime,\n      inputPlaceholder: `Search ${entityTitle || entityId.name} docs`,\n      freeSolo: false\n    }\n  );\n};\nconst TechDocsSearch = (props) => {\n  const initialState = {\n    term: \"\",\n    types: [\"techdocs\"],\n    pageCursor: \"\",\n    filters: props.entityId\n  };\n  return /* @__PURE__ */ React.createElement(SearchContextProvider, { initialState }, /* @__PURE__ */ React.createElement(TechDocsSearchBar, { ...props }));\n};\n\nconst useDrawerStyles = makeStyles(\n  (theme) => createStyles({\n    paper: {\n      width: \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        width: \"75%\"\n      },\n      [theme.breakpoints.up(\"md\")]: {\n        width: \"50%\"\n      },\n      padding: theme.spacing(2.5)\n    },\n    root: {\n      height: \"100%\",\n      overflow: \"hidden\"\n    },\n    logs: {\n      background: theme.palette.background.default\n    }\n  })\n);\nconst TechDocsBuildLogsDrawerContent = ({\n  buildLog,\n  onClose\n}) => {\n  const classes = useDrawerStyles();\n  const logText = buildLog.length === 0 ? \"Waiting for logs...\" : buildLog.join(\"\\n\");\n  return /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      direction: \"column\",\n      className: classes.root,\n      spacing: 0,\n      wrap: \"nowrap\"\n    },\n    /* @__PURE__ */ React.createElement(\n      Grid,\n      {\n        item: true,\n        container: true,\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        spacing: 0,\n        wrap: \"nowrap\"\n      },\n      /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\" }, \"Build Details\"),\n      /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          key: \"dismiss\",\n          title: \"Close the drawer\",\n          onClick: onClose,\n          color: \"inherit\"\n        },\n        /* @__PURE__ */ React.createElement(Close, null)\n      )\n    ),\n    /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(LogViewer, { text: logText, classes: { root: classes.logs } }))\n  );\n};\nconst TechDocsBuildLogs = ({ buildLog }) => {\n  const classes = useDrawerStyles();\n  const [open, setOpen] = useState(false);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Button, { color: \"inherit\", onClick: () => setOpen(true) }, \"Show Build Logs\"), /* @__PURE__ */ React.createElement(\n    Drawer,\n    {\n      classes: { paper: classes.paper },\n      anchor: \"right\",\n      open,\n      onClose: () => setOpen(false)\n    },\n    /* @__PURE__ */ React.createElement(\n      TechDocsBuildLogsDrawerContent,\n      {\n        buildLog,\n        onClose: () => setOpen(false)\n      }\n    )\n  ));\n};\n\nconst TechDocsNotFound = ({ errorMessage }) => {\n  const techdocsBuilder = useApi(configApiRef).getOptionalString(\"techdocs.builder\");\n  const analyticsApi = useAnalytics();\n  const { entityRef } = useTechDocsReaderPage();\n  const location = useLocation();\n  useEffect(() => {\n    const { pathname, search, hash } = location;\n    analyticsApi.captureEvent(\"not-found\", `${pathname}${search}${hash}`, {\n      attributes: entityRef\n    });\n  }, [analyticsApi, entityRef, location]);\n  let additionalInfo = \"\";\n  if (techdocsBuilder !== \"local\") {\n    additionalInfo = \"Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance.\";\n  }\n  return /* @__PURE__ */ React.createElement(\n    ErrorPage,\n    {\n      status: \"404\",\n      statusMessage: errorMessage || \"Documentation not found\",\n      additionalInfo\n    }\n  );\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  root: {\n    marginBottom: theme.spacing(2)\n  },\n  message: {\n    // `word-break: break-word` is deprecated, but gives legacy support to browsers not supporting `overflow-wrap` yet\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/word-break\n    wordBreak: \"break-word\",\n    overflowWrap: \"anywhere\"\n  }\n}));\nconst TechDocsStateIndicator = () => {\n  let StateAlert = null;\n  const classes = useStyles$2();\n  const {\n    state,\n    contentReload,\n    contentErrorMessage,\n    syncErrorMessage,\n    buildLog\n  } = useTechDocsReader();\n  if (state === \"INITIAL_BUILD\") {\n    StateAlert = /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        classes: { root: classes.root },\n        variant: \"outlined\",\n        severity: \"info\",\n        icon: /* @__PURE__ */ React.createElement(CircularProgress, { size: \"24px\" }),\n        action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, { buildLog })\n      },\n      \"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.\"\n    );\n  }\n  if (state === \"CONTENT_STALE_REFRESHING\") {\n    StateAlert = /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        variant: \"outlined\",\n        severity: \"info\",\n        icon: /* @__PURE__ */ React.createElement(CircularProgress, { size: \"24px\" }),\n        action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, { buildLog }),\n        classes: { root: classes.root }\n      },\n      \"A newer version of this documentation is being prepared and will be available shortly.\"\n    );\n  }\n  if (state === \"CONTENT_STALE_READY\") {\n    StateAlert = /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        variant: \"outlined\",\n        severity: \"success\",\n        action: /* @__PURE__ */ React.createElement(Button, { color: \"inherit\", onClick: () => contentReload() }, \"Refresh\"),\n        classes: { root: classes.root }\n      },\n      \"A newer version of this documentation is now available, please refresh to view.\"\n    );\n  }\n  if (state === \"CONTENT_STALE_ERROR\") {\n    StateAlert = /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        variant: \"outlined\",\n        severity: \"error\",\n        action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, { buildLog }),\n        classes: { root: classes.root, message: classes.message }\n      },\n      \"Building a newer version of this documentation failed.\",\n      \" \",\n      syncErrorMessage\n    );\n  }\n  if (state === \"CONTENT_NOT_FOUND\") {\n    StateAlert = /* @__PURE__ */ React.createElement(React.Fragment, null, syncErrorMessage && /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        variant: \"outlined\",\n        severity: \"error\",\n        action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, { buildLog }),\n        classes: { root: classes.root, message: classes.message }\n      },\n      \"Building a newer version of this documentation failed.\",\n      \" \",\n      syncErrorMessage\n    ), /* @__PURE__ */ React.createElement(TechDocsNotFound, { errorMessage: contentErrorMessage }));\n  }\n  return StateAlert;\n};\n\nconst MKDOCS_CSS = /main\\.[A-Fa-f0-9]{8}\\.min\\.css$/;\nconst GOOGLE_FONTS = /^https:\\/\\/fonts\\.googleapis\\.com/;\nconst GSTATIC_FONTS = /^https:\\/\\/fonts\\.gstatic\\.com/;\nconst isLink = (node) => node.nodeName === \"LINK\";\nconst isSafe$1 = (node) => {\n  const href = (node == null ? void 0 : node.getAttribute(\"href\")) || \"\";\n  const isMkdocsCss = href.match(MKDOCS_CSS);\n  const isGoogleFonts = href.match(GOOGLE_FONTS);\n  const isGstaticFonts = href.match(GSTATIC_FONTS);\n  return isMkdocsCss || isGoogleFonts || isGstaticFonts;\n};\nconst removeUnsafeLinks = (node) => {\n  if (isLink(node) && !isSafe$1(node)) {\n    node.remove();\n  }\n  return node;\n};\n\nconst isIframe = (node) => node.nodeName === \"IFRAME\";\nconst isSafe = (node, hosts) => {\n  const src = node.getAttribute(\"src\") || \"\";\n  try {\n    const { host } = new URL(src);\n    return hosts.includes(host);\n  } catch {\n    return false;\n  }\n};\nconst removeUnsafeIframes = (hosts) => (node) => {\n  if (isIframe(node) && !isSafe(node, hosts)) {\n    node.remove();\n  }\n  return node;\n};\n\nconst useSanitizerConfig = () => {\n  const configApi = useApi(configApiRef);\n  return useMemo(() => {\n    return configApi.getOptionalConfig(\"techdocs.sanitizer\");\n  }, [configApi]);\n};\nconst useSanitizerTransformer = () => {\n  const config = useSanitizerConfig();\n  return useCallback(\n    async (dom) => {\n      const hosts = config == null ? void 0 : config.getOptionalStringArray(\"allowedIframeHosts\");\n      DOMPurify.addHook(\"beforeSanitizeElements\", removeUnsafeLinks);\n      const tags = [\"link\"];\n      if (hosts) {\n        tags.push(\"iframe\");\n        DOMPurify.addHook(\"beforeSanitizeElements\", removeUnsafeIframes(hosts));\n      }\n      return DOMPurify.sanitize(dom.outerHTML, {\n        ADD_TAGS: tags,\n        FORBID_TAGS: [\"style\"],\n        WHOLE_DOCUMENT: true,\n        RETURN_DOM: true\n      });\n    },\n    [config]\n  );\n};\n\nvar variables = ({ theme }) => `\n/*==================  Variables  ==================*/\n/*\n  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.\n  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.\n*/\n\n:host {\n  /* FONT */\n  --md-default-fg-color: ${theme.palette.text.primary};\n  --md-default-fg-color--light: ${theme.palette.text.secondary};\n  --md-default-fg-color--lighter: ${lighten(theme.palette.text.secondary, 0.7)};\n  --md-default-fg-color--lightest: ${lighten(\n  theme.palette.text.secondary,\n  0.3\n)};\n\n  /* BACKGROUND */\n  --md-default-bg-color:${theme.palette.background.default};\n  --md-default-bg-color--light: ${theme.palette.background.paper};\n  --md-default-bg-color--lighter: ${lighten(\n  theme.palette.background.paper,\n  0.7\n)};\n  --md-default-bg-color--lightest: ${lighten(\n  theme.palette.background.paper,\n  0.3\n)};\n\n  /* PRIMARY */\n  --md-primary-fg-color: ${theme.palette.primary.main};\n  --md-primary-fg-color--light: ${theme.palette.primary.light};\n  --md-primary-fg-color--dark: ${theme.palette.primary.dark};\n  --md-primary-bg-color: ${theme.palette.primary.contrastText};\n  --md-primary-bg-color--light: ${lighten(\n  theme.palette.primary.contrastText,\n  0.7\n)};\n\n  /* ACCENT */\n  --md-accent-fg-color: var(--md-primary-fg-color);\n\n  /* SHADOW */\n  --md-shadow-z1: ${theme.shadows[1]};\n  --md-shadow-z2: ${theme.shadows[2]};\n  --md-shadow-z3: ${theme.shadows[3]};\n\n  /* EXTENSIONS */\n  --md-admonition-fg-color: var(--md-default-fg-color);\n  --md-admonition-bg-color: var(--md-default-bg-color);\n  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */\n  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z\"/></svg>');\n  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z\"/></svg>');\n  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z\"/></svg>');\n  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z\"/></svg>');\n  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z\"/></svg>');\n  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z\"/></svg>');\n  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z\"/></svg>');\n  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z\"/></svg>');\n  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z\"/></svg>');\n  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z\"/></svg>');\n  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z\"/></svg>');\n  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z\"/></svg>');\n  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/></svg>');\n  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z\"/></svg>');\n  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z\"/></svg>');\n  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z\"/></svg>');\n  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z\"/></svg>');\n  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z\"/></svg>');\n  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z\"/></svg>');\n  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z\"/></svg>');\n  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\"/></svg>');\n  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d=\"m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z\"/></svg>');\n}\n\n:host > * {\n  /* CODE */\n  --md-code-fg-color: ${theme.palette.text.primary};\n  --md-code-bg-color: ${theme.palette.background.paper};\n  --md-code-hl-color: ${alpha(theme.palette.warning.main, 0.5)};\n  --md-code-hl-keyword-color: ${theme.palette.type === \"dark\" ? theme.palette.primary.light : theme.palette.primary.dark};\n  --md-code-hl-function-color: ${theme.palette.type === \"dark\" ? theme.palette.secondary.light : theme.palette.secondary.dark};\n  --md-code-hl-string-color: ${theme.palette.type === \"dark\" ? theme.palette.success.light : theme.palette.success.dark};\n  --md-code-hl-number-color: ${theme.palette.type === \"dark\" ? theme.palette.error.light : theme.palette.error.dark};\n  --md-code-hl-constant-color: var(--md-code-hl-function-color);\n  --md-code-hl-special-color: var(--md-code-hl-function-color);\n  --md-code-hl-name-color: var(--md-code-fg-color);\n  --md-code-hl-comment-color: var(--md-default-fg-color--light);\n  --md-code-hl-generic-color: var(--md-default-fg-color--light);\n  --md-code-hl-variable-color: var(--md-default-fg-color--light);\n  --md-code-hl-operator-color: var(--md-default-fg-color--light);\n  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);\n\n  /* TYPESET */\n  --md-typeset-font-size: 1rem;\n  --md-typeset-color: var(--md-default-fg-color);\n  --md-typeset-a-color: ${theme.palette.link};\n  --md-typeset-table-color: ${theme.palette.text.primary};\n  --md-typeset-del-color: ${theme.palette.type === \"dark\" ? alpha(theme.palette.error.dark, 0.5) : alpha(theme.palette.error.light, 0.5)};\n  --md-typeset-ins-color: ${theme.palette.type === \"dark\" ? alpha(theme.palette.success.dark, 0.5) : alpha(theme.palette.success.light, 0.5)};\n  --md-typeset-mark-color: ${theme.palette.type === \"dark\" ? alpha(theme.palette.warning.dark, 0.5) : alpha(theme.palette.warning.light, 0.5)};\n}\n\n@media screen and (max-width: 76.1875em) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .9rem;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .7rem;\n  }\n}\n`;\n\nvar reset = ({ theme }) => `\n/*==================  Reset  ==================*/\n\nbody {\n  --md-text-color: var(--md-default-fg-color);\n  --md-text-link-color: var(--md-accent-fg-color);\n  --md-text-font-family: ${theme.typography.fontFamily};\n  font-family: var(--md-text-font-family);\n  background-color: unset;\n}\n`;\n\nconst SIDEBAR_WIDTH = \"224px\";\nvar layout = ({ theme, sidebar }) => `\n/*==================  Layout  ==================*/\n\n/* mkdocs material v9 compat */\n.md-nav__title {\n  color: var(--md-default-fg-color);\n}\n\n.md-grid {\n  max-width: 100%;\n  margin: 0;\n}\n\n.md-nav {\n  font-size: calc(var(--md-typeset-font-size) * 0.9);\n}\n.md-nav__link {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.md-nav__icon {\n  height: 20px !important;\n  width: 20px !important;\n  margin-left:${theme.spacing(1)}px;\n}\n.md-nav__icon svg {\n  margin: 0;\n  width: 20px !important;\n  height: 20px !important;\n}\n.md-nav__icon:after {\n  width: 20px !important;\n  height: 20px !important;\n}\n\n.md-nav__item--active > .md-nav__link, a.md-nav__link--active {\n  text-decoration: underline;\n  color: var(--md-typeset-a-color);\n}\n\n.md-main__inner {\n  margin-top: 0;\n}\n\n.md-sidebar {\n  bottom: 75px;\n  position: fixed;\n  width: 16rem;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-color: rgb(193, 193, 193) #eee;\n  scrollbar-width: thin;\n}\n.md-sidebar .md-sidebar__scrollwrap {\n  width: calc(12.1rem);\n}\n.md-sidebar--secondary {\n  right: ${theme.spacing(3)}px;\n}\n.md-sidebar::-webkit-scrollbar {\n  width: 5px;\n}\n.md-sidebar::-webkit-scrollbar-button {\n  width: 5px;\n  height: 5px;\n}\n.md-sidebar::-webkit-scrollbar-track {\n  background: #eee;\n  border: 1 px solid rgb(250, 250, 250);\n  box-shadow: 0px 0px 3px #dfdfdf inset;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb {\n  width: 5px;\n  background: rgb(193, 193, 193);\n  border: transparent;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb:hover {\n  background: rgb(125, 125, 125);\n}\n\n.md-content {\n  max-width: calc(100% - 16rem * 2);\n  margin-left: 16rem;\n  margin-bottom: 50px;\n}\n\n.md-footer {\n  position: fixed;\n  bottom: 0px;\n  pointer-events: none;\n}\n\n.md-footer-nav__link, .md-footer__link {\n  pointer-events: all;\n}\n\n.md-footer__title {\n  background-color: unset;\n}\n.md-footer-nav__link, .md-footer__link {\n  width: 16rem;\n}\n\n.md-dialog {\n  background-color: unset;\n}\n\n@media screen and (min-width: 76.25em) {\n  .md-sidebar {\n    height: auto;\n  }\n}\n\n@media screen and (max-width: 76.1875em) {\n  .md-nav {\n    transition: none !important;\n    background-color: var(--md-default-bg-color)\n  }\n  .md-nav--primary .md-nav__title {\n    cursor: auto;\n    color: var(--md-default-fg-color);\n    font-weight: 700;\n    white-space: normal;\n    line-height: 1rem;\n    height: auto;\n    display: flex;\n    flex-flow: column;\n    row-gap: 1.6rem;\n    padding: 1.2rem .8rem .8rem;\n    background-color: var(--md-default-bg-color);\n  }\n  .md-nav--primary .md-nav__title~.md-nav__list {\n    box-shadow: none;\n  }\n  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {\n    border-top: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__button {\n    display: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__icon {\n    color: var(--md-default-fg-color);\n    position: static;\n    height: auto;\n    margin: 0 0 0 -0.2rem;\n  }\n  .md-nav--primary > .md-nav__title [for=\"none\"] {\n    padding-top: 0;\n  }\n  .md-nav--primary .md-nav__item {\n    border-top: none;\n  }\n  .md-nav--primary :is(.md-nav__title,.md-nav__item) {\n    font-size : var(--md-typeset-font-size);\n  }\n  .md-nav .md-source {\n    display: none;\n  }\n\n  .md-sidebar {\n    height: 100%;\n  }\n  .md-sidebar--primary {\n    width: 12.1rem !important;\n    z-index: 200;\n    left: ${sidebar.isPinned ? `calc(-12.1rem + ${SIDEBAR_WIDTH})` : \"calc(-12.1rem + 72px)\"} !important;\n  }\n  .md-sidebar--secondary:not([hidden]) {\n    display: none;\n  }\n\n  .md-content {\n    max-width: 100%;\n    margin-left: 0;\n  }\n\n  .md-header__button {\n    margin: 0.4rem 0;\n    margin-left: 0.4rem;\n    padding: 0;\n  }\n\n  .md-overlay {\n    left: 0;\n  }\n\n  .md-footer {\n    position: static;\n    padding-left: 0;\n  }\n  .md-footer-nav__link {\n    /* footer links begin to overlap at small sizes without setting width */\n    width: 50%;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  .md-sidebar--primary {\n    left: -12.1rem !important;\n    width: 12.1rem;\n  }\n}\n\n\n@media print {\n  .md-sidebar,\n  #toggle-sidebar {\n    display: none;\n  }\n  \n  .md-content {\n    margin: 0;\n    width: 100%;\n    max-width: 100%;\n  }\n}\n`;\n\nconst headings = [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"];\nvar typeset = ({ theme }) => `\n/*==================  Typeset  ==================*/\n\n.md-typeset {\n  font-size: var(--md-typeset-font-size);\n}\n\n${headings.reduce((style, heading) => {\n  var _a;\n  const htmlFontSize = (_a = theme.typography.htmlFontSize) != null ? _a : 16;\n  const styles = theme.typography[heading];\n  const { lineHeight, fontFamily, fontWeight, fontSize } = styles;\n  const calculate = (value) => {\n    let factor = 1;\n    if (typeof value === \"number\") {\n      factor = value / htmlFontSize * 0.6;\n    }\n    if (typeof value === \"string\") {\n      factor = value.replace(\"rem\", \"\");\n    }\n    return `calc(${factor} * var(--md-typeset-font-size))`;\n  };\n  return style.concat(`\n    .md-typeset ${heading} {\n      color: var(--md-default-fg-color);\n      line-height: ${lineHeight};\n      font-family: ${fontFamily};\n      font-weight: ${fontWeight};\n      font-size: ${calculate(fontSize)};\n    }\n  `);\n}, \"\")}\n\n.md-typeset .md-content__button {\n  color: var(--md-default-fg-color);\n}\n\n.md-typeset hr {\n  border-bottom: 0.05rem dotted ${theme.palette.divider};\n}\n\n.md-typeset details {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.md-typeset details summary {\n  padding-left: 2.5rem !important;\n}\n.md-typeset details summary:before,\n.md-typeset details summary:after {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: rotate(0deg) translateY(-50%) !important;\n}\n.md-typeset details[open] > summary:after {\n  transform: rotate(90deg) translateX(-50%) !important;\n}\n\n.md-typeset blockquote {\n  color: var(--md-default-fg-color--light);\n  border-left: 0.2rem solid var(--md-default-fg-color--light);\n}\n\n.md-typeset table:not([class]) {\n  font-size: var(--md-typeset-font-size);\n  border: 1px solid var(--md-default-fg-color);\n  border-bottom: none;\n  border-collapse: collapse;\n}\n.md-typeset table:not([class]) th {\n  font-weight: bold;\n}\n.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {\n  border-bottom: 1px solid var(--md-default-fg-color);\n}\n\n.md-typeset pre > code::-webkit-scrollbar-thumb {\n  background-color: hsla(0, 0%, 0%, 0.32);\n}\n.md-typeset pre > code::-webkit-scrollbar-thumb:hover {\n  background-color: hsla(0, 0%, 0%, 0.87);\n}\n`;\n\nvar animations = () => `\n/*==================  Animations  ==================*/\n/*\n  Disable CSS animations on link colors as they lead to issues in dark mode.\n  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.\n*/\n.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {\n  transition: none;\n}\n`;\n\nvar extensions = ({ theme }) => `\n/*==================  Extensions  ==================*/\n\n/* HIGHLIGHT */\n.highlight .md-clipboard:after {\n  content: unset;\n}\n\n.highlight .nx {\n  color: ${theme.palette.type === \"dark\" ? \"#ff53a3\" : \"#ec407a\"};\n}\n\n/* CODE HILITE */\n.codehilite .gd {\n  background-color: ${theme.palette.type === \"dark\" ? \"rgba(248,81,73,0.65)\" : \"#fdd\"};\n}\n\n.codehilite .gi {\n  background-color: ${theme.palette.type === \"dark\" ? \"rgba(46,160,67,0.65)\" : \"#dfd\"};\n}\n\n/* TABBED */\n.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),\n.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),\n.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),\n.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),\n.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),\n.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),\n.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),\n.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),\n.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),\n.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),\n.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),\n.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),\n.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),\n.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),\n.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),\n.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),\n.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),\n.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),\n.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),\n.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {\n  color: var(--md-accent-fg-color);\n  border-color: var(--md-accent-fg-color);\n}\n\n/* TASK-LIST */\n.task-list-control .task-list-indicator::before {\n  background-color: ${theme.palette.action.disabledBackground};\n}\n.task-list-control [type=\"checkbox\"]:checked + .task-list-indicator:before {\n background-color: ${theme.palette.success.main};\n}\n\n/* ADMONITION */\n.admonition {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.admonition .admonition-title {\n  padding-left: 2.5rem !important;\n}\n\n.admonition .admonition-title:before {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: translateY(-50%) !important;\n}\n`;\n\nconst rules = [\n  variables,\n  reset,\n  layout,\n  typeset,\n  animations,\n  extensions\n];\n\nconst useSidebar = () => useSidebarPinState();\nconst useRuleStyles = () => {\n  const sidebar = useSidebar();\n  const theme = useTheme();\n  return useMemo(() => {\n    const options = { theme, sidebar };\n    return rules.reduce((styles, rule) => styles + rule(options), \"\");\n  }, [theme, sidebar]);\n};\nconst useStylesTransformer = () => {\n  const styles = useRuleStyles();\n  return useCallback(\n    (dom) => {\n      dom.getElementsByTagName(\"head\")[0].insertAdjacentHTML(\"beforeend\", `<style>${styles}</style>`);\n      return dom;\n    },\n    [styles]\n  );\n};\n\nconst isSvgNeedingInlining = (attrName, attrVal, apiOrigin) => {\n  const isSrcToSvg = attrName === \"src\" && attrVal.endsWith(\".svg\");\n  const isRelativeUrl = !attrVal.match(/^([a-z]*:)?\\/\\//i);\n  const pointsToOurBackend = attrVal.startsWith(apiOrigin);\n  return isSrcToSvg && (isRelativeUrl || pointsToOurBackend);\n};\nconst addBaseUrl = ({\n  techdocsStorageApi,\n  entityId,\n  path\n}) => {\n  return async (dom) => {\n    const apiOrigin = await techdocsStorageApi.getApiOrigin();\n    const updateDom = async (list, attributeName) => {\n      for (const elem of list) {\n        if (elem.hasAttribute(attributeName)) {\n          const elemAttribute = elem.getAttribute(attributeName);\n          if (!elemAttribute)\n            return;\n          const newValue = await techdocsStorageApi.getBaseUrl(\n            elemAttribute,\n            entityId,\n            path\n          );\n          if (isSvgNeedingInlining(attributeName, elemAttribute, apiOrigin)) {\n            try {\n              const svg = await fetch(newValue, { credentials: \"include\" });\n              const svgContent = await svg.text();\n              elem.setAttribute(\n                attributeName,\n                `data:image/svg+xml;base64,${btoa(\n                  unescape(encodeURIComponent(svgContent))\n                )}`\n              );\n            } catch (e) {\n              elem.setAttribute(\"alt\", `Error: ${elemAttribute}`);\n            }\n          } else {\n            elem.setAttribute(attributeName, newValue);\n          }\n        }\n      }\n    };\n    await Promise.all([\n      updateDom(dom.querySelectorAll(\"img\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"script\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"source\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"link\"), \"href\"),\n      updateDom(dom.querySelectorAll(\"a[download]\"), \"href\")\n    ]);\n    return dom;\n  };\n};\n\nlet ReactDOMPromise;\nif (process.env.HAS_REACT_DOM_CLIENT) {\n  ReactDOMPromise = import('react-dom/client');\n} else {\n  ReactDOMPromise = import('react-dom');\n}\nfunction renderReactElement(element, root) {\n  ReactDOMPromise.then((ReactDOM) => {\n    if (\"createRoot\" in ReactDOM) {\n      ReactDOM.createRoot(root).render(element);\n    } else {\n      ReactDOM.render(element, root);\n    }\n  });\n}\n\nconst addGitFeedbackLink = (scmIntegrationsApi) => {\n  return (dom) => {\n    var _a;\n    const sourceAnchor = dom.querySelector(\n      '[title=\"Edit this page\"]'\n    );\n    if (!sourceAnchor || !sourceAnchor.href) {\n      return dom;\n    }\n    const sourceURL = new URL(sourceAnchor.href);\n    const integration = scmIntegrationsApi.byUrl(sourceURL);\n    if ((integration == null ? void 0 : integration.type) !== \"github\" && (integration == null ? void 0 : integration.type) !== \"gitlab\") {\n      return dom;\n    }\n    const title = ((_a = dom.querySelector(\"article>h1\")) == null ? void 0 : _a.childNodes[0].textContent) || \"\";\n    const issueTitle = encodeURIComponent(`Documentation Feedback: ${title}`);\n    const issueDesc = encodeURIComponent(\n      `Page source:\n${sourceAnchor.href}\n\nFeedback:`\n    );\n    const gitUrl = (integration == null ? void 0 : integration.type) === \"github\" ? replaceGithubUrlType(sourceURL.href, \"blob\") : sourceURL.href;\n    const gitInfo = parseGitUrl(gitUrl);\n    const repoPath = `/${gitInfo.organization}/${gitInfo.name}`;\n    const feedbackLink = sourceAnchor.cloneNode();\n    switch (integration == null ? void 0 : integration.type) {\n      case \"gitlab\":\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?issue[title]=${issueTitle}&issue[description]=${issueDesc}`;\n        break;\n      case \"github\":\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?title=${issueTitle}&body=${issueDesc}`;\n        break;\n      default:\n        return dom;\n    }\n    renderReactElement(React.createElement(FeedbackOutlinedIcon), feedbackLink);\n    feedbackLink.style.paddingLeft = \"5px\";\n    feedbackLink.title = \"Leave feedback for this page\";\n    feedbackLink.id = \"git-feedback-link\";\n    sourceAnchor == null ? void 0 : sourceAnchor.insertAdjacentElement(\"beforebegin\", feedbackLink);\n    return dom;\n  };\n};\n\nconst addSidebarToggle = () => {\n  return (dom) => {\n    const mkdocsToggleSidebar = dom.querySelector(\n      '.md-header label[for=\"__drawer\"]'\n    );\n    const article = dom.querySelector(\"article\");\n    if (!mkdocsToggleSidebar || !article) {\n      return dom;\n    }\n    const toggleSidebar = mkdocsToggleSidebar.cloneNode();\n    renderReactElement(React.createElement(MenuIcon), toggleSidebar);\n    toggleSidebar.id = \"toggle-sidebar\";\n    toggleSidebar.title = \"Toggle Sidebar\";\n    toggleSidebar.classList.add(\"md-content__button\");\n    toggleSidebar.style.setProperty(\"padding\", \"0 0 0 5px\");\n    toggleSidebar.style.setProperty(\"margin\", \"0.4rem 0 0.4rem 0.4rem\");\n    article == null ? void 0 : article.prepend(toggleSidebar);\n    return dom;\n  };\n};\n\nconst rewriteDocLinks = () => {\n  return (dom) => {\n    const updateDom = (list, attributeName) => {\n      Array.from(list).filter((elem) => elem.hasAttribute(attributeName)).forEach((elem) => {\n        const elemAttribute = elem.getAttribute(attributeName);\n        if (elemAttribute) {\n          if (elemAttribute.match(/^https?:\\/\\//i)) {\n            elem.setAttribute(\"target\", \"_blank\");\n          }\n          try {\n            const normalizedWindowLocation = normalizeUrl(\n              window.location.href\n            );\n            elem.setAttribute(\n              attributeName,\n              new URL(elemAttribute, normalizedWindowLocation).toString()\n            );\n          } catch (_e) {\n            elem.replaceWith(elem.textContent || elemAttribute);\n          }\n        }\n      });\n    };\n    updateDom(Array.from(dom.getElementsByTagName(\"a\")), \"href\");\n    return dom;\n  };\n};\nfunction normalizeUrl(input) {\n  const url = new URL(input);\n  if (!url.pathname.endsWith(\"/\") && !url.pathname.endsWith(\".html\")) {\n    url.pathname += \"/\";\n  }\n  return url.toString();\n}\n\nconst addLinkClickListener = ({\n  baseUrl,\n  onClick\n}) => {\n  return (dom) => {\n    Array.from(dom.getElementsByTagName(\"a\")).forEach((elem) => {\n      elem.addEventListener(\"click\", (e) => {\n        const target = elem;\n        const href = target.getAttribute(\"href\");\n        if (!href)\n          return;\n        if (href.startsWith(baseUrl) && !elem.hasAttribute(\"download\")) {\n          e.preventDefault();\n          onClick(e, href);\n        }\n      });\n    });\n    return dom;\n  };\n};\n\nconst CopyToClipboardTooltip = withStyles((theme) => ({\n  tooltip: {\n    fontSize: \"inherit\",\n    color: theme.palette.text.primary,\n    margin: 0,\n    padding: theme.spacing(0.5),\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\"\n  }\n}))(Tooltip);\nconst CopyToClipboardIcon = () => /* @__PURE__ */ React.createElement(SvgIcon, null, /* @__PURE__ */ React.createElement(\"path\", { d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\" }));\nconst CopyToClipboardButton = ({ text }) => {\n  const [open, setOpen] = useState(false);\n  const [, copyToClipboard2] = useCopyToClipboard();\n  const handleClick = useCallback(() => {\n    copyToClipboard2(text);\n    setOpen(true);\n  }, [text, copyToClipboard2]);\n  const handleClose = useCallback(() => {\n    setOpen(false);\n  }, [setOpen]);\n  return /* @__PURE__ */ React.createElement(\n    CopyToClipboardTooltip,\n    {\n      title: \"Copied to clipboard\",\n      placement: \"left\",\n      open,\n      onClose: handleClose,\n      leaveDelay: 1e3\n    },\n    /* @__PURE__ */ React.createElement(\n      IconButton$1,\n      {\n        style: { color: \"inherit\" },\n        className: \"md-clipboard md-icon\",\n        onClick: handleClick\n      },\n      /* @__PURE__ */ React.createElement(CopyToClipboardIcon, null)\n    )\n  );\n};\nconst copyToClipboard = (theme) => {\n  return (dom) => {\n    var _a;\n    const codes = dom.querySelectorAll(\"pre > code\");\n    for (const code of codes) {\n      const text = code.textContent || \"\";\n      const container = document.createElement(\"div\");\n      (_a = code == null ? void 0 : code.parentElement) == null ? void 0 : _a.prepend(container);\n      renderReactElement(\n        /* @__PURE__ */ React.createElement(ThemeProvider, { theme }, /* @__PURE__ */ React.createElement(CopyToClipboardButton, { text })),\n        container\n      );\n    }\n    return dom;\n  };\n};\n\nconst removeMkdocsHeader = () => {\n  return (dom) => {\n    var _a;\n    (_a = dom.querySelector(\".md-header\")) == null ? void 0 : _a.remove();\n    return dom;\n  };\n};\n\nconst simplifyMkdocsFooter = () => {\n  return (dom) => {\n    var _a, _b;\n    (_a = dom.querySelector(\".md-footer .md-copyright\")) == null ? void 0 : _a.remove();\n    (_b = dom.querySelector(\".md-footer-copyright\")) == null ? void 0 : _b.remove();\n    return dom;\n  };\n};\n\nconst onCssReady = ({\n  onLoading,\n  onLoaded\n}) => {\n  return (dom) => {\n    onLoading();\n    dom.addEventListener(\n      SHADOW_DOM_STYLE_LOAD_EVENT,\n      function handleShadowDomStyleLoad() {\n        onLoaded();\n        dom.removeEventListener(\n          SHADOW_DOM_STYLE_LOAD_EVENT,\n          handleShadowDomStyleLoad\n        );\n      }\n    );\n    return dom;\n  };\n};\n\nconst scrollIntoNavigation = () => {\n  return (dom) => {\n    setTimeout(() => {\n      const activeNavItems = dom == null ? void 0 : dom.querySelectorAll(`li.md-nav__item--active`);\n      if (activeNavItems.length !== 0) {\n        activeNavItems.forEach((activeNavItem) => {\n          const checkbox = activeNavItem == null ? void 0 : activeNavItem.querySelector(\"input\");\n          if (!(checkbox == null ? void 0 : checkbox.checked)) {\n            checkbox == null ? void 0 : checkbox.click();\n          }\n        });\n        const lastItem = activeNavItems[activeNavItems.length - 1];\n        lastItem.scrollIntoView();\n      }\n    }, 200);\n    return dom;\n  };\n};\n\nconst transform = async (html, transformers) => {\n  let dom;\n  if (typeof html === \"string\") {\n    dom = new DOMParser().parseFromString(html, \"text/html\").documentElement;\n  } else if (html instanceof Element) {\n    dom = html;\n  } else {\n    throw new Error(\"dom is not a recognized type\");\n  }\n  for (const transformer of transformers) {\n    dom = await transformer(dom);\n  }\n  return dom;\n};\n\nfunction resolveUrlToRelative(url, baseUrl) {\n  const parsedAppUrl = new URL(baseUrl);\n  const appUrlPath = `${parsedAppUrl.origin}${parsedAppUrl.pathname.replace(\n    /\\/$/,\n    \"\"\n  )}`;\n  const relativeUrl = url.replace(appUrlPath, \"\").replace(/^\\/+/, \"\");\n  const parsedUrl = new URL(`http://localhost/${relativeUrl}`);\n  return `${parsedUrl.pathname}${parsedUrl.search}${parsedUrl.hash}`;\n}\nfunction useNavigateUrl() {\n  const navigate = useNavigate();\n  const configApi = useApi(configApiRef);\n  const appBaseUrl = configApi.getOptionalString(\"app.baseUrl\");\n  const navigateFn = useCallback(\n    (to) => {\n      let url = to;\n      if (appBaseUrl) {\n        try {\n          url = resolveUrlToRelative(to, appBaseUrl);\n        } catch (err) {\n        }\n      }\n      navigate(url);\n    },\n    [navigate, appBaseUrl]\n  );\n  return navigateFn;\n}\n\nconst MOBILE_MEDIA_QUERY = \"screen and (max-width: 76.1875em)\";\nconst useTechDocsReaderDom = (entityRef) => {\n  const navigate = useNavigateUrl();\n  const theme = useTheme();\n  const isMobileMedia = useMediaQuery(MOBILE_MEDIA_QUERY);\n  const sanitizerTransformer = useSanitizerTransformer();\n  const stylesTransformer = useStylesTransformer();\n  const analytics = useAnalytics();\n  const techdocsStorageApi = useApi(techdocsStorageApiRef);\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const { state, path, content: rawPage } = useTechDocsReader();\n  const [dom, setDom] = useState(null);\n  const isStyleLoading = useShadowDomStylesLoading(dom);\n  const updateSidebarPosition = useCallback(() => {\n    if (!dom)\n      return;\n    const sidebars = dom.querySelectorAll(\".md-sidebar\");\n    sidebars.forEach((element) => {\n      var _a, _b, _c;\n      if (isMobileMedia) {\n        element.style.top = \"0px\";\n      } else {\n        const page = document == null ? void 0 : document.querySelector(\".techdocs-reader-page\");\n        const pageTop = (_a = page == null ? void 0 : page.getBoundingClientRect().top) != null ? _a : 0;\n        let domTop = (_b = dom.getBoundingClientRect().top) != null ? _b : 0;\n        const tabs = dom.querySelector(\".md-container > .md-tabs\");\n        const tabsHeight = (_c = tabs == null ? void 0 : tabs.getBoundingClientRect().height) != null ? _c : 0;\n        if (domTop < pageTop) {\n          domTop = pageTop;\n        }\n        element.style.top = `${Math.max(domTop, 0) + tabsHeight}px`;\n      }\n      element.style.setProperty(\"opacity\", \"1\");\n    });\n  }, [dom, isMobileMedia]);\n  useEffect(() => {\n    window.addEventListener(\"resize\", updateSidebarPosition);\n    window.addEventListener(\"scroll\", updateSidebarPosition, true);\n    return () => {\n      window.removeEventListener(\"resize\", updateSidebarPosition);\n      window.removeEventListener(\"scroll\", updateSidebarPosition, true);\n    };\n  }, [dom, updateSidebarPosition]);\n  const updateFooterWidth = useCallback(() => {\n    if (!dom)\n      return;\n    const footer = dom.querySelector(\".md-footer\");\n    if (footer) {\n      footer.style.width = `${dom.getBoundingClientRect().width}px`;\n    }\n  }, [dom]);\n  useEffect(() => {\n    window.addEventListener(\"resize\", updateFooterWidth);\n    return () => {\n      window.removeEventListener(\"resize\", updateFooterWidth);\n    };\n  }, [dom, updateFooterWidth]);\n  useEffect(() => {\n    if (!isStyleLoading) {\n      updateFooterWidth();\n      updateSidebarPosition();\n    }\n  }, [state, isStyleLoading, updateFooterWidth, updateSidebarPosition]);\n  const preRender = useCallback(\n    (rawContent, contentPath) => transform(rawContent, [\n      sanitizerTransformer,\n      addBaseUrl({\n        techdocsStorageApi,\n        entityId: entityRef,\n        path: contentPath\n      }),\n      rewriteDocLinks(),\n      addSidebarToggle(),\n      removeMkdocsHeader(),\n      simplifyMkdocsFooter(),\n      addGitFeedbackLink(scmIntegrationsApi),\n      stylesTransformer\n    ]),\n    [\n      // only add dependencies that are in state or memorized variables to avoid unnecessary calls between re-renders\n      entityRef,\n      scmIntegrationsApi,\n      techdocsStorageApi,\n      sanitizerTransformer,\n      stylesTransformer\n    ]\n  );\n  const postRender = useCallback(\n    async (transformedElement) => transform(transformedElement, [\n      scrollIntoNavigation(),\n      copyToClipboard(theme),\n      addLinkClickListener({\n        baseUrl: window.location.origin,\n        onClick: (event, url) => {\n          var _a, _b;\n          const modifierActive = event.ctrlKey || event.metaKey;\n          const parsedUrl = new URL(url);\n          const linkText = ((_a = event.target) == null ? void 0 : _a.innerText) || url;\n          const to = url.replace(window.location.origin, \"\");\n          analytics.captureEvent(\"click\", linkText, { attributes: { to } });\n          if (parsedUrl.hash) {\n            if (modifierActive) {\n              window.open(url, \"_blank\");\n            } else {\n              navigate(url);\n              (_b = transformedElement == null ? void 0 : transformedElement.querySelector(`[id=\"${parsedUrl.hash.slice(1)}\"]`)) == null ? void 0 : _b.scrollIntoView();\n            }\n          } else {\n            if (modifierActive) {\n              window.open(url, \"_blank\");\n            } else {\n              navigate(url);\n            }\n          }\n        }\n      }),\n      // disable MkDocs drawer toggling ('for' attribute => checkbox mechanism)\n      onCssReady({\n        onLoading: () => {\n        },\n        onLoaded: () => {\n          var _a;\n          (_a = transformedElement.querySelector(\".md-nav__title\")) == null ? void 0 : _a.removeAttribute(\"for\");\n        }\n      }),\n      // hide sidebars until their positions are updated\n      onCssReady({\n        onLoading: () => {\n          const sidebars = Array.from(\n            transformedElement.querySelectorAll(\".md-sidebar\")\n          );\n          sidebars.forEach((element) => {\n            element.style.setProperty(\"opacity\", \"0\");\n          });\n        },\n        onLoaded: () => {\n        }\n      })\n    ]),\n    [theme, navigate, analytics]\n  );\n  useEffect(() => {\n    if (!rawPage)\n      return () => {\n      };\n    let shouldReplaceContent = true;\n    preRender(rawPage, path).then(async (preTransformedDomElement) => {\n      if (!(preTransformedDomElement == null ? void 0 : preTransformedDomElement.innerHTML)) {\n        return;\n      }\n      if (!shouldReplaceContent) {\n        return;\n      }\n      window.scroll({ top: 0 });\n      const postTransformedDomElement = await postRender(\n        preTransformedDomElement\n      );\n      setDom(postTransformedDomElement);\n    });\n    return () => {\n      shouldReplaceContent = false;\n    };\n  }, [rawPage, path, preRender, postRender]);\n  return dom;\n};\n\nconst TechDocsReaderPageContentAddons = () => {\n  const addons = useTechDocsAddons();\n  const { shadowRoot } = useTechDocsReaderPage();\n  const contentElement = shadowRoot == null ? void 0 : shadowRoot.querySelector(\n    '[data-md-component=\"content\"]'\n  );\n  const primarySidebarElement = shadowRoot == null ? void 0 : shadowRoot.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"navigation\"], div[data-md-component=\"navigation\"]'\n  );\n  let primarySidebarAddonLocation = primarySidebarElement == null ? void 0 : primarySidebarElement.querySelector(\n    '[data-techdocs-addons-location=\"primary sidebar\"]'\n  );\n  if (!primarySidebarAddonLocation) {\n    primarySidebarAddonLocation = document.createElement(\"div\");\n    primarySidebarAddonLocation.setAttribute(\n      \"data-techdocs-addons-location\",\n      \"primary sidebar\"\n    );\n    primarySidebarElement == null ? void 0 : primarySidebarElement.prepend(primarySidebarAddonLocation);\n  }\n  const secondarySidebarElement = shadowRoot == null ? void 0 : shadowRoot.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"toc\"], div[data-md-component=\"toc\"]'\n  );\n  let secondarySidebarAddonLocation = secondarySidebarElement == null ? void 0 : secondarySidebarElement.querySelector(\n    '[data-techdocs-addons-location=\"secondary sidebar\"]'\n  );\n  if (!secondarySidebarAddonLocation) {\n    secondarySidebarAddonLocation = document.createElement(\"div\");\n    secondarySidebarAddonLocation.setAttribute(\n      \"data-techdocs-addons-location\",\n      \"secondary sidebar\"\n    );\n    secondarySidebarElement == null ? void 0 : secondarySidebarElement.prepend(secondarySidebarAddonLocation);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Portal, { container: primarySidebarAddonLocation }, addons.renderComponentsByLocation(TechDocsAddonLocations.PrimarySidebar)), /* @__PURE__ */ React.createElement(Portal, { container: contentElement }, addons.renderComponentsByLocation(TechDocsAddonLocations.Content)), /* @__PURE__ */ React.createElement(Portal, { container: secondarySidebarAddonLocation }, addons.renderComponentsByLocation(TechDocsAddonLocations.SecondarySidebar)));\n};\n\nconst useStyles$1 = makeStyles({\n  search: {\n    width: \"100%\",\n    \"@media (min-width: 76.1875em)\": {\n      width: \"calc(100% - 34.4rem)\",\n      margin: \"0 auto\"\n    },\n    \"@media print\": {\n      display: \"none\"\n    }\n  }\n});\nconst TechDocsReaderPageContent = withTechDocsReaderProvider(\n  (props) => {\n    var _a;\n    const { withSearch = true, onReady } = props;\n    const classes = useStyles$1();\n    const {\n      entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n      entityRef,\n      setShadowRoot\n    } = useTechDocsReaderPage();\n    const dom = useTechDocsReaderDom(entityRef);\n    const path = window.location.pathname;\n    const hash = window.location.hash;\n    const isStyleLoading = useShadowDomStylesLoading(dom);\n    const [hashElement] = useShadowRootElements([`[id=\"${hash.slice(1)}\"]`]);\n    useEffect(() => {\n      var _a2;\n      if (isStyleLoading)\n        return;\n      if (hash) {\n        if (hashElement) {\n          hashElement.scrollIntoView();\n        }\n      } else {\n        (_a2 = document == null ? void 0 : document.querySelector(\"header\")) == null ? void 0 : _a2.scrollIntoView();\n      }\n    }, [path, hash, hashElement, isStyleLoading]);\n    const handleAppend = useCallback(\n      (newShadowRoot) => {\n        setShadowRoot(newShadowRoot);\n        if (onReady instanceof Function) {\n          onReady();\n        }\n      },\n      [setShadowRoot, onReady]\n    );\n    if (entityMetadataLoading === false && !entityMetadata)\n      return /* @__PURE__ */ React.createElement(ErrorPage, { status: \"404\", statusMessage: \"PAGE NOT FOUND\" });\n    if (!dom) {\n      return /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Grid, { container: true }, /* @__PURE__ */ React.createElement(Grid, { xs: 12, item: true }, /* @__PURE__ */ React.createElement(TechDocsStateIndicator, null))));\n    }\n    return /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Grid, { container: true }, /* @__PURE__ */ React.createElement(Grid, { xs: 12, item: true }, /* @__PURE__ */ React.createElement(TechDocsStateIndicator, null)), withSearch && /* @__PURE__ */ React.createElement(Grid, { className: classes.search, xs: \"auto\", item: true }, /* @__PURE__ */ React.createElement(\n      TechDocsSearch,\n      {\n        entityId: entityRef,\n        entityTitle: (_a = entityMetadata == null ? void 0 : entityMetadata.metadata) == null ? void 0 : _a.title\n      }\n    )), /* @__PURE__ */ React.createElement(Grid, { xs: 12, item: true }, /* @__PURE__ */ React.createElement(TechDocsShadowDom, { element: dom, onAppend: handleAppend }, /* @__PURE__ */ React.createElement(TechDocsReaderPageContentAddons, null)))));\n  }\n);\nconst Reader = TechDocsReaderPageContent;\n\nconst skeleton = /* @__PURE__ */ React.createElement(Skeleton, { animation: \"wave\", variant: \"text\", height: 40 });\nconst TechDocsReaderPageHeader = (props) => {\n  const {\n    palette: {\n      common: { white }\n    }\n  } = useTheme$1();\n  const { children } = props;\n  const addons = useTechDocsAddons();\n  const configApi = useApi(configApiRef);\n  const {\n    title,\n    setTitle,\n    subtitle,\n    setSubtitle,\n    entityRef,\n    metadata: { value: metadata, loading: metadataLoading },\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading }\n  } = useTechDocsReaderPage();\n  useEffect(() => {\n    if (!metadata)\n      return;\n    setTitle(metadata.site_name);\n    setSubtitle(() => {\n      let { site_description } = metadata;\n      if (!site_description || site_description === \"None\") {\n        site_description = \"\";\n      }\n      return site_description;\n    });\n  }, [metadata, setTitle, setSubtitle]);\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  const tabTitle = [title, subtitle, appTitle].filter(Boolean).join(\" | \");\n  const { locationMetadata, spec } = entityMetadata || {};\n  const lifecycle = spec == null ? void 0 : spec.lifecycle;\n  const ownedByRelations = entityMetadata ? getEntityRelations(entityMetadata, RELATION_OWNED_BY) : [];\n  const docsRootLink = useRouteRef(rootRouteRef)();\n  const labels = /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: capitalize((entityMetadata == null ? void 0 : entityMetadata.kind) || \"entity\"),\n      value: /* @__PURE__ */ React.createElement(\n        EntityRefLink,\n        {\n          color: \"inherit\",\n          entityRef,\n          title: entityMetadata == null ? void 0 : entityMetadata.metadata.title,\n          defaultKind: \"Component\"\n        }\n      )\n    }\n  ), ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: \"Owner\",\n      value: /* @__PURE__ */ React.createElement(\n        EntityRefLinks,\n        {\n          color: \"inherit\",\n          entityRefs: ownedByRelations,\n          defaultKind: \"group\"\n        }\n      )\n    }\n  ), lifecycle ? /* @__PURE__ */ React.createElement(HeaderLabel, { label: \"Lifecycle\", value: String(lifecycle) }) : null, locationMetadata && locationMetadata.type !== \"dir\" && locationMetadata.type !== \"file\" ? /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: \"\",\n      value: /* @__PURE__ */ React.createElement(\n        Grid,\n        {\n          container: true,\n          direction: \"column\",\n          alignItems: \"center\",\n          style: { color: white }\n        },\n        /* @__PURE__ */ React.createElement(Grid, { style: { padding: 0 }, item: true }, /* @__PURE__ */ React.createElement(CodeIcon, { style: { marginTop: \"-25px\" } })),\n        /* @__PURE__ */ React.createElement(Grid, { style: { padding: 0 }, item: true }, \"Source\")\n      ),\n      url: locationMetadata.target\n    }\n  ) : null);\n  const noEntMetadata = !entityMetadataLoading && entityMetadata === void 0;\n  const noTdMetadata = !metadataLoading && metadata === void 0;\n  if (noEntMetadata || noTdMetadata)\n    return null;\n  return /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      type: \"Documentation\",\n      typeLink: docsRootLink,\n      title: title || skeleton,\n      subtitle: subtitle === \"\" ? void 0 : subtitle || skeleton\n    },\n    /* @__PURE__ */ React.createElement(Helmet, { titleTemplate: \"%s\" }, /* @__PURE__ */ React.createElement(\"title\", null, tabTitle)),\n    labels,\n    children,\n    addons.renderComponentsByLocation(TechDocsAddonLocations.Header)\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    gridArea: \"pageSubheader\",\n    flexDirection: \"column\",\n    minHeight: \"auto\",\n    padding: theme.spacing(3, 3, 0),\n    \"@media print\": {\n      display: \"none\"\n    }\n  }\n}));\nconst TechDocsReaderPageSubheader = (props) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const handleClick = useCallback((event) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n  const {\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading }\n  } = useTechDocsReaderPage();\n  const addons = useTechDocsAddons();\n  const subheaderAddons = addons.renderComponentsByLocation(\n    TechDocsAddonLocations.Subheader\n  );\n  const settingsAddons = addons.renderComponentsByLocation(TechDocsAddonLocations.Settings);\n  if (!subheaderAddons && !settingsAddons)\n    return null;\n  if (entityMetadataLoading === false && !entityMetadata)\n    return null;\n  return /* @__PURE__ */ React.createElement(Toolbar, { classes, ...props.toolbarProps }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      width: \"100%\",\n      flexWrap: \"wrap\"\n    },\n    subheaderAddons,\n    settingsAddons ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Settings\" }, /* @__PURE__ */ React.createElement(\n      IconButton,\n      {\n        \"aria-controls\": \"tech-docs-reader-page-settings\",\n        \"aria-haspopup\": \"true\",\n        onClick: handleClick\n      },\n      /* @__PURE__ */ React.createElement(SettingsIcon, null)\n    )), /* @__PURE__ */ React.createElement(\n      Menu,\n      {\n        id: \"tech-docs-reader-page-settings\",\n        getContentAnchorEl: null,\n        anchorEl,\n        anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n        open: Boolean(anchorEl),\n        onClose: handleClose,\n        keepMounted: true\n      },\n      /* @__PURE__ */ React.createElement(\"div\", null, settingsAddons)\n    )) : null\n  ));\n};\n\nconst TechDocsReaderLayout = (props) => {\n  const { withSearch, withHeader = true } = props;\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"documentation\" }, withHeader && /* @__PURE__ */ React.createElement(TechDocsReaderPageHeader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageSubheader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageContent, { withSearch }));\n};\nconst TechDocsReaderPage = (props) => {\n  const { kind, name, namespace } = useRouteRefParams(rootDocsRouteRef);\n  const { children, entityRef = { kind, name, namespace } } = props;\n  const outlet = useOutlet();\n  if (!children) {\n    const childrenList = outlet ? Children.toArray(outlet.props.children) : [];\n    const grandChildren = childrenList.flatMap(\n      (child) => {\n        var _a, _b;\n        return (_b = (_a = child == null ? void 0 : child.props) == null ? void 0 : _a.children) != null ? _b : [];\n      }\n    );\n    const page = grandChildren.find(\n      (grandChild) => !getComponentData(grandChild, TECHDOCS_ADDONS_WRAPPER_KEY) && !getComponentData(grandChild, TECHDOCS_ADDONS_KEY)\n    );\n    return /* @__PURE__ */ React.createElement(TechDocsReaderPageProvider, { entityRef }, page || /* @__PURE__ */ React.createElement(TechDocsReaderLayout, null));\n  }\n  return /* @__PURE__ */ React.createElement(TechDocsReaderPageProvider, { entityRef }, ({ metadata, entityMetadata, onReady }) => /* @__PURE__ */ React.createElement(\"div\", { className: \"techdocs-reader-page\" }, /* @__PURE__ */ React.createElement(Page, { themeId: \"documentation\" }, children instanceof Function ? children({\n    entityRef,\n    techdocsMetadataValue: metadata.value,\n    entityMetadataValue: entityMetadata.value,\n    onReady\n  }) : children)));\n};\n\nexport { Reader as R, TechDocsReaderProvider as T, TechDocsReaderLayout as a, TechDocsReaderPageHeader as b, TechDocsReaderPageContent as c, TechDocsReaderPageSubheader as d, TechDocsSearch as e, TechDocsReaderPage as f };\n//# sourceMappingURL=TechDocsReaderPage-cbdbc148.esm.js.map\n","import React from 'react';\nimport { makeStyles, ListItemText, ListItemIcon } from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from '@backstage/core-components';\nimport { HighlightedSearchResultText } from '@backstage/plugin-search-react';\n\nconst useStyles = makeStyles({\n  flexContainer: {\n    flexWrap: \"wrap\"\n  },\n  itemText: {\n    width: \"100%\",\n    marginBottom: \"1rem\"\n  }\n});\nconst TechDocsSearchResultListItem = (props) => {\n  const {\n    result,\n    highlight,\n    lineClamp = 5,\n    asListItem = true,\n    asLink = true,\n    title,\n    icon\n  } = props;\n  const classes = useStyles();\n  const LinkWrapper = ({ children }) => asLink ? /* @__PURE__ */ React.createElement(Link, { noTrack: true, to: result.location }, children) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  const TextItem = () => {\n    const resultTitle = (highlight == null ? void 0 : highlight.fields.title) ? /* @__PURE__ */ React.createElement(\n      HighlightedSearchResultText,\n      {\n        text: highlight.fields.title,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag\n      }\n    ) : result.title;\n    const entityTitle = (highlight == null ? void 0 : highlight.fields.entityTitle) ? /* @__PURE__ */ React.createElement(\n      HighlightedSearchResultText,\n      {\n        text: highlight.fields.entityTitle,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag\n      }\n    ) : result.entityTitle;\n    const resultName = (highlight == null ? void 0 : highlight.fields.name) ? /* @__PURE__ */ React.createElement(\n      HighlightedSearchResultText,\n      {\n        text: highlight.fields.name,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag\n      }\n    ) : result.name;\n    if (!result)\n      return null;\n    return /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        className: classes.itemText,\n        primaryTypographyProps: { variant: \"h6\" },\n        primary: /* @__PURE__ */ React.createElement(LinkWrapper, null, title ? title : /* @__PURE__ */ React.createElement(React.Fragment, null, resultTitle, \" | \", entityTitle != null ? entityTitle : resultName, \" docs\")),\n        secondary: /* @__PURE__ */ React.createElement(\n          Typography,\n          {\n            component: \"span\",\n            style: {\n              display: \"-webkit-box\",\n              WebkitBoxOrient: \"vertical\",\n              WebkitLineClamp: lineClamp,\n              overflow: \"hidden\"\n            },\n            color: \"textSecondary\",\n            variant: \"body2\"\n          },\n          (highlight == null ? void 0 : highlight.fields.text) ? /* @__PURE__ */ React.createElement(\n            HighlightedSearchResultText,\n            {\n              text: highlight.fields.text,\n              preTag: highlight.preTag,\n              postTag: highlight.postTag\n            }\n          ) : result.text\n        )\n      }\n    );\n  };\n  const ListItemWrapper = ({ children }) => asListItem ? /* @__PURE__ */ React.createElement(React.Fragment, null, icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, typeof icon === \"function\" ? icon(result) : icon), /* @__PURE__ */ React.createElement(\"div\", { className: classes.flexContainer }, children)) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  return /* @__PURE__ */ React.createElement(ListItemWrapper, null, /* @__PURE__ */ React.createElement(TextItem, null));\n};\n\nexport { TechDocsSearchResultListItem };\n//# sourceMappingURL=TechDocsSearchResultListItem-4736f829.esm.js.map\n","import { ResponseError, NotFoundError } from '@backstage/errors';\nimport { EventSourcePolyfill } from 'event-source-polyfill';\nimport { createRouteRef } from '@backstage/core-plugin-api';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass TechDocsClient {\n  constructor(options) {\n    __publicField(this, \"configApi\");\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"fetchApi\");\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi;\n  }\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl(\"techdocs\");\n  }\n  /**\n   * Retrieve TechDocs metadata.\n   *\n   * When docs are built, we generate a techdocs_metadata.json and store it along with the generated\n   * static files. It includes necessary data about the docs site. This method requests techdocs-backend\n   * which retrieves the TechDocs metadata.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   */\n  async getTechDocsMetadata(entityId) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/techdocs/${namespace}/${kind}/${name}`;\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n    return await request.json();\n  }\n  /**\n   * Retrieve metadata about an entity.\n   *\n   * This method requests techdocs-backend which uses the catalog APIs to respond with filtered\n   * information required here.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   */\n  async getEntityMetadata(entityId) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/entity/${namespace}/${kind}/${name}`;\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n    return await request.json();\n  }\n}\nclass TechDocsStorageClient {\n  constructor(options) {\n    __publicField(this, \"configApi\");\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"identityApi\");\n    __publicField(this, \"fetchApi\");\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n    this.fetchApi = options.fetchApi;\n  }\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl(\"techdocs\");\n  }\n  async getStorageUrl() {\n    var _a;\n    return (_a = this.configApi.getOptionalString(\"techdocs.storageUrl\")) != null ? _a : `${await this.discoveryApi.getBaseUrl(\"techdocs\")}/static/docs`;\n  }\n  async getBuilder() {\n    return this.configApi.getString(\"techdocs.builder\");\n  }\n  /**\n   * Fetch HTML content as text for an individual docs page in an entity's docs site.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   * @param path - The unique path to an individual docs page e.g. overview/what-is-new\n   * @returns HTML content of the docs page as string\n   * @throws Throws error when the page is not found.\n   */\n  async getEntityDocs(entityId, path) {\n    const { kind, namespace, name } = entityId;\n    const storageUrl = await this.getStorageUrl();\n    const url = `${storageUrl}/${namespace}/${kind}/${name}/${path}`;\n    const request = await this.fetchApi.fetch(\n      `${url.endsWith(\"/\") ? url : `${url}/`}index.html`\n    );\n    let errorMessage = \"\";\n    switch (request.status) {\n      case 404:\n        errorMessage = \"Page not found. \";\n        if (!path) {\n          errorMessage += \"This could be because there is no index.md file in the root of the docs directory of this repository.\";\n        }\n        throw new NotFoundError(errorMessage);\n      case 500:\n        errorMessage = \"Could not generate documentation or an error in the TechDocs backend. \";\n        throw new Error(errorMessage);\n    }\n    return request.text();\n  }\n  /**\n   * Check if docs are on the latest version and trigger rebuild if not\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   * @param logHandler - Callback to receive log messages from the build process\n   * @returns Whether documents are currently synchronized to newest version\n   * @throws Throws error on error from sync endpoint in TechDocs Backend\n   */\n  async syncEntityDocs(entityId, logHandler = () => {\n  }) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const url = `${apiOrigin}/sync/${namespace}/${kind}/${name}`;\n    const { token } = await this.identityApi.getCredentials();\n    return new Promise((resolve, reject) => {\n      const source = new EventSourcePolyfill(url, {\n        withCredentials: true,\n        headers: token ? { Authorization: `Bearer ${token}` } : {}\n      });\n      source.addEventListener(\"log\", (e) => {\n        if (e.data) {\n          logHandler(JSON.parse(e.data));\n        }\n      });\n      source.addEventListener(\"finish\", (e) => {\n        let updated = false;\n        if (e.data) {\n          ({ updated } = JSON.parse(e.data));\n        }\n        resolve(updated ? \"updated\" : \"cached\");\n      });\n      source.onerror = (e) => {\n        source.close();\n        switch (e.status) {\n          case 404:\n            reject(new NotFoundError(e.message));\n            return;\n          default:\n            reject(new Error(e.data));\n            return;\n        }\n      };\n    });\n  }\n  async getBaseUrl(oldBaseUrl, entityId, path) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const newBaseUrl = `${apiOrigin}/static/docs/${namespace}/${kind}/${name}/${path}`;\n    return new URL(\n      oldBaseUrl,\n      newBaseUrl.endsWith(\"/\") ? newBaseUrl : `${newBaseUrl}/`\n    ).toString();\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"techdocs:index-page\"\n});\nconst rootDocsRouteRef = createRouteRef({\n  id: \"techdocs:reader-page\",\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst rootCatalogDocsRouteRef = createRouteRef({\n  id: \"techdocs:catalog-reader-view\"\n});\n\nexport { TechDocsClient as T, TechDocsStorageClient as a, rootDocsRouteRef as b, rootCatalogDocsRouteRef as c, rootRouteRef as r };\n//# sourceMappingURL=routes-691e552c.esm.js.map\n","import { useOutlet } from 'react-router-dom';\nimport React, { useState, useEffect, useCallback, cloneElement } from 'react';\nimport { Typography, Button, makeStyles, Avatar, ListItem, ListItemIcon, ListItemText, Tooltip, Grid, ListItemSecondaryAction, List, Switch, TextField, IconButton, Menu, MenuItem } from '@material-ui/core';\nimport { EmptyState, CodeSnippet, sidebarConfig, InfoCard, useSidebarPinState, Page, Header, RoutedTabs } from '@backstage/core-components';\nimport Star from '@material-ui/icons/Star';\nimport { useApi, errorApiRef, SessionState, googleAuthApiRef, microsoftAuthApiRef, githubAuthApiRef, gitlabAuthApiRef, oktaAuthApiRef, bitbucketAuthApiRef, oneloginAuthApiRef, atlassianAuthApiRef, bitbucketServerAuthApiRef, configApiRef, featureFlagsApiRef, FeatureFlagState, identityApiRef, alertApiRef, appThemeApiRef, attachComponentData, useElementFilter } from '@backstage/core-plugin-api';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport useAsync from 'react-use/lib/useAsync';\nimport SignOutIcon from '@material-ui/icons/MeetingRoom';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport useObservable from 'react-use/lib/useObservable';\nimport AutoIcon from '@material-ui/icons/BrightnessAuto';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport { useTranslationRef, appLanguageApiRef } from '@backstage/core-plugin-api/alpha';\nimport { a as userSettingsTranslationRef } from './translation-ecd113d9.esm.js';\nimport { EntityRefLinks } from '@backstage/plugin-catalog-react';\nimport Grid$1 from '@material-ui/core/Grid';\nimport Typography$1 from '@material-ui/core/Typography';\n\nconst EXAMPLE$1 = `auth:\n  providers:\n    google:\n      development:\n        clientId: \\${AUTH_GOOGLE_CLIENT_ID}\n        clientSecret: \\${AUTH_GOOGLE_CLIENT_SECRET}\n`;\nconst EmptyProviders = () => /* @__PURE__ */ React.createElement(\n  EmptyState,\n  {\n    missing: \"content\",\n    title: \"No Authentication Providers\",\n    description: \"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.\",\n    action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Open \", /* @__PURE__ */ React.createElement(\"code\", null, \"app-config.yaml\"), \" and make the changes as highlighted below:\"), /* @__PURE__ */ React.createElement(\n      CodeSnippet,\n      {\n        text: EXAMPLE$1,\n        language: \"yaml\",\n        showLineNumbers: true,\n        highlightedNumbers: [3, 4, 5, 6, 7, 8],\n        customStyle: { background: \"inherit\", fontSize: \"115%\" }\n      }\n    ), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"primary\",\n        href: \"https://backstage.io/docs/auth/add-auth-provider\"\n      },\n      \"Read More\"\n    ))\n  }\n);\n\nconst useStyles$3 = makeStyles((theme) => ({\n  avatar: {\n    width: ({ size }) => size,\n    height: ({ size }) => size,\n    fontSize: ({ size }) => size * 0.7,\n    border: `1px solid ${theme.palette.textSubtle}`\n  }\n}));\nconst ProviderSettingsAvatar = ({ size, picture }) => {\n  const { iconSize } = sidebarConfig;\n  const classes = useStyles$3(size ? { size } : { size: iconSize });\n  return /* @__PURE__ */ React.createElement(Avatar, { src: picture, className: classes.avatar });\n};\n\nconst emptyProfile = {};\nconst ProviderSettingsItem = (props) => {\n  const { title, description, icon: Icon, apiRef } = props;\n  const api = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n  const [signedIn, setSignedIn] = useState(false);\n  const [profile, setProfile] = useState(emptyProfile);\n  useEffect(() => {\n    let didCancel = false;\n    const subscription = api.sessionState$().subscribe((sessionState) => {\n      if (sessionState !== SessionState.SignedIn) {\n        setProfile(emptyProfile);\n        setSignedIn(false);\n      }\n      if (!didCancel) {\n        api.getProfile({ optional: true }).then((profileResponse) => {\n          if (!didCancel) {\n            if (sessionState === SessionState.SignedIn) {\n              setSignedIn(true);\n            }\n            if (profileResponse) {\n              setProfile(profileResponse);\n            }\n          }\n        });\n      }\n    });\n    return () => {\n      didCancel = true;\n      subscription.unsubscribe();\n    };\n  }, [api]);\n  return /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Icon, null)), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: title,\n      secondary: /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", arrow: true, title: description }, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 6 }, /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(ProviderSettingsAvatar, { size: 48, picture: profile.picture })), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: true, container: true }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true, container: true, direction: \"column\", spacing: 2 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          variant: \"subtitle1\",\n          color: \"textPrimary\",\n          gutterBottom: true\n        },\n        profile.displayName\n      ), /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\" }, profile.email), /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\" }, description)))))),\n      secondaryTypographyProps: { noWrap: true, style: { width: \"80%\" } }\n    }\n  ), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      placement: \"top\",\n      arrow: true,\n      title: signedIn ? `Sign out from ${title}` : `Sign in to ${title}`\n    },\n    /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"outlined\",\n        color: \"primary\",\n        onClick: () => {\n          const action = signedIn ? api.signOut() : api.signIn();\n          action.catch((error) => errorApi.post(error));\n        }\n      },\n      signedIn ? `Sign out` : `Sign in`\n    )\n  )));\n};\n\nconst DefaultProviderSettings = (props) => {\n  const { configuredProviders } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, configuredProviders.includes(\"google\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Google\",\n      description: \"Provides authentication towards Google APIs and identities\",\n      apiRef: googleAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"microsoft\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Microsoft\",\n      description: \"Provides authentication towards Microsoft APIs and identities\",\n      apiRef: microsoftAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"github\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"GitHub\",\n      description: \"Provides authentication towards GitHub APIs\",\n      apiRef: githubAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"gitlab\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"GitLab\",\n      description: \"Provides authentication towards GitLab APIs\",\n      apiRef: gitlabAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"okta\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Okta\",\n      description: \"Provides authentication towards Okta APIs\",\n      apiRef: oktaAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"bitbucket\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Bitbucket\",\n      description: \"Provides authentication towards Bitbucket APIs\",\n      apiRef: bitbucketAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"onelogin\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"OneLogin\",\n      description: \"Provides authentication towards OneLogin APIs\",\n      apiRef: oneloginAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"atlassian\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Atlassian\",\n      description: \"Provides authentication towards Atlassian APIs\",\n      apiRef: atlassianAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"bitbucketServer\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Bitbucket Server\",\n      description: \"Provides authentication towards Bitbucket Server APIs\",\n      apiRef: bitbucketServerAuthApiRef,\n      icon: Star\n    }\n  ));\n};\n\nconst UserSettingsAuthProviders = (props) => {\n  const { providerSettings } = props;\n  const configApi = useApi(configApiRef);\n  const providersConfig = configApi.getOptionalConfig(\"auth.providers\");\n  const configuredProviders = (providersConfig == null ? void 0 : providersConfig.keys()) || [];\n  const providers = providerSettings != null ? providerSettings : /* @__PURE__ */ React.createElement(DefaultProviderSettings, { configuredProviders });\n  if (!providerSettings && !(configuredProviders == null ? void 0 : configuredProviders.length)) {\n    return /* @__PURE__ */ React.createElement(EmptyProviders, null);\n  }\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: \"Available Providers\" }, /* @__PURE__ */ React.createElement(List, { dense: true }, providers));\n};\n\nconst EXAMPLE = `import { createPlugin } from '@backstage/core-plugin-api';\n\nexport default createPlugin({\n  id: 'plugin-name',\n  featureFlags: [{ name: 'enable-example-feature' }],\n});\n`;\nconst EmptyFlags = () => /* @__PURE__ */ React.createElement(\n  EmptyState,\n  {\n    missing: \"content\",\n    title: \"No Feature Flags\",\n    description: \"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.\",\n    action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"An example for how to add a feature flag is highlighted below:\"), /* @__PURE__ */ React.createElement(\n      CodeSnippet,\n      {\n        text: EXAMPLE,\n        language: \"typescript\",\n        showLineNumbers: true,\n        highlightedNumbers: [6],\n        customStyle: { background: \"inherit\", fontSize: \"115%\" }\n      }\n    ), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"primary\",\n        href: \"https://backstage.io/docs/api/utility-apis\"\n      },\n      \"Read More\"\n    ))\n  }\n);\n\nconst getSecondaryText = (flag) => {\n  if (flag.description) {\n    return flag.description;\n  }\n  return flag.pluginId ? `Registered in ${flag.pluginId} plugin` : \"Registered in the application\";\n};\nconst FlagItem = ({ flag, enabled, toggleHandler }) => /* @__PURE__ */ React.createElement(ListItem, { divider: true, button: true, onClick: () => toggleHandler(flag.name) }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", arrow: true, title: enabled ? \"Disable\" : \"Enable\" }, /* @__PURE__ */ React.createElement(Switch, { color: \"primary\", checked: enabled, name: flag.name }))), /* @__PURE__ */ React.createElement(ListItemText, { primary: flag.name, secondary: getSecondaryText(flag) }));\n\nconst sortFlags = (flags, featureFlagsApi) => {\n  const activeFlags = flags.filter((flag) => featureFlagsApi.isActive(flag.name));\n  const idleFlags = flags.filter((flag) => !featureFlagsApi.isActive(flag.name));\n  return [...activeFlags, ...idleFlags];\n};\nconst UserSettingsFeatureFlags = () => {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const inputRef = React.useRef();\n  const initialFeatureFlags = featureFlagsApi.getRegisteredFlags();\n  const initialFeatureFlagsSorted = sortFlags(\n    initialFeatureFlags,\n    featureFlagsApi\n  );\n  const [featureFlags] = useState(initialFeatureFlagsSorted);\n  const initialFlagState = Object.fromEntries(\n    featureFlags.map(({ name }) => [name, featureFlagsApi.isActive(name)])\n  );\n  const [state, setState] = useState(initialFlagState);\n  const [filterInput, setFilterInput] = useState(\"\");\n  const toggleFlag = useCallback(\n    (flagName) => {\n      const newState = featureFlagsApi.isActive(flagName) ? FeatureFlagState.None : FeatureFlagState.Active;\n      featureFlagsApi.save({\n        states: { [flagName]: newState },\n        merge: true\n      });\n      setState((prevState) => ({\n        ...prevState,\n        [flagName]: newState === FeatureFlagState.Active\n      }));\n    },\n    [featureFlagsApi]\n  );\n  if (!featureFlags.length) {\n    return /* @__PURE__ */ React.createElement(EmptyFlags, null);\n  }\n  const clearFilterInput = () => {\n    var _a;\n    setFilterInput(\"\");\n    (_a = inputRef == null ? void 0 : inputRef.current) == null ? void 0 : _a.focus();\n  };\n  const filteredFeatureFlags = featureFlags.filter((featureFlag) => {\n    const featureFlagName = featureFlag.name.toLocaleLowerCase(\"en-US\");\n    return featureFlagName.includes(filterInput.toLocaleLowerCase(\"en-US\"));\n  });\n  const Header = () => /* @__PURE__ */ React.createElement(Grid, { container: true, style: { justifyContent: \"space-between\" } }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 6, md: 8 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\" }, \"Feature Flags\"), /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\" }, \"Please refresh the page when toggling feature flags\")), featureFlags.length >= 10 && /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 6, md: 4 }, /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      label: \"Filter\",\n      style: { display: \"flex\", justifyContent: \"flex-end\" },\n      inputRef: (ref) => ref && ref.focus(),\n      InputProps: {\n        ...filterInput.length && {\n          endAdornment: /* @__PURE__ */ React.createElement(\n            IconButton,\n            {\n              \"aria-label\": \"Clear filter\",\n              onClick: clearFilterInput,\n              edge: \"end\"\n            },\n            /* @__PURE__ */ React.createElement(ClearIcon, null)\n          )\n        }\n      },\n      onChange: (e) => setFilterInput(e.target.value),\n      value: filterInput\n    }\n  )));\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: /* @__PURE__ */ React.createElement(Header, null) }, /* @__PURE__ */ React.createElement(List, { dense: true }, filteredFeatureFlags.map((featureFlag) => {\n    const enabled = Boolean(state[featureFlag.name]);\n    return /* @__PURE__ */ React.createElement(\n      FlagItem,\n      {\n        key: featureFlag.name,\n        flag: featureFlag,\n        enabled,\n        toggleHandler: toggleFlag\n      }\n    );\n  })));\n};\n\nconst useUserProfile = () => {\n  var _a;\n  const identityApi = useApi(identityApiRef);\n  const alertApi = useApi(alertApiRef);\n  const { value, loading, error } = useAsync(async () => {\n    return {\n      profile: await identityApi.getProfileInfo(),\n      identity: await identityApi.getBackstageIdentity()\n    };\n  }, []);\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load user identity: ${error}`,\n        severity: \"error\"\n      });\n    }\n  }, [error, alertApi]);\n  if (loading || error) {\n    return {\n      profile: {},\n      displayName: \"\",\n      loading\n    };\n  }\n  return {\n    profile: value.profile,\n    backstageIdentity: value.identity,\n    displayName: (_a = value.profile.displayName) != null ? _a : value.identity.userEntityRef,\n    loading\n  };\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  avatar: {\n    width: ({ size }) => size,\n    height: ({ size }) => size,\n    fontSize: ({ size }) => size * 0.7,\n    border: `1px solid ${theme.palette.textSubtle}`\n  }\n}));\nconst UserSettingsSignInAvatar = (props) => {\n  const { size } = props;\n  const { iconSize } = sidebarConfig;\n  const classes = useStyles$2(size ? { size } : { size: iconSize });\n  const { profile } = useUserProfile();\n  return /* @__PURE__ */ React.createElement(\n    Avatar,\n    {\n      src: profile.picture,\n      className: classes.avatar,\n      alt: \"Profile picture\"\n    }\n  );\n};\n\nconst UserSettingsMenu = () => {\n  const errorApi = useApi(errorApiRef);\n  const identityApi = useApi(identityApiRef);\n  const [open, setOpen] = React.useState(false);\n  const [anchorEl, setAnchorEl] = React.useState(\n    void 0\n  );\n  const handleOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setAnchorEl(void 0);\n    setOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"data-testid\": \"user-settings-menu\",\n      \"aria-label\": \"more\",\n      onClick: handleOpen\n    },\n    /* @__PURE__ */ React.createElement(MoreVertIcon, null)\n  ), /* @__PURE__ */ React.createElement(Menu, { anchorEl, open, onClose: handleClose }, /* @__PURE__ */ React.createElement(\n    MenuItem,\n    {\n      \"data-testid\": \"sign-out\",\n      onClick: () => identityApi.signOut().catch((error) => errorApi.post(error))\n    },\n    /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(SignOutIcon, null)),\n    \"Sign Out\"\n  )));\n};\n\nconst UserSettingsProfileCard = () => {\n  const { profile, displayName } = useUserProfile();\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: \"Profile\", variant: \"gridItem\" }, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 6 }, /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(UserSettingsSignInAvatar, { size: 96 })), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: true, container: true }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true, container: true, direction: \"column\", spacing: 2 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\", gutterBottom: true }, displayName), profile.email && /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\" }, profile.email))), /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(UserSettingsMenu, null)))));\n};\n\nconst UserSettingsPinToggle = () => {\n  const { isPinned, toggleSidebarPinState } = useSidebarPinState();\n  return /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: \"Pin Sidebar\",\n      secondary: \"Prevent the sidebar from collapsing\"\n    }\n  ), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      placement: \"top\",\n      arrow: true,\n      title: `${isPinned ? \"Unpin\" : \"Pin\"} Sidebar`\n    },\n    /* @__PURE__ */ React.createElement(\n      Switch,\n      {\n        color: \"primary\",\n        checked: isPinned,\n        onChange: () => toggleSidebarPinState(),\n        name: \"pin\",\n        inputProps: { \"aria-label\": \"Pin Sidebar Switch\" }\n      }\n    )\n  )));\n};\n\nconst ThemeIcon = ({ id, activeId, icon }) => icon ? cloneElement(icon, {\n  color: activeId === id ? \"primary\" : void 0\n}) : /* @__PURE__ */ React.createElement(AutoIcon, { color: activeId === id ? \"primary\" : void 0 });\nconst useStyles$1 = makeStyles((theme) => ({\n  container: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    width: \"100%\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingBottom: 8,\n    paddingRight: 16\n  },\n  list: {\n    width: \"initial\",\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100%\",\n      padding: `0 0 12px`\n    }\n  },\n  listItemText: {\n    paddingRight: 0,\n    paddingLeft: 0\n  },\n  listItemSecondaryAction: {\n    position: \"relative\",\n    transform: \"unset\",\n    top: \"auto\",\n    right: \"auto\",\n    paddingLeft: 16,\n    [theme.breakpoints.down(\"xs\")]: {\n      paddingLeft: 0\n    }\n  }\n}));\nconst TooltipToggleButton$1 = ({\n  children,\n  title,\n  value,\n  ...props\n}) => /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", arrow: true, title }, /* @__PURE__ */ React.createElement(ToggleButton, { value, ...props }, children));\nconst UserSettingsThemeToggle = () => {\n  const classes = useStyles$1();\n  const appThemeApi = useApi(appThemeApiRef);\n  const activeThemeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId()\n  );\n  const themeIds = appThemeApi.getInstalledThemes();\n  const { t } = useTranslationRef(userSettingsTranslationRef);\n  const handleSetTheme = (_event, newThemeId) => {\n    if (themeIds.some((it) => it.id === newThemeId)) {\n      appThemeApi.setActiveThemeId(newThemeId);\n    } else {\n      appThemeApi.setActiveThemeId(void 0);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    ListItem,\n    {\n      className: classes.list,\n      classes: { container: classes.container }\n    },\n    /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        className: classes.listItemText,\n        primary: t(\"theme\"),\n        secondary: t(\"change_the_theme_mode\")\n      }\n    ),\n    /* @__PURE__ */ React.createElement(ListItemSecondaryAction, { className: classes.listItemSecondaryAction }, /* @__PURE__ */ React.createElement(\n      ToggleButtonGroup,\n      {\n        exclusive: true,\n        size: \"small\",\n        value: activeThemeId != null ? activeThemeId : \"auto\",\n        onChange: handleSetTheme\n      },\n      themeIds.map((theme) => {\n        const themeId = theme.id;\n        const themeIcon = theme.icon;\n        const themeTitle = theme.title || (themeId === \"light\" || themeId === \"dark\" ? t(`theme_${themeId}`) : themeId);\n        return /* @__PURE__ */ React.createElement(\n          TooltipToggleButton$1,\n          {\n            key: themeId,\n            title: t(\"select_theme\", { theme: themeTitle }),\n            value: themeId\n          },\n          /* @__PURE__ */ React.createElement(React.Fragment, null, themeTitle, \"\\xA0\", /* @__PURE__ */ React.createElement(\n            ThemeIcon,\n            {\n              id: themeId,\n              icon: themeIcon,\n              activeId: activeThemeId\n            }\n          ))\n        );\n      }),\n      /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", arrow: true, title: t(\"select_theme_auto\") }, /* @__PURE__ */ React.createElement(ToggleButton, { value: \"auto\", selected: activeThemeId === void 0 }, t(\"theme_auto\"), \"\\xA0\", /* @__PURE__ */ React.createElement(\n        AutoIcon,\n        {\n          color: activeThemeId === void 0 ? \"primary\" : void 0\n        }\n      )))\n    ))\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    width: \"100%\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingBottom: 8,\n    paddingRight: 16\n  },\n  list: {\n    width: \"initial\",\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100%\",\n      padding: `0 0 12px`\n    }\n  },\n  listItemText: {\n    paddingRight: 0,\n    paddingLeft: 0\n  },\n  listItemSecondaryAction: {\n    position: \"relative\",\n    transform: \"unset\",\n    top: \"auto\",\n    right: \"auto\",\n    paddingLeft: 16,\n    [theme.breakpoints.down(\"xs\")]: {\n      paddingLeft: 0\n    }\n  }\n}));\nconst TooltipToggleButton = ({\n  children,\n  title,\n  value,\n  ...props\n}) => /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", arrow: true, title }, /* @__PURE__ */ React.createElement(ToggleButton, { value, ...props }, children));\nconst UserSettingsLanguageToggle = () => {\n  const classes = useStyles();\n  const languageApi = useApi(appLanguageApiRef);\n  const { t } = useTranslationRef(userSettingsTranslationRef);\n  const [languageObservable] = useState(() => languageApi.language$());\n  const { language: currentLanguage } = useObservable(\n    languageObservable,\n    languageApi.getLanguage()\n  );\n  const { languages } = languageApi.getAvailableLanguages();\n  if (languages.length <= 1) {\n    return null;\n  }\n  const handleSetLanguage = (_event, newLanguage) => {\n    languageApi.setLanguage(newLanguage);\n  };\n  return /* @__PURE__ */ React.createElement(\n    ListItem,\n    {\n      className: classes.list,\n      classes: { container: classes.container }\n    },\n    /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        className: classes.listItemText,\n        primary: t(\"language\"),\n        secondary: t(\"change_the_language\")\n      }\n    ),\n    /* @__PURE__ */ React.createElement(ListItemSecondaryAction, { className: classes.listItemSecondaryAction }, /* @__PURE__ */ React.createElement(\n      ToggleButtonGroup,\n      {\n        exclusive: true,\n        size: \"small\",\n        value: currentLanguage,\n        onChange: handleSetLanguage\n      },\n      languages.map((language) => {\n        return /* @__PURE__ */ React.createElement(\n          TooltipToggleButton,\n          {\n            key: language,\n            title: t(\"select_lng\", { language }),\n            value: language\n          },\n          /* @__PURE__ */ React.createElement(React.Fragment, null, language)\n        );\n      })\n    ))\n  );\n};\n\nconst UserSettingsAppearanceCard = () => {\n  const { isMobile } = useSidebarPinState();\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: \"Appearance\", variant: \"gridItem\" }, /* @__PURE__ */ React.createElement(List, { dense: true }, /* @__PURE__ */ React.createElement(UserSettingsThemeToggle, null), /* @__PURE__ */ React.createElement(UserSettingsLanguageToggle, null), !isMobile && /* @__PURE__ */ React.createElement(UserSettingsPinToggle, null)));\n};\n\nconst Contents = () => {\n  const { backstageIdentity } = useUserProfile();\n  if (!backstageIdentity) {\n    return /* @__PURE__ */ React.createElement(Typography$1, null, \"No Backstage Identity\");\n  }\n  return /* @__PURE__ */ React.createElement(Grid$1, { container: true, spacing: 1 }, /* @__PURE__ */ React.createElement(Grid$1, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"subtitle1\", gutterBottom: true }, \"User Entity:\", \" \", /* @__PURE__ */ React.createElement(EntityRefLinks, { entityRefs: [backstageIdentity.userEntityRef] }))), /* @__PURE__ */ React.createElement(Grid$1, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"subtitle1\" }, \"Ownership Entities:\", \" \", /* @__PURE__ */ React.createElement(EntityRefLinks, { entityRefs: backstageIdentity.ownershipEntityRefs }))));\n};\nconst UserSettingsIdentityCard = () => /* @__PURE__ */ React.createElement(InfoCard, { title: \"Backstage Identity\" }, /* @__PURE__ */ React.createElement(Contents, null));\n\nconst UserSettingsGeneral = () => {\n  return /* @__PURE__ */ React.createElement(Grid, { container: true, direction: \"row\", spacing: 3 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React.createElement(UserSettingsProfileCard, null)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React.createElement(UserSettingsAppearanceCard, null)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React.createElement(UserSettingsIdentityCard, null)));\n};\n\nconst LAYOUT_DATA_KEY = \"plugin.user-settings.settingsLayout\";\nconst LAYOUT_ROUTE_DATA_KEY = \"plugin.user-settings.settingsLayoutRoute\";\nconst Route = () => null;\nattachComponentData(Route, LAYOUT_ROUTE_DATA_KEY, true);\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nconst SettingsLayout = (props) => {\n  const { title, children } = props;\n  const { isMobile } = useSidebarPinState();\n  const routes = useElementFilter(\n    children,\n    (elements) => elements.selectByComponentData({\n      key: LAYOUT_ROUTE_DATA_KEY,\n      withStrictError: \"Child of SettingsLayout must be an SettingsLayout.Route\"\n    }).getElements().map((child) => child.props)\n  );\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, !isMobile && /* @__PURE__ */ React.createElement(Header, { title: title != null ? title : \"Settings\" }), /* @__PURE__ */ React.createElement(RoutedTabs, { routes }));\n};\nattachComponentData(SettingsLayout, LAYOUT_DATA_KEY, true);\nSettingsLayout.Route = Route;\n\nconst DefaultSettingsPage = (props) => {\n  const { providerSettings, tabs } = props;\n  return /* @__PURE__ */ React.createElement(SettingsLayout, null, /* @__PURE__ */ React.createElement(SettingsLayout.Route, { path: \"general\", title: \"General\" }, /* @__PURE__ */ React.createElement(UserSettingsGeneral, null)), /* @__PURE__ */ React.createElement(\n    SettingsLayout.Route,\n    {\n      path: \"auth-providers\",\n      title: \"Authentication Providers\"\n    },\n    /* @__PURE__ */ React.createElement(UserSettingsAuthProviders, { providerSettings })\n  ), /* @__PURE__ */ React.createElement(SettingsLayout.Route, { path: \"feature-flags\", title: \"Feature Flags\" }, /* @__PURE__ */ React.createElement(UserSettingsFeatureFlags, null)), tabs);\n};\n\nconst SettingsPage = (props) => {\n  const { providerSettings } = props;\n  const outlet = useOutlet();\n  const layout = useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: LAYOUT_DATA_KEY\n    }).getElements()\n  );\n  const tabs = useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: LAYOUT_ROUTE_DATA_KEY\n    }).getElements()\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, layout.length !== 0 && layout || /* @__PURE__ */ React.createElement(DefaultSettingsPage, { tabs, providerSettings }));\n};\n\nexport { DefaultProviderSettings as D, LAYOUT_ROUTE_DATA_KEY as L, ProviderSettingsItem as P, SettingsLayout as S, UserSettingsAuthProviders as U, SettingsPage as a, UserSettingsGeneral as b, UserSettingsProfileCard as c, UserSettingsMenu as d, UserSettingsSignInAvatar as e, UserSettingsAppearanceCard as f, UserSettingsThemeToggle as g, UserSettingsPinToggle as h, UserSettingsIdentityCard as i, UserSettingsLanguageToggle as j, UserSettingsFeatureFlags as k, useUserProfile as u };\n//# sourceMappingURL=SettingsPage-70c1c7c8.esm.js.map\n","import { createRouteRef, createPlugin, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { createTranslationRef } from '@backstage/core-plugin-api/alpha';\n\nconst settingsRouteRef = createRouteRef({\n  id: \"user-settings\"\n});\nconst userSettingsPlugin = createPlugin({\n  id: \"user-settings\",\n  routes: {\n    settingsPage: settingsRouteRef\n  }\n});\nconst UserSettingsPage = userSettingsPlugin.provide(\n  createRoutableExtension({\n    name: \"UserSettingsPage\",\n    component: () => import('./index-088c7808.esm.js').then((m) => m.SettingsPage),\n    mountPoint: settingsRouteRef\n  })\n);\n\nconst userSettingsTranslationRef = createTranslationRef({\n  id: \"user-settings\",\n  messages: {\n    language: \"Language\",\n    change_the_language: \"Change the language\",\n    theme: \"Theme\",\n    theme_light: \"Light\",\n    theme_dark: \"Dark\",\n    theme_auto: \"Auto\",\n    change_the_theme_mode: \"Change the theme mode\",\n    select_theme: \"Select {{theme}}\",\n    select_theme_auto: \"Select Auto Theme\",\n    select_lng: \"Select language {{language}}\"\n  }\n});\n\nexport { UserSettingsPage as U, userSettingsTranslationRef as a, settingsRouteRef as s, userSettingsPlugin as u };\n//# sourceMappingURL=translation-ecd113d9.esm.js.map\n","import { WebStorage } from '@backstage/core-app-api';\nimport { ResponseError } from '@backstage/errors';\nimport ObservableImpl from 'zen-observable';\nimport { s as settingsRouteRef } from './esm/translation-ecd113d9.esm.js';\nexport { U as UserSettingsPage, u as plugin, u as userSettingsPlugin } from './esm/translation-ecd113d9.esm.js';\nimport React from 'react';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { SidebarItem } from '@backstage/core-components';\nimport { useRouteRef, attachComponentData } from '@backstage/core-plugin-api';\nimport { L as LAYOUT_ROUTE_DATA_KEY, S as SettingsLayout } from './esm/SettingsPage-70c1c7c8.esm.js';\nexport { D as DefaultProviderSettings, P as ProviderSettingsItem, a as Router, S as SettingsLayout, f as UserSettingsAppearanceCard, U as UserSettingsAuthProviders, k as UserSettingsFeatureFlags, b as UserSettingsGeneral, i as UserSettingsIdentityCard, j as UserSettingsLanguageToggle, d as UserSettingsMenu, h as UserSettingsPinToggle, c as UserSettingsProfileCard, e as UserSettingsSignInAvatar, g as UserSettingsThemeToggle, u as useUserProfile } from './esm/SettingsPage-70c1c7c8.esm.js';\nimport '@backstage/core-plugin-api/alpha';\nimport 'react-router-dom';\nimport '@material-ui/core';\nimport '@material-ui/icons/Star';\nimport '@material-ui/icons/Clear';\nimport 'react-use/lib/useAsync';\nimport '@material-ui/icons/MeetingRoom';\nimport '@material-ui/icons/MoreVert';\nimport 'react-use/lib/useObservable';\nimport '@material-ui/icons/BrightnessAuto';\nimport '@material-ui/lab/ToggleButton';\nimport '@material-ui/lab/ToggleButtonGroup';\nimport '@backstage/plugin-catalog-react';\nimport '@material-ui/core/Grid';\nimport '@material-ui/core/Typography';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst JSON_HEADERS = {\n  \"Content-Type\": \"application/json; charset=utf-8\",\n  Accept: \"application/json\"\n};\nconst buckets = /* @__PURE__ */ new Map();\nclass UserSettingsStorage {\n  constructor(namespace, fetchApi, discoveryApi, errorApi, identityApi, fallback) {\n    this.namespace = namespace;\n    this.fetchApi = fetchApi;\n    this.discoveryApi = discoveryApi;\n    this.errorApi = errorApi;\n    this.identityApi = identityApi;\n    this.fallback = fallback;\n    __publicField(this, \"subscribers\", /* @__PURE__ */ new Set());\n    __publicField(this, \"observables\", /* @__PURE__ */ new Map());\n  }\n  static create(options) {\n    var _a;\n    return new UserSettingsStorage(\n      (_a = options.namespace) != null ? _a : \"default\",\n      options.fetchApi,\n      options.discoveryApi,\n      options.errorApi,\n      options.identityApi,\n      WebStorage.create({\n        namespace: options.namespace,\n        errorApi: options.errorApi\n      })\n    );\n  }\n  forBucket(name) {\n    const bucketPath = `${this.namespace}.${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(\n        bucketPath,\n        new UserSettingsStorage(\n          bucketPath,\n          this.fetchApi,\n          this.discoveryApi,\n          this.errorApi,\n          this.identityApi,\n          this.fallback\n        )\n      );\n    }\n    return buckets.get(bucketPath);\n  }\n  async remove(key) {\n    const fetchUrl = await this.getFetchUrl(key);\n    const response = await this.fetchApi.fetch(fetchUrl, {\n      method: \"DELETE\"\n    });\n    if (!response.ok && response.status !== 404) {\n      throw await ResponseError.fromResponse(response);\n    }\n    this.notifyChanges({ key, presence: \"absent\" });\n  }\n  async set(key, data) {\n    if (!await this.isSignedIn()) {\n      await this.fallback.set(key, data);\n      this.notifyChanges({ key, presence: \"present\", value: data });\n      return;\n    }\n    const fetchUrl = await this.getFetchUrl(key);\n    const response = await this.fetchApi.fetch(fetchUrl, {\n      method: \"PUT\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify({ value: data })\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const { value } = await response.json();\n    this.notifyChanges({ key, value, presence: \"present\" });\n  }\n  observe$(key) {\n    if (!this.observables.has(key)) {\n      this.observables.set(\n        key,\n        new ObservableImpl((subscriber) => {\n          this.subscribers.add(subscriber);\n          Promise.resolve().then(() => this.get(key)).then((snapshot) => subscriber.next(snapshot)).catch((error) => this.errorApi.post(error));\n          return () => {\n            this.subscribers.delete(subscriber);\n          };\n        }).filter(({ key: messageKey }) => messageKey === key)\n      );\n    }\n    return this.observables.get(key);\n  }\n  snapshot(key) {\n    return { key, presence: \"unknown\" };\n  }\n  async get(key) {\n    if (!await this.isSignedIn()) {\n      return this.fallback.snapshot(key);\n    }\n    const fetchUrl = await this.getFetchUrl(key);\n    const response = await this.fetchApi.fetch(fetchUrl);\n    if (response.status === 404) {\n      return { key, presence: \"absent\" };\n    }\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    try {\n      const { value: rawValue } = await response.json();\n      const value = JSON.parse(JSON.stringify(rawValue), (_key, val) => {\n        if (typeof val === \"object\" && val !== null) {\n          Object.freeze(val);\n        }\n        return val;\n      });\n      return { key, presence: \"present\", value };\n    } catch {\n      return { key, presence: \"absent\" };\n    }\n  }\n  async getFetchUrl(key) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"user-settings\");\n    const encodedNamespace = encodeURIComponent(this.namespace);\n    const encodedKey = encodeURIComponent(key);\n    return `${baseUrl}/buckets/${encodedNamespace}/keys/${encodedKey}`;\n  }\n  async notifyChanges(snapshot) {\n    for (const subscription of this.subscribers) {\n      try {\n        subscription.next(snapshot);\n      } catch {\n      }\n    }\n  }\n  async isSignedIn() {\n    try {\n      const credentials = await this.identityApi.getCredentials();\n      return (credentials == null ? void 0 : credentials.token) ? true : false;\n    } catch {\n      return false;\n    }\n  }\n}\n\nconst Settings = (props) => {\n  const routePath = useRouteRef(settingsRouteRef);\n  const Icon = props.icon ? props.icon : SettingsIcon;\n  return /* @__PURE__ */ React.createElement(SidebarItem, { text: \"Settings\", to: routePath(), icon: Icon });\n};\n\nconst USER_SETTINGS_TAB_KEY = LAYOUT_ROUTE_DATA_KEY;\nconst UserSettingsTab = (props) => /* @__PURE__ */ React.createElement(SettingsLayout.Route, { path: props.path, title: props.title }, /* @__PURE__ */ React.createElement(React.Fragment, null, \"props.children\"));\nattachComponentData(UserSettingsTab, USER_SETTINGS_TAB_KEY, \"UserSettingsTab\");\n\nexport { Settings, USER_SETTINGS_TAB_KEY, UserSettingsStorage, UserSettingsTab };\n//# sourceMappingURL=index.esm.js.map\n","import { createContext, useContext } from 'react';\n\nfunction getGlobalObject() {\n  if (typeof window !== \"undefined\" && window.Math === Math) {\n    return window;\n  }\n  if (typeof self !== \"undefined\" && self.Math === Math) {\n    return self;\n  }\n  return Function(\"return this\")();\n}\nconst globalObject = getGlobalObject();\nconst makeKey = (id) => `__@backstage/${id}__`;\nfunction getOrCreateGlobalSingleton(id, supplier) {\n  const key = makeKey(id);\n  let value = globalObject[key];\n  if (value) {\n    return value;\n  }\n  value = supplier();\n  globalObject[key] = value;\n  return value;\n}\n\nfunction createVersionedValueMap(versions) {\n  Object.freeze(versions);\n  const versionedValue = {\n    atVersion(version) {\n      return versions[version];\n    }\n  };\n  Object.defineProperty(versionedValue, \"$map\", {\n    configurable: true,\n    enumerable: true,\n    get() {\n      return versions;\n    }\n  });\n  return versionedValue;\n}\n\nfunction createVersionedContext(key) {\n  return getOrCreateGlobalSingleton(\n    key,\n    () => createContext(void 0)\n  );\n}\nfunction useVersionedContext(key) {\n  return useContext(createVersionedContext(key));\n}\nfunction createVersionedContextForTesting(key) {\n  return {\n    set(versions) {\n      globalThis[`__@backstage/${key}__`] = createContext(\n        createVersionedValueMap(versions)\n      );\n    },\n    reset() {\n      delete globalThis[`__@backstage/${key}__`];\n    }\n  };\n}\n\nexport { createVersionedContext, createVersionedContextForTesting, createVersionedValueMap, getOrCreateGlobalSingleton, useVersionedContext };\n//# sourceMappingURL=index.esm.js.map\n"],"names":["__v5Spacing","defaultSpacing","argsInput","args","transform","argument","themeSpacing","output","adaptV5CssBaselineOverride","theme","overrides","styles","adaptV5Override","_theme","className","style","stateStyleKeyPattern","extractV5StateOverrides","_styleKey","styleKey","match","state","stateStyles","restStyles","transformV5ComponentThemesToV4","components","props","name","component","shapes","colorVariants","genPageTheme","_a","colors","shape","options","gradient","backgroundImage","fontColor","pageTheme","DEFAULT_HTML_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_PAGE_THEME","createBaseThemeOptions","palette","htmlFontSize","fontFamily","defaultPageTheme","pageTheme$1","typography","defaultTypography","themeId","defaultComponentThemes","__accessCheck","obj","member","msg","__privateGet","getter","__privateAdd","value","__privateSet","setter","_themes","UnifiedThemeHolder","v4","v5","version","createUnifiedTheme","themeOptions","v5Theme","v4Overrides","v4Theme","createTheme","createUnifiedThemeFromV4","palettes","themes","componentName","generateV4ClassName","createGenerateClassName","UnifiedThemeProvider","children","noCssBaseline","cssBaseline","CssBaseline","result","StylesProvider","ThemeProvider","StyledEngineProvider","createThemeOptions","_b","_c","_d","createThemeOverrides","baseTheme","lightTheme","darkTheme","apis","configApi","alertApi","errorApi","identityApi","discoveryApi","oauthRequestApi","config","discovery","identity","OptionallyWrapInRouter","DefaultNotFoundPage","DefaultBootErrorPage","step","error","message","DefaultErrorBoundaryFallback","resetError","plugin","Button","icons","createApp","CATALOG_FILTER_EXISTS","isQueryEntitiesInitialRequest","request","__defProp","__defNormalProp","key","__publicField","CatalogClient","kind","namespace","id","filter","fields","order","offset","limit","after","params","directive","query","entities","refCompare","a","b","aRef","bRef","body","url","response","items","i","orderFields","fullTextFilter","field","normalizedFullTextFilterTerm","cursor","entityRef","compoundName","facets","facet","type","target","dryRun","location","exists","locationRef","r","l","uid","entity","errors","method","path","headers","filterItem","filterParts","v","ENTITY_STATUS_CATALOG_PROCESSING_TYPE","isApiEntity","isComponentEntity","isDomainEntity","isGroupEntity","isLocationEntity","isResourceEntity","isSystemEntity","isUserEntity","DEFAULT_NAMESPACE","ANNOTATION_VIEW_URL","ANNOTATION_EDIT_URL","ANNOTATION_KUBERNETES_API_SERVER","ANNOTATION_KUBERNETES_API_SERVER_CA","ANNOTATION_KUBERNETES_AUTH_PROVIDER","__defProp$4","__defNormalProp$4","__publicField$4","DefaultNamespaceEntityPolicy","parseRefString","ref","colonI","slashI","getCompoundEntityRef","parseEntityRef","context","defaultKind","defaultNamespace","parsed","textual","stringifyEntityRef","__defProp$3","__defNormalProp$3","__publicField$3","GroupDefaultParentEntityPolicy","parentEntityRef","group","CommonValidatorFunctions","separator","isValidPrefix","isValidSuffix","parts","$schema$b","$id$b","description$b","examples$a","type$3","required$2","additionalProperties$2","properties$2","entityEnvelopeSchema","$schema$a","$id$a","description$a","examples$9","type$2","required$1","additionalProperties$1","properties$1","entitySchema","$schema$9","$id$9","description$9","examples$8","type$1","required","additionalProperties","properties","entityMetaSchema","$schema$8","$id$8","description$8","definitions","commonSchema","compiledSchemaCache","refDependencyCandidates","throwAjvError","val","compileAjvSchema","schema","disableCache","cacheKey","cached","extraSchemas","getExtraSchemas","ajv","compiled","seen","selected","todo","current","getAllRefs","c","entityEnvelopeSchemaValidator","validate","data","entityKindSchemaValidator","softCandidates","e","entitySchemaValidator","KubernetesValidatorFunctions","n","defaultValidators","makeValidator","__defProp$2","__defNormalProp$2","__publicField$2","FieldFormatEntityPolicy","validators","_e","_f","_g","require2","validator","isValid","expectation","optional","k","tags","links","__defProp$1","__defNormalProp$1","__publicField$1","defaultKnownFields","NoForeignRootFieldsEntityPolicy","knownFields","SchemaValidEntityPolicy","AllEntityPolicies","policies","policy","AnyEntityPolicy","EntityPolicies","$schema$7","$id$7","description$7","examples$7","allOf$7","schema$7","ajvCompiledJsonSchemaValidator","apiEntityV1alpha1Validator","$schema$6","$id$6","description$6","examples$6","allOf$6","schema$6","componentEntityV1alpha1Validator","$schema$5","$id$5","description$5","examples$5","allOf$5","schema$5","domainEntityV1alpha1Validator","$schema$4","$id$4","description$4","examples$4","allOf$4","schema$4","groupEntityV1alpha1Validator","$schema$3","$id$3","description$3","examples$3","allOf$3","schema$3","locationEntityV1alpha1Validator","RELATION_OWNED_BY","RELATION_OWNER_OF","RELATION_CONSUMES_API","RELATION_API_CONSUMED_BY","RELATION_PROVIDES_API","RELATION_API_PROVIDED_BY","RELATION_DEPENDS_ON","RELATION_DEPENDENCY_OF","RELATION_PARENT_OF","RELATION_CHILD_OF","RELATION_MEMBER_OF","RELATION_HAS_MEMBER","RELATION_PART_OF","RELATION_HAS_PART","$schema$2","$id$2","description$2","examples$2","allOf$2","schema$2","resourceEntityV1alpha1Validator","$schema$1","$id$1","description$1","examples$1","allOf$1","schema$1","systemEntityV1alpha1Validator","$schema","$id","description","examples","allOf","userEntityV1alpha1Validator","ANNOTATION_LOCATION","ANNOTATION_ORIGIN_LOCATION","ANNOTATION_SOURCE_LOCATION","scriptProtocolPattern","parseLocationRef","splitIndex","stringifyLocationRef","getEntitySourceLocation","propsOfHumanDuration","readDurationFromConfig","root","found","prop","good","p","invalidProps","what","bad","prefix","CONFIG_KEY_PART_PATTERN","isObject","typeOf","typeName","expected","ConfigReader","fallback","configs","previousReader","filteredKeys","deprecatedKeys","reader","localKeys","fallbackKeys","fallbackValue","into","from","fallbackConfig","values","index","number","valueString","keyName","theValue","part","badKey","__defProp$l","__defNormalProp$l","__publicField$l","ApiAggregator","holders","apiRef","holder","api","ApiContext","ApiProvider","parentHolder","__defProp$k","__defNormalProp$k","__publicField$k","ApiResolver","factories","heap","allDeps","factory","dep","loading","impl","deps","dependent","impls","__defProp$j","__defNormalProp$j","__publicField$j","ScopePriority","ScopePriority2","ApiFactoryRegistry","scope","priority","existing","tuple","refs","showLoginPopup","resolve","reject","width","height","left","top","popup","targetOrigin","messageListener","event","authResult","done","intervalId","errMessage","__defProp$i","__defNormalProp$i","__publicField$i","warned$1","defaultJoinScopes","scopes","DefaultAuthConnector","environment","provider","joinScopes","sessionTransform","popupOptions","res","authInfo","_h","popupUrl","payload","baseUrl","queryString","__defProp$h","__defNormalProp$h","__publicField$h","DirectAuthConnector","hasScopes$1","searched","searchFor","SessionScopeHelper","session","sessionScopes","newScope","__defProp$g","__defNormalProp$g","__publicField$g","PublishSubject","subscriber","onNext","onError","onComplete","observer","BehaviorSubject","__defProp$f","__defNormalProp$f","__publicField$f","SessionStateTracker","isSignedIn","__defProp$e","__defNormalProp$e","__publicField$e","RefreshingAuthSessionManager","connector","defaultScopes","sessionShouldRefresh","refreshedSession","currentScopes","refreshedScopes","newSession","__defProp$d","__defNormalProp$d","__publicField$d","StaticAuthSessionManager","__defProp$c","__defNormalProp$c","__publicField$c","AuthSessionStore","manager","storageKey","sessionJson","_key","__defProp$b","__defNormalProp$b","__publicField$b","DEFAULT_PROVIDER$a","OAuth2","scopeTransform","x","backstageIdentity","expInSec","sessionManager","min","normalizedScopes","scopeList","DEFAULT_PROVIDER$9","GithubAuth","DEFAULT_PROVIDER$8","GitlabAuth","DEFAULT_PROVIDER$7","SCOPE_PREFIX$1","GoogleAuth","DEFAULT_PROVIDER$6","OKTA_OIDC_SCOPES","OKTA_SCOPE_PREFIX","OktaAuth","samlSessionSchema","DEFAULT_PROVIDER$5","SamlAuth","authSessionStore","__defProp$a","__defNormalProp$a","__publicField$a","DEFAULT_PROVIDER$4","_MicrosoftAuth","audiences","aud","audience","groups","resourceURI","MicrosoftAuth","DEFAULT_PROVIDER$3","OIDC_SCOPES","SCOPE_PREFIX","OneLoginAuth","DEFAULT_PROVIDER$2","BitbucketAuth","DEFAULT_PROVIDER$1","BitbucketServerAuth","DEFAULT_PROVIDER","AtlassianAuth","__defProp$9","__defNormalProp$9","__publicField$9","AlertApiForwarder","alert","MultipleAnalyticsApi","actualApis","analyticsApi","NoOpAnalyticsApi","_event","__defProp$8","__defNormalProp$8","__publicField$8","STORAGE_KEY$1","AppThemeSelector","selector","initialThemeId","_a2","ERROR_PREFIX","UrlPatternDiscovery","pattern","urlStr","pluginId","FrontendHostDiscovery","endpoints","defaultEndpoint","endpoint","ErrorAlerter","__defProp$7","__defNormalProp$7","__publicField$7","ErrorApiForwarder","UnhandledErrorForwarder","errorContext","__defProp$6","__defNormalProp$6","__publicField$6","validateFlagName","LocalStorageFeatureFlags","flag","enabled","jsonStr","json","entries","createFetchApi","middleware","m","IdentityAuthInjectorFetchMiddleware","allowUrl","headerName","headerValue","matcher","buildMatcher","token","next","input","init","buildPrefixMatcher","prefixes","trimmedPrefixes","join","right","PluginProtocolResolverFetchMiddleware","hostname","pathname","search","hash","username","password","base","authority","isUrl","FetchMiddlewares","__defProp$5","__defNormalProp$5","__publicField$5","hasScopes","moreScopess","moreScopes","OAuthPendingRequests","acc","reason","OAuthRequestManager","handler","scopeRequest","newRequests","buckets","_WebStorage","bucketPath","webStorage","presence","item","messageKey","eventKey","trimmedKey","snapshot","subscription","WebStorage","InternalAppContext","isReactRouterBeta","getExtensionContext","routes","matches","routeMatch","routeObject","routeRef","TrackNavigation","attributes","analytics","RouteTracker","routeObjects","getBasePath","readBasePath","SignInPageWrapper","Component","appIdentityProxy","setIdentityApi","basePath","AppRouter","RouterComponent","SignInPageComponent","mountPath","internalAppContext","traverseElementTree","collectors","queue","node","parent","contexts","element","nextContexts","collector","discoverer","createCollector","accumulatorFactory","visit","childDiscoverer","routeElementDiscoverer","pluginCollector","FeatureFlagged","featureFlagApi","isEnabled","MATCH_ALL_ROUTE","stringifyNode","anyNode","pluginSet","set","collectSubTree","routingV2Collector","ctx","pathProp","mountPoint","parentChildren","elementProp","newObj","extension","others","mountPointPlugin","routingV1Collector","currentObj","currentParentRouteRef","sticky","caseSensitive","currentCtxPath","routePath","featureFlagCollector","routeRefType","isRouteRef","isSubRouteRef","isExternalRouteRef","joinPaths","paths","normalized","resolveTargetRef","anyRouteRef","routePaths","routeBindings","targetRef","subRoutePath","resolvedRoute","resolvedPath","targetPath","resolveBasePath","sourceLocation","routeParents","refDiffList","matchIndex","targetSearchRef","parentPath","diffPaths","RouteResolver","appBasePath","relativeSourceLocation","encodedParams","RoutingContext","RoutingProvider","resolver","versionedValue","validateRouteParameters","notLeafRoutes","route","currentRouteRef","fullPath","j","validateRouteBindings","plugins","externalRouteRef","AppContext","AppContextProvider","appContext","mkError","thing","logDeprecation","AppIdentityProxy","targetOptions","resolveTheme","shouldPreferDark","selectedTheme","useShouldPreferDarkTheme","mediaQuery","setPrefersDark","listener","AppThemeProvider","appThemeApi","useObservable","appTheme","defaultConfigLoader","defaultConfigLoaderSync","runtimeConfigJson","appConfig","windowAppConfig","ApiRegistryBuilder","ApiRegistry","resolveRouteBindings","bindRoutes","externalRoutes","targetRoutes","externalRoute","__accessCheck$2","__privateGet$2","__privateAdd$2","__privateSet$2","_languages","_language$1","_subject","STORAGE_KEY","DEFAULT_LANGUAGE","_AppLanguageSelector","languages","initialLanguage","storedLanguage","language","lng","AppLanguageSelector","toInternalTranslationResource","resource","toInternalTranslationRef","__accessCheck$1","__privateGet$1","__privateAdd$1","__privateSet$1","__privateMethod","_loaded","_loading","_loaders","_getLoaderKey","getLoaderKey_fn","_i18n","_loader","_language","_registeredRefs","_languageChangeListeners","_changeLanguage","changeLanguage_fn","_createSnapshot","createSnapshot_fn","_registerDefaults","registerDefaults_fn","removeNulls","messages","ResourceLoader","onLoad","internalResource","entry","loader","load","_I18nextTranslationApi","i18n","loaded","resources","instance","translationRef","internalRef","loadTicket","loadResource","ticket","onChange","defaultMessages","defaultResource","I18nextTranslationApi","createLocalBaseUrl","fullUrl","overrideBaseUrlConfigs","inputConfigs","urlConfigReader","appBaseUrl","backendBaseUrl","newBackendBaseUrl","newAppBaseUrl","appOrigin","backendOrigin","maybeNewBackendBaseUrl","maybeNewAppBaseUrl","_getProviderCalled","useConfigLoader","configLoader","hasConfig","useAsync","noConfigNode","Progress","BootErrorPage","AppContextImpl","app","AppManager","_i","AppProvider","routesHaveBeenValidated","needsFeatureFlagRegistrationRef","routing","featureFlags","loadedConfig","hasConfigApi","featureFlagsApi","registeredFlags","flagNames","f","languageApi","pluginIds","createSpecializedApp","warned","FlatRoutes","NotFoundErrorPage","isBeta","withNotFound","elements","child","AlertDisplay","setMessages","anchorOrigin","transientTimeoutMs","timeoutMs","msgs","firstMessage","timeout","newMsgs","handleClose","Snackbar","Alert","Close","LAST_SEEN_ONLINE_STORAGE_KEY","useLogoutDisconnectedUserEffect","enableEffect","autologoutIsEnabled","idleTimeoutSeconds","lastSeenOnlineStore","lastSeenOnline","nowSeconds","lastSeenOnlineSeconds","StillTherePrompt","idleTimer","setOpen","open","promptTimeoutMillis","remainingTime","setRemainingTime","interval","handleStillHere","seconds","DefaultTimestampStore","date","timestamp","ConditionalAutoLogout","idleTimeoutMinutes","events","useWorkerTimers","logoutIfDisconnected","promptBeforeIdleSeconds","promptOpen","setPromptOpen","remainingTimeCountdown","setRemainingTimeCountdown","promptBeforeIdleMillis","promptBeforeIdle","onPrompt","onIdle","onActive","onAction","_idleTimer","timer","defaultConfig","defaultTrackedEvents","parseConfig","_j","AutoLogout","isLogged","setIsLogged","isLoggedIn","stringToColor","str","color","extractInitials","names","firstName","lastName","useStyles$O","makeStyles","displayName","picture","customStyles","classes","fontStyles","useStyles$N","isExternalUri","uri","originalWindowOpen","newOpen","useBaseUrl","useBasePath","useResolvedPath","external","startsWithBasePath","getNodeText","onClick","noTrack","to","linkText","newWindow","handleClick","LinkWrapper","LinkButton","CopyTextButton","text","tooltipDelay","tooltipText","ariaLabel","copyToClipboard","useCopyToClipboard","handleCopyClick","CodeSnippet","showLineNumbers","highlightedNumbers","customStyle","showCopyCodeButton","mode","dark","docco","highlightColor","lineNumber","CreateButton","title","isXSScreen","AddCircleOutline","DependencyGraphTypes","DependencyGraphTypes2","Direction2","Alignment2","Ranker2","LabelPosition2","useStyles$M","DefaultNode","setWidth","setHeight","idRef","renderedHeight","renderedWidth","padding","paddedWidth","paddedHeight","ARROW_MARKER_ID","NODE_TEST_ID","EDGE_TEST_ID","LABEL_TEST_ID","useStyles$L","renderDefault$1","Node","render","setNode","y","nodeProps","nodeRef","useStyles$K","DefaultLabel","label","useStyles$J","renderDefault","Edge","setEdge","edge","curve","points","labelProps","labelRef","createPath","d","finitePoints","point","WORKSPACE_ID","DependencyGraph","edges","nodes","renderNode","direction","align","nodeMargin","edgeMargin","rankMargin","paddingX","paddingY","acyclicer","ranker","labelPosition","labelOffset","edgeRanks","edgeWeight","renderLabel","defs","zoom","fit","svgProps","containerWidth","setContainerWidth","containerHeight","setContainerHeight","graph","graphWidth","setGraphWidth","graphHeight","setGraphHeight","graphNodes","setGraphNodes","graphEdges","setGraphEdges","maxWidth","maxHeight","minHeight","scalableHeight","containerRef","container","workspace","enableZoom","newContainerWidth","newContainerHeight","setNodesAndEdges","currentGraphNodes","currentGraphEdges","nodeId","existingNode","updateGraph","newHeight","newWidth","useStyles$I","DismissableBanner","variant","fixed","notificationsStore","rawDismissedBanners","dismissedBanners","setDismissedBanners","observedItems","currentValue","SnackbarContent","useStyles$H","EmptyStateImage","missing","useStyles$G","EmptyState","action","COMPONENT_YAML_TEMPLATE","ANNOTATION_REGEXP","ANNOTATION_YAML","ANNOTATION_LINE","line","useStyles$F","generateLineNumbers","lineCount","generateComponentYaml","annotations","annotationYaml","ann","generateDescription","isSingular","prev","curr","MissingAnnotationEmptyState","annotation","readMoreUrl","useStyles$E","flatten","headingRenderer","level","slug","inline","MarkdownContent","content","dialect","linkTarget","transformLinkUri","transformImageUri","getWarningTextColor","severity","getWarningBackgroundColor","useErrorOutlineStyles","ErrorOutlineStyled","ErrorOutline","ExpandMoreIconStyled","ExpandMore","useStyles$D","capitalize","s","WarningPanel","titleFormat","defaultExpanded","subTitle","Accordion","AccordionSummary","AccordionDetails","useStyles$C","ErrorList","stack","ErrorPanel","useStyles$B","ResponseErrorPanel","cause","errorString","requestString","messageString","stackString","jsonString","Divider","createRootElement","rootContainer","addRootElement","rootElem","usePortal","rootElemRef","existingParent","parentElem","getRootElem","STATES_LOCAL_STORAGE_KEY","useCalloutStates","states","setStates","raw","setState","newStates","useCalloutHasBeenSeen","featureId","markSeen","useShowCallout","useStyles$A","FeatureCalloutCircular","show","hide","portalElement","wrapperRef","placement","setPlacement","update","wrapperBounds","longest","borderWidth","dotLeft","dotTop","dotSize","textWidth","textLeft","textTop","useIconStyles","IconLinkVertical","disabled","href","icon","useStyles$z","HeaderIconLinkRow","link","generateGradientStops","themeType","luminance","fadeSize","fadePadding","useStyles$y","useScrollDistance","scrollLeft","scrollRight","setScroll","el","handleUpdate","useSmoothScroll","speed","minDistance","scrollTarget","setScrollTarget","startTime","frameTime","frameDuration","scrollDistance","scrollAmount","newScrollTarget","HorizontalScrollGrid","scrollStep","scrollSpeed","minScrollDistance","otherProps","handleScrollClick","forwards","useStyles$x","Lifecycle","shorthand","alpha","RealLogViewer","LogViewer","useItemStyles","LoginRequestListItem","busy","setBusy","setError","handleContinue","IconComponent","ListItemAvatar","useStyles$w","OAuthRequestDialog","_props","authRedirect","requests","handleRejectAll","useStyles$v","OverflowTooltip","hover","setHover","isMounted","useIsMounted","handleToggled","truncated","isVisible","setIsVisible","handle","LinearProgress","useStyles$u","BottomLink","SlackLink","slackChannel","ErrorBoundary","errorInfo","useStyles$t","CardActionsTopRight","withStyles","VARIANT_STYLES","InfoCard","subheader","divider","deepLink","errorBoundaryProps","headerStyle","headerProps","actionsClassName","actions","cardClassName","actionsTopRight","noPadding","titleTypographyProps","calculatedStyle","calculatedCardStyle","cardSubTitle","errProps","CardHeader","useStyles$s","defaultGaugeProps","getProgressColor","inverse","max","actualMax","actualValue","Gauge","hoverRef","setHoverRef","getColor","fractional","unit","asPercentage","asActual","isHovering","setIsHovering","handleMouseOver","handleMouseOut","useStyles$r","GaugeCard","progress","gaugeProps","LinearGauge","percent","lineWidth","strokeColor","useStyles$q","createStyles","ClosedDropdown","SvgIcon","useStyles$p","OpenedDropdown","BootstrapInput","InputBase","useStyles$o","SelectComponent","multiple","placeholder","triggerReset","native","margin","setValue","isOpen","handleChange","handleOpen","previous","handleDelete","selectedValue","newValue","chip","FormControl","InputLabel","Select","MenuItem","Checkbox","noop","VerticalStepperContext","SimpleStepper","elevated","onStepChange","activeStep","stepIndex","setStepIndex","stepHistory","setStepHistory","steps","endStep","useStyles$n","RestartBtn","NextBtn","last","SkipBtn","BackBtn","SimpleStepperFooter","stepperLength","newIndex","callback","handleNext","handleBack","handleRestart","useStyles$m","SimpleStepperStep","end","muiProps","useStyles$l","StatusOK","StatusWarning","StatusError","StatusPending","StatusRunning","StatusAborted","tableTitleCellStyles","tableContentCellStyles","listStyles","listItemStyles","TitleCell","TableCell","ContentCell","MetadataTable","dense","Table","TableBody","MetadataTableItem","rest","TableRow","MetadataList","MetadataListItem","listStyle","nestedListStyle","StyledList","StyledNestedList","renderList","list","nested","toValue","renderMap","map","ItemValue","TableItem","mapToItems","info","StructuredMetadataTable","metadata","metadataItems","stringify","queryParams","parse","extractState","stateName","joinQueryString","useQueryParamState","debounceTime","searchParams","setSearchParams","searchParamsString","queryParamState","setQueryParamState","newState","oldState","DEFAULT_SUPPORT_CONFIG","useSupportConfig","supportConfig","itemConf","linkConf","useSystemIcon","Icon","BrokenImageIcon","CatalogIcon","ChatIcon","DashboardIcon","DocsIcon","EmailIcon","GitHubIcon","GroupIcon","HelpIcon","UserIcon","WarningIcon","useStyles$k","SupportIcon","SupportLink","SupportListItem","idx","SupportButton","configItems","popoverOpen","setPopoverOpen","anchorEl","setAnchorEl","isSmallScreen","onClickHandler","popoverCloseHandler","MenuList","useStyles$j","Content","stretch","restProps","useStyles$i","HeaderTabs","tabs","selectedIndex","selectedTab","setSelectedTab","_","Tabs","tab","Tab","useSelectedSubRoute","subRoutes","sortedRoutes","currentRoute","matchedRoute","foundIndex","t","RoutedTabs","navigate","headerTabs","onTabChange","tabIndex","Helmet","Route","createSubRoutesFromChildren","childrenProps","routeType","tabProps","TabbedLayout","useSubvalueCellStyles","SubvalueCell","subvalue","useFilterStyles$1","Filters","onChangeFilters","selectedFilters","setSelectedFilters","reset","tableIcons","AddBox","Check","Clear","DeleteOutline","Edit","SaveAlt","FilterList","FirstPage","LastPage","ChevronLeft","ArrowUpward","Remove","ViewColumn","extractValueByField","StyledMTableHeader","StyledMTableToolbar","useFilterStyles","useTableStyles","convertColumns","columns","column","cellStyle","cellStyleFn","rowData","rowColumn","removeDefaultValues","defaultState","defaultInitialState","TableToolbar","toolbarProps","toolbarRef","setSearch","hasFilters","selectedFiltersLength","toggleFilters","filtersClasses","onSearchChanged","searchText","subtitle","filters","initialState","emptyContent","onStateChange","isLoading","tableClasses","calculatedInitialState","filtersOpen","setFiltersOpen","setSelectedFiltersLength","tableData","setTableData","MTColumns","defaultOptions","getFieldByTitle","titleValue","selectedFiltersArray","newData","filterValue","fieldValue","constructFilters","filterConfig","dataValue","extractDistinctValues","distinctValues","addValue","constructSelect","Toolbar","hasNoRows","columnCount","Body","bodyProps","CircularProgress","lastNum","TrendLine","useStyles$h","ContentHeaderTitle","ContentHeader","TitleComponent","textAlign","renderedTitle","useStyles$g","MicDrop","useStyles$f","ErrorPage","status","statusMessage","additionalInfo","supportUrl","support","ClickableText","StyledBox","childrenArray","firstPage","secondPage","expandablePages","currentPage","hasHiddenBreadcrumbs","pageLink","drawerWidthClosed","iconPadding","userBadgePadding","sidebarConfig","makeSidebarConfig","customSidebarConfig","submenuConfig","makeSidebarSubmenuConfig","customSubmenuConfig","SIDEBAR_INTRO_LOCAL_STORAGE","SidebarConfigContext","SidebarItemWithSubmenuContext","defaultSidebarOpenStateContext","LegacySidebarContext","VersionedSidebarContext","SidebarOpenStateProvider","useSidebarOpenState","versionedOpenStateContext","legacyOpenStateContext","openStateContext","MobileSidebarContext","defaultSidebarPinStateContext","LegacySidebarPinStateContext","VersionedSidebarPinStateContext","SidebarPinStateProvider","useSidebarPinState","versionedPinStateContext","legacyPinStateContext","pinStateContext","useStyles$e","MobileSidebarGroup","selectedMenuItemIndex","setSelectedMenuItemIndex","value2","BottomNavigationAction","SidebarGroup","isMobile","useStyles$d","sortSidebarGroupsForPriority","sidebarGroupType","OverlayMenu","onClose","Drawer","MobileSidebar","sidebarGroups","Menu","shouldShowGroupChildren","BottomNavigation","LocalStorage","useStyles$c","PageContext","SidebarPage","isPinned","setIsPinned","contentRef","pageContext","toggleSidebarPinState","useContent","useStyles$b","DesktopSidebar","openDelayMs","closeDelayMs","disableExpandOnHover","hoverTimerRef","A11ySkipSidebar","Sidebar","focusContent","isLocationMatch","currentLocation","toLocation","exact","toDecodedSearch","toQueryParameters","currentDecodedSearch","currentQueryParameters","queryStringMatcher","useStyles$a","SidebarSubmenuItem","dropdownItems","setIsHoveredOn","closeSubmenu","isActive","showDropDown","setShowDropDown","handleClickDropdown","ArrowDropUp","ArrowDropDown","object","useStyles$9","SidebarSubmenu","isHoveredOn","isSubmenuOpen","setIsSubmenuOpen","useStyles$8","DoubleArrowLeft","useStyles$7","DoubleArrowRight","makeSidebarStyles","useMemoStyles","useLocationMatch","submenu","active","_to","isButtonItem","sidebarSubmenuType","WorkaroundNavLink","activeStyle","activeClassName","ariaCurrentProp","locationPathname","toPathname","ariaCurrent","SidebarItemBase","hasNotifications","hasSubmenu","disableHighlight","navLinkProps","divStyle","displayItemIcon","ArrowRight","itemIcon","Badge","openContent","childProps","subject","SidebarItemWithSubmenu","handleMouseEnter","handleMouseLeave","arrowIcon","SidebarItem","SidebarSearchField","setInput","handleEnter","ev","handleInput","handleInputClick","handleItemClick","SidebarSpace","styled","SidebarSpacer","SidebarDivider","styledScrollbar","SidebarScrollWrapper","scrollbarStyles","SidebarExpandButton","useStyles$6","IntroCard","SidebarIntroCard","onDismiss","collapsing","setCollapsing","startDismissing","starredIntroText","recentlyViewedIntroText","SidebarIntro","defaultValue","dismissedIntro","setDismissedIntro","starredItemsDismissed","recentlyViewedItemsDismissed","dismissStarred","dismissRecentlyViewed","useStyles$5","TypeFragment","typeLink","pageTitle","TitleFragment","tooltip","FinalTitle","SubtitleFragment","Header","pageTitleOverride","appTitle","documentTitle","titleTemplate","defaultTitle","ActionItem","secondaryLabel","HeaderActionMenu","white","actionItems","anchorElRef","actionItem","useStyles$4","HeaderLabelContent","typographyRootComponent","HeaderLabel","contentTypograpyRootComponent","styles$1","useStyles$3","ItemCardHeader","ItemCard","tag","useStyles$2","ItemCardGrid","useStyles$1","Page","PageWithHeader","proxiedSessionSchema","DEFAULTS","tokenToExpiry","jwtToken","_header","rawPayload","_signature","ProxiedSignInIdentity","promise","mergedHeaders","ProxiedSignInPage","execute","GuestUserIdentity","userEntityRef","parseJwtPayload","LegacyUserIdentity","sub","ent","UserIdentity","authApi","profile","ex","useStyles","GridItem","commonProvider","onSignInStarted","onSignInSuccess","onSignInFailure","handleLogin","identityResponse","guestProvider","ID_TOKEN_REGEX","useFormStyles","asInputRef","renderResult","customProvider","register","handleSubmit","formState","handleResult","userId","idToken","FormHelperText","IdentityApiSignOutProxy","PROVIDER_STORAGE_KEY","signInProviders","validateIDs","providers","getSignInProviders","identityProviders","useSignInProviders","apiHolder","setLoading","handleWrappedResult","selectedProviderId","didCancel","handleSignInSuccess","handleSignInStarted","handleSignInFailure","MultiSignInPage","providerElements","SingleSignInPage","auto","showLoginPage","setShowLoginPage","login","checkExisting","showPopup","err","SignInPage","useTabsStyles","BoldHeader","TabbedCard","tabsClasses","selectIndex","_ev","newSelectedIndex","selectedTabContent","useCardTabStyles","CardTab","createTranslationMessages","createTranslationResource","_id$1","_messages","_resources","TranslationRefImpl","createTranslationRef","translationApiRef","appLanguageApiRef","loggedRefs","useTranslationRef","translationApi","setSnapshot","observable","errMsg","initialRenderRef","MESSAGE_MARKER","describeParentCallSite","ErrorConstructor","startIndex","secondEntryStart","secondEntryEnd","_id","_params$1","_creationSite","_name","name_get","toInternalRouteRef","RouteRefImpl","creationSite","createRouteRef","_params","_parent","PARAM_PATTERN","toInternalSubRouteRef","SubRouteRefImpl","createSubRouteRef","parentParams","pathParams","param","toInternalExternalRouteRef","ExternalRouteRefImpl","createExternalRouteRef","convertLegacyRouteRef","legacyRef","newRef","useApiHolder","versionedHolder","useApi","withApis","WrappedComponent","Hoc","ApiRefImpl","createApiRef","SessionState","SessionState2","googleAuthApiRef","githubAuthApiRef","oktaAuthApiRef","gitlabAuthApiRef","microsoftAuthApiRef","oneloginAuthApiRef","bitbucketAuthApiRef","bitbucketServerAuthApiRef","atlassianAuthApiRef","alertApiRef","analyticsApiRef","appThemeApiRef","configApiRef","discoveryApiRef","errorApiRef","FeatureFlagState","FeatureFlagState2","featureFlagsApiRef","fetchApiRef","identityApiRef","oauthRequestApiRef","storageApiRef","AnalyticsReactContext","useAnalyticsContext","theContext","AnalyticsContext","combinedValue","versionedCombinedValue","createApiFactory","globalEvents","routableExtensionRenderedEvent","Tracker","_routeNodeType","useAnalyticsApi","useAnalytics","trackerRef","getTracker","tracker","useApp","versionedContext","globalStore","componentDataKey","attachComponentData","dataComponent","getComponentData","_a$2","_a$1","useRouteRef","routeFunc","isOptional","useRouteRefParams","_routeRef","PluginErrorBoundary","ErrorBoundaryFallback","createRoutableExtension","createReactExtension","InnerComponent","RoutableExtensionWrapper","createComponentExtension","lazyLoader","Result","selectChildren","rootNode","strictError","Collection","selection","useElementFilter","filterFn","dependencies","PluginImpl","createPlugin","isError","maybe","assertError","serializeError","deserializeError","stringifyError","CustomErrorBase","fullMessage","causeStr","InputError","AuthenticationError","NotAllowedError","NotFoundError","ConflictError","NotModifiedError","NotImplementedError","ServiceUnavailableError","ForwardedError","parseErrorResponseBody","ResponseError","statusText","scmAuthApiRef","_providers","_api","_host","_scopeMapping","_providerName","ScmAuthMux","_ScmAuth","providerName","host","scopeMapping","github","gitlab","azure","bitbucket","githubAuthApi","gitlabAuthApi","microsoftAuthApi","bitbucketAuthApi","additionalScopes","additionalScope","restOptions","uniqueScopes","ScmAuth","ScmIntegrationsApi","scmIntegrationsApiRef","ScmIntegrationIcon","DefaultIcon","isValidHost","check","isValidUrl","basicIntegrations","integrations","getHost","defaultScmResolveUrl","updated","filepath","repoRootPath","AMAZON_AWS_HOST","readAwsS3IntegrationConfig","s3ForcePathStyle","accessKeyId","secretAccessKey","roleArn","externalId","readAwsS3IntegrationConfigs","_AwsS3Integration","integrationConfig","AwsS3Integration","_origin","_owner","_project","_repo","_path","_ref","_baseUrl","VERSION_PREFIX_GIT_BRANCH","_AzureUrl","origin","owner","project","repo","repoUrl","AzureUrl","AZURE_HOST","AzureDevOpsCredentialFields","AzureDevopsCredentialFieldMap","asAzureDevOpsCredential","credential","requiredFields","forbiddenFields","readAzureIntegrationConfig","credentialConfigs","mapped","credentials","credentialConfig","organization","indexes","org","readAzureIntegrationConfigs","_AzureIntegration","azureUrl","newUrl","mockBaseUrl","updatedPath","AzureIntegration","getAzureFileFetchUrl","getAzureDownloadUrl","getAzureCommitsUrl","tenMinutes","CachedAzureDevOpsCredentialsProvider","accessToken","DefaultAzureDevOpsCredentialsProvider","integration","opts","getAzureRequestOptions","additionalHeaders","BITBUCKET_HOST","BITBUCKET_API_BASE_URL","readBitbucketIntegrationConfig","apiBaseUrl","appPassword","readBitbucketIntegrationConfigs","_BitbucketIntegration","resolved","urlData","editUrl","BitbucketIntegration","getBitbucketDefaultBranch","repoName","isHosted","branchUrl","getBitbucketRequestOptions","defaultBranch","displayId","getBitbucketDownloadUrl","protocol","branch","getBitbucketFileFetchUrl","filepathtype","pathWithoutSlash","buffer","Buffer","BITBUCKET_CLOUD_HOST","BITBUCKET_CLOUD_API_BASE_URL","readBitbucketCloudIntegrationConfig","readBitbucketCloudIntegrationConfigs","_BitbucketCloudIntegration","BitbucketCloudIntegration","getBitbucketCloudDefaultBranch","getBitbucketCloudRequestOptions","getBitbucketCloudDownloadUrl","getBitbucketCloudFileFetchUrl","readBitbucketServerIntegrationConfig","readBitbucketServerIntegrationConfigs","_BitbucketServerIntegration","BitbucketServerIntegration","getBitbucketServerDefaultBranch","getBitbucketServerRequestOptions","getBitbucketServerDownloadUrl","getBitbucketServerFileFetchUrl","readGerritIntegrationConfig","cloneUrl","gitilesBaseUrl","readGerritIntegrationConfigs","GERRIT_BODY_PREFIX","parseGerritGitilesUrl","baseUrlParse","urlParse","projectEndIndex","branchIndex","filePath","buildGerritGitilesUrl","buildGerritGitilesArchiveUrl","archiveName","getGitilesAuthenticationUrl","getAuthenticationPrefix","getGerritBranchApiUrl","getGerritCloneRepoUrl","getGerritFileContentsApiUrl","getGerritProjectsApiUrl","getGerritRequestOptions","parseGerritJsonResponse","responseBody","_GerritIntegration","GerritIntegration","readGiteaConfig","getGiteaEditContentsUrl","_blank","_src","_branch","getGiteaFileContentsUrl","getGiteaRequestOptions","_GiteaIntegration","giteaConfigs","gitea","GiteaIntegration","GITHUB_HOST","GITHUB_API_BASE_URL","GITHUB_RAW_BASE_URL","readGithubIntegrationConfig","rawBaseUrl","apps","readGithubIntegrationConfigs","getGithubFileFetchUrl","chooseEndpoint","getGitHubRequestOptions","Cache","supplier","existingInstallationData","tokenData","HEADERS","GithubAppManager","installationId","suspended","repositoryNames","installationClient","repos","repository","installation","inst","notFoundError","GithubAppCredentialsMux","ac","results","resultItem","notNotFoundError","_SingleInstanceGithubCredentialsProvider","githubAppCredentialsMux","SingleInstanceGithubCredentialsProvider","DefaultGithubCredentialsProvider","credentialsProviders","credentialsProvider","_GithubIntegration","replaceGithubUrlType","GithubIntegration","getGitHubFileFetchUrl","GitHubIntegration","readGitHubIntegrationConfig","readGitHubIntegrationConfigs","replaceGitHubUrlType","GITLAB_HOST","GITLAB_API_BASE_URL","readGitLabIntegrationConfig","readGitLabIntegrationConfigs","getGitLabIntegrationRelativePath","relativePath","getGitLabFileFetchUrl","projectID","getProjectId","buildProjectUrl","getGitLabRequestOptions","branchAndFilePath","repoIDLookup","_GitLabIntegration","replaceGitLabUrlType","GitLabIntegration","_SingleInstanceGitlabCredentialsProvider","_opts","SingleInstanceGitlabCredentialsProvider","DefaultGitlabCredentialsProvider","readGoogleGcsIntegrationConfig","privateKey","ScmIntegrations","integrationsByType","candidates","filteredCandidates","rootRoute","registerComponentRouteRef","defaultColumns","DefaultApiExplorerPage","initiallySelectedFilter","generatedSubtitle","registerComponentLink","ApiExplorerPage$1","apiDocsConfigRef","PlainApiDefinitionWidget","ApiDefinitionCard","getApiDefinitionWidget","definitionWidget","entityTitle","LazyAsyncApiDefinition","AsyncApiDefinitionWidget","LazyGraphQlDefinition","GraphQlDefinitionWidget","LazyOpenApiDefinition","OpenApiDefinitionWidget","GrpcApiDefinitionWidget","TrpcApiDefinitionWidget","definition","defaultDefinitionWidgets","ApiTypeTitle","apiEntity","TabPanel","other","a11yProps","ApiDefinitionDialog","activeTab","setActiveTab","tabPanelIndex","createSpecApiTypeColumn","ApiDefinitionButton","dialogOpen","setDialogOpen","createApiDefinitionColumn","apiEntityColumns","ConsumedApisCard","presetColumns","HasApisCard","ProvidedApisCard","ConsumingComponentsCard","ProvidingComponentsCard","apiDocsPlugin","definitionWidgets","ApiExplorerPage","EntityApiDefinitionCard","EntityConsumedApisCard","EntityConsumingComponentsCard","EntityProvidedApisCard","EntityProvidingComponentsCard","EntityHasApisCard","RESOURCE_TYPE_CATALOG_ENTITY","catalogEntityReadPermission","catalogEntityCreatePermission","catalogEntityDeletePermission","catalogEntityRefreshPermission","catalogLocationReadPermission","catalogLocationCreatePermission","catalogLocationDeletePermission","catalogPermissions","DefaultRenderLabel","relations","EntityKindIcon","DefaultRenderNode","focused","iconSize","paddedIconWidth","displayTitle","ALL_RELATION_PAIRS","Direction","limiter","useEntityStore","catalogClient","setEntities","updateEntities","cachedEntities","requestedEntities","filteredEntities","asyncState","fetch","outstandingEntities","requestEntities","entityRefs","useEntityRelationGraph","rootEntityRefs","maxDepth","kinds","expectedEntities","processedEntityRefs","nextDepthRefQueue","depth","entityRefQueue","rel","useEntityRelationNodesAndEdges","unidirectional","mergeRelations","onNodeClick","relationPairs","nodesAndEdges","visitedNodes","nodeQueue","pair","EntityRelationsGraph","rootEntityNames","catalogGraphRouteRef","catalogEntityRouteRef","catalogGraphPlugin","EntityCatalogGraphCard","CatalogGraphPage","catalogImportApiRef","getGithubIntegrationConfig","scmIntegrationsApi","getCatalogFilename","getBranchName","CatalogImportClient","catalogFilename","analyzation","locations","repositoryUrl","fileContent","ghConfig","githubIntegrationConfig","octo","branchName","fileName","repoData","formatHttpErrorMessage","parentRef","rootRouteRef","catalogImportPlugin","scmAuthApi","catalogApi","CatalogImportPage","getEntityRelations","relationType","entityNames","NewEntityContext","AsyncEntityProvider","refresh","EntityProvider","useEntity","useAsyncEntity","useMountEffect","effect","useSyncedRef","useUnmountEffect","effectRef","useDebouncedCallback","delay","maxWait","waitTimeout","lastCall","clear","wrapped","useDebouncedEffect","catalogApiRef","entityPresentationApiRef","UNKNOWN_KIND_ICON","Help","DEFAULT_ICONS","Extension","Memory","Business","Apartment","LocationOn","Person","People","LibraryAdd","defaultEntityPresentation","entityOrRef","getParts","shortRef","getShortRef","primary","candidate","secondary","defaultKindLower","defaultNamespaceLower","useUpdatingObservable","updatedValue","useEntityPresentation","entityPresentationApi","presentation","starredEntitiesApiRef","MockStarredEntitiesApi","isScreenSmallerThanBreakpoint","useMediaQuery","theme2","_b2","useTheme","filterDrawerOpen","setFilterDrawerOpen","Grid","CatalogFilterLayout","reduceCatalogFilters","compoundFilter","reduceBackendCatalogFilters","backendCatalogFilters","EntityTagFilter","EntityOwnerFilter","EntityLifecycleFilter","EntityNamespaceFilter","EntityUserFilter","EntityOrphanFilter","EntityTextFilter","UserListFilter","reduceEntityFilters","sourceLocationRef","EntityKindFilter","EntityTypeFilter","words","exactMatch","partialMatch","word","fullRefs","o","ownershipEntityRefs","starredEntityRefs","isOwnedEntity","isStarredEntity","orphan","EntityErrorFilter","EntityListContext","EntityListProvider","useMountedState","requestedFilters","setRequestedFilters","queryParameters","outputState","setOutputState","compacted","entityFilter","backendFilter","previousBackendFilter","oldParams","newParams","useDebounce","updateFilters","prevFilters","newFilters","useEntityList","useEntityTypeFilter","kindFilter","typeFilter","typeParameter","flattenedQueryTypes","selectedTypes","setSelectedTypes","availableTypes","setAvailableTypes","facetsRef","oldFacets","newTypes","stillValidTypes","useRelatedEntities","relationFilter","filterByTypeLower","filterByKindLower","getEntityRef$1","useStarredEntities","starredEntitiesApi","starredEntities","toggleStarredEntity","getEntityRef","useStarredEntity","setIsStarredEntity","useEntityOwnership","myOwnerRefs","entityOwnerRefs","useAllKinds","allKinds","filterKinds","allowedKinds","forcedKinds","availableKinds","useEntityKindFilter","kindParameter","queryParamKind","selectedKind","setSelectedKind","EntityKindPicker","hidden","initialFilter","icon$2","CheckBoxOutlineBlank","checkedIcon$2","CheckBox","OptionCheckbox","EntityAutocompletePickerOption","availableOptions","showCounts","FormControlLabel","EntityAutocompletePickerInput","TextField","EntityAutocompletePicker","Filter","InputProps","initialSelectedOptions","queryParameter","availableValues","count","selectedOptions","setSelectedOptions","shouldAddFilter","Autocomplete","option","EntityLifecyclePicker","humanizeEntityRef","humanizeEntity","defaultName","useFacetsEntities","facetsPromise","start","decodeCursor","filteredRefs","filterEntity","encodeCursor","isFacetsResponse","normalizedText","useQueryEntities","initialRequest","cursorRequest","response2","useFetchEntities","initialSelectedOwnersRefs","isOwnersOnlyMode","queryEntitiesResponse","facetsEntitiesResponse","handleFetch","useSelectedOwners","allEntities","icon$1","checkedIcon$1","EntityOwnerPicker","ownersParameter","setText","queryParamOwners","selectedOwners","setSelectedOwners","cache","availableOwners","owners","isGroup","Group","EntityDisplayName","hideIcon","disableTooltip","primaryTitle","secondaryTitle","entityRouteRef","entityRouteParams","EntityRefLink","linkProps","entityRoute","useEntityRoute","routeParams","EntityRefLinks","hideIcons","entityRefString","EntityCardActions","EmailCardAction","GroupCardActions","email","UserCardActions","maxTagChips","EntityPeekAheadPopover","delayTime","popupState","isHovered","setIsHovered","debouncedHandleMouseEnter","retrievedEntity","handleOnMouseLeave","EntitySearchBar","Input","InputAdornment","Search","columnFactories","formatContent","entity1","entity2","relation","getRelations","systemEntityColumns","componentEntityColumns","EntityTable","tableOptions","tableStyle","EntityTagPicker","EntityTypePicker","YellowStar","Star","FavoriteEntity","StarBorder","DEFAULT_ICON","Work","getKind","useIcon","actualKind","useAncestry","currentRef","isRootNode","CustomNode","AncestryPage","DialogContentText","ListItemText","ListSubheader","Container","findLink","KeyValueListItem","ListItem","ListItemIcon","HelpOutline","useColocated","currentEntityRef","colocated","EntityList","List","Contents$1","originLocation","colocatedEntities","atLocation","atOrigin","ColocatedPage","sortKeys","JsonPage","OverviewPage","apiVersion","spec","groupedRelations","ListItemSecondaryAction","groupRelations","YamlPage","InspectEntityDialog","Dialog","DialogTitle","DialogContent","DialogActions","useUnregisterEntityDialogState","isBootstrap","prerequisites","locationPromise","colocatedEntitiesPromise","locationAnnotationFilter","location2","colocatedEntities2","unregisterLocation","deleteEntity","Contents","onConfirm","showDelete","setShowDelete","onUnregister","onDelete","entityName","DialogActionsPanel","UnregisterEntityDialog","useOwnedEntitiesCount","loadingEntityRefs","prevRequest","user","allFilters","allFilter","filter2","countFilter","getOwnedCountClaims","newRequest","loadingEntityOwnership","fetchEntities","req","ownershipEntityRefsParam","totalItems","ownersRefs","commonOwnedBy","useAllEntitiesCount","useStarredEntitiesCount","getFilterGroups","orgName","Settings","UserListPicker","availableFilters","userParameter","userAndGroupFilterIds","filterGroups","filterGroup","ownedEntitiesCount","loadingOwnedEntities","ownedEntitiesFilter","allCount","starredEntitiesCount","starredEntitiesFilter","loadingStarredEntities","queryParamUserFilter","selectedUserFilter","setSelectedUserFilter","filterCounts","checkedIcon","EntityProcessingStatusPicker","selectedAdvancedItems","setSelectedAdvancedItems","orphanChange","errorChange","availableAdvancedItems","EntityNamespacePicker","generateYamlExample","yamlText","lineNumbers","entityKind","MockEntityListContextProvider","setFilters","defaultValues","resolvedValue","labels","specifiedLabelValue","toRef","CatalogTable","createEntitySpecificColumns","_a3","baseColumns","showTypeColumn","titlePreamble","defaultActions","isStarred","rows","partOfSystemRelations","ownedByRelations","typeColumn","showPagination","currentKind","currentType","titleDisplay","appTreeApiRef","ExtensionSuspense","disableTracking","source","routable","createExtensionDataRef","inputs","createExtensionInput","extensionData","createExtensionOverrides","createApiExtension","configSchema","extensionInputs","schemaCreator","formatIssue","issue","createPageExtension","z","ExtensionComponent","createNavItemExtension","createThemeExtension","isOwnerOf","possibleOwners","ownerItem","useEntityPermission","permission","loadingEntity","entityError","allowed","loadingPermission","permissionError","entityContentTitleExtensionDataRef","entityFilterExtensionDataRef","applyFilter","buildFilter","filterFunc","kindMatch","typeMatch","createEntityCardExtension","createEntityContentExtension","UnregisterEntity","unregisterEntityOptions","isUnregisterAllowed","onUnregisterEntity","isBoolean","isDisabled","unregisterButton","Cancel","EntityContextMenu","UNSTABLE_extraContextMenuItems","UNSTABLE_contextMenuOptions","onInspectEntity","isAllowed","onOpen","extraItems","Tooltip","IconButton","MoreVert","Popover","BugReport","FileCopyTwoTone","dataKey","EntityLayoutTitle","Box","paramKind","paramNamespace","paramName","EntityLabels","EntityLayout","NotFoundComponent","elementProps","headerTitle","headerType","confirmationDialogOpen","setConfirmationDialogOpen","inspectionDialogOpen","setInspectionDialogOpen","cleanUpAfterRemoval","durationToMilliseconds","duration","years","months","weeks","days","hours","minutes","milliseconds","DEFAULT_CACHE_TTL","DEFAULT_BATCH_DELAY","createDefaultRenderer","_cache","_cacheTtlMs","_kindIcons","_renderer","_getEntityForInitialRender","getEntityForInitialRender_fn","_createLoader","createLoader_fn","_maybeFallbackIcon","maybeFallbackIcon_fn","_DefaultEntityPresentationApi","cacheTtl","batchDelay","renderer","kindIcons","needsLoad","initialSnapshot","aborted","newEntity","updatedSnapshot","cachedEntity","cacheTtlMs","batchDelayMs","now","cb","renderedIcon","DefaultEntityPresentationApi","performMigrationToTheNewBucket","storageApi","oldStarredEntities","targetEntities","old","split","DefaultStarredEntitiesApi","createComponentRouteRef","viewTechDocRouteRef","createFromTemplateRouteRef","CatalogKindHeader","DeleteEntityDialog","isOrphan","EntityOrphanWarning","catalogLink","getRelationWarnings","entityRefRelations","relatedEntities","hasRelationWarnings","EntityRelationWarning","errorFilter","getOwnAndAncestorsErrors","hasCatalogProcessingErrors","EntityProcessingErrorsPanel","ancestorError","ENTITY_SWITCH_KEY","EntitySwitchCaseComponent","EntitySwitch","collection","condition","elementsChildren","AsyncEntitySwitch","getDefaultChildren","renderMultipleMatches","promises","strCmp","strCmpAll","cmpValues","cmpVal","isKind","isEntityWith","isComponentType","types","isResourceType","predicate","isNamespace","namespaces","FilteredEntityLayout","FilterContainer","EntityListContainer","catalogPlugin","fetchApi","CatalogIndexPage","CatalogEntityPage","EntityAboutCard","EntityLinksCard","EntityLabelsCard","EntityHasSystemsCard","EntityHasComponentsCard","EntityHasSubcomponentsCard","EntityHasResourcesCard","EntityDependsOnComponentsCard","EntityDependencyOfComponentsCard","EntityDependsOnResourcesCard","RelatedEntitiesCard","CatalogSearchResultListItem","githubActionsApiRef","GithubActionsClient","runId","pageSize","page","BuildStatus","BuildStatus2","buildRouteRef","githubActionsPlugin","EntityGithubActionsContent","Router$1","EntityLatestGithubActionRunCard","EntityLatestGithubActionsForBranchCard","EntityRecentGithubActionsRunsCard","GITHUB_ACTIONS_ANNOTATION","getProjectNameFromEntity","WorkflowRunStatus","WorkflowIcon","getStatusDescription","conclusion","useWorkflowRunJobs","jobs","job","_c2","useWorkflowRunsDetails","useDownloadWorkflowRunLogs","getHostnameFromEntity","WorkflowRunLogs","inProgress","projectName","jobLogs","logText","getElapsedTime","startDate","StepView","JobListItem","JobsList","WorkflowRunDetails","_k","_l","_m","_n","_o","details","useWorkflowRuns","initialPageSize","total","setTotal","setPage","setPageSize","runs","retry","workflowRunsData","run","generatedColumns","row","routeLink","d1","d2","WorkflowRunsTableView","onChangePage","onChangePageSize","WorkflowRunsTable","tableProps","githubHost","isGithubActionsAvailable","WidgetContent","lastRun","LatestWorkflowRunCard","LatestWorkflowsForBranchCard","firstLine","RecentWorkflowRunsCard","catalogIndexRouteRef","orgPlugin","EntityGroupProfileCard","EntityMembersListCard","EntityOwnershipCard","EntityUserProfileCard","getMembersFromGroups","getDescendantGroupsFromGroup","alreadyQueuedOrExpandedGroupNames","groupQueue","resultantGroupRefs","activeGroupRef","activeGroup","childGroups","currentGroup","childGroup","getAllDesendantMembersForGroupEntity","groupEntity","removeDuplicateEntitiesFrom","entityArray","seenEntities","stringifiedEntity","isDuplicate","MemberComponent","metaName","MembersListCard","memberDisplayTitle","showAggregateMembersToggle","groupName","grpNamespace","groupNamespace","pageChange","pageIndex","showAggregateMembers","setShowAggregateMembers","loadingDescendantMembers","descendantMembers","directMembers","members","nbPages","paginationLabel","pagination","WebLink","LinksGroup","iconResolver","CardTitle$1","GroupProfileCard","refreshEntity","childRelations","parentRelations","entityLocation","allowRefresh","entityMetadataEditUrl","emailHref","infoCardAction","CardTitle","UserProfileCard","memberOfRelations","getQueryParams","ownersEntityRef","selectedEntity","getMemberOfEntityRefs","isEntity","getChildOwnershipEntityRefs","alreadyRetrievedParentRefs","hasChildGroups","unknownChildren","childGroupEntity","childrenRefs","aggregated","getOwners","isAggregated","getOwnedEntitiesByOwners","useGetEntities","entityFilterKind","entityLimit","componentsWithCounters","ownedEntity","topOwnedEntity","EntityCountTile","counter","rawTitle","isLongText","ComponentsGrid","relationsType","OwnershipCard","hideRelationsToggle","relationsToggle","defaultRelationsType","getRelationsType","setRelationsType","MyGroupsSidebarItem","singularTitle","pluralTitle","catalogEntityRoute","AuthorizeResult","AuthorizeResult2","isPermission","comparedPermission","isResourcePermission","resourceType","isCreatePermission","isReadPermission","isUpdatePermission","isDeletePermission","toPermissionEvaluator","permissionAuthorizer","parsedRequests","createPermission","permissionCriteriaSchema","authorizePermissionResponseSchema","queryPermissionResponseSchema","responseSchema","itemSchema","ids","PermissionClient","queries","permissionApi","responsesById","permissionApiRef","IdentityPermissionApi","permissionClient","usePermission","PermissionedRoute","resourceRef","errorComponent","permissionResult","shownElement","RequirePermission","templateEntityV1beta3Validator","isTemplateEntityV1beta3","isObject$1","extractUiSchema","uiSchema","anyOf","oneOf","then","_else","propName","schemaNode","innerUiSchema","depName","extractSchemaFromStep","inputStep","returnSchema","createFieldValidation","fieldValidation","isFieldValidation","hasErrors","createAsyncValidators","rootSchema","formData","pathPrefix","parsedSchema","formValidation","validateForm","validatorName","definitionInSchema","hasItems","doValidateItem","propValue","itemUiSchema","doValidate","itemsSchema","itemsUiSchema","ReviewState","reviewData","backstageReviewOptions","useTemplateSchema","manifest","returningSteps","stepFeatureFlag","useFormDataFromQuery","useTemplateParameterSchema","templateRef","scaffolderApi","useFilteredSchemaProperties","featureFlagKey","filteredSteps","featureFlag","filteredStep","removedPropertyKeys","useTransformSchemaToProps","layouts","objectFieldTemplate","Layout","layout","FieldOverrides","ScaffolderField","displayLabel","rawErrors","help","rawDescription","FieldTemplate","classNames","onDropPropertyClick","onKeyChange","readonly","registry","uiOptions","WrapIfAdditionalTemplate","DescriptionFieldTemplate","WrappedForm","Form","wrappedFields","wrapperProps","templates","Stepper","stepperProps","ReviewStateComponent","ReviewStepComponent","backButtonText","createButtonText","reviewButtonText","setActiveStep","isValidating","setIsValidating","setFormState","setErrors","extensions","validation2","validation","prevActiveStep","handleCreate","currentStep","returnedValidation","stepNum","backLabel","createLabel","reviewLabel","cardBackgroundImage","cardFontColor","getPageTheme","themeForType","SubtitleComponent","CardLink","TemplateCard","template","TemplateGroup","CardComponent","onSelected","titleComponent","Card","additionalLinks","TemplateGroups","templateFilter","TemplateCardComponent","onTemplateSelected","Workflow","workflowProps","templateName","sortedManifest","EmbeddableWorkflow","LinkOutputs","TextOutputs","setIndex","DefaultTemplateOutputs","textOutputIndex","setTextOutputIndex","textOutput","useStepIconStyles","StepIcon","completed","skipped","getMiddle","StepTime","time","setTime","getDelay","calculate","startedAt","formatted","TaskBorder","TaskSteps","isCompleted","isFailed","isSkipped","stepIconProps","TaskLogStream","TemplateCategoryPicker","ScaffolderPageContextMenu","onEditorClicked","onActionsClicked","onTasksClicked","createLegacyScaffolderFieldExtension","FieldExtensionDataHolder","FIELD_EXTENSION_WRAPPER_KEY","FIELD_EXTENSION_KEY","SecretsContext","SecretsContextProvider","secrets","setSecrets","useTemplateSecrets","updateSecrets","currentSecrets","scaffolderApiRef","createScaffolderFieldExtension","ScaffolderFieldExtensions","useCustomFieldExtensions","outlet","LAYOUTS_KEY","LAYOUTS_WRAPPER_KEY","useCustomLayouts","reducer","draft","logLine","currentStepLog","useTaskEventStream","taskId","dispatch","logPusher","retryCount","startStreamLogProcess","task","collectedLogEvents","emitLogs","logs","createScaffolderLayout","LayoutDataHolder","ScaffolderLayouts","ScaffolderClient","templatePath","processEvent","eventSource","inputAfter","makeFieldSchemaFromZod","uiOptionsSchema","entityQueryFilterExpressionSchema","EntityPickerSchema","EntityPicker","idSchema","catalogFilter","buildCatalogFilter","allowArbitraryValues","getLabel","onSelect","convertOpsValues","convertSchemaFiltersToQuery","schemaFilters","entityNamePickerValidation","EntityNamePickerSchema","EntityNamePicker","autoFocus","OwnerPickerSchema","OwnerPicker","ownerUiSchema","RepoUrlPickerSchema","repoPickerValidation","integrationApi","GithubRepoPicker","allowedOwners","ownerItems","GitlabRepoPicker","AzureRepoPicker","allowedOrganizations","organizationItems","BitbucketRepoPicker","allowedProjects","projectItems","GerritRepoPicker","RepoUrlPickerHost","hosts","hostsOptions","RepoUrlPickerRepoName","allowedRepos","repoItems","serializeRepoPickerUrl","parseRepoPickerUrl","RepoUrlPicker","allowedHosts","prevState","updateLocalState","requestUserCredentials","encodedHost","encodedRepoName","hostType","OwnedEntityPickerSchema","OwnedEntityPicker","identityRefs","entityPickerUISchema","buildEntityPickerUISchema","EntityTagsPickerSchema","EntityTagsPicker","tagOptions","setTagOptions","inputValue","setInputValue","inputError","setInputError","tagValidator","helperText","existingTags","tagsRequest","tagFacets","setTags","hasError","addDuplicate","currentTags","newTag","legacySelectedTemplateRouteRef","selectedTemplateRouteRef","scaffolderTaskRouteRef","scaffolderListTaskRouteRef","actionsRouteRef","editRouteRef","MyGroupsPickerSchema","MyGroupsPicker","setGroups","selectedGroup","setSelectedGroup","groupValues","updateChange","scaffolderPlugin","EntityPickerFieldExtension","EntityNamePickerFieldExtension","RepoUrlPickerFieldExtension","OwnerPickerFieldExtension","MyGroupsPickerFieldExtension","ScaffolderPage","OwnedEntityPickerFieldExtension","EntityTagsPickerFieldExtension","LegacyScaffolderPage","TemplateTypePicker","ContextMenu","cancelEnabled","logsVisible","buttonBarVisible","onStartOver","onToggleLogs","onToggleButtonBar","cancelStatus","cancel","OngoingTask","templateRouteRef","taskStream","setLogVisibleState","setButtonBarVisibleState","startOver","_d2","_e2","_f2","triggerCancel","Outputs","global","setTimeout","clearTimeout","XMLHttpRequest","XDomainRequest","ActiveXObject","NativeEventSource","document","Promise","Response","TextDecoder","TextEncoder","AbortController","C","F","originalFetch2","signal","TextDecoderPolyfill","octets","valid","codePoint","shift","octetsCount","bitsNeeded","REPLACER","string","octet","supportsStreamOption","XHRWrapper","xhr","that","silent","onStart","contentType","onProgress","responseText","onFinish","onReadyStateChange","onTimeout","error1","toLowerCase","HeadersPolyfill","all","array","XHRTransport","onStartCallback","onProgressCallback","onFinishCallback","withCredentials","chunk","HeadersWrapper","FetchTransport","controller","textDecoder","readNextChunk","EventTarget","throwError","typeListeners","length","listeners","filtered","Event","MessageEvent","ConnectionEvent","ErrorEvent","WAITING","CONNECTING","OPEN","CLOSED","AFTER_CR","FIELD_START","FIELD","VALUE_START","VALUE","contentTypeRegExp","MINIMUM_DURATION","MAXIMUM_DURATION","parseDuration","def","clampDuration","fire","EventSourcePolyfill","getBestXHRTransport","isFetchSupported","es","lastEventIdQueryParameterName","initialRetry","heartbeatTimeout","lastEventId","wasActivity","textLength","TransportOption","transport","abortController","currentState","dataBuffer","lastEventIdBuffer","eventTypeBuffer","textBuffer","fieldStart","valueStart","close","textChunk","position","nextHeartbeat","requestURL","requestHeaders","R","module","exports","HighlightedSearchResultText","preTag","postTag","terms","DefaultResultListItemComponent","highlight","secondaryAction","lineClamp","HigherOrderDefaultResultListItem","SEARCH_RESULT_LIST_ITEM_EXTENSION","findSearchResultListItemExtensionElement","SearchResultListItemExtension","rank","alignItems","handleClickCapture","createSearchResultListItemExtension","useSearchResultListItemExtensions","SearchResultListItemExtensions","searchApiRef","MockSearchApi","mockedResults","SearchContext","useSearch","useSearchContextCheck","defaultInitialSearchState","useSearchContextValue","initialValue","searchApi","term","setTerm","setTypes","pageLimit","setPageLimit","pageCursor","setPageCursor","prevTerm","resultSet","hasNextPage","hasPreviousPage","fetchNextPage","fetchPreviousPage","LocalSearchContext","SearchContextProvider","inheritParentContextIfAvailable","hasParentContext","propsInitialSearchState","configInitialSearchState","searchContextInitialState","withContext$1","SearchBarBase","onKeyDown","onClear","onSubmit","clearButton","fullWidth","inputProps","endAdornment","forwardedValueRef","prevValue","handleKeyDown","handleClear","inputPlaceholder","startAdornment","clearButtonEndAdornment","SearchBar","withContext","SearchAutocompleteLoadingAdornment","SearchAutocomplete","getOptionLabel","inputDebounceTime","freeSolo","clearOnBlur","dataTestId","getInputValue","renderInput","InputLabelProps","SearchAutocompleteDefaultOption","primaryText","primaryTextTypographyProps","secondaryText","secondaryTextTypographyProps","disableTextTypography","useAsyncFilterValues","fn","debounce","valuesMemo","definiteFn","possibleValue","useDefaultFilterValue","AutocompleteFilter","givenValues","valuesDebounceMs","filterSelectedOptions","limitTags","asyncValues","renderTags","tagValue","getTagProps","CheckboxFilter","checked","SelectFilter","SearchFilter","Element","encodePageCursor","decodePageCursor","SearchPaginationBase","onPageCursorChange","rowsPerPage","labelRowsPerPage","labelDisplayedRows","rowsPerPageOptions","onPageLimitChange","handlePageChange","handleRowsPerPageChange","SearchPagination","handlePageLimitChange","newPageLimit","SearchResultContext","SearchResultApi","SearchResultState","SearchResultComponent","noResultsComponent","SearchResult","SearchResultListLayout","resultItems","renderResultItem","disableRenderingWithNoResults","SearchResultList","defaultRenderResultItem","SearchResultGroupFilterFieldLayout","NullIcon","useSearchResultGroupTextFilterStyles","SearchResultGroupTextFilterField","useSearchResultGroupSelectFilterStyles","SearchResultGroupSelectFilterField","SearchResultGroupLayout","titleProps","filterOptions","renderFilterOption","filterOption","filterFields","renderFilterField","filterField","SearchResultGroup","SearchResultPager","SearchClient","searchPlugin","SearchPage$1","SidebarSearchModal","HomePageSearchBar","UrlUpdater","prevQueryParams","SearchPage","SearchTypeAccordion","expanded","setExpanded","givenTypes","toggleExpanded","definedTypes","resultCounts","counts","numberOfResults","SearchTypeTabs","changeTab","newType","SearchType","techRadarApiRef","MovedState","MovedState2","rings","quadrants","mock","SampleTechRadarApi","TechRadarPage","NESTED_LIST_TOGGLE","EXPANDABLE_NAVIGATION_LOCAL_STORAGE","StyledButton","CollapsedIcon","ExpandedIcon","ExpandableNavigationAddon","hasNavSubLevels","setHasNavSubLevels","checkboxToggles","shouldToggle","isExpanded","shouldExpand","handleState","ADDON_FEEDBACK_CONTAINER_ID","ADDON_FEEDBACK_CONTAINER_SELECTOR","PAGE_EDIT_LINK_SELECTOR","PAGE_FEEDBACK_LINK_SELECTOR","PAGE_MAIN_CONTENT_SELECTOR","resolveBlobUrl","getTitle","ellipsis","getBody","markdownUrl","subheading","commentHeading","commentPlaceholder","highlightedTextAsQuote","facts","useGitTemplate","initialTemplate","editLink","useGitRepository","getIcon","getName","getUrl","encodedTitle","encodedBody","encodedUrl","IssueLink","ReportIssueAddon","buildTemplate","setStyle","defaultTemplate","mainContent","feedbackLink","feedbackContainer","mainContentPosition","selectionPosition","boxShadow","StyledSlider","settings","marks","TextSizeAddon","mark","getValueText","handleChangeCommitted","handleDecreaseClick","handleIncreaseClick","LightBoxAddon","images","dataSourceImages","lightbox","zoomLevelObject","imageWidth","imageHeight","viewportWidth","viewportHeight","widthScale","heightScale","image","dataSourceImage","techdocsModuleAddonsContribPlugin","ExpandableNavigation","ReportIssue","TextSize","LightBox","TECHDOCS_ADDONS_KEY","TECHDOCS_ADDONS_WRAPPER_KEY","TechDocsAddons","getDataKeyByName","createTechDocsAddonExtension","TechDocsAddon","getTechDocsAddonByName","getAllTechDocsAddons","getAllTechDocsAddonsData","useTechDocsAddons","findAddonByData","nameKey","renderComponentByName","renderComponentsByLocation","techdocsApiRef","techdocsStorageApiRef","toLowercaseEntityRefMaybe","areEntityRefsEqual","prevEntityRef","nextEntityRef","defaultTechDocsReaderPageValue","TechDocsReaderPageContext","TechDocsReaderPageProvider","techdocsApi","entityMetadata","setTitle","setSubtitle","shadowRoot","setShadowRoot","prevProps","nextProps","useTechDocsReaderPage","TechDocsAddonLocations","SHADOW_DOM_STYLE_LOAD_EVENT","useShadowDomStylesEvents","handleLoad","useShadowDomStylesLoading","TechDocsShadowDom","onAppend","jss","setJss","shadowHost","useShadowRoot","useShadowRootElements","selectors","nodeList","isValidSelection","newSelection","useShadowRootSelection","waitMillis","setSelection","handleSelectionChange","shadowDocument","techdocsPlugin","TechdocsPage","EntityTechdocsContent","TechDocsCustomHome","TechDocsIndexPage","TechDocsReaderPage","TechDocsSearchResultListItem","TECHDOCS_EXTERNAL_ANNOTATION$1","EntityPageDocs","TECHDOCS_ANNOTATION","TECHDOCS_EXTERNAL_ANNOTATION","toLowerMaybe","actionFactories","customTitle","DocsTable","getRouteToReaderPageFor","documents","paging","EntityListDocsTable","TechDocsPageWrapper","TechDocsFilter","TechDocsPicker","DefaultTechDocsHome","TechDocsIndexPage$1","calculateDisplayState","contentLoading","activeSyncState","useReaderState","techdocsStorageApi","contentReload","entityDocs","buildingTimeout","log","TechDocsReaderContext","useTechDocsReader","TechDocsReaderProvider","withTechDocsReaderProvider","isTechDocsSearchResult","TechDocsSearchBar","entityId","searchVal","setOptions","mounted","searchResults","handleSelection","TechDocsSearch","useDrawerStyles","TechDocsBuildLogsDrawerContent","buildLog","TechDocsBuildLogs","TechDocsNotFound","errorMessage","techdocsBuilder","TechDocsStateIndicator","StateAlert","contentErrorMessage","syncErrorMessage","MKDOCS_CSS","GOOGLE_FONTS","GSTATIC_FONTS","isLink","isSafe$1","isMkdocsCss","isGoogleFonts","isGstaticFonts","removeUnsafeLinks","isIframe","isSafe","src","removeUnsafeIframes","useSanitizerConfig","useSanitizerTransformer","dom","variables","SIDEBAR_WIDTH","sidebar","headings","typeset","heading","lineHeight","fontWeight","fontSize","factor","animations","rules","useSidebar","useRuleStyles","rule","useStylesTransformer","isSvgNeedingInlining","attrName","attrVal","apiOrigin","isSrcToSvg","isRelativeUrl","pointsToOurBackend","addBaseUrl","updateDom","attributeName","elem","elemAttribute","svgContent","ReactDOMPromise","renderReactElement","ReactDOM","addGitFeedbackLink","sourceAnchor","sourceURL","issueTitle","issueDesc","gitUrl","gitInfo","repoPath","addSidebarToggle","mkdocsToggleSidebar","article","toggleSidebar","rewriteDocLinks","normalizedWindowLocation","normalizeUrl","addLinkClickListener","CopyToClipboardTooltip","CopyToClipboardIcon","CopyToClipboardButton","copyToClipboard2","codes","code","removeMkdocsHeader","simplifyMkdocsFooter","onCssReady","onLoading","onLoaded","handleShadowDomStyleLoad","scrollIntoNavigation","activeNavItems","activeNavItem","checkbox","html","transformers","transformer","resolveUrlToRelative","parsedAppUrl","appUrlPath","relativeUrl","parsedUrl","useNavigateUrl","MOBILE_MEDIA_QUERY","useTechDocsReaderDom","isMobileMedia","sanitizerTransformer","stylesTransformer","rawPage","setDom","isStyleLoading","updateSidebarPosition","pageTop","domTop","tabsHeight","updateFooterWidth","footer","preRender","rawContent","contentPath","postRender","transformedElement","modifierActive","shouldReplaceContent","preTransformedDomElement","postTransformedDomElement","TechDocsReaderPageContentAddons","addons","contentElement","primarySidebarElement","primarySidebarAddonLocation","secondarySidebarElement","secondarySidebarAddonLocation","TechDocsReaderPageContent","withSearch","onReady","entityMetadataLoading","hashElement","handleAppend","newShadowRoot","Reader","skeleton","TechDocsReaderPageHeader","metadataLoading","site_description","tabTitle","locationMetadata","lifecycle","docsRootLink","TechDocsReaderPageSubheader","subheaderAddons","settingsAddons","TechDocsReaderLayout","withHeader","grandChild","asListItem","asLink","TextItem","resultTitle","resultName","ListItemWrapper","TechDocsClient","requestUrl","TechDocsStorageClient","logHandler","oldBaseUrl","newBaseUrl","rootDocsRouteRef","rootCatalogDocsRouteRef","EXAMPLE$1","EmptyProviders","size","ProviderSettingsAvatar","emptyProfile","ProviderSettingsItem","signedIn","setSignedIn","setProfile","sessionState","profileResponse","DefaultProviderSettings","configuredProviders","UserSettingsAuthProviders","providerSettings","providersConfig","EXAMPLE","EmptyFlags","getSecondaryText","FlagItem","toggleHandler","sortFlags","flags","activeFlags","idleFlags","UserSettingsFeatureFlags","inputRef","initialFeatureFlags","initialFeatureFlagsSorted","initialFlagState","filterInput","setFilterInput","toggleFlag","flagName","clearFilterInput","filteredFeatureFlags","useUserProfile","UserSettingsSignInAvatar","UserSettingsMenu","UserSettingsProfileCard","UserSettingsPinToggle","ThemeIcon","activeId","TooltipToggleButton$1","UserSettingsThemeToggle","activeThemeId","themeIds","handleSetTheme","newThemeId","it","themeIcon","themeTitle","TooltipToggleButton","UserSettingsLanguageToggle","languageObservable","currentLanguage","handleSetLanguage","newLanguage","UserSettingsAppearanceCard","UserSettingsIdentityCard","UserSettingsGeneral","LAYOUT_DATA_KEY","LAYOUT_ROUTE_DATA_KEY","SettingsLayout","DefaultSettingsPage","SettingsPage","settingsRouteRef","UserSettingsPage","userSettingsTranslationRef","JSON_HEADERS","UserSettingsStorage","fetchUrl","rawValue","encodedNamespace","encodedKey","USER_SETTINGS_TAB_KEY","UserSettingsTab","getGlobalObject","globalObject","makeKey","getOrCreateGlobalSingleton","createVersionedValueMap","versions","createVersionedContext","useVersionedContext","createVersionedContextForTesting"],"sourceRoot":""}